function ule(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in e)){const s=Object.getOwnPropertyDescriptor(r,n);s&&Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();var Jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $5={exports:{}},p1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $8;function hle(){if($8)return p1;$8=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,n,s){var a=null;if(s!==void 0&&(a=""+s),n.key!==void 0&&(a=""+n.key),"key"in n){s={};for(var o in n)o!=="key"&&(s[o]=n[o])}else s=n;return n=s.ref,{$$typeof:e,type:r,key:a,ref:n!==void 0?n:null,props:s}}return p1.Fragment=t,p1.jsx=i,p1.jsxs=i,p1}var J8;function dle(){return J8||(J8=1,$5.exports=hle()),$5.exports}var E=dle(),J5={exports:{}},m1={},eM={exports:{}},tM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eN;function fle(){return eN||(eN=1,function(e){function t(q,Y){var X=q.length;q.push(Y);e:for(;0<X;){var ne=X-1>>>1,F=q[ne];if(0<n(F,Y))q[ne]=Y,q[X]=F,X=ne;else break e}}function i(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Y=q[0],X=q.pop();if(X!==Y){q[0]=X;e:for(var ne=0,F=q.length,K=F>>>1;ne<K;){var re=2*(ne+1)-1,oe=q[re],ce=re+1,de=q[ce];if(0>n(oe,X))ce<F&&0>n(de,oe)?(q[ne]=de,q[ce]=X,ne=ce):(q[ne]=oe,q[re]=X,ne=re);else if(ce<F&&0>n(de,X))q[ne]=de,q[ce]=X,ne=ce;else break e}}return Y}function n(q,Y){var X=q.sortIndex-Y.sortIndex;return X!==0?X:q.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,f=3,m=!1,g=!1,v=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function A(q){for(var Y=i(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=q)r(c),Y.sortIndex=Y.expirationTime,t(l,Y);else break;Y=i(c)}}function M(q){if(v=!1,A(q),!g)if(i(l)!==null)g=!0,C||(C=!0,k());else{var Y=i(c);Y!==null&&$(M,Y.startTime-q)}}var C=!1,D=-1,T=5,R=-1;function O(){return x?!0:!(e.unstable_now()-R<T)}function L(){if(x=!1,C){var q=e.unstable_now();R=q;var Y=!0;try{e:{g=!1,v&&(v=!1,S(D),D=-1),m=!0;var X=f;try{t:{for(A(q),h=i(l);h!==null&&!(h.expirationTime>q&&O());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,f=h.priorityLevel;var F=ne(h.expirationTime<=q);if(q=e.unstable_now(),typeof F=="function"){h.callback=F,A(q),Y=!0;break t}h===i(l)&&r(l),A(q)}else r(l);h=i(l)}if(h!==null)Y=!0;else{var K=i(c);K!==null&&$(M,K.startTime-q),Y=!1}}break e}finally{h=null,f=X,m=!1}Y=void 0}}finally{Y?k():C=!1}}}var k;if(typeof _=="function")k=function(){_(L)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,V=B.port2;B.port1.onmessage=L,k=function(){V.postMessage(null)}}else k=function(){b(L,0)};function $(q,Y){D=b(function(){q(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(q){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var X=f;f=Y;try{return q()}finally{f=X}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=f;f=q;try{return Y()}finally{f=X}},e.unstable_scheduleCallback=function(q,Y,X){var ne=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ne+X:ne):X=ne,q){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=X+F,q={id:u++,callback:Y,priorityLevel:q,startTime:X,expirationTime:F,sortIndex:-1},X>ne?(q.sortIndex=X,t(c,q),i(l)===null&&q===i(c)&&(v?(S(D),D=-1):v=!0,$(M,X-ne))):(q.sortIndex=F,t(l,q),g||m||(g=!0,C||(C=!0,k()))),q},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(q){var Y=f;return function(){var X=f;f=Y;try{return q.apply(this,arguments)}finally{f=X}}}}(tM)),tM}var tN;function ple(){return tN||(tN=1,eM.exports=fle()),eM.exports}var iM={exports:{}},Si={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iN;function mle(){if(iN)return Si;iN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function f(F){return F===null||typeof F!="object"?null:(F=h&&F[h]||F["@@iterator"],typeof F=="function"?F:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function x(F,K,re){this.props=F,this.context=K,this.refs=v,this.updater=re||m}x.prototype.isReactComponent={},x.prototype.setState=function(F,K){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,K,"setState")},x.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function b(){}b.prototype=x.prototype;function S(F,K,re){this.props=F,this.context=K,this.refs=v,this.updater=re||m}var _=S.prototype=new b;_.constructor=S,g(_,x.prototype),_.isPureReactComponent=!0;var A=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function D(F,K,re,oe,ce,de){return re=de.ref,{$$typeof:e,type:F,key:K,ref:re!==void 0?re:null,props:de}}function T(F,K){return D(F.type,K,void 0,void 0,void 0,F.props)}function R(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function O(F){var K={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(re){return K[re]})}var L=/\/+/g;function k(F,K){return typeof F=="object"&&F!==null&&F.key!=null?O(""+F.key):K.toString(36)}function B(){}function V(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(B,B):(F.status="pending",F.then(function(K){F.status==="pending"&&(F.status="fulfilled",F.value=K)},function(K){F.status==="pending"&&(F.status="rejected",F.reason=K)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function $(F,K,re,oe,ce){var de=typeof F;(de==="undefined"||de==="boolean")&&(F=null);var se=!1;if(F===null)se=!0;else switch(de){case"bigint":case"string":case"number":se=!0;break;case"object":switch(F.$$typeof){case e:case t:se=!0;break;case u:return se=F._init,$(se(F._payload),K,re,oe,ce)}}if(se)return ce=ce(F),se=oe===""?"."+k(F,0):oe,A(ce)?(re="",se!=null&&(re=se.replace(L,"$&/")+"/"),$(ce,K,re,"",function(ye){return ye})):ce!=null&&(R(ce)&&(ce=T(ce,re+(ce.key==null||F&&F.key===ce.key?"":(""+ce.key).replace(L,"$&/")+"/")+se)),K.push(ce)),1;se=0;var xe=oe===""?".":oe+":";if(A(F))for(var fe=0;fe<F.length;fe++)oe=F[fe],de=xe+k(oe,fe),se+=$(oe,K,re,de,ce);else if(fe=f(F),typeof fe=="function")for(F=fe.call(F),fe=0;!(oe=F.next()).done;)oe=oe.value,de=xe+k(oe,fe++),se+=$(oe,K,re,de,ce);else if(de==="object"){if(typeof F.then=="function")return $(V(F),K,re,oe,ce);throw K=String(F),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return se}function q(F,K,re){if(F==null)return F;var oe=[],ce=0;return $(F,oe,"","",function(de){return K.call(re,de,ce++)}),oe}function Y(F){if(F._status===-1){var K=F._result;K=K(),K.then(function(re){(F._status===0||F._status===-1)&&(F._status=1,F._result=re)},function(re){(F._status===0||F._status===-1)&&(F._status=2,F._result=re)}),F._status===-1&&(F._status=0,F._result=K)}if(F._status===1)return F._result.default;throw F._result}var X=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function ne(){}return Si.Children={map:q,forEach:function(F,K,re){q(F,function(){K.apply(this,arguments)},re)},count:function(F){var K=0;return q(F,function(){K++}),K},toArray:function(F){return q(F,function(K){return K})||[]},only:function(F){if(!R(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Si.Component=x,Si.Fragment=i,Si.Profiler=n,Si.PureComponent=S,Si.StrictMode=r,Si.Suspense=l,Si.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Si.__COMPILER_RUNTIME={__proto__:null,c:function(F){return M.H.useMemoCache(F)}},Si.cache=function(F){return function(){return F.apply(null,arguments)}},Si.cloneElement=function(F,K,re){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var oe=g({},F.props),ce=F.key,de=void 0;if(K!=null)for(se in K.ref!==void 0&&(de=void 0),K.key!==void 0&&(ce=""+K.key),K)!C.call(K,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&K.ref===void 0||(oe[se]=K[se]);var se=arguments.length-2;if(se===1)oe.children=re;else if(1<se){for(var xe=Array(se),fe=0;fe<se;fe++)xe[fe]=arguments[fe+2];oe.children=xe}return D(F.type,ce,void 0,void 0,de,oe)},Si.createContext=function(F){return F={$$typeof:a,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:s,_context:F},F},Si.createElement=function(F,K,re){var oe,ce={},de=null;if(K!=null)for(oe in K.key!==void 0&&(de=""+K.key),K)C.call(K,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ce[oe]=K[oe]);var se=arguments.length-2;if(se===1)ce.children=re;else if(1<se){for(var xe=Array(se),fe=0;fe<se;fe++)xe[fe]=arguments[fe+2];ce.children=xe}if(F&&F.defaultProps)for(oe in se=F.defaultProps,se)ce[oe]===void 0&&(ce[oe]=se[oe]);return D(F,de,void 0,void 0,null,ce)},Si.createRef=function(){return{current:null}},Si.forwardRef=function(F){return{$$typeof:o,render:F}},Si.isValidElement=R,Si.lazy=function(F){return{$$typeof:u,_payload:{_status:-1,_result:F},_init:Y}},Si.memo=function(F,K){return{$$typeof:c,type:F,compare:K===void 0?null:K}},Si.startTransition=function(F){var K=M.T,re={};M.T=re;try{var oe=F(),ce=M.S;ce!==null&&ce(re,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ne,X)}catch(de){X(de)}finally{M.T=K}},Si.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Si.use=function(F){return M.H.use(F)},Si.useActionState=function(F,K,re){return M.H.useActionState(F,K,re)},Si.useCallback=function(F,K){return M.H.useCallback(F,K)},Si.useContext=function(F){return M.H.useContext(F)},Si.useDebugValue=function(){},Si.useDeferredValue=function(F,K){return M.H.useDeferredValue(F,K)},Si.useEffect=function(F,K,re){var oe=M.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(F,K)},Si.useId=function(){return M.H.useId()},Si.useImperativeHandle=function(F,K,re){return M.H.useImperativeHandle(F,K,re)},Si.useInsertionEffect=function(F,K){return M.H.useInsertionEffect(F,K)},Si.useLayoutEffect=function(F,K){return M.H.useLayoutEffect(F,K)},Si.useMemo=function(F,K){return M.H.useMemo(F,K)},Si.useOptimistic=function(F,K){return M.H.useOptimistic(F,K)},Si.useReducer=function(F,K,re){return M.H.useReducer(F,K,re)},Si.useRef=function(F){return M.H.useRef(F)},Si.useState=function(F){return M.H.useState(F)},Si.useSyncExternalStore=function(F,K,re){return M.H.useSyncExternalStore(F,K,re)},Si.useTransition=function(){return M.H.useTransition()},Si.version="19.1.0",Si}var rN;function Jh(){return rN||(rN=1,iM.exports=mle()),iM.exports}var rM={exports:{}},ha={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nN;function gle(){if(nN)return ha;nN=1;var e=Jh();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},n=Symbol.for("react.portal");function s(l,c,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:h==null?null:""+h,children:l,containerInfo:c,implementation:u}}var a=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return ha.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ha.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return s(l,c,null,u)},ha.flushSync=function(l){var c=a.T,u=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=c,r.p=u,r.d.f()}},ha.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},ha.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ha.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,h=o(u,c.crossOrigin),f=typeof c.integrity=="string"?c.integrity:void 0,m=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:f,fetchPriority:m}):u==="script"&&r.d.X(l,{crossOrigin:h,integrity:f,fetchPriority:m,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},ha.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},ha.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,h=o(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},ha.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},ha.requestFormReset=function(l){r.d.r(l)},ha.unstable_batchedUpdates=function(l,c){return l(c)},ha.useFormState=function(l,c,u){return a.H.useFormState(l,c,u)},ha.useFormStatus=function(){return a.H.useHostTransitionStatus()},ha.version="19.1.0",ha}var sN;function u6(){if(sN)return rM.exports;sN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),rM.exports=gle(),rM.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aN;function vle(){if(aN)return m1;aN=1;var e=ple(),t=Jh(),i=u6();function r(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function s(d){var p=d,y=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(y=p.return),d=p.return;while(d)}return p.tag===3?y:null}function a(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function o(d){if(s(d)!==d)throw Error(r(188))}function l(d){var p=d.alternate;if(!p){if(p=s(d),p===null)throw Error(r(188));return p!==d?null:d}for(var y=d,w=p;;){var I=y.return;if(I===null)break;var z=I.alternate;if(z===null){if(w=I.return,w!==null){y=w;continue}break}if(I.child===z.child){for(z=I.child;z;){if(z===y)return o(I),d;if(z===w)return o(I),p;z=z.sibling}throw Error(r(188))}if(y.return!==w.return)y=I,w=z;else{for(var W=!1,te=I.child;te;){if(te===y){W=!0,y=I,w=z;break}if(te===w){W=!0,w=I,y=z;break}te=te.sibling}if(!W){for(te=z.child;te;){if(te===y){W=!0,y=z,w=I;break}if(te===w){W=!0,w=z,y=I;break}te=te.sibling}if(!W)throw Error(r(189))}}if(y.alternate!==w)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?d:p}function c(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d;for(d=d.child;d!==null;){if(p=c(d),p!==null)return p;d=d.sibling}return null}var u=Object.assign,h=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),_=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function k(d){return d===null||typeof d!="object"?null:(d=L&&d[L]||d["@@iterator"],typeof d=="function"?d:null)}var B=Symbol.for("react.client.reference");function V(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===B?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case g:return"Fragment";case x:return"Profiler";case v:return"StrictMode";case M:return"Suspense";case C:return"SuspenseList";case R:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case m:return"Portal";case _:return(d.displayName||"Context")+".Provider";case S:return(d._context.displayName||"Context")+".Consumer";case A:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case D:return p=d.displayName||null,p!==null?p:V(d.type)||"Memo";case T:p=d._payload,d=d._init;try{return V(d(p))}catch{}}return null}var $=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ne=[],F=-1;function K(d){return{current:d}}function re(d){0>F||(d.current=ne[F],ne[F]=null,F--)}function oe(d,p){F++,ne[F]=d.current,d.current=p}var ce=K(null),de=K(null),se=K(null),xe=K(null);function fe(d,p){switch(oe(se,p),oe(de,d),oe(ce,null),p.nodeType){case 9:case 11:d=(d=p.documentElement)&&(d=d.namespaceURI)?T8(d):0;break;default:if(d=p.tagName,p=p.namespaceURI)p=T8(p),d=C8(p,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}re(ce),oe(ce,d)}function ye(){re(ce),re(de),re(se)}function _e(d){d.memoizedState!==null&&oe(xe,d);var p=ce.current,y=C8(p,d.type);p!==y&&(oe(de,d),oe(ce,y))}function Te(d){de.current===d&&(re(ce),re(de)),xe.current===d&&(re(xe),c1._currentValue=X)}var Ce=Object.prototype.hasOwnProperty,Le=e.unstable_scheduleCallback,Ke=e.unstable_cancelCallback,Xe=e.unstable_shouldYield,pt=e.unstable_requestPaint,ct=e.unstable_now,ot=e.unstable_getCurrentPriorityLevel,rt=e.unstable_ImmediatePriority,Dt=e.unstable_UserBlockingPriority,At=e.unstable_NormalPriority,he=e.unstable_LowPriority,ie=e.unstable_IdlePriority,Me=e.log,$e=e.unstable_setDisableYieldValue,Z=null,We=null;function dt(d){if(typeof Me=="function"&&$e(d),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(Z,d)}catch{}}var lt=Math.clz32?Math.clz32:ft,Ve=Math.log,Tt=Math.LN2;function ft(d){return d>>>=0,d===0?32:31-(Ve(d)/Tt|0)|0}var St=256,Ct=4194304;function bt(d){var p=d&42;if(p!==0)return p;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function It(d,p,y){var w=d.pendingLanes;if(w===0)return 0;var I=0,z=d.suspendedLanes,W=d.pingedLanes;d=d.warmLanes;var te=w&134217727;return te!==0?(w=te&~z,w!==0?I=bt(w):(W&=te,W!==0?I=bt(W):y||(y=te&~d,y!==0&&(I=bt(y))))):(te=w&~z,te!==0?I=bt(te):W!==0?I=bt(W):y||(y=w&~d,y!==0&&(I=bt(y)))),I===0?0:p!==0&&p!==I&&(p&z)===0&&(z=I&-I,y=p&-p,z>=y||z===32&&(y&4194048)!==0)?p:I}function Ei(d,p){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&p)===0}function er(d,p){switch(d){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function be(){var d=St;return St<<=1,(St&4194048)===0&&(St=256),d}function Ue(){var d=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),d}function qe(d){for(var p=[],y=0;31>y;y++)p.push(d);return p}function ut(d,p){d.pendingLanes|=p,p!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function Bt(d,p,y,w,I,z){var W=d.pendingLanes;d.pendingLanes=y,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=y,d.entangledLanes&=y,d.errorRecoveryDisabledLanes&=y,d.shellSuspendCounter=0;var te=d.entanglements,ve=d.expirationTimes,Oe=d.hiddenUpdates;for(y=W&~y;0<y;){var Ye=31-lt(y),et=1<<Ye;te[Ye]=0,ve[Ye]=-1;var ke=Oe[Ye];if(ke!==null)for(Oe[Ye]=null,Ye=0;Ye<ke.length;Ye++){var ze=ke[Ye];ze!==null&&(ze.lane&=-536870913)}y&=~et}w!==0&&si(d,w,0),z!==0&&I===0&&d.tag!==0&&(d.suspendedLanes|=z&~(W&~p))}function si(d,p,y){d.pendingLanes|=p,d.suspendedLanes&=~p;var w=31-lt(p);d.entangledLanes|=p,d.entanglements[w]=d.entanglements[w]|1073741824|y&4194090}function hi(d,p){var y=d.entangledLanes|=p;for(d=d.entanglements;y;){var w=31-lt(y),I=1<<w;I&p|d[w]&p&&(d[w]|=p),y&=~I}}function Hi(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function Yn(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Pi(){var d=Y.p;return d!==0?d:(d=window.event,d===void 0?32:q8(d.type))}function In(d,p){var y=Y.p;try{return Y.p=d,p()}finally{Y.p=y}}var bi=Math.random().toString(36).slice(2),gr="__reactFiber$"+bi,zr="__reactProps$"+bi,Rr="__reactContainer$"+bi,fs="__reactEvents$"+bi,ue="__reactListeners$"+bi,De="__reactHandles$"+bi,Fe="__reactResources$"+bi,Ae="__reactMarker$"+bi;function Ne(d){delete d[gr],delete d[zr],delete d[fs],delete d[ue],delete d[De]}function xt(d){var p=d[gr];if(p)return p;for(var y=d.parentNode;y;){if(p=y[Rr]||y[gr]){if(y=p.alternate,p.child!==null||y!==null&&y.child!==null)for(d=I8(d);d!==null;){if(y=d[gr])return y;d=I8(d)}return p}d=y,y=d.parentNode}return null}function kt(d){if(d=d[gr]||d[Rr]){var p=d.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return d}return null}function zt(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d.stateNode;throw Error(r(33))}function _t(d){var p=d[Fe];return p||(p=d[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Ht(d){d[Ae]=!0}var st=new Set,me={};function Be(d,p){ht(d,p),ht(d+"Capture",p)}function ht(d,p){for(me[d]=p,d=0;d<p.length;d++)st.add(p[d])}var wi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tr={},ti={};function Vt(d){return Ce.call(ti,d)?!0:Ce.call(tr,d)?!1:wi.test(d)?ti[d]=!0:(tr[d]=!0,!1)}function cr(d,p,y){if(Vt(p))if(y===null)d.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":d.removeAttribute(p);return;case"boolean":var w=p.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){d.removeAttribute(p);return}}d.setAttribute(p,""+y)}}function Ut(d,p,y){if(y===null)d.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(p);return}d.setAttribute(p,""+y)}}function ir(d,p,y,w){if(w===null)d.removeAttribute(y);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(y);return}d.setAttributeNS(p,y,""+w)}}var Zi,ca;function en(d){if(Zi===void 0)try{throw Error()}catch(y){var p=y.stack.trim().match(/\n( *(at )?)/);Zi=p&&p[1]||"",ca=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zi+d+ca}var Q=!1;function ee(d,p){if(!d||Q)return"";Q=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(p){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(ze){var ke=ze}Reflect.construct(d,[],et)}else{try{et.call()}catch(ze){ke=ze}d.call(et.prototype)}}else{try{throw Error()}catch(ze){ke=ze}(et=d())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(ze){if(ze&&ke&&typeof ze.stack=="string")return[ze.stack,ke.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=w.DetermineComponentFrameRoot(),W=z[0],te=z[1];if(W&&te){var ve=W.split(`
`),Oe=te.split(`
`);for(I=w=0;w<ve.length&&!ve[w].includes("DetermineComponentFrameRoot");)w++;for(;I<Oe.length&&!Oe[I].includes("DetermineComponentFrameRoot");)I++;if(w===ve.length||I===Oe.length)for(w=ve.length-1,I=Oe.length-1;1<=w&&0<=I&&ve[w]!==Oe[I];)I--;for(;1<=w&&0<=I;w--,I--)if(ve[w]!==Oe[I]){if(w!==1||I!==1)do if(w--,I--,0>I||ve[w]!==Oe[I]){var Ye=`
`+ve[w].replace(" at new "," at ");return d.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",d.displayName)),Ye}while(1<=w&&0<=I);break}}}finally{Q=!1,Error.prepareStackTrace=y}return(y=d?d.displayName||d.name:"")?en(y):""}function ge(d){switch(d.tag){case 26:case 27:case 5:return en(d.type);case 16:return en("Lazy");case 13:return en("Suspense");case 19:return en("SuspenseList");case 0:case 15:return ee(d.type,!1);case 11:return ee(d.type.render,!1);case 1:return ee(d.type,!0);case 31:return en("Activity");default:return""}}function le(d){try{var p="";do p+=ge(d),d=d.return;while(d);return p}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function we(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function nt(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function wo(d){var p=nt(d)?"checked":"value",y=Object.getOwnPropertyDescriptor(d.constructor.prototype,p),w=""+d[p];if(!d.hasOwnProperty(p)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var I=y.get,z=y.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return I.call(this)},set:function(W){w=""+W,z.call(this,W)}}),Object.defineProperty(d,p,{enumerable:y.enumerable}),{getValue:function(){return w},setValue:function(W){w=""+W},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function xc(d){d._valueTracker||(d._valueTracker=wo(d))}function bc(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var y=p.getValue(),w="";return d&&(w=nt(d)?d.checked?"true":"false":d.value),d=w,d!==y?(p.setValue(d),!0):!1}function Dl(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var rd=/[\n"\\]/g;function Qr(d){return d.replace(rd,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function So(d,p,y,w,I,z,W,te){d.name="",W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?d.type=W:d.removeAttribute("type"),p!=null?W==="number"?(p===0&&d.value===""||d.value!=p)&&(d.value=""+we(p)):d.value!==""+we(p)&&(d.value=""+we(p)):W!=="submit"&&W!=="reset"||d.removeAttribute("value"),p!=null?nd(d,W,we(p)):y!=null?nd(d,W,we(y)):w!=null&&d.removeAttribute("value"),I==null&&z!=null&&(d.defaultChecked=!!z),I!=null&&(d.checked=I&&typeof I!="function"&&typeof I!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?d.name=""+we(te):d.removeAttribute("name")}function Jf(d,p,y,w,I,z,W,te){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(d.type=z),p!=null||y!=null){if(!(z!=="submit"&&z!=="reset"||p!=null))return;y=y!=null?""+we(y):"",p=p!=null?""+we(p):y,te||p===d.value||(d.value=p),d.defaultValue=p}w=w??I,w=typeof w!="function"&&typeof w!="symbol"&&!!w,d.checked=te?d.checked:!!w,d.defaultChecked=!!w,W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(d.name=W)}function nd(d,p,y){p==="number"&&Dl(d.ownerDocument)===d||d.defaultValue===""+y||(d.defaultValue=""+y)}function Bu(d,p,y,w){if(d=d.options,p){p={};for(var I=0;I<y.length;I++)p["$"+y[I]]=!0;for(y=0;y<d.length;y++)I=p.hasOwnProperty("$"+d[y].value),d[y].selected!==I&&(d[y].selected=I),I&&w&&(d[y].defaultSelected=!0)}else{for(y=""+we(y),p=null,I=0;I<d.length;I++){if(d[I].value===y){d[I].selected=!0,w&&(d[I].defaultSelected=!0);return}p!==null||d[I].disabled||(p=d[I])}p!==null&&(p.selected=!0)}}function Ar(d,p,y){if(p!=null&&(p=""+we(p),p!==d.value&&(d.value=p),y==null)){d.defaultValue!==p&&(d.defaultValue=p);return}d.defaultValue=y!=null?""+we(y):""}function ep(d,p,y,w){if(p==null){if(w!=null){if(y!=null)throw Error(r(92));if($(w)){if(1<w.length)throw Error(r(93));w=w[0]}y=w}y==null&&(y=""),p=y}y=we(p),d.defaultValue=y,w=d.textContent,w===y&&w!==""&&w!==null&&(d.value=w)}function Ho(d,p){if(p){var y=d.firstChild;if(y&&y===d.lastChild&&y.nodeType===3){y.nodeValue=p;return}}d.textContent=p}var tp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bw(d,p,y){var w=p.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?w?d.setProperty(p,""):p==="float"?d.cssFloat="":d[p]="":w?d.setProperty(p,y):typeof y!="number"||y===0||tp.has(p)?p==="float"?d.cssFloat=y:d[p]=(""+y).trim():d[p]=y+"px"}function xy(d,p,y){if(p!=null&&typeof p!="object")throw Error(r(62));if(d=d.style,y!=null){for(var w in y)!y.hasOwnProperty(w)||p!=null&&p.hasOwnProperty(w)||(w.indexOf("--")===0?d.setProperty(w,""):w==="float"?d.cssFloat="":d[w]="");for(var I in p)w=p[I],p.hasOwnProperty(I)&&y[I]!==w&&Bw(d,I,w)}else for(var z in p)p.hasOwnProperty(z)&&Bw(d,z,p[z])}function by(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $m(d){return sC.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var ju=null;function Go(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Nu=null,Vu=null;function wy(d){var p=kt(d);if(p&&(d=p.stateNode)){var y=d[zr]||null;e:switch(d=p.stateNode,p.type){case"input":if(So(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),p=y.name,y.type==="radio"&&p!=null){for(y=d;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Qr(""+p)+'"][type="radio"]'),p=0;p<y.length;p++){var w=y[p];if(w!==d&&w.form===d.form){var I=w[zr]||null;if(!I)throw Error(r(90));So(w,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(p=0;p<y.length;p++)w=y[p],w.form===d.form&&bc(w)}break e;case"textarea":Ar(d,y.value,y.defaultValue);break e;case"select":p=y.value,p!=null&&Bu(d,!!y.multiple,p,!1)}}}var wc=!1;function jw(d,p,y){if(wc)return d(p,y);wc=!0;try{var w=d(p);return w}finally{if(wc=!1,(Nu!==null||Vu!==null)&&(I2(),Nu&&(p=Nu,d=Vu,Vu=Nu=null,wy(p),d)))for(p=0;p<d.length;p++)wy(d[p])}}function ip(d,p){var y=d.stateNode;if(y===null)return null;var w=y[zr]||null;if(w===null)return null;y=w[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(d=d.type,w=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!w;break e;default:d=!1}if(d)return null;if(y&&typeof y!="function")throw Error(r(231,p,typeof y));return y}var Il=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wo=!1;if(Il)try{var rp={};Object.defineProperty(rp,"passive",{get:function(){Wo=!0}}),window.addEventListener("test",rp,rp),window.removeEventListener("test",rp,rp)}catch{Wo=!1}var Sc=null,sd=null,Uu=null;function Sy(){if(Uu)return Uu;var d,p=sd,y=p.length,w,I="value"in Sc?Sc.value:Sc.textContent,z=I.length;for(d=0;d<y&&p[d]===I[d];d++);var W=y-d;for(w=1;w<=W&&p[y-w]===I[z-w];w++);return Uu=I.slice(d,1<w?1-w:void 0)}function _c(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function Ec(){return!0}function _y(){return!1}function ps(d){function p(y,w,I,z,W){this._reactName=y,this._targetInst=I,this.type=w,this.nativeEvent=z,this.target=W,this.currentTarget=null;for(var te in d)d.hasOwnProperty(te)&&(y=d[te],this[te]=y?y(z):z[te]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?Ec:_y,this.isPropagationStopped=_y,this}return u(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Ec)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Ec)},persist:function(){},isPersistent:Ec}),p}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jm=ps(ur),np=u({},ur,{view:0,detail:0}),Nw=ps(np),eg,tg,Ac,sp=u({},np,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lp,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Ac&&(Ac&&d.type==="mousemove"?(eg=d.screenX-Ac.screenX,tg=d.screenY-Ac.screenY):tg=eg=0,Ac=d),eg)},movementY:function(d){return"movementY"in d?d.movementY:tg}}),qo=ps(sp),Vw=u({},sp,{dataTransfer:0}),aC=ps(Vw),ap=u({},np,{relatedTarget:0}),ig=ps(ap),Ey=u({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),rg=ps(Ey),Uw=u({},ur,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),ng=ps(Uw),oC=u({},ur,{data:0}),Ay=ps(oC),op={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ty(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=Hw[d])?!!p[d]:!1}function lp(){return Ty}var Gw=u({},np,{key:function(d){if(d.key){var p=op[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=_c(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Fw[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lp,charCode:function(d){return d.type==="keypress"?_c(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?_c(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),sg=ps(Gw),Ww=u({},sp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cy=ps(Ww),Fu=u({},np,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lp}),qw=ps(Fu),Xw=u({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yw=ps(Xw),Qw=u({},sp,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),ag=ps(Qw),Pa=u({},ur,{newState:0,oldState:0}),Kw=ps(Pa),Zw=[9,13,27,32],Tc=Il&&"CompositionEvent"in window,P=null;Il&&"documentMode"in document&&(P=document.documentMode);var N=Il&&"TextEvent"in window&&!P,H=Il&&(!Tc||P&&8<P&&11>=P),ae=" ",Pe=!1;function He(d,p){switch(d){case"keyup":return Zw.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gt(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Gi=!1;function Qn(d,p){switch(d){case"compositionend":return gt(p);case"keypress":return p.which!==32?null:(Pe=!0,ae);case"textInput":return d=p.data,d===ae&&Pe?null:d;default:return null}}function Wi(d,p){if(Gi)return d==="compositionend"||!Tc&&He(d,p)?(d=Sy(),Uu=sd=Sc=null,Gi=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return H&&p.locale!=="ko"?null:p.data;default:return null}}var ms={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!ms[d.type]:p==="textarea"}function Hu(d,p,y,w){Nu?Vu?Vu.push(w):Vu=[w]:Nu=w,p=B2(p,"onChange"),0<p.length&&(y=new Jm("onChange","change",null,y,w),d.push({event:y,listeners:p}))}var js=null,Cc=null;function My(d){w8(d,0)}function $w(d){var p=zt(d);if(bc(p))return d}function Fz(d,p){if(d==="change")return p}var Hz=!1;if(Il){var lC;if(Il){var cC="oninput"in document;if(!cC){var Gz=document.createElement("div");Gz.setAttribute("oninput","return;"),cC=typeof Gz.oninput=="function"}lC=cC}else lC=!1;Hz=lC&&(!document.documentMode||9<document.documentMode)}function Wz(){js&&(js.detachEvent("onpropertychange",qz),Cc=js=null)}function qz(d){if(d.propertyName==="value"&&$w(Cc)){var p=[];Hu(p,Cc,d,Go(d)),jw(My,p)}}function Vae(d,p,y){d==="focusin"?(Wz(),js=p,Cc=y,js.attachEvent("onpropertychange",qz)):d==="focusout"&&Wz()}function Uae(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return $w(Cc)}function Fae(d,p){if(d==="click")return $w(p)}function Hae(d,p){if(d==="input"||d==="change")return $w(p)}function Gae(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var _o=typeof Object.is=="function"?Object.is:Gae;function Py(d,p){if(_o(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var y=Object.keys(d),w=Object.keys(p);if(y.length!==w.length)return!1;for(w=0;w<y.length;w++){var I=y[w];if(!Ce.call(p,I)||!_o(d[I],p[I]))return!1}return!0}function Xz(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Yz(d,p){var y=Xz(d);d=0;for(var w;y;){if(y.nodeType===3){if(w=d+y.textContent.length,d<=p&&w>=p)return{node:y,offset:p-d};d=w}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=Xz(y)}}function Qz(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?Qz(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function Kz(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var p=Dl(d.document);p instanceof d.HTMLIFrameElement;){try{var y=typeof p.contentWindow.location.href=="string"}catch{y=!1}if(y)d=p.contentWindow;else break;p=Dl(d.document)}return p}function uC(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}var Wae=Il&&"documentMode"in document&&11>=document.documentMode,og=null,hC=null,Dy=null,dC=!1;function Zz(d,p,y){var w=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;dC||og==null||og!==Dl(w)||(w=og,"selectionStart"in w&&uC(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Dy&&Py(Dy,w)||(Dy=w,w=B2(hC,"onSelect"),0<w.length&&(p=new Jm("onSelect","select",null,p,y),d.push({event:p,listeners:w}),p.target=og)))}function cp(d,p){var y={};return y[d.toLowerCase()]=p.toLowerCase(),y["Webkit"+d]="webkit"+p,y["Moz"+d]="moz"+p,y}var lg={animationend:cp("Animation","AnimationEnd"),animationiteration:cp("Animation","AnimationIteration"),animationstart:cp("Animation","AnimationStart"),transitionrun:cp("Transition","TransitionRun"),transitionstart:cp("Transition","TransitionStart"),transitioncancel:cp("Transition","TransitionCancel"),transitionend:cp("Transition","TransitionEnd")},fC={},$z={};Il&&($z=document.createElement("div").style,"AnimationEvent"in window||(delete lg.animationend.animation,delete lg.animationiteration.animation,delete lg.animationstart.animation),"TransitionEvent"in window||delete lg.transitionend.transition);function up(d){if(fC[d])return fC[d];if(!lg[d])return d;var p=lg[d],y;for(y in p)if(p.hasOwnProperty(y)&&y in $z)return fC[d]=p[y];return d}var Jz=up("animationend"),eB=up("animationiteration"),tB=up("animationstart"),qae=up("transitionrun"),Xae=up("transitionstart"),Yae=up("transitioncancel"),iB=up("transitionend"),rB=new Map,pC="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pC.push("scrollEnd");function Rl(d,p){rB.set(d,p),Be(p,[d])}var nB=new WeakMap;function Xo(d,p){if(typeof d=="object"&&d!==null){var y=nB.get(d);return y!==void 0?y:(p={value:d,source:p,stack:le(p)},nB.set(d,p),p)}return{value:d,source:p,stack:le(p)}}var Yo=[],cg=0,mC=0;function Jw(){for(var d=cg,p=mC=cg=0;p<d;){var y=Yo[p];Yo[p++]=null;var w=Yo[p];Yo[p++]=null;var I=Yo[p];Yo[p++]=null;var z=Yo[p];if(Yo[p++]=null,w!==null&&I!==null){var W=w.pending;W===null?I.next=I:(I.next=W.next,W.next=I),w.pending=I}z!==0&&sB(y,I,z)}}function e2(d,p,y,w){Yo[cg++]=d,Yo[cg++]=p,Yo[cg++]=y,Yo[cg++]=w,mC|=w,d.lanes|=w,d=d.alternate,d!==null&&(d.lanes|=w)}function gC(d,p,y,w){return e2(d,p,y,w),t2(d)}function ug(d,p){return e2(d,null,null,p),t2(d)}function sB(d,p,y){d.lanes|=y;var w=d.alternate;w!==null&&(w.lanes|=y);for(var I=!1,z=d.return;z!==null;)z.childLanes|=y,w=z.alternate,w!==null&&(w.childLanes|=y),z.tag===22&&(d=z.stateNode,d===null||d._visibility&1||(I=!0)),d=z,z=z.return;return d.tag===3?(z=d.stateNode,I&&p!==null&&(I=31-lt(y),d=z.hiddenUpdates,w=d[I],w===null?d[I]=[p]:w.push(p),p.lane=y|536870912),z):null}function t2(d){if(50<t1)throw t1=0,S5=null,Error(r(185));for(var p=d.return;p!==null;)d=p,p=d.return;return d.tag===3?d.stateNode:null}var hg={};function Qae(d,p,y,w){this.tag=d,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Eo(d,p,y,w){return new Qae(d,p,y,w)}function vC(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Gu(d,p){var y=d.alternate;return y===null?(y=Eo(d.tag,p,d.key,d.mode),y.elementType=d.elementType,y.type=d.type,y.stateNode=d.stateNode,y.alternate=d,d.alternate=y):(y.pendingProps=p,y.type=d.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=d.flags&65011712,y.childLanes=d.childLanes,y.lanes=d.lanes,y.child=d.child,y.memoizedProps=d.memoizedProps,y.memoizedState=d.memoizedState,y.updateQueue=d.updateQueue,p=d.dependencies,y.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},y.sibling=d.sibling,y.index=d.index,y.ref=d.ref,y.refCleanup=d.refCleanup,y}function aB(d,p){d.flags&=65011714;var y=d.alternate;return y===null?(d.childLanes=0,d.lanes=p,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=y.childLanes,d.lanes=y.lanes,d.child=y.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=y.memoizedProps,d.memoizedState=y.memoizedState,d.updateQueue=y.updateQueue,d.type=y.type,p=y.dependencies,d.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),d}function i2(d,p,y,w,I,z){var W=0;if(w=d,typeof d=="function")vC(d)&&(W=1);else if(typeof d=="string")W=Zoe(d,y,ce.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case R:return d=Eo(31,y,p,I),d.elementType=R,d.lanes=z,d;case g:return hp(y.children,I,z,p);case v:W=8,I|=24;break;case x:return d=Eo(12,y,p,I|2),d.elementType=x,d.lanes=z,d;case M:return d=Eo(13,y,p,I),d.elementType=M,d.lanes=z,d;case C:return d=Eo(19,y,p,I),d.elementType=C,d.lanes=z,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case b:case _:W=10;break e;case S:W=9;break e;case A:W=11;break e;case D:W=14;break e;case T:W=16,w=null;break e}W=29,y=Error(r(130,d===null?"null":typeof d,"")),w=null}return p=Eo(W,y,p,I),p.elementType=d,p.type=w,p.lanes=z,p}function hp(d,p,y,w){return d=Eo(7,d,w,p),d.lanes=y,d}function yC(d,p,y){return d=Eo(6,d,null,p),d.lanes=y,d}function xC(d,p,y){return p=Eo(4,d.children!==null?d.children:[],d.key,p),p.lanes=y,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}var dg=[],fg=0,r2=null,n2=0,Qo=[],Ko=0,dp=null,Wu=1,qu="";function fp(d,p){dg[fg++]=n2,dg[fg++]=r2,r2=d,n2=p}function oB(d,p,y){Qo[Ko++]=Wu,Qo[Ko++]=qu,Qo[Ko++]=dp,dp=d;var w=Wu;d=qu;var I=32-lt(w)-1;w&=~(1<<I),y+=1;var z=32-lt(p)+I;if(30<z){var W=I-I%5;z=(w&(1<<W)-1).toString(32),w>>=W,I-=W,Wu=1<<32-lt(p)+I|y<<I|w,qu=z+d}else Wu=1<<z|y<<I|w,qu=d}function bC(d){d.return!==null&&(fp(d,1),oB(d,1,0))}function wC(d){for(;d===r2;)r2=dg[--fg],dg[fg]=null,n2=dg[--fg],dg[fg]=null;for(;d===dp;)dp=Qo[--Ko],Qo[Ko]=null,qu=Qo[--Ko],Qo[Ko]=null,Wu=Qo[--Ko],Qo[Ko]=null}var Da=null,un=null,rr=!1,pp=null,Mc=!1,SC=Error(r(519));function mp(d){var p=Error(r(418,""));throw Oy(Xo(p,d)),SC}function lB(d){var p=d.stateNode,y=d.type,w=d.memoizedProps;switch(p[gr]=d,p[zr]=w,y){case"dialog":Oi("cancel",p),Oi("close",p);break;case"iframe":case"object":case"embed":Oi("load",p);break;case"video":case"audio":for(y=0;y<r1.length;y++)Oi(r1[y],p);break;case"source":Oi("error",p);break;case"img":case"image":case"link":Oi("error",p),Oi("load",p);break;case"details":Oi("toggle",p);break;case"input":Oi("invalid",p),Jf(p,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),xc(p);break;case"select":Oi("invalid",p);break;case"textarea":Oi("invalid",p),ep(p,w.value,w.defaultValue,w.children),xc(p)}y=w.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||p.textContent===""+y||w.suppressHydrationWarning===!0||A8(p.textContent,y)?(w.popover!=null&&(Oi("beforetoggle",p),Oi("toggle",p)),w.onScroll!=null&&Oi("scroll",p),w.onScrollEnd!=null&&Oi("scrollend",p),w.onClick!=null&&(p.onclick=j2),p=!0):p=!1,p||mp(d)}function cB(d){for(Da=d.return;Da;)switch(Da.tag){case 5:case 13:Mc=!1;return;case 27:case 3:Mc=!0;return;default:Da=Da.return}}function Iy(d){if(d!==Da)return!1;if(!rr)return cB(d),rr=!0,!1;var p=d.tag,y;if((y=p!==3&&p!==27)&&((y=p===5)&&(y=d.type,y=!(y!=="form"&&y!=="button")||j5(d.type,d.memoizedProps)),y=!y),y&&un&&mp(d),cB(d),p===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));e:{for(d=d.nextSibling,p=0;d;){if(d.nodeType===8)if(y=d.data,y==="/$"){if(p===0){un=Ll(d.nextSibling);break e}p--}else y!=="$"&&y!=="$!"&&y!=="$?"||p++;d=d.nextSibling}un=null}}else p===27?(p=un,wd(d.type)?(d=F5,F5=null,un=d):un=p):un=Da?Ll(d.stateNode.nextSibling):null;return!0}function Ry(){un=Da=null,rr=!1}function uB(){var d=pp;return d!==null&&(to===null?to=d:to.push.apply(to,d),pp=null),d}function Oy(d){pp===null?pp=[d]:pp.push(d)}var _C=K(null),gp=null,Xu=null;function ad(d,p,y){oe(_C,p._currentValue),p._currentValue=y}function Yu(d){d._currentValue=_C.current,re(_C)}function EC(d,p,y){for(;d!==null;){var w=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,w!==null&&(w.childLanes|=p)):w!==null&&(w.childLanes&p)!==p&&(w.childLanes|=p),d===y)break;d=d.return}}function AC(d,p,y,w){var I=d.child;for(I!==null&&(I.return=d);I!==null;){var z=I.dependencies;if(z!==null){var W=I.child;z=z.firstContext;e:for(;z!==null;){var te=z;z=I;for(var ve=0;ve<p.length;ve++)if(te.context===p[ve]){z.lanes|=y,te=z.alternate,te!==null&&(te.lanes|=y),EC(z.return,y,d),w||(W=null);break e}z=te.next}}else if(I.tag===18){if(W=I.return,W===null)throw Error(r(341));W.lanes|=y,z=W.alternate,z!==null&&(z.lanes|=y),EC(W,y,d),W=null}else W=I.child;if(W!==null)W.return=I;else for(W=I;W!==null;){if(W===d){W=null;break}if(I=W.sibling,I!==null){I.return=W.return,W=I;break}W=W.return}I=W}}function Ly(d,p,y,w){d=null;for(var I=p,z=!1;I!==null;){if(!z){if((I.flags&524288)!==0)z=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var W=I.alternate;if(W===null)throw Error(r(387));if(W=W.memoizedProps,W!==null){var te=I.type;_o(I.pendingProps.value,W.value)||(d!==null?d.push(te):d=[te])}}else if(I===xe.current){if(W=I.alternate,W===null)throw Error(r(387));W.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(d!==null?d.push(c1):d=[c1])}I=I.return}d!==null&&AC(p,d,y,w),p.flags|=262144}function s2(d){for(d=d.firstContext;d!==null;){if(!_o(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function vp(d){gp=d,Xu=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function ua(d){return hB(gp,d)}function a2(d,p){return gp===null&&vp(d),hB(d,p)}function hB(d,p){var y=p._currentValue;if(p={context:p,memoizedValue:y,next:null},Xu===null){if(d===null)throw Error(r(308));Xu=p,d.dependencies={lanes:0,firstContext:p},d.flags|=524288}else Xu=Xu.next=p;return y}var Kae=typeof AbortController<"u"?AbortController:function(){var d=[],p=this.signal={aborted:!1,addEventListener:function(y,w){d.push(w)}};this.abort=function(){p.aborted=!0,d.forEach(function(y){return y()})}},Zae=e.unstable_scheduleCallback,$ae=e.unstable_NormalPriority,Zn={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function TC(){return{controller:new Kae,data:new Map,refCount:0}}function ky(d){d.refCount--,d.refCount===0&&Zae($ae,function(){d.controller.abort()})}var zy=null,CC=0,pg=0,mg=null;function Jae(d,p){if(zy===null){var y=zy=[];CC=0,pg=P5(),mg={status:"pending",value:void 0,then:function(w){y.push(w)}}}return CC++,p.then(dB,dB),p}function dB(){if(--CC===0&&zy!==null){mg!==null&&(mg.status="fulfilled");var d=zy;zy=null,pg=0,mg=null;for(var p=0;p<d.length;p++)(0,d[p])()}}function eoe(d,p){var y=[],w={status:"pending",value:null,reason:null,then:function(I){y.push(I)}};return d.then(function(){w.status="fulfilled",w.value=p;for(var I=0;I<y.length;I++)(0,y[I])(p)},function(I){for(w.status="rejected",w.reason=I,I=0;I<y.length;I++)(0,y[I])(void 0)}),w}var fB=q.S;q.S=function(d,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Jae(d,p),fB!==null&&fB(d,p)};var yp=K(null);function MC(){var d=yp.current;return d!==null?d:Br.pooledCache}function o2(d,p){p===null?oe(yp,yp.current):oe(yp,p.pool)}function pB(){var d=MC();return d===null?null:{parent:Zn._currentValue,pool:d}}var By=Error(r(460)),mB=Error(r(474)),l2=Error(r(542)),PC={then:function(){}};function gB(d){return d=d.status,d==="fulfilled"||d==="rejected"}function c2(){}function vB(d,p,y){switch(y=d[y],y===void 0?d.push(p):y!==p&&(p.then(c2,c2),p=y),p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,xB(d),d;default:if(typeof p.status=="string")p.then(c2,c2);else{if(d=Br,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=p,d.status="pending",d.then(function(w){if(p.status==="pending"){var I=p;I.status="fulfilled",I.value=w}},function(w){if(p.status==="pending"){var I=p;I.status="rejected",I.reason=w}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,xB(d),d}throw jy=p,By}}var jy=null;function yB(){if(jy===null)throw Error(r(459));var d=jy;return jy=null,d}function xB(d){if(d===By||d===l2)throw Error(r(483))}var od=!1;function DC(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function IC(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function ld(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function cd(d,p,y){var w=d.updateQueue;if(w===null)return null;if(w=w.shared,(vr&2)!==0){var I=w.pending;return I===null?p.next=p:(p.next=I.next,I.next=p),w.pending=p,p=t2(d),sB(d,null,y),p}return e2(d,w,p,y),t2(d)}function Ny(d,p,y){if(p=p.updateQueue,p!==null&&(p=p.shared,(y&4194048)!==0)){var w=p.lanes;w&=d.pendingLanes,y|=w,p.lanes=y,hi(d,y)}}function RC(d,p){var y=d.updateQueue,w=d.alternate;if(w!==null&&(w=w.updateQueue,y===w)){var I=null,z=null;if(y=y.firstBaseUpdate,y!==null){do{var W={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};z===null?I=z=W:z=z.next=W,y=y.next}while(y!==null);z===null?I=z=p:z=z.next=p}else I=z=p;y={baseState:w.baseState,firstBaseUpdate:I,lastBaseUpdate:z,shared:w.shared,callbacks:w.callbacks},d.updateQueue=y;return}d=y.lastBaseUpdate,d===null?y.firstBaseUpdate=p:d.next=p,y.lastBaseUpdate=p}var OC=!1;function Vy(){if(OC){var d=mg;if(d!==null)throw d}}function Uy(d,p,y,w){OC=!1;var I=d.updateQueue;od=!1;var z=I.firstBaseUpdate,W=I.lastBaseUpdate,te=I.shared.pending;if(te!==null){I.shared.pending=null;var ve=te,Oe=ve.next;ve.next=null,W===null?z=Oe:W.next=Oe,W=ve;var Ye=d.alternate;Ye!==null&&(Ye=Ye.updateQueue,te=Ye.lastBaseUpdate,te!==W&&(te===null?Ye.firstBaseUpdate=Oe:te.next=Oe,Ye.lastBaseUpdate=ve))}if(z!==null){var et=I.baseState;W=0,Ye=Oe=ve=null,te=z;do{var ke=te.lane&-536870913,ze=ke!==te.lane;if(ze?(qi&ke)===ke:(w&ke)===ke){ke!==0&&ke===pg&&(OC=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var li=d,ii=te;ke=p;var Mr=y;switch(ii.tag){case 1:if(li=ii.payload,typeof li=="function"){et=li.call(Mr,et,ke);break e}et=li;break e;case 3:li.flags=li.flags&-65537|128;case 0:if(li=ii.payload,ke=typeof li=="function"?li.call(Mr,et,ke):li,ke==null)break e;et=u({},et,ke);break e;case 2:od=!0}}ke=te.callback,ke!==null&&(d.flags|=64,ze&&(d.flags|=8192),ze=I.callbacks,ze===null?I.callbacks=[ke]:ze.push(ke))}else ze={lane:ke,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Ye===null?(Oe=Ye=ze,ve=et):Ye=Ye.next=ze,W|=ke;if(te=te.next,te===null){if(te=I.shared.pending,te===null)break;ze=te,te=ze.next,ze.next=null,I.lastBaseUpdate=ze,I.shared.pending=null}}while(!0);Ye===null&&(ve=et),I.baseState=ve,I.firstBaseUpdate=Oe,I.lastBaseUpdate=Ye,z===null&&(I.shared.lanes=0),vd|=W,d.lanes=W,d.memoizedState=et}}function bB(d,p){if(typeof d!="function")throw Error(r(191,d));d.call(p)}function wB(d,p){var y=d.callbacks;if(y!==null)for(d.callbacks=null,d=0;d<y.length;d++)bB(y[d],p)}var gg=K(null),u2=K(0);function SB(d,p){d=th,oe(u2,d),oe(gg,p),th=d|p.baseLanes}function LC(){oe(u2,th),oe(gg,gg.current)}function kC(){th=u2.current,re(gg),re(u2)}var ud=0,Ci=null,Tr=null,Rn=null,h2=!1,vg=!1,xp=!1,d2=0,Fy=0,yg=null,toe=0;function yn(){throw Error(r(321))}function zC(d,p){if(p===null)return!1;for(var y=0;y<p.length&&y<d.length;y++)if(!_o(d[y],p[y]))return!1;return!0}function BC(d,p,y,w,I,z){return ud=z,Ci=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,q.H=d===null||d.memoizedState===null?sj:aj,xp=!1,z=y(w,I),xp=!1,vg&&(z=EB(p,y,w,I)),_B(d),z}function _B(d){q.H=y2;var p=Tr!==null&&Tr.next!==null;if(ud=0,Rn=Tr=Ci=null,h2=!1,Fy=0,yg=null,p)throw Error(r(300));d===null||gs||(d=d.dependencies,d!==null&&s2(d)&&(gs=!0))}function EB(d,p,y,w){Ci=d;var I=0;do{if(vg&&(yg=null),Fy=0,vg=!1,25<=I)throw Error(r(301));if(I+=1,Rn=Tr=null,d.updateQueue!=null){var z=d.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}q.H=loe,z=p(y,w)}while(vg);return z}function ioe(){var d=q.H,p=d.useState()[0];return p=typeof p.then=="function"?Hy(p):p,d=d.useState()[0],(Tr!==null?Tr.memoizedState:null)!==d&&(Ci.flags|=1024),p}function jC(){var d=d2!==0;return d2=0,d}function NC(d,p,y){p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~y}function VC(d){if(h2){for(d=d.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}h2=!1}ud=0,Rn=Tr=Ci=null,vg=!1,Fy=d2=0,yg=null}function Ja(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?Ci.memoizedState=Rn=d:Rn=Rn.next=d,Rn}function On(){if(Tr===null){var d=Ci.alternate;d=d!==null?d.memoizedState:null}else d=Tr.next;var p=Rn===null?Ci.memoizedState:Rn.next;if(p!==null)Rn=p,Tr=d;else{if(d===null)throw Ci.alternate===null?Error(r(467)):Error(r(310));Tr=d,d={memoizedState:Tr.memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},Rn===null?Ci.memoizedState=Rn=d:Rn=Rn.next=d}return Rn}function UC(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hy(d){var p=Fy;return Fy+=1,yg===null&&(yg=[]),d=vB(yg,d,p),p=Ci,(Rn===null?p.memoizedState:Rn.next)===null&&(p=p.alternate,q.H=p===null||p.memoizedState===null?sj:aj),d}function f2(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Hy(d);if(d.$$typeof===_)return ua(d)}throw Error(r(438,String(d)))}function FC(d){var p=null,y=Ci.updateQueue;if(y!==null&&(p=y.memoCache),p==null){var w=Ci.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(p={data:w.data.map(function(I){return I.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),y===null&&(y=UC(),Ci.updateQueue=y),y.memoCache=p,y=p.data[p.index],y===void 0)for(y=p.data[p.index]=Array(d),w=0;w<d;w++)y[w]=O;return p.index++,y}function Qu(d,p){return typeof p=="function"?p(d):p}function p2(d){var p=On();return HC(p,Tr,d)}function HC(d,p,y){var w=d.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=y;var I=d.baseQueue,z=w.pending;if(z!==null){if(I!==null){var W=I.next;I.next=z.next,z.next=W}p.baseQueue=I=z,w.pending=null}if(z=d.baseState,I===null)d.memoizedState=z;else{p=I.next;var te=W=null,ve=null,Oe=p,Ye=!1;do{var et=Oe.lane&-536870913;if(et!==Oe.lane?(qi&et)===et:(ud&et)===et){var ke=Oe.revertLane;if(ke===0)ve!==null&&(ve=ve.next={lane:0,revertLane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),et===pg&&(Ye=!0);else if((ud&ke)===ke){Oe=Oe.next,ke===pg&&(Ye=!0);continue}else et={lane:0,revertLane:Oe.revertLane,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ve===null?(te=ve=et,W=z):ve=ve.next=et,Ci.lanes|=ke,vd|=ke;et=Oe.action,xp&&y(z,et),z=Oe.hasEagerState?Oe.eagerState:y(z,et)}else ke={lane:et,revertLane:Oe.revertLane,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ve===null?(te=ve=ke,W=z):ve=ve.next=ke,Ci.lanes|=et,vd|=et;Oe=Oe.next}while(Oe!==null&&Oe!==p);if(ve===null?W=z:ve.next=te,!_o(z,d.memoizedState)&&(gs=!0,Ye&&(y=mg,y!==null)))throw y;d.memoizedState=z,d.baseState=W,d.baseQueue=ve,w.lastRenderedState=z}return I===null&&(w.lanes=0),[d.memoizedState,w.dispatch]}function GC(d){var p=On(),y=p.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=d;var w=y.dispatch,I=y.pending,z=p.memoizedState;if(I!==null){y.pending=null;var W=I=I.next;do z=d(z,W.action),W=W.next;while(W!==I);_o(z,p.memoizedState)||(gs=!0),p.memoizedState=z,p.baseQueue===null&&(p.baseState=z),y.lastRenderedState=z}return[z,w]}function AB(d,p,y){var w=Ci,I=On(),z=rr;if(z){if(y===void 0)throw Error(r(407));y=y()}else y=p();var W=!_o((Tr||I).memoizedState,y);W&&(I.memoizedState=y,gs=!0),I=I.queue;var te=MB.bind(null,w,I,d);if(Gy(2048,8,te,[d]),I.getSnapshot!==p||W||Rn!==null&&Rn.memoizedState.tag&1){if(w.flags|=2048,xg(9,m2(),CB.bind(null,w,I,y,p),null),Br===null)throw Error(r(349));z||(ud&124)!==0||TB(w,p,y)}return y}function TB(d,p,y){d.flags|=16384,d={getSnapshot:p,value:y},p=Ci.updateQueue,p===null?(p=UC(),Ci.updateQueue=p,p.stores=[d]):(y=p.stores,y===null?p.stores=[d]:y.push(d))}function CB(d,p,y,w){p.value=y,p.getSnapshot=w,PB(p)&&DB(d)}function MB(d,p,y){return y(function(){PB(p)&&DB(d)})}function PB(d){var p=d.getSnapshot;d=d.value;try{var y=p();return!_o(d,y)}catch{return!0}}function DB(d){var p=ug(d,2);p!==null&&Po(p,d,2)}function WC(d){var p=Ja();if(typeof d=="function"){var y=d;if(d=y(),xp){dt(!0);try{y()}finally{dt(!1)}}}return p.memoizedState=p.baseState=d,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:d},p}function IB(d,p,y,w){return d.baseState=y,HC(d,Tr,typeof w=="function"?w:Qu)}function roe(d,p,y,w,I){if(v2(d))throw Error(r(485));if(d=p.action,d!==null){var z={payload:I,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){z.listeners.push(W)}};q.T!==null?y(!0):z.isTransition=!1,w(z),y=p.pending,y===null?(z.next=p.pending=z,RB(p,z)):(z.next=y.next,p.pending=y.next=z)}}function RB(d,p){var y=p.action,w=p.payload,I=d.state;if(p.isTransition){var z=q.T,W={};q.T=W;try{var te=y(I,w),ve=q.S;ve!==null&&ve(W,te),OB(d,p,te)}catch(Oe){qC(d,p,Oe)}finally{q.T=z}}else try{z=y(I,w),OB(d,p,z)}catch(Oe){qC(d,p,Oe)}}function OB(d,p,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(w){LB(d,p,w)},function(w){return qC(d,p,w)}):LB(d,p,y)}function LB(d,p,y){p.status="fulfilled",p.value=y,kB(p),d.state=y,p=d.pending,p!==null&&(y=p.next,y===p?d.pending=null:(y=y.next,p.next=y,RB(d,y)))}function qC(d,p,y){var w=d.pending;if(d.pending=null,w!==null){w=w.next;do p.status="rejected",p.reason=y,kB(p),p=p.next;while(p!==w)}d.action=null}function kB(d){d=d.listeners;for(var p=0;p<d.length;p++)(0,d[p])()}function zB(d,p){return p}function BB(d,p){if(rr){var y=Br.formState;if(y!==null){e:{var w=Ci;if(rr){if(un){t:{for(var I=un,z=Mc;I.nodeType!==8;){if(!z){I=null;break t}if(I=Ll(I.nextSibling),I===null){I=null;break t}}z=I.data,I=z==="F!"||z==="F"?I:null}if(I){un=Ll(I.nextSibling),w=I.data==="F!";break e}}mp(w)}w=!1}w&&(p=y[0])}}return y=Ja(),y.memoizedState=y.baseState=p,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zB,lastRenderedState:p},y.queue=w,y=ij.bind(null,Ci,w),w.dispatch=y,w=WC(!1),z=ZC.bind(null,Ci,!1,w.queue),w=Ja(),I={state:p,dispatch:null,action:d,pending:null},w.queue=I,y=roe.bind(null,Ci,I,z,y),I.dispatch=y,w.memoizedState=d,[p,y,!1]}function jB(d){var p=On();return NB(p,Tr,d)}function NB(d,p,y){if(p=HC(d,p,zB)[0],d=p2(Qu)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var w=Hy(p)}catch(W){throw W===By?l2:W}else w=p;p=On();var I=p.queue,z=I.dispatch;return y!==p.memoizedState&&(Ci.flags|=2048,xg(9,m2(),noe.bind(null,I,y),null)),[w,z,d]}function noe(d,p){d.action=p}function VB(d){var p=On(),y=Tr;if(y!==null)return NB(p,y,d);On(),p=p.memoizedState,y=On();var w=y.queue.dispatch;return y.memoizedState=d,[p,w,!1]}function xg(d,p,y,w){return d={tag:d,create:y,deps:w,inst:p,next:null},p=Ci.updateQueue,p===null&&(p=UC(),Ci.updateQueue=p),y=p.lastEffect,y===null?p.lastEffect=d.next=d:(w=y.next,y.next=d,d.next=w,p.lastEffect=d),d}function m2(){return{destroy:void 0,resource:void 0}}function UB(){return On().memoizedState}function g2(d,p,y,w){var I=Ja();w=w===void 0?null:w,Ci.flags|=d,I.memoizedState=xg(1|p,m2(),y,w)}function Gy(d,p,y,w){var I=On();w=w===void 0?null:w;var z=I.memoizedState.inst;Tr!==null&&w!==null&&zC(w,Tr.memoizedState.deps)?I.memoizedState=xg(p,z,y,w):(Ci.flags|=d,I.memoizedState=xg(1|p,z,y,w))}function FB(d,p){g2(8390656,8,d,p)}function HB(d,p){Gy(2048,8,d,p)}function GB(d,p){return Gy(4,2,d,p)}function WB(d,p){return Gy(4,4,d,p)}function qB(d,p){if(typeof p=="function"){d=d();var y=p(d);return function(){typeof y=="function"?y():p(null)}}if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function XB(d,p,y){y=y!=null?y.concat([d]):null,Gy(4,4,qB.bind(null,p,d),y)}function XC(){}function YB(d,p){var y=On();p=p===void 0?null:p;var w=y.memoizedState;return p!==null&&zC(p,w[1])?w[0]:(y.memoizedState=[d,p],d)}function QB(d,p){var y=On();p=p===void 0?null:p;var w=y.memoizedState;if(p!==null&&zC(p,w[1]))return w[0];if(w=d(),xp){dt(!0);try{d()}finally{dt(!1)}}return y.memoizedState=[w,p],w}function YC(d,p,y){return y===void 0||(ud&1073741824)!==0?d.memoizedState=p:(d.memoizedState=y,d=$j(),Ci.lanes|=d,vd|=d,y)}function KB(d,p,y,w){return _o(y,p)?y:gg.current!==null?(d=YC(d,y,w),_o(d,p)||(gs=!0),d):(ud&42)===0?(gs=!0,d.memoizedState=y):(d=$j(),Ci.lanes|=d,vd|=d,p)}function ZB(d,p,y,w,I){var z=Y.p;Y.p=z!==0&&8>z?z:8;var W=q.T,te={};q.T=te,ZC(d,!1,p,y);try{var ve=I(),Oe=q.S;if(Oe!==null&&Oe(te,ve),ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Ye=eoe(ve,w);Wy(d,p,Ye,Mo(d))}else Wy(d,p,w,Mo(d))}catch(et){Wy(d,p,{then:function(){},status:"rejected",reason:et},Mo())}finally{Y.p=z,q.T=W}}function soe(){}function QC(d,p,y,w){if(d.tag!==5)throw Error(r(476));var I=$B(d).queue;ZB(d,I,p,X,y===null?soe:function(){return JB(d),y(w)})}function $B(d){var p=d.memoizedState;if(p!==null)return p;p={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:X},next:null};var y={};return p.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:y},next:null},d.memoizedState=p,d=d.alternate,d!==null&&(d.memoizedState=p),p}function JB(d){var p=$B(d).next.queue;Wy(d,p,{},Mo())}function KC(){return ua(c1)}function ej(){return On().memoizedState}function tj(){return On().memoizedState}function aoe(d){for(var p=d.return;p!==null;){switch(p.tag){case 24:case 3:var y=Mo();d=ld(y);var w=cd(p,d,y);w!==null&&(Po(w,p,y),Ny(w,p,y)),p={cache:TC()},d.payload=p;return}p=p.return}}function ooe(d,p,y){var w=Mo();y={lane:w,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},v2(d)?rj(p,y):(y=gC(d,p,y,w),y!==null&&(Po(y,d,w),nj(y,p,w)))}function ij(d,p,y){var w=Mo();Wy(d,p,y,w)}function Wy(d,p,y,w){var I={lane:w,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(v2(d))rj(p,I);else{var z=d.alternate;if(d.lanes===0&&(z===null||z.lanes===0)&&(z=p.lastRenderedReducer,z!==null))try{var W=p.lastRenderedState,te=z(W,y);if(I.hasEagerState=!0,I.eagerState=te,_o(te,W))return e2(d,p,I,0),Br===null&&Jw(),!1}catch{}finally{}if(y=gC(d,p,I,w),y!==null)return Po(y,d,w),nj(y,p,w),!0}return!1}function ZC(d,p,y,w){if(w={lane:2,revertLane:P5(),action:w,hasEagerState:!1,eagerState:null,next:null},v2(d)){if(p)throw Error(r(479))}else p=gC(d,y,w,2),p!==null&&Po(p,d,2)}function v2(d){var p=d.alternate;return d===Ci||p!==null&&p===Ci}function rj(d,p){vg=h2=!0;var y=d.pending;y===null?p.next=p:(p.next=y.next,y.next=p),d.pending=p}function nj(d,p,y){if((y&4194048)!==0){var w=p.lanes;w&=d.pendingLanes,y|=w,p.lanes=y,hi(d,y)}}var y2={readContext:ua,use:f2,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn,useHostTransitionStatus:yn,useFormState:yn,useActionState:yn,useOptimistic:yn,useMemoCache:yn,useCacheRefresh:yn},sj={readContext:ua,use:f2,useCallback:function(d,p){return Ja().memoizedState=[d,p===void 0?null:p],d},useContext:ua,useEffect:FB,useImperativeHandle:function(d,p,y){y=y!=null?y.concat([d]):null,g2(4194308,4,qB.bind(null,p,d),y)},useLayoutEffect:function(d,p){return g2(4194308,4,d,p)},useInsertionEffect:function(d,p){g2(4,2,d,p)},useMemo:function(d,p){var y=Ja();p=p===void 0?null:p;var w=d();if(xp){dt(!0);try{d()}finally{dt(!1)}}return y.memoizedState=[w,p],w},useReducer:function(d,p,y){var w=Ja();if(y!==void 0){var I=y(p);if(xp){dt(!0);try{y(p)}finally{dt(!1)}}}else I=p;return w.memoizedState=w.baseState=I,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:I},w.queue=d,d=d.dispatch=ooe.bind(null,Ci,d),[w.memoizedState,d]},useRef:function(d){var p=Ja();return d={current:d},p.memoizedState=d},useState:function(d){d=WC(d);var p=d.queue,y=ij.bind(null,Ci,p);return p.dispatch=y,[d.memoizedState,y]},useDebugValue:XC,useDeferredValue:function(d,p){var y=Ja();return YC(y,d,p)},useTransition:function(){var d=WC(!1);return d=ZB.bind(null,Ci,d.queue,!0,!1),Ja().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,p,y){var w=Ci,I=Ja();if(rr){if(y===void 0)throw Error(r(407));y=y()}else{if(y=p(),Br===null)throw Error(r(349));(qi&124)!==0||TB(w,p,y)}I.memoizedState=y;var z={value:y,getSnapshot:p};return I.queue=z,FB(MB.bind(null,w,z,d),[d]),w.flags|=2048,xg(9,m2(),CB.bind(null,w,z,y,p),null),y},useId:function(){var d=Ja(),p=Br.identifierPrefix;if(rr){var y=qu,w=Wu;y=(w&~(1<<32-lt(w)-1)).toString(32)+y,p="«"+p+"R"+y,y=d2++,0<y&&(p+="H"+y.toString(32)),p+="»"}else y=toe++,p="«"+p+"r"+y.toString(32)+"»";return d.memoizedState=p},useHostTransitionStatus:KC,useFormState:BB,useActionState:BB,useOptimistic:function(d){var p=Ja();p.memoizedState=p.baseState=d;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=y,p=ZC.bind(null,Ci,!0,y),y.dispatch=p,[d,p]},useMemoCache:FC,useCacheRefresh:function(){return Ja().memoizedState=aoe.bind(null,Ci)}},aj={readContext:ua,use:f2,useCallback:YB,useContext:ua,useEffect:HB,useImperativeHandle:XB,useInsertionEffect:GB,useLayoutEffect:WB,useMemo:QB,useReducer:p2,useRef:UB,useState:function(){return p2(Qu)},useDebugValue:XC,useDeferredValue:function(d,p){var y=On();return KB(y,Tr.memoizedState,d,p)},useTransition:function(){var d=p2(Qu)[0],p=On().memoizedState;return[typeof d=="boolean"?d:Hy(d),p]},useSyncExternalStore:AB,useId:ej,useHostTransitionStatus:KC,useFormState:jB,useActionState:jB,useOptimistic:function(d,p){var y=On();return IB(y,Tr,d,p)},useMemoCache:FC,useCacheRefresh:tj},loe={readContext:ua,use:f2,useCallback:YB,useContext:ua,useEffect:HB,useImperativeHandle:XB,useInsertionEffect:GB,useLayoutEffect:WB,useMemo:QB,useReducer:GC,useRef:UB,useState:function(){return GC(Qu)},useDebugValue:XC,useDeferredValue:function(d,p){var y=On();return Tr===null?YC(y,d,p):KB(y,Tr.memoizedState,d,p)},useTransition:function(){var d=GC(Qu)[0],p=On().memoizedState;return[typeof d=="boolean"?d:Hy(d),p]},useSyncExternalStore:AB,useId:ej,useHostTransitionStatus:KC,useFormState:VB,useActionState:VB,useOptimistic:function(d,p){var y=On();return Tr!==null?IB(y,Tr,d,p):(y.baseState=d,[d,y.queue.dispatch])},useMemoCache:FC,useCacheRefresh:tj},bg=null,qy=0;function x2(d){var p=qy;return qy+=1,bg===null&&(bg=[]),vB(bg,d,p)}function Xy(d,p){p=p.props.ref,d.ref=p!==void 0?p:null}function b2(d,p){throw p.$$typeof===h?Error(r(525)):(d=Object.prototype.toString.call(p),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d)))}function oj(d){var p=d._init;return p(d._payload)}function lj(d){function p(Ee,Se){if(d){var Ie=Ee.deletions;Ie===null?(Ee.deletions=[Se],Ee.flags|=16):Ie.push(Se)}}function y(Ee,Se){if(!d)return null;for(;Se!==null;)p(Ee,Se),Se=Se.sibling;return null}function w(Ee){for(var Se=new Map;Ee!==null;)Ee.key!==null?Se.set(Ee.key,Ee):Se.set(Ee.index,Ee),Ee=Ee.sibling;return Se}function I(Ee,Se){return Ee=Gu(Ee,Se),Ee.index=0,Ee.sibling=null,Ee}function z(Ee,Se,Ie){return Ee.index=Ie,d?(Ie=Ee.alternate,Ie!==null?(Ie=Ie.index,Ie<Se?(Ee.flags|=67108866,Se):Ie):(Ee.flags|=67108866,Se)):(Ee.flags|=1048576,Se)}function W(Ee){return d&&Ee.alternate===null&&(Ee.flags|=67108866),Ee}function te(Ee,Se,Ie,Je){return Se===null||Se.tag!==6?(Se=yC(Ie,Ee.mode,Je),Se.return=Ee,Se):(Se=I(Se,Ie),Se.return=Ee,Se)}function ve(Ee,Se,Ie,Je){var Ot=Ie.type;return Ot===g?Ye(Ee,Se,Ie.props.children,Je,Ie.key):Se!==null&&(Se.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===T&&oj(Ot)===Se.type)?(Se=I(Se,Ie.props),Xy(Se,Ie),Se.return=Ee,Se):(Se=i2(Ie.type,Ie.key,Ie.props,null,Ee.mode,Je),Xy(Se,Ie),Se.return=Ee,Se)}function Oe(Ee,Se,Ie,Je){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Ie.containerInfo||Se.stateNode.implementation!==Ie.implementation?(Se=xC(Ie,Ee.mode,Je),Se.return=Ee,Se):(Se=I(Se,Ie.children||[]),Se.return=Ee,Se)}function Ye(Ee,Se,Ie,Je,Ot){return Se===null||Se.tag!==7?(Se=hp(Ie,Ee.mode,Je,Ot),Se.return=Ee,Se):(Se=I(Se,Ie),Se.return=Ee,Se)}function et(Ee,Se,Ie){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Se=yC(""+Se,Ee.mode,Ie),Se.return=Ee,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case f:return Ie=i2(Se.type,Se.key,Se.props,null,Ee.mode,Ie),Xy(Ie,Se),Ie.return=Ee,Ie;case m:return Se=xC(Se,Ee.mode,Ie),Se.return=Ee,Se;case T:var Je=Se._init;return Se=Je(Se._payload),et(Ee,Se,Ie)}if($(Se)||k(Se))return Se=hp(Se,Ee.mode,Ie,null),Se.return=Ee,Se;if(typeof Se.then=="function")return et(Ee,x2(Se),Ie);if(Se.$$typeof===_)return et(Ee,a2(Ee,Se),Ie);b2(Ee,Se)}return null}function ke(Ee,Se,Ie,Je){var Ot=Se!==null?Se.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ot!==null?null:te(Ee,Se,""+Ie,Je);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case f:return Ie.key===Ot?ve(Ee,Se,Ie,Je):null;case m:return Ie.key===Ot?Oe(Ee,Se,Ie,Je):null;case T:return Ot=Ie._init,Ie=Ot(Ie._payload),ke(Ee,Se,Ie,Je)}if($(Ie)||k(Ie))return Ot!==null?null:Ye(Ee,Se,Ie,Je,null);if(typeof Ie.then=="function")return ke(Ee,Se,x2(Ie),Je);if(Ie.$$typeof===_)return ke(Ee,Se,a2(Ee,Ie),Je);b2(Ee,Ie)}return null}function ze(Ee,Se,Ie,Je,Ot){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Ee=Ee.get(Ie)||null,te(Se,Ee,""+Je,Ot);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case f:return Ee=Ee.get(Je.key===null?Ie:Je.key)||null,ve(Se,Ee,Je,Ot);case m:return Ee=Ee.get(Je.key===null?Ie:Je.key)||null,Oe(Se,Ee,Je,Ot);case T:var Di=Je._init;return Je=Di(Je._payload),ze(Ee,Se,Ie,Je,Ot)}if($(Je)||k(Je))return Ee=Ee.get(Ie)||null,Ye(Se,Ee,Je,Ot,null);if(typeof Je.then=="function")return ze(Ee,Se,Ie,x2(Je),Ot);if(Je.$$typeof===_)return ze(Ee,Se,Ie,a2(Se,Je),Ot);b2(Se,Je)}return null}function li(Ee,Se,Ie,Je){for(var Ot=null,Di=null,Ft=Se,ai=Se=0,ys=null;Ft!==null&&ai<Ie.length;ai++){Ft.index>ai?(ys=Ft,Ft=null):ys=Ft.sibling;var $i=ke(Ee,Ft,Ie[ai],Je);if($i===null){Ft===null&&(Ft=ys);break}d&&Ft&&$i.alternate===null&&p(Ee,Ft),Se=z($i,Se,ai),Di===null?Ot=$i:Di.sibling=$i,Di=$i,Ft=ys}if(ai===Ie.length)return y(Ee,Ft),rr&&fp(Ee,ai),Ot;if(Ft===null){for(;ai<Ie.length;ai++)Ft=et(Ee,Ie[ai],Je),Ft!==null&&(Se=z(Ft,Se,ai),Di===null?Ot=Ft:Di.sibling=Ft,Di=Ft);return rr&&fp(Ee,ai),Ot}for(Ft=w(Ft);ai<Ie.length;ai++)ys=ze(Ft,Ee,ai,Ie[ai],Je),ys!==null&&(d&&ys.alternate!==null&&Ft.delete(ys.key===null?ai:ys.key),Se=z(ys,Se,ai),Di===null?Ot=ys:Di.sibling=ys,Di=ys);return d&&Ft.forEach(function(Td){return p(Ee,Td)}),rr&&fp(Ee,ai),Ot}function ii(Ee,Se,Ie,Je){if(Ie==null)throw Error(r(151));for(var Ot=null,Di=null,Ft=Se,ai=Se=0,ys=null,$i=Ie.next();Ft!==null&&!$i.done;ai++,$i=Ie.next()){Ft.index>ai?(ys=Ft,Ft=null):ys=Ft.sibling;var Td=ke(Ee,Ft,$i.value,Je);if(Td===null){Ft===null&&(Ft=ys);break}d&&Ft&&Td.alternate===null&&p(Ee,Ft),Se=z(Td,Se,ai),Di===null?Ot=Td:Di.sibling=Td,Di=Td,Ft=ys}if($i.done)return y(Ee,Ft),rr&&fp(Ee,ai),Ot;if(Ft===null){for(;!$i.done;ai++,$i=Ie.next())$i=et(Ee,$i.value,Je),$i!==null&&(Se=z($i,Se,ai),Di===null?Ot=$i:Di.sibling=$i,Di=$i);return rr&&fp(Ee,ai),Ot}for(Ft=w(Ft);!$i.done;ai++,$i=Ie.next())$i=ze(Ft,Ee,ai,$i.value,Je),$i!==null&&(d&&$i.alternate!==null&&Ft.delete($i.key===null?ai:$i.key),Se=z($i,Se,ai),Di===null?Ot=$i:Di.sibling=$i,Di=$i);return d&&Ft.forEach(function(cle){return p(Ee,cle)}),rr&&fp(Ee,ai),Ot}function Mr(Ee,Se,Ie,Je){if(typeof Ie=="object"&&Ie!==null&&Ie.type===g&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case f:e:{for(var Ot=Ie.key;Se!==null;){if(Se.key===Ot){if(Ot=Ie.type,Ot===g){if(Se.tag===7){y(Ee,Se.sibling),Je=I(Se,Ie.props.children),Je.return=Ee,Ee=Je;break e}}else if(Se.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===T&&oj(Ot)===Se.type){y(Ee,Se.sibling),Je=I(Se,Ie.props),Xy(Je,Ie),Je.return=Ee,Ee=Je;break e}y(Ee,Se);break}else p(Ee,Se);Se=Se.sibling}Ie.type===g?(Je=hp(Ie.props.children,Ee.mode,Je,Ie.key),Je.return=Ee,Ee=Je):(Je=i2(Ie.type,Ie.key,Ie.props,null,Ee.mode,Je),Xy(Je,Ie),Je.return=Ee,Ee=Je)}return W(Ee);case m:e:{for(Ot=Ie.key;Se!==null;){if(Se.key===Ot)if(Se.tag===4&&Se.stateNode.containerInfo===Ie.containerInfo&&Se.stateNode.implementation===Ie.implementation){y(Ee,Se.sibling),Je=I(Se,Ie.children||[]),Je.return=Ee,Ee=Je;break e}else{y(Ee,Se);break}else p(Ee,Se);Se=Se.sibling}Je=xC(Ie,Ee.mode,Je),Je.return=Ee,Ee=Je}return W(Ee);case T:return Ot=Ie._init,Ie=Ot(Ie._payload),Mr(Ee,Se,Ie,Je)}if($(Ie))return li(Ee,Se,Ie,Je);if(k(Ie)){if(Ot=k(Ie),typeof Ot!="function")throw Error(r(150));return Ie=Ot.call(Ie),ii(Ee,Se,Ie,Je)}if(typeof Ie.then=="function")return Mr(Ee,Se,x2(Ie),Je);if(Ie.$$typeof===_)return Mr(Ee,Se,a2(Ee,Ie),Je);b2(Ee,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,Se!==null&&Se.tag===6?(y(Ee,Se.sibling),Je=I(Se,Ie),Je.return=Ee,Ee=Je):(y(Ee,Se),Je=yC(Ie,Ee.mode,Je),Je.return=Ee,Ee=Je),W(Ee)):y(Ee,Se)}return function(Ee,Se,Ie,Je){try{qy=0;var Ot=Mr(Ee,Se,Ie,Je);return bg=null,Ot}catch(Ft){if(Ft===By||Ft===l2)throw Ft;var Di=Eo(29,Ft,null,Ee.mode);return Di.lanes=Je,Di.return=Ee,Di}finally{}}}var wg=lj(!0),cj=lj(!1),Zo=K(null),Pc=null;function hd(d){var p=d.alternate;oe($n,$n.current&1),oe(Zo,d),Pc===null&&(p===null||gg.current!==null||p.memoizedState!==null)&&(Pc=d)}function uj(d){if(d.tag===22){if(oe($n,$n.current),oe(Zo,d),Pc===null){var p=d.alternate;p!==null&&p.memoizedState!==null&&(Pc=d)}}else dd()}function dd(){oe($n,$n.current),oe(Zo,Zo.current)}function Ku(d){re(Zo),Pc===d&&(Pc=null),re($n)}var $n=K(0);function w2(d){for(var p=d;p!==null;){if(p.tag===13){var y=p.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||U5(y)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function $C(d,p,y,w){p=d.memoizedState,y=y(w,p),y=y==null?p:u({},p,y),d.memoizedState=y,d.lanes===0&&(d.updateQueue.baseState=y)}var JC={enqueueSetState:function(d,p,y){d=d._reactInternals;var w=Mo(),I=ld(w);I.payload=p,y!=null&&(I.callback=y),p=cd(d,I,w),p!==null&&(Po(p,d,w),Ny(p,d,w))},enqueueReplaceState:function(d,p,y){d=d._reactInternals;var w=Mo(),I=ld(w);I.tag=1,I.payload=p,y!=null&&(I.callback=y),p=cd(d,I,w),p!==null&&(Po(p,d,w),Ny(p,d,w))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var y=Mo(),w=ld(y);w.tag=2,p!=null&&(w.callback=p),p=cd(d,w,y),p!==null&&(Po(p,d,y),Ny(p,d,y))}};function hj(d,p,y,w,I,z,W){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(w,z,W):p.prototype&&p.prototype.isPureReactComponent?!Py(y,w)||!Py(I,z):!0}function dj(d,p,y,w){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(y,w),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(y,w),p.state!==d&&JC.enqueueReplaceState(p,p.state,null)}function bp(d,p){var y=p;if("ref"in p){y={};for(var w in p)w!=="ref"&&(y[w]=p[w])}if(d=d.defaultProps){y===p&&(y=u({},y));for(var I in d)y[I]===void 0&&(y[I]=d[I])}return y}var S2=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function fj(d){S2(d)}function pj(d){console.error(d)}function mj(d){S2(d)}function _2(d,p){try{var y=d.onUncaughtError;y(p.value,{componentStack:p.stack})}catch(w){setTimeout(function(){throw w})}}function gj(d,p,y){try{var w=d.onCaughtError;w(y.value,{componentStack:y.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function e5(d,p,y){return y=ld(y),y.tag=3,y.payload={element:null},y.callback=function(){_2(d,p)},y}function vj(d){return d=ld(d),d.tag=3,d}function yj(d,p,y,w){var I=y.type.getDerivedStateFromError;if(typeof I=="function"){var z=w.value;d.payload=function(){return I(z)},d.callback=function(){gj(p,y,w)}}var W=y.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(d.callback=function(){gj(p,y,w),typeof I!="function"&&(yd===null?yd=new Set([this]):yd.add(this));var te=w.stack;this.componentDidCatch(w.value,{componentStack:te!==null?te:""})})}function coe(d,p,y,w,I){if(y.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(p=y.alternate,p!==null&&Ly(p,y,I,!0),y=Zo.current,y!==null){switch(y.tag){case 13:return Pc===null?E5():y.alternate===null&&hn===0&&(hn=3),y.flags&=-257,y.flags|=65536,y.lanes=I,w===PC?y.flags|=16384:(p=y.updateQueue,p===null?y.updateQueue=new Set([w]):p.add(w),T5(d,w,I)),!1;case 22:return y.flags|=65536,w===PC?y.flags|=16384:(p=y.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([w])},y.updateQueue=p):(y=p.retryQueue,y===null?p.retryQueue=new Set([w]):y.add(w)),T5(d,w,I)),!1}throw Error(r(435,y.tag))}return T5(d,w,I),E5(),!1}if(rr)return p=Zo.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=I,w!==SC&&(d=Error(r(422),{cause:w}),Oy(Xo(d,y)))):(w!==SC&&(p=Error(r(423),{cause:w}),Oy(Xo(p,y))),d=d.current.alternate,d.flags|=65536,I&=-I,d.lanes|=I,w=Xo(w,y),I=e5(d.stateNode,w,I),RC(d,I),hn!==4&&(hn=2)),!1;var z=Error(r(520),{cause:w});if(z=Xo(z,y),e1===null?e1=[z]:e1.push(z),hn!==4&&(hn=2),p===null)return!0;w=Xo(w,y),y=p;do{switch(y.tag){case 3:return y.flags|=65536,d=I&-I,y.lanes|=d,d=e5(y.stateNode,w,d),RC(y,d),!1;case 1:if(p=y.type,z=y.stateNode,(y.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(yd===null||!yd.has(z))))return y.flags|=65536,I&=-I,y.lanes|=I,I=vj(I),yj(I,d,y,w),RC(y,I),!1}y=y.return}while(y!==null);return!1}var xj=Error(r(461)),gs=!1;function Ns(d,p,y,w){p.child=d===null?cj(p,null,y,w):wg(p,d.child,y,w)}function bj(d,p,y,w,I){y=y.render;var z=p.ref;if("ref"in w){var W={};for(var te in w)te!=="ref"&&(W[te]=w[te])}else W=w;return vp(p),w=BC(d,p,y,W,z,I),te=jC(),d!==null&&!gs?(NC(d,p,I),Zu(d,p,I)):(rr&&te&&bC(p),p.flags|=1,Ns(d,p,w,I),p.child)}function wj(d,p,y,w,I){if(d===null){var z=y.type;return typeof z=="function"&&!vC(z)&&z.defaultProps===void 0&&y.compare===null?(p.tag=15,p.type=z,Sj(d,p,z,w,I)):(d=i2(y.type,null,w,p,p.mode,I),d.ref=p.ref,d.return=p,p.child=d)}if(z=d.child,!l5(d,I)){var W=z.memoizedProps;if(y=y.compare,y=y!==null?y:Py,y(W,w)&&d.ref===p.ref)return Zu(d,p,I)}return p.flags|=1,d=Gu(z,w),d.ref=p.ref,d.return=p,p.child=d}function Sj(d,p,y,w,I){if(d!==null){var z=d.memoizedProps;if(Py(z,w)&&d.ref===p.ref)if(gs=!1,p.pendingProps=w=z,l5(d,I))(d.flags&131072)!==0&&(gs=!0);else return p.lanes=d.lanes,Zu(d,p,I)}return t5(d,p,y,w,I)}function _j(d,p,y){var w=p.pendingProps,I=w.children,z=d!==null?d.memoizedState:null;if(w.mode==="hidden"){if((p.flags&128)!==0){if(w=z!==null?z.baseLanes|y:y,d!==null){for(I=p.child=d.child,z=0;I!==null;)z=z|I.lanes|I.childLanes,I=I.sibling;p.childLanes=z&~w}else p.childLanes=0,p.child=null;return Ej(d,p,w,y)}if((y&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},d!==null&&o2(p,z!==null?z.cachePool:null),z!==null?SB(p,z):LC(),uj(p);else return p.lanes=p.childLanes=536870912,Ej(d,p,z!==null?z.baseLanes|y:y,y)}else z!==null?(o2(p,z.cachePool),SB(p,z),dd(),p.memoizedState=null):(d!==null&&o2(p,null),LC(),dd());return Ns(d,p,I,y),p.child}function Ej(d,p,y,w){var I=MC();return I=I===null?null:{parent:Zn._currentValue,pool:I},p.memoizedState={baseLanes:y,cachePool:I},d!==null&&o2(p,null),LC(),uj(p),d!==null&&Ly(d,p,w,!0),null}function E2(d,p){var y=p.ref;if(y===null)d!==null&&d.ref!==null&&(p.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(d===null||d.ref!==y)&&(p.flags|=4194816)}}function t5(d,p,y,w,I){return vp(p),y=BC(d,p,y,w,void 0,I),w=jC(),d!==null&&!gs?(NC(d,p,I),Zu(d,p,I)):(rr&&w&&bC(p),p.flags|=1,Ns(d,p,y,I),p.child)}function Aj(d,p,y,w,I,z){return vp(p),p.updateQueue=null,y=EB(p,w,y,I),_B(d),w=jC(),d!==null&&!gs?(NC(d,p,z),Zu(d,p,z)):(rr&&w&&bC(p),p.flags|=1,Ns(d,p,y,z),p.child)}function Tj(d,p,y,w,I){if(vp(p),p.stateNode===null){var z=hg,W=y.contextType;typeof W=="object"&&W!==null&&(z=ua(W)),z=new y(w,z),p.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=JC,p.stateNode=z,z._reactInternals=p,z=p.stateNode,z.props=w,z.state=p.memoizedState,z.refs={},DC(p),W=y.contextType,z.context=typeof W=="object"&&W!==null?ua(W):hg,z.state=p.memoizedState,W=y.getDerivedStateFromProps,typeof W=="function"&&($C(p,y,W,w),z.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(W=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),W!==z.state&&JC.enqueueReplaceState(z,z.state,null),Uy(p,w,z,I),Vy(),z.state=p.memoizedState),typeof z.componentDidMount=="function"&&(p.flags|=4194308),w=!0}else if(d===null){z=p.stateNode;var te=p.memoizedProps,ve=bp(y,te);z.props=ve;var Oe=z.context,Ye=y.contextType;W=hg,typeof Ye=="object"&&Ye!==null&&(W=ua(Ye));var et=y.getDerivedStateFromProps;Ye=typeof et=="function"||typeof z.getSnapshotBeforeUpdate=="function",te=p.pendingProps!==te,Ye||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(te||Oe!==W)&&dj(p,z,w,W),od=!1;var ke=p.memoizedState;z.state=ke,Uy(p,w,z,I),Vy(),Oe=p.memoizedState,te||ke!==Oe||od?(typeof et=="function"&&($C(p,y,et,w),Oe=p.memoizedState),(ve=od||hj(p,y,ve,w,ke,Oe,W))?(Ye||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(p.flags|=4194308)):(typeof z.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=w,p.memoizedState=Oe),z.props=w,z.state=Oe,z.context=W,w=ve):(typeof z.componentDidMount=="function"&&(p.flags|=4194308),w=!1)}else{z=p.stateNode,IC(d,p),W=p.memoizedProps,Ye=bp(y,W),z.props=Ye,et=p.pendingProps,ke=z.context,Oe=y.contextType,ve=hg,typeof Oe=="object"&&Oe!==null&&(ve=ua(Oe)),te=y.getDerivedStateFromProps,(Oe=typeof te=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(W!==et||ke!==ve)&&dj(p,z,w,ve),od=!1,ke=p.memoizedState,z.state=ke,Uy(p,w,z,I),Vy();var ze=p.memoizedState;W!==et||ke!==ze||od||d!==null&&d.dependencies!==null&&s2(d.dependencies)?(typeof te=="function"&&($C(p,y,te,w),ze=p.memoizedState),(Ye=od||hj(p,y,Ye,w,ke,ze,ve)||d!==null&&d.dependencies!==null&&s2(d.dependencies))?(Oe||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(w,ze,ve),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(w,ze,ve)),typeof z.componentDidUpdate=="function"&&(p.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof z.componentDidUpdate!="function"||W===d.memoizedProps&&ke===d.memoizedState||(p.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||W===d.memoizedProps&&ke===d.memoizedState||(p.flags|=1024),p.memoizedProps=w,p.memoizedState=ze),z.props=w,z.state=ze,z.context=ve,w=Ye):(typeof z.componentDidUpdate!="function"||W===d.memoizedProps&&ke===d.memoizedState||(p.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||W===d.memoizedProps&&ke===d.memoizedState||(p.flags|=1024),w=!1)}return z=w,E2(d,p),w=(p.flags&128)!==0,z||w?(z=p.stateNode,y=w&&typeof y.getDerivedStateFromError!="function"?null:z.render(),p.flags|=1,d!==null&&w?(p.child=wg(p,d.child,null,I),p.child=wg(p,null,y,I)):Ns(d,p,y,I),p.memoizedState=z.state,d=p.child):d=Zu(d,p,I),d}function Cj(d,p,y,w){return Ry(),p.flags|=256,Ns(d,p,y,w),p.child}var i5={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function r5(d){return{baseLanes:d,cachePool:pB()}}function n5(d,p,y){return d=d!==null?d.childLanes&~y:0,p&&(d|=$o),d}function Mj(d,p,y){var w=p.pendingProps,I=!1,z=(p.flags&128)!==0,W;if((W=z)||(W=d!==null&&d.memoizedState===null?!1:($n.current&2)!==0),W&&(I=!0,p.flags&=-129),W=(p.flags&32)!==0,p.flags&=-33,d===null){if(rr){if(I?hd(p):dd(),rr){var te=un,ve;if(ve=te){e:{for(ve=te,te=Mc;ve.nodeType!==8;){if(!te){te=null;break e}if(ve=Ll(ve.nextSibling),ve===null){te=null;break e}}te=ve}te!==null?(p.memoizedState={dehydrated:te,treeContext:dp!==null?{id:Wu,overflow:qu}:null,retryLane:536870912,hydrationErrors:null},ve=Eo(18,null,null,0),ve.stateNode=te,ve.return=p,p.child=ve,Da=p,un=null,ve=!0):ve=!1}ve||mp(p)}if(te=p.memoizedState,te!==null&&(te=te.dehydrated,te!==null))return U5(te)?p.lanes=32:p.lanes=536870912,null;Ku(p)}return te=w.children,w=w.fallback,I?(dd(),I=p.mode,te=A2({mode:"hidden",children:te},I),w=hp(w,I,y,null),te.return=p,w.return=p,te.sibling=w,p.child=te,I=p.child,I.memoizedState=r5(y),I.childLanes=n5(d,W,y),p.memoizedState=i5,w):(hd(p),s5(p,te))}if(ve=d.memoizedState,ve!==null&&(te=ve.dehydrated,te!==null)){if(z)p.flags&256?(hd(p),p.flags&=-257,p=a5(d,p,y)):p.memoizedState!==null?(dd(),p.child=d.child,p.flags|=128,p=null):(dd(),I=w.fallback,te=p.mode,w=A2({mode:"visible",children:w.children},te),I=hp(I,te,y,null),I.flags|=2,w.return=p,I.return=p,w.sibling=I,p.child=w,wg(p,d.child,null,y),w=p.child,w.memoizedState=r5(y),w.childLanes=n5(d,W,y),p.memoizedState=i5,p=I);else if(hd(p),U5(te)){if(W=te.nextSibling&&te.nextSibling.dataset,W)var Oe=W.dgst;W=Oe,w=Error(r(419)),w.stack="",w.digest=W,Oy({value:w,source:null,stack:null}),p=a5(d,p,y)}else if(gs||Ly(d,p,y,!1),W=(y&d.childLanes)!==0,gs||W){if(W=Br,W!==null&&(w=y&-y,w=(w&42)!==0?1:Hi(w),w=(w&(W.suspendedLanes|y))!==0?0:w,w!==0&&w!==ve.retryLane))throw ve.retryLane=w,ug(d,w),Po(W,d,w),xj;te.data==="$?"||E5(),p=a5(d,p,y)}else te.data==="$?"?(p.flags|=192,p.child=d.child,p=null):(d=ve.treeContext,un=Ll(te.nextSibling),Da=p,rr=!0,pp=null,Mc=!1,d!==null&&(Qo[Ko++]=Wu,Qo[Ko++]=qu,Qo[Ko++]=dp,Wu=d.id,qu=d.overflow,dp=p),p=s5(p,w.children),p.flags|=4096);return p}return I?(dd(),I=w.fallback,te=p.mode,ve=d.child,Oe=ve.sibling,w=Gu(ve,{mode:"hidden",children:w.children}),w.subtreeFlags=ve.subtreeFlags&65011712,Oe!==null?I=Gu(Oe,I):(I=hp(I,te,y,null),I.flags|=2),I.return=p,w.return=p,w.sibling=I,p.child=w,w=I,I=p.child,te=d.child.memoizedState,te===null?te=r5(y):(ve=te.cachePool,ve!==null?(Oe=Zn._currentValue,ve=ve.parent!==Oe?{parent:Oe,pool:Oe}:ve):ve=pB(),te={baseLanes:te.baseLanes|y,cachePool:ve}),I.memoizedState=te,I.childLanes=n5(d,W,y),p.memoizedState=i5,w):(hd(p),y=d.child,d=y.sibling,y=Gu(y,{mode:"visible",children:w.children}),y.return=p,y.sibling=null,d!==null&&(W=p.deletions,W===null?(p.deletions=[d],p.flags|=16):W.push(d)),p.child=y,p.memoizedState=null,y)}function s5(d,p){return p=A2({mode:"visible",children:p},d.mode),p.return=d,d.child=p}function A2(d,p){return d=Eo(22,d,null,p),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function a5(d,p,y){return wg(p,d.child,null,y),d=s5(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function Pj(d,p,y){d.lanes|=p;var w=d.alternate;w!==null&&(w.lanes|=p),EC(d.return,p,y)}function o5(d,p,y,w,I){var z=d.memoizedState;z===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:w,tail:y,tailMode:I}:(z.isBackwards=p,z.rendering=null,z.renderingStartTime=0,z.last=w,z.tail=y,z.tailMode=I)}function Dj(d,p,y){var w=p.pendingProps,I=w.revealOrder,z=w.tail;if(Ns(d,p,w.children,y),w=$n.current,(w&2)!==0)w=w&1|2,p.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Pj(d,y,p);else if(d.tag===19)Pj(d,y,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}w&=1}switch(oe($n,w),I){case"forwards":for(y=p.child,I=null;y!==null;)d=y.alternate,d!==null&&w2(d)===null&&(I=y),y=y.sibling;y=I,y===null?(I=p.child,p.child=null):(I=y.sibling,y.sibling=null),o5(p,!1,I,y,z);break;case"backwards":for(y=null,I=p.child,p.child=null;I!==null;){if(d=I.alternate,d!==null&&w2(d)===null){p.child=I;break}d=I.sibling,I.sibling=y,y=I,I=d}o5(p,!0,y,null,z);break;case"together":o5(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Zu(d,p,y){if(d!==null&&(p.dependencies=d.dependencies),vd|=p.lanes,(y&p.childLanes)===0)if(d!==null){if(Ly(d,p,y,!1),(y&p.childLanes)===0)return null}else return null;if(d!==null&&p.child!==d.child)throw Error(r(153));if(p.child!==null){for(d=p.child,y=Gu(d,d.pendingProps),p.child=y,y.return=p;d.sibling!==null;)d=d.sibling,y=y.sibling=Gu(d,d.pendingProps),y.return=p;y.sibling=null}return p.child}function l5(d,p){return(d.lanes&p)!==0?!0:(d=d.dependencies,!!(d!==null&&s2(d)))}function uoe(d,p,y){switch(p.tag){case 3:fe(p,p.stateNode.containerInfo),ad(p,Zn,d.memoizedState.cache),Ry();break;case 27:case 5:_e(p);break;case 4:fe(p,p.stateNode.containerInfo);break;case 10:ad(p,p.type,p.memoizedProps.value);break;case 13:var w=p.memoizedState;if(w!==null)return w.dehydrated!==null?(hd(p),p.flags|=128,null):(y&p.child.childLanes)!==0?Mj(d,p,y):(hd(p),d=Zu(d,p,y),d!==null?d.sibling:null);hd(p);break;case 19:var I=(d.flags&128)!==0;if(w=(y&p.childLanes)!==0,w||(Ly(d,p,y,!1),w=(y&p.childLanes)!==0),I){if(w)return Dj(d,p,y);p.flags|=128}if(I=p.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),oe($n,$n.current),w)break;return null;case 22:case 23:return p.lanes=0,_j(d,p,y);case 24:ad(p,Zn,d.memoizedState.cache)}return Zu(d,p,y)}function Ij(d,p,y){if(d!==null)if(d.memoizedProps!==p.pendingProps)gs=!0;else{if(!l5(d,y)&&(p.flags&128)===0)return gs=!1,uoe(d,p,y);gs=(d.flags&131072)!==0}else gs=!1,rr&&(p.flags&1048576)!==0&&oB(p,n2,p.index);switch(p.lanes=0,p.tag){case 16:e:{d=p.pendingProps;var w=p.elementType,I=w._init;if(w=I(w._payload),p.type=w,typeof w=="function")vC(w)?(d=bp(w,d),p.tag=1,p=Tj(null,p,w,d,y)):(p.tag=0,p=t5(null,p,w,d,y));else{if(w!=null){if(I=w.$$typeof,I===A){p.tag=11,p=bj(null,p,w,d,y);break e}else if(I===D){p.tag=14,p=wj(null,p,w,d,y);break e}}throw p=V(w)||w,Error(r(306,p,""))}}return p;case 0:return t5(d,p,p.type,p.pendingProps,y);case 1:return w=p.type,I=bp(w,p.pendingProps),Tj(d,p,w,I,y);case 3:e:{if(fe(p,p.stateNode.containerInfo),d===null)throw Error(r(387));w=p.pendingProps;var z=p.memoizedState;I=z.element,IC(d,p),Uy(p,w,null,y);var W=p.memoizedState;if(w=W.cache,ad(p,Zn,w),w!==z.cache&&AC(p,[Zn],y,!0),Vy(),w=W.element,z.isDehydrated)if(z={element:w,isDehydrated:!1,cache:W.cache},p.updateQueue.baseState=z,p.memoizedState=z,p.flags&256){p=Cj(d,p,w,y);break e}else if(w!==I){I=Xo(Error(r(424)),p),Oy(I),p=Cj(d,p,w,y);break e}else{switch(d=p.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(un=Ll(d.firstChild),Da=p,rr=!0,pp=null,Mc=!0,y=cj(p,null,w,y),p.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Ry(),w===I){p=Zu(d,p,y);break e}Ns(d,p,w,y)}p=p.child}return p;case 26:return E2(d,p),d===null?(y=k8(p.type,null,p.pendingProps,null))?p.memoizedState=y:rr||(y=p.type,d=p.pendingProps,w=N2(se.current).createElement(y),w[gr]=p,w[zr]=d,Us(w,y,d),Ht(w),p.stateNode=w):p.memoizedState=k8(p.type,d.memoizedProps,p.pendingProps,d.memoizedState),null;case 27:return _e(p),d===null&&rr&&(w=p.stateNode=R8(p.type,p.pendingProps,se.current),Da=p,Mc=!0,I=un,wd(p.type)?(F5=I,un=Ll(w.firstChild)):un=I),Ns(d,p,p.pendingProps.children,y),E2(d,p),d===null&&(p.flags|=4194304),p.child;case 5:return d===null&&rr&&((I=w=un)&&(w=joe(w,p.type,p.pendingProps,Mc),w!==null?(p.stateNode=w,Da=p,un=Ll(w.firstChild),Mc=!1,I=!0):I=!1),I||mp(p)),_e(p),I=p.type,z=p.pendingProps,W=d!==null?d.memoizedProps:null,w=z.children,j5(I,z)?w=null:W!==null&&j5(I,W)&&(p.flags|=32),p.memoizedState!==null&&(I=BC(d,p,ioe,null,null,y),c1._currentValue=I),E2(d,p),Ns(d,p,w,y),p.child;case 6:return d===null&&rr&&((d=y=un)&&(y=Noe(y,p.pendingProps,Mc),y!==null?(p.stateNode=y,Da=p,un=null,d=!0):d=!1),d||mp(p)),null;case 13:return Mj(d,p,y);case 4:return fe(p,p.stateNode.containerInfo),w=p.pendingProps,d===null?p.child=wg(p,null,w,y):Ns(d,p,w,y),p.child;case 11:return bj(d,p,p.type,p.pendingProps,y);case 7:return Ns(d,p,p.pendingProps,y),p.child;case 8:return Ns(d,p,p.pendingProps.children,y),p.child;case 12:return Ns(d,p,p.pendingProps.children,y),p.child;case 10:return w=p.pendingProps,ad(p,p.type,w.value),Ns(d,p,w.children,y),p.child;case 9:return I=p.type._context,w=p.pendingProps.children,vp(p),I=ua(I),w=w(I),p.flags|=1,Ns(d,p,w,y),p.child;case 14:return wj(d,p,p.type,p.pendingProps,y);case 15:return Sj(d,p,p.type,p.pendingProps,y);case 19:return Dj(d,p,y);case 31:return w=p.pendingProps,y=p.mode,w={mode:w.mode,children:w.children},d===null?(y=A2(w,y),y.ref=p.ref,p.child=y,y.return=p,p=y):(y=Gu(d.child,w),y.ref=p.ref,p.child=y,y.return=p,p=y),p;case 22:return _j(d,p,y);case 24:return vp(p),w=ua(Zn),d===null?(I=MC(),I===null&&(I=Br,z=TC(),I.pooledCache=z,z.refCount++,z!==null&&(I.pooledCacheLanes|=y),I=z),p.memoizedState={parent:w,cache:I},DC(p),ad(p,Zn,I)):((d.lanes&y)!==0&&(IC(d,p),Uy(p,null,null,y),Vy()),I=d.memoizedState,z=p.memoizedState,I.parent!==w?(I={parent:w,cache:w},p.memoizedState=I,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=I),ad(p,Zn,w)):(w=z.cache,ad(p,Zn,w),w!==I.cache&&AC(p,[Zn],y,!0))),Ns(d,p,p.pendingProps.children,y),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function $u(d){d.flags|=4}function Rj(d,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!V8(p)){if(p=Zo.current,p!==null&&((qi&4194048)===qi?Pc!==null:(qi&62914560)!==qi&&(qi&536870912)===0||p!==Pc))throw jy=PC,mB;d.flags|=8192}}function T2(d,p){p!==null&&(d.flags|=4),d.flags&16384&&(p=d.tag!==22?Ue():536870912,d.lanes|=p,Ag|=p)}function Yy(d,p){if(!rr)switch(d.tailMode){case"hidden":p=d.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d.tail=null:y.sibling=null;break;case"collapsed":y=d.tail;for(var w=null;y!==null;)y.alternate!==null&&(w=y),y=y.sibling;w===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:w.sibling=null}}function tn(d){var p=d.alternate!==null&&d.alternate.child===d.child,y=0,w=0;if(p)for(var I=d.child;I!==null;)y|=I.lanes|I.childLanes,w|=I.subtreeFlags&65011712,w|=I.flags&65011712,I.return=d,I=I.sibling;else for(I=d.child;I!==null;)y|=I.lanes|I.childLanes,w|=I.subtreeFlags,w|=I.flags,I.return=d,I=I.sibling;return d.subtreeFlags|=w,d.childLanes=y,p}function hoe(d,p,y){var w=p.pendingProps;switch(wC(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(p),null;case 1:return tn(p),null;case 3:return y=p.stateNode,w=null,d!==null&&(w=d.memoizedState.cache),p.memoizedState.cache!==w&&(p.flags|=2048),Yu(Zn),ye(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(d===null||d.child===null)&&(Iy(p)?$u(p):d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,uB())),tn(p),null;case 26:return y=p.memoizedState,d===null?($u(p),y!==null?(tn(p),Rj(p,y)):(tn(p),p.flags&=-16777217)):y?y!==d.memoizedState?($u(p),tn(p),Rj(p,y)):(tn(p),p.flags&=-16777217):(d.memoizedProps!==w&&$u(p),tn(p),p.flags&=-16777217),null;case 27:Te(p),y=se.current;var I=p.type;if(d!==null&&p.stateNode!=null)d.memoizedProps!==w&&$u(p);else{if(!w){if(p.stateNode===null)throw Error(r(166));return tn(p),null}d=ce.current,Iy(p)?lB(p):(d=R8(I,w,y),p.stateNode=d,$u(p))}return tn(p),null;case 5:if(Te(p),y=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==w&&$u(p);else{if(!w){if(p.stateNode===null)throw Error(r(166));return tn(p),null}if(d=ce.current,Iy(p))lB(p);else{switch(I=N2(se.current),d){case 1:d=I.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:d=I.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":d=I.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":d=I.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":d=I.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof w.is=="string"?I.createElement("select",{is:w.is}):I.createElement("select"),w.multiple?d.multiple=!0:w.size&&(d.size=w.size);break;default:d=typeof w.is=="string"?I.createElement(y,{is:w.is}):I.createElement(y)}}d[gr]=p,d[zr]=w;e:for(I=p.child;I!==null;){if(I.tag===5||I.tag===6)d.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===p)break e;for(;I.sibling===null;){if(I.return===null||I.return===p)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}p.stateNode=d;e:switch(Us(d,y,w),y){case"button":case"input":case"select":case"textarea":d=!!w.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&$u(p)}}return tn(p),p.flags&=-16777217,null;case 6:if(d&&p.stateNode!=null)d.memoizedProps!==w&&$u(p);else{if(typeof w!="string"&&p.stateNode===null)throw Error(r(166));if(d=se.current,Iy(p)){if(d=p.stateNode,y=p.memoizedProps,w=null,I=Da,I!==null)switch(I.tag){case 27:case 5:w=I.memoizedProps}d[gr]=p,d=!!(d.nodeValue===y||w!==null&&w.suppressHydrationWarning===!0||A8(d.nodeValue,y)),d||mp(p)}else d=N2(d).createTextNode(w),d[gr]=p,p.stateNode=d}return tn(p),null;case 13:if(w=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(I=Iy(p),w!==null&&w.dehydrated!==null){if(d===null){if(!I)throw Error(r(318));if(I=p.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(r(317));I[gr]=p}else Ry(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;tn(p),I=!1}else I=uB(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=I),I=!0;if(!I)return p.flags&256?(Ku(p),p):(Ku(p),null)}if(Ku(p),(p.flags&128)!==0)return p.lanes=y,p;if(y=w!==null,d=d!==null&&d.memoizedState!==null,y){w=p.child,I=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(I=w.alternate.memoizedState.cachePool.pool);var z=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(z=w.memoizedState.cachePool.pool),z!==I&&(w.flags|=2048)}return y!==d&&y&&(p.child.flags|=8192),T2(p,p.updateQueue),tn(p),null;case 4:return ye(),d===null&&O5(p.stateNode.containerInfo),tn(p),null;case 10:return Yu(p.type),tn(p),null;case 19:if(re($n),I=p.memoizedState,I===null)return tn(p),null;if(w=(p.flags&128)!==0,z=I.rendering,z===null)if(w)Yy(I,!1);else{if(hn!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(z=w2(d),z!==null){for(p.flags|=128,Yy(I,!1),d=z.updateQueue,p.updateQueue=d,T2(p,d),p.subtreeFlags=0,d=y,y=p.child;y!==null;)aB(y,d),y=y.sibling;return oe($n,$n.current&1|2),p.child}d=d.sibling}I.tail!==null&&ct()>P2&&(p.flags|=128,w=!0,Yy(I,!1),p.lanes=4194304)}else{if(!w)if(d=w2(z),d!==null){if(p.flags|=128,w=!0,d=d.updateQueue,p.updateQueue=d,T2(p,d),Yy(I,!0),I.tail===null&&I.tailMode==="hidden"&&!z.alternate&&!rr)return tn(p),null}else 2*ct()-I.renderingStartTime>P2&&y!==536870912&&(p.flags|=128,w=!0,Yy(I,!1),p.lanes=4194304);I.isBackwards?(z.sibling=p.child,p.child=z):(d=I.last,d!==null?d.sibling=z:p.child=z,I.last=z)}return I.tail!==null?(p=I.tail,I.rendering=p,I.tail=p.sibling,I.renderingStartTime=ct(),p.sibling=null,d=$n.current,oe($n,w?d&1|2:d&1),p):(tn(p),null);case 22:case 23:return Ku(p),kC(),w=p.memoizedState!==null,d!==null?d.memoizedState!==null!==w&&(p.flags|=8192):w&&(p.flags|=8192),w?(y&536870912)!==0&&(p.flags&128)===0&&(tn(p),p.subtreeFlags&6&&(p.flags|=8192)):tn(p),y=p.updateQueue,y!==null&&T2(p,y.retryQueue),y=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),w=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==y&&(p.flags|=2048),d!==null&&re(yp),null;case 24:return y=null,d!==null&&(y=d.memoizedState.cache),p.memoizedState.cache!==y&&(p.flags|=2048),Yu(Zn),tn(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function doe(d,p){switch(wC(p),p.tag){case 1:return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return Yu(Zn),ye(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 26:case 27:case 5:return Te(p),null;case 13:if(Ku(p),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Ry()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return re($n),null;case 4:return ye(),null;case 10:return Yu(p.type),null;case 22:case 23:return Ku(p),kC(),d!==null&&re(yp),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 24:return Yu(Zn),null;case 25:return null;default:return null}}function Oj(d,p){switch(wC(p),p.tag){case 3:Yu(Zn),ye();break;case 26:case 27:case 5:Te(p);break;case 4:ye();break;case 13:Ku(p);break;case 19:re($n);break;case 10:Yu(p.type);break;case 22:case 23:Ku(p),kC(),d!==null&&re(yp);break;case 24:Yu(Zn)}}function Qy(d,p){try{var y=p.updateQueue,w=y!==null?y.lastEffect:null;if(w!==null){var I=w.next;y=I;do{if((y.tag&d)===d){w=void 0;var z=y.create,W=y.inst;w=z(),W.destroy=w}y=y.next}while(y!==I)}}catch(te){Or(p,p.return,te)}}function fd(d,p,y){try{var w=p.updateQueue,I=w!==null?w.lastEffect:null;if(I!==null){var z=I.next;w=z;do{if((w.tag&d)===d){var W=w.inst,te=W.destroy;if(te!==void 0){W.destroy=void 0,I=p;var ve=y,Oe=te;try{Oe()}catch(Ye){Or(I,ve,Ye)}}}w=w.next}while(w!==z)}}catch(Ye){Or(p,p.return,Ye)}}function Lj(d){var p=d.updateQueue;if(p!==null){var y=d.stateNode;try{wB(p,y)}catch(w){Or(d,d.return,w)}}}function kj(d,p,y){y.props=bp(d.type,d.memoizedProps),y.state=d.memoizedState;try{y.componentWillUnmount()}catch(w){Or(d,p,w)}}function Ky(d,p){try{var y=d.ref;if(y!==null){switch(d.tag){case 26:case 27:case 5:var w=d.stateNode;break;case 30:w=d.stateNode;break;default:w=d.stateNode}typeof y=="function"?d.refCleanup=y(w):y.current=w}}catch(I){Or(d,p,I)}}function Dc(d,p){var y=d.ref,w=d.refCleanup;if(y!==null)if(typeof w=="function")try{w()}catch(I){Or(d,p,I)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(I){Or(d,p,I)}else y.current=null}function zj(d){var p=d.type,y=d.memoizedProps,w=d.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":y.autoFocus&&w.focus();break e;case"img":y.src?w.src=y.src:y.srcSet&&(w.srcset=y.srcSet)}}catch(I){Or(d,d.return,I)}}function c5(d,p,y){try{var w=d.stateNode;Ooe(w,d.type,y,p),w[zr]=p}catch(I){Or(d,d.return,I)}}function Bj(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&wd(d.type)||d.tag===4}function u5(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Bj(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&wd(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function h5(d,p,y){var w=d.tag;if(w===5||w===6)d=d.stateNode,p?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(d,p):(p=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,p.appendChild(d),y=y._reactRootContainer,y!=null||p.onclick!==null||(p.onclick=j2));else if(w!==4&&(w===27&&wd(d.type)&&(y=d.stateNode,p=null),d=d.child,d!==null))for(h5(d,p,y),d=d.sibling;d!==null;)h5(d,p,y),d=d.sibling}function C2(d,p,y){var w=d.tag;if(w===5||w===6)d=d.stateNode,p?y.insertBefore(d,p):y.appendChild(d);else if(w!==4&&(w===27&&wd(d.type)&&(y=d.stateNode),d=d.child,d!==null))for(C2(d,p,y),d=d.sibling;d!==null;)C2(d,p,y),d=d.sibling}function jj(d){var p=d.stateNode,y=d.memoizedProps;try{for(var w=d.type,I=p.attributes;I.length;)p.removeAttributeNode(I[0]);Us(p,w,y),p[gr]=d,p[zr]=y}catch(z){Or(d,d.return,z)}}var Ju=!1,xn=!1,d5=!1,Nj=typeof WeakSet=="function"?WeakSet:Set,vs=null;function foe(d,p){if(d=d.containerInfo,z5=W2,d=Kz(d),uC(d)){if("selectionStart"in d)var y={start:d.selectionStart,end:d.selectionEnd};else e:{y=(y=d.ownerDocument)&&y.defaultView||window;var w=y.getSelection&&y.getSelection();if(w&&w.rangeCount!==0){y=w.anchorNode;var I=w.anchorOffset,z=w.focusNode;w=w.focusOffset;try{y.nodeType,z.nodeType}catch{y=null;break e}var W=0,te=-1,ve=-1,Oe=0,Ye=0,et=d,ke=null;t:for(;;){for(var ze;et!==y||I!==0&&et.nodeType!==3||(te=W+I),et!==z||w!==0&&et.nodeType!==3||(ve=W+w),et.nodeType===3&&(W+=et.nodeValue.length),(ze=et.firstChild)!==null;)ke=et,et=ze;for(;;){if(et===d)break t;if(ke===y&&++Oe===I&&(te=W),ke===z&&++Ye===w&&(ve=W),(ze=et.nextSibling)!==null)break;et=ke,ke=et.parentNode}et=ze}y=te===-1||ve===-1?null:{start:te,end:ve}}else y=null}y=y||{start:0,end:0}}else y=null;for(B5={focusedElem:d,selectionRange:y},W2=!1,vs=p;vs!==null;)if(p=vs,d=p.child,(p.subtreeFlags&1024)!==0&&d!==null)d.return=p,vs=d;else for(;vs!==null;){switch(p=vs,z=p.alternate,d=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&z!==null){d=void 0,y=p,I=z.memoizedProps,z=z.memoizedState,w=y.stateNode;try{var li=bp(y.type,I,y.elementType===y.type);d=w.getSnapshotBeforeUpdate(li,z),w.__reactInternalSnapshotBeforeUpdate=d}catch(ii){Or(y,y.return,ii)}}break;case 3:if((d&1024)!==0){if(d=p.stateNode.containerInfo,y=d.nodeType,y===9)V5(d);else if(y===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":V5(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=p.sibling,d!==null){d.return=p.return,vs=d;break}vs=p.return}}function Vj(d,p,y){var w=y.flags;switch(y.tag){case 0:case 11:case 15:pd(d,y),w&4&&Qy(5,y);break;case 1:if(pd(d,y),w&4)if(d=y.stateNode,p===null)try{d.componentDidMount()}catch(W){Or(y,y.return,W)}else{var I=bp(y.type,p.memoizedProps);p=p.memoizedState;try{d.componentDidUpdate(I,p,d.__reactInternalSnapshotBeforeUpdate)}catch(W){Or(y,y.return,W)}}w&64&&Lj(y),w&512&&Ky(y,y.return);break;case 3:if(pd(d,y),w&64&&(d=y.updateQueue,d!==null)){if(p=null,y.child!==null)switch(y.child.tag){case 27:case 5:p=y.child.stateNode;break;case 1:p=y.child.stateNode}try{wB(d,p)}catch(W){Or(y,y.return,W)}}break;case 27:p===null&&w&4&&jj(y);case 26:case 5:pd(d,y),p===null&&w&4&&zj(y),w&512&&Ky(y,y.return);break;case 12:pd(d,y);break;case 13:pd(d,y),w&4&&Hj(d,y),w&64&&(d=y.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(y=Soe.bind(null,y),Voe(d,y))));break;case 22:if(w=y.memoizedState!==null||Ju,!w){p=p!==null&&p.memoizedState!==null||xn,I=Ju;var z=xn;Ju=w,(xn=p)&&!z?md(d,y,(y.subtreeFlags&8772)!==0):pd(d,y),Ju=I,xn=z}break;case 30:break;default:pd(d,y)}}function Uj(d){var p=d.alternate;p!==null&&(d.alternate=null,Uj(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&Ne(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Kr=null,eo=!1;function eh(d,p,y){for(y=y.child;y!==null;)Fj(d,p,y),y=y.sibling}function Fj(d,p,y){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(Z,y)}catch{}switch(y.tag){case 26:xn||Dc(y,p),eh(d,p,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:xn||Dc(y,p);var w=Kr,I=eo;wd(y.type)&&(Kr=y.stateNode,eo=!1),eh(d,p,y),s1(y.stateNode),Kr=w,eo=I;break;case 5:xn||Dc(y,p);case 6:if(w=Kr,I=eo,Kr=null,eh(d,p,y),Kr=w,eo=I,Kr!==null)if(eo)try{(Kr.nodeType===9?Kr.body:Kr.nodeName==="HTML"?Kr.ownerDocument.body:Kr).removeChild(y.stateNode)}catch(z){Or(y,p,z)}else try{Kr.removeChild(y.stateNode)}catch(z){Or(y,p,z)}break;case 18:Kr!==null&&(eo?(d=Kr,D8(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,y.stateNode),f1(d)):D8(Kr,y.stateNode));break;case 4:w=Kr,I=eo,Kr=y.stateNode.containerInfo,eo=!0,eh(d,p,y),Kr=w,eo=I;break;case 0:case 11:case 14:case 15:xn||fd(2,y,p),xn||fd(4,y,p),eh(d,p,y);break;case 1:xn||(Dc(y,p),w=y.stateNode,typeof w.componentWillUnmount=="function"&&kj(y,p,w)),eh(d,p,y);break;case 21:eh(d,p,y);break;case 22:xn=(w=xn)||y.memoizedState!==null,eh(d,p,y),xn=w;break;default:eh(d,p,y)}}function Hj(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{f1(d)}catch(y){Or(p,p.return,y)}}function poe(d){switch(d.tag){case 13:case 19:var p=d.stateNode;return p===null&&(p=d.stateNode=new Nj),p;case 22:return d=d.stateNode,p=d._retryCache,p===null&&(p=d._retryCache=new Nj),p;default:throw Error(r(435,d.tag))}}function f5(d,p){var y=poe(d);p.forEach(function(w){var I=_oe.bind(null,d,w);y.has(w)||(y.add(w),w.then(I,I))})}function Ao(d,p){var y=p.deletions;if(y!==null)for(var w=0;w<y.length;w++){var I=y[w],z=d,W=p,te=W;e:for(;te!==null;){switch(te.tag){case 27:if(wd(te.type)){Kr=te.stateNode,eo=!1;break e}break;case 5:Kr=te.stateNode,eo=!1;break e;case 3:case 4:Kr=te.stateNode.containerInfo,eo=!0;break e}te=te.return}if(Kr===null)throw Error(r(160));Fj(z,W,I),Kr=null,eo=!1,z=I.alternate,z!==null&&(z.return=null),I.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)Gj(p,d),p=p.sibling}var Ol=null;function Gj(d,p){var y=d.alternate,w=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Ao(p,d),To(d),w&4&&(fd(3,d,d.return),Qy(3,d),fd(5,d,d.return));break;case 1:Ao(p,d),To(d),w&512&&(xn||y===null||Dc(y,y.return)),w&64&&Ju&&(d=d.updateQueue,d!==null&&(w=d.callbacks,w!==null&&(y=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=y===null?w:y.concat(w))));break;case 26:var I=Ol;if(Ao(p,d),To(d),w&512&&(xn||y===null||Dc(y,y.return)),w&4){var z=y!==null?y.memoizedState:null;if(w=d.memoizedState,y===null)if(w===null)if(d.stateNode===null){e:{w=d.type,y=d.memoizedProps,I=I.ownerDocument||I;t:switch(w){case"title":z=I.getElementsByTagName("title")[0],(!z||z[Ae]||z[gr]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=I.createElement(w),I.head.insertBefore(z,I.querySelector("head > title"))),Us(z,w,y),z[gr]=d,Ht(z),w=z;break e;case"link":var W=j8("link","href",I).get(w+(y.href||""));if(W){for(var te=0;te<W.length;te++)if(z=W[te],z.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&z.getAttribute("rel")===(y.rel==null?null:y.rel)&&z.getAttribute("title")===(y.title==null?null:y.title)&&z.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){W.splice(te,1);break t}}z=I.createElement(w),Us(z,w,y),I.head.appendChild(z);break;case"meta":if(W=j8("meta","content",I).get(w+(y.content||""))){for(te=0;te<W.length;te++)if(z=W[te],z.getAttribute("content")===(y.content==null?null:""+y.content)&&z.getAttribute("name")===(y.name==null?null:y.name)&&z.getAttribute("property")===(y.property==null?null:y.property)&&z.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&z.getAttribute("charset")===(y.charSet==null?null:y.charSet)){W.splice(te,1);break t}}z=I.createElement(w),Us(z,w,y),I.head.appendChild(z);break;default:throw Error(r(468,w))}z[gr]=d,Ht(z),w=z}d.stateNode=w}else N8(I,d.type,d.stateNode);else d.stateNode=B8(I,w,d.memoizedProps);else z!==w?(z===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):z.count--,w===null?N8(I,d.type,d.stateNode):B8(I,w,d.memoizedProps)):w===null&&d.stateNode!==null&&c5(d,d.memoizedProps,y.memoizedProps)}break;case 27:Ao(p,d),To(d),w&512&&(xn||y===null||Dc(y,y.return)),y!==null&&w&4&&c5(d,d.memoizedProps,y.memoizedProps);break;case 5:if(Ao(p,d),To(d),w&512&&(xn||y===null||Dc(y,y.return)),d.flags&32){I=d.stateNode;try{Ho(I,"")}catch(ze){Or(d,d.return,ze)}}w&4&&d.stateNode!=null&&(I=d.memoizedProps,c5(d,I,y!==null?y.memoizedProps:I)),w&1024&&(d5=!0);break;case 6:if(Ao(p,d),To(d),w&4){if(d.stateNode===null)throw Error(r(162));w=d.memoizedProps,y=d.stateNode;try{y.nodeValue=w}catch(ze){Or(d,d.return,ze)}}break;case 3:if(F2=null,I=Ol,Ol=V2(p.containerInfo),Ao(p,d),Ol=I,To(d),w&4&&y!==null&&y.memoizedState.isDehydrated)try{f1(p.containerInfo)}catch(ze){Or(d,d.return,ze)}d5&&(d5=!1,Wj(d));break;case 4:w=Ol,Ol=V2(d.stateNode.containerInfo),Ao(p,d),To(d),Ol=w;break;case 12:Ao(p,d),To(d);break;case 13:Ao(p,d),To(d),d.child.flags&8192&&d.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(x5=ct()),w&4&&(w=d.updateQueue,w!==null&&(d.updateQueue=null,f5(d,w)));break;case 22:I=d.memoizedState!==null;var ve=y!==null&&y.memoizedState!==null,Oe=Ju,Ye=xn;if(Ju=Oe||I,xn=Ye||ve,Ao(p,d),xn=Ye,Ju=Oe,To(d),w&8192)e:for(p=d.stateNode,p._visibility=I?p._visibility&-2:p._visibility|1,I&&(y===null||ve||Ju||xn||wp(d)),y=null,p=d;;){if(p.tag===5||p.tag===26){if(y===null){ve=y=p;try{if(z=ve.stateNode,I)W=z.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none";else{te=ve.stateNode;var et=ve.memoizedProps.style,ke=et!=null&&et.hasOwnProperty("display")?et.display:null;te.style.display=ke==null||typeof ke=="boolean"?"":(""+ke).trim()}}catch(ze){Or(ve,ve.return,ze)}}}else if(p.tag===6){if(y===null){ve=p;try{ve.stateNode.nodeValue=I?"":ve.memoizedProps}catch(ze){Or(ve,ve.return,ze)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===d)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break e;for(;p.sibling===null;){if(p.return===null||p.return===d)break e;y===p&&(y=null),p=p.return}y===p&&(y=null),p.sibling.return=p.return,p=p.sibling}w&4&&(w=d.updateQueue,w!==null&&(y=w.retryQueue,y!==null&&(w.retryQueue=null,f5(d,y))));break;case 19:Ao(p,d),To(d),w&4&&(w=d.updateQueue,w!==null&&(d.updateQueue=null,f5(d,w)));break;case 30:break;case 21:break;default:Ao(p,d),To(d)}}function To(d){var p=d.flags;if(p&2){try{for(var y,w=d.return;w!==null;){if(Bj(w)){y=w;break}w=w.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var I=y.stateNode,z=u5(d);C2(d,z,I);break;case 5:var W=y.stateNode;y.flags&32&&(Ho(W,""),y.flags&=-33);var te=u5(d);C2(d,te,W);break;case 3:case 4:var ve=y.stateNode.containerInfo,Oe=u5(d);h5(d,Oe,ve);break;default:throw Error(r(161))}}catch(Ye){Or(d,d.return,Ye)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function Wj(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var p=d;Wj(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),d=d.sibling}}function pd(d,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)Vj(d,p.alternate,p),p=p.sibling}function wp(d){for(d=d.child;d!==null;){var p=d;switch(p.tag){case 0:case 11:case 14:case 15:fd(4,p,p.return),wp(p);break;case 1:Dc(p,p.return);var y=p.stateNode;typeof y.componentWillUnmount=="function"&&kj(p,p.return,y),wp(p);break;case 27:s1(p.stateNode);case 26:case 5:Dc(p,p.return),wp(p);break;case 22:p.memoizedState===null&&wp(p);break;case 30:wp(p);break;default:wp(p)}d=d.sibling}}function md(d,p,y){for(y=y&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var w=p.alternate,I=d,z=p,W=z.flags;switch(z.tag){case 0:case 11:case 15:md(I,z,y),Qy(4,z);break;case 1:if(md(I,z,y),w=z,I=w.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(Oe){Or(w,w.return,Oe)}if(w=z,I=w.updateQueue,I!==null){var te=w.stateNode;try{var ve=I.shared.hiddenCallbacks;if(ve!==null)for(I.shared.hiddenCallbacks=null,I=0;I<ve.length;I++)bB(ve[I],te)}catch(Oe){Or(w,w.return,Oe)}}y&&W&64&&Lj(z),Ky(z,z.return);break;case 27:jj(z);case 26:case 5:md(I,z,y),y&&w===null&&W&4&&zj(z),Ky(z,z.return);break;case 12:md(I,z,y);break;case 13:md(I,z,y),y&&W&4&&Hj(I,z);break;case 22:z.memoizedState===null&&md(I,z,y),Ky(z,z.return);break;case 30:break;default:md(I,z,y)}p=p.sibling}}function p5(d,p){var y=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),d=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(d=p.memoizedState.cachePool.pool),d!==y&&(d!=null&&d.refCount++,y!=null&&ky(y))}function m5(d,p){d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&ky(d))}function Ic(d,p,y,w){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)qj(d,p,y,w),p=p.sibling}function qj(d,p,y,w){var I=p.flags;switch(p.tag){case 0:case 11:case 15:Ic(d,p,y,w),I&2048&&Qy(9,p);break;case 1:Ic(d,p,y,w);break;case 3:Ic(d,p,y,w),I&2048&&(d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&ky(d)));break;case 12:if(I&2048){Ic(d,p,y,w),d=p.stateNode;try{var z=p.memoizedProps,W=z.id,te=z.onPostCommit;typeof te=="function"&&te(W,p.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(ve){Or(p,p.return,ve)}}else Ic(d,p,y,w);break;case 13:Ic(d,p,y,w);break;case 23:break;case 22:z=p.stateNode,W=p.alternate,p.memoizedState!==null?z._visibility&2?Ic(d,p,y,w):Zy(d,p):z._visibility&2?Ic(d,p,y,w):(z._visibility|=2,Sg(d,p,y,w,(p.subtreeFlags&10256)!==0)),I&2048&&p5(W,p);break;case 24:Ic(d,p,y,w),I&2048&&m5(p.alternate,p);break;default:Ic(d,p,y,w)}}function Sg(d,p,y,w,I){for(I=I&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var z=d,W=p,te=y,ve=w,Oe=W.flags;switch(W.tag){case 0:case 11:case 15:Sg(z,W,te,ve,I),Qy(8,W);break;case 23:break;case 22:var Ye=W.stateNode;W.memoizedState!==null?Ye._visibility&2?Sg(z,W,te,ve,I):Zy(z,W):(Ye._visibility|=2,Sg(z,W,te,ve,I)),I&&Oe&2048&&p5(W.alternate,W);break;case 24:Sg(z,W,te,ve,I),I&&Oe&2048&&m5(W.alternate,W);break;default:Sg(z,W,te,ve,I)}p=p.sibling}}function Zy(d,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var y=d,w=p,I=w.flags;switch(w.tag){case 22:Zy(y,w),I&2048&&p5(w.alternate,w);break;case 24:Zy(y,w),I&2048&&m5(w.alternate,w);break;default:Zy(y,w)}p=p.sibling}}var $y=8192;function _g(d){if(d.subtreeFlags&$y)for(d=d.child;d!==null;)Xj(d),d=d.sibling}function Xj(d){switch(d.tag){case 26:_g(d),d.flags&$y&&d.memoizedState!==null&&Joe(Ol,d.memoizedState,d.memoizedProps);break;case 5:_g(d);break;case 3:case 4:var p=Ol;Ol=V2(d.stateNode.containerInfo),_g(d),Ol=p;break;case 22:d.memoizedState===null&&(p=d.alternate,p!==null&&p.memoizedState!==null?(p=$y,$y=16777216,_g(d),$y=p):_g(d));break;default:_g(d)}}function Yj(d){var p=d.alternate;if(p!==null&&(d=p.child,d!==null)){p.child=null;do p=d.sibling,d.sibling=null,d=p;while(d!==null)}}function Jy(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var w=p[y];vs=w,Kj(w,d)}Yj(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Qj(d),d=d.sibling}function Qj(d){switch(d.tag){case 0:case 11:case 15:Jy(d),d.flags&2048&&fd(9,d,d.return);break;case 3:Jy(d);break;case 12:Jy(d);break;case 22:var p=d.stateNode;d.memoizedState!==null&&p._visibility&2&&(d.return===null||d.return.tag!==13)?(p._visibility&=-3,M2(d)):Jy(d);break;default:Jy(d)}}function M2(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var w=p[y];vs=w,Kj(w,d)}Yj(d)}for(d=d.child;d!==null;){switch(p=d,p.tag){case 0:case 11:case 15:fd(8,p,p.return),M2(p);break;case 22:y=p.stateNode,y._visibility&2&&(y._visibility&=-3,M2(p));break;default:M2(p)}d=d.sibling}}function Kj(d,p){for(;vs!==null;){var y=vs;switch(y.tag){case 0:case 11:case 15:fd(8,y,p);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var w=y.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:ky(y.memoizedState.cache)}if(w=y.child,w!==null)w.return=y,vs=w;else e:for(y=d;vs!==null;){w=vs;var I=w.sibling,z=w.return;if(Uj(w),w===y){vs=null;break e}if(I!==null){I.return=z,vs=I;break e}vs=z}}}var moe={getCacheForType:function(d){var p=ua(Zn),y=p.data.get(d);return y===void 0&&(y=d(),p.data.set(d,y)),y}},goe=typeof WeakMap=="function"?WeakMap:Map,vr=0,Br=null,Ri=null,qi=0,yr=0,Co=null,gd=!1,Eg=!1,g5=!1,th=0,hn=0,vd=0,Sp=0,v5=0,$o=0,Ag=0,e1=null,to=null,y5=!1,x5=0,P2=1/0,D2=null,yd=null,Vs=0,xd=null,Tg=null,Cg=0,b5=0,w5=null,Zj=null,t1=0,S5=null;function Mo(){if((vr&2)!==0&&qi!==0)return qi&-qi;if(q.T!==null){var d=pg;return d!==0?d:P5()}return Pi()}function $j(){$o===0&&($o=(qi&536870912)===0||rr?be():536870912);var d=Zo.current;return d!==null&&(d.flags|=32),$o}function Po(d,p,y){(d===Br&&(yr===2||yr===9)||d.cancelPendingCommit!==null)&&(Mg(d,0),bd(d,qi,$o,!1)),ut(d,y),((vr&2)===0||d!==Br)&&(d===Br&&((vr&2)===0&&(Sp|=y),hn===4&&bd(d,qi,$o,!1)),Rc(d))}function Jj(d,p,y){if((vr&6)!==0)throw Error(r(327));var w=!y&&(p&124)===0&&(p&d.expiredLanes)===0||Ei(d,p),I=w?xoe(d,p):A5(d,p,!0),z=w;do{if(I===0){Eg&&!w&&bd(d,p,0,!1);break}else{if(y=d.current.alternate,z&&!voe(y)){I=A5(d,p,!1),z=!1;continue}if(I===2){if(z=p,d.errorRecoveryDisabledLanes&z)var W=0;else W=d.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){p=W;e:{var te=d;I=e1;var ve=te.current.memoizedState.isDehydrated;if(ve&&(Mg(te,W).flags|=256),W=A5(te,W,!1),W!==2){if(g5&&!ve){te.errorRecoveryDisabledLanes|=z,Sp|=z,I=4;break e}z=to,to=I,z!==null&&(to===null?to=z:to.push.apply(to,z))}I=W}if(z=!1,I!==2)continue}}if(I===1){Mg(d,0),bd(d,p,0,!0);break}e:{switch(w=d,z=I,z){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:bd(w,p,$o,!gd);break e;case 2:to=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(I=x5+300-ct(),10<I)){if(bd(w,p,$o,!gd),It(w,0,!0)!==0)break e;w.timeoutHandle=M8(e8.bind(null,w,y,to,D2,y5,p,$o,Sp,Ag,gd,z,2,-0,0),I);break e}e8(w,y,to,D2,y5,p,$o,Sp,Ag,gd,z,0,-0,0)}}break}while(!0);Rc(d)}function e8(d,p,y,w,I,z,W,te,ve,Oe,Ye,et,ke,ze){if(d.timeoutHandle=-1,et=p.subtreeFlags,(et&8192||(et&16785408)===16785408)&&(l1={stylesheets:null,count:0,unsuspend:$oe},Xj(p),et=ele(),et!==null)){d.cancelPendingCommit=et(o8.bind(null,d,p,z,y,w,I,W,te,ve,Ye,1,ke,ze)),bd(d,z,W,!Oe);return}o8(d,p,z,y,w,I,W,te,ve)}function voe(d){for(var p=d;;){var y=p.tag;if((y===0||y===11||y===15)&&p.flags&16384&&(y=p.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var w=0;w<y.length;w++){var I=y[w],z=I.getSnapshot;I=I.value;try{if(!_o(z(),I))return!1}catch{return!1}}if(y=p.child,p.subtreeFlags&16384&&y!==null)y.return=p,p=y;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function bd(d,p,y,w){p&=~v5,p&=~Sp,d.suspendedLanes|=p,d.pingedLanes&=~p,w&&(d.warmLanes|=p),w=d.expirationTimes;for(var I=p;0<I;){var z=31-lt(I),W=1<<z;w[z]=-1,I&=~W}y!==0&&si(d,y,p)}function I2(){return(vr&6)===0?(i1(0),!1):!0}function _5(){if(Ri!==null){if(yr===0)var d=Ri.return;else d=Ri,Xu=gp=null,VC(d),bg=null,qy=0,d=Ri;for(;d!==null;)Oj(d.alternate,d),d=d.return;Ri=null}}function Mg(d,p){var y=d.timeoutHandle;y!==-1&&(d.timeoutHandle=-1,koe(y)),y=d.cancelPendingCommit,y!==null&&(d.cancelPendingCommit=null,y()),_5(),Br=d,Ri=y=Gu(d.current,null),qi=p,yr=0,Co=null,gd=!1,Eg=Ei(d,p),g5=!1,Ag=$o=v5=Sp=vd=hn=0,to=e1=null,y5=!1,(p&8)!==0&&(p|=p&32);var w=d.entangledLanes;if(w!==0)for(d=d.entanglements,w&=p;0<w;){var I=31-lt(w),z=1<<I;p|=d[I],w&=~z}return th=p,Jw(),y}function t8(d,p){Ci=null,q.H=y2,p===By||p===l2?(p=yB(),yr=3):p===mB?(p=yB(),yr=4):yr=p===xj?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Co=p,Ri===null&&(hn=1,_2(d,Xo(p,d.current)))}function i8(){var d=q.H;return q.H=y2,d===null?y2:d}function r8(){var d=q.A;return q.A=moe,d}function E5(){hn=4,gd||(qi&4194048)!==qi&&Zo.current!==null||(Eg=!0),(vd&134217727)===0&&(Sp&134217727)===0||Br===null||bd(Br,qi,$o,!1)}function A5(d,p,y){var w=vr;vr|=2;var I=i8(),z=r8();(Br!==d||qi!==p)&&(D2=null,Mg(d,p)),p=!1;var W=hn;e:do try{if(yr!==0&&Ri!==null){var te=Ri,ve=Co;switch(yr){case 8:_5(),W=6;break e;case 3:case 2:case 9:case 6:Zo.current===null&&(p=!0);var Oe=yr;if(yr=0,Co=null,Pg(d,te,ve,Oe),y&&Eg){W=0;break e}break;default:Oe=yr,yr=0,Co=null,Pg(d,te,ve,Oe)}}yoe(),W=hn;break}catch(Ye){t8(d,Ye)}while(!0);return p&&d.shellSuspendCounter++,Xu=gp=null,vr=w,q.H=I,q.A=z,Ri===null&&(Br=null,qi=0,Jw()),W}function yoe(){for(;Ri!==null;)n8(Ri)}function xoe(d,p){var y=vr;vr|=2;var w=i8(),I=r8();Br!==d||qi!==p?(D2=null,P2=ct()+500,Mg(d,p)):Eg=Ei(d,p);e:do try{if(yr!==0&&Ri!==null){p=Ri;var z=Co;t:switch(yr){case 1:yr=0,Co=null,Pg(d,p,z,1);break;case 2:case 9:if(gB(z)){yr=0,Co=null,s8(p);break}p=function(){yr!==2&&yr!==9||Br!==d||(yr=7),Rc(d)},z.then(p,p);break e;case 3:yr=7;break e;case 4:yr=5;break e;case 7:gB(z)?(yr=0,Co=null,s8(p)):(yr=0,Co=null,Pg(d,p,z,7));break;case 5:var W=null;switch(Ri.tag){case 26:W=Ri.memoizedState;case 5:case 27:var te=Ri;if(!W||V8(W)){yr=0,Co=null;var ve=te.sibling;if(ve!==null)Ri=ve;else{var Oe=te.return;Oe!==null?(Ri=Oe,R2(Oe)):Ri=null}break t}}yr=0,Co=null,Pg(d,p,z,5);break;case 6:yr=0,Co=null,Pg(d,p,z,6);break;case 8:_5(),hn=6;break e;default:throw Error(r(462))}}boe();break}catch(Ye){t8(d,Ye)}while(!0);return Xu=gp=null,q.H=w,q.A=I,vr=y,Ri!==null?0:(Br=null,qi=0,Jw(),hn)}function boe(){for(;Ri!==null&&!Xe();)n8(Ri)}function n8(d){var p=Ij(d.alternate,d,th);d.memoizedProps=d.pendingProps,p===null?R2(d):Ri=p}function s8(d){var p=d,y=p.alternate;switch(p.tag){case 15:case 0:p=Aj(y,p,p.pendingProps,p.type,void 0,qi);break;case 11:p=Aj(y,p,p.pendingProps,p.type.render,p.ref,qi);break;case 5:VC(p);default:Oj(y,p),p=Ri=aB(p,th),p=Ij(y,p,th)}d.memoizedProps=d.pendingProps,p===null?R2(d):Ri=p}function Pg(d,p,y,w){Xu=gp=null,VC(p),bg=null,qy=0;var I=p.return;try{if(coe(d,I,p,y,qi)){hn=1,_2(d,Xo(y,d.current)),Ri=null;return}}catch(z){if(I!==null)throw Ri=I,z;hn=1,_2(d,Xo(y,d.current)),Ri=null;return}p.flags&32768?(rr||w===1?d=!0:Eg||(qi&536870912)!==0?d=!1:(gd=d=!0,(w===2||w===9||w===3||w===6)&&(w=Zo.current,w!==null&&w.tag===13&&(w.flags|=16384))),a8(p,d)):R2(p)}function R2(d){var p=d;do{if((p.flags&32768)!==0){a8(p,gd);return}d=p.return;var y=hoe(p.alternate,p,th);if(y!==null){Ri=y;return}if(p=p.sibling,p!==null){Ri=p;return}Ri=p=d}while(p!==null);hn===0&&(hn=5)}function a8(d,p){do{var y=doe(d.alternate,d);if(y!==null){y.flags&=32767,Ri=y;return}if(y=d.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!p&&(d=d.sibling,d!==null)){Ri=d;return}Ri=d=y}while(d!==null);hn=6,Ri=null}function o8(d,p,y,w,I,z,W,te,ve){d.cancelPendingCommit=null;do O2();while(Vs!==0);if((vr&6)!==0)throw Error(r(327));if(p!==null){if(p===d.current)throw Error(r(177));if(z=p.lanes|p.childLanes,z|=mC,Bt(d,y,z,W,te,ve),d===Br&&(Ri=Br=null,qi=0),Tg=p,xd=d,Cg=y,b5=z,w5=I,Zj=w,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,Eoe(At,function(){return d8(),null})):(d.callbackNode=null,d.callbackPriority=0),w=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||w){w=q.T,q.T=null,I=Y.p,Y.p=2,W=vr,vr|=4;try{foe(d,p,y)}finally{vr=W,Y.p=I,q.T=w}}Vs=1,l8(),c8(),u8()}}function l8(){if(Vs===1){Vs=0;var d=xd,p=Tg,y=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||y){y=q.T,q.T=null;var w=Y.p;Y.p=2;var I=vr;vr|=4;try{Gj(p,d);var z=B5,W=Kz(d.containerInfo),te=z.focusedElem,ve=z.selectionRange;if(W!==te&&te&&te.ownerDocument&&Qz(te.ownerDocument.documentElement,te)){if(ve!==null&&uC(te)){var Oe=ve.start,Ye=ve.end;if(Ye===void 0&&(Ye=Oe),"selectionStart"in te)te.selectionStart=Oe,te.selectionEnd=Math.min(Ye,te.value.length);else{var et=te.ownerDocument||document,ke=et&&et.defaultView||window;if(ke.getSelection){var ze=ke.getSelection(),li=te.textContent.length,ii=Math.min(ve.start,li),Mr=ve.end===void 0?ii:Math.min(ve.end,li);!ze.extend&&ii>Mr&&(W=Mr,Mr=ii,ii=W);var Ee=Yz(te,ii),Se=Yz(te,Mr);if(Ee&&Se&&(ze.rangeCount!==1||ze.anchorNode!==Ee.node||ze.anchorOffset!==Ee.offset||ze.focusNode!==Se.node||ze.focusOffset!==Se.offset)){var Ie=et.createRange();Ie.setStart(Ee.node,Ee.offset),ze.removeAllRanges(),ii>Mr?(ze.addRange(Ie),ze.extend(Se.node,Se.offset)):(Ie.setEnd(Se.node,Se.offset),ze.addRange(Ie))}}}}for(et=[],ze=te;ze=ze.parentNode;)ze.nodeType===1&&et.push({element:ze,left:ze.scrollLeft,top:ze.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<et.length;te++){var Je=et[te];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}W2=!!z5,B5=z5=null}finally{vr=I,Y.p=w,q.T=y}}d.current=p,Vs=2}}function c8(){if(Vs===2){Vs=0;var d=xd,p=Tg,y=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||y){y=q.T,q.T=null;var w=Y.p;Y.p=2;var I=vr;vr|=4;try{Vj(d,p.alternate,p)}finally{vr=I,Y.p=w,q.T=y}}Vs=3}}function u8(){if(Vs===4||Vs===3){Vs=0,pt();var d=xd,p=Tg,y=Cg,w=Zj;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Vs=5:(Vs=0,Tg=xd=null,h8(d,d.pendingLanes));var I=d.pendingLanes;if(I===0&&(yd=null),Yn(y),p=p.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(Z,p,void 0,(p.current.flags&128)===128)}catch{}if(w!==null){p=q.T,I=Y.p,Y.p=2,q.T=null;try{for(var z=d.onRecoverableError,W=0;W<w.length;W++){var te=w[W];z(te.value,{componentStack:te.stack})}}finally{q.T=p,Y.p=I}}(Cg&3)!==0&&O2(),Rc(d),I=d.pendingLanes,(y&4194090)!==0&&(I&42)!==0?d===S5?t1++:(t1=0,S5=d):t1=0,i1(0)}}function h8(d,p){(d.pooledCacheLanes&=p)===0&&(p=d.pooledCache,p!=null&&(d.pooledCache=null,ky(p)))}function O2(d){return l8(),c8(),u8(),d8()}function d8(){if(Vs!==5)return!1;var d=xd,p=b5;b5=0;var y=Yn(Cg),w=q.T,I=Y.p;try{Y.p=32>y?32:y,q.T=null,y=w5,w5=null;var z=xd,W=Cg;if(Vs=0,Tg=xd=null,Cg=0,(vr&6)!==0)throw Error(r(331));var te=vr;if(vr|=4,Qj(z.current),qj(z,z.current,W,y),vr=te,i1(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(Z,z)}catch{}return!0}finally{Y.p=I,q.T=w,h8(d,p)}}function f8(d,p,y){p=Xo(y,p),p=e5(d.stateNode,p,2),d=cd(d,p,2),d!==null&&(ut(d,2),Rc(d))}function Or(d,p,y){if(d.tag===3)f8(d,d,y);else for(;p!==null;){if(p.tag===3){f8(p,d,y);break}else if(p.tag===1){var w=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(yd===null||!yd.has(w))){d=Xo(y,d),y=vj(2),w=cd(p,y,2),w!==null&&(yj(y,w,p,d),ut(w,2),Rc(w));break}}p=p.return}}function T5(d,p,y){var w=d.pingCache;if(w===null){w=d.pingCache=new goe;var I=new Set;w.set(p,I)}else I=w.get(p),I===void 0&&(I=new Set,w.set(p,I));I.has(y)||(g5=!0,I.add(y),d=woe.bind(null,d,p,y),p.then(d,d))}function woe(d,p,y){var w=d.pingCache;w!==null&&w.delete(p),d.pingedLanes|=d.suspendedLanes&y,d.warmLanes&=~y,Br===d&&(qi&y)===y&&(hn===4||hn===3&&(qi&62914560)===qi&&300>ct()-x5?(vr&2)===0&&Mg(d,0):v5|=y,Ag===qi&&(Ag=0)),Rc(d)}function p8(d,p){p===0&&(p=Ue()),d=ug(d,p),d!==null&&(ut(d,p),Rc(d))}function Soe(d){var p=d.memoizedState,y=0;p!==null&&(y=p.retryLane),p8(d,y)}function _oe(d,p){var y=0;switch(d.tag){case 13:var w=d.stateNode,I=d.memoizedState;I!==null&&(y=I.retryLane);break;case 19:w=d.stateNode;break;case 22:w=d.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(p),p8(d,y)}function Eoe(d,p){return Le(d,p)}var L2=null,Dg=null,C5=!1,k2=!1,M5=!1,_p=0;function Rc(d){d!==Dg&&d.next===null&&(Dg===null?L2=Dg=d:Dg=Dg.next=d),k2=!0,C5||(C5=!0,Toe())}function i1(d,p){if(!M5&&k2){M5=!0;do for(var y=!1,w=L2;w!==null;){if(d!==0){var I=w.pendingLanes;if(I===0)var z=0;else{var W=w.suspendedLanes,te=w.pingedLanes;z=(1<<31-lt(42|d)+1)-1,z&=I&~(W&~te),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(y=!0,y8(w,z))}else z=qi,z=It(w,w===Br?z:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(z&3)===0||Ei(w,z)||(y=!0,y8(w,z));w=w.next}while(y);M5=!1}}function Aoe(){m8()}function m8(){k2=C5=!1;var d=0;_p!==0&&(Loe()&&(d=_p),_p=0);for(var p=ct(),y=null,w=L2;w!==null;){var I=w.next,z=g8(w,p);z===0?(w.next=null,y===null?L2=I:y.next=I,I===null&&(Dg=y)):(y=w,(d!==0||(z&3)!==0)&&(k2=!0)),w=I}i1(d)}function g8(d,p){for(var y=d.suspendedLanes,w=d.pingedLanes,I=d.expirationTimes,z=d.pendingLanes&-62914561;0<z;){var W=31-lt(z),te=1<<W,ve=I[W];ve===-1?((te&y)===0||(te&w)!==0)&&(I[W]=er(te,p)):ve<=p&&(d.expiredLanes|=te),z&=~te}if(p=Br,y=qi,y=It(d,d===p?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),w=d.callbackNode,y===0||d===p&&(yr===2||yr===9)||d.cancelPendingCommit!==null)return w!==null&&w!==null&&Ke(w),d.callbackNode=null,d.callbackPriority=0;if((y&3)===0||Ei(d,y)){if(p=y&-y,p===d.callbackPriority)return p;switch(w!==null&&Ke(w),Yn(y)){case 2:case 8:y=Dt;break;case 32:y=At;break;case 268435456:y=ie;break;default:y=At}return w=v8.bind(null,d),y=Le(y,w),d.callbackPriority=p,d.callbackNode=y,p}return w!==null&&w!==null&&Ke(w),d.callbackPriority=2,d.callbackNode=null,2}function v8(d,p){if(Vs!==0&&Vs!==5)return d.callbackNode=null,d.callbackPriority=0,null;var y=d.callbackNode;if(O2()&&d.callbackNode!==y)return null;var w=qi;return w=It(d,d===Br?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),w===0?null:(Jj(d,w,p),g8(d,ct()),d.callbackNode!=null&&d.callbackNode===y?v8.bind(null,d):null)}function y8(d,p){if(O2())return null;Jj(d,p,!0)}function Toe(){zoe(function(){(vr&6)!==0?Le(rt,Aoe):m8()})}function P5(){return _p===0&&(_p=be()),_p}function x8(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:$m(""+d)}function b8(d,p){var y=p.ownerDocument.createElement("input");return y.name=p.name,y.value=p.value,d.id&&y.setAttribute("form",d.id),p.parentNode.insertBefore(y,p),d=new FormData(d),y.parentNode.removeChild(y),d}function Coe(d,p,y,w,I){if(p==="submit"&&y&&y.stateNode===I){var z=x8((I[zr]||null).action),W=w.submitter;W&&(p=(p=W[zr]||null)?x8(p.formAction):W.getAttribute("formAction"),p!==null&&(z=p,W=null));var te=new Jm("action","action",null,w,I);d.push({event:te,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(_p!==0){var ve=W?b8(I,W):new FormData(I);QC(y,{pending:!0,data:ve,method:I.method,action:z},null,ve)}}else typeof z=="function"&&(te.preventDefault(),ve=W?b8(I,W):new FormData(I),QC(y,{pending:!0,data:ve,method:I.method,action:z},z,ve))},currentTarget:I}]})}}for(var D5=0;D5<pC.length;D5++){var I5=pC[D5],Moe=I5.toLowerCase(),Poe=I5[0].toUpperCase()+I5.slice(1);Rl(Moe,"on"+Poe)}Rl(Jz,"onAnimationEnd"),Rl(eB,"onAnimationIteration"),Rl(tB,"onAnimationStart"),Rl("dblclick","onDoubleClick"),Rl("focusin","onFocus"),Rl("focusout","onBlur"),Rl(qae,"onTransitionRun"),Rl(Xae,"onTransitionStart"),Rl(Yae,"onTransitionCancel"),Rl(iB,"onTransitionEnd"),ht("onMouseEnter",["mouseout","mouseover"]),ht("onMouseLeave",["mouseout","mouseover"]),ht("onPointerEnter",["pointerout","pointerover"]),ht("onPointerLeave",["pointerout","pointerover"]),Be("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Be("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Be("onBeforeInput",["compositionend","keypress","textInput","paste"]),Be("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Be("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Be("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var r1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Doe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(r1));function w8(d,p){p=(p&4)!==0;for(var y=0;y<d.length;y++){var w=d[y],I=w.event;w=w.listeners;e:{var z=void 0;if(p)for(var W=w.length-1;0<=W;W--){var te=w[W],ve=te.instance,Oe=te.currentTarget;if(te=te.listener,ve!==z&&I.isPropagationStopped())break e;z=te,I.currentTarget=Oe;try{z(I)}catch(Ye){S2(Ye)}I.currentTarget=null,z=ve}else for(W=0;W<w.length;W++){if(te=w[W],ve=te.instance,Oe=te.currentTarget,te=te.listener,ve!==z&&I.isPropagationStopped())break e;z=te,I.currentTarget=Oe;try{z(I)}catch(Ye){S2(Ye)}I.currentTarget=null,z=ve}}}}function Oi(d,p){var y=p[fs];y===void 0&&(y=p[fs]=new Set);var w=d+"__bubble";y.has(w)||(S8(p,d,2,!1),y.add(w))}function R5(d,p,y){var w=0;p&&(w|=4),S8(y,d,w,p)}var z2="_reactListening"+Math.random().toString(36).slice(2);function O5(d){if(!d[z2]){d[z2]=!0,st.forEach(function(y){y!=="selectionchange"&&(Doe.has(y)||R5(y,!1,d),R5(y,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[z2]||(p[z2]=!0,R5("selectionchange",!1,p))}}function S8(d,p,y,w){switch(q8(p)){case 2:var I=rle;break;case 8:I=nle;break;default:I=X5}y=I.bind(null,p,y,d),I=void 0,!Wo||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(I=!0),w?I!==void 0?d.addEventListener(p,y,{capture:!0,passive:I}):d.addEventListener(p,y,!0):I!==void 0?d.addEventListener(p,y,{passive:I}):d.addEventListener(p,y,!1)}function L5(d,p,y,w,I){var z=w;if((p&1)===0&&(p&2)===0&&w!==null)e:for(;;){if(w===null)return;var W=w.tag;if(W===3||W===4){var te=w.stateNode.containerInfo;if(te===I)break;if(W===4)for(W=w.return;W!==null;){var ve=W.tag;if((ve===3||ve===4)&&W.stateNode.containerInfo===I)return;W=W.return}for(;te!==null;){if(W=xt(te),W===null)return;if(ve=W.tag,ve===5||ve===6||ve===26||ve===27){w=z=W;continue e}te=te.parentNode}}w=w.return}jw(function(){var Oe=z,Ye=Go(y),et=[];e:{var ke=rB.get(d);if(ke!==void 0){var ze=Jm,li=d;switch(d){case"keypress":if(_c(y)===0)break e;case"keydown":case"keyup":ze=sg;break;case"focusin":li="focus",ze=ig;break;case"focusout":li="blur",ze=ig;break;case"beforeblur":case"afterblur":ze=ig;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=aC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=qw;break;case Jz:case eB:case tB:ze=rg;break;case iB:ze=Yw;break;case"scroll":case"scrollend":ze=Nw;break;case"wheel":ze=ag;break;case"copy":case"cut":case"paste":ze=ng;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=Cy;break;case"toggle":case"beforetoggle":ze=Kw}var ii=(p&4)!==0,Mr=!ii&&(d==="scroll"||d==="scrollend"),Ee=ii?ke!==null?ke+"Capture":null:ke;ii=[];for(var Se=Oe,Ie;Se!==null;){var Je=Se;if(Ie=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||Ie===null||Ee===null||(Je=ip(Se,Ee),Je!=null&&ii.push(n1(Se,Je,Ie))),Mr)break;Se=Se.return}0<ii.length&&(ke=new ze(ke,li,null,y,Ye),et.push({event:ke,listeners:ii}))}}if((p&7)===0){e:{if(ke=d==="mouseover"||d==="pointerover",ze=d==="mouseout"||d==="pointerout",ke&&y!==ju&&(li=y.relatedTarget||y.fromElement)&&(xt(li)||li[Rr]))break e;if((ze||ke)&&(ke=Ye.window===Ye?Ye:(ke=Ye.ownerDocument)?ke.defaultView||ke.parentWindow:window,ze?(li=y.relatedTarget||y.toElement,ze=Oe,li=li?xt(li):null,li!==null&&(Mr=s(li),ii=li.tag,li!==Mr||ii!==5&&ii!==27&&ii!==6)&&(li=null)):(ze=null,li=Oe),ze!==li)){if(ii=qo,Je="onMouseLeave",Ee="onMouseEnter",Se="mouse",(d==="pointerout"||d==="pointerover")&&(ii=Cy,Je="onPointerLeave",Ee="onPointerEnter",Se="pointer"),Mr=ze==null?ke:zt(ze),Ie=li==null?ke:zt(li),ke=new ii(Je,Se+"leave",ze,y,Ye),ke.target=Mr,ke.relatedTarget=Ie,Je=null,xt(Ye)===Oe&&(ii=new ii(Ee,Se+"enter",li,y,Ye),ii.target=Ie,ii.relatedTarget=Mr,Je=ii),Mr=Je,ze&&li)t:{for(ii=ze,Ee=li,Se=0,Ie=ii;Ie;Ie=Ig(Ie))Se++;for(Ie=0,Je=Ee;Je;Je=Ig(Je))Ie++;for(;0<Se-Ie;)ii=Ig(ii),Se--;for(;0<Ie-Se;)Ee=Ig(Ee),Ie--;for(;Se--;){if(ii===Ee||Ee!==null&&ii===Ee.alternate)break t;ii=Ig(ii),Ee=Ig(Ee)}ii=null}else ii=null;ze!==null&&_8(et,ke,ze,ii,!1),li!==null&&Mr!==null&&_8(et,Mr,li,ii,!0)}}e:{if(ke=Oe?zt(Oe):window,ze=ke.nodeName&&ke.nodeName.toLowerCase(),ze==="select"||ze==="input"&&ke.type==="file")var Ot=Fz;else if(Kn(ke))if(Hz)Ot=Hae;else{Ot=Uae;var Di=Vae}else ze=ke.nodeName,!ze||ze.toLowerCase()!=="input"||ke.type!=="checkbox"&&ke.type!=="radio"?Oe&&by(Oe.elementType)&&(Ot=Fz):Ot=Fae;if(Ot&&(Ot=Ot(d,Oe))){Hu(et,Ot,y,Ye);break e}Di&&Di(d,ke,Oe),d==="focusout"&&Oe&&ke.type==="number"&&Oe.memoizedProps.value!=null&&nd(ke,"number",ke.value)}switch(Di=Oe?zt(Oe):window,d){case"focusin":(Kn(Di)||Di.contentEditable==="true")&&(og=Di,hC=Oe,Dy=null);break;case"focusout":Dy=hC=og=null;break;case"mousedown":dC=!0;break;case"contextmenu":case"mouseup":case"dragend":dC=!1,Zz(et,y,Ye);break;case"selectionchange":if(Wae)break;case"keydown":case"keyup":Zz(et,y,Ye)}var Ft;if(Tc)e:{switch(d){case"compositionstart":var ai="onCompositionStart";break e;case"compositionend":ai="onCompositionEnd";break e;case"compositionupdate":ai="onCompositionUpdate";break e}ai=void 0}else Gi?He(d,y)&&(ai="onCompositionEnd"):d==="keydown"&&y.keyCode===229&&(ai="onCompositionStart");ai&&(H&&y.locale!=="ko"&&(Gi||ai!=="onCompositionStart"?ai==="onCompositionEnd"&&Gi&&(Ft=Sy()):(Sc=Ye,sd="value"in Sc?Sc.value:Sc.textContent,Gi=!0)),Di=B2(Oe,ai),0<Di.length&&(ai=new Ay(ai,d,null,y,Ye),et.push({event:ai,listeners:Di}),Ft?ai.data=Ft:(Ft=gt(y),Ft!==null&&(ai.data=Ft)))),(Ft=N?Qn(d,y):Wi(d,y))&&(ai=B2(Oe,"onBeforeInput"),0<ai.length&&(Di=new Ay("onBeforeInput","beforeinput",null,y,Ye),et.push({event:Di,listeners:ai}),Di.data=Ft)),Coe(et,d,Oe,y,Ye)}w8(et,p)})}function n1(d,p,y){return{instance:d,listener:p,currentTarget:y}}function B2(d,p){for(var y=p+"Capture",w=[];d!==null;){var I=d,z=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||z===null||(I=ip(d,y),I!=null&&w.unshift(n1(d,I,z)),I=ip(d,p),I!=null&&w.push(n1(d,I,z))),d.tag===3)return w;d=d.return}return[]}function Ig(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function _8(d,p,y,w,I){for(var z=p._reactName,W=[];y!==null&&y!==w;){var te=y,ve=te.alternate,Oe=te.stateNode;if(te=te.tag,ve!==null&&ve===w)break;te!==5&&te!==26&&te!==27||Oe===null||(ve=Oe,I?(Oe=ip(y,z),Oe!=null&&W.unshift(n1(y,Oe,ve))):I||(Oe=ip(y,z),Oe!=null&&W.push(n1(y,Oe,ve)))),y=y.return}W.length!==0&&d.push({event:p,listeners:W})}var Ioe=/\r\n?/g,Roe=/\u0000|\uFFFD/g;function E8(d){return(typeof d=="string"?d:""+d).replace(Ioe,`
`).replace(Roe,"")}function A8(d,p){return p=E8(p),E8(d)===p}function j2(){}function Cr(d,p,y,w,I,z){switch(y){case"children":typeof w=="string"?p==="body"||p==="textarea"&&w===""||Ho(d,w):(typeof w=="number"||typeof w=="bigint")&&p!=="body"&&Ho(d,""+w);break;case"className":Ut(d,"class",w);break;case"tabIndex":Ut(d,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Ut(d,y,w);break;case"style":xy(d,w,z);break;case"data":if(p!=="object"){Ut(d,"data",w);break}case"src":case"href":if(w===""&&(p!=="a"||y!=="href")){d.removeAttribute(y);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){d.removeAttribute(y);break}w=$m(""+w),d.setAttribute(y,w);break;case"action":case"formAction":if(typeof w=="function"){d.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(y==="formAction"?(p!=="input"&&Cr(d,p,"name",I.name,I,null),Cr(d,p,"formEncType",I.formEncType,I,null),Cr(d,p,"formMethod",I.formMethod,I,null),Cr(d,p,"formTarget",I.formTarget,I,null)):(Cr(d,p,"encType",I.encType,I,null),Cr(d,p,"method",I.method,I,null),Cr(d,p,"target",I.target,I,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){d.removeAttribute(y);break}w=$m(""+w),d.setAttribute(y,w);break;case"onClick":w!=null&&(d.onclick=j2);break;case"onScroll":w!=null&&Oi("scroll",d);break;case"onScrollEnd":w!=null&&Oi("scrollend",d);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(y=w.__html,y!=null){if(I.children!=null)throw Error(r(60));d.innerHTML=y}}break;case"multiple":d.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":d.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){d.removeAttribute("xlink:href");break}y=$m(""+w),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?d.setAttribute(y,""+w):d.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?d.setAttribute(y,""):d.removeAttribute(y);break;case"capture":case"download":w===!0?d.setAttribute(y,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?d.setAttribute(y,w):d.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?d.setAttribute(y,w):d.removeAttribute(y);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?d.removeAttribute(y):d.setAttribute(y,w);break;case"popover":Oi("beforetoggle",d),Oi("toggle",d),cr(d,"popover",w);break;case"xlinkActuate":ir(d,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":ir(d,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":ir(d,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":ir(d,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":ir(d,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":ir(d,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":ir(d,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":ir(d,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":ir(d,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":cr(d,"is",w);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=nC.get(y)||y,cr(d,y,w))}}function k5(d,p,y,w,I,z){switch(y){case"style":xy(d,w,z);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(y=w.__html,y!=null){if(I.children!=null)throw Error(r(60));d.innerHTML=y}}break;case"children":typeof w=="string"?Ho(d,w):(typeof w=="number"||typeof w=="bigint")&&Ho(d,""+w);break;case"onScroll":w!=null&&Oi("scroll",d);break;case"onScrollEnd":w!=null&&Oi("scrollend",d);break;case"onClick":w!=null&&(d.onclick=j2);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!me.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(I=y.endsWith("Capture"),p=y.slice(2,I?y.length-7:void 0),z=d[zr]||null,z=z!=null?z[y]:null,typeof z=="function"&&d.removeEventListener(p,z,I),typeof w=="function")){typeof z!="function"&&z!==null&&(y in d?d[y]=null:d.hasAttribute(y)&&d.removeAttribute(y)),d.addEventListener(p,w,I);break e}y in d?d[y]=w:w===!0?d.setAttribute(y,""):cr(d,y,w)}}}function Us(d,p,y){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oi("error",d),Oi("load",d);var w=!1,I=!1,z;for(z in y)if(y.hasOwnProperty(z)){var W=y[z];if(W!=null)switch(z){case"src":w=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Cr(d,p,z,W,y,null)}}I&&Cr(d,p,"srcSet",y.srcSet,y,null),w&&Cr(d,p,"src",y.src,y,null);return;case"input":Oi("invalid",d);var te=z=W=I=null,ve=null,Oe=null;for(w in y)if(y.hasOwnProperty(w)){var Ye=y[w];if(Ye!=null)switch(w){case"name":I=Ye;break;case"type":W=Ye;break;case"checked":ve=Ye;break;case"defaultChecked":Oe=Ye;break;case"value":z=Ye;break;case"defaultValue":te=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(r(137,p));break;default:Cr(d,p,w,Ye,y,null)}}Jf(d,z,te,ve,Oe,W,I,!1),xc(d);return;case"select":Oi("invalid",d),w=W=z=null;for(I in y)if(y.hasOwnProperty(I)&&(te=y[I],te!=null))switch(I){case"value":z=te;break;case"defaultValue":W=te;break;case"multiple":w=te;default:Cr(d,p,I,te,y,null)}p=z,y=W,d.multiple=!!w,p!=null?Bu(d,!!w,p,!1):y!=null&&Bu(d,!!w,y,!0);return;case"textarea":Oi("invalid",d),z=I=w=null;for(W in y)if(y.hasOwnProperty(W)&&(te=y[W],te!=null))switch(W){case"value":w=te;break;case"defaultValue":I=te;break;case"children":z=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(91));break;default:Cr(d,p,W,te,y,null)}ep(d,w,I,z),xc(d);return;case"option":for(ve in y)if(y.hasOwnProperty(ve)&&(w=y[ve],w!=null))switch(ve){case"selected":d.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:Cr(d,p,ve,w,y,null)}return;case"dialog":Oi("beforetoggle",d),Oi("toggle",d),Oi("cancel",d),Oi("close",d);break;case"iframe":case"object":Oi("load",d);break;case"video":case"audio":for(w=0;w<r1.length;w++)Oi(r1[w],d);break;case"image":Oi("error",d),Oi("load",d);break;case"details":Oi("toggle",d);break;case"embed":case"source":case"link":Oi("error",d),Oi("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Oe in y)if(y.hasOwnProperty(Oe)&&(w=y[Oe],w!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Cr(d,p,Oe,w,y,null)}return;default:if(by(p)){for(Ye in y)y.hasOwnProperty(Ye)&&(w=y[Ye],w!==void 0&&k5(d,p,Ye,w,y,void 0));return}}for(te in y)y.hasOwnProperty(te)&&(w=y[te],w!=null&&Cr(d,p,te,w,y,null))}function Ooe(d,p,y,w){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,z=null,W=null,te=null,ve=null,Oe=null,Ye=null;for(ze in y){var et=y[ze];if(y.hasOwnProperty(ze)&&et!=null)switch(ze){case"checked":break;case"value":break;case"defaultValue":ve=et;default:w.hasOwnProperty(ze)||Cr(d,p,ze,null,w,et)}}for(var ke in w){var ze=w[ke];if(et=y[ke],w.hasOwnProperty(ke)&&(ze!=null||et!=null))switch(ke){case"type":z=ze;break;case"name":I=ze;break;case"checked":Oe=ze;break;case"defaultChecked":Ye=ze;break;case"value":W=ze;break;case"defaultValue":te=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(r(137,p));break;default:ze!==et&&Cr(d,p,ke,ze,w,et)}}So(d,W,te,ve,Oe,Ye,z,I);return;case"select":ze=W=te=ke=null;for(z in y)if(ve=y[z],y.hasOwnProperty(z)&&ve!=null)switch(z){case"value":break;case"multiple":ze=ve;default:w.hasOwnProperty(z)||Cr(d,p,z,null,w,ve)}for(I in w)if(z=w[I],ve=y[I],w.hasOwnProperty(I)&&(z!=null||ve!=null))switch(I){case"value":ke=z;break;case"defaultValue":te=z;break;case"multiple":W=z;default:z!==ve&&Cr(d,p,I,z,w,ve)}p=te,y=W,w=ze,ke!=null?Bu(d,!!y,ke,!1):!!w!=!!y&&(p!=null?Bu(d,!!y,p,!0):Bu(d,!!y,y?[]:"",!1));return;case"textarea":ze=ke=null;for(te in y)if(I=y[te],y.hasOwnProperty(te)&&I!=null&&!w.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:Cr(d,p,te,null,w,I)}for(W in w)if(I=w[W],z=y[W],w.hasOwnProperty(W)&&(I!=null||z!=null))switch(W){case"value":ke=I;break;case"defaultValue":ze=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:I!==z&&Cr(d,p,W,I,w,z)}Ar(d,ke,ze);return;case"option":for(var li in y)if(ke=y[li],y.hasOwnProperty(li)&&ke!=null&&!w.hasOwnProperty(li))switch(li){case"selected":d.selected=!1;break;default:Cr(d,p,li,null,w,ke)}for(ve in w)if(ke=w[ve],ze=y[ve],w.hasOwnProperty(ve)&&ke!==ze&&(ke!=null||ze!=null))switch(ve){case"selected":d.selected=ke&&typeof ke!="function"&&typeof ke!="symbol";break;default:Cr(d,p,ve,ke,w,ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ii in y)ke=y[ii],y.hasOwnProperty(ii)&&ke!=null&&!w.hasOwnProperty(ii)&&Cr(d,p,ii,null,w,ke);for(Oe in w)if(ke=w[Oe],ze=y[Oe],w.hasOwnProperty(Oe)&&ke!==ze&&(ke!=null||ze!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(r(137,p));break;default:Cr(d,p,Oe,ke,w,ze)}return;default:if(by(p)){for(var Mr in y)ke=y[Mr],y.hasOwnProperty(Mr)&&ke!==void 0&&!w.hasOwnProperty(Mr)&&k5(d,p,Mr,void 0,w,ke);for(Ye in w)ke=w[Ye],ze=y[Ye],!w.hasOwnProperty(Ye)||ke===ze||ke===void 0&&ze===void 0||k5(d,p,Ye,ke,w,ze);return}}for(var Ee in y)ke=y[Ee],y.hasOwnProperty(Ee)&&ke!=null&&!w.hasOwnProperty(Ee)&&Cr(d,p,Ee,null,w,ke);for(et in w)ke=w[et],ze=y[et],!w.hasOwnProperty(et)||ke===ze||ke==null&&ze==null||Cr(d,p,et,ke,w,ze)}var z5=null,B5=null;function N2(d){return d.nodeType===9?d:d.ownerDocument}function T8(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function C8(d,p){if(d===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&p==="foreignObject"?0:d}function j5(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var N5=null;function Loe(){var d=window.event;return d&&d.type==="popstate"?d===N5?!1:(N5=d,!0):(N5=null,!1)}var M8=typeof setTimeout=="function"?setTimeout:void 0,koe=typeof clearTimeout=="function"?clearTimeout:void 0,P8=typeof Promise=="function"?Promise:void 0,zoe=typeof queueMicrotask=="function"?queueMicrotask:typeof P8<"u"?function(d){return P8.resolve(null).then(d).catch(Boe)}:M8;function Boe(d){setTimeout(function(){throw d})}function wd(d){return d==="head"}function D8(d,p){var y=p,w=0,I=0;do{var z=y.nextSibling;if(d.removeChild(y),z&&z.nodeType===8)if(y=z.data,y==="/$"){if(0<w&&8>w){y=w;var W=d.ownerDocument;if(y&1&&s1(W.documentElement),y&2&&s1(W.body),y&4)for(y=W.head,s1(y),W=y.firstChild;W;){var te=W.nextSibling,ve=W.nodeName;W[Ae]||ve==="SCRIPT"||ve==="STYLE"||ve==="LINK"&&W.rel.toLowerCase()==="stylesheet"||y.removeChild(W),W=te}}if(I===0){d.removeChild(z),f1(p);return}I--}else y==="$"||y==="$?"||y==="$!"?I++:w=y.charCodeAt(0)-48;else w=0;y=z}while(y);f1(p)}function V5(d){var p=d.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var y=p;switch(p=p.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":V5(y),Ne(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}d.removeChild(y)}}function joe(d,p,y,w){for(;d.nodeType===1;){var I=y;if(d.nodeName.toLowerCase()!==p.toLowerCase()){if(!w&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(w){if(!d[Ae])switch(p){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(z=d.getAttribute("rel"),z==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(z!==I.rel||d.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||d.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||d.getAttribute("title")!==(I.title==null?null:I.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(z=d.getAttribute("src"),(z!==(I.src==null?null:I.src)||d.getAttribute("type")!==(I.type==null?null:I.type)||d.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&z&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(p==="input"&&d.type==="hidden"){var z=I.name==null?null:""+I.name;if(I.type==="hidden"&&d.getAttribute("name")===z)return d}else return d;if(d=Ll(d.nextSibling),d===null)break}return null}function Noe(d,p,y){if(p==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!y||(d=Ll(d.nextSibling),d===null))return null;return d}function U5(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function Voe(d,p){var y=d.ownerDocument;if(d.data!=="$?"||y.readyState==="complete")p();else{var w=function(){p(),y.removeEventListener("DOMContentLoaded",w)};y.addEventListener("DOMContentLoaded",w),d._reactRetry=w}}function Ll(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return d}var F5=null;function I8(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var y=d.data;if(y==="$"||y==="$!"||y==="$?"){if(p===0)return d;p--}else y==="/$"&&p++}d=d.previousSibling}return null}function R8(d,p,y){switch(p=N2(y),d){case"html":if(d=p.documentElement,!d)throw Error(r(452));return d;case"head":if(d=p.head,!d)throw Error(r(453));return d;case"body":if(d=p.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function s1(d){for(var p=d.attributes;p.length;)d.removeAttributeNode(p[0]);Ne(d)}var Jo=new Map,O8=new Set;function V2(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var ih=Y.d;Y.d={f:Uoe,r:Foe,D:Hoe,C:Goe,L:Woe,m:qoe,X:Yoe,S:Xoe,M:Qoe};function Uoe(){var d=ih.f(),p=I2();return d||p}function Foe(d){var p=kt(d);p!==null&&p.tag===5&&p.type==="form"?JB(p):ih.r(d)}var Rg=typeof document>"u"?null:document;function L8(d,p,y){var w=Rg;if(w&&typeof p=="string"&&p){var I=Qr(p);I='link[rel="'+d+'"][href="'+I+'"]',typeof y=="string"&&(I+='[crossorigin="'+y+'"]'),O8.has(I)||(O8.add(I),d={rel:d,crossOrigin:y,href:p},w.querySelector(I)===null&&(p=w.createElement("link"),Us(p,"link",d),Ht(p),w.head.appendChild(p)))}}function Hoe(d){ih.D(d),L8("dns-prefetch",d,null)}function Goe(d,p){ih.C(d,p),L8("preconnect",d,p)}function Woe(d,p,y){ih.L(d,p,y);var w=Rg;if(w&&d&&p){var I='link[rel="preload"][as="'+Qr(p)+'"]';p==="image"&&y&&y.imageSrcSet?(I+='[imagesrcset="'+Qr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(I+='[imagesizes="'+Qr(y.imageSizes)+'"]')):I+='[href="'+Qr(d)+'"]';var z=I;switch(p){case"style":z=Og(d);break;case"script":z=Lg(d)}Jo.has(z)||(d=u({rel:"preload",href:p==="image"&&y&&y.imageSrcSet?void 0:d,as:p},y),Jo.set(z,d),w.querySelector(I)!==null||p==="style"&&w.querySelector(a1(z))||p==="script"&&w.querySelector(o1(z))||(p=w.createElement("link"),Us(p,"link",d),Ht(p),w.head.appendChild(p)))}}function qoe(d,p){ih.m(d,p);var y=Rg;if(y&&d){var w=p&&typeof p.as=="string"?p.as:"script",I='link[rel="modulepreload"][as="'+Qr(w)+'"][href="'+Qr(d)+'"]',z=I;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=Lg(d)}if(!Jo.has(z)&&(d=u({rel:"modulepreload",href:d},p),Jo.set(z,d),y.querySelector(I)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(o1(z)))return}w=y.createElement("link"),Us(w,"link",d),Ht(w),y.head.appendChild(w)}}}function Xoe(d,p,y){ih.S(d,p,y);var w=Rg;if(w&&d){var I=_t(w).hoistableStyles,z=Og(d);p=p||"default";var W=I.get(z);if(!W){var te={loading:0,preload:null};if(W=w.querySelector(a1(z)))te.loading=5;else{d=u({rel:"stylesheet",href:d,"data-precedence":p},y),(y=Jo.get(z))&&H5(d,y);var ve=W=w.createElement("link");Ht(ve),Us(ve,"link",d),ve._p=new Promise(function(Oe,Ye){ve.onload=Oe,ve.onerror=Ye}),ve.addEventListener("load",function(){te.loading|=1}),ve.addEventListener("error",function(){te.loading|=2}),te.loading|=4,U2(W,p,w)}W={type:"stylesheet",instance:W,count:1,state:te},I.set(z,W)}}}function Yoe(d,p){ih.X(d,p);var y=Rg;if(y&&d){var w=_t(y).hoistableScripts,I=Lg(d),z=w.get(I);z||(z=y.querySelector(o1(I)),z||(d=u({src:d,async:!0},p),(p=Jo.get(I))&&G5(d,p),z=y.createElement("script"),Ht(z),Us(z,"link",d),y.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},w.set(I,z))}}function Qoe(d,p){ih.M(d,p);var y=Rg;if(y&&d){var w=_t(y).hoistableScripts,I=Lg(d),z=w.get(I);z||(z=y.querySelector(o1(I)),z||(d=u({src:d,async:!0,type:"module"},p),(p=Jo.get(I))&&G5(d,p),z=y.createElement("script"),Ht(z),Us(z,"link",d),y.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},w.set(I,z))}}function k8(d,p,y,w){var I=(I=se.current)?V2(I):null;if(!I)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(p=Og(y.href),y=_t(I).hoistableStyles,w=y.get(p),w||(w={type:"style",instance:null,count:0,state:null},y.set(p,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){d=Og(y.href);var z=_t(I).hoistableStyles,W=z.get(d);if(W||(I=I.ownerDocument||I,W={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(d,W),(z=I.querySelector(a1(d)))&&!z._p&&(W.instance=z,W.state.loading=5),Jo.has(d)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Jo.set(d,y),z||Koe(I,d,y,W.state))),p&&w===null)throw Error(r(528,""));return W}if(p&&w!==null)throw Error(r(529,""));return null;case"script":return p=y.async,y=y.src,typeof y=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Lg(y),y=_t(I).hoistableScripts,w=y.get(p),w||(w={type:"script",instance:null,count:0,state:null},y.set(p,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function Og(d){return'href="'+Qr(d)+'"'}function a1(d){return'link[rel="stylesheet"]['+d+"]"}function z8(d){return u({},d,{"data-precedence":d.precedence,precedence:null})}function Koe(d,p,y,w){d.querySelector('link[rel="preload"][as="style"]['+p+"]")?w.loading=1:(p=d.createElement("link"),w.preload=p,p.addEventListener("load",function(){return w.loading|=1}),p.addEventListener("error",function(){return w.loading|=2}),Us(p,"link",y),Ht(p),d.head.appendChild(p))}function Lg(d){return'[src="'+Qr(d)+'"]'}function o1(d){return"script[async]"+d}function B8(d,p,y){if(p.count++,p.instance===null)switch(p.type){case"style":var w=d.querySelector('style[data-href~="'+Qr(y.href)+'"]');if(w)return p.instance=w,Ht(w),w;var I=u({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return w=(d.ownerDocument||d).createElement("style"),Ht(w),Us(w,"style",I),U2(w,y.precedence,d),p.instance=w;case"stylesheet":I=Og(y.href);var z=d.querySelector(a1(I));if(z)return p.state.loading|=4,p.instance=z,Ht(z),z;w=z8(y),(I=Jo.get(I))&&H5(w,I),z=(d.ownerDocument||d).createElement("link"),Ht(z);var W=z;return W._p=new Promise(function(te,ve){W.onload=te,W.onerror=ve}),Us(z,"link",w),p.state.loading|=4,U2(z,y.precedence,d),p.instance=z;case"script":return z=Lg(y.src),(I=d.querySelector(o1(z)))?(p.instance=I,Ht(I),I):(w=y,(I=Jo.get(z))&&(w=u({},y),G5(w,I)),d=d.ownerDocument||d,I=d.createElement("script"),Ht(I),Us(I,"link",w),d.head.appendChild(I),p.instance=I);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(w=p.instance,p.state.loading|=4,U2(w,y.precedence,d));return p.instance}function U2(d,p,y){for(var w=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=w.length?w[w.length-1]:null,z=I,W=0;W<w.length;W++){var te=w[W];if(te.dataset.precedence===p)z=te;else if(z!==I)break}z?z.parentNode.insertBefore(d,z.nextSibling):(p=y.nodeType===9?y.head:y,p.insertBefore(d,p.firstChild))}function H5(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.title==null&&(d.title=p.title)}function G5(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.integrity==null&&(d.integrity=p.integrity)}var F2=null;function j8(d,p,y){if(F2===null){var w=new Map,I=F2=new Map;I.set(y,w)}else I=F2,w=I.get(y),w||(w=new Map,I.set(y,w));if(w.has(d))return w;for(w.set(d,null),y=y.getElementsByTagName(d),I=0;I<y.length;I++){var z=y[I];if(!(z[Ae]||z[gr]||d==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var W=z.getAttribute(p)||"";W=d+W;var te=w.get(W);te?te.push(z):w.set(W,[z])}}return w}function N8(d,p,y){d=d.ownerDocument||d,d.head.insertBefore(y,p==="title"?d.querySelector("head > title"):null)}function Zoe(d,p,y){if(y===1||p.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return d=p.disabled,typeof p.precedence=="string"&&d==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function V8(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var l1=null;function $oe(){}function Joe(d,p,y){if(l1===null)throw Error(r(475));var w=l1;if(p.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var I=Og(y.href),z=d.querySelector(a1(I));if(z){d=z._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(w.count++,w=H2.bind(w),d.then(w,w)),p.state.loading|=4,p.instance=z,Ht(z);return}z=d.ownerDocument||d,y=z8(y),(I=Jo.get(I))&&H5(y,I),z=z.createElement("link"),Ht(z);var W=z;W._p=new Promise(function(te,ve){W.onload=te,W.onerror=ve}),Us(z,"link",y),p.instance=z}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(w.count++,p=H2.bind(w),d.addEventListener("load",p),d.addEventListener("error",p))}}function ele(){if(l1===null)throw Error(r(475));var d=l1;return d.stylesheets&&d.count===0&&W5(d,d.stylesheets),0<d.count?function(p){var y=setTimeout(function(){if(d.stylesheets&&W5(d,d.stylesheets),d.unsuspend){var w=d.unsuspend;d.unsuspend=null,w()}},6e4);return d.unsuspend=p,function(){d.unsuspend=null,clearTimeout(y)}}:null}function H2(){if(this.count--,this.count===0){if(this.stylesheets)W5(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var G2=null;function W5(d,p){d.stylesheets=null,d.unsuspend!==null&&(d.count++,G2=new Map,p.forEach(tle,d),G2=null,H2.call(d))}function tle(d,p){if(!(p.state.loading&4)){var y=G2.get(d);if(y)var w=y.get(null);else{y=new Map,G2.set(d,y);for(var I=d.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<I.length;z++){var W=I[z];(W.nodeName==="LINK"||W.getAttribute("media")!=="not all")&&(y.set(W.dataset.precedence,W),w=W)}w&&y.set(null,w)}I=p.instance,W=I.getAttribute("data-precedence"),z=y.get(W)||w,z===w&&y.set(null,I),y.set(W,I),this.count++,w=H2.bind(this),I.addEventListener("load",w),I.addEventListener("error",w),z?z.parentNode.insertBefore(I,z.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(I,d.firstChild)),p.state.loading|=4}}var c1={$$typeof:_,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function ile(d,p,y,w,I,z,W,te){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qe(0),this.hiddenUpdates=qe(null),this.identifierPrefix=w,this.onUncaughtError=I,this.onCaughtError=z,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=te,this.incompleteTransitions=new Map}function U8(d,p,y,w,I,z,W,te,ve,Oe,Ye,et){return d=new ile(d,p,y,W,te,ve,Oe,et),p=1,z===!0&&(p|=24),z=Eo(3,null,null,p),d.current=z,z.stateNode=d,p=TC(),p.refCount++,d.pooledCache=p,p.refCount++,z.memoizedState={element:w,isDehydrated:y,cache:p},DC(z),d}function F8(d){return d?(d=hg,d):hg}function H8(d,p,y,w,I,z){I=F8(I),w.context===null?w.context=I:w.pendingContext=I,w=ld(p),w.payload={element:y},z=z===void 0?null:z,z!==null&&(w.callback=z),y=cd(d,w,p),y!==null&&(Po(y,d,p),Ny(y,d,p))}function G8(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var y=d.retryLane;d.retryLane=y!==0&&y<p?y:p}}function q5(d,p){G8(d,p),(d=d.alternate)&&G8(d,p)}function W8(d){if(d.tag===13){var p=ug(d,67108864);p!==null&&Po(p,d,67108864),q5(d,67108864)}}var W2=!0;function rle(d,p,y,w){var I=q.T;q.T=null;var z=Y.p;try{Y.p=2,X5(d,p,y,w)}finally{Y.p=z,q.T=I}}function nle(d,p,y,w){var I=q.T;q.T=null;var z=Y.p;try{Y.p=8,X5(d,p,y,w)}finally{Y.p=z,q.T=I}}function X5(d,p,y,w){if(W2){var I=Y5(w);if(I===null)L5(d,p,w,q2,y),X8(d,w);else if(ale(I,d,p,y,w))w.stopPropagation();else if(X8(d,w),p&4&&-1<sle.indexOf(d)){for(;I!==null;){var z=kt(I);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var W=bt(z.pendingLanes);if(W!==0){var te=z;for(te.pendingLanes|=2,te.entangledLanes|=2;W;){var ve=1<<31-lt(W);te.entanglements[1]|=ve,W&=~ve}Rc(z),(vr&6)===0&&(P2=ct()+500,i1(0))}}break;case 13:te=ug(z,2),te!==null&&Po(te,z,2),I2(),q5(z,2)}if(z=Y5(w),z===null&&L5(d,p,w,q2,y),z===I)break;I=z}I!==null&&w.stopPropagation()}else L5(d,p,w,null,y)}}function Y5(d){return d=Go(d),Q5(d)}var q2=null;function Q5(d){if(q2=null,d=xt(d),d!==null){var p=s(d);if(p===null)d=null;else{var y=p.tag;if(y===13){if(d=a(p),d!==null)return d;d=null}else if(y===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null)}}return q2=d,null}function q8(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ot()){case rt:return 2;case Dt:return 8;case At:case he:return 32;case ie:return 268435456;default:return 32}default:return 32}}var K5=!1,Sd=null,_d=null,Ed=null,u1=new Map,h1=new Map,Ad=[],sle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X8(d,p){switch(d){case"focusin":case"focusout":Sd=null;break;case"dragenter":case"dragleave":_d=null;break;case"mouseover":case"mouseout":Ed=null;break;case"pointerover":case"pointerout":u1.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":h1.delete(p.pointerId)}}function d1(d,p,y,w,I,z){return d===null||d.nativeEvent!==z?(d={blockedOn:p,domEventName:y,eventSystemFlags:w,nativeEvent:z,targetContainers:[I]},p!==null&&(p=kt(p),p!==null&&W8(p)),d):(d.eventSystemFlags|=w,p=d.targetContainers,I!==null&&p.indexOf(I)===-1&&p.push(I),d)}function ale(d,p,y,w,I){switch(p){case"focusin":return Sd=d1(Sd,d,p,y,w,I),!0;case"dragenter":return _d=d1(_d,d,p,y,w,I),!0;case"mouseover":return Ed=d1(Ed,d,p,y,w,I),!0;case"pointerover":var z=I.pointerId;return u1.set(z,d1(u1.get(z)||null,d,p,y,w,I)),!0;case"gotpointercapture":return z=I.pointerId,h1.set(z,d1(h1.get(z)||null,d,p,y,w,I)),!0}return!1}function Y8(d){var p=xt(d.target);if(p!==null){var y=s(p);if(y!==null){if(p=y.tag,p===13){if(p=a(y),p!==null){d.blockedOn=p,In(d.priority,function(){if(y.tag===13){var w=Mo();w=Hi(w);var I=ug(y,w);I!==null&&Po(I,y,w),q5(y,w)}});return}}else if(p===3&&y.stateNode.current.memoizedState.isDehydrated){d.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}d.blockedOn=null}function X2(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var y=Y5(d.nativeEvent);if(y===null){y=d.nativeEvent;var w=new y.constructor(y.type,y);ju=w,y.target.dispatchEvent(w),ju=null}else return p=kt(y),p!==null&&W8(p),d.blockedOn=y,!1;p.shift()}return!0}function Q8(d,p,y){X2(d)&&y.delete(p)}function ole(){K5=!1,Sd!==null&&X2(Sd)&&(Sd=null),_d!==null&&X2(_d)&&(_d=null),Ed!==null&&X2(Ed)&&(Ed=null),u1.forEach(Q8),h1.forEach(Q8)}function Y2(d,p){d.blockedOn===p&&(d.blockedOn=null,K5||(K5=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ole)))}var Q2=null;function K8(d){Q2!==d&&(Q2=d,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Q2===d&&(Q2=null);for(var p=0;p<d.length;p+=3){var y=d[p],w=d[p+1],I=d[p+2];if(typeof w!="function"){if(Q5(w||y)===null)continue;break}var z=kt(y);z!==null&&(d.splice(p,3),p-=3,QC(z,{pending:!0,data:I,method:y.method,action:w},w,I))}}))}function f1(d){function p(ve){return Y2(ve,d)}Sd!==null&&Y2(Sd,d),_d!==null&&Y2(_d,d),Ed!==null&&Y2(Ed,d),u1.forEach(p),h1.forEach(p);for(var y=0;y<Ad.length;y++){var w=Ad[y];w.blockedOn===d&&(w.blockedOn=null)}for(;0<Ad.length&&(y=Ad[0],y.blockedOn===null);)Y8(y),y.blockedOn===null&&Ad.shift();if(y=(d.ownerDocument||d).$$reactFormReplay,y!=null)for(w=0;w<y.length;w+=3){var I=y[w],z=y[w+1],W=I[zr]||null;if(typeof z=="function")W||K8(y);else if(W){var te=null;if(z&&z.hasAttribute("formAction")){if(I=z,W=z[zr]||null)te=W.formAction;else if(Q5(I)!==null)continue}else te=W.action;typeof te=="function"?y[w+1]=te:(y.splice(w,3),w-=3),K8(y)}}}function Z5(d){this._internalRoot=d}K2.prototype.render=Z5.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(r(409));var y=p.current,w=Mo();H8(y,w,d,p,null,null)},K2.prototype.unmount=Z5.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;H8(d.current,2,null,d,null,null),I2(),p[Rr]=null}};function K2(d){this._internalRoot=d}K2.prototype.unstable_scheduleHydration=function(d){if(d){var p=Pi();d={blockedOn:null,target:d,priority:p};for(var y=0;y<Ad.length&&p!==0&&p<Ad[y].priority;y++);Ad.splice(y,0,d),y===0&&Y8(d)}};var Z8=t.version;if(Z8!=="19.1.0")throw Error(r(527,Z8,"19.1.0"));Y.findDOMNode=function(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=l(p),d=d!==null?c(d):null,d=d===null?null:d.stateNode,d};var lle={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Z2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Z2.isDisabled&&Z2.supportsFiber)try{Z=Z2.inject(lle),We=Z2}catch{}}return m1.createRoot=function(d,p){if(!n(d))throw Error(r(299));var y=!1,w="",I=fj,z=pj,W=mj,te=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(w=p.identifierPrefix),p.onUncaughtError!==void 0&&(I=p.onUncaughtError),p.onCaughtError!==void 0&&(z=p.onCaughtError),p.onRecoverableError!==void 0&&(W=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(te=p.unstable_transitionCallbacks)),p=U8(d,1,!1,null,null,y,w,I,z,W,te,null),d[Rr]=p.current,O5(d),new Z5(p)},m1.hydrateRoot=function(d,p,y){if(!n(d))throw Error(r(299));var w=!1,I="",z=fj,W=pj,te=mj,ve=null,Oe=null;return y!=null&&(y.unstable_strictMode===!0&&(w=!0),y.identifierPrefix!==void 0&&(I=y.identifierPrefix),y.onUncaughtError!==void 0&&(z=y.onUncaughtError),y.onCaughtError!==void 0&&(W=y.onCaughtError),y.onRecoverableError!==void 0&&(te=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(ve=y.unstable_transitionCallbacks),y.formState!==void 0&&(Oe=y.formState)),p=U8(d,1,!0,p,y??null,w,I,z,W,te,ve,Oe),p.context=F8(null),y=p.current,w=Mo(),w=Hi(w),I=ld(w),I.callback=null,cd(y,I,w),y=w,p.current.lanes=y,ut(p,y),Rc(p),d[Rr]=p.current,O5(d),new K2(p)},m1.version="19.1.0",m1}var oN;function yle(){if(oN)return J5.exports;oN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),J5.exports=vle(),J5.exports}var xle=yle();const ble=Fv(xle);var J=Jh();const Bi=Fv(J),lN=ule({__proto__:null,default:Bi},[J]);var g1={},cN;function wle(){if(cN)return g1;cN=1,Object.defineProperty(g1,"__esModule",{value:!0}),g1.parse=a,g1.serialize=c;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,n=Object.prototype.toString,s=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function a(f,m){const g=new s,v=f.length;if(v<2)return g;const x=(m==null?void 0:m.decode)||u;let b=0;do{const S=f.indexOf("=",b);if(S===-1)break;const _=f.indexOf(";",b),A=_===-1?v:_;if(S>A){b=f.lastIndexOf(";",S-1)+1;continue}const M=o(f,b,S),C=l(f,S,M),D=f.slice(M,C);if(g[D]===void 0){let T=o(f,S+1,A),R=l(f,A,T);const O=x(f.slice(T,R));g[D]=O}b=A+1}while(b<v);return g}function o(f,m,g){do{const v=f.charCodeAt(m);if(v!==32&&v!==9)return m}while(++m<g);return g}function l(f,m,g){for(;m>g;){const v=f.charCodeAt(--m);if(v!==32&&v!==9)return m+1}return g}function c(f,m,g){const v=(g==null?void 0:g.encode)||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const x=v(m);if(!t.test(x))throw new TypeError(`argument val is invalid: ${m}`);let b=f+"="+x;if(!g)return b;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);b+="; Max-Age="+g.maxAge}if(g.domain){if(!i.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);b+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);b+="; Path="+g.path}if(g.expires){if(!h(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);b+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(b+="; HttpOnly"),g.secure&&(b+="; Secure"),g.partitioned&&(b+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return b}function u(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function h(f){return n.call(f)==="[object Date]"}return g1}wle();var uN="popstate";function Sle(e={}){function t(r,n){let{pathname:s,search:a,hash:o}=r.location;return HD("",{pathname:s,search:a,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function i(r,n){return typeof n=="string"?n:ib(n)}return Ele(t,i,null,e)}function Jr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function sc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _le(){return Math.random().toString(36).substring(2,10)}function hN(e,t){return{usr:e.state,key:e.key,idx:t}}function HD(e,t,i=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Hv(t):t,state:i,key:t&&t.key||r||_le()}}function ib({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Hv(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Ele(e,t,i,r={}){let{window:n=document.defaultView,v5Compat:s=!1}=r,a=n.history,o="POP",l=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function h(){o="POP";let x=u(),b=x==null?null:x-c;c=x,l&&l({action:o,location:v.location,delta:b})}function f(x,b){o="PUSH";let S=HD(v.location,x,b);c=u()+1;let _=hN(S,c),A=v.createHref(S);try{a.pushState(_,"",A)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;n.location.assign(A)}s&&l&&l({action:o,location:v.location,delta:1})}function m(x,b){o="REPLACE";let S=HD(v.location,x,b);c=u();let _=hN(S,c),A=v.createHref(S);a.replaceState(_,"",A),s&&l&&l({action:o,location:v.location,delta:0})}function g(x){return Ale(x)}let v={get action(){return o},get location(){return e(n,a)},listen(x){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(uN,h),l=x,()=>{n.removeEventListener(uN,h),l=null}},createHref(x){return t(n,x)},createURL:g,encodeLocation(x){let b=g(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:m,go(x){return a.go(x)}};return v}function Ale(e,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Jr(i,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:ib(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=i+r),new URL(r,i)}function yQ(e,t,i="/"){return Tle(e,t,i,!1)}function Tle(e,t,i,r){let n=typeof t=="string"?Hv(t):t,s=Uh(n.pathname||"/",i);if(s==null)return null;let a=xQ(e);Cle(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=jle(s);o=zle(a[l],c,r)}return o}function xQ(e,t=[],i=[],r=""){let n=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Jr(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=kh([r,l.relativePath]),u=i.concat(l);s.children&&s.children.length>0&&(Jr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),xQ(s.children,t,u,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:Lle(c,s.index),routesMeta:u})};return e.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))n(s,a);else for(let l of bQ(s.path))n(s,a,l)}),t}function bQ(e){let t=e.split("/");if(t.length===0)return[];let[i,...r]=t,n=i.endsWith("?"),s=i.replace(/\?$/,"");if(r.length===0)return n?[s,""]:[s];let a=bQ(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),n&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function Cle(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:kle(t.routesMeta.map(r=>r.childrenIndex),i.routesMeta.map(r=>r.childrenIndex)))}var Mle=/^:[\w-]+$/,Ple=3,Dle=2,Ile=1,Rle=10,Ole=-2,dN=e=>e==="*";function Lle(e,t){let i=e.split("/"),r=i.length;return i.some(dN)&&(r+=Ole),t&&(r+=Dle),i.filter(n=>!dN(n)).reduce((n,s)=>n+(Mle.test(s)?Ple:s===""?Ile:Rle),r)}function kle(e,t){return e.length===t.length&&e.slice(0,-1).every((r,n)=>r===t[n])?e[e.length-1]-t[t.length-1]:0}function zle(e,t,i=!1){let{routesMeta:r}=e,n={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,u=s==="/"?t:t.slice(s.length)||"/",h=tA({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&i&&!r[r.length-1].route.index&&(h=tA({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(n,h.params),a.push({params:n,pathname:kh([s,h.pathname]),pathnameBase:Fle(kh([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=kh([s,h.pathnameBase]))}return a}function tA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,r]=Ble(e.path,e.caseSensitive,e.end),n=t.match(i);if(!n)return null;let s=n[0],a=s.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:h},f)=>{if(u==="*"){let g=o[f]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=o[f];return h&&!m?c[u]=void 0:c[u]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:e}}function Ble(e,t=!1,i=!0){sc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),r]}function jle(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return sc(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Uh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,r=e.charAt(i);return r&&r!=="/"?null:e.slice(i)||"/"}function Nle(e,t="/"){let{pathname:i,search:r="",hash:n=""}=typeof e=="string"?Hv(e):e;return{pathname:i?i.startsWith("/")?i:Vle(i,t):t,search:Hle(r),hash:Gle(n)}}function Vle(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?i.length>1&&i.pop():n!=="."&&i.push(n)}),i.length>1?i.join("/"):"/"}function nM(e,t,i,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ule(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function h6(e){let t=Ule(e);return t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase)}function d6(e,t,i,r=!1){let n;typeof e=="string"?n=Hv(e):(n={...e},Jr(!n.pathname||!n.pathname.includes("?"),nM("?","pathname","search",n)),Jr(!n.pathname||!n.pathname.includes("#"),nM("#","pathname","hash",n)),Jr(!n.search||!n.search.includes("#"),nM("#","search","hash",n)));let s=e===""||n.pathname==="",a=s?"/":n.pathname,o;if(a==null)o=i;else{let h=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;n.pathname=f.join("/")}o=h>=0?t[h]:"/"}let l=Nle(n,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&i.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var kh=e=>e.join("/").replace(/\/\/+/g,"/"),Fle=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Hle=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Gle=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Wle(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var wQ=["POST","PUT","PATCH","DELETE"];new Set(wQ);var qle=["GET",...wQ];new Set(qle);var Gv=J.createContext(null);Gv.displayName="DataRouter";var YT=J.createContext(null);YT.displayName="DataRouterState";var SQ=J.createContext({isTransitioning:!1});SQ.displayName="ViewTransition";var Xle=J.createContext(new Map);Xle.displayName="Fetchers";var Yle=J.createContext(null);Yle.displayName="Await";var dc=J.createContext(null);dc.displayName="Navigation";var tw=J.createContext(null);tw.displayName="Location";var fc=J.createContext({outlet:null,matches:[],isDataRoute:!1});fc.displayName="Route";var f6=J.createContext(null);f6.displayName="RouteError";function Qle(e,{relative:t}={}){Jr(Wv(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:r}=J.useContext(dc),{hash:n,pathname:s,search:a}=iw(e,{relative:t}),o=s;return i!=="/"&&(o=s==="/"?i:kh([i,s])),r.createHref({pathname:o,search:a,hash:n})}function Wv(){return J.useContext(tw)!=null}function Cl(){return Jr(Wv(),"useLocation() may be used only in the context of a <Router> component."),J.useContext(tw).location}var _Q="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function EQ(e){J.useContext(dc).static||J.useLayoutEffect(e)}function QT(){let{isDataRoute:e}=J.useContext(fc);return e?uce():Kle()}function Kle(){Jr(Wv(),"useNavigate() may be used only in the context of a <Router> component.");let e=J.useContext(Gv),{basename:t,navigator:i}=J.useContext(dc),{matches:r}=J.useContext(fc),{pathname:n}=Cl(),s=JSON.stringify(h6(r)),a=J.useRef(!1);return EQ(()=>{a.current=!0}),J.useCallback((l,c={})=>{if(sc(a.current,_Q),!a.current)return;if(typeof l=="number"){i.go(l);return}let u=d6(l,JSON.parse(s),n,c.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:kh([t,u.pathname])),(c.replace?i.replace:i.push)(u,c.state,c)},[t,i,s,n,e])}var Zle=J.createContext(null);function $le(e){let t=J.useContext(fc).outlet;return t&&J.createElement(Zle.Provider,{value:e},t)}function iw(e,{relative:t}={}){let{matches:i}=J.useContext(fc),{pathname:r}=Cl(),n=JSON.stringify(h6(i));return J.useMemo(()=>d6(e,JSON.parse(n),r,t==="path"),[e,n,r,t])}function Jle(e,t){return AQ(e,t)}function AQ(e,t,i,r){var b;Jr(Wv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=J.useContext(dc),{matches:s}=J.useContext(fc),a=s[s.length-1],o=a?a.params:{},l=a?a.pathname:"/",c=a?a.pathnameBase:"/",u=a&&a.route;{let S=u&&u.path||"";TQ(l,!u||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let h=Cl(),f;if(t){let S=typeof t=="string"?Hv(t):t;Jr(c==="/"||((b=S.pathname)==null?void 0:b.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${S.pathname}" was given in the \`location\` prop.`),f=S}else f=h;let m=f.pathname||"/",g=m;if(c!=="/"){let S=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=yQ(e,{pathname:g});sc(u||v!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),sc(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=nce(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},o,S.params),pathname:kh([c,n.encodeLocation?n.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:kh([c,n.encodeLocation?n.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,i,r);return t&&x?J.createElement(tw.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},x):x}function ece(){let e=cce(),t=Wle(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=J.createElement(J.Fragment,null,J.createElement("p",null,"💿 Hey developer 👋"),J.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",J.createElement("code",{style:s},"ErrorBoundary")," or"," ",J.createElement("code",{style:s},"errorElement")," prop on your route.")),J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},t),i?J.createElement("pre",{style:n},i):null,a)}var tce=J.createElement(ece,null),ice=class extends J.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?J.createElement(fc.Provider,{value:this.props.routeContext},J.createElement(f6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rce({routeContext:e,match:t,children:i}){let r=J.useContext(Gv);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),J.createElement(fc.Provider,{value:e},i)}function nce(e,t=[],i=null,r=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let n=e,s=i==null?void 0:i.errors;if(s!=null){let l=n.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Jr(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),n=n.slice(0,Math.min(n.length,l+1))}let a=!1,o=-1;if(i)for(let l=0;l<n.length;l++){let c=n[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=l),c.route.id){let{loaderData:u,errors:h}=i,f=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||f){a=!0,o>=0?n=n.slice(0,o+1):n=[n[0]];break}}}return n.reduceRight((l,c,u)=>{let h,f=!1,m=null,g=null;i&&(h=s&&c.route.id?s[c.route.id]:void 0,m=c.route.errorElement||tce,a&&(o<0&&u===0?(TQ("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,g=null):o===u&&(f=!0,g=c.route.hydrateFallbackElement||null)));let v=t.concat(n.slice(0,u+1)),x=()=>{let b;return h?b=m:f?b=g:c.route.Component?b=J.createElement(c.route.Component,null):c.route.element?b=c.route.element:b=l,J.createElement(rce,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:i!=null},children:b})};return i&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?J.createElement(ice,{location:i.location,revalidation:i.revalidation,component:m,error:h,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}function p6(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sce(e){let t=J.useContext(Gv);return Jr(t,p6(e)),t}function ace(e){let t=J.useContext(YT);return Jr(t,p6(e)),t}function oce(e){let t=J.useContext(fc);return Jr(t,p6(e)),t}function m6(e){let t=oce(e),i=t.matches[t.matches.length-1];return Jr(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function lce(){return m6("useRouteId")}function cce(){var r;let e=J.useContext(f6),t=ace("useRouteError"),i=m6("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function uce(){let{router:e}=sce("useNavigate"),t=m6("useNavigate"),i=J.useRef(!1);return EQ(()=>{i.current=!0}),J.useCallback(async(n,s={})=>{sc(i.current,_Q),i.current&&(typeof n=="number"?e.navigate(n):await e.navigate(n,{fromRouteId:t,...s}))},[e,t])}var fN={};function TQ(e,t,i){!t&&!fN[e]&&(fN[e]=!0,sc(!1,i))}J.memo(hce);function hce({routes:e,future:t,state:i}){return AQ(e,void 0,i,t)}function dce({to:e,replace:t,state:i,relative:r}){Jr(Wv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=J.useContext(dc);sc(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=J.useContext(fc),{pathname:a}=Cl(),o=QT(),l=d6(e,h6(s),a,r==="path"),c=JSON.stringify(l);return J.useEffect(()=>{o(JSON.parse(c),{replace:t,state:i,relative:r})},[o,c,r,t,i]),null}function fce(e){return $le(e.context)}function Hs(e){Jr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pce({basename:e="/",children:t=null,location:i,navigationType:r="POP",navigator:n,static:s=!1}){Jr(!Wv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),o=J.useMemo(()=>({basename:a,navigator:n,static:s,future:{}}),[a,n,s]);typeof i=="string"&&(i=Hv(i));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:f="default"}=i,m=J.useMemo(()=>{let g=Uh(l,a);return g==null?null:{location:{pathname:g,search:c,hash:u,state:h,key:f},navigationType:r}},[a,l,c,u,h,f,r]);return sc(m!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:J.createElement(dc.Provider,{value:o},J.createElement(tw.Provider,{children:t,value:m}))}function mce({children:e,location:t}){return Jle(GD(e),t)}function GD(e,t=[]){let i=[];return J.Children.forEach(e,(r,n)=>{if(!J.isValidElement(r))return;let s=[...t,n];if(r.type===J.Fragment){i.push.apply(i,GD(r.props.children,s));return}Jr(r.type===Hs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=GD(r.props.children,s)),i.push(a)}),i}var uE="get",hE="application/x-www-form-urlencoded";function KT(e){return e!=null&&typeof e.tagName=="string"}function gce(e){return KT(e)&&e.tagName.toLowerCase()==="button"}function vce(e){return KT(e)&&e.tagName.toLowerCase()==="form"}function yce(e){return KT(e)&&e.tagName.toLowerCase()==="input"}function xce(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function bce(e,t){return e.button===0&&(!t||t==="_self")&&!xce(e)}var $2=null;function wce(){if($2===null)try{new FormData(document.createElement("form"),0),$2=!1}catch{$2=!0}return $2}var Sce=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sM(e){return e!=null&&!Sce.has(e)?(sc(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hE}"`),null):e}function _ce(e,t){let i,r,n,s,a;if(vce(e)){let o=e.getAttribute("action");r=o?Uh(o,t):null,i=e.getAttribute("method")||uE,n=sM(e.getAttribute("enctype"))||hE,s=new FormData(e)}else if(gce(e)||yce(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||o.getAttribute("action");if(r=l?Uh(l,t):null,i=e.getAttribute("formmethod")||o.getAttribute("method")||uE,n=sM(e.getAttribute("formenctype"))||sM(o.getAttribute("enctype"))||hE,s=new FormData(o,e),!wce()){let{name:c,type:u,value:h}=e;if(u==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,h)}}else{if(KT(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=uE,r=null,n=hE,a=e}return s&&n==="text/plain"&&(a=s,s=void 0),{action:r,method:i.toLowerCase(),encType:n,formData:s,body:a}}function g6(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function Ece(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ace(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Tce(e,t,i){let r=await Promise.all(e.map(async n=>{let s=t.routes[n.route.id];if(s){let a=await Ece(s,i);return a.links?a.links():[]}return[]}));return Dce(r.flat(1).filter(Ace).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function pN(e,t,i,r,n,s){let a=(l,c)=>i[c]?l.route.id!==i[c].route.id:!0,o=(l,c)=>{var u;return i[c].pathname!==l.pathname||((u=i[c].route.path)==null?void 0:u.endsWith("*"))&&i[c].params["*"]!==l.params["*"]};return s==="assets"?t.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?t.filter((l,c)=>{var h;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((h=i[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Cce(e,t,{includeHydrateFallback:i}={}){return Mce(e.map(r=>{let n=t.routes[r.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),i&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function Mce(e){return[...new Set(e)]}function Pce(e){let t={},i=Object.keys(e).sort();for(let r of i)t[r]=e[r];return t}function Dce(e,t){let i=new Set;return new Set(t),e.reduce((r,n)=>{let s=JSON.stringify(Pce(n));return i.has(s)||(i.add(s),r.push({key:s,link:n})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ice=new Set([100,101,204,205]);function Rce(e,t){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname="_root.data":t&&Uh(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function CQ(){let e=J.useContext(Gv);return g6(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Oce(){let e=J.useContext(YT);return g6(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var v6=J.createContext(void 0);v6.displayName="FrameworkContext";function MQ(){let e=J.useContext(v6);return g6(e,"You must render this element inside a <HydratedRouter> element"),e}function Lce(e,t){let i=J.useContext(v6),[r,n]=J.useState(!1),[s,a]=J.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=t,f=J.useRef(null);J.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let v=b=>{b.forEach(S=>{a(S.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[e]),J.useEffect(()=>{if(r){let v=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{n(!0)},g=()=>{n(!1),a(!1)};return i?e!=="intent"?[s,f,{}]:[s,f,{onFocus:v1(o,m),onBlur:v1(l,g),onMouseEnter:v1(c,m),onMouseLeave:v1(u,g),onTouchStart:v1(h,m)}]:[!1,f,{}]}function v1(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function kce({page:e,...t}){let{router:i}=CQ(),r=J.useMemo(()=>yQ(i.routes,e,i.basename),[i.routes,e,i.basename]);return r?J.createElement(Bce,{page:e,matches:r,...t}):null}function zce(e){let{manifest:t,routeModules:i}=MQ(),[r,n]=J.useState([]);return J.useEffect(()=>{let s=!1;return Tce(e,t,i).then(a=>{s||n(a)}),()=>{s=!0}},[e,t,i]),r}function Bce({page:e,matches:t,...i}){let r=Cl(),{manifest:n,routeModules:s}=MQ(),{basename:a}=CQ(),{loaderData:o,matches:l}=Oce(),c=J.useMemo(()=>pN(e,t,l,n,r,"data"),[e,t,l,n,r]),u=J.useMemo(()=>pN(e,t,l,n,r,"assets"),[e,t,l,n,r]),h=J.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let g=new Set,v=!1;if(t.forEach(b=>{var _;let S=n.routes[b.route.id];!S||!S.hasLoader||(!c.some(A=>A.route.id===b.route.id)&&b.route.id in o&&((_=s[b.route.id])!=null&&_.shouldRevalidate)||S.hasClientLoader?v=!0:g.add(b.route.id))}),g.size===0)return[];let x=Rce(e,a);return v&&g.size>0&&x.searchParams.set("_routes",t.filter(b=>g.has(b.route.id)).map(b=>b.route.id).join(",")),[x.pathname+x.search]},[a,o,r,n,c,t,e,s]),f=J.useMemo(()=>Cce(u,n),[u,n]),m=zce(u);return J.createElement(J.Fragment,null,h.map(g=>J.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...i})),f.map(g=>J.createElement("link",{key:g,rel:"modulepreload",href:g,...i})),m.map(({key:g,link:v})=>J.createElement("link",{key:g,...v})))}function jce(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var PQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{PQ&&(window.__reactRouterVersion="7.6.3")}catch{}function Nce({basename:e,children:t,window:i}){let r=J.useRef();r.current==null&&(r.current=Sle({window:i,v5Compat:!0}));let n=r.current,[s,a]=J.useState({action:n.action,location:n.location}),o=J.useCallback(l=>{J.startTransition(()=>a(l))},[a]);return J.useLayoutEffect(()=>n.listen(o),[n,o]),J.createElement(pce,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:n})}var DQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IQ=J.forwardRef(function({onClick:t,discover:i="render",prefetch:r="none",relative:n,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:h,...f},m){let{basename:g}=J.useContext(dc),v=typeof c=="string"&&DQ.test(c),x,b=!1;if(typeof c=="string"&&v&&(x=c,PQ))try{let R=new URL(window.location.href),O=c.startsWith("//")?new URL(R.protocol+c):new URL(c),L=Uh(O.pathname,g);O.origin===R.origin&&L!=null?c=L+O.search+O.hash:b=!0}catch{sc(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=Qle(c,{relative:n}),[_,A,M]=Lce(r,f),C=Fce(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:n,viewTransition:h});function D(R){t&&t(R),R.defaultPrevented||C(R)}let T=J.createElement("a",{...f,...M,href:x||S,onClick:b||s?t:D,ref:jce(m,A),target:l,"data-discover":!v&&i==="render"?"true":void 0});return _&&!v?J.createElement(J.Fragment,null,T,J.createElement(kce,{page:S})):T});IQ.displayName="Link";var Bm=J.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:r="",end:n=!1,style:s,to:a,viewTransition:o,children:l,...c},u){let h=iw(a,{relative:c.relative}),f=Cl(),m=J.useContext(YT),{navigator:g,basename:v}=J.useContext(dc),x=m!=null&&Xce(h)&&o===!0,b=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,S=f.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(S=S.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&v&&(_=Uh(_,v)||_);const A=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let M=S===b||!n&&S.startsWith(b)&&S.charAt(A)==="/",C=_!=null&&(_===b||!n&&_.startsWith(b)&&_.charAt(b.length)==="/"),D={isActive:M,isPending:C,isTransitioning:x},T=M?t:void 0,R;typeof r=="function"?R=r(D):R=[r,M?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(D):s;return J.createElement(IQ,{...c,"aria-current":T,className:R,ref:u,style:O,to:a,viewTransition:o},typeof l=="function"?l(D):l)});Bm.displayName="NavLink";var Vce=J.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:r,replace:n,state:s,method:a=uE,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...f},m)=>{let g=Wce(),v=qce(o,{relative:c}),x=a.toLowerCase()==="get"?"get":"post",b=typeof o=="string"&&DQ.test(o),S=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let A=_.nativeEvent.submitter,M=(A==null?void 0:A.getAttribute("formmethod"))||a;g(A||_.currentTarget,{fetcherKey:t,method:M,navigate:i,replace:n,state:s,relative:c,preventScrollReset:u,viewTransition:h})};return J.createElement("form",{ref:m,method:x,action:v,onSubmit:r?l:S,...f,"data-discover":!b&&e==="render"?"true":void 0})});Vce.displayName="Form";function Uce(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RQ(e){let t=J.useContext(Gv);return Jr(t,Uce(e)),t}function Fce(e,{target:t,replace:i,state:r,preventScrollReset:n,relative:s,viewTransition:a}={}){let o=QT(),l=Cl(),c=iw(e,{relative:s});return J.useCallback(u=>{if(bce(u,t)){u.preventDefault();let h=i!==void 0?i:ib(l)===ib(c);o(e,{replace:h,state:r,preventScrollReset:n,relative:s,viewTransition:a})}},[l,o,c,i,r,t,e,n,s,a])}var Hce=0,Gce=()=>`__${String(++Hce)}__`;function Wce(){let{router:e}=RQ("useSubmit"),{basename:t}=J.useContext(dc),i=lce();return J.useCallback(async(r,n={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=_ce(r,t);if(n.navigate===!1){let u=n.fetcherKey||Gce();await e.fetch(u,i,n.action||s,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||a,formEncType:n.encType||o,flushSync:n.flushSync})}else await e.navigate(n.action||s,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||a,formEncType:n.encType||o,replace:n.replace,state:n.state,fromRouteId:i,flushSync:n.flushSync,viewTransition:n.viewTransition})},[e,t,i])}function qce(e,{relative:t}={}){let{basename:i}=J.useContext(dc),r=J.useContext(fc);Jr(r,"useFormAction must be used inside a RouteContext");let[n]=r.matches.slice(-1),s={...iw(e||".",{relative:t})},a=Cl();if(e==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let u=o.toString();s.search=u?`?${u}`:""}}return(!e||e===".")&&n.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(s.pathname=s.pathname==="/"?i:kh([i,s.pathname])),ib(s)}function Xce(e,t={}){let i=J.useContext(SQ);Jr(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=RQ("useViewTransitionState"),n=iw(e,{relative:t.relative});if(!i.isTransitioning)return!1;let s=Uh(i.currentLocation.pathname,r)||i.currentLocation.pathname,a=Uh(i.nextLocation.pathname,r)||i.nextLocation.pathname;return tA(n.pathname,a)!=null||tA(n.pathname,s)!=null}[...Ice];function Yce(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Qce(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Kce=function(){function e(i){var r=this;this._insertTag=function(n){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(n,s),r.tags.push(n)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Qce(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Yce(n);try{s.insertRule(r,s.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var n;return(n=r.parentNode)==null?void 0:n.removeChild(r)}),this.tags=[],this.ctr=0},e}(),ma="-ms-",iA="-moz-",sr="-webkit-",OQ="comm",y6="rule",x6="decl",Zce="@import",LQ="@keyframes",$ce="@layer",Jce=Math.abs,ZT=String.fromCharCode,eue=Object.assign;function tue(e,t){return Ks(e,0)^45?(((t<<2^Ks(e,0))<<2^Ks(e,1))<<2^Ks(e,2))<<2^Ks(e,3):0}function kQ(e){return e.trim()}function iue(e,t){return(e=t.exec(e))?e[0]:e}function ar(e,t,i){return e.replace(t,i)}function WD(e,t){return e.indexOf(t)}function Ks(e,t){return e.charCodeAt(t)|0}function rb(e,t,i){return e.slice(t,i)}function Zc(e){return e.length}function b6(e){return e.length}function J2(e,t){return t.push(e),e}function rue(e,t){return e.map(t).join("")}var $T=1,uv=1,zQ=0,vo=0,jn=0,qv="";function JT(e,t,i,r,n,s,a){return{value:e,root:t,parent:i,type:r,props:n,children:s,line:$T,column:uv,length:a,return:""}}function y1(e,t){return eue(JT("",null,null,"",null,null,0),e,{length:-e.length},t)}function nue(){return jn}function sue(){return jn=vo>0?Ks(qv,--vo):0,uv--,jn===10&&(uv=1,$T--),jn}function No(){return jn=vo<zQ?Ks(qv,vo++):0,uv++,jn===10&&(uv=1,$T++),jn}function uu(){return Ks(qv,vo)}function dE(){return vo}function rw(e,t){return rb(qv,e,t)}function nb(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function BQ(e){return $T=uv=1,zQ=Zc(qv=e),vo=0,[]}function jQ(e){return qv="",e}function fE(e){return kQ(rw(vo-1,qD(e===91?e+2:e===40?e+1:e)))}function aue(e){for(;(jn=uu())&&jn<33;)No();return nb(e)>2||nb(jn)>3?"":" "}function oue(e,t){for(;--t&&No()&&!(jn<48||jn>102||jn>57&&jn<65||jn>70&&jn<97););return rw(e,dE()+(t<6&&uu()==32&&No()==32))}function qD(e){for(;No();)switch(jn){case e:return vo;case 34:case 39:e!==34&&e!==39&&qD(jn);break;case 40:e===41&&qD(e);break;case 92:No();break}return vo}function lue(e,t){for(;No()&&e+jn!==57;)if(e+jn===84&&uu()===47)break;return"/*"+rw(t,vo-1)+"*"+ZT(e===47?e:No())}function cue(e){for(;!nb(uu());)No();return rw(e,vo)}function uue(e){return jQ(pE("",null,null,null,[""],e=BQ(e),0,[0],e))}function pE(e,t,i,r,n,s,a,o,l){for(var c=0,u=0,h=a,f=0,m=0,g=0,v=1,x=1,b=1,S=0,_="",A=n,M=s,C=r,D=_;x;)switch(g=S,S=No()){case 40:if(g!=108&&Ks(D,h-1)==58){WD(D+=ar(fE(S),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:D+=fE(S);break;case 9:case 10:case 13:case 32:D+=aue(g);break;case 92:D+=oue(dE()-1,7);continue;case 47:switch(uu()){case 42:case 47:J2(hue(lue(No(),dE()),t,i),l);break;default:D+="/"}break;case 123*v:o[c++]=Zc(D)*b;case 125*v:case 59:case 0:switch(S){case 0:case 125:x=0;case 59+u:b==-1&&(D=ar(D,/\f/g,"")),m>0&&Zc(D)-h&&J2(m>32?gN(D+";",r,i,h-1):gN(ar(D," ","")+";",r,i,h-2),l);break;case 59:D+=";";default:if(J2(C=mN(D,t,i,c,u,n,o,_,A=[],M=[],h),s),S===123)if(u===0)pE(D,t,C,C,A,s,h,o,M);else switch(f===99&&Ks(D,3)===110?100:f){case 100:case 108:case 109:case 115:pE(e,C,C,r&&J2(mN(e,C,C,0,0,n,o,_,n,A=[],h),M),n,M,h,o,r?A:M);break;default:pE(D,C,C,C,[""],M,0,o,M)}}c=u=m=0,v=b=1,_=D="",h=a;break;case 58:h=1+Zc(D),m=g;default:if(v<1){if(S==123)--v;else if(S==125&&v++==0&&sue()==125)continue}switch(D+=ZT(S),S*v){case 38:b=u>0?1:(D+="\f",-1);break;case 44:o[c++]=(Zc(D)-1)*b,b=1;break;case 64:uu()===45&&(D+=fE(No())),f=uu(),u=h=Zc(_=D+=cue(dE())),S++;break;case 45:g===45&&Zc(D)==2&&(v=0)}}return s}function mN(e,t,i,r,n,s,a,o,l,c,u){for(var h=n-1,f=n===0?s:[""],m=b6(f),g=0,v=0,x=0;g<r;++g)for(var b=0,S=rb(e,h+1,h=Jce(v=a[g])),_=e;b<m;++b)(_=kQ(v>0?f[b]+" "+S:ar(S,/&\f/g,f[b])))&&(l[x++]=_);return JT(e,t,i,n===0?y6:o,l,c,u)}function hue(e,t,i){return JT(e,t,i,OQ,ZT(nue()),rb(e,2,-2),0)}function gN(e,t,i,r){return JT(e,t,i,x6,rb(e,0,r),rb(e,r+1,-1),r)}function Y0(e,t){for(var i="",r=b6(e),n=0;n<r;n++)i+=t(e[n],n,e,t)||"";return i}function due(e,t,i,r){switch(e.type){case $ce:if(e.children.length)break;case Zce:case x6:return e.return=e.return||e.value;case OQ:return"";case LQ:return e.return=e.value+"{"+Y0(e.children,r)+"}";case y6:e.value=e.props.join(",")}return Zc(i=Y0(e.children,r))?e.return=e.value+"{"+i+"}":""}function fue(e){var t=b6(e);return function(i,r,n,s){for(var a="",o=0;o<t;o++)a+=e[o](i,r,n,s)||"";return a}}function pue(e){return function(t){t.root||(t=t.return)&&e(t)}}function mue(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var gue=function(t,i,r){for(var n=0,s=0;n=s,s=uu(),n===38&&s===12&&(i[r]=1),!nb(s);)No();return rw(t,vo)},vue=function(t,i){var r=-1,n=44;do switch(nb(n)){case 0:n===38&&uu()===12&&(i[r]=1),t[r]+=gue(vo-1,i,r);break;case 2:t[r]+=fE(n);break;case 4:if(n===44){t[++r]=uu()===58?"&\f":"",i[r]=t[r].length;break}default:t[r]+=ZT(n)}while(n=No());return t},yue=function(t,i){return jQ(vue(BQ(t),i))},vN=new WeakMap,xue=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,r=t.parent,n=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!vN.get(r))&&!n){vN.set(t,!0);for(var s=[],a=yue(i,s),o=r.props,l=0,c=0;l<a.length;l++)for(var u=0;u<o.length;u++,c++)t.props[c]=s[l]?a[l].replace(/&\f/g,o[u]):o[u]+" "+a[l]}}},bue=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function NQ(e,t){switch(tue(e,t)){case 5103:return sr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return sr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return sr+e+iA+e+ma+e+e;case 6828:case 4268:return sr+e+ma+e+e;case 6165:return sr+e+ma+"flex-"+e+e;case 5187:return sr+e+ar(e,/(\w+).+(:[^]+)/,sr+"box-$1$2"+ma+"flex-$1$2")+e;case 5443:return sr+e+ma+"flex-item-"+ar(e,/flex-|-self/,"")+e;case 4675:return sr+e+ma+"flex-line-pack"+ar(e,/align-content|flex-|-self/,"")+e;case 5548:return sr+e+ma+ar(e,"shrink","negative")+e;case 5292:return sr+e+ma+ar(e,"basis","preferred-size")+e;case 6060:return sr+"box-"+ar(e,"-grow","")+sr+e+ma+ar(e,"grow","positive")+e;case 4554:return sr+ar(e,/([^-])(transform)/g,"$1"+sr+"$2")+e;case 6187:return ar(ar(ar(e,/(zoom-|grab)/,sr+"$1"),/(image-set)/,sr+"$1"),e,"")+e;case 5495:case 3959:return ar(e,/(image-set\([^]*)/,sr+"$1$`$1");case 4968:return ar(ar(e,/(.+:)(flex-)?(.*)/,sr+"box-pack:$3"+ma+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+sr+e+e;case 4095:case 3583:case 4068:case 2532:return ar(e,/(.+)-inline(.+)/,sr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Zc(e)-1-t>6)switch(Ks(e,t+1)){case 109:if(Ks(e,t+4)!==45)break;case 102:return ar(e,/(.+:)(.+)-([^]+)/,"$1"+sr+"$2-$3$1"+iA+(Ks(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~WD(e,"stretch")?NQ(ar(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ks(e,t+1)!==115)break;case 6444:switch(Ks(e,Zc(e)-3-(~WD(e,"!important")&&10))){case 107:return ar(e,":",":"+sr)+e;case 101:return ar(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+sr+(Ks(e,14)===45?"inline-":"")+"box$3$1"+sr+"$2$3$1"+ma+"$2box$3")+e}break;case 5936:switch(Ks(e,t+11)){case 114:return sr+e+ma+ar(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return sr+e+ma+ar(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return sr+e+ma+ar(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return sr+e+ma+e+e}return e}var wue=function(t,i,r,n){if(t.length>-1&&!t.return)switch(t.type){case x6:t.return=NQ(t.value,t.length);break;case LQ:return Y0([y1(t,{value:ar(t.value,"@","@"+sr)})],n);case y6:if(t.length)return rue(t.props,function(s){switch(iue(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Y0([y1(t,{props:[ar(s,/:(read-\w+)/,":"+iA+"$1")]})],n);case"::placeholder":return Y0([y1(t,{props:[ar(s,/:(plac\w+)/,":"+sr+"input-$1")]}),y1(t,{props:[ar(s,/:(plac\w+)/,":"+iA+"$1")]}),y1(t,{props:[ar(s,/:(plac\w+)/,ma+"input-$1")]})],n)}return""})}},Sue=[wue],_ue=function(t){var i=t.key;if(i==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var x=v.getAttribute("data-emotion");x.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var n=t.stylisPlugins||Sue,s={},a,o=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(v){for(var x=v.getAttribute("data-emotion").split(" "),b=1;b<x.length;b++)s[x[b]]=!0;o.push(v)});var l,c=[xue,bue];{var u,h=[due,pue(function(v){u.insert(v)})],f=fue(c.concat(n,h)),m=function(x){return Y0(uue(x),f)};l=function(x,b,S,_){u=S,m(x?x+"{"+b.styles+"}":b.styles),_&&(g.inserted[b.name]=!0)}}var g={key:i,sheet:new Kce({key:i,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:l};return g.sheet.hydrate(o),g};function Sx(){return Sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Sx.apply(null,arguments)}var aM={exports:{}},hr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yN;function Eue(){if(yN)return hr;yN=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,i=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,n=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,v=e?Symbol.for("react.block"):60121,x=e?Symbol.for("react.fundamental"):60117,b=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function _(M){if(typeof M=="object"&&M!==null){var C=M.$$typeof;switch(C){case t:switch(M=M.type,M){case l:case c:case r:case s:case n:case h:return M;default:switch(M=M&&M.$$typeof,M){case o:case u:case g:case m:case a:return M;default:return C}}case i:return C}}}function A(M){return _(M)===c}return hr.AsyncMode=l,hr.ConcurrentMode=c,hr.ContextConsumer=o,hr.ContextProvider=a,hr.Element=t,hr.ForwardRef=u,hr.Fragment=r,hr.Lazy=g,hr.Memo=m,hr.Portal=i,hr.Profiler=s,hr.StrictMode=n,hr.Suspense=h,hr.isAsyncMode=function(M){return A(M)||_(M)===l},hr.isConcurrentMode=A,hr.isContextConsumer=function(M){return _(M)===o},hr.isContextProvider=function(M){return _(M)===a},hr.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===t},hr.isForwardRef=function(M){return _(M)===u},hr.isFragment=function(M){return _(M)===r},hr.isLazy=function(M){return _(M)===g},hr.isMemo=function(M){return _(M)===m},hr.isPortal=function(M){return _(M)===i},hr.isProfiler=function(M){return _(M)===s},hr.isStrictMode=function(M){return _(M)===n},hr.isSuspense=function(M){return _(M)===h},hr.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===r||M===c||M===s||M===n||M===h||M===f||typeof M=="object"&&M!==null&&(M.$$typeof===g||M.$$typeof===m||M.$$typeof===a||M.$$typeof===o||M.$$typeof===u||M.$$typeof===x||M.$$typeof===b||M.$$typeof===S||M.$$typeof===v)},hr.typeOf=_,hr}var xN;function Aue(){return xN||(xN=1,aM.exports=Eue()),aM.exports}var oM,bN;function Tue(){if(bN)return oM;bN=1;var e=Aue(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=r,s[e.Memo]=n;function a(g){return e.isMemo(g)?n:s[g.$$typeof]||t}var o=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;function m(g,v,x){if(typeof v!="string"){if(f){var b=h(v);b&&b!==f&&m(g,b,x)}var S=l(v);c&&(S=S.concat(c(v)));for(var _=a(g),A=a(v),M=0;M<S.length;++M){var C=S[M];if(!i[C]&&!(x&&x[C])&&!(A&&A[C])&&!(_&&_[C])){var D=u(v,C);try{o(g,C,D)}catch{}}}}return g}return oM=m,oM}Tue();var Cue=!0;function Mue(e,t,i){var r="";return i.split(" ").forEach(function(n){e[n]!==void 0?t.push(e[n]+";"):n&&(r+=n+" ")}),r}var VQ=function(t,i,r){var n=t.key+"-"+i.name;(r===!1||Cue===!1)&&t.registered[n]===void 0&&(t.registered[n]=i.styles)},UQ=function(t,i,r){VQ(t,i,r);var n=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var s=i;do t.insert(i===s?"."+n:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function Pue(e){for(var t=0,i,r=0,n=e.length;n>=4;++r,n-=4)i=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(n){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Due={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Iue=/[A-Z]|^ms/g,Rue=/_EMO_([^_]+?)_([^]*?)_EMO_/g,FQ=function(t){return t.charCodeAt(1)===45},wN=function(t){return t!=null&&typeof t!="boolean"},lM=mue(function(e){return FQ(e)?e:e.replace(Iue,"-$&").toLowerCase()}),SN=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(Rue,function(r,n,s){return $c={name:n,styles:s,next:$c},n})}return Due[t]!==1&&!FQ(t)&&typeof i=="number"&&i!==0?i+"px":i};function sb(e,t,i){if(i==null)return"";var r=i;if(r.__emotion_styles!==void 0)return r;switch(typeof i){case"boolean":return"";case"object":{var n=i;if(n.anim===1)return $c={name:n.name,styles:n.styles,next:$c},n.name;var s=i;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)$c={name:a.name,styles:a.styles,next:$c},a=a.next;var o=s.styles+";";return o}return Oue(e,t,i)}case"function":{if(e!==void 0){var l=$c,c=i(e);return $c=l,sb(e,t,c)}break}}var u=i;return u}function Oue(e,t,i){var r="";if(Array.isArray(i))for(var n=0;n<i.length;n++)r+=sb(e,t,i[n])+";";else for(var s in i){var a=i[s];if(typeof a!="object"){var o=a;wN(o)&&(r+=lM(s)+":"+SN(s,o)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&t==null)for(var l=0;l<a.length;l++)wN(a[l])&&(r+=lM(s)+":"+SN(s,a[l])+";");else{var c=sb(e,t,a);switch(s){case"animation":case"animationName":{r+=lM(s)+":"+c+";";break}default:r+=s+"{"+c+"}"}}}return r}var _N=/label:\s*([^\s;{]+)\s*(;|$)/g,$c;function w6(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,n="";$c=void 0;var s=e[0];if(s==null||s.raw===void 0)r=!1,n+=sb(i,t,s);else{var a=s;n+=a[0]}for(var o=1;o<e.length;o++)if(n+=sb(i,t,e[o]),r){var l=s;n+=l[o]}_N.lastIndex=0;for(var c="",u;(u=_N.exec(n))!==null;)c+="-"+u[1];var h=Pue(n)+c;return{name:h,styles:n,next:$c}}var Lue=function(t){return t()},HQ=lN.useInsertionEffect?lN.useInsertionEffect:!1,kue=HQ||Lue,EN=HQ||J.useLayoutEffect,GQ=J.createContext(typeof HTMLElement<"u"?_ue({key:"css"}):null);GQ.Provider;var WQ=function(t){return J.forwardRef(function(i,r){var n=J.useContext(GQ);return t(i,n,r)})},S6=J.createContext({}),_6={}.hasOwnProperty,XD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",zue=function(t,i){var r={};for(var n in i)_6.call(i,n)&&(r[n]=i[n]);return r[XD]=t,r},Bue=function(t){var i=t.cache,r=t.serialized,n=t.isStringTag;return VQ(i,r,n),kue(function(){return UQ(i,r,n)}),null},jue=WQ(function(e,t,i){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var n=e[XD],s=[r],a="";typeof e.className=="string"?a=Mue(t.registered,s,e.className):e.className!=null&&(a=e.className+" ");var o=w6(s,void 0,J.useContext(S6));a+=t.key+"-"+o.name;var l={};for(var c in e)_6.call(e,c)&&c!=="css"&&c!==XD&&(l[c]=e[c]);return l.className=a,i&&(l.ref=i),J.createElement(J.Fragment,null,J.createElement(Bue,{cache:t,serialized:o,isStringTag:typeof n=="string"}),J.createElement(n,l))}),Nue=jue,AN=function(t,i){var r=arguments;if(i==null||!_6.call(i,"css"))return J.createElement.apply(void 0,r);var n=r.length,s=new Array(n);s[0]=Nue,s[1]=zue(t,i);for(var a=2;a<n;a++)s[a]=r[a];return J.createElement.apply(null,s)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(AN||(AN={}));var Vue=WQ(function(e,t){var i=e.styles,r=w6([i],void 0,J.useContext(S6)),n=J.useRef();return EN(function(){var s=t.key+"-global",a=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(a.before=t.sheet.tags[0]),l!==null&&(o=!0,l.setAttribute("data-emotion",s),a.hydrate([l])),n.current=[a,o],function(){a.flush()}},[t]),EN(function(){var s=n.current,a=s[0],o=s[1];if(o){s[1]=!1;return}if(r.next!==void 0&&UQ(t,r.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}t.insert("",r,a,!1)},[t,r.name]),null});function Uue(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return w6(t)}const Fue="/assets/fa-regular-400-D1vz6WBx.ttf",Hue="/assets/Helvetica-zhVn_y_h.ttf",Gue="/assets/Helvetica-Bold-DbiQUL7g.ttf",Wue="/assets/HelveticaNeueRoman-CSpBGpqm.otf",que="/assets/Inter_24pt-Regular-BPx6xqqj.ttf",Xue="/assets/PlusJakartaSans_wght_-BZU_LQer.ttf",Yue=Uue`
  /* Font Awesome */
  @font-face {
    font-family: 'Font Awesome 5 Free';
    src: url(${Fue}) format('truetype');
    font-weight: 400;
    font-style: normal;
    font-display: swap; /* Додано для кращого відображення шрифтів */
  }

  /* Helvetica */
  @font-face {
    font-family: 'Helvetica';
    src: url(${Hue}) format('truetype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
  }

  @font-face {
    font-family: 'Helvetica';
    src: url(${Gue}) format('truetype');
    font-weight: bold;
    font-style: normal;
    font-display: swap;
  }

  /* Helvetica Neue */
  @font-face {
    font-family: 'Helvetica Neue';
    src: url(${Wue}) format('opentype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
  }

  /* Inter */
  @font-face {
    font-family: 'Inter';
    src: url(${que}) format('truetype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
  }

  /* Plus Jakarta Sans */
  @font-face {
    font-family: 'Plus Jakarta Display';
    src: url(${Xue}) format('truetype-variations');
    font-weight: 100 900;
    font-style: normal;
    font-display: swap;
  }

  /* SF Pro */
  @font-face {
    font-family: 'SF Pro';
    src: url('../src/assets/fonts/SFPRODISPLAYSEMIBOLDITALIC.OTF') format('opentype');
    font-weight: 600;
    font-style: italic;
    font-display: swap;
  }

  :root {
    --black: #000;
    --purple-800: #1a1f37;
    --gray-500: #c4c4c4;
    --purple-400: #8082ff;
    --purple-500: #4c4eec;
    --white-50: rgba(255, 255, 255, 0.5);
    --white-75: rgba(255, 255, 255, 0.75);
    --white-80: rgba(255, 255, 255, 0.8);
    --white-60: rgba(255, 255, 255, 0.6);
    --white-25: rgba(255, 255, 255, 0.25);
    --white-70: rgba(255, 255, 255, 0.7);
    --white-6: rgba(255, 255, 255, 0.06);
    --white-24: rgba(255, 255, 255, 0.24);
    --white-30: rgba(255, 255, 255, 0.3);
    --white-100: #fff;
    
    /* Fonts */
    --font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
    --second-family: "Plus Jakarta Display", -apple-system, BlinkMacSystemFont, sans-serif;
    --third-family: "Helvetica", -apple-system, BlinkMacSystemFont, sans-serif;
    --font3: "Font Awesome 5 Free", sans-serif;
    --font4: "Helvetica Neue", -apple-system, BlinkMacSystemFont, sans-serif;
    --font5: "SF Pro", -apple-system, BlinkMacSystemFont, sans-serif;

    /* Додаткові змінні для узгодженості */
    --safe-area-inset-top: env(safe-area-inset-top, 0px);
    --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
    --safe-area-inset-left: env(safe-area-inset-left, 0px);
    --safe-area-inset-right: env(safe-area-inset-right, 0px);
  }

    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    --v1: calc(max(9vw, 11vh));
    scrollbar-width: none;
    word-wrap: break-word;
    z-index: 1;
    
    -webkit-tap-highlight-color: transparent;
  }

  body {
    font-family: var(--font-family);
    background-color: #000;
    color: #fff;
    min-height: 100vh;
    min-height: -webkit-fill-available; /* Фікс для мобільних браузерів */
    transition-duration: 300ms;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    padding: 
      env(safe-area-inset-top, 0px) 
      env(safe-area-inset-right, 0px) 
      env(safe-area-inset-bottom, 0px) 
      env(safe-area-inset-left, 0px);
  }
    
  body.modal-open {
    overflow: hidden;
    position: fixed;
    width: 100%;
    height: 100%;
  }

  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    font-family: var(--second-family);
    color: #fff;
    text-size-adjust: 100%; /* Запобігає авто-масштабуванню тексту на iOS */
  }

  code {
    font-family: var(--second-family);
  }

  a {
    text-decoration: none;
    transition: all 0.3s ease-in-out;
    &:hover {
      color: #808080;
      transition: all 0.3s ease-in-out;
    }
  }

  img {
    display: block;
    max-width: 100%;
    height: auto;
    object-fit: cover;
    -webkit-user-drag: none; /* Запобігає drag зображень на iOS */
  }

  button {
    cursor: pointer;
    transition: all 0.5s ease-in-out;
    appearance: none; /* Видаляє стандартні стилі для кнопок на iOS */
    background: transparent;
    border: 0;
    border-radius: 0;
    height: auto;
  }
  
  video {
    object-fit: contain;
    overflow-clip-margin: content-box;
    overflow: clip;
  }

  ul, li {
    list-style: none;
  }

  html {
    scroll-behavior: smooth;
    overflow-x: hidden;
    -webkit-text-size-adjust: 100%; /* Запобігає авто-масштабуванню тексту на iOS */
    -moz-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    height: -webkit-fill-available;
  }

  html, body {
    height: 100%;
    font-smoothing: antialiased;
    -webkit-overflow-scrolling: touch;
    touch-action: manipulation; /* Покращує відгук на тач-події */
        width: 100%;
    max-width: 100%;
    overflow-x: hidden;
  }

  body::-webkit-scrollbar {
    display: none;
  }

    body {
    position: relative;
  }

    main, .container, #root {
    overflow-x: hidden;
    width: 100%;
  }

  input, textarea, button {
  height: auto;
    font-size: 16px;
    font-family: inherit;
    border-radius: 0; /* Фікс для iOS */
    appearance: none; /* Видаляє стандартні стилі для інпутів на iOS */
  }

  /* Особливі фікси для iOS */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  textarea {
    -webkit-appearance: none;
  }

  /* Фікс для масштабування при фокусі на інпут на iOS */
  @media screen and (max-width: 767px) {
    input, textarea, select {
      font-size: 16px !important;
    }
  }

  @media (prefers-color-scheme: dark) {
    body {
      background-color: #000;
      color: #fff;
    }
  }

  @keyframes buttonAnimationOut {
    0% { background-position: center bottom; }
    99.99% { background-position: left bottom; }
    100% { background-position: right bottom; }
  }

  @keyframes move {
    from { transform: translateY(0%); }
    to { transform: translateY(-100%); }
  }

  /* Додаткові фікси для різних платформ */
  /* Фікс для висоти 100vh на мобільних пристроях */
  @supports (-webkit-touch-callout: none) {
    body {
      height: -webkit-fill-available;
    }
  }

  /* Фікс для Safari */
  _::-webkit-full-page-media, _:future, :root .safari_only {
    @supports (-webkit-touch-callout: none) {
      /* Специфічні стилі для Safari */
    }
  }




  
`,E6=J.createContext({});function A6(e){const t=J.useRef(null);return t.current===null&&(t.current=e()),t.current}const T6=typeof window<"u",qQ=T6?J.useLayoutEffect:J.useEffect,e3=J.createContext(null);function C6(e,t){e.indexOf(t)===-1&&e.push(t)}function M6(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}const Fh=(e,t,i)=>i>t?t:i<e?e:i;let P6=()=>{};const Hh={},XQ=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function YQ(e){return typeof e=="object"&&e!==null}const QQ=e=>/^0[^.\s]+$/u.test(e);function D6(e){let t;return()=>(t===void 0&&(t=e()),t)}const yl=e=>e,Que=(e,t)=>i=>t(e(i)),nw=(...e)=>e.reduce(Que),ab=(e,t,i)=>{const r=t-e;return r===0?1:(i-e)/r};class I6{constructor(){this.subscriptions=[]}add(t){return C6(this.subscriptions,t),()=>M6(this.subscriptions,t)}notify(t,i,r){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,i,r);else for(let s=0;s<n;s++){const a=this.subscriptions[s];a&&a(t,i,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const hu=e=>e*1e3,du=e=>e/1e3;function KQ(e,t){return t?e*(1e3/t):0}const ZQ=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e,Kue=1e-7,Zue=12;function $ue(e,t,i,r,n){let s,a,o=0;do a=t+(i-t)/2,s=ZQ(a,r,n)-e,s>0?i=a:t=a;while(Math.abs(s)>Kue&&++o<Zue);return a}function sw(e,t,i,r){if(e===t&&i===r)return yl;const n=s=>$ue(s,0,1,e,i);return s=>s===0||s===1?s:ZQ(n(s),t,r)}const $Q=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,JQ=e=>t=>1-e(1-t),eK=sw(.33,1.53,.69,.99),R6=JQ(eK),tK=$Q(R6),iK=e=>(e*=2)<1?.5*R6(e):.5*(2-Math.pow(2,-10*(e-1))),O6=e=>1-Math.sin(Math.acos(e)),rK=JQ(O6),nK=$Q(O6),Jue=sw(.42,0,1,1),ehe=sw(0,0,.58,1),sK=sw(.42,0,.58,1),the=e=>Array.isArray(e)&&typeof e[0]!="number",aK=e=>Array.isArray(e)&&typeof e[0]=="number",ihe={linear:yl,easeIn:Jue,easeInOut:sK,easeOut:ehe,circIn:O6,circInOut:nK,circOut:rK,backIn:R6,backInOut:tK,backOut:eK,anticipate:iK},rhe=e=>typeof e=="string",TN=e=>{if(aK(e)){P6(e.length===4);const[t,i,r,n]=e;return sw(t,i,r,n)}else if(rhe(e))return ihe[e];return e},eS=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],CN={value:null};function nhe(e,t){let i=new Set,r=new Set,n=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(h){a.has(h)&&(u.schedule(h),e()),l++,h(o)}const u={schedule:(h,f=!1,m=!1)=>{const v=m&&n?i:r;return f&&a.add(h),v.has(h)||v.add(h),h},cancel:h=>{r.delete(h),a.delete(h)},process:h=>{if(o=h,n){s=!0;return}n=!0,[i,r]=[r,i],i.forEach(c),t&&CN.value&&CN.value.frameloop[t].push(l),l=0,i.clear(),n=!1,s&&(s=!1,u.process(h))}};return u}const she=40;function oK(e,t){let i=!1,r=!0;const n={delta:0,timestamp:0,isProcessing:!1},s=()=>i=!0,a=eS.reduce((_,A)=>(_[A]=nhe(s,t?A:void 0),_),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:h,preRender:f,render:m,postRender:g}=a,v=()=>{const _=Hh.useManualTiming?n.timestamp:performance.now();i=!1,Hh.useManualTiming||(n.delta=r?1e3/60:Math.max(Math.min(_-n.timestamp,she),1)),n.timestamp=_,n.isProcessing=!0,o.process(n),l.process(n),c.process(n),u.process(n),h.process(n),f.process(n),m.process(n),g.process(n),n.isProcessing=!1,i&&t&&(r=!1,e(v))},x=()=>{i=!0,r=!0,n.isProcessing||e(v)};return{schedule:eS.reduce((_,A)=>{const M=a[A];return _[A]=(C,D=!1,T=!1)=>(i||x(),M.schedule(C,D,T)),_},{}),cancel:_=>{for(let A=0;A<eS.length;A++)a[eS[A]].cancel(_)},state:n,steps:a}}const{schedule:an,cancel:Af,state:qs,steps:cM}=oK(typeof requestAnimationFrame<"u"?requestAnimationFrame:yl,!0);let mE;function ahe(){mE=void 0}const uo={now:()=>(mE===void 0&&uo.set(qs.isProcessing||Hh.useManualTiming?qs.timestamp:performance.now()),mE),set:e=>{mE=e,queueMicrotask(ahe)}},lK=e=>t=>typeof t=="string"&&t.startsWith(e),L6=lK("--"),ohe=lK("var(--"),k6=e=>ohe(e)?lhe.test(e.split("/*")[0].trim()):!1,lhe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xv={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ob={...Xv,transform:e=>Fh(0,1,e)},tS={...Xv,default:1},_x=e=>Math.round(e*1e5)/1e5,z6=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function che(e){return e==null}const uhe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,B6=(e,t)=>i=>!!(typeof i=="string"&&uhe.test(i)&&i.startsWith(e)||t&&!che(i)&&Object.prototype.hasOwnProperty.call(i,t)),cK=(e,t,i)=>r=>{if(typeof r!="string")return r;const[n,s,a,o]=r.match(z6);return{[e]:parseFloat(n),[t]:parseFloat(s),[i]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},hhe=e=>Fh(0,255,e),uM={...Xv,transform:e=>Math.round(hhe(e))},Yp={test:B6("rgb","red"),parse:cK("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:r=1})=>"rgba("+uM.transform(e)+", "+uM.transform(t)+", "+uM.transform(i)+", "+_x(ob.transform(r))+")"};function dhe(e){let t="",i="",r="",n="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),r=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),r=e.substring(3,4),n=e.substring(4,5),t+=t,i+=i,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}}const YD={test:B6("#"),parse:dhe,transform:Yp.transform},aw=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Fd=aw("deg"),fu=aw("%"),ui=aw("px"),fhe=aw("vh"),phe=aw("vw"),MN={...fu,parse:e=>fu.parse(e)/100,transform:e=>fu.transform(e*100)},O0={test:B6("hsl","hue"),parse:cK("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:r=1})=>"hsla("+Math.round(e)+", "+fu.transform(_x(t))+", "+fu.transform(_x(i))+", "+_x(ob.transform(r))+")"},Bn={test:e=>Yp.test(e)||YD.test(e)||O0.test(e),parse:e=>Yp.test(e)?Yp.parse(e):O0.test(e)?O0.parse(e):YD.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Yp.transform(e):O0.transform(e),getAnimatableNone:e=>{const t=Bn.parse(e);return t.alpha=0,Bn.transform(t)}},mhe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ghe(e){var t,i;return isNaN(e)&&typeof e=="string"&&(((t=e.match(z6))==null?void 0:t.length)||0)+(((i=e.match(mhe))==null?void 0:i.length)||0)>0}const uK="number",hK="color",vhe="var",yhe="var(",PN="${}",xhe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function lb(e){const t=e.toString(),i=[],r={color:[],number:[],var:[]},n=[];let s=0;const o=t.replace(xhe,l=>(Bn.test(l)?(r.color.push(s),n.push(hK),i.push(Bn.parse(l))):l.startsWith(yhe)?(r.var.push(s),n.push(vhe),i.push(l)):(r.number.push(s),n.push(uK),i.push(parseFloat(l))),++s,PN)).split(PN);return{values:i,split:o,indexes:r,types:n}}function dK(e){return lb(e).values}function fK(e){const{split:t,types:i}=lb(e),r=t.length;return n=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],n[a]!==void 0){const o=i[a];o===uK?s+=_x(n[a]):o===hK?s+=Bn.transform(n[a]):s+=n[a]}return s}}const bhe=e=>typeof e=="number"?0:Bn.test(e)?Bn.getAnimatableNone(e):e;function whe(e){const t=dK(e);return fK(e)(t.map(bhe))}const Tf={test:ghe,parse:dK,createTransformer:fK,getAnimatableNone:whe};function hM(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function She({hue:e,saturation:t,lightness:i,alpha:r}){e/=360,t/=100,i/=100;let n=0,s=0,a=0;if(!t)n=s=a=i;else{const o=i<.5?i*(1+t):i+t-i*t,l=2*i-o;n=hM(l,o,e+1/3),s=hM(l,o,e),a=hM(l,o,e-1/3)}return{red:Math.round(n*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function rA(e,t){return i=>i>0?t:e}const nn=(e,t,i)=>e+(t-e)*i,dM=(e,t,i)=>{const r=e*e,n=i*(t*t-r)+r;return n<0?0:Math.sqrt(n)},_he=[YD,Yp,O0],Ehe=e=>_he.find(t=>t.test(e));function DN(e){const t=Ehe(e);if(!t)return!1;let i=t.parse(e);return t===O0&&(i=She(i)),i}const IN=(e,t)=>{const i=DN(e),r=DN(t);if(!i||!r)return rA(e,t);const n={...i};return s=>(n.red=dM(i.red,r.red,s),n.green=dM(i.green,r.green,s),n.blue=dM(i.blue,r.blue,s),n.alpha=nn(i.alpha,r.alpha,s),Yp.transform(n))},QD=new Set(["none","hidden"]);function Ahe(e,t){return QD.has(e)?i=>i<=0?e:t:i=>i>=1?t:e}function The(e,t){return i=>nn(e,t,i)}function j6(e){return typeof e=="number"?The:typeof e=="string"?k6(e)?rA:Bn.test(e)?IN:Phe:Array.isArray(e)?pK:typeof e=="object"?Bn.test(e)?IN:Che:rA}function pK(e,t){const i=[...e],r=i.length,n=e.map((s,a)=>j6(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)i[a]=n[a](s);return i}}function Che(e,t){const i={...e,...t},r={};for(const n in i)e[n]!==void 0&&t[n]!==void 0&&(r[n]=j6(e[n])(e[n],t[n]));return n=>{for(const s in r)i[s]=r[s](n);return i}}function Mhe(e,t){const i=[],r={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){const s=t.types[n],a=e.indexes[s][r[s]],o=e.values[a]??0;i[n]=o,r[s]++}return i}const Phe=(e,t)=>{const i=Tf.createTransformer(t),r=lb(e),n=lb(t);return r.indexes.var.length===n.indexes.var.length&&r.indexes.color.length===n.indexes.color.length&&r.indexes.number.length>=n.indexes.number.length?QD.has(e)&&!n.values.length||QD.has(t)&&!r.values.length?Ahe(e,t):nw(pK(Mhe(r,n),n.values),i):rA(e,t)};function mK(e,t,i){return typeof e=="number"&&typeof t=="number"&&typeof i=="number"?nn(e,t,i):j6(e)(e,t)}const Dhe=e=>{const t=({timestamp:i})=>e(i);return{start:(i=!0)=>an.update(t,i),stop:()=>Af(t),now:()=>qs.isProcessing?qs.timestamp:uo.now()}},gK=(e,t,i=10)=>{let r="";const n=Math.max(Math.round(t/i),2);for(let s=0;s<n;s++)r+=Math.round(e(s/(n-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},nA=2e4;function N6(e){let t=0;const i=50;let r=e.next(t);for(;!r.done&&t<nA;)t+=i,r=e.next(t);return t>=nA?1/0:t}function Ihe(e,t=100,i){const r=i({...e,keyframes:[0,t]}),n=Math.min(N6(r),nA);return{type:"keyframes",ease:s=>r.next(n*s).value/t,duration:du(n)}}const Rhe=5;function vK(e,t,i){const r=Math.max(t-Rhe,0);return KQ(i-e(r),t-r)}const pn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fM=.001;function Ohe({duration:e=pn.duration,bounce:t=pn.bounce,velocity:i=pn.velocity,mass:r=pn.mass}){let n,s,a=1-t;a=Fh(pn.minDamping,pn.maxDamping,a),e=Fh(pn.minDuration,pn.maxDuration,du(e)),a<1?(n=c=>{const u=c*a,h=u*e,f=u-i,m=KD(c,a),g=Math.exp(-h);return fM-f/m*g},s=c=>{const h=c*a*e,f=h*i+i,m=Math.pow(a,2)*Math.pow(c,2)*e,g=Math.exp(-h),v=KD(Math.pow(c,2),a);return(-n(c)+fM>0?-1:1)*((f-m)*g)/v}):(n=c=>{const u=Math.exp(-c*e),h=(c-i)*e+1;return-fM+u*h},s=c=>{const u=Math.exp(-c*e),h=(i-c)*(e*e);return u*h});const o=5/e,l=khe(n,s,o);if(e=hu(e),isNaN(l))return{stiffness:pn.stiffness,damping:pn.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:e}}}const Lhe=12;function khe(e,t,i){let r=i;for(let n=1;n<Lhe;n++)r=r-e(r)/t(r);return r}function KD(e,t){return e*Math.sqrt(1-t*t)}const zhe=["duration","bounce"],Bhe=["stiffness","damping","mass"];function RN(e,t){return t.some(i=>e[i]!==void 0)}function jhe(e){let t={velocity:pn.velocity,stiffness:pn.stiffness,damping:pn.damping,mass:pn.mass,isResolvedFromDuration:!1,...e};if(!RN(e,Bhe)&&RN(e,zhe))if(e.visualDuration){const i=e.visualDuration,r=2*Math.PI/(i*1.2),n=r*r,s=2*Fh(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:pn.mass,stiffness:n,damping:s}}else{const i=Ohe(e);t={...t,...i,mass:pn.mass},t.isResolvedFromDuration=!0}return t}function sA(e=pn.visualDuration,t=pn.bounce){const i=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:n}=i;const s=i.keyframes[0],a=i.keyframes[i.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:m}=jhe({...i,velocity:-du(i.velocity||0)}),g=f||0,v=c/(2*Math.sqrt(l*u)),x=a-s,b=du(Math.sqrt(l/u)),S=Math.abs(x)<5;r||(r=S?pn.restSpeed.granular:pn.restSpeed.default),n||(n=S?pn.restDelta.granular:pn.restDelta.default);let _;if(v<1){const M=KD(b,v);_=C=>{const D=Math.exp(-v*b*C);return a-D*((g+v*b*x)/M*Math.sin(M*C)+x*Math.cos(M*C))}}else if(v===1)_=M=>a-Math.exp(-b*M)*(x+(g+b*x)*M);else{const M=b*Math.sqrt(v*v-1);_=C=>{const D=Math.exp(-v*b*C),T=Math.min(M*C,300);return a-D*((g+v*b*x)*Math.sinh(T)+M*x*Math.cosh(T))/M}}const A={calculatedDuration:m&&h||null,next:M=>{const C=_(M);if(m)o.done=M>=h;else{let D=M===0?g:0;v<1&&(D=M===0?hu(g):vK(_,M,C));const T=Math.abs(D)<=r,R=Math.abs(a-C)<=n;o.done=T&&R}return o.value=o.done?a:C,o},toString:()=>{const M=Math.min(N6(A),nA),C=gK(D=>A.next(M*D).value,M,30);return M+"ms "+C},toTransition:()=>{}};return A}sA.applyToOptions=e=>{const t=Ihe(e,100,sA);return e.ease=t.ease,e.duration=hu(t.duration),e.type="keyframes",e};function ZD({keyframes:e,velocity:t=0,power:i=.8,timeConstant:r=325,bounceDamping:n=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const h=e[0],f={done:!1,value:h},m=T=>o!==void 0&&T<o||l!==void 0&&T>l,g=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let v=i*t;const x=h+v,b=a===void 0?x:a(x);b!==x&&(v=b-h);const S=T=>-v*Math.exp(-T/r),_=T=>b+S(T),A=T=>{const R=S(T),O=_(T);f.done=Math.abs(R)<=c,f.value=f.done?b:O};let M,C;const D=T=>{m(f.value)&&(M=T,C=sA({keyframes:[f.value,g(f.value)],velocity:vK(_,T,f.value),damping:n,stiffness:s,restDelta:c,restSpeed:u}))};return D(0),{calculatedDuration:null,next:T=>{let R=!1;return!C&&M===void 0&&(R=!0,A(T),D(T)),M!==void 0&&T>=M?C.next(T-M):(!R&&A(T),f)}}}function Nhe(e,t,i){const r=[],n=i||Hh.mix||mK,s=e.length-1;for(let a=0;a<s;a++){let o=n(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||yl:t;o=nw(l,o)}r.push(o)}return r}function Vhe(e,t,{clamp:i=!0,ease:r,mixer:n}={}){const s=e.length;if(P6(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Nhe(t,r,n),l=o.length,c=u=>{if(a&&u<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const f=ab(e[h],e[h+1],u);return o[h](f)};return i?u=>c(Fh(e[0],e[s-1],u)):c}function Uhe(e,t){const i=e[e.length-1];for(let r=1;r<=t;r++){const n=ab(0,t,r);e.push(nn(i,1,n))}}function Fhe(e){const t=[0];return Uhe(t,e.length-1),t}function Hhe(e,t){return e.map(i=>i*t)}function Ghe(e,t){return e.map(()=>t||sK).splice(0,e.length-1)}function Ex({duration:e=300,keyframes:t,times:i,ease:r="easeInOut"}){const n=the(r)?r.map(TN):TN(r),s={done:!1,value:t[0]},a=Hhe(i&&i.length===t.length?i:Fhe(t),e),o=Vhe(a,t,{ease:Array.isArray(n)?n:Ghe(t,n)});return{calculatedDuration:e,next:l=>(s.value=o(l),s.done=l>=e,s)}}const Whe=e=>e!==null;function V6(e,{repeat:t,repeatType:i="loop"},r,n=1){const s=e.filter(Whe),o=n<0||t&&i!=="loop"&&t%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const qhe={decay:ZD,inertia:ZD,tween:Ex,keyframes:Ex,spring:sA};function yK(e){typeof e.type=="string"&&(e.type=qhe[e.type])}class U6{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,i){return this.finished.then(t,i)}}const Xhe=e=>e/100;class F6 extends U6{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,n;const{motionValue:i}=this.options;i&&i.updatedAt!==uo.now()&&this.tick(uo.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(r=this.options).onStop)==null||n.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;yK(t);const{type:i=Ex,repeat:r=0,repeatDelay:n=0,repeatType:s,velocity:a=0}=t;let{keyframes:o}=t;const l=i||Ex;l!==Ex&&typeof o[0]!="number"&&(this.mixKeyframes=nw(Xhe,mK(o[0],o[1])),o=[0,100]);const c=l({...t,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=N6(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+n,this.totalDuration=this.resolvedDuration*(r+1)-n,this.generator=c}updateTime(t){const i=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(t,i=!1){const{generator:r,totalDuration:n,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:h,repeatType:f,repeatDelay:m,type:g,onUpdate:v,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-n/this.speed,this.startTime)),i?this.currentTime=t:this.updateTime(t);const b=this.currentTime-c*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?b<0:b>n;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let _=this.currentTime,A=r;if(h){const T=Math.min(this.currentTime,n)/o;let R=Math.floor(T),O=T%1;!O&&T>=1&&(O=1),O===1&&R--,R=Math.min(R,h+1),!!(R%2)&&(f==="reverse"?(O=1-O,m&&(O-=m/o)):f==="mirror"&&(A=a)),_=Fh(0,1,O)*o}const M=S?{done:!1,value:u[0]}:A.next(_);s&&(M.value=s(M.value));let{done:C}=M;!S&&l!==null&&(C=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return D&&g!==ZD&&(M.value=V6(u,this.options,x,this.speed)),v&&v(M.value),D&&this.finish(),M}then(t,i){return this.finished.then(t,i)}get duration(){return du(this.calculatedDuration)}get time(){return du(this.currentTime)}set time(t){var i;t=hu(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(i=this.driver)==null||i.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(uo.now());const i=this.playbackSpeed!==t;this.playbackSpeed=t,i&&(this.time=du(this.currentTime))}play(){var n,s;if(this.isStopped)return;const{driver:t=Dhe,startTime:i}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(s=(n=this.options).onPlay)==null||s.call(n);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=i??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(uo.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,i;this.notifyFinished(),this.teardown(),this.state="finished",(i=(t=this.options).onComplete)==null||i.call(t)}cancel(){var t,i;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(i=(t=this.options).onCancel)==null||i.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var i;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(i=this.driver)==null||i.stop(),t.observe(this)}}function Yhe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Qp=e=>e*180/Math.PI,$D=e=>{const t=Qp(Math.atan2(e[1],e[0]));return JD(t)},Qhe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:$D,rotateZ:$D,skewX:e=>Qp(Math.atan(e[1])),skewY:e=>Qp(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},JD=e=>(e=e%360,e<0&&(e+=360),e),ON=$D,LN=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),kN=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Khe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:LN,scaleY:kN,scale:e=>(LN(e)+kN(e))/2,rotateX:e=>JD(Qp(Math.atan2(e[6],e[5]))),rotateY:e=>JD(Qp(Math.atan2(-e[2],e[0]))),rotateZ:ON,rotate:ON,skewX:e=>Qp(Math.atan(e[4])),skewY:e=>Qp(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function eI(e){return e.includes("scale")?1:0}function tI(e,t){if(!e||e==="none")return eI(t);const i=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,n;if(i)r=Khe,n=i;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Qhe,n=o}if(!n)return eI(t);const s=r[t],a=n[1].split(",").map($he);return typeof s=="function"?s(a):a[s]}const Zhe=(e,t)=>{const{transform:i="none"}=getComputedStyle(e);return tI(i,t)};function $he(e){return parseFloat(e.trim())}const Yv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qv=new Set(Yv),zN=e=>e===Xv||e===ui,Jhe=new Set(["x","y","z"]),ede=Yv.filter(e=>!Jhe.has(e));function tde(e){const t=[];return ede.forEach(i=>{const r=e.getValue(i);r!==void 0&&(t.push([i,r.get()]),r.set(i.startsWith("scale")?1:0))}),t}const am={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>tI(t,"x"),y:(e,{transform:t})=>tI(t,"y")};am.translateX=am.x;am.translateY=am.y;const om=new Set;let iI=!1,rI=!1,nI=!1;function xK(){if(rI){const e=Array.from(om).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),i=new Map;t.forEach(r=>{const n=tde(r);n.length&&(i.set(r,n),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const n=i.get(r);n&&n.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}rI=!1,iI=!1,om.forEach(e=>e.complete(nI)),om.clear()}function bK(){om.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(rI=!0)})}function ide(){nI=!0,bK(),xK(),nI=!1}class H6{constructor(t,i,r,n,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=i,this.name=r,this.motionValue=n,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(om.add(this),iI||(iI=!0,an.read(bK),an.resolveKeyframes(xK))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:i,element:r,motionValue:n}=this;if(t[0]===null){const s=n==null?void 0:n.get(),a=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&i){const o=r.readValue(i,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),n&&s===void 0&&n.set(t[0])}Yhe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),om.delete(this)}cancel(){this.state==="scheduled"&&(om.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const rde=e=>e.startsWith("--");function nde(e,t,i){rde(t)?e.style.setProperty(t,i):e.style[t]=i}const sde=D6(()=>window.ScrollTimeline!==void 0),ade={};function ode(e,t){const i=D6(e);return()=>ade[t]??i()}const wK=ode(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),sx=([e,t,i,r])=>`cubic-bezier(${e}, ${t}, ${i}, ${r})`,BN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sx([0,.65,.55,1]),circOut:sx([.55,0,1,.45]),backIn:sx([.31,.01,.66,-.59]),backOut:sx([.33,1.53,.69,.99])};function SK(e,t){if(e)return typeof e=="function"?wK()?gK(e,t):"ease-out":aK(e)?sx(e):Array.isArray(e)?e.map(i=>SK(i,t)||BN.easeOut):BN[e]}function lde(e,t,i,{delay:r=0,duration:n=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[t]:i};l&&(u.offset=l);const h=SK(o,n);Array.isArray(h)&&(u.easing=h);const f={delay:r,duration:n,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),e.animate(u,f)}function _K(e){return typeof e=="function"&&"applyToOptions"in e}function cde({type:e,...t}){return _K(e)&&wK()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class ude extends U6{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:i,name:r,keyframes:n,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=t,P6(typeof t.type!="string");const c=cde(t);this.animation=lde(i,r,n,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=V6(n,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):nde(i,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,i;(i=(t=this.animation).finish)==null||i.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,i;this.isPseudoElement||(i=(t=this.animation).commitStyles)==null||i.call(t)}get duration(){var i,r;const t=((r=(i=this.animation.effect)==null?void 0:i.getComputedTiming)==null?void 0:r.call(i).duration)||0;return du(Number(t))}get time(){return du(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=hu(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:i}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&sde()?(this.animation.timeline=t,yl):i(this)}}const EK={anticipate:iK,backInOut:tK,circInOut:nK};function hde(e){return e in EK}function dde(e){typeof e.ease=="string"&&hde(e.ease)&&(e.ease=EK[e.ease])}const jN=10;class fde extends ude{constructor(t){dde(t),yK(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:i,onUpdate:r,onComplete:n,element:s,...a}=this.options;if(!i)return;if(t!==void 0){i.set(t);return}const o=new F6({...a,autoplay:!1}),l=hu(this.finishedTime??this.time);i.setWithVelocity(o.sample(l-jN).value,o.sample(l).value,jN),o.stop()}}const NN=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Tf.test(e)||e==="0")&&!e.startsWith("url("));function pde(e){const t=e[0];if(e.length===1)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}function mde(e,t,i,r){const n=e[0];if(n===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],a=NN(n,t),o=NN(s,t);return!a||!o?!1:pde(e)||(i==="spring"||_K(i))&&r}function G6(e){return YQ(e)&&"offsetHeight"in e}const gde=new Set(["opacity","clipPath","filter","transform"]),vde=D6(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yde(e){var c;const{motionValue:t,name:i,repeatDelay:r,repeatType:n,damping:s,type:a}=e;if(!G6((c=t==null?void 0:t.owner)==null?void 0:c.current))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return vde()&&i&&gde.has(i)&&(i!=="transform"||!l)&&!o&&!r&&n!=="mirror"&&s!==0&&a!=="inertia"}const xde=40;class bde extends U6{constructor({autoplay:t=!0,delay:i=0,type:r="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:u,...h}){var g;super(),this.stop=()=>{var v,x;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=uo.now();const f={autoplay:t,delay:i,type:r,repeat:n,repeatDelay:s,repeatType:a,name:l,motionValue:c,element:u,...h},m=(u==null?void 0:u.KeyframeResolver)||H6;this.keyframeResolver=new m(o,(v,x,b)=>this.onKeyframesResolved(v,x,f,!b),l,c,u),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,i,r,n){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=uo.now(),mde(t,s,a,o)||((Hh.instantAnimations||!l)&&(u==null||u(V6(t,r,i))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const f={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>xde?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...r,keyframes:t},m=!c&&yde(f)?new fde({...f,element:f.motionValue.owner.current}):new F6(f);m.finished.then(()=>this.notifyFinished()).catch(yl),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,i){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),ide()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const wde=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Sde(e){const t=wde.exec(e);if(!t)return[,];const[,i,r,n]=t;return[`--${i??r}`,n]}function AK(e,t,i=1){const[r,n]=Sde(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return XQ(a)?parseFloat(a):a}return k6(n)?AK(n,t,i+1):n}function W6(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const TK=new Set(["width","height","top","left","right","bottom",...Yv]),_de={test:e=>e==="auto",parse:e=>e},CK=e=>t=>t.test(e),MK=[Xv,ui,fu,Fd,phe,fhe,_de],VN=e=>MK.find(CK(e));function Ede(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||QQ(e):!0}const Ade=new Set(["brightness","contrast","saturate","opacity"]);function Tde(e){const[t,i]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=i.match(z6)||[];if(!r)return e;const n=i.replace(r,"");let s=Ade.has(t)?1:0;return r!==i&&(s*=100),t+"("+s+n+")"}const Cde=/\b([a-z-]*)\(.*?\)/gu,sI={...Tf,getAnimatableNone:e=>{const t=e.match(Cde);return t?t.map(Tde).join(" "):e}},UN={...Xv,transform:Math.round},Mde={rotate:Fd,rotateX:Fd,rotateY:Fd,rotateZ:Fd,scale:tS,scaleX:tS,scaleY:tS,scaleZ:tS,skew:Fd,skewX:Fd,skewY:Fd,distance:ui,translateX:ui,translateY:ui,translateZ:ui,x:ui,y:ui,z:ui,perspective:ui,transformPerspective:ui,opacity:ob,originX:MN,originY:MN,originZ:ui},q6={borderWidth:ui,borderTopWidth:ui,borderRightWidth:ui,borderBottomWidth:ui,borderLeftWidth:ui,borderRadius:ui,radius:ui,borderTopLeftRadius:ui,borderTopRightRadius:ui,borderBottomRightRadius:ui,borderBottomLeftRadius:ui,width:ui,maxWidth:ui,height:ui,maxHeight:ui,top:ui,right:ui,bottom:ui,left:ui,padding:ui,paddingTop:ui,paddingRight:ui,paddingBottom:ui,paddingLeft:ui,margin:ui,marginTop:ui,marginRight:ui,marginBottom:ui,marginLeft:ui,backgroundPositionX:ui,backgroundPositionY:ui,...Mde,zIndex:UN,fillOpacity:ob,strokeOpacity:ob,numOctaves:UN},Pde={...q6,color:Bn,backgroundColor:Bn,outlineColor:Bn,fill:Bn,stroke:Bn,borderColor:Bn,borderTopColor:Bn,borderRightColor:Bn,borderBottomColor:Bn,borderLeftColor:Bn,filter:sI,WebkitFilter:sI},PK=e=>Pde[e];function DK(e,t){let i=PK(e);return i!==sI&&(i=Tf),i.getAnimatableNone?i.getAnimatableNone(t):void 0}const Dde=new Set(["auto","none","0"]);function Ide(e,t,i){let r=0,n;for(;r<e.length&&!n;){const s=e[r];typeof s=="string"&&!Dde.has(s)&&lb(s).values.length&&(n=e[r]),r++}if(n&&i)for(const s of t)e[s]=DK(i,n)}class Rde extends H6{constructor(t,i,r,n,s){super(t,i,r,n,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:i,name:r}=this;if(!i||!i.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),k6(c))){const u=AK(c,i.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!TK.has(r)||t.length!==2)return;const[n,s]=t,a=VN(n),o=VN(s);if(a!==o)if(zN(a)&&zN(o))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else am[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:i}=this,r=[];for(let n=0;n<t.length;n++)(t[n]===null||Ede(t[n]))&&r.push(n);r.length&&Ide(t,r,i)}measureInitialState(){const{element:t,unresolvedKeyframes:i,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=am[r](t.measureViewportBox(),window.getComputedStyle(t.current)),i[0]=this.measuredOrigin;const n=i[i.length-1];n!==void 0&&t.getValue(r,n).jump(n,!1)}measureEndState(){var o;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const n=t.getValue(i);n&&n.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=am[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Ode(e,t,i){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const n=(i==null?void 0:i[e])??r.querySelectorAll(e);return n?Array.from(n):[]}return Array.from(e)}const IK=(e,t)=>t&&typeof e=="number"?t.transform(e):e,FN=30,Lde=e=>!isNaN(parseFloat(e));class kde{constructor(t,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,n=!0)=>{var a,o;const s=uo.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();n&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=i.owner}setCurrent(t){this.current=t,this.updatedAt=uo.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Lde(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,i){this.events[t]||(this.events[t]=new I6);const r=this.events[t].add(i);return t==="change"?()=>{r(),an.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,i){this.passiveEffect=t,this.stopPassiveEffect=i}set(t,i=!0){!i||!this.passiveEffect?this.updateAndNotify(t,i):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,i,r){this.set(i),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,i=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=uo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>FN)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,FN);return KQ(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(t){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=t(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,i;(t=this.dependents)==null||t.clear(),(i=this.events.destroy)==null||i.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hv(e,t){return new kde(e,t)}const{schedule:X6}=oK(queueMicrotask,!1),ql={x:!1,y:!1};function RK(){return ql.x||ql.y}function zde(e){return e==="x"||e==="y"?ql[e]?null:(ql[e]=!0,()=>{ql[e]=!1}):ql.x||ql.y?null:(ql.x=ql.y=!0,()=>{ql.x=ql.y=!1})}function OK(e,t){const i=Ode(e),r=new AbortController,n={passive:!0,...t,signal:r.signal};return[i,n,()=>r.abort()]}function HN(e){return!(e.pointerType==="touch"||RK())}function Bde(e,t,i={}){const[r,n,s]=OK(e,i),a=o=>{if(!HN(o))return;const{target:l}=o,c=t(l,o);if(typeof c!="function"||!l)return;const u=h=>{HN(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,n)};return r.forEach(o=>{o.addEventListener("pointerenter",a,n)}),s}const LK=(e,t)=>t?e===t?!0:LK(e,t.parentElement):!1,Y6=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,jde=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Nde(e){return jde.has(e.tagName)||e.tabIndex!==-1}const gE=new WeakSet;function GN(e){return t=>{t.key==="Enter"&&e(t)}}function pM(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Vde=(e,t)=>{const i=e.currentTarget;if(!i)return;const r=GN(()=>{if(gE.has(i))return;pM(i,"down");const n=GN(()=>{pM(i,"up")}),s=()=>pM(i,"cancel");i.addEventListener("keyup",n,t),i.addEventListener("blur",s,t)});i.addEventListener("keydown",r,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",r),t)};function WN(e){return Y6(e)&&!RK()}function Ude(e,t,i={}){const[r,n,s]=OK(e,i),a=o=>{const l=o.currentTarget;if(!WN(o))return;gE.add(l);const c=t(l,o),u=(m,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),gE.has(l)&&gE.delete(l),WN(m)&&typeof c=="function"&&c(m,{success:g})},h=m=>{u(m,l===window||l===document||i.useGlobalTarget||LK(l,m.target))},f=m=>{u(m,!1)};window.addEventListener("pointerup",h,n),window.addEventListener("pointercancel",f,n)};return r.forEach(o=>{(i.useGlobalTarget?window:o).addEventListener("pointerdown",a,n),G6(o)&&(o.addEventListener("focus",c=>Vde(c,n)),!Nde(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function kK(e){return YQ(e)&&"ownerSVGElement"in e}function Fde(e){return kK(e)&&e.tagName==="svg"}const ba=e=>!!(e&&e.getVelocity),Hde=[...MK,Bn,Tf],Gde=e=>Hde.find(CK(e)),Q6=J.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Wde extends J.Component{getSnapshotBeforeUpdate(t){const i=this.props.childRef.current;if(i&&t.isPresent&&!this.props.isPresent){const r=i.offsetParent,n=G6(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=i.offsetHeight||0,s.width=i.offsetWidth||0,s.top=i.offsetTop,s.left=i.offsetLeft,s.right=n-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function qde({children:e,isPresent:t,anchorX:i,root:r}){const n=J.useId(),s=J.useRef(null),a=J.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=J.useContext(Q6);return J.useInsertionEffect(()=>{const{width:l,height:c,top:u,left:h,right:f}=a.current;if(t||!s.current||!l||!c)return;const m=i==="left"?`left: ${h}`:`right: ${f}`;s.current.dataset.motionPopId=n;const g=document.createElement("style");o&&(g.nonce=o);const v=r??document.head;return v.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${m}px !important;
            top: ${u}px !important;
          }
        `),()=>{v.removeChild(g),v.contains(g)&&v.removeChild(g)}},[t]),E.jsx(Wde,{isPresent:t,childRef:s,sizeRef:a,children:J.cloneElement(e,{ref:s})})}const Xde=({children:e,initial:t,isPresent:i,onExitComplete:r,custom:n,presenceAffectsLayout:s,mode:a,anchorX:o,root:l})=>{const c=A6(Yde),u=J.useId();let h=!0,f=J.useMemo(()=>(h=!1,{id:u,initial:t,isPresent:i,custom:n,onExitComplete:m=>{c.set(m,!0);for(const g of c.values())if(!g)return;r&&r()},register:m=>(c.set(m,!1),()=>c.delete(m))}),[i,c,r]);return s&&h&&(f={...f}),J.useMemo(()=>{c.forEach((m,g)=>c.set(g,!1))},[i]),J.useEffect(()=>{!i&&!c.size&&r&&r()},[i]),a==="popLayout"&&(e=E.jsx(qde,{isPresent:i,anchorX:o,root:l,children:e})),E.jsx(e3.Provider,{value:f,children:e})};function Yde(){return new Map}function zK(e=!0){const t=J.useContext(e3);if(t===null)return[!0,null];const{isPresent:i,onExitComplete:r,register:n}=t,s=J.useId();J.useEffect(()=>{if(e)return n(s)},[e]);const a=J.useCallback(()=>e&&r&&r(s),[s,r,e]);return!i&&r?[!1,a]:[!0]}const iS=e=>e.key||"";function qN(e){const t=[];return J.Children.forEach(e,i=>{J.isValidElement(i)&&t.push(i)}),t}const aA=({children:e,custom:t,initial:i=!0,onExitComplete:r,presenceAffectsLayout:n=!0,mode:s="sync",propagate:a=!1,anchorX:o="left",root:l})=>{const[c,u]=zK(a),h=J.useMemo(()=>qN(e),[e]),f=a&&!c?[]:h.map(iS),m=J.useRef(!0),g=J.useRef(h),v=A6(()=>new Map),[x,b]=J.useState(h),[S,_]=J.useState(h);qQ(()=>{m.current=!1,g.current=h;for(let C=0;C<S.length;C++){const D=iS(S[C]);f.includes(D)?v.delete(D):v.get(D)!==!0&&v.set(D,!1)}},[S,f.length,f.join("-")]);const A=[];if(h!==x){let C=[...h];for(let D=0;D<S.length;D++){const T=S[D],R=iS(T);f.includes(R)||(C.splice(D,0,T),A.push(T))}return s==="wait"&&A.length&&(C=A),_(qN(C)),b(h),null}const{forceRender:M}=J.useContext(E6);return E.jsx(E.Fragment,{children:S.map(C=>{const D=iS(C),T=a&&!c?!1:h===S||f.includes(D),R=()=>{if(v.has(D))v.set(D,!0);else return;let O=!0;v.forEach(L=>{L||(O=!1)}),O&&(M==null||M(),_(g.current),a&&(u==null||u()),r&&r())};return E.jsx(Xde,{isPresent:T,initial:!m.current||i?void 0:!1,custom:t,presenceAffectsLayout:n,mode:s,root:l,onExitComplete:T?void 0:R,anchorX:o,children:C},D)})})},BK=J.createContext({strict:!1}),XN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dv={};for(const e in XN)dv[e]={isEnabled:t=>XN[e].some(i=>!!t[i])};function Qde(e){for(const t in e)dv[t]={...dv[t],...e[t]}}const Kde=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function oA(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Kde.has(e)}let jK=e=>!oA(e);function Zde(e){typeof e=="function"&&(jK=t=>t.startsWith("on")?!oA(t):e(t))}try{Zde(require("@emotion/is-prop-valid").default)}catch{}function $de(e,t,i){const r={};for(const n in e)n==="values"&&typeof e.values=="object"||(jK(n)||i===!0&&oA(n)||!t&&!oA(n)||e.draggable&&n.startsWith("onDrag"))&&(r[n]=e[n]);return r}function Jde(e){if(typeof Proxy>"u")return e;const t=new Map,i=(...r)=>e(...r);return new Proxy(i,{get:(r,n)=>n==="create"?e:(t.has(n)||t.set(n,e(n)),t.get(n))})}const t3=J.createContext({});function i3(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function cb(e){return typeof e=="string"||Array.isArray(e)}const K6=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Z6=["initial",...K6];function r3(e){return i3(e.animate)||Z6.some(t=>cb(e[t]))}function NK(e){return!!(r3(e)||e.variants)}function efe(e,t){if(r3(e)){const{initial:i,animate:r}=e;return{initial:i===!1||cb(i)?i:void 0,animate:cb(r)?r:void 0}}return e.inherit!==!1?t:{}}function tfe(e){const{initial:t,animate:i}=efe(e,J.useContext(t3));return J.useMemo(()=>({initial:t,animate:i}),[YN(t),YN(i)])}function YN(e){return Array.isArray(e)?e.join(" "):e}const ife=Symbol.for("motionComponentSymbol");function L0(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function rfe(e,t,i){return J.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),i&&(typeof i=="function"?i(r):L0(i)&&(i.current=r))},[t])}const $6=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nfe="framerAppearId",VK="data-"+$6(nfe),UK=J.createContext({});function sfe(e,t,i,r,n){var v,x;const{visualElement:s}=J.useContext(t3),a=J.useContext(BK),o=J.useContext(e3),l=J.useContext(Q6).reducedMotion,c=J.useRef(null);r=r||a.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:i,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,h=J.useContext(UK);u&&!u.projection&&n&&(u.type==="html"||u.type==="svg")&&afe(c.current,i,n,h);const f=J.useRef(!1);J.useInsertionEffect(()=>{u&&f.current&&u.update(i,o)});const m=i[VK],g=J.useRef(!!m&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,m))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,m)));return qQ(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),X6.render(u.render),g.current&&u.animationState&&u.animationState.animateChanges())}),J.useEffect(()=>{u&&(!g.current&&u.animationState&&u.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,m)}),g.current=!1))}),u}function afe(e,t,i,r){const{layoutId:n,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new i(e.latestValues,t["data-framer-portal-id"]?void 0:FK(e.parent)),e.projection.setOptions({layoutId:n,layout:s,alwaysMeasureLayout:!!a||o&&L0(o),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function FK(e){if(e)return e.options.allowProjection!==!1?e.projection:FK(e.parent)}function ofe({preloadedFeatures:e,createVisualElement:t,useRender:i,useVisualState:r,Component:n}){e&&Qde(e);function s(o,l){let c;const u={...J.useContext(Q6),...o,layoutId:lfe(o)},{isStatic:h}=u,f=tfe(o),m=r(o,h);if(!h&&T6){cfe();const g=ufe(u);c=g.MeasureLayout,f.visualElement=sfe(n,m,u,t,g.ProjectionNode)}return E.jsxs(t3.Provider,{value:f,children:[c&&f.visualElement?E.jsx(c,{visualElement:f.visualElement,...u}):null,i(n,o,rfe(m,f.visualElement,l),m,h,f.visualElement)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const a=J.forwardRef(s);return a[ife]=n,a}function lfe({layoutId:e}){const t=J.useContext(E6).id;return t&&e!==void 0?t+"-"+e:e}function cfe(e,t){J.useContext(BK).strict}function ufe(e){const{drag:t,layout:i}=dv;if(!t&&!i)return{};const r={...t,...i};return{MeasureLayout:t!=null&&t.isEnabled(e)||i!=null&&i.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const ub={};function hfe(e){for(const t in e)ub[t]=e[t],L6(t)&&(ub[t].isCSSVariable=!0)}function HK(e,{layout:t,layoutId:i}){return Qv.has(e)||e.startsWith("origin")||(t||i!==void 0)&&(!!ub[e]||e==="opacity")}const dfe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ffe=Yv.length;function pfe(e,t,i){let r="",n=!0;for(let s=0;s<ffe;s++){const a=Yv[s],o=e[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||i){const c=IK(o,q6[a]);if(!l){n=!1;const u=dfe[a]||a;r+=`${u}(${c}) `}i&&(t[a]=c)}}return r=r.trim(),i?r=i(t,n?"":r):n&&(r="none"),r}function J6(e,t,i){const{style:r,vars:n,transformOrigin:s}=e;let a=!1,o=!1;for(const l in t){const c=t[l];if(Qv.has(l)){a=!0;continue}else if(L6(l)){n[l]=c;continue}else{const u=IK(c,q6[l]);l.startsWith("origin")?(o=!0,s[l]=u):r[l]=u}}if(t.transform||(a||i?r.transform=pfe(t,e.transform,i):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const eL=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function GK(e,t,i){for(const r in t)!ba(t[r])&&!HK(r,i)&&(e[r]=t[r])}function mfe({transformTemplate:e},t){return J.useMemo(()=>{const i=eL();return J6(i,t,e),Object.assign({},i.vars,i.style)},[t])}function gfe(e,t){const i=e.style||{},r={};return GK(r,i,e),Object.assign(r,mfe(e,t)),r}function vfe(e,t){const i={},r=gfe(e,t);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=r,i}const yfe={offset:"stroke-dashoffset",array:"stroke-dasharray"},xfe={offset:"strokeDashoffset",array:"strokeDasharray"};function bfe(e,t,i=1,r=0,n=!0){e.pathLength=1;const s=n?yfe:xfe;e[s.offset]=ui.transform(-r);const a=ui.transform(t),o=ui.transform(i);e[s.array]=`${a} ${o}`}function WK(e,{attrX:t,attrY:i,attrScale:r,pathLength:n,pathSpacing:s=1,pathOffset:a=0,...o},l,c,u){if(J6(e,o,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),i!==void 0&&(h.y=i),r!==void 0&&(h.scale=r),n!==void 0&&bfe(h,n,s,a,!1)}const qK=()=>({...eL(),attrs:{}}),XK=e=>typeof e=="string"&&e.toLowerCase()==="svg";function wfe(e,t,i,r){const n=J.useMemo(()=>{const s=qK();return WK(s,t,XK(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};GK(s,e.style,e),n.style={...s,...n.style}}return n}const Sfe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tL(e){return typeof e!="string"||e.includes("-")?!1:!!(Sfe.indexOf(e)>-1||/[A-Z]/u.test(e))}function _fe(e=!1){return(i,r,n,{latestValues:s},a)=>{const l=(tL(i)?wfe:vfe)(r,s,a,i),c=$de(r,typeof i=="string",e),u=i!==J.Fragment?{...c,...l,ref:n}:{},{children:h}=r,f=J.useMemo(()=>ba(h)?h.get():h,[h]);return J.createElement(i,{...u,children:f})}}function QN(e){const t=[{},{}];return e==null||e.values.forEach((i,r)=>{t[0][r]=i.get(),t[1][r]=i.getVelocity()}),t}function iL(e,t,i,r){if(typeof t=="function"){const[n,s]=QN(r);t=t(i!==void 0?i:e.custom,n,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[n,s]=QN(r);t=t(i!==void 0?i:e.custom,n,s)}return t}function vE(e){return ba(e)?e.get():e}function Efe({scrapeMotionValuesFromProps:e,createRenderState:t},i,r,n){return{latestValues:Afe(i,r,n,e),renderState:t()}}const YK=e=>(t,i)=>{const r=J.useContext(t3),n=J.useContext(e3),s=()=>Efe(e,t,r,n);return i?s():A6(s)};function Afe(e,t,i,r){const n={},s=r(e,{});for(const f in s)n[f]=vE(s[f]);let{initial:a,animate:o}=e;const l=r3(e),c=NK(e);t&&c&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let u=i?i.initial===!1:!1;u=u||a===!1;const h=u?o:a;if(h&&typeof h!="boolean"&&!i3(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const g=iL(e,f[m]);if(g){const{transitionEnd:v,transition:x,...b}=g;for(const S in b){let _=b[S];if(Array.isArray(_)){const A=u?_.length-1:0;_=_[A]}_!==null&&(n[S]=_)}for(const S in v)n[S]=v[S]}}}return n}function rL(e,t,i){var s;const{style:r}=e,n={};for(const a in r)(ba(r[a])||t.style&&ba(t.style[a])||HK(a,e)||((s=i==null?void 0:i.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(n[a]=r[a]);return n}const Tfe={useVisualState:YK({scrapeMotionValuesFromProps:rL,createRenderState:eL})};function QK(e,t,i){const r=rL(e,t,i);for(const n in e)if(ba(e[n])||ba(t[n])){const s=Yv.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=e[n]}return r}const Cfe={useVisualState:YK({scrapeMotionValuesFromProps:QK,createRenderState:qK})};function Mfe(e,t){return function(r,{forwardMotionProps:n}={forwardMotionProps:!1}){const a={...tL(r)?Cfe:Tfe,preloadedFeatures:e,useRender:_fe(n),createVisualElement:t,Component:r};return ofe(a)}}function hb(e,t,i){const r=e.getProps();return iL(r,t,i!==void 0?i:r.custom,e)}const aI=e=>Array.isArray(e);function Pfe(e,t,i){e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,hv(i))}function Dfe(e){return aI(e)?e[e.length-1]||0:e}function Ife(e,t){const i=hb(e,t);let{transitionEnd:r={},transition:n={},...s}=i||{};s={...s,...r};for(const a in s){const o=Dfe(s[a]);Pfe(e,a,o)}}function Rfe(e){return!!(ba(e)&&e.add)}function oI(e,t){const i=e.getValue("willChange");if(Rfe(i))return i.add(t);if(!i&&Hh.WillChange){const r=new Hh.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function KK(e){return e.props[VK]}const Ofe=e=>e!==null;function Lfe(e,{repeat:t,repeatType:i="loop"},r){const n=e.filter(Ofe),s=t&&i!=="loop"&&t%2===1?0:n.length-1;return n[s]}const kfe={type:"spring",stiffness:500,damping:25,restSpeed:10},zfe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Bfe={type:"keyframes",duration:.8},jfe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Nfe=(e,{keyframes:t})=>t.length>2?Bfe:Qv.has(e)?e.startsWith("scale")?zfe(t[1]):kfe:jfe;function Vfe({when:e,delay:t,delayChildren:i,staggerChildren:r,staggerDirection:n,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const nL=(e,t,i,r={},n,s)=>a=>{const o=W6(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-hu(l);const u={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:f=>{t.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:n};Vfe(o)||Object.assign(u,Nfe(e,u)),u.duration&&(u.duration=hu(u.duration)),u.repeatDelay&&(u.repeatDelay=hu(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),(Hh.instantAnimations||Hh.skipAnimations)&&(h=!0,u.duration=0,u.delay=0),u.allowFlatten=!o.type&&!o.ease,h&&!s&&t.get()!==void 0){const f=Lfe(u.keyframes,o);if(f!==void 0){an.update(()=>{u.onUpdate(f),u.onComplete()});return}}return o.isSync?new F6(u):new bde(u)};function Ufe({protectedKeys:e,needsAnimating:t},i){const r=e.hasOwnProperty(i)&&t[i]!==!0;return t[i]=!1,r}function ZK(e,t,{delay:i=0,transitionOverride:r,type:n}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);const l=[],c=n&&e.animationState&&e.animationState.getState()[n];for(const u in o){const h=e.getValue(u,e.latestValues[u]??null),f=o[u];if(f===void 0||c&&Ufe(c,u))continue;const m={delay:i,...W6(s||{},u)},g=h.get();if(g!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===g&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const b=KK(e);if(b){const S=window.MotionHandoffAnimation(b,u,an);S!==null&&(m.startTime=S,v=!0)}}oI(e,u),h.start(nL(u,h,f,e.shouldReduceMotion&&TK.has(u)?{type:!1}:m,e,v));const x=h.animation;x&&l.push(x)}return a&&Promise.all(l).then(()=>{an.update(()=>{a&&Ife(e,a)})}),l}function lI(e,t,i={}){var l;const r=hb(e,t,i.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:n=e.getDefaultTransition()||{}}=r||{};i.transitionOverride&&(n=i.transitionOverride);const s=r?()=>Promise.all(ZK(e,r,i)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=n;return Ffe(e,t,u+c,h,f,i)}:()=>Promise.resolve(),{when:o}=n;if(o){const[c,u]=o==="beforeChildren"?[s,a]:[a,s];return c().then(()=>u())}else return Promise.all([s(),a(i.delay)])}function Ffe(e,t,i=0,r=0,n=1,s){const a=[],o=(e.variantChildren.size-1)*r,l=n===1?(c=0)=>c*r:(c=0)=>o-c*r;return Array.from(e.variantChildren).sort(Hfe).forEach((c,u)=>{c.notify("AnimationStart",t),a.push(lI(c,t,{...s,delay:i+l(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(a)}function Hfe(e,t){return e.sortNodePosition(t)}function Gfe(e,t,i={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const n=t.map(s=>lI(e,s,i));r=Promise.all(n)}else if(typeof t=="string")r=lI(e,t,i);else{const n=typeof t=="function"?hb(e,t,i.custom):t;r=Promise.all(ZK(e,n,i))}return r.then(()=>{e.notify("AnimationComplete",t)})}function $K(e,t){if(!Array.isArray(t))return!1;const i=t.length;if(i!==e.length)return!1;for(let r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0}const Wfe=Z6.length;function JK(e){if(!e)return;if(!e.isControllingVariants){const i=e.parent?JK(e.parent)||{}:{};return e.props.initial!==void 0&&(i.initial=e.props.initial),i}const t={};for(let i=0;i<Wfe;i++){const r=Z6[i],n=e.props[r];(cb(n)||n===!1)&&(t[r]=n)}return t}const qfe=[...K6].reverse(),Xfe=K6.length;function Yfe(e){return t=>Promise.all(t.map(({animation:i,options:r})=>Gfe(e,i,r)))}function Qfe(e){let t=Yfe(e),i=KN(),r=!0;const n=l=>(c,u)=>{var f;const h=hb(e,u,l==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:g,...v}=h;c={...c,...v,...g}}return c};function s(l){t=l(e)}function a(l){const{props:c}=e,u=JK(e.parent)||{},h=[],f=new Set;let m={},g=1/0;for(let x=0;x<Xfe;x++){const b=qfe[x],S=i[b],_=c[b]!==void 0?c[b]:u[b],A=cb(_),M=b===l?S.isActive:null;M===!1&&(g=x);let C=_===u[b]&&_!==c[b]&&A;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),S.protectedKeys={...m},!S.isActive&&M===null||!_&&!S.prevProp||i3(_)||typeof _=="boolean")continue;const D=Kfe(S.prevProp,_);let T=D||b===l&&S.isActive&&!C&&A||x>g&&A,R=!1;const O=Array.isArray(_)?_:[_];let L=O.reduce(n(b),{});M===!1&&(L={});const{prevResolvedValues:k={}}=S,B={...k,...L},V=Y=>{T=!0,f.has(Y)&&(R=!0,f.delete(Y)),S.needsAnimating[Y]=!0;const X=e.getValue(Y);X&&(X.liveStyle=!1)};for(const Y in B){const X=L[Y],ne=k[Y];if(m.hasOwnProperty(Y))continue;let F=!1;aI(X)&&aI(ne)?F=!$K(X,ne):F=X!==ne,F?X!=null?V(Y):f.add(Y):X!==void 0&&f.has(Y)?V(Y):S.protectedKeys[Y]=!0}S.prevProp=_,S.prevResolvedValues=L,S.isActive&&(m={...m,...L}),r&&e.blockInitialAnimation&&(T=!1),T&&(!(C&&D)||R)&&h.push(...O.map(Y=>({animation:Y,options:{type:b}})))}if(f.size){const x={};if(typeof c.initial!="boolean"){const b=hb(e,Array.isArray(c.initial)?c.initial[0]:c.initial);b&&b.transition&&(x.transition=b.transition)}f.forEach(b=>{const S=e.getBaseTarget(b),_=e.getValue(b);_&&(_.liveStyle=!0),x[b]=S??null}),h.push({animation:x})}let v=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(h):Promise.resolve()}function o(l,c){var h;if(i[l].isActive===c)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(l,c)}),i[l].isActive=c;const u=a(l);for(const f in i)i[f].protectedKeys={};return u}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>i,reset:()=>{i=KN(),r=!0}}}function Kfe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!$K(t,e):!1}function Ep(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KN(){return{animate:Ep(!0),whileInView:Ep(),whileHover:Ep(),whileTap:Ep(),whileDrag:Ep(),whileFocus:Ep(),exit:Ep()}}class Uf{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Zfe extends Uf{constructor(t){super(t),t.animationState||(t.animationState=Qfe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();i3(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:i}=this.node.prevProps||{};t!==i&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let $fe=0;class Jfe extends Uf{constructor(){super(...arguments),this.id=$fe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const n=this.node.animationState.setActive("exit",!t);i&&!t&&n.then(()=>{i(this.id)})}mount(){const{register:t,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const epe={animation:{Feature:Zfe},exit:{Feature:Jfe}};function db(e,t,i,r={passive:!0}){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i)}function ow(e){return{point:{x:e.pageX,y:e.pageY}}}const tpe=e=>t=>Y6(t)&&e(t,ow(t));function Ax(e,t,i,r){return db(e,t,tpe(i),r)}function eZ({top:e,left:t,right:i,bottom:r}){return{x:{min:t,max:i},y:{min:e,max:r}}}function ipe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function rpe(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:r.y,right:r.x}}const tZ=1e-4,npe=1-tZ,spe=1+tZ,iZ=.01,ape=0-iZ,ope=0+iZ;function Ha(e){return e.max-e.min}function lpe(e,t,i){return Math.abs(e-t)<=i}function ZN(e,t,i,r=.5){e.origin=r,e.originPoint=nn(t.min,t.max,e.origin),e.scale=Ha(i)/Ha(t),e.translate=nn(i.min,i.max,e.origin)-e.originPoint,(e.scale>=npe&&e.scale<=spe||isNaN(e.scale))&&(e.scale=1),(e.translate>=ape&&e.translate<=ope||isNaN(e.translate))&&(e.translate=0)}function Tx(e,t,i,r){ZN(e.x,t.x,i.x,r?r.originX:void 0),ZN(e.y,t.y,i.y,r?r.originY:void 0)}function $N(e,t,i){e.min=i.min+t.min,e.max=e.min+Ha(t)}function cpe(e,t,i){$N(e.x,t.x,i.x),$N(e.y,t.y,i.y)}function JN(e,t,i){e.min=t.min-i.min,e.max=e.min+Ha(t)}function Cx(e,t,i){JN(e.x,t.x,i.x),JN(e.y,t.y,i.y)}const eV=()=>({translate:0,scale:1,origin:0,originPoint:0}),k0=()=>({x:eV(),y:eV()}),tV=()=>({min:0,max:0}),En=()=>({x:tV(),y:tV()});function ll(e){return[e("x"),e("y")]}function mM(e){return e===void 0||e===1}function cI({scale:e,scaleX:t,scaleY:i}){return!mM(e)||!mM(t)||!mM(i)}function kp(e){return cI(e)||rZ(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function rZ(e){return iV(e.x)||iV(e.y)}function iV(e){return e&&e!=="0%"}function lA(e,t,i){const r=e-i,n=t*r;return i+n}function rV(e,t,i,r,n){return n!==void 0&&(e=lA(e,n,r)),lA(e,i,r)+t}function uI(e,t=0,i=1,r,n){e.min=rV(e.min,t,i,r,n),e.max=rV(e.max,t,i,r,n)}function nZ(e,{x:t,y:i}){uI(e.x,t.translate,t.scale,t.originPoint),uI(e.y,i.translate,i.scale,i.originPoint)}const nV=.999999999999,sV=1.0000000000001;function upe(e,t,i,r=!1){const n=i.length;if(!n)return;t.x=t.y=1;let s,a;for(let o=0;o<n;o++){s=i[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&B0(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,nZ(e,a)),r&&kp(s.latestValues)&&B0(e,s.latestValues))}t.x<sV&&t.x>nV&&(t.x=1),t.y<sV&&t.y>nV&&(t.y=1)}function z0(e,t){e.min=e.min+t,e.max=e.max+t}function aV(e,t,i,r,n=.5){const s=nn(e.min,e.max,n);uI(e,t,i,s,r)}function B0(e,t){aV(e.x,t.x,t.scaleX,t.scale,t.originX),aV(e.y,t.y,t.scaleY,t.scale,t.originY)}function sZ(e,t){return eZ(rpe(e.getBoundingClientRect(),t))}function hpe(e,t,i){const r=sZ(e,i),{scroll:n}=t;return n&&(z0(r.x,n.offset.x),z0(r.y,n.offset.y)),r}const aZ=({current:e})=>e?e.ownerDocument.defaultView:null,oV=(e,t)=>Math.abs(e-t);function dpe(e,t){const i=oV(e.x,t.x),r=oV(e.y,t.y);return Math.sqrt(i**2+r**2)}class oZ{constructor(t,i,{transformPagePoint:r,contextWindow:n,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=vM(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=dpe(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:g}=h,{timestamp:v}=qs;this.history.push({...g,timestamp:v});const{onStart:x,onMove:b}=this.handlers;f||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=gM(f,this.transformPagePoint),an.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=vM(h.type==="pointercancel"?this.lastMoveEventInfo:gM(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,x),g&&g(h,x)},!Y6(t))return;this.dragSnapToOrigin=s,this.handlers=i,this.transformPagePoint=r,this.contextWindow=n||window;const a=ow(t),o=gM(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=qs;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=i;u&&u(t,vM(o,this.history)),this.removeListeners=nw(Ax(this.contextWindow,"pointermove",this.handlePointerMove),Ax(this.contextWindow,"pointerup",this.handlePointerUp),Ax(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Af(this.updatePoint)}}function gM(e,t){return t?{point:t(e.point)}:e}function lV(e,t){return{x:e.x-t.x,y:e.y-t.y}}function vM({point:e},t){return{point:e,delta:lV(e,lZ(t)),offset:lV(e,fpe(t)),velocity:ppe(t,.1)}}function fpe(e){return e[0]}function lZ(e){return e[e.length-1]}function ppe(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,r=null;const n=lZ(e);for(;i>=0&&(r=e[i],!(n.timestamp-r.timestamp>hu(t)));)i--;if(!r)return{x:0,y:0};const s=du(n.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(n.x-r.x)/s,y:(n.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function mpe(e,{min:t,max:i},r){return t!==void 0&&e<t?e=r?nn(t,e,r.min):Math.max(e,t):i!==void 0&&e>i&&(e=r?nn(i,e,r.max):Math.min(e,i)),e}function cV(e,t,i){return{min:t!==void 0?e.min+t:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function gpe(e,{top:t,left:i,bottom:r,right:n}){return{x:cV(e.x,i,n),y:cV(e.y,t,r)}}function uV(e,t){let i=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,r]=[r,i]),{min:i,max:r}}function vpe(e,t){return{x:uV(e.x,t.x),y:uV(e.y,t.y)}}function ype(e,t){let i=.5;const r=Ha(e),n=Ha(t);return n>r?i=ab(t.min,t.max-r,e.min):r>n&&(i=ab(e.min,e.max-n,t.min)),Fh(0,1,i)}function xpe(e,t){const i={};return t.min!==void 0&&(i.min=t.min-e.min),t.max!==void 0&&(i.max=t.max-e.min),i}const hI=.35;function bpe(e=hI){return e===!1?e=0:e===!0&&(e=hI),{x:hV(e,"left","right"),y:hV(e,"top","bottom")}}function hV(e,t,i){return{min:dV(e,t),max:dV(e,i)}}function dV(e,t){return typeof e=="number"?e:e[t]||0}const wpe=new WeakMap;class Spe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=En(),this.visualElement=t}start(t,{snapToCursor:i=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const n=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(ow(u).point)},s=(u,h)=>{const{drag:f,dragPropagation:m,onDragStart:g}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zde(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ll(x=>{let b=this.getAxisMotionValue(x).get()||0;if(fu.test(b)){const{projection:S}=this.visualElement;if(S&&S.layout){const _=S.layout.layoutBox[x];_&&(b=Ha(_)*(parseFloat(b)/100))}}this.originPoint[x]=b}),g&&an.postRender(()=>g(u,h)),oI(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(u,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:g,onDrag:v}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:x}=h;if(m&&this.currentDirection===null){this.currentDirection=_pe(x),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),v&&v(u,h)},o=(u,h)=>this.stop(u,h),l=()=>ll(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new oZ(t,{onSessionStart:n,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:aZ(this.visualElement)})}stop(t,i){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:n}=i;this.startAnimation(n);const{onDragEnd:s}=this.getProps();s&&an.postRender(()=>s(t,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:i}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(t,i,r){const{drag:n}=this.getProps();if(!r||!rS(t,n,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=mpe(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,n=this.constraints;t&&L0(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=gpe(r.layoutBox,t):this.constraints=!1,this.elastic=bpe(i),n!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ll(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=xpe(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!L0(t))return!1;const r=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const s=hpe(r,n.root,this.visualElement.getTransformPagePoint());let a=vpe(n.layout.layoutBox,s);if(i){const o=i(ipe(a));this.hasMutatedConstraints=!!o,o&&(a=eZ(o))}return a}startAnimation(t){const{drag:i,dragMomentum:r,dragElastic:n,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=ll(u=>{if(!rS(u,i,this.currentDirection))return;let h=l&&l[u]||{};a&&(h={min:0,max:0});const f=n?200:1e6,m=n?40:1e7,g={type:"inertia",velocity:r?t[u]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(o)}startAxisValueAnimation(t,i){const r=this.getAxisMotionValue(t);return oI(this.visualElement,t),r.start(nL(t,r,0,i,this.visualElement,!1))}stopAnimation(){ll(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ll(t=>{var i;return(i=this.getAxisMotionValue(t).animation)==null?void 0:i.pause()})}getAnimationState(t){var i;return(i=this.getAxisMotionValue(t).animation)==null?void 0:i.state}getAxisMotionValue(t){const i=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),n=r[i];return n||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ll(i=>{const{drag:r}=this.getProps();if(!rS(i,r,this.currentDirection))return;const{projection:n}=this.visualElement,s=this.getAxisMotionValue(i);if(n&&n.layout){const{min:a,max:o}=n.layout.layoutBox[i];s.set(t[i]-nn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:i}=this.getProps(),{projection:r}=this.visualElement;if(!L0(i)||!r||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};ll(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();n[a]=ype({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ll(a=>{if(!rS(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(nn(l,c,n[a]))})}addListeners(){if(!this.visualElement.current)return;wpe.set(this.visualElement,this);const t=this.visualElement.current,i=Ax(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();L0(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,s=n.addEventListener("measure",r);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),an.read(r);const a=db(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ll(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),i(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:s=!1,dragElastic:a=hI,dragMomentum:o=!0}=t;return{...t,drag:i,dragDirectionLock:r,dragPropagation:n,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function rS(e,t,i){return(t===!0||t===e)&&(i===null||i===e)}function _pe(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}class Epe extends Uf{constructor(t){super(t),this.removeGroupControls=yl,this.removeListeners=yl,this.controls=new Spe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yl}unmount(){this.removeGroupControls(),this.removeListeners()}}const fV=e=>(t,i)=>{e&&an.postRender(()=>e(t,i))};class Ape extends Uf{constructor(){super(...arguments),this.removePointerDownListener=yl}onPointerDown(t){this.session=new oZ(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aZ(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:i,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:fV(t),onStart:fV(i),onMove:r,onEnd:(s,a)=>{delete this.session,n&&an.postRender(()=>n(s,a))}}}mount(){this.removePointerDownListener=Ax(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yE={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pV(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const x1={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ui.test(e))e=parseFloat(e);else return e;const i=pV(e,t.target.x),r=pV(e,t.target.y);return`${i}% ${r}%`}},Tpe={correct:(e,{treeScale:t,projectionDelta:i})=>{const r=e,n=Tf.parse(e);if(n.length>5)return r;const s=Tf.createTransformer(e),a=typeof n[0]!="number"?1:0,o=i.x.scale*t.x,l=i.y.scale*t.y;n[0+a]/=o,n[1+a]/=l;const c=nn(o,l,.5);return typeof n[2+a]=="number"&&(n[2+a]/=c),typeof n[3+a]=="number"&&(n[3+a]/=c),s(n)}};class Cpe extends J.Component{componentDidMount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:r,layoutId:n}=this.props,{projection:s}=t;hfe(Mpe),s&&(i.group&&i.group.add(s),r&&r.register&&n&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),yE.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:i,visualElement:r,drag:n,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,n||t.layoutDependency!==i||i===void 0||t.isPresent!==s?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||an.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),X6.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:r}=this.props,{projection:n}=t;n&&(n.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function cZ(e){const[t,i]=zK(),r=J.useContext(E6);return E.jsx(Cpe,{...e,layoutGroup:r,switchLayoutGroup:J.useContext(UK),isPresent:t,safeToRemove:i})}const Mpe={borderRadius:{...x1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:x1,borderTopRightRadius:x1,borderBottomLeftRadius:x1,borderBottomRightRadius:x1,boxShadow:Tpe};function Ppe(e,t,i){const r=ba(e)?e:hv(e);return r.start(nL("",r,t,i)),r.animation}const Dpe=(e,t)=>e.depth-t.depth;class Ipe{constructor(){this.children=[],this.isDirty=!1}add(t){C6(this.children,t),this.isDirty=!0}remove(t){M6(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Dpe),this.isDirty=!1,this.children.forEach(t)}}function Rpe(e,t){const i=uo.now(),r=({timestamp:n})=>{const s=n-i;s>=t&&(Af(r),e(s-t))};return an.setup(r,!0),()=>Af(r)}const uZ=["TopLeft","TopRight","BottomLeft","BottomRight"],Ope=uZ.length,mV=e=>typeof e=="string"?parseFloat(e):e,gV=e=>typeof e=="number"||ui.test(e);function Lpe(e,t,i,r,n,s){n?(e.opacity=nn(0,i.opacity??1,kpe(r)),e.opacityExit=nn(t.opacity??1,0,zpe(r))):s&&(e.opacity=nn(t.opacity??1,i.opacity??1,r));for(let a=0;a<Ope;a++){const o=`border${uZ[a]}Radius`;let l=vV(t,o),c=vV(i,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||gV(l)===gV(c)?(e[o]=Math.max(nn(mV(l),mV(c),r),0),(fu.test(c)||fu.test(l))&&(e[o]+="%")):e[o]=c}(t.rotate||i.rotate)&&(e.rotate=nn(t.rotate||0,i.rotate||0,r))}function vV(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const kpe=hZ(0,.5,rK),zpe=hZ(.5,.95,yl);function hZ(e,t,i){return r=>r<e?0:r>t?1:i(ab(e,t,r))}function yV(e,t){e.min=t.min,e.max=t.max}function el(e,t){yV(e.x,t.x),yV(e.y,t.y)}function xV(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function bV(e,t,i,r,n){return e-=t,e=lA(e,1/i,r),n!==void 0&&(e=lA(e,1/n,r)),e}function Bpe(e,t=0,i=1,r=.5,n,s=e,a=e){if(fu.test(t)&&(t=parseFloat(t),t=nn(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=nn(s.min,s.max,r);e===s&&(o-=t),e.min=bV(e.min,t,i,o,n),e.max=bV(e.max,t,i,o,n)}function wV(e,t,[i,r,n],s,a){Bpe(e,t[i],t[r],t[n],t.scale,s,a)}const jpe=["x","scaleX","originX"],Npe=["y","scaleY","originY"];function SV(e,t,i,r){wV(e.x,t,jpe,i?i.x:void 0,r?r.x:void 0),wV(e.y,t,Npe,i?i.y:void 0,r?r.y:void 0)}function _V(e){return e.translate===0&&e.scale===1}function dZ(e){return _V(e.x)&&_V(e.y)}function EV(e,t){return e.min===t.min&&e.max===t.max}function Vpe(e,t){return EV(e.x,t.x)&&EV(e.y,t.y)}function AV(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function fZ(e,t){return AV(e.x,t.x)&&AV(e.y,t.y)}function TV(e){return Ha(e.x)/Ha(e.y)}function CV(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Upe{constructor(){this.members=[]}add(t){C6(this.members,t),t.scheduleRender()}remove(t){if(M6(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(t){const i=this.members.findIndex(n=>t===n);if(i===0)return!1;let r;for(let n=i;n>=0;n--){const s=this.members[n];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,i){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,i&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:i,resumingFrom:r}=t;i.onExitComplete&&i.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Fpe(e,t,i){let r="";const n=e.x.translate/t.x,s=e.y.translate/t.y,a=(i==null?void 0:i.z)||0;if((n||s||a)&&(r=`translate3d(${n}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),i){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:m,skewY:g}=i;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),g&&(r+=`skewY(${g}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const yM=["","X","Y","Z"],Hpe={visibility:"hidden"},Gpe=1e3;let Wpe=0;function xM(e,t,i,r){const{latestValues:n}=t;n[e]&&(i[e]=n[e],t.setStaticValue(e,0),r&&(r[e]=0))}function pZ(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const i=KK(t);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:n,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(i,"transform",an,!(n||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&pZ(r)}function mZ({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:r,resetTransform:n}){return class{constructor(a={},o=t==null?void 0:t()){this.id=Wpe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ype),this.nodes.forEach($pe),this.nodes.forEach(Jpe),this.nodes.forEach(Qpe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ipe)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new I6),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=kK(a)&&!Fde(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let u;const h=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=Rpe(h,250),yE.hasAnimatedSinceResize&&(yE.hasAnimatedSinceResize=!1,this.nodes.forEach(DV))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||nme,{onLayoutAnimationStart:v,onLayoutAnimationComplete:x}=c.getProps(),b=!this.targetLayout||!fZ(this.targetLayout,m),S=!h&&f;if(this.options.layoutRoot||this.resumeFrom||S||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...W6(g,"layout"),onPlay:v,onComplete:x};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(u,S)}else h||DV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Af(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eme),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&pZ(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(MV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(PV);return}this.isUpdating||this.nodes.forEach(PV),this.animationCommitId=this.animationId,this.isUpdating=!1,this.nodes.forEach(Zpe),this.nodes.forEach(qpe),this.nodes.forEach(Xpe),this.clearAllSnapshots();const o=uo.now();qs.delta=Fh(0,1e3/60,o-qs.timestamp),qs.timestamp=o,qs.isProcessing=!0,cM.update.process(qs),cM.preRender.process(qs),cM.render.process(qs),qs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,X6.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Kpe),this.sharedNodes.forEach(tme)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,an.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){an.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ha(this.snapshot.measuredBox.x)&&!Ha(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=En(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!n)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!dZ(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||kp(this.latestValues)||u)&&(n(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),sme(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return En();const o=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(ame))){const{scroll:u}=this.root;u&&(z0(o.x,u.offset.x),z0(o.y,u.offset.y))}return o}removeElementScroll(a){var l;const o=En();if(el(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&el(o,a),z0(o.x,h.offset.x),z0(o.y,h.offset.y))}return o}applyTransform(a,o=!1){const l=En();el(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&B0(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),kp(u.latestValues)&&B0(l,u.latestValues)}return kp(this.latestValues)&&B0(l,this.latestValues),l}removeTransform(a){const o=En();el(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!kp(c.latestValues))continue;cI(c.latestValues)&&c.updateSnapshot();const u=En(),h=c.measurePageBox();el(u,h),SV(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return kp(this.latestValues)&&SV(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=qs.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),Cx(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),el(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=En(),this.targetWithTransforms=En()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cpe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):el(this.target,this.layout.layoutBox),nZ(this.target,this.targetDelta)):el(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),Cx(this.relativeTargetOrigin,this.target,m.target),el(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||cI(this.parent.latestValues)||rZ(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===qs.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;el(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;upe(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=En());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xV(this.prevProjectionDelta.x,this.projectionDelta.x),xV(this.prevProjectionDelta.y,this.projectionDelta.y)),Tx(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!CV(this.projectionDelta.x,this.prevProjectionDelta.x)||!CV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=k0(),this.projectionDelta=k0(),this.projectionDeltaWithTransform=k0()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=k0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=En(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=m!==g,x=this.getStack(),b=!x||x.members.length<=1,S=!!(v&&!b&&this.options.crossfade===!0&&!this.path.some(rme));this.animationProgress=0;let _;this.mixTargetDelta=A=>{const M=A/1e3;IV(h.x,a.x,M),IV(h.y,a.y,M),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cx(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ime(this.relativeTarget,this.relativeTargetOrigin,f,M),_&&Vpe(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=En()),el(_,this.relativeTarget)),v&&(this.animationValues=u,Lpe(u,c,this.latestValues,M,S,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,c;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(Af(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=an.update(()=>{yE.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=hv(0)),this.currentAnimation=Ppe(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Gpe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&gZ(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||En();const h=Ha(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const f=Ha(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}el(o,l),B0(o,u),Tx(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Upe),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&xM("z",a,c,this.animationValues);for(let u=0;u<yM.length;u++)xM(`rotate${yM[u]}`,a,c,this.animationValues),xM(`skew${yM[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Hpe;const o={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=vE(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=vE(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!kp(this.latestValues)&&(m.transform=l?l({},""):"none",this.hasProjected=!1),m}const u=c.animationValues||c.latestValues;this.applyTransformsToTarget(),o.transform=Fpe(this.projectionDeltaWithTransform,this.treeScale,u),l&&(o.transform=l(u,o.transform));const{x:h,y:f}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const m in ub){if(u[m]===void 0)continue;const{correct:g,applyTo:v,isCSSVariable:x}=ub[m],b=o.transform==="none"?u[m]:g(u[m],c);if(v){const S=v.length;for(let _=0;_<S;_++)o[v[_]]=b}else x?this.options.visualElement.renderState.vars[m]=b:o[m]=b}return this.options.layoutId&&(o.pointerEvents=c===this?vE(a==null?void 0:a.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(MV),this.root.sharedNodes.clear()}}}function qpe(e){e.updateLayout()}function Xpe(e){var i;const t=((i=e.resumeFrom)==null?void 0:i.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?ll(h=>{const f=a?t.measuredBox[h]:t.layoutBox[h],m=Ha(f);f.min=r[h].min,f.max=f.min+m}):gZ(s,t.layoutBox,r)&&ll(h=>{const f=a?t.measuredBox[h]:t.layoutBox[h],m=Ha(r[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const o=k0();Tx(o,r,t.layoutBox);const l=k0();a?Tx(l,e.applyTransform(n,!0),t.measuredBox):Tx(l,r,t.layoutBox);const c=!dZ(o);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const g=En();Cx(g,t.layoutBox,f.layoutBox);const v=En();Cx(v,r,m.layoutBox),fZ(g,v)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=g,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Ype(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Qpe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Kpe(e){e.clearSnapshot()}function MV(e){e.clearMeasurements()}function PV(e){e.isLayoutDirty=!1}function Zpe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function DV(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function $pe(e){e.resolveTargetDelta()}function Jpe(e){e.calcProjection()}function eme(e){e.resetSkewAndRotation()}function tme(e){e.removeLeadSnapshot()}function IV(e,t,i){e.translate=nn(t.translate,0,i),e.scale=nn(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function RV(e,t,i,r){e.min=nn(t.min,i.min,r),e.max=nn(t.max,i.max,r)}function ime(e,t,i,r){RV(e.x,t.x,i.x,r),RV(e.y,t.y,i.y,r)}function rme(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const nme={duration:.45,ease:[.4,0,.1,1]},OV=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),LV=OV("applewebkit/")&&!OV("chrome/")?Math.round:yl;function kV(e){e.min=LV(e.min),e.max=LV(e.max)}function sme(e){kV(e.x),kV(e.y)}function gZ(e,t,i){return e==="position"||e==="preserve-aspect"&&!lpe(TV(t),TV(i),.2)}function ame(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const ome=mZ({attachResizeListener:(e,t)=>db(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bM={current:void 0},vZ=mZ({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!bM.current){const e=new ome({});e.mount(window),e.setOptions({layoutScroll:!0}),bM.current=e}return bM.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),lme={pan:{Feature:Ape},drag:{Feature:Epe,ProjectionNode:vZ,MeasureLayout:cZ}};function zV(e,t,i){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",i==="Start");const n="onHover"+i,s=r[n];s&&an.postRender(()=>s(t,ow(t)))}class cme extends Uf{mount(){const{current:t}=this.node;t&&(this.unmount=Bde(t,(i,r)=>(zV(this.node,r,"Start"),n=>zV(this.node,n,"End"))))}unmount(){}}class ume extends Uf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nw(db(this.node.current,"focus",()=>this.onFocus()),db(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function BV(e,t,i){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",i==="Start");const n="onTap"+(i==="End"?"":i),s=r[n];s&&an.postRender(()=>s(t,ow(t)))}class hme extends Uf{mount(){const{current:t}=this.node;t&&(this.unmount=Ude(t,(i,r)=>(BV(this.node,r,"Start"),(n,{success:s})=>BV(this.node,n,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const dI=new WeakMap,wM=new WeakMap,dme=e=>{const t=dI.get(e.target);t&&t(e)},fme=e=>{e.forEach(dme)};function pme({root:e,...t}){const i=e||document;wM.has(i)||wM.set(i,{});const r=wM.get(i),n=JSON.stringify(t);return r[n]||(r[n]=new IntersectionObserver(fme,{root:e,...t})),r[n]}function mme(e,t,i){const r=pme(t);return dI.set(e,i),r.observe(e),()=>{dI.delete(e),r.unobserve(e)}}const gme={some:0,all:1};class vme extends Uf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:i,margin:r,amount:n="some",once:s}=t,a={root:i?i.current:void 0,rootMargin:r,threshold:typeof n=="number"?n:gme[n]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return mme(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:i}=this.node;["amount","margin","root"].some(yme(t,i))&&this.startObserver()}unmount(){}}function yme({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}const xme={inView:{Feature:vme},tap:{Feature:hme},focus:{Feature:ume},hover:{Feature:cme}},bme={layout:{ProjectionNode:vZ,MeasureLayout:cZ}},fI={current:null},yZ={current:!1};function wme(){if(yZ.current=!0,!!T6)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>fI.current=e.matches;e.addListener(t),t()}else fI.current=!1}const Sme=new WeakMap;function _me(e,t,i){for(const r in t){const n=t[r],s=i[r];if(ba(n))e.addValue(r,n);else if(ba(s))e.addValue(r,hv(n,{owner:e}));else if(s!==n)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(n):a.hasAnimated||a.set(n)}else{const a=e.getStaticValue(r);e.addValue(r,hv(a!==void 0?a:n,{owner:e}))}}for(const r in i)t[r]===void 0&&e.removeValue(r);return t}const jV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Eme{scrapeMotionValuesFromProps(t,i,r){return{}}constructor({parent:t,props:i,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=H6,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=uo.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,an.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=i.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=i,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=r3(i),this.isVariantNode=NK(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(i,{},this);for(const f in h){const m=h[f];l[f]!==void 0&&ba(m)&&m.set(l[f],!1)}}mount(t){this.current=t,Sme.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,r)=>this.bindToMotionValue(r,i)),yZ.current||wme(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fI.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Af(this.notifyUpdate),Af(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const i=this.features[t];i&&(i.unmount(),i.isMounted=!1)}this.current=null}bindToMotionValue(t,i){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Qv.has(t);r&&this.onBindTransform&&this.onBindTransform();const n=i.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&an.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=i.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,i)),this.valueSubscriptions.set(t,()=>{n(),s(),a&&a(),i.owner&&i.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in dv){const i=dv[t];if(!i)continue;const{isEnabled:r,Feature:n}=i;if(!this.features[t]&&n&&r(this.props)&&(this.features[t]=new n(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):En()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,i){this.latestValues[t]=i}update(t,i){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let r=0;r<jV.length;r++){const n=jV[r];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const s="on"+n,a=t[s];a&&(this.propEventSubscriptions[n]=this.on(n,a))}this.prevMotionValues=_me(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(t),()=>i.variantChildren.delete(t)}addValue(t,i){const r=this.values.get(t);i!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,i),this.values.set(t,i),this.latestValues[t]=i.get())}removeValue(t){this.values.delete(t);const i=this.valueSubscriptions.get(t);i&&(i(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,i){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&i!==void 0&&(r=hv(i===null?void 0:i,{owner:this}),this.addValue(t,r)),r}readValue(t,i){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(XQ(r)||QQ(r))?r=parseFloat(r):!Gde(r)&&Tf.test(i)&&(r=DK(t,i)),this.setBaseTarget(t,ba(r)?r.get():r)),ba(r)?r.get():r}setBaseTarget(t,i){this.baseTarget[t]=i}getBaseTarget(t){var s;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=iL(this.props,i,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[t])}if(i&&r!==void 0)return r;const n=this.getBaseTargetFromProps(this.props,t);return n!==void 0&&!ba(n)?n:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,i){return this.events[t]||(this.events[t]=new I6),this.events[t].add(i)}notify(t,...i){this.events[t]&&this.events[t].notify(...i)}}class xZ extends Eme{constructor(){super(...arguments),this.KeyframeResolver=Rde}sortInstanceNodePosition(t,i){return t.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(t,i){return t.style?t.style[i]:void 0}removeValueFromRenderState(t,{vars:i,style:r}){delete i[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ba(t)&&(this.childSubscription=t.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function bZ(e,{style:t,vars:i},r,n){Object.assign(e.style,t,n&&n.getProjectionStyles(r));for(const s in i)e.style.setProperty(s,i[s])}function Ame(e){return window.getComputedStyle(e)}class Tme extends xZ{constructor(){super(...arguments),this.type="html",this.renderInstance=bZ}readValueFromInstance(t,i){var r;if(Qv.has(i))return(r=this.projection)!=null&&r.isProjecting?eI(i):Zhe(t,i);{const n=Ame(t),s=(L6(i)?n.getPropertyValue(i):n[i])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:i}){return sZ(t,i)}build(t,i,r){J6(t,i,r.transformTemplate)}scrapeMotionValuesFromProps(t,i,r){return rL(t,i,r)}}const wZ=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Cme(e,t,i,r){bZ(e,t,void 0,r);for(const n in t.attrs)e.setAttribute(wZ.has(n)?n:$6(n),t.attrs[n])}class Mme extends xZ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=En}getBaseTargetFromProps(t,i){return t[i]}readValueFromInstance(t,i){if(Qv.has(i)){const r=PK(i);return r&&r.default||0}return i=wZ.has(i)?i:$6(i),t.getAttribute(i)}scrapeMotionValuesFromProps(t,i,r){return QK(t,i,r)}build(t,i,r){WK(t,i,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,i,r,n){Cme(t,i,r,n)}mount(t){this.isSVGTag=XK(t.tagName),super.mount(t)}}const Pme=(e,t)=>tL(e)?new Mme(t):new Tme(t,{allowProjection:e!==J.Fragment}),Dme=Mfe({...epe,...xme,...lme,...bme},Pme),G=Jde(Dme);var ho=function(){return ho=Object.assign||function(t){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},ho.apply(this,arguments)};function fb(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var Fr="-ms-",Mx="-moz-",dr="-webkit-",SZ="comm",n3="rule",sL="decl",Ime="@import",_Z="@keyframes",Rme="@layer",EZ=Math.abs,aL=String.fromCharCode,pI=Object.assign;function Ome(e,t){return Es(e,0)^45?(((t<<2^Es(e,0))<<2^Es(e,1))<<2^Es(e,2))<<2^Es(e,3):0}function AZ(e){return e.trim()}function bh(e,t){return(e=t.exec(e))?e[0]:e}function Ai(e,t,i){return e.replace(t,i)}function xE(e,t,i){return e.indexOf(t,i)}function Es(e,t){return e.charCodeAt(t)|0}function fv(e,t,i){return e.slice(t,i)}function Jc(e){return e.length}function TZ(e){return e.length}function ax(e,t){return t.push(e),e}function Lme(e,t){return e.map(t).join("")}function NV(e,t){return e.filter(function(i){return!bh(i,t)})}var s3=1,pv=1,CZ=0,Sl=0,Nn=0,Kv="";function a3(e,t,i,r,n,s,a,o){return{value:e,root:t,parent:i,type:r,props:n,children:s,line:s3,column:pv,length:a,return:"",siblings:o}}function Hd(e,t){return pI(a3("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function kg(e){for(;e.root;)e=Hd(e.root,{children:[e]});ax(e,e.siblings)}function kme(){return Nn}function zme(){return Nn=Sl>0?Es(Kv,--Sl):0,pv--,Nn===10&&(pv=1,s3--),Nn}function ec(){return Nn=Sl<CZ?Es(Kv,Sl++):0,pv++,Nn===10&&(pv=1,s3++),Nn}function lm(){return Es(Kv,Sl)}function bE(){return Sl}function o3(e,t){return fv(Kv,e,t)}function mI(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Bme(e){return s3=pv=1,CZ=Jc(Kv=e),Sl=0,[]}function jme(e){return Kv="",e}function SM(e){return AZ(o3(Sl-1,gI(e===91?e+2:e===40?e+1:e)))}function Nme(e){for(;(Nn=lm())&&Nn<33;)ec();return mI(e)>2||mI(Nn)>3?"":" "}function Vme(e,t){for(;--t&&ec()&&!(Nn<48||Nn>102||Nn>57&&Nn<65||Nn>70&&Nn<97););return o3(e,bE()+(t<6&&lm()==32&&ec()==32))}function gI(e){for(;ec();)switch(Nn){case e:return Sl;case 34:case 39:e!==34&&e!==39&&gI(Nn);break;case 40:e===41&&gI(e);break;case 92:ec();break}return Sl}function Ume(e,t){for(;ec()&&e+Nn!==57;)if(e+Nn===84&&lm()===47)break;return"/*"+o3(t,Sl-1)+"*"+aL(e===47?e:ec())}function Fme(e){for(;!mI(lm());)ec();return o3(e,Sl)}function Hme(e){return jme(wE("",null,null,null,[""],e=Bme(e),0,[0],e))}function wE(e,t,i,r,n,s,a,o,l){for(var c=0,u=0,h=a,f=0,m=0,g=0,v=1,x=1,b=1,S=0,_="",A=n,M=s,C=r,D=_;x;)switch(g=S,S=ec()){case 40:if(g!=108&&Es(D,h-1)==58){xE(D+=Ai(SM(S),"&","&\f"),"&\f",EZ(c?o[c-1]:0))!=-1&&(b=-1);break}case 34:case 39:case 91:D+=SM(S);break;case 9:case 10:case 13:case 32:D+=Nme(g);break;case 92:D+=Vme(bE()-1,7);continue;case 47:switch(lm()){case 42:case 47:ax(Gme(Ume(ec(),bE()),t,i,l),l);break;default:D+="/"}break;case 123*v:o[c++]=Jc(D)*b;case 125*v:case 59:case 0:switch(S){case 0:case 125:x=0;case 59+u:b==-1&&(D=Ai(D,/\f/g,"")),m>0&&Jc(D)-h&&ax(m>32?UV(D+";",r,i,h-1,l):UV(Ai(D," ","")+";",r,i,h-2,l),l);break;case 59:D+=";";default:if(ax(C=VV(D,t,i,c,u,n,o,_,A=[],M=[],h,s),s),S===123)if(u===0)wE(D,t,C,C,A,s,h,o,M);else switch(f===99&&Es(D,3)===110?100:f){case 100:case 108:case 109:case 115:wE(e,C,C,r&&ax(VV(e,C,C,0,0,n,o,_,n,A=[],h,M),M),n,M,h,o,r?A:M);break;default:wE(D,C,C,C,[""],M,0,o,M)}}c=u=m=0,v=b=1,_=D="",h=a;break;case 58:h=1+Jc(D),m=g;default:if(v<1){if(S==123)--v;else if(S==125&&v++==0&&zme()==125)continue}switch(D+=aL(S),S*v){case 38:b=u>0?1:(D+="\f",-1);break;case 44:o[c++]=(Jc(D)-1)*b,b=1;break;case 64:lm()===45&&(D+=SM(ec())),f=lm(),u=h=Jc(_=D+=Fme(bE())),S++;break;case 45:g===45&&Jc(D)==2&&(v=0)}}return s}function VV(e,t,i,r,n,s,a,o,l,c,u,h){for(var f=n-1,m=n===0?s:[""],g=TZ(m),v=0,x=0,b=0;v<r;++v)for(var S=0,_=fv(e,f+1,f=EZ(x=a[v])),A=e;S<g;++S)(A=AZ(x>0?m[S]+" "+_:Ai(_,/&\f/g,m[S])))&&(l[b++]=A);return a3(e,t,i,n===0?n3:o,l,c,u,h)}function Gme(e,t,i,r){return a3(e,t,i,SZ,aL(kme()),fv(e,2,-2),0,r)}function UV(e,t,i,r,n){return a3(e,t,i,sL,fv(e,0,r),fv(e,r+1,-1),r,n)}function MZ(e,t,i){switch(Ome(e,t)){case 5103:return dr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return dr+e+e;case 4789:return Mx+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return dr+e+Mx+e+Fr+e+e;case 5936:switch(Es(e,t+11)){case 114:return dr+e+Fr+Ai(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return dr+e+Fr+Ai(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return dr+e+Fr+Ai(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return dr+e+Fr+e+e;case 6165:return dr+e+Fr+"flex-"+e+e;case 5187:return dr+e+Ai(e,/(\w+).+(:[^]+)/,dr+"box-$1$2"+Fr+"flex-$1$2")+e;case 5443:return dr+e+Fr+"flex-item-"+Ai(e,/flex-|-self/g,"")+(bh(e,/flex-|baseline/)?"":Fr+"grid-row-"+Ai(e,/flex-|-self/g,""))+e;case 4675:return dr+e+Fr+"flex-line-pack"+Ai(e,/align-content|flex-|-self/g,"")+e;case 5548:return dr+e+Fr+Ai(e,"shrink","negative")+e;case 5292:return dr+e+Fr+Ai(e,"basis","preferred-size")+e;case 6060:return dr+"box-"+Ai(e,"-grow","")+dr+e+Fr+Ai(e,"grow","positive")+e;case 4554:return dr+Ai(e,/([^-])(transform)/g,"$1"+dr+"$2")+e;case 6187:return Ai(Ai(Ai(e,/(zoom-|grab)/,dr+"$1"),/(image-set)/,dr+"$1"),e,"")+e;case 5495:case 3959:return Ai(e,/(image-set\([^]*)/,dr+"$1$`$1");case 4968:return Ai(Ai(e,/(.+:)(flex-)?(.*)/,dr+"box-pack:$3"+Fr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+dr+e+e;case 4200:if(!bh(e,/flex-|baseline/))return Fr+"grid-column-align"+fv(e,t)+e;break;case 2592:case 3360:return Fr+Ai(e,"template-","")+e;case 4384:case 3616:return i&&i.some(function(r,n){return t=n,bh(r.props,/grid-\w+-end/)})?~xE(e+(i=i[t].value),"span",0)?e:Fr+Ai(e,"-start","")+e+Fr+"grid-row-span:"+(~xE(i,"span",0)?bh(i,/\d+/):+bh(i,/\d+/)-+bh(e,/\d+/))+";":Fr+Ai(e,"-start","")+e;case 4896:case 4128:return i&&i.some(function(r){return bh(r.props,/grid-\w+-start/)})?e:Fr+Ai(Ai(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Ai(e,/(.+)-inline(.+)/,dr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Jc(e)-1-t>6)switch(Es(e,t+1)){case 109:if(Es(e,t+4)!==45)break;case 102:return Ai(e,/(.+:)(.+)-([^]+)/,"$1"+dr+"$2-$3$1"+Mx+(Es(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~xE(e,"stretch",0)?MZ(Ai(e,"stretch","fill-available"),t,i)+e:e}break;case 5152:case 5920:return Ai(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,n,s,a,o,l,c){return Fr+n+":"+s+c+(a?Fr+n+"-span:"+(o?l:+l-+s)+c:"")+e});case 4949:if(Es(e,t+6)===121)return Ai(e,":",":"+dr)+e;break;case 6444:switch(Es(e,Es(e,14)===45?18:11)){case 120:return Ai(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+dr+(Es(e,14)===45?"inline-":"")+"box$3$1"+dr+"$2$3$1"+Fr+"$2box$3")+e;case 100:return Ai(e,":",":"+Fr)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Ai(e,"scroll-","scroll-snap-")+e}return e}function cA(e,t){for(var i="",r=0;r<e.length;r++)i+=t(e[r],r,e,t)||"";return i}function Wme(e,t,i,r){switch(e.type){case Rme:if(e.children.length)break;case Ime:case sL:return e.return=e.return||e.value;case SZ:return"";case _Z:return e.return=e.value+"{"+cA(e.children,r)+"}";case n3:if(!Jc(e.value=e.props.join(",")))return""}return Jc(i=cA(e.children,r))?e.return=e.value+"{"+i+"}":""}function qme(e){var t=TZ(e);return function(i,r,n,s){for(var a="",o=0;o<t;o++)a+=e[o](i,r,n,s)||"";return a}}function Xme(e){return function(t){t.root||(t=t.return)&&e(t)}}function Yme(e,t,i,r){if(e.length>-1&&!e.return)switch(e.type){case sL:e.return=MZ(e.value,e.length,i);return;case _Z:return cA([Hd(e,{value:Ai(e.value,"@","@"+dr)})],r);case n3:if(e.length)return Lme(i=e.props,function(n){switch(bh(n,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":kg(Hd(e,{props:[Ai(n,/:(read-\w+)/,":"+Mx+"$1")]})),kg(Hd(e,{props:[n]})),pI(e,{props:NV(i,r)});break;case"::placeholder":kg(Hd(e,{props:[Ai(n,/:(plac\w+)/,":"+dr+"input-$1")]})),kg(Hd(e,{props:[Ai(n,/:(plac\w+)/,":"+Mx+"$1")]})),kg(Hd(e,{props:[Ai(n,/:(plac\w+)/,Fr+"input-$1")]})),kg(Hd(e,{props:[n]})),pI(e,{props:NV(i,r)});break}return""})}}var Qme={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Oo={},mv=typeof process<"u"&&Oo!==void 0&&(Oo.REACT_APP_SC_ATTR||Oo.SC_ATTR)||"data-styled",PZ="active",DZ="data-styled-version",l3="6.1.19",oL=`/*!sc*/
`,uA=typeof window<"u"&&typeof document<"u",Kme=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Oo!==void 0&&Oo.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Oo.REACT_APP_SC_DISABLE_SPEEDY!==""?Oo.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Oo.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Oo!==void 0&&Oo.SC_DISABLE_SPEEDY!==void 0&&Oo.SC_DISABLE_SPEEDY!==""&&Oo.SC_DISABLE_SPEEDY!=="false"&&Oo.SC_DISABLE_SPEEDY),c3=Object.freeze([]),gv=Object.freeze({});function Zme(e,t,i){return i===void 0&&(i=gv),e.theme!==i.theme&&e.theme||t||i.theme}var IZ=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),$me=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Jme=/(^-|-$)/g;function FV(e){return e.replace($me,"-").replace(Jme,"")}var ege=/(a)(d)/gi,nS=52,HV=function(e){return String.fromCharCode(e+(e>25?39:97))};function vI(e){var t,i="";for(t=Math.abs(e);t>nS;t=t/nS|0)i=HV(t%nS)+i;return(HV(t%nS)+i).replace(ege,"$1-$2")}var _M,RZ=5381,j0=function(e,t){for(var i=t.length;i;)e=33*e^t.charCodeAt(--i);return e},OZ=function(e){return j0(RZ,e)};function LZ(e){return vI(OZ(e)>>>0)}function tge(e){return e.displayName||e.name||"Component"}function EM(e){return typeof e=="string"&&!0}var kZ=typeof Symbol=="function"&&Symbol.for,zZ=kZ?Symbol.for("react.memo"):60115,ige=kZ?Symbol.for("react.forward_ref"):60112,rge={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},nge={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},BZ={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sge=((_M={})[ige]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},_M[zZ]=BZ,_M);function GV(e){return("type"in(t=e)&&t.type.$$typeof)===zZ?BZ:"$$typeof"in e?sge[e.$$typeof]:rge;var t}var age=Object.defineProperty,oge=Object.getOwnPropertyNames,WV=Object.getOwnPropertySymbols,lge=Object.getOwnPropertyDescriptor,cge=Object.getPrototypeOf,qV=Object.prototype;function jZ(e,t,i){if(typeof t!="string"){if(qV){var r=cge(t);r&&r!==qV&&jZ(e,r,i)}var n=oge(t);WV&&(n=n.concat(WV(t)));for(var s=GV(e),a=GV(t),o=0;o<n.length;++o){var l=n[o];if(!(l in nge||i&&i[l]||a&&l in a||s&&l in s)){var c=lge(t,l);try{age(e,l,c)}catch{}}}}return e}function vv(e){return typeof e=="function"}function lL(e){return typeof e=="object"&&"styledComponentId"in e}function Kp(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function yI(e,t){if(e.length===0)return"";for(var i=e[0],r=1;r<e.length;r++)i+=e[r];return i}function pb(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function xI(e,t,i){if(i===void 0&&(i=!1),!i&&!pb(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=xI(e[r],t[r]);else if(pb(t))for(var r in t)e[r]=xI(e[r],t[r]);return e}function cL(e,t){Object.defineProperty(e,"toString",{value:t})}function lw(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var uge=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var i=0,r=0;r<t;r++)i+=this.groupSizes[r];return i},e.prototype.insertRules=function(t,i){if(t>=this.groupSizes.length){for(var r=this.groupSizes,n=r.length,s=n;t>=s;)if((s<<=1)<0)throw lw(16,"".concat(t));this.groupSizes=new Uint32Array(s),this.groupSizes.set(r),this.length=s;for(var a=n;a<s;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(t+1),l=(a=0,i.length);a<l;a++)this.tag.insertRule(o,i[a])&&(this.groupSizes[t]++,o++)},e.prototype.clearGroup=function(t){if(t<this.length){var i=this.groupSizes[t],r=this.indexOfGroup(t),n=r+i;this.groupSizes[t]=0;for(var s=r;s<n;s++)this.tag.deleteRule(r)}},e.prototype.getGroup=function(t){var i="";if(t>=this.length||this.groupSizes[t]===0)return i;for(var r=this.groupSizes[t],n=this.indexOfGroup(t),s=n+r,a=n;a<s;a++)i+="".concat(this.tag.getRule(a)).concat(oL);return i},e}(),SE=new Map,hA=new Map,_E=1,sS=function(e){if(SE.has(e))return SE.get(e);for(;hA.has(_E);)_E++;var t=_E++;return SE.set(e,t),hA.set(t,e),t},hge=function(e,t){_E=t+1,SE.set(e,t),hA.set(t,e)},dge="style[".concat(mv,"][").concat(DZ,'="').concat(l3,'"]'),fge=new RegExp("^".concat(mv,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),pge=function(e,t,i){for(var r,n=i.split(","),s=0,a=n.length;s<a;s++)(r=n[s])&&e.registerName(t,r)},mge=function(e,t){for(var i,r=((i=t.textContent)!==null&&i!==void 0?i:"").split(oL),n=[],s=0,a=r.length;s<a;s++){var o=r[s].trim();if(o){var l=o.match(fge);if(l){var c=0|parseInt(l[1],10),u=l[2];c!==0&&(hge(u,c),pge(e,u,l[3]),e.getTag().insertRules(c,n)),n.length=0}else n.push(o)}}},XV=function(e){for(var t=document.querySelectorAll(dge),i=0,r=t.length;i<r;i++){var n=t[i];n&&n.getAttribute(mv)!==PZ&&(mge(e,n),n.parentNode&&n.parentNode.removeChild(n))}};function gge(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var NZ=function(e){var t=document.head,i=e||t,r=document.createElement("style"),n=function(o){var l=Array.from(o.querySelectorAll("style[".concat(mv,"]")));return l[l.length-1]}(i),s=n!==void 0?n.nextSibling:null;r.setAttribute(mv,PZ),r.setAttribute(DZ,l3);var a=gge();return a&&r.setAttribute("nonce",a),i.insertBefore(r,s),r},vge=function(){function e(t){this.element=NZ(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var r=document.styleSheets,n=0,s=r.length;n<s;n++){var a=r[n];if(a.ownerNode===i)return a}throw lw(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,i){try{return this.sheet.insertRule(i,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var i=this.sheet.cssRules[t];return i&&i.cssText?i.cssText:""},e}(),yge=function(){function e(t){this.element=NZ(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,i){if(t<=this.length&&t>=0){var r=document.createTextNode(i);return this.element.insertBefore(r,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),xge=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,i){return t<=this.length&&(this.rules.splice(t,0,i),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),YV=uA,bge={isServer:!uA,useCSSOMInjection:!Kme},VZ=function(){function e(t,i,r){t===void 0&&(t=gv),i===void 0&&(i={});var n=this;this.options=ho(ho({},bge),t),this.gs=i,this.names=new Map(r),this.server=!!t.isServer,!this.server&&uA&&YV&&(YV=!1,XV(this)),cL(this,function(){return function(s){for(var a=s.getTag(),o=a.length,l="",c=function(h){var f=function(b){return hA.get(b)}(h);if(f===void 0)return"continue";var m=s.names.get(f),g=a.getGroup(h);if(m===void 0||!m.size||g.length===0)return"continue";var v="".concat(mv,".g").concat(h,'[id="').concat(f,'"]'),x="";m!==void 0&&m.forEach(function(b){b.length>0&&(x+="".concat(b,","))}),l+="".concat(g).concat(v,'{content:"').concat(x,'"}').concat(oL)},u=0;u<o;u++)c(u);return l}(n)})}return e.registerId=function(t){return sS(t)},e.prototype.rehydrate=function(){!this.server&&uA&&XV(this)},e.prototype.reconstructWithOptions=function(t,i){return i===void 0&&(i=!0),new e(ho(ho({},this.options),t),this.gs,i&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(i){var r=i.useCSSOMInjection,n=i.target;return i.isServer?new xge(n):r?new vge(n):new yge(n)}(this.options),new uge(t)));var t},e.prototype.hasNameForId=function(t,i){return this.names.has(t)&&this.names.get(t).has(i)},e.prototype.registerName=function(t,i){if(sS(t),this.names.has(t))this.names.get(t).add(i);else{var r=new Set;r.add(i),this.names.set(t,r)}},e.prototype.insertRules=function(t,i,r){this.registerName(t,i),this.getTag().insertRules(sS(t),r)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(sS(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),wge=/&/g,Sge=/^\s*\/\/.*$/gm;function UZ(e,t){return e.map(function(i){return i.type==="rule"&&(i.value="".concat(t," ").concat(i.value),i.value=i.value.replaceAll(",",",".concat(t," ")),i.props=i.props.map(function(r){return"".concat(t," ").concat(r)})),Array.isArray(i.children)&&i.type!=="@keyframes"&&(i.children=UZ(i.children,t)),i})}function _ge(e){var t,i,r,n=gv,s=n.options,a=s===void 0?gv:s,o=n.plugins,l=o===void 0?c3:o,c=function(f,m,g){return g.startsWith(i)&&g.endsWith(i)&&g.replaceAll(i,"").length>0?".".concat(t):f},u=l.slice();u.push(function(f){f.type===n3&&f.value.includes("&")&&(f.props[0]=f.props[0].replace(wge,i).replace(r,c))}),a.prefix&&u.push(Yme),u.push(Wme);var h=function(f,m,g,v){m===void 0&&(m=""),g===void 0&&(g=""),v===void 0&&(v="&"),t=v,i=m,r=new RegExp("\\".concat(i,"\\b"),"g");var x=f.replace(Sge,""),b=Hme(g||m?"".concat(g," ").concat(m," { ").concat(x," }"):x);a.namespace&&(b=UZ(b,a.namespace));var S=[];return cA(b,qme(u.concat(Xme(function(_){return S.push(_)})))),S};return h.hash=l.length?l.reduce(function(f,m){return m.name||lw(15),j0(f,m.name)},RZ).toString():"",h}var Ege=new VZ,bI=_ge(),FZ=Bi.createContext({shouldForwardProp:void 0,styleSheet:Ege,stylis:bI});FZ.Consumer;Bi.createContext(void 0);function QV(){return J.useContext(FZ)}var HZ=function(){function e(t,i){var r=this;this.inject=function(n,s){s===void 0&&(s=bI);var a=r.name+s.hash;n.hasNameForId(r.id,a)||n.insertRules(r.id,a,s(r.rules,a,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=i,cL(this,function(){throw lw(12,String(r.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=bI),this.name+t.hash},e}(),Age=function(e){return e>="A"&&e<="Z"};function KV(e){for(var t="",i=0;i<e.length;i++){var r=e[i];if(i===1&&r==="-"&&e[0]==="-")return e;Age(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var GZ=function(e){return e==null||e===!1||e===""},WZ=function(e){var t,i,r=[];for(var n in e){var s=e[n];e.hasOwnProperty(n)&&!GZ(s)&&(Array.isArray(s)&&s.isCss||vv(s)?r.push("".concat(KV(n),":"),s,";"):pb(s)?r.push.apply(r,fb(fb(["".concat(n," {")],WZ(s),!1),["}"],!1)):r.push("".concat(KV(n),": ").concat((t=n,(i=s)==null||typeof i=="boolean"||i===""?"":typeof i!="number"||i===0||t in Qme||t.startsWith("--")?String(i).trim():"".concat(i,"px")),";")))}return r};function cm(e,t,i,r){if(GZ(e))return[];if(lL(e))return[".".concat(e.styledComponentId)];if(vv(e)){if(!vv(s=e)||s.prototype&&s.prototype.isReactComponent||!t)return[e];var n=e(t);return cm(n,t,i,r)}var s;return e instanceof HZ?i?(e.inject(i,r),[e.getName(r)]):[e]:pb(e)?WZ(e):Array.isArray(e)?Array.prototype.concat.apply(c3,e.map(function(a){return cm(a,t,i,r)})):[e.toString()]}function Tge(e){for(var t=0;t<e.length;t+=1){var i=e[t];if(vv(i)&&!lL(i))return!1}return!0}var Cge=OZ(l3),Mge=function(){function e(t,i,r){this.rules=t,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&Tge(t),this.componentId=i,this.baseHash=j0(Cge,i),this.baseStyle=r,VZ.registerId(i)}return e.prototype.generateAndInjectStyles=function(t,i,r){var n=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,i,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&i.hasNameForId(this.componentId,this.staticRulesId))n=Kp(n,this.staticRulesId);else{var s=yI(cm(this.rules,t,i,r)),a=vI(j0(this.baseHash,s)>>>0);if(!i.hasNameForId(this.componentId,a)){var o=r(s,".".concat(a),void 0,this.componentId);i.insertRules(this.componentId,a,o)}n=Kp(n,a),this.staticRulesId=a}else{for(var l=j0(this.baseHash,r.hash),c="",u=0;u<this.rules.length;u++){var h=this.rules[u];if(typeof h=="string")c+=h;else if(h){var f=yI(cm(h,t,i,r));l=j0(l,f+u),c+=f}}if(c){var m=vI(l>>>0);i.hasNameForId(this.componentId,m)||i.insertRules(this.componentId,m,r(c,".".concat(m),void 0,this.componentId)),n=Kp(n,m)}}return n},e}(),qZ=Bi.createContext(void 0);qZ.Consumer;var AM={};function Pge(e,t,i){var r=lL(e),n=e,s=!EM(e),a=t.attrs,o=a===void 0?c3:a,l=t.componentId,c=l===void 0?function(A,M){var C=typeof A!="string"?"sc":FV(A);AM[C]=(AM[C]||0)+1;var D="".concat(C,"-").concat(LZ(l3+C+AM[C]));return M?"".concat(M,"-").concat(D):D}(t.displayName,t.parentComponentId):l,u=t.displayName,h=u===void 0?function(A){return EM(A)?"styled.".concat(A):"Styled(".concat(tge(A),")")}(e):u,f=t.displayName&&t.componentId?"".concat(FV(t.displayName),"-").concat(t.componentId):t.componentId||c,m=r&&n.attrs?n.attrs.concat(o).filter(Boolean):o,g=t.shouldForwardProp;if(r&&n.shouldForwardProp){var v=n.shouldForwardProp;if(t.shouldForwardProp){var x=t.shouldForwardProp;g=function(A,M){return v(A,M)&&x(A,M)}}else g=v}var b=new Mge(i,f,r?n.componentStyle:void 0);function S(A,M){return function(C,D,T){var R=C.attrs,O=C.componentStyle,L=C.defaultProps,k=C.foldedComponentIds,B=C.styledComponentId,V=C.target,$=Bi.useContext(qZ),q=QV(),Y=C.shouldForwardProp||q.shouldForwardProp,X=Zme(D,$,L)||gv,ne=function(de,se,xe){for(var fe,ye=ho(ho({},se),{className:void 0,theme:xe}),_e=0;_e<de.length;_e+=1){var Te=vv(fe=de[_e])?fe(ye):fe;for(var Ce in Te)ye[Ce]=Ce==="className"?Kp(ye[Ce],Te[Ce]):Ce==="style"?ho(ho({},ye[Ce]),Te[Ce]):Te[Ce]}return se.className&&(ye.className=Kp(ye.className,se.className)),ye}(R,D,X),F=ne.as||V,K={};for(var re in ne)ne[re]===void 0||re[0]==="$"||re==="as"||re==="theme"&&ne.theme===X||(re==="forwardedAs"?K.as=ne.forwardedAs:Y&&!Y(re,F)||(K[re]=ne[re]));var oe=function(de,se){var xe=QV(),fe=de.generateAndInjectStyles(se,xe.styleSheet,xe.stylis);return fe}(O,ne),ce=Kp(k,B);return oe&&(ce+=" "+oe),ne.className&&(ce+=" "+ne.className),K[EM(F)&&!IZ.has(F)?"class":"className"]=ce,T&&(K.ref=T),J.createElement(F,K)}(_,A,M)}S.displayName=h;var _=Bi.forwardRef(S);return _.attrs=m,_.componentStyle=b,_.displayName=h,_.shouldForwardProp=g,_.foldedComponentIds=r?Kp(n.foldedComponentIds,n.styledComponentId):"",_.styledComponentId=f,_.target=r?n.target:e,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(A){this._foldedDefaultProps=r?function(M){for(var C=[],D=1;D<arguments.length;D++)C[D-1]=arguments[D];for(var T=0,R=C;T<R.length;T++)xI(M,R[T],!0);return M}({},n.defaultProps,A):A}}),cL(_,function(){return".".concat(_.styledComponentId)}),s&&jZ(_,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function ZV(e,t){for(var i=[e[0]],r=0,n=t.length;r<n;r+=1)i.push(t[r],e[r+1]);return i}var $V=function(e){return Object.assign(e,{isCss:!0})};function Px(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(vv(e)||pb(e))return $V(cm(ZV(c3,fb([e],t,!0))));var r=e;return t.length===0&&r.length===1&&typeof r[0]=="string"?cm(r):$V(cm(ZV(r,t)))}function wI(e,t,i){if(i===void 0&&(i=gv),!t)throw lw(1,t);var r=function(n){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];return e(t,i,Px.apply(void 0,fb([n],s,!1)))};return r.attrs=function(n){return wI(e,t,ho(ho({},i),{attrs:Array.prototype.concat(i.attrs,n).filter(Boolean)}))},r.withConfig=function(n){return wI(e,t,ho(ho({},i),n))},r}var XZ=function(e){return wI(Pge,e)},U=XZ;IZ.forEach(function(e){U[e]=XZ(e)});function cn(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var r=yI(Px.apply(void 0,fb([e],t,!1))),n=LZ(r);return new HZ(n,r)}const Dge=U.div`
  position: relative;
  cursor: pointer;
   color: #808080;
      font-family: var(--font-family);
font-weight: 600;
font-size: 14px;
text-align: center;
display: flex;
     &:hover,
    &.active {
    color: var(--purple-400);
    }
`,Ige=U.img`

`,Rge=U.div`
  position: absolute;
 right: -112px;
    top: 30px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.98);
  padding: 10px 0;
  min-width: 250px;
  z-index: 1000;
backdrop-filter: blur(168px);
box-shadow: inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 0 8px 16px -8px rgba(0, 0, 0, 0.03), 0 2px 4px -2px rgba(0, 0, 0, 0.08);
background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 186%) , rgb(0, 0, 0);

`,Ap=U.div`
  padding: 8px 20px;
  transition: background-color 0.2s;

  &:hover {
  color: var(--purple-400);
  }

  a {
    color: #333;
    text-decoration: none;
    font-size: 14px;
    display: block;
  }
`,Oge=U.header`
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(0, 0, 0, 0);
  backdrop-filter: blur(16px);
  padding: 1rem ;
  position: fixed;
  top: 0;
  left: 0;
 width: 100%;
 
  margin: 0 auto;
  transition: all 0.3s ease;
  z-index: 99;

  @media (max-width: 768px) {
    padding: 1rem;
    max-width: 768px;
  }
    @media screen and (min-width: 1440px){
    width: 100%;
margin: 0 auto;
}

  &:hover,
  &:focus,
  &.active {
  
    transition: all 0.4s ease-in-out;
  }
`,Lge=U.div`
  display: flex;
  width: 1440px;
  margin: 0 auto;
  justify-content: space-between;
  align-items: center;
  padding: 0 2px;
`,kge=U.div`
  display: flex;
  align-items: center;
  gap: 10px;

  @media screen and (min-width: 1440px) {
    justify-content: flex-end;
    width: auto;

    div{
    display: flex;
    }
  }
`,zge=U.ul`
  display: flex;
  gap: 2rem;
  list-style: none;
  margin: 0;
  padding: 0;
  
  @media screen and (min-width: 1440px) {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    border-radius: 24px;
    padding: 12px 20px;
    width: auto;
    height: 42px;
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 16px -8px rgba(0, 0, 0, 0.03), 
                0 2px 4px -2px rgba(0, 0, 0, 0.08), 
                inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), 
                inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%), 
                rgba(255, 255, 255, 0.03);
display: flex;
        align-items: center;
  }
`,Bge=U(Bm)`
  font-size: 1.5rem;
  font-weight: bold;
  color: #00d1ff;
  text-decoration: none;
  z-index: 10;
  img {
 width: 142px;
height: auto;
  overflov: hidden;

  
  &:hover,
  &:focus,
  &.active {
    color: #00ffe7;
    fill: #00ffe7;
  }
    }
`,b1=U.li`
color:rgb(49, 46, 46);

  a {
    text-decoration: none;
   color: #ffffffff;
   font-family: var(--font-family);
font-weight: 600;
font-size: 14px;
text-align: center;
    transition: color 0.3s ease;

    &:hover,
    &.active {
    color: var(--purple-400);
    }
  }
`,Ro=U(Bm)`
display: flex;
  text-decoration: none;
font-family: var(--font-family);
font-weight: 500;
font-size: 56px;
line-height: 100%;
color: var(--white-50);
  transition: all 0.4s ease-in-out;
  position: relative;

    color: #808080;
  cursor: pointer;

  transition: all 0.4s ease-in-out;
  position: relative;
  &:hover {
     color: var(--purple-400);
  }

  &::bevore {
    content: '';
    position: absolute;
    left: 0;
    bottom: -4px;
    width: 0;
    height: 2px;
    background-color: #808080;
    transition: width 0.3s ease-in-out;
  }

  &.active {
   color:rgb(255, 255, 255);
    &::after {
      width: 100%;
    }
  }

  &:hover::after {
    width: 100%;
     color: var(--purple-400);
  }
`,jge=U(Bm)`
display: flex;
  text-decoration: none;
font-family: var(--font-family);
font-weight: 500;
font-size: 20px;
line-height: 100%;
color: var(--white-50);
  transition: all 0.4s ease-in-out;
  position: relative;

    color: #808080;
  cursor: pointer;

  transition: all 0.4s ease-in-out;
  position: relative;
  &:hover {
     color: var(--purple-400);
  }

  &::bevore {
    content: '';
    position: absolute;
    left: 0;
    bottom: -4px;
    width: 0;
    height: 2px;
    background-color: #808080;
    transition: width 0.3s ease-in-out;
  }

  &.active {
   color:rgb(255, 255, 255);
    &::after {
      width: 100%;
    }
  }

  &:hover::after {
    width: 100%;
     color: var(--purple-400);
  }
`;var aS={},JV;function Nge(){if(JV)return aS;JV=1,aS.match=s,aS.parse=a;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,i=/^(?:(min|max)-)?(.+)/,r=/(em|rem|px|cm|mm|in|pt|pc)?$/,n=/(dpi|dpcm|dppx)?$/;function s(u,h){return a(u).some(function(f){var m=f.inverse,g=f.type==="all"||h.type===f.type;if(g&&m||!(g||m))return!1;var v=f.expressions.every(function(x){var b=x.feature,S=x.modifier,_=x.value,A=h[b];if(!A)return!1;switch(b){case"orientation":case"scan":return A.toLowerCase()===_.toLowerCase();case"width":case"height":case"device-width":case"device-height":_=c(_),A=c(A);break;case"resolution":_=l(_),A=l(A);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":_=o(_),A=o(A);break;case"grid":case"color":case"color-index":case"monochrome":_=parseInt(_,10)||1,A=parseInt(A,10)||0;break}switch(S){case"min":return A>=_;case"max":return A<=_;default:return A===_}});return v&&!m||!v&&m})}function a(u){return u.split(",").map(function(h){h=h.trim();var f=h.match(e),m=f[1],g=f[2],v=f[3]||"",x={};return x.inverse=!!m&&m.toLowerCase()==="not",x.type=g?g.toLowerCase():"all",v=v.match(/\([^\)]+\)/g)||[],x.expressions=v.map(function(b){var S=b.match(t),_=S[1].toLowerCase().match(i);return{modifier:_[1],feature:_[2],value:S[2]}}),x})}function o(u){var h=Number(u),f;return h||(f=u.match(/^(\d+)\s*\/\s*(\d+)$/),h=f[1]/f[2]),h}function l(u){var h=parseFloat(u),f=String(u).match(n)[1];switch(f){case"dpcm":return h/2.54;case"dppx":return h*96;default:return h}}function c(u){var h=parseFloat(u),f=String(u).match(r)[1];switch(f){case"em":return h*16;case"rem":return h*16;case"cm":return h*96/2.54;case"mm":return h*96/2.54/10;case"in":return h*96;case"pt":return h*72;case"pc":return h*72/12;default:return h}}return aS}var TM,e7;function Vge(){if(e7)return TM;e7=1;var e=Nge().match,t=typeof window<"u"?window.matchMedia:null;function i(n,s,a){var o=this,l;t&&!a&&(l=t.call(window,n)),l?(this.matches=l.matches,this.media=l.media,l.addListener(h)):(this.matches=e(n,s),this.media=n),this.addListener=c,this.removeListener=u,this.dispose=f;function c(m){l&&l.addListener(m)}function u(m){l&&l.removeListener(m)}function h(m){o.matches=m.matches,o.media=m.media}function f(){l&&l.removeListener(h)}}function r(n,s,a){return new i(n,s,a)}return TM=r,TM}var Uge=Vge();const Fge=Fv(Uge);var Hge=/[A-Z]/g,Gge=/^ms-/,CM={};function Wge(e){return"-"+e.toLowerCase()}function YZ(e){if(CM.hasOwnProperty(e))return CM[e];var t=e.replace(Hge,Wge);return CM[e]=Gge.test(t)?"-"+t:t}function qge(e,t){if(e===t)return!0;if(!e||!t)return!1;const i=Object.keys(e),r=Object.keys(t),n=i.length;if(r.length!==n)return!1;for(let s=0;s<n;s++){const a=i[s];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}var MM={exports:{}},PM,t7;function Xge(){if(t7)return PM;t7=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return PM=e,PM}var DM,i7;function Yge(){if(i7)return DM;i7=1;var e=Xge();function t(){}function i(){}return i.resetWarningCache=t,DM=function(){function r(a,o,l,c,u,h){if(h!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function n(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:n,element:r,elementType:r,instanceOf:n,node:r,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:i,resetWarningCache:t};return s.PropTypes=s,s},DM}var r7;function cw(){return r7||(r7=1,MM.exports=Yge()()),MM.exports}var Qge=cw();const lr=Fv(Qge),Na=lr.oneOfType([lr.string,lr.number]),QZ={all:lr.bool,grid:lr.bool,aural:lr.bool,braille:lr.bool,handheld:lr.bool,print:lr.bool,projection:lr.bool,screen:lr.bool,tty:lr.bool,tv:lr.bool,embossed:lr.bool},Kge={orientation:lr.oneOf(["portrait","landscape"]),scan:lr.oneOf(["progressive","interlace"]),aspectRatio:lr.string,deviceAspectRatio:lr.string,height:Na,deviceHeight:Na,width:Na,deviceWidth:Na,color:lr.bool,colorIndex:lr.bool,monochrome:lr.bool,resolution:Na,type:Object.keys(QZ)},{type:Put,...Zge}=Kge,$ge={minAspectRatio:lr.string,maxAspectRatio:lr.string,minDeviceAspectRatio:lr.string,maxDeviceAspectRatio:lr.string,minHeight:Na,maxHeight:Na,minDeviceHeight:Na,maxDeviceHeight:Na,minWidth:Na,maxWidth:Na,minDeviceWidth:Na,maxDeviceWidth:Na,minColor:lr.number,maxColor:lr.number,minColorIndex:lr.number,maxColorIndex:lr.number,minMonochrome:lr.number,maxMonochrome:lr.number,minResolution:Na,maxResolution:Na,...Zge},Jge={...QZ,...$ge};var e0e={all:Jge};const t0e=e=>`not ${e}`,i0e=(e,t)=>{const i=YZ(e);return typeof t=="number"&&(t=`${t}px`),t===!0?i:t===!1?t0e(i):`(${i}: ${t})`},r0e=e=>e.join(" and "),n0e=e=>{const t=[];return Object.keys(e0e.all).forEach(i=>{const r=e[i];r!=null&&t.push(i0e(i,r))}),r0e(t)},s0e=J.createContext(void 0),a0e=e=>e.query||n0e(e),n7=e=>e?Object.keys(e).reduce((i,r)=>(i[YZ(r)]=e[r],i),{}):void 0,KZ=()=>{const e=J.useRef(!1);return J.useEffect(()=>{e.current=!0},[]),e.current},o0e=e=>{const t=J.useContext(s0e),i=()=>n7(e)||n7(t),[r,n]=J.useState(i);return J.useEffect(()=>{const s=i();qge(r,s)||n(s)},[e,t]),r},l0e=e=>{const t=()=>a0e(e),[i,r]=J.useState(t);return J.useEffect(()=>{const n=t();i!==n&&r(n)},[e]),i},c0e=(e,t)=>{const i=()=>Fge(e,t||{},!!t),[r,n]=J.useState(i),s=KZ();return J.useEffect(()=>{if(s){const a=i();return n(a),()=>{a&&a.dispose()}}},[e,t]),r},u0e=e=>{const[t,i]=J.useState(e.matches);return J.useEffect(()=>{const r=n=>{i(n.matches)};return e.addListener(r),i(e.matches),()=>{e.removeListener(r)}},[e]),t},Yr=(e,t,i)=>{const r=o0e(t),n=l0e(e);if(!n)throw new Error("Invalid or missing MediaQuery!");const s=c0e(n,r),a=u0e(s);return KZ(),J.useEffect(()=>{},[a]),J.useEffect(()=>()=>{s&&s.dispose()},[]),a};var EE={exports:{}},h0e=EE.exports,s7;function d0e(){return s7||(s7=1,function(e,t){(function(i,r){e.exports=r()})(h0e,function(){return function(i){function r(s){if(n[s])return n[s].exports;var a=n[s]={exports:{},id:s,loaded:!1};return i[s].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}var n={};return r.m=i,r.c=n,r.p="dist/",r(0)}([function(i,r,n){function s(V){return V&&V.__esModule?V:{default:V}}var a=Object.assign||function(V){for(var $=1;$<arguments.length;$++){var q=arguments[$];for(var Y in q)Object.prototype.hasOwnProperty.call(q,Y)&&(V[Y]=q[Y])}return V},o=n(1),l=(s(o),n(6)),c=s(l),u=n(7),h=s(u),f=n(8),m=s(f),g=n(9),v=s(g),x=n(10),b=s(x),S=n(11),_=s(S),A=n(14),M=s(A),C=[],D=!1,T={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},R=function(){var V=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(V&&(D=!0),D)return C=(0,_.default)(C,T),(0,b.default)(C,T.once),C},O=function(){C=(0,M.default)(),R()},L=function(){C.forEach(function(V,$){V.node.removeAttribute("data-aos"),V.node.removeAttribute("data-aos-easing"),V.node.removeAttribute("data-aos-duration"),V.node.removeAttribute("data-aos-delay")})},k=function(V){return V===!0||V==="mobile"&&v.default.mobile()||V==="phone"&&v.default.phone()||V==="tablet"&&v.default.tablet()||typeof V=="function"&&V()===!0},B=function(V){T=a(T,V),C=(0,M.default)();var $=document.all&&!window.atob;return k(T.disable)||$?L():(T.disableMutationObserver||m.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),T.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",T.easing),document.querySelector("body").setAttribute("data-aos-duration",T.duration),document.querySelector("body").setAttribute("data-aos-delay",T.delay),T.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?R(!0):T.startEvent==="load"?window.addEventListener(T.startEvent,function(){R(!0)}):document.addEventListener(T.startEvent,function(){R(!0)}),window.addEventListener("resize",(0,h.default)(R,T.debounceDelay,!0)),window.addEventListener("orientationchange",(0,h.default)(R,T.debounceDelay,!0)),window.addEventListener("scroll",(0,c.default)(function(){(0,b.default)(C,T.once)},T.throttleDelay)),T.disableMutationObserver||m.default.ready("[data-aos]",O),C)};i.exports={init:B,refresh:R,refreshHard:O}},function(i,r){},,,,,function(i,r){(function(n){function s(k,B,V){function $(Ke){var Xe=ce,pt=de;return ce=de=void 0,_e=Ke,xe=k.apply(pt,Xe)}function q(Ke){return _e=Ke,fe=setTimeout(ne,B),Te?$(Ke):xe}function Y(Ke){var Xe=Ke-ye,pt=Ke-_e,ct=B-Xe;return Ce?O(ct,se-pt):ct}function X(Ke){var Xe=Ke-ye,pt=Ke-_e;return ye===void 0||Xe>=B||Xe<0||Ce&&pt>=se}function ne(){var Ke=L();return X(Ke)?F(Ke):void(fe=setTimeout(ne,Y(Ke)))}function F(Ke){return fe=void 0,Le&&ce?$(Ke):(ce=de=void 0,xe)}function K(){fe!==void 0&&clearTimeout(fe),_e=0,ce=ye=de=fe=void 0}function re(){return fe===void 0?xe:F(L())}function oe(){var Ke=L(),Xe=X(Ke);if(ce=arguments,de=this,ye=Ke,Xe){if(fe===void 0)return q(ye);if(Ce)return fe=setTimeout(ne,B),$(ye)}return fe===void 0&&(fe=setTimeout(ne,B)),xe}var ce,de,se,xe,fe,ye,_e=0,Te=!1,Ce=!1,Le=!0;if(typeof k!="function")throw new TypeError(f);return B=u(B)||0,o(V)&&(Te=!!V.leading,Ce="maxWait"in V,se=Ce?R(u(V.maxWait)||0,B):se,Le="trailing"in V?!!V.trailing:Le),oe.cancel=K,oe.flush=re,oe}function a(k,B,V){var $=!0,q=!0;if(typeof k!="function")throw new TypeError(f);return o(V)&&($="leading"in V?!!V.leading:$,q="trailing"in V?!!V.trailing:q),s(k,B,{leading:$,maxWait:B,trailing:q})}function o(k){var B=typeof k>"u"?"undefined":h(k);return!!k&&(B=="object"||B=="function")}function l(k){return!!k&&(typeof k>"u"?"undefined":h(k))=="object"}function c(k){return(typeof k>"u"?"undefined":h(k))=="symbol"||l(k)&&T.call(k)==g}function u(k){if(typeof k=="number")return k;if(c(k))return m;if(o(k)){var B=typeof k.valueOf=="function"?k.valueOf():k;k=o(B)?B+"":B}if(typeof k!="string")return k===0?k:+k;k=k.replace(v,"");var V=b.test(k);return V||S.test(k)?_(k.slice(2),V?2:8):x.test(k)?m:+k}var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},f="Expected a function",m=NaN,g="[object Symbol]",v=/^\s+|\s+$/g,x=/^[-+]0x[0-9a-f]+$/i,b=/^0b[01]+$/i,S=/^0o[0-7]+$/i,_=parseInt,A=(typeof n>"u"?"undefined":h(n))=="object"&&n&&n.Object===Object&&n,M=(typeof self>"u"?"undefined":h(self))=="object"&&self&&self.Object===Object&&self,C=A||M||Function("return this")(),D=Object.prototype,T=D.toString,R=Math.max,O=Math.min,L=function(){return C.Date.now()};i.exports=a}).call(r,function(){return this}())},function(i,r){(function(n){function s(L,k,B){function V(Le){var Ke=oe,Xe=ce;return oe=ce=void 0,ye=Le,se=L.apply(Xe,Ke)}function $(Le){return ye=Le,xe=setTimeout(X,k),_e?V(Le):se}function q(Le){var Ke=Le-fe,Xe=Le-ye,pt=k-Ke;return Te?R(pt,de-Xe):pt}function Y(Le){var Ke=Le-fe,Xe=Le-ye;return fe===void 0||Ke>=k||Ke<0||Te&&Xe>=de}function X(){var Le=O();return Y(Le)?ne(Le):void(xe=setTimeout(X,q(Le)))}function ne(Le){return xe=void 0,Ce&&oe?V(Le):(oe=ce=void 0,se)}function F(){xe!==void 0&&clearTimeout(xe),ye=0,oe=fe=ce=xe=void 0}function K(){return xe===void 0?se:ne(O())}function re(){var Le=O(),Ke=Y(Le);if(oe=arguments,ce=this,fe=Le,Ke){if(xe===void 0)return $(fe);if(Te)return xe=setTimeout(X,k),V(fe)}return xe===void 0&&(xe=setTimeout(X,k)),se}var oe,ce,de,se,xe,fe,ye=0,_e=!1,Te=!1,Ce=!0;if(typeof L!="function")throw new TypeError(h);return k=c(k)||0,a(B)&&(_e=!!B.leading,Te="maxWait"in B,de=Te?T(c(B.maxWait)||0,k):de,Ce="trailing"in B?!!B.trailing:Ce),re.cancel=F,re.flush=K,re}function a(L){var k=typeof L>"u"?"undefined":u(L);return!!L&&(k=="object"||k=="function")}function o(L){return!!L&&(typeof L>"u"?"undefined":u(L))=="object"}function l(L){return(typeof L>"u"?"undefined":u(L))=="symbol"||o(L)&&D.call(L)==m}function c(L){if(typeof L=="number")return L;if(l(L))return f;if(a(L)){var k=typeof L.valueOf=="function"?L.valueOf():L;L=a(k)?k+"":k}if(typeof L!="string")return L===0?L:+L;L=L.replace(g,"");var B=x.test(L);return B||b.test(L)?S(L.slice(2),B?2:8):v.test(L)?f:+L}var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},h="Expected a function",f=NaN,m="[object Symbol]",g=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,b=/^0o[0-7]+$/i,S=parseInt,_=(typeof n>"u"?"undefined":u(n))=="object"&&n&&n.Object===Object&&n,A=(typeof self>"u"?"undefined":u(self))=="object"&&self&&self.Object===Object&&self,M=_||A||Function("return this")(),C=Object.prototype,D=C.toString,T=Math.max,R=Math.min,O=function(){return M.Date.now()};i.exports=s}).call(r,function(){return this}())},function(i,r){function n(u){var h=void 0,f=void 0;for(h=0;h<u.length;h+=1)if(f=u[h],f.dataset&&f.dataset.aos||f.children&&n(f.children))return!0;return!1}function s(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function a(){return!!s()}function o(u,h){var f=window.document,m=s(),g=new m(l);c=h,g.observe(f.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function l(u){u&&u.forEach(function(h){var f=Array.prototype.slice.call(h.addedNodes),m=Array.prototype.slice.call(h.removedNodes),g=f.concat(m);if(n(g))return c()})}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){};r.default={isSupported:a,ready:o}},function(i,r){function n(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function s(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function f(m,g){for(var v=0;v<g.length;v++){var x=g[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(m,x.key,x)}}return function(m,g,v){return g&&f(m.prototype,g),v&&f(m,v),m}}(),o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,l=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,c=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,u=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,h=function(){function f(){n(this,f)}return a(f,[{key:"phone",value:function(){var m=s();return!(!o.test(m)&&!l.test(m.substr(0,4)))}},{key:"mobile",value:function(){var m=s();return!(!c.test(m)&&!u.test(m.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),f}();r.default=new h},function(i,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(a,o,l){var c=a.node.getAttribute("data-aos-once");o>a.position?a.node.classList.add("aos-animate"):typeof c<"u"&&(c==="false"||!l&&c!=="true")&&a.node.classList.remove("aos-animate")},s=function(a,o){var l=window.pageYOffset,c=window.innerHeight;a.forEach(function(u,h){n(u,c+l,o)})};r.default=s},function(i,r,n){function s(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(r,"__esModule",{value:!0});var a=n(12),o=s(a),l=function(c,u){return c.forEach(function(h,f){h.node.classList.add("aos-init"),h.position=(0,o.default)(h.node,u.offset)}),c};r.default=l},function(i,r,n){function s(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(r,"__esModule",{value:!0});var a=n(13),o=s(a),l=function(c,u){var h=0,f=0,m=window.innerHeight,g={offset:c.getAttribute("data-aos-offset"),anchor:c.getAttribute("data-aos-anchor"),anchorPlacement:c.getAttribute("data-aos-anchor-placement")};switch(g.offset&&!isNaN(g.offset)&&(f=parseInt(g.offset)),g.anchor&&document.querySelectorAll(g.anchor)&&(c=document.querySelectorAll(g.anchor)[0]),h=(0,o.default)(c).top,g.anchorPlacement){case"top-bottom":break;case"center-bottom":h+=c.offsetHeight/2;break;case"bottom-bottom":h+=c.offsetHeight;break;case"top-center":h+=m/2;break;case"bottom-center":h+=m/2+c.offsetHeight;break;case"center-center":h+=m/2+c.offsetHeight/2;break;case"top-top":h+=m;break;case"bottom-top":h+=c.offsetHeight+m;break;case"center-top":h+=c.offsetHeight/2+m}return g.anchorPlacement||g.offset||isNaN(u)||(f=u),h+f};r.default=l},function(i,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(s){for(var a=0,o=0;s&&!isNaN(s.offsetLeft)&&!isNaN(s.offsetTop);)a+=s.offsetLeft-(s.tagName!="BODY"?s.scrollLeft:0),o+=s.offsetTop-(s.tagName!="BODY"?s.scrollTop:0),s=s.offsetParent;return{top:o,left:a}};r.default=n},function(i,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(s){return s=s||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(s,function(a){return{node:a}})};r.default=n}])})}(EE)),EE.exports}var f0e=d0e();const a7=Fv(f0e),u3="data:image/svg+xml,%3csvg%20width='142'%20height='20'%20viewBox='0%200%20142%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.9853%200.416314L17.735%200.416313L23.3877%209.62763H21.1187L16.6004%202.19579H14.647L18.8494%209.62763H12.087L6.43909%200.416314L8.7082%200.416314L13.2215%207.77694H15.3024L10.9853%200.416314Z'%20fill='white'/%3e%3cpath%20d='M8.70826%2015.8822L12.087%2010.3675H23.3877L22.2531%2012.2183H13.2216L12.0483%2014.0956L21.1185%2014.0689L17.7348%2019.5836H6.43909L7.57365%2017.7282H16.6002L17.7388%2015.8758L8.70826%2015.8822Z'%20fill='white'/%3e%3cpath%20d='M3.38373%2015.5119L0%209.99731L5.65284%200.786003L6.7874%202.63201L2.27407%209.99731L3.43012%2011.8823L7.92195%204.4875L11.3007%209.99742L5.65284%2019.2134L4.51831%2017.358L9.03159%209.99742L7.914%208.08984L3.38373%2015.5119Z'%20fill='white'/%3e%3cpath%20d='M37.17%207.91893C37.17%208.45507%2038.7516%208.52777%2040.7988%208.61864C44.4373%208.79141%2049.5506%209.02767%2049.541%2012.0903C49.541%2015.58%2045.2718%2016.4071%2040.6921%2016.4071C36.1221%2016.398%2032.3284%2015.88%2031.8433%2012.0903H37.17C37.7522%2013.0354%2039.1008%2013.2808%2040.6921%2013.2808C42.2737%2013.2808%2044.2142%2013.0354%2044.2142%2012.0903C44.2142%2011.5541%2042.6327%2011.4723%2040.5853%2011.3815C36.9469%2011.2088%2031.8335%2010.9724%2031.8433%207.91893C31.8433%204.42914%2036.1125%203.59301%2040.6921%203.59301C45.262%203.62027%2049.0557%204.102%2049.541%207.91893H44.2142C43.632%206.95558%2042.2833%206.7284%2040.6921%206.7284C39.1106%206.7284%2037.17%206.9465%2037.17%207.91893Z'%20fill='white'/%3e%3cpath%20d='M59.0498%207.44645L57.2548%2011.0545H60.835L59.0498%207.44645ZM49.0269%2016.1256L56.0225%203.91122H62.0672L69.0629%2016.1256H63.3383L62.3098%2014.0353H55.7799L54.7514%2016.1256H49.0269Z'%20fill='white'/%3e%3cpath%20d='M74.1463%2013.2174H80.9867C81.4233%2013.2174%2081.7823%2012.8085%2081.7823%2012.3995C81.7823%2011.9905%2081.4233%2011.5816%2080.9867%2011.5816H74.1463V13.2174ZM80.0359%206.8104H74.1463V8.45529H80.0359C80.4725%208.45529%2080.8315%208.03728%2080.8315%207.62836C80.8315%207.21933%2080.4725%206.8104%2080.0359%206.8104ZM84.0916%209.80938C85.566%2010.2548%2086.5557%2011.309%2086.5557%2012.8448C86.5853%2014.9805%2084.664%2016.1256%2082.4227%2016.1256H69.0618L69.0621%203.91128H81.4621C83.7228%203.90219%2085.6339%205.05637%2085.6054%207.18298C85.6054%208.35533%2085.0231%209.25507%2084.0916%209.80938Z'%20fill='white'/%3e%3cpath%20d='M92.4483%207.91893C92.4483%208.45507%2094.0304%208.52777%2096.0766%208.61864C99.7159%208.79141%20104.829%209.02767%20104.819%2012.0903C104.819%2015.58%20100.55%2016.4071%2095.9704%2016.4071C91.4006%2016.398%2087.607%2015.88%2087.122%2012.0903H92.4483C93.0308%2013.0354%2094.3796%2013.2808%2095.9704%2013.2808C97.5525%2013.2808%2099.4925%2013.0354%2099.4925%2012.0903C99.4925%2011.5541%2097.9105%2011.4723%2095.8631%2011.3815C92.225%2011.2088%2087.1121%2010.9724%2087.122%207.91893C87.122%204.42914%2091.3907%203.59301%2095.9704%203.59301C100.54%203.62027%20104.334%204.102%20104.819%207.91893H99.4925C98.9101%206.95558%2097.5612%206.7284%2095.9704%206.7284C94.3884%206.7284%2092.4483%206.9465%2092.4483%207.91893Z'%20fill='white'/%3e%3cpath%20d='M118.15%2010.1542V3.89251H123.244V10.4541C123.264%2015.0708%20119.227%2016.3976%20114.337%2016.4067C109.447%2016.3976%20105.41%2015.0708%20105.43%2010.4541V3.89251H110.515V10.1542C110.495%2012.1626%20112.251%2012.508%20114.337%2012.5353C116.414%2012.508%20118.18%2012.1626%20118.15%2010.1542Z'%20fill='white'/%3e%3cpath%20d='M129.629%207.91893C129.629%208.45507%20131.21%208.52777%20133.257%208.61864C136.895%208.79141%20142.009%209.02767%20141.999%2012.0903C141.999%2015.58%20137.731%2016.4071%20133.151%2016.4071C128.581%2016.398%20124.786%2015.88%20124.301%2012.0903H129.629C130.21%2013.0354%20131.559%2013.2808%20133.151%2013.2808C134.732%2013.2808%20136.673%2013.0354%20136.673%2012.0903C136.673%2011.5541%20135.091%2011.4723%20133.044%2011.3815C129.406%2011.2088%20124.292%2010.9724%20124.301%207.91893C124.301%204.42914%20128.571%203.59301%20133.151%203.59301C137.721%203.62027%20141.514%204.102%20141.999%207.91893H136.673C136.091%206.95558%20134.742%206.7284%20133.151%206.7284C131.569%206.7284%20129.629%206.9465%20129.629%207.91893Z'%20fill='white'/%3e%3c/svg%3e",p0e=(e,t,i,r)=>{var s,a,o,l;const n=[i,{code:t,...r||{}}];if((a=(s=e==null?void 0:e.services)==null?void 0:s.logger)!=null&&a.forward)return e.services.logger.forward(n,"warn","react-i18next::",!0);um(n[0])&&(n[0]=`react-i18next:: ${n[0]}`),(l=(o=e==null?void 0:e.services)==null?void 0:o.logger)!=null&&l.warn?e.services.logger.warn(...n):console!=null&&console.warn&&console.warn(...n)},o7={},SI=(e,t,i,r)=>{um(i)&&o7[i]||(um(i)&&(o7[i]=new Date),p0e(e,t,i,r))},ZZ=(e,t)=>()=>{if(e.isInitialized)t();else{const i=()=>{setTimeout(()=>{e.off("initialized",i)},0),t()};e.on("initialized",i)}},_I=(e,t,i)=>{e.loadNamespaces(t,ZZ(e,i))},l7=(e,t,i,r)=>{if(um(i)&&(i=[i]),e.options.preload&&e.options.preload.indexOf(t)>-1)return _I(e,i,r);i.forEach(n=>{e.options.ns.indexOf(n)<0&&e.options.ns.push(n)}),e.loadLanguages(t,ZZ(e,r))},m0e=(e,t,i={})=>!t.languages||!t.languages.length?(SI(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:i.lng,precheck:(r,n)=>{var s;if(((s=i.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!n(r.isLanguageChangingTo,e))return!1}}),um=e=>typeof e=="string",g0e=e=>typeof e=="object"&&e!==null,v0e=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,y0e={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},x0e=e=>y0e[e],b0e=e=>e.replace(v0e,x0e);let EI={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:b0e};const w0e=(e={})=>{EI={...EI,...e}},S0e=()=>EI;let $Z;const _0e=e=>{$Z=e},E0e=()=>$Z,A0e={type:"3rdParty",init(e){w0e(e.options.react),_0e(e)}},T0e=J.createContext();class C0e{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(i=>{this.usedNamespaces[i]||(this.usedNamespaces[i]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const M0e=(e,t)=>{const i=J.useRef();return J.useEffect(()=>{i.current=e},[e,t]),i.current},JZ=(e,t,i,r)=>e.getFixedT(t,i,r),P0e=(e,t,i,r)=>J.useCallback(JZ(e,t,i,r),[e,t,i,r]),jt=(e,t={})=>{var A,M,C,D;const{i18n:i}=t,{i18n:r,defaultNS:n}=J.useContext(T0e)||{},s=i||r||E0e();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new C0e),!s){SI(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const T=(O,L)=>um(L)?L:g0e(L)&&um(L.defaultValue)?L.defaultValue:Array.isArray(O)?O[O.length-1]:O,R=[T,{},!1];return R.t=T,R.i18n={},R.ready=!1,R}(A=s.options.react)!=null&&A.wait&&SI(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...S0e(),...s.options.react,...t},{useSuspense:o,keyPrefix:l}=a;let c=n||((M=s.options)==null?void 0:M.defaultNS);c=um(c)?[c]:c||["translation"],(D=(C=s.reportNamespaces).addUsedNamespaces)==null||D.call(C,c);const u=(s.isInitialized||s.initializedStoreOnce)&&c.every(T=>m0e(T,s,a)),h=P0e(s,t.lng||null,a.nsMode==="fallback"?c:c[0],l),f=()=>h,m=()=>JZ(s,t.lng||null,a.nsMode==="fallback"?c:c[0],l),[g,v]=J.useState(f);let x=c.join();t.lng&&(x=`${t.lng}${x}`);const b=M0e(x),S=J.useRef(!0);J.useEffect(()=>{const{bindI18n:T,bindI18nStore:R}=a;S.current=!0,!u&&!o&&(t.lng?l7(s,t.lng,c,()=>{S.current&&v(m)}):_I(s,c,()=>{S.current&&v(m)})),u&&b&&b!==x&&S.current&&v(m);const O=()=>{S.current&&v(m)};return T&&(s==null||s.on(T,O)),R&&(s==null||s.store.on(R,O)),()=>{S.current=!1,s&&(T==null||T.split(" ").forEach(L=>s.off(L,O))),R&&s&&R.split(" ").forEach(L=>s.store.off(L,O))}},[s,x]),J.useEffect(()=>{S.current&&u&&v(f)},[s,l,u]);const _=[g,s,u];if(_.t=g,_.i18n=s,_.ready=u,u||!u&&!o)return _;throw new Promise(T=>{t.lng?l7(s,t.lng,c,()=>T()):_I(s,c,()=>T())})},AE=cn`
  0% {
    box-shadow: 0 0 0 0 rgba(73, 75, 236, 0.7);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(73, 75, 236, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(73, 75, 236, 0);
  }
`,h3=cn`
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
  }
`,su=cn`
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
`,D0e=U.button`
  z-index: 1100;
  border-radius: 12px;
  width: 110px;
  height: 38px;
  position: fixed;
  overflow: hidden;
  top: 65px;
  right: 20px;

  font-family: var(--font-family);
  font-weight: 400;
  font-size: 15px;
  color: var(--white-100);

  box-shadow: inset 0 0 6px 0 rgba(255, 255, 255, 0.54);
  background: linear-gradient(139deg, #494bec, #6a6bff, #494bec, #3a3bc7);
  background-size: 300% 300%;
  animation:
    ${AE} 2s infinite,
    ${su} 6s ease infinite;

  transition: all 0.4s ease;

  &:hover {
    box-shadow:
      inset 0 0 8px 0 rgba(255, 255, 255, 0.74),
      0 0 15px rgba(73, 75, 236, 0.5);
    transform: perspective(500px) rotateX(10deg) translateY(-2px);
    animation:
      ${AE} 2s infinite,
      ${su} 3s ease infinite;
    background-size: 200% 200%;
  }

  &:active {
    animation:
      ${h3} 0.3s ease,
      ${su} 6s ease infinite;
    background: linear-gradient(139deg, #3a3bc7, #494bec, #3a3bc7);
  }

  &::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background: rgba(255, 255, 255, 0.5);
    opacity: 0;
    border-radius: 100%;
    transform: scale(1, 1) translate(-50%, -50%);
    transform-origin: 50% 50%;
  }

  &:focus:not(:active)::after {
    animation: ripple 0.6s ease-out;
  }

  @keyframes ripple {
    0% {
      transform: scale(0, 0);
      opacity: 0.5;
    }
    100% {
      transform: scale(20, 20);
      opacity: 0;
    }
  }
  @media screen and (min-width: 500px) {
    z-index: 110;
    border-radius: 12px;
    width: 110px;
    height: 38px;
    position: relative;
    top: 0px;
    right: 4px;
    overflow: hidden;

    font-family: var(--font-family);
    font-weight: 400;
    font-size: 15px;
    color: var(--white-100);

    box-shadow: inset 0 0 6px 0 rgba(255, 255, 255, 0.54);
    background: linear-gradient(139deg, #494bec, #6a6bff, #494bec, #3a3bc7);
    background-size: 300% 300%;
    animation:
      ${AE} 2s infinite,
      ${su} 6s ease infinite;

    transition: all 0.4s ease;
  }

  @media screen and (min-width: 1440px) {
  }
`,I0e=()=>{const{t:e}=jt();return E.jsx("a",{href:"https://sabsus.app/registrcompany/web/PRO",target:"_blank",rel:"noopener noreferrer",children:E.jsx(D0e,{children:e("hero.buttons.tryFree")})})},R0e=U.div`
  position: relative;
  display: flex;
  z-index: 100;
  margin-right: 20px;

  @media (max-width: 743px) {
    margin-right: 10px;
  }
`,O0e=U.button`
  border-radius: 12px;
  padding: 8px 8px;
  width: 70px;
  height: 36px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 14px;
  text-align: center;
  color: var(--white-100);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2px;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  transition: all 0.3s ease;

  &:hover {
    background: rgba(255, 255, 255, 0.2);
  }

  @media (max-width: 743px) {
    // min-width: 80px;
    font-size: 13px;
    padding: 6px 10px;
  }
`,L0e=U(G.ul)`
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 8px;
  min-width: 120px;
  background: rgba(30, 30, 30, 0.9);
  backdrop-filter: blur(10px);
  color: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  z-index: 11;
  border: 1px solid rgba(255, 255, 255, 0.1);
`,k0e=U(G.li)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 14px;
  padding: 10px 16px;
  cursor: pointer;
  transition: background 0.2s;
  display: flex;
  align-items: center;
  gap: 8px;

  &:hover {
    background: rgba(255, 255, 255, 0.1);
  }

  &:not(:last-child) {
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  }
`,c7=U.span`
  font-size: 16px;
`,z0e=()=>{const{t:e,i18n:t}=jt(),[i,r]=J.useState(!1),n=[{code:"en",label:e("languageSwitcher.english"),flag:"🇬🇧"},{code:"es",label:e("languageSwitcher.spanish"),flag:"🇪🇸"},{code:"ru",label:e("languageSwitcher.russian"),flag:"🇷🇺"},{code:"uk",label:e("languageSwitcher.ukrainian"),flag:"🇺🇦"}],s=n.find(l=>l.code===t.language)||n[0],a=()=>r(l=>!l),o=async l=>{await t.changeLanguage(l),r(!1),window.location.reload()};return E.jsxs(R0e,{children:[E.jsxs(O0e,{onClick:a,"aria-label":"Change language",children:[E.jsx(c7,{children:"🌎"}),s.label,E.jsx("span",{children:"⌄"})]}),E.jsx(aA,{children:i&&E.jsx(L0e,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:n.map(l=>E.jsxs(k0e,{onClick:()=>o(l.code),whileHover:{scale:1.02},whileTap:{scale:.98},children:[E.jsx(c7,{children:l.flag}),l.label]},l.code))})})]})},e$="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4%207L8%2011L12%207'%20stroke='white'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",B0e=U.div`
  display: flex;
  align-items: center;
  position: relative;
  z-index: 1000;

  @media screen and (min-width: 1440px) {
    display: none;
  }
`,j0e=U.button`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 6px;
  border-radius: 12px;
  padding: 8px;
  width: 36px;
  height: 36px;
  cursor: pointer;
  z-index: 1001;
  backdrop-filter: blur(16px);
  box-shadow: 
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), 
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 
    0 8px 16px -8px rgba(0, 0, 0, 0.03), 
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%);
  border: none;
`,IM=U(G.div)`
  width: 20px;
  height: 2px;
  background: white;
  border-radius: 2px;
`,N0e=U(G.div)`
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.96);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: flex-start;
  gap: 5px;
  padding: 20px;
  z-index: 1000;
  overflow-y: auto;
`,u7=U(G.span)`
  font-family: var(--font-family);
  font-weight: 500;
  font-size: 56px;
  line-height: 120%;
  color: var(--white-50);
  margin: 12px 0;
  cursor: pointer;
  transition: color 0.3s ease;

  &:hover {
    color: var(--purple-400);
  }
`,V0e=U.div`
  position: relative;
  display: flex;
  flex-direction: column;
  width: 100%;
`,U0e=U(G.div)`
  position: relative;
  display: flex;
  flex-direction: column;
  padding-left: 20px;
  margin-top: 8px;
  overflow: hidden;
`,F0e=U.div`
  padding: 10px 0;
`,t$=U.img`
  margin-left: 8px;
  transition: transform 0.3s ease;
  transform: ${({$isOpen:e})=>e?"rotate(180deg)":"rotate(0)"};
`,H0e=U.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  cursor: pointer;
  
  span {
    flex-grow: 1;
  }
  
  ${t$} {
    padding: 8px;
    margin-right: -8px;
  }
`,G0e={open:{rotate:45,y:8},closed:{rotate:0,y:0}},W0e={open:{opacity:0},closed:{opacity:1}},q0e={open:{rotate:-45,y:-8},closed:{rotate:0,y:0}},X0e={open:{opacity:1,x:0},closed:{opacity:0,x:"-100%"}},Y0e=()=>{const[e,t]=J.useState(!1),[i,r]=J.useState(!1),{t:n}=jt();J.useEffect(()=>(document.body.style.overflow=e?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[e]);const s=l=>{l.preventDefault(),l.stopPropagation(),r(!i)},a=()=>{t(!1),r(!1)},o=[{to:"/home",labelKey:"header.nav.home"},{labelKey:"header.nav.service",isDropdown:!0,subItems:[{to:"/service/customer-experience",labelKey:"header.services.customerExperience"},{to:"/service/pos-staff-operations",labelKey:"header.services.posStaff"},{to:"/service/kitchen-fulfillment",labelKey:"header.services.kitchen"},{to:"/service/inventory-warehousing",labelKey:"header.services.inventory"},{to:"/service/analytics-management",labelKey:"header.services.analytics"},{to:"/service/marketing-customization",labelKey:"header.services.marketing"},{to:"/service/integration-scaling",labelKey:"header.services.integration"}]},{to:"/about",labelKey:"header.nav.about"},{to:"/pricing",labelKey:"header.nav.pricing"},{to:"/contact",labelKey:"header.nav.contacts"}];return E.jsxs(B0e,{children:[E.jsxs(j0e,{onClick:()=>t(!e),"aria-label":e?"Close menu":"Open menu",children:[E.jsx(IM,{animate:e?"open":"closed",variants:G0e}),E.jsx(IM,{animate:e?"open":"closed",variants:W0e}),E.jsx(IM,{animate:e?"open":"closed",variants:q0e})]}),E.jsx(aA,{children:e&&E.jsx(N0e,{initial:"closed",animate:"open",exit:"closed",variants:X0e,transition:{duration:.3},children:o.map((l,c)=>E.jsx("div",{children:l.isDropdown?E.jsxs(V0e,{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[E.jsx(u7,{onClick:s,children:E.jsxs(H0e,{children:[E.jsx("span",{children:n(l.labelKey)}),E.jsx(t$,{src:e$,alt:"▼",$isOpen:i})]})}),E.jsx(aA,{children:i&&E.jsx(U0e,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:l.subItems.map((u,h)=>E.jsx(F0e,{children:E.jsx(jge,{to:u.to,onClick:a,children:n(u.labelKey)})},h))})})]}):l.to?E.jsx(u7,{onClick:a,children:E.jsx(Ro,{to:l.to,children:n(l.labelKey)})}):null},c))})})]})},Q0e=()=>{const[e,t]=J.useState(!1),[i,r]=J.useState(!1),{t:n}=jt(),s=QT(),a=c=>{c.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),window.location.pathname!=="/home"&&s("/home")},o=()=>{r(!i)};J.useEffect(()=>{a7.init({duration:3e3}),a7.refresh();const c=()=>{t(window.scrollY>50)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const l=Yr({query:"(max-width: 1439px)"});return E.jsx(Oge,{$isScrolled:e,children:E.jsxs(Lge,{id:"header",children:[E.jsx(Bge,{to:"/home",onClick:a,children:E.jsx("img",{src:u3,alt:n("header.logoAlt")})}),!l&&E.jsxs(zge,{children:[E.jsx(b1,{children:E.jsx(Ro,{to:"/home",children:n("header.nav.home")})}),E.jsx(b1,{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:o,children:E.jsxs(Dge,{children:[E.jsxs(Ro,{to:"/service",style:{padding:"10px 0px"},children:[n("header.nav.service")," ",E.jsx(Ige,{src:e$,alt:"⬇️"})]}),i&&E.jsxs(Rge,{children:[E.jsx(Ap,{children:E.jsx(Ro,{to:"/service/customer-experience",children:n("header.services.customerExperience")})}),E.jsx(Ap,{children:E.jsx(Ro,{to:"/service/pos-staff-operations",children:n("header.services.posStaff")})}),E.jsx(Ap,{children:E.jsx(Ro,{to:"/service/kitchen-fulfillment",children:n("header.services.kitchen")})}),E.jsx(Ap,{children:E.jsx(Ro,{to:"/service/inventory-warehousing",children:n("header.services.inventory")})}),E.jsx(Ap,{children:E.jsx(Ro,{to:"/service/analytics-management",children:n("header.services.analytics")})}),E.jsx(Ap,{children:E.jsx(Ro,{to:"/service/marketing-customization",children:n("header.services.marketing")})}),E.jsx(Ap,{children:E.jsx(Ro,{to:"/service/integration-scaling",children:n("header.services.integration")})})]})]})}),E.jsx(b1,{children:E.jsx(Ro,{to:"/about",children:n("header.nav.about")})}),E.jsx(b1,{children:E.jsx(Ro,{to:"/pricing",children:n("header.nav.pricing")})}),E.jsx(b1,{children:E.jsx(Ro,{to:"/contact",children:n("header.nav.contacts")})})]}),E.jsx(kge,{children:E.jsxs("div",{style:{display:"flex"},children:[E.jsx(z0e,{}),E.jsx(I0e,{}),l&&E.jsx(Y0e,{})]})})]})})};var Zr={},oS={},lS={},cS={},RM,h7;function K0e(){if(h7)return RM;h7=1;var e="Expected a function",t=NaN,i="[object Symbol]",r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,l=typeof Jd=="object"&&Jd&&Jd.Object===Object&&Jd,c=typeof self=="object"&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),h=Object.prototype,f=h.toString,m=Math.max,g=Math.min,v=function(){return u.Date.now()};function x(C,D,T){var R,O,L,k,B,V,$=0,q=!1,Y=!1,X=!0;if(typeof C!="function")throw new TypeError(e);D=M(D)||0,S(T)&&(q=!!T.leading,Y="maxWait"in T,L=Y?m(M(T.maxWait)||0,D):L,X="trailing"in T?!!T.trailing:X);function ne(fe){var ye=R,_e=O;return R=O=void 0,$=fe,k=C.apply(_e,ye),k}function F(fe){return $=fe,B=setTimeout(oe,D),q?ne(fe):k}function K(fe){var ye=fe-V,_e=fe-$,Te=D-ye;return Y?g(Te,L-_e):Te}function re(fe){var ye=fe-V,_e=fe-$;return V===void 0||ye>=D||ye<0||Y&&_e>=L}function oe(){var fe=v();if(re(fe))return ce(fe);B=setTimeout(oe,K(fe))}function ce(fe){return B=void 0,X&&R?ne(fe):(R=O=void 0,k)}function de(){B!==void 0&&clearTimeout(B),$=0,R=V=O=B=void 0}function se(){return B===void 0?k:ce(v())}function xe(){var fe=v(),ye=re(fe);if(R=arguments,O=this,V=fe,ye){if(B===void 0)return F(V);if(Y)return B=setTimeout(oe,D),ne(V)}return B===void 0&&(B=setTimeout(oe,D)),k}return xe.cancel=de,xe.flush=se,xe}function b(C,D,T){var R=!0,O=!0;if(typeof C!="function")throw new TypeError(e);return S(T)&&(R="leading"in T?!!T.leading:R,O="trailing"in T?!!T.trailing:O),x(C,D,{leading:R,maxWait:D,trailing:O})}function S(C){var D=typeof C;return!!C&&(D=="object"||D=="function")}function _(C){return!!C&&typeof C=="object"}function A(C){return typeof C=="symbol"||_(C)&&f.call(C)==i}function M(C){if(typeof C=="number")return C;if(A(C))return t;if(S(C)){var D=typeof C.valueOf=="function"?C.valueOf():C;C=S(D)?D+"":D}if(typeof C!="string")return C===0?C:+C;C=C.replace(r,"");var T=s.test(C);return T||a.test(C)?o(C.slice(2),T?2:8):n.test(C)?t:+C}return RM=b,RM}var w1={},d7;function uL(){if(d7)return w1;d7=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.addPassiveEventListener=function(i,r,n){var s=n.name;s||(s=r,console.warn("Listener must be a named function.")),e.has(r)||e.set(r,new Set);var a=e.get(r);if(!a.has(s)){var o=function(){var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("test",null,c)}catch{}return l}();i.addEventListener(r,n,o?{passive:!0}:!1),a.add(s)}},w1.removePassiveEventListener=function(i,r,n){i.removeEventListener(r,n),e.get(r).delete(n.name||r)};var e=new Map;return w1}var f7;function hL(){if(f7)return cS;f7=1,Object.defineProperty(cS,"__esModule",{value:!0});var e=K0e(),t=r(e),i=uL();function r(a){return a&&a.__esModule?a:{default:a}}var n=function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66;return(0,t.default)(o,l)},s={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(o,l){if(o){var c=n(function(u){s.scrollHandler(o)},l);return s.scrollSpyContainers.push(o),(0,i.addPassiveEventListener)(o,"scroll",c),function(){(0,i.removePassiveEventListener)(o,"scroll",c),s.scrollSpyContainers.splice(s.scrollSpyContainers.indexOf(o),1)}}return function(){}},isMounted:function(o){return s.scrollSpyContainers.indexOf(o)!==-1},currentPositionX:function(o){if(o===document){var l=window.scrollY!==void 0,c=(document.compatMode||"")==="CSS1Compat";return l?window.scrollX:c?document.documentElement.scrollLeft:document.body.scrollLeft}else return o.scrollLeft},currentPositionY:function(o){if(o===document){var l=window.scrollX!==void 0,c=(document.compatMode||"")==="CSS1Compat";return l?window.scrollY:c?document.documentElement.scrollTop:document.body.scrollTop}else return o.scrollTop},scrollHandler:function(o){var l=s.scrollSpyContainers[s.scrollSpyContainers.indexOf(o)].spyCallbacks||[];l.forEach(function(c){return c(s.currentPositionX(o),s.currentPositionY(o))})},addStateHandler:function(o){s.spySetState.push(o)},addSpyHandler:function(o,l){var c=s.scrollSpyContainers[s.scrollSpyContainers.indexOf(l)];c.spyCallbacks||(c.spyCallbacks=[]),c.spyCallbacks.push(o)},updateStates:function(){s.spySetState.forEach(function(o){return o()})},unmount:function(o,l){s.scrollSpyContainers.forEach(function(c){return c.spyCallbacks&&c.spyCallbacks.length&&c.spyCallbacks.indexOf(l)>-1&&c.spyCallbacks.splice(c.spyCallbacks.indexOf(l),1)}),s.spySetState&&s.spySetState.length&&s.spySetState.indexOf(o)>-1&&s.spySetState.splice(s.spySetState.indexOf(o),1),document.removeEventListener("scroll",s.scrollHandler)},update:function(){return s.scrollSpyContainers.forEach(function(o){return s.scrollHandler(o)})}};return cS.default=s,cS}var uS={},hS={},p7;function d3(){if(p7)return hS;p7=1,Object.defineProperty(hS,"__esModule",{value:!0});var e=function(o,l){var c=o.indexOf("#")===0?o.substring(1):o,u=c?"#"+c:"",h=window&&window.location,f=u?h.pathname+h.search+u:h.pathname+h.search;l?history.pushState(history.state,"",f):history.replaceState(history.state,"",f)},t=function(){return window.location.hash.replace(/^#/,"")},i=function(o){return function(l){return o.contains?o!=l&&o.contains(l):!!(o.compareDocumentPosition(l)&16)}},r=function(o){return getComputedStyle(o).position!=="static"},n=function(o,l){for(var c=o.offsetTop,u=o.offsetParent;u&&!l(u);)c+=u.offsetTop,u=u.offsetParent;return{offsetTop:c,offsetParent:u}},s=function(o,l,c){if(c)return o===document?l.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):getComputedStyle(o).position!=="static"?l.offsetLeft:l.offsetLeft-o.offsetLeft;if(o===document)return l.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if(r(o)){if(l.offsetParent!==o){var u=function(x){return x===o||x===document},h=n(l,u),f=h.offsetTop,m=h.offsetParent;if(m!==o)throw new Error("Seems containerElement is not an ancestor of the Element");return f}return l.offsetTop}if(l.offsetParent===o.offsetParent)return l.offsetTop-o.offsetTop;var g=function(x){return x===document};return n(l,g).offsetTop-n(o,g).offsetTop};return hS.default={updateHash:e,getHash:t,filterElementInContainer:i,scrollOffset:s},hS}var dS={},fS={},m7;function Z0e(){return m7||(m7=1,Object.defineProperty(fS,"__esModule",{value:!0}),fS.default={defaultEasing:function(t){return t<.5?Math.pow(t*2,2)/2:1-Math.pow((1-t)*2,2)/2},linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}),fS}var pS={},g7;function $0e(){if(g7)return pS;g7=1,Object.defineProperty(pS,"__esModule",{value:!0});var e=uL(),t=["mousedown","wheel","touchmove","keydown"];return pS.default={subscribe:function(r){return typeof document<"u"&&t.forEach(function(n){return(0,e.addPassiveEventListener)(document,n,r)})}},pS}var mS={},v7;function dL(){if(v7)return mS;v7=1,Object.defineProperty(mS,"__esModule",{value:!0});var e={registered:{},scrollEvent:{register:function(i,r){e.registered[i]=r},remove:function(i){e.registered[i]=null}}};return mS.default=e,mS}var y7;function i$(){if(y7)return dS;y7=1,Object.defineProperty(dS,"__esModule",{value:!0});var e=Object.assign||function(O){for(var L=1;L<arguments.length;L++){var k=arguments[L];for(var B in k)Object.prototype.hasOwnProperty.call(k,B)&&(O[B]=k[B])}return O},t=d3();l(t);var i=Z0e(),r=l(i),n=$0e(),s=l(n),a=dL(),o=l(a);function l(O){return O&&O.__esModule?O:{default:O}}var c=function(L){return r.default[L.smooth]||r.default.defaultEasing},u=function(L){return typeof L=="function"?L:function(){return L}},h=function(){if(typeof window<"u")return window.requestAnimationFrame||window.webkitRequestAnimationFrame},f=function(){return h()||function(O,L,k){window.setTimeout(O,k||1e3/60,new Date().getTime())}}(),m=function(){return{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null}},g=function(L){var k=L.data.containerElement;if(k&&k!==document&&k!==document.body)return k.scrollLeft;var B=window.pageXOffset!==void 0,V=(document.compatMode||"")==="CSS1Compat";return B?window.pageXOffset:V?document.documentElement.scrollLeft:document.body.scrollLeft},v=function(L){var k=L.data.containerElement;if(k&&k!==document&&k!==document.body)return k.scrollTop;var B=window.pageXOffset!==void 0,V=(document.compatMode||"")==="CSS1Compat";return B?window.pageYOffset:V?document.documentElement.scrollTop:document.body.scrollTop},x=function(L){var k=L.data.containerElement;if(k&&k!==document&&k!==document.body)return k.scrollWidth-k.offsetWidth;var B=document.body,V=document.documentElement;return Math.max(B.scrollWidth,B.offsetWidth,V.clientWidth,V.scrollWidth,V.offsetWidth)},b=function(L){var k=L.data.containerElement;if(k&&k!==document&&k!==document.body)return k.scrollHeight-k.offsetHeight;var B=document.body,V=document.documentElement;return Math.max(B.scrollHeight,B.offsetHeight,V.clientHeight,V.scrollHeight,V.offsetHeight)},S=function O(L,k,B){var V=k.data;if(!k.ignoreCancelEvents&&V.cancel){o.default.registered.end&&o.default.registered.end(V.to,V.target,V.currentPositionY);return}if(V.delta=Math.round(V.targetPosition-V.startPosition),V.start===null&&(V.start=B),V.progress=B-V.start,V.percent=V.progress>=V.duration?1:L(V.progress/V.duration),V.currentPosition=V.startPosition+Math.ceil(V.delta*V.percent),V.containerElement&&V.containerElement!==document&&V.containerElement!==document.body?k.horizontal?V.containerElement.scrollLeft=V.currentPosition:V.containerElement.scrollTop=V.currentPosition:k.horizontal?window.scrollTo(V.currentPosition,0):window.scrollTo(0,V.currentPosition),V.percent<1){var $=O.bind(null,L,k);f.call(window,$);return}o.default.registered.end&&o.default.registered.end(V.to,V.target,V.currentPosition)},_=function(L){L.data.containerElement=L?L.containerId?document.getElementById(L.containerId):L.container&&L.container.nodeType?L.container:document:null},A=function(L,k,B,V){k.data=k.data||m(),window.clearTimeout(k.data.delayTimeout);var $=function(){k.data.cancel=!0};if(s.default.subscribe($),_(k),k.data.start=null,k.data.cancel=!1,k.data.startPosition=k.horizontal?g(k):v(k),k.data.targetPosition=k.absolute?L:L+k.data.startPosition,k.data.startPosition===k.data.targetPosition){o.default.registered.end&&o.default.registered.end(k.data.to,k.data.target,k.data.currentPosition);return}k.data.delta=Math.round(k.data.targetPosition-k.data.startPosition),k.data.duration=u(k.duration)(k.data.delta),k.data.duration=isNaN(parseFloat(k.data.duration))?1e3:parseFloat(k.data.duration),k.data.to=B,k.data.target=V;var q=c(k),Y=S.bind(null,q,k);if(k&&k.delay>0){k.data.delayTimeout=window.setTimeout(function(){o.default.registered.begin&&o.default.registered.begin(k.data.to,k.data.target),f.call(window,Y)},k.delay);return}o.default.registered.begin&&o.default.registered.begin(k.data.to,k.data.target),f.call(window,Y)},M=function(L){return L=e({},L),L.data=L.data||m(),L.absolute=!0,L},C=function(L){A(0,M(L))},D=function(L,k){A(L,M(k))},T=function(L){L=M(L),_(L),A(L.horizontal?x(L):b(L),L)},R=function(L,k){k=M(k),_(k);var B=k.horizontal?g(k):v(k);A(L+B,k)};return dS.default={animateTopScroll:A,getAnimationType:c,scrollToTop:C,scrollToBottom:T,scrollTo:D,scrollMore:R},dS}var x7;function f3(){if(x7)return uS;x7=1,Object.defineProperty(uS,"__esModule",{value:!0});var e=Object.assign||function(u){for(var h=1;h<arguments.length;h++){var f=arguments[h];for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(u[m]=f[m])}return u},t=d3(),i=o(t),r=i$(),n=o(r),s=dL(),a=o(s);function o(u){return u&&u.__esModule?u:{default:u}}var l={},c=void 0;return uS.default={unmount:function(){l={}},register:function(h,f){l[h]=f},unregister:function(h){delete l[h]},get:function(h){return l[h]||document.getElementById(h)||document.getElementsByName(h)[0]||document.getElementsByClassName(h)[0]},setActiveLink:function(h){return c=h},getActiveLink:function(){return c},scrollTo:function(h,f){var m=this.get(h);if(!m){console.warn("target Element not found");return}f=e({},f,{absolute:!1});var g=f.containerId,v=f.container,x=void 0;g?x=document.getElementById(g):v&&v.nodeType?x=v:x=document,f.absolute=!0;var b=f.horizontal,S=i.default.scrollOffset(x,m,b)+(f.offset||0);if(!f.smooth){a.default.registered.begin&&a.default.registered.begin(h,m),x===document?f.horizontal?window.scrollTo(S,0):window.scrollTo(0,S):x.scrollTop=S,a.default.registered.end&&a.default.registered.end(h,m);return}n.default.animateTopScroll(S,f,h,m)}},uS}var gS={},b7;function r$(){if(b7)return gS;b7=1,Object.defineProperty(gS,"__esModule",{value:!0}),uL();var e=d3(),t=i(e);function i(n){return n&&n.__esModule?n:{default:n}}var r={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(s){this.scroller=s,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(s,a){this.containers[s]=a},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var s=this,a=this.getHash();a?window.setTimeout(function(){s.scrollTo(a,!0),s.initialized=!0},10):this.initialized=!0},scrollTo:function(s,a){var o=this.scroller,l=o.get(s);if(l&&(a||s!==o.getActiveLink())){var c=this.containers[s]||document;o.scrollTo(s,{container:c})}},getHash:function(){return t.default.getHash()},changeHash:function(s,a){this.isInitialized()&&t.default.getHash()!==s&&t.default.updateHash(s,a)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};return gS.default=r,gS}var w7;function fL(){if(w7)return lS;w7=1,Object.defineProperty(lS,"__esModule",{value:!0});var e=Object.assign||function(b){for(var S=1;S<arguments.length;S++){var _=arguments[S];for(var A in _)Object.prototype.hasOwnProperty.call(_,A)&&(b[A]=_[A])}return b},t=function(){function b(S,_){for(var A=0;A<_.length;A++){var M=_[A];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}return function(S,_,A){return _&&b(S.prototype,_),A&&b(S,A),S}}(),i=Jh(),r=f(i),n=hL(),s=f(n),a=f3(),o=f(a),l=cw(),c=f(l),u=r$(),h=f(u);function f(b){return b&&b.__esModule?b:{default:b}}function m(b,S){if(!(b instanceof S))throw new TypeError("Cannot call a class as a function")}function g(b,S){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:b}function v(b,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);b.prototype=Object.create(S&&S.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(b,S):b.__proto__=S)}var x={to:c.default.string.isRequired,containerId:c.default.string,container:c.default.object,activeClass:c.default.string,activeStyle:c.default.object,spy:c.default.bool,horizontal:c.default.bool,smooth:c.default.oneOfType([c.default.bool,c.default.string]),offset:c.default.number,delay:c.default.number,isDynamic:c.default.bool,onClick:c.default.func,duration:c.default.oneOfType([c.default.number,c.default.func]),absolute:c.default.bool,onSetActive:c.default.func,onSetInactive:c.default.func,ignoreCancelEvents:c.default.bool,hashSpy:c.default.bool,saveHashHistory:c.default.bool,spyThrottle:c.default.number};return lS.default=function(b,S){var _=S||o.default,A=function(C){v(D,C);function D(T){m(this,D);var R=g(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,T));return M.call(R),R.state={active:!1},R.beforeUnmountCallbacks=[],R}return t(D,[{key:"getScrollSpyContainer",value:function(){var R=this.props.containerId,O=this.props.container;return R&&!O?document.getElementById(R):O&&O.nodeType?O:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var R=this.getScrollSpyContainer();if(!s.default.isMounted(R)){var O=s.default.mount(R,this.props.spyThrottle);this.beforeUnmountCallbacks.push(O)}this.props.hashSpy&&(h.default.isMounted()||h.default.mount(_),h.default.mapContainer(this.props.to,R)),s.default.addSpyHandler(this.spyHandler,R),this.setState({container:R})}}},{key:"componentWillUnmount",value:function(){s.default.unmount(this.stateHandler,this.spyHandler),this.beforeUnmountCallbacks.forEach(function(R){return R()})}},{key:"render",value:function(){var R="";this.state&&this.state.active?R=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():R=this.props.className;var O={};this.state&&this.state.active?O=e({},this.props.style,this.props.activeStyle):O=e({},this.props.style);var L=e({},this.props);for(var k in x)L.hasOwnProperty(k)&&delete L[k];return L.className=R,L.style=O,L.onClick=this.handleClick,r.default.createElement(b,L)}}]),D}(r.default.PureComponent),M=function(){var D=this;this.scrollTo=function(T,R){_.scrollTo(T,e({},D.state,R))},this.handleClick=function(T){D.props.onClick&&D.props.onClick(T),T.stopPropagation&&T.stopPropagation(),T.preventDefault&&T.preventDefault(),D.scrollTo(D.props.to,D.props)},this.spyHandler=function(T,R){var O=D.getScrollSpyContainer();if(!(h.default.isMounted()&&!h.default.isInitialized())){var L=D.props.horizontal,k=D.props.to,B=null,V=void 0,$=void 0;if(L){var q=0,Y=0,X=0;if(O.getBoundingClientRect){var ne=O.getBoundingClientRect();X=ne.left}if(!B||D.props.isDynamic){if(B=_.get(k),!B)return;var F=B.getBoundingClientRect();q=F.left-X+T,Y=q+F.width}var K=T-D.props.offset;V=K>=Math.floor(q)&&K<Math.floor(Y),$=K<Math.floor(q)||K>=Math.floor(Y)}else{var re=0,oe=0,ce=0;if(O.getBoundingClientRect){var de=O.getBoundingClientRect();ce=de.top}if(!B||D.props.isDynamic){if(B=_.get(k),!B)return;var se=B.getBoundingClientRect();re=se.top-ce+R,oe=re+se.height}var xe=R-D.props.offset;V=xe>=Math.floor(re)&&xe<Math.floor(oe),$=xe<Math.floor(re)||xe>=Math.floor(oe)}var fe=_.getActiveLink();if($){if(k===fe&&_.setActiveLink(void 0),D.props.hashSpy&&h.default.getHash()===k){var ye=D.props.saveHashHistory,_e=ye===void 0?!1:ye;h.default.changeHash("",_e)}D.props.spy&&D.state.active&&(D.setState({active:!1}),D.props.onSetInactive&&D.props.onSetInactive(k,B))}if(V&&(fe!==k||D.state.active===!1)){_.setActiveLink(k);var Te=D.props.saveHashHistory,Ce=Te===void 0?!1:Te;D.props.hashSpy&&h.default.changeHash(k,Ce),D.props.spy&&(D.setState({active:!0}),D.props.onSetActive&&D.props.onSetActive(k,B))}}}};return A.propTypes=x,A.defaultProps={offset:0},A},lS}var S7;function J0e(){if(S7)return oS;S7=1,Object.defineProperty(oS,"__esModule",{value:!0});var e=Jh(),t=n(e),i=fL(),r=n(i);function n(c){return c&&c.__esModule?c:{default:c}}function s(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function a(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function o(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var l=function(c){o(u,c);function u(){var h,f,m,g;s(this,u);for(var v=arguments.length,x=Array(v),b=0;b<v;b++)x[b]=arguments[b];return g=(f=(m=a(this,(h=u.__proto__||Object.getPrototypeOf(u)).call.apply(h,[this].concat(x))),m),m.render=function(){return t.default.createElement("a",m.props,m.props.children)},f),a(m,g)}return u}(t.default.Component);return oS.default=(0,r.default)(l),oS}var vS={},_7;function eve(){if(_7)return vS;_7=1,Object.defineProperty(vS,"__esModule",{value:!0});var e=function(){function u(h,f){for(var m=0;m<f.length;m++){var g=f[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}return function(h,f,m){return f&&u(h.prototype,f),m&&u(h,m),h}}(),t=Jh(),i=s(t),r=fL(),n=s(r);function s(u){return u&&u.__esModule?u:{default:u}}function a(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}function o(u,h){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:u}function l(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(u,h):u.__proto__=h)}var c=function(u){l(h,u);function h(){return a(this,h),o(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return e(h,[{key:"render",value:function(){return i.default.createElement("button",this.props,this.props.children)}}]),h}(i.default.Component);return vS.default=(0,n.default)(c),vS}var yS={},xS={},E7;function n$(){if(E7)return xS;E7=1,Object.defineProperty(xS,"__esModule",{value:!0});var e=Object.assign||function(m){for(var g=1;g<arguments.length;g++){var v=arguments[g];for(var x in v)Object.prototype.hasOwnProperty.call(v,x)&&(m[x]=v[x])}return m},t=function(){function m(g,v){for(var x=0;x<v.length;x++){var b=v[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,v,x){return v&&m(g.prototype,v),x&&m(g,x),g}}(),i=Jh(),r=c(i),n=u6();c(n);var s=f3(),a=c(s),o=cw(),l=c(o);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function h(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function f(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}return xS.default=function(m){var g=function(v){f(x,v);function x(b){u(this,x);var S=h(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,b));return S.childBindings={domNode:null},S}return t(x,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(S){this.props.name!==S.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;a.default.unregister(this.props.name)}},{key:"registerElems",value:function(S){a.default.register(S,this.childBindings.domNode)}},{key:"render",value:function(){return r.default.createElement(m,e({},this.props,{parentBindings:this.childBindings}))}}]),x}(r.default.Component);return g.propTypes={name:l.default.string,id:l.default.string},g},xS}var A7;function tve(){if(A7)return yS;A7=1,Object.defineProperty(yS,"__esModule",{value:!0});var e=Object.assign||function(m){for(var g=1;g<arguments.length;g++){var v=arguments[g];for(var x in v)Object.prototype.hasOwnProperty.call(v,x)&&(m[x]=v[x])}return m},t=function(){function m(g,v){for(var x=0;x<v.length;x++){var b=v[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,v,x){return v&&m(g.prototype,v),x&&m(g,x),g}}(),i=Jh(),r=l(i),n=n$(),s=l(n),a=cw(),o=l(a);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function u(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function h(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var f=function(m){h(g,m);function g(){return c(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return t(g,[{key:"render",value:function(){var x=this,b=e({},this.props);return delete b.name,b.parentBindings&&delete b.parentBindings,r.default.createElement("div",e({},b,{ref:function(_){x.props.parentBindings.domNode=_}}),this.props.children)}}]),g}(r.default.Component);return f.propTypes={name:o.default.string,id:o.default.string},yS.default=(0,s.default)(f),yS}var OM,T7;function ive(){if(T7)return OM;T7=1;var e=Object.assign||function(f){for(var m=1;m<arguments.length;m++){var g=arguments[m];for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(f[v]=g[v])}return f},t=function(){function f(m,g){for(var v=0;v<g.length;v++){var x=g[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(m,x.key,x)}}return function(m,g,v){return g&&f(m.prototype,g),v&&f(m,v),m}}();function i(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function r(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function n(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var s=Jh();u6(),d3();var a=hL(),o=f3(),l=cw(),c=r$(),u={to:l.string.isRequired,containerId:l.string,container:l.object,activeClass:l.string,spy:l.bool,smooth:l.oneOfType([l.bool,l.string]),offset:l.number,delay:l.number,isDynamic:l.bool,onClick:l.func,duration:l.oneOfType([l.number,l.func]),absolute:l.bool,onSetActive:l.func,onSetInactive:l.func,ignoreCancelEvents:l.bool,hashSpy:l.bool,spyThrottle:l.number},h={Scroll:function(m,g){console.warn("Helpers.Scroll is deprecated since v1.7.0");var v=g||o,x=function(S){n(_,S);function _(A){i(this,_);var M=r(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A));return b.call(M),M.state={active:!1},M}return t(_,[{key:"getScrollSpyContainer",value:function(){var M=this.props.containerId,C=this.props.container;return M?document.getElementById(M):C&&C.nodeType?C:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var M=this.getScrollSpyContainer();a.isMounted(M)||a.mount(M,this.props.spyThrottle),this.props.hashSpy&&(c.isMounted()||c.mount(v),c.mapContainer(this.props.to,M)),this.props.spy&&a.addStateHandler(this.stateHandler),a.addSpyHandler(this.spyHandler,M),this.setState({container:M})}}},{key:"componentWillUnmount",value:function(){a.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var M="";this.state&&this.state.active?M=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():M=this.props.className;var C=e({},this.props);for(var D in u)C.hasOwnProperty(D)&&delete C[D];return C.className=M,C.onClick=this.handleClick,s.createElement(m,C)}}]),_}(s.Component),b=function(){var _=this;this.scrollTo=function(A,M){v.scrollTo(A,e({},_.state,M))},this.handleClick=function(A){_.props.onClick&&_.props.onClick(A),A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault(),_.scrollTo(_.props.to,_.props)},this.stateHandler=function(){v.getActiveLink()!==_.props.to&&(_.state!==null&&_.state.active&&_.props.onSetInactive&&_.props.onSetInactive(),_.setState({active:!1}))},this.spyHandler=function(A){var M=_.getScrollSpyContainer();if(!(c.isMounted()&&!c.isInitialized())){var C=_.props.to,D=null,T=0,R=0,O=0;if(M.getBoundingClientRect){var L=M.getBoundingClientRect();O=L.top}if(!D||_.props.isDynamic){if(D=v.get(C),!D)return;var k=D.getBoundingClientRect();T=k.top-O+A,R=T+k.height}var B=A-_.props.offset,V=B>=Math.floor(T)&&B<Math.floor(R),$=B<Math.floor(T)||B>=Math.floor(R),q=v.getActiveLink();if($)return C===q&&v.setActiveLink(void 0),_.props.hashSpy&&c.getHash()===C&&c.changeHash(),_.props.spy&&_.state.active&&(_.setState({active:!1}),_.props.onSetInactive&&_.props.onSetInactive()),a.updateStates();if(V&&q!==C)return v.setActiveLink(C),_.props.hashSpy&&c.changeHash(C),_.props.spy&&(_.setState({active:!0}),_.props.onSetActive&&_.props.onSetActive(C)),a.updateStates()}}};return x.propTypes=u,x.defaultProps={offset:0},x},Element:function(m){console.warn("Helpers.Element is deprecated since v1.7.0");var g=function(v){n(x,v);function x(b){i(this,x);var S=r(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,b));return S.childBindings={domNode:null},S}return t(x,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(S){this.props.name!==S.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;o.unregister(this.props.name)}},{key:"registerElems",value:function(S){o.register(S,this.childBindings.domNode)}},{key:"render",value:function(){return s.createElement(m,e({},this.props,{parentBindings:this.childBindings}))}}]),x}(s.Component);return g.propTypes={name:l.string,id:l.string},g}};return OM=h,OM}var C7;function rve(){if(C7)return Zr;C7=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.Helpers=Zr.ScrollElement=Zr.ScrollLink=Zr.animateScroll=Zr.scrollSpy=Zr.Events=Zr.scroller=Zr.Element=Zr.Button=Zr.Link=void 0;var e=J0e(),t=A(e),i=eve(),r=A(i),n=tve(),s=A(n),a=f3(),o=A(a),l=dL(),c=A(l),u=hL(),h=A(u),f=i$(),m=A(f),g=fL(),v=A(g),x=n$(),b=A(x),S=ive(),_=A(S);function A(M){return M&&M.__esModule?M:{default:M}}return Zr.Link=t.default,Zr.Button=r.default,Zr.Element=s.default,Zr.scroller=o.default,Zr.Events=c.default,Zr.scrollSpy=h.default,Zr.animateScroll=m.default,Zr.ScrollLink=v.default,Zr.ScrollElement=b.default,Zr.Helpers=_.default,Zr.default={Link:t.default,Button:r.default,Element:s.default,scroller:o.default,Events:c.default,scrollSpy:h.default,animateScroll:m.default,ScrollLink:v.default,ScrollElement:b.default,Helpers:_.default},Zr}var TE=rve();const nve=U.div`
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translate(-50%, -50%);
  max-width: 1920px;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  z-index: -1;

  /* Тіні */
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 100px;
    background: linear-gradient(to bottom, rgb(0, 0, 0) 0%, transparent 100%);
    z-index: 2;
    pointer-events: none;
  }
  
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 100px;
    background: linear-gradient(to top, rgb(0, 0, 0) 0%, transparent 100%);
    z-index: 2;
    pointer-events: none;
  }

  iframe, canvas {
    width: 100% !important;
    height: 100% !important;
    display: block;
    position: relative;
    z-index: 1;
    object-fit: contain;
    pointer-events: auto;
  }

  /* Мобільні пристрої */
  @media screen and (max-width: 767px) {
    height: 100vh;
    z-index: -2; /* Поміщаємо під інші елементи */
    
    &::before,
    &::after {
      height: 50px;
    }

    iframe, canvas {
      pointer-events: none; /* Вимкнення клікабельності */
      z-index: -1; /* Нижчий z-index для iframe/canvas */
      opacity: 0.7; /* Додаткове затемнення для мобільних */
    }
  }
`,sve=U.img`
  position: absolute;
  top: 30%;
  left: 50%;
  transform: translate(-50%, -50%);
  max-width: 1400px;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  z-index: 100;

    /* Тіні */
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 100px;
    background: linear-gradient(to bottom, rgb(0, 0, 0) 0%, transparent 100%);
    z-index: 2;
    pointer-events: none;
  }
  
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 100px;
    background: linear-gradient(to top, rgb(0, 0, 0) 0%, transparent 100%);
    z-index: 2;
    pointer-events: none;
  }

    @media screen and (max-width: 767px) {
    height: 100vh;
    z-index: -2; /* Поміщаємо під інші елементи */
    
    &::before,
    &::after {
      height: 50px;
    }
  }
`,ave=U.div`
  margin: 0 auto;
  margin-top: 100px;
  width: 100%;
  height: 100%;
  margin-bottom: 100px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;

  @media screen and (min-width: 768px) {
    margin-top: 100px;
    margin-bottom: 100px;
  }

  @media screen and (min-width: 1440px) {
    margin-top: 100px;
    margin-bottom: 150px;
  }
`,Ml=U.p`
display: flex;
justify-content: space-around;
border-radius: 24px;
    padding: 4px 1px 4px 14px;
    width: max-content;
height: auto;
align-items: center;


font-family: var(--font-family);
font-weight: 400;
font-size: 12px;
color: var(--white-100);
    margin: 0 auto;
margin-bottom: 8px;
backdrop-filter: blur(16px);
box-shadow: inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 0 8px 16px -8px rgba(0, 0, 0, 0.03), 0 2px 4px -2px rgba(0, 0, 0, 0.08);
background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%) backdrop-filter: blur(16px);
box-shadow: inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 0 8px 16px -8px rgba(0, 0, 0, 0.03), 0 2px 4px -2px rgba(0, 0, 0, 0.08);
background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%);;

@media screen and (min-width: 1440px) {


}
`,ove=U.span`
  border-radius: 25px;
  margin-left: 10px;
  padding: 4px;
  width: 22px;
  height: 22px;
  font-size: 13px;

  box-shadow:
    inset 0 -8px 24px rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.03),
    0 2px 4px rgba(0, 0, 0, 0.08),
    0 0px 10px rgba(207, 121, 250, 0.5); /* ніжне фіолетове світіння */

  background: linear-gradient(
    315deg,
    rgba(232, 198, 247, 0.96) 7%,
    rgba(207, 121, 250, 0.54) 86%
  );
`,Pl=U.h1`
  margin: 0 auto;
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  background: linear-gradient(142deg, #fff 0%, #f7f8fd 28.77%, #b6b8ee 86.41%, #6a82fc 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 36px;

  @media screen and (min-width: 1440px) {
    font-size: 72px;
    line-height: 112%;
    max-width: 935px;
  }
`,lve=U.p`
font-family: var(--font-family);
font-weight: 400;
font-size: 16px;
text-align: center;
color: var(--white-80);

@media screen and (min-width: 1440px) {
width: 100%;
width: 835px;
font-family: var(--font-family);
font-weight: 400;
font-size: 17px;
line-height: 130%;
text-align: center;
color: var(--white-75);
margin-bottom: 36px;
}
`,cve=U.div`
  width: 100%;
  max-width: 830px;
  margin: 0 auto; // Це важливо для центрування
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;

  @media screen and (max-width: 768px) {
  margin: 0 auto;
    padding: 0 16px;
     display: flex;
  justify-content: center;
  width: 100%;
  margin-bottom: 36px;
  }
`,uve=U.div`
  width: 100%;
  max-width: 343px;
  height: 36px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  margin-top: 24px;

  @media screen and (min-width: 1440px) {
    margin: 0 auto;
    margin-bottom: 36px;
  }
`,hve=U.div`
  display: flex;
  justify-content: center;
  width: 100%;
  height: 36px;

  @media screen and (min-width: 1440px) {
    width: auto;
    margin: 0 auto;
  }
`,dve=U.img`
border-radius: 18px;
border: 1px solid var(--black);
width: 36px;
height: 36px;
margin-left: -20px;
`,fve=U.p`
font-family: var(--font-family);
font-weight: 400;
font-size: 12px;
color: var(--white-100);
`,Pu=U.div`
margin: 0 auto;
width: 285px;
// height: 43px;
margin-top: 20px;
display: flex;
gap: 16px;
justify-content: center;

@media screen and (min-width: 1440px) {


}
`,Du=U.button`
z-index: 10;
  border-radius: 12px;
width: 100%;
  position: relative;
  overflow: hidden;

  margin-right: 12px;

  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-100);
  
  box-shadow: inset 0 0 6px 0 rgba(255, 255, 255, 0.54);
  background: linear-gradient(139deg, #494bec, #6a6bff, #494bec, #3a3bc7);
  background-size: 300% 300%;
  
  transition: all 0.4s ease;
  
  &:hover {
    box-shadow: inset 0 0 8px 0 rgba(255, 255, 255, 0.74), 
                0 0 15px rgba(73, 75, 236, 0.5);
    transform: perspective(500px) rotateX(10deg) translateY(-2px);
    animation: ${AE} 2s infinite, ${su} 3s ease infinite;
    background-size: 200% 200%;
  }
  
  &:active {
    animation: ${h3} 0.3s ease, ${su} 6s ease infinite;
    background: linear-gradient(139deg, #3a3bc7, #494bec, #3a3bc7);
  }
  
  &::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background: rgba(255, 255, 255, 0.5);
    opacity: 0;
    border-radius: 100%;
    transform: scale(1, 1) translate(-50%, -50%);
    transform-origin: 50% 50%;
  }
  
  &:focus:not(:active)::after {
    animation: ripple 0.6s ease-out;
  }
  
  @keyframes ripple {
    0% {
      transform: scale(0, 0);
      opacity: 0.5;
    }
    100% {
      transform: scale(20, 20);
      opacity: 0;
    }
  }
border-radius: 12px;
padding: 12px 12px;
width: 100%;
height: auto;
`,s$=cn`
  0% {
    box-shadow: 0 0 0 0 rgba(73, 73, 74, 0.81);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(73, 75, 236, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(73, 75, 236, 0);
  }
`,Iu=U.button`
z-index: 10;
  border-radius: 12px;
  width: 110px;
  position: relative;
  overflow: hidden;
  
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-100);
  
  box-shadow: inset 0 0 6px 0 rgba(255, 255, 255, 0.54);
  background: linear-gradient(180deg, rgb(255, 255, 255) 7%, rgba(255, 255, 255, 0) 86%), rgba(255, 255, 255, 0.03) ;
  background-size: 300% 300%;
  
  transition: all 0.4s ease;
  
  &:hover {
    box-shadow: inset 0 0 8px 0 rgba(255, 255, 255, 0.74), 
                0 0 15px rgba(115, 115, 115, 0.5);
    transform: perspective(500px) rotateX(10deg) translateY(-2px);
    animation: ${s$} 2s infinite, ${su} 3s ease infinite;
    background-size: 200% 200%;
  }
  
  &:active {
    animation: ${h3} 0.3s ease, ${su} 6s ease infinite;
    background: linear-gradient(139deg, #3a3bc7, #494bec, #3a3bc7);
  }
  

  
  &:focus:not(:active)::after {
    animation: ripple 0.6s ease-out;
  }
  
  @keyframes ripple {
    0% {
      transform: scale(0, 0);
      opacity: 0.5;
    }
    100% {
      transform: scale(20, 20);
      opacity: 0;
    }
  }
border: 1px solid #212121;
border-radius: 12px;
padding: 12px 12px;
width: 100%;

backdrop-filter: blur(168px);
box-shadow: inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 0 8px 16px -8px rgba(0, 0, 0, 0.03), 0 2px 4px -2px rgba(0, 0, 0, 0.08);
background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%) , rgba(255, 255, 255, 0.03);
`,pve=U.footer`

text-align: center;
  background: transparent;
color: rgba(255, 255, 255, 0.8);
  transition: all 0.3s ease;
width: 100%;
margin: 0 auto;
// position: fixed;
bottom: 0; 
z-index: 1;

 @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  max-width: 1440px;
  margin: 0 auto;
  padding: 0 auto;
  }`,mve=U.div`
   @media screen and (min-width: 768px) {
  display: flex;
 gap: 74px;
  }
    @media screen and (min-width: 1440px) {
         display: flex;
        flex-direction: row;
        align-items: stretch;
        gap: 30px;
        margin-right: 40px;
  }
  `,a$=U.p`
  padding: 0px auto 50px auto;
  width: 98%;
  height: 2px; /* Збільшуємо висоту для еліпса */
  margin: 0 auto;
background:  var(--white-24);
position: relative;
z-index: 10;
margin-bottom: 16px;

 @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,gve=U.div`
  display: flex;
    width: 100%;
    margin: 0 auto;
    padding: 24px 16px;
    height: 100%;
    flex-direction: column;
    justify-content: space-between;
    align-items: flex-start;
    flex-wrap: nowrap;

 @media screen and (min-width: 768px) {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: baseline;
        width: 100%;
  }
  
@media screen and (min-width: 1440px){
display: flex;
  margin: 0 auto;
   padding: 50px 0px;
}
`,S1=U.div`
 display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
    align-items: flex-start;
    gap: 5px;
`,vve=U.a`
  font-size: 1.5rem;
  font-weight: bold;
  color: #00d1ff;
  text-decoration: none;
  z-index: 10;
  img {
 width: 142px;
height: 19px;
  overflov: hidden;

  
  &:hover,
  &:focus,
  &.active {
    color: #00ffe7;
    fill: #00ffe7;
  }
  }

   @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  margin: 20px;
  }
`,bS=U.div`
font-family: var(--font-family);
font-weight: 400;
font-size: 16px;
line-height: 130%;
color: var(--white-100);
margin-bottom: 16px;
margin-top: 16px;

 @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,zg=U(Bm)`
font-family: var(--font-family);
font-weight: 400;
font-size: 15px;
color: var(--white-50);
margin-bottom: 10px;

 @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`;U.a`
font-family: var(--font-family);
font-weight: 400;
font-size: 15px;
color: var(--white-50);
margin-bottom: 10px;

 @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`;const M7=U.div`
display: flex;
margin-bottom: 16px;

 @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,yve=U.div`
display: flex;
justify-content: space-between;
margin: 0 auto;
width: 100%;
flex-wrap: wrap;

 @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,wS=U(Bm)`
font-family: var(--font-family);
font-weight: 400;
font-size: 14px;
line-height: 130%;
color: var(--white-50);
display: flex;
align-items: center;
gap: 7px;
margin-left: 7px;

 @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,P7=U.div`
font-family: var(--font-family);
font-weight: 400;
font-size: 16px;
line-height: 130%;
color: var(--white-50);
border: 1px solid  var(--white-50);
width: 1px;
    height: 1px;

     @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,xve=U.button`
z-index: 10;
  border-radius: 12px;
  position: relative;
  overflow: hidden;
  
font-family: var(--font-family);
font-weight: 400;
font-size: 14px;
line-height: 130%;
color: var(--white-100);
margin-bottom: 16px;
  
  box-shadow: inset 0 0 6px 0 rgba(255, 255, 255, 0.54);
  background: linear-gradient(180deg, rgb(255, 255, 255) 7%, rgba(255, 255, 255, 0) 86%), rgba(255, 255, 255, 0.03) ;
  background-size: 300% 300%;
  
  transition: all 0.4s ease;
  
  &:hover {
    box-shadow: inset 0 0 8px 0 rgba(255, 255, 255, 0.74), 
                0 0 15px rgba(115, 115, 115, 0.5);
    transform: perspective(500px) rotateX(10deg) translateY(-2px);
    animation: ${s$} 2s infinite, ${su} 3s ease infinite;
    background-size: 200% 200%;
  }
  
  &:active {
    animation: ${h3} 0.3s ease, ${su} 6s ease infinite;
    background: linear-gradient(139deg, #3a3bc7, #494bec, #3a3bc7);
  }
  

  
  &:focus:not(:active)::after {
    animation: ripple 0.6s ease-out;
  }
  
  @keyframes ripple {
    0% {
      transform: scale(0, 0);
      opacity: 0.5;
    }
    100% {
      transform: scale(20, 20);
      opacity: 0;
    }
  }
border: 1px solid #212121;
border-radius: 12px;
padding: 8px 16px;
width: max-content;;
height: 34px;

backdrop-filter: blur(168px);
box-shadow: inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 0 8px 16px -8px rgba(0, 0, 0, 0.03), 0 2px 4px -2px rgba(0, 0, 0, 0.08);
background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%) , rgba(255, 255, 255, 0.03);
 @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,bve=U.div`
    flex-flow: wrap;
    align-items: flex-end;
    align-content: space-between;
    width: 100%;
    display: flex;
    justify-content: space-between;
 @media screen and (min-width: 768px) {
  flex-direction: row-reverse;
          margin: 0 20px;
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,wve=U.div`
display: flex;
gap: 12px;
flex-direction: row;
margin: 16px;

 @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
;`,LM=U.a`
 @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,kM=U.img`
 @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,Sve=U.div`
  width: 100%;
 margin: 80px auto 80px auto;
background:rgba(0, 0, 0, 0.86);
// opacity: 0.2;/
  color: #fff;
  position: relative;
  padding: 16px;
overflow: visible;
height: auto;
      @media screen and (min-width: 744px){


}

@media screen and (min-width: 1440px){
margin-top:15% ; 

}
`,zM=U.section`
  max-width: 800px;
  margin: 0 auto ;
  padding: 20px;

      @media screen and (min-width: 744px){


}

@media screen and (min-width: 1440px){


}
`;U.div`
  display: flex;
  justify-content: center;
  margin-bottom: 20px;

      @media screen and (min-width: 744px){


}

@media screen and (min-width: 1440px){


}
`;const xr=U.h2`
font-family: var(--font-family);
font-weight: 400;
font-size: 18px;
line-height: 130%;
color: var(--white-100);
display: flex;
    align-items: center;
    justify-content: start;
    margin-bottom: 20px;
   

        @media screen and (min-width: 744px){


}

@media screen and (min-width: 1440px){


}
`,D7=U.p`
  padding: 0px auto 50px auto;
  width: 98%;
  height: 2px; 
  margin: 40px auto;
background:  var(--white-24);
position: relative;
z-index: 10;
@media screen and (min-width: 744px){


}

@media screen and (min-width: 1440px){
max-width: 1440px;

}
`,SS=U.div`
 

  p {
font-family: var(--font-family);
font-weight: 400;
font-size: 16px;
color: var(--white-75);
margin-bottom: 10px;
  }

      @media screen and (min-width: 744px){


}

@media screen and (min-width: 1440px){


}
`;U.img`
  width: 56px;
  height: 56px;

      @media screen and (min-width: 744px){


}

@media screen and (min-width: 1440px){


}
`;const _ve="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_2233_8371)'%3e%3cpath%20d='M10%200C4.4772%200%200%204.4772%200%2010C0%2014.6896%203.2288%2018.6248%207.5844%2019.7056V13.056H5.5224V10H7.5844V8.6832C7.5844%205.2796%209.1248%203.702%2012.4664%203.702C13.1%203.702%2014.1932%203.8264%2014.6404%203.9504V6.7204C14.4044%206.6956%2013.9944%206.6832%2013.4852%206.6832C11.8456%206.6832%2011.212%207.3044%2011.212%208.9192V10H14.4784L13.9172%2013.056H11.212V19.9268C16.1636%2019.3288%2020.0004%2015.1128%2020.0004%2010C20%204.4772%2015.5228%200%2010%200Z'%20fill='white'%20fill-opacity='0.25'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_2233_8371'%3e%3crect%20width='20'%20height='20'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Eve="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.0276%200C12.1526%200.003%2012.7236%200.009%2013.2166%200.023L13.4106%200.03C13.6346%200.038%2013.8556%200.0479999%2014.1226%200.0599999C15.1866%200.11%2015.9126%200.278%2016.5496%200.525C17.2096%200.779%2017.7656%201.123%2018.3216%201.678C18.8303%202.17773%2019.2238%202.78247%2019.4746%203.45C19.7216%204.087%2019.8896%204.813%2019.9396%205.878C19.9516%206.144%2019.9616%206.365%2019.9696%206.59L19.9756%206.784C19.9906%207.276%2019.9966%207.847%2019.9986%208.972L19.9996%209.718V11.028C20.002%2011.7574%2019.9944%2012.4868%2019.9766%2013.216L19.9706%2013.41C19.9626%2013.635%2019.9526%2013.856%2019.9406%2014.122C19.8906%2015.187%2019.7206%2015.912%2019.4746%2016.55C19.2238%2017.2175%2018.8303%2017.8223%2018.3216%2018.322C17.8219%2018.8307%2017.2171%2019.2242%2016.5496%2019.475C15.9126%2019.722%2015.1866%2019.89%2014.1226%2019.94L13.4106%2019.97L13.2166%2019.976C12.7236%2019.99%2012.1526%2019.997%2011.0276%2019.999L10.2816%2020H8.97259C8.24285%2020.0026%207.51312%2019.9949%206.78359%2019.977L6.58959%2019.971C6.3522%2019.962%206.11487%2019.9517%205.87759%2019.94C4.81359%2019.89%204.08759%2019.722%203.44959%2019.475C2.78242%2019.2241%202.17804%2018.8306%201.67859%2018.322C1.16954%2017.8224%200.775701%2017.2176%200.524592%2016.55C0.277592%2015.913%200.109592%2015.187%200.0595922%2014.122L0.0295922%2013.41L0.0245923%2013.216C0.00615837%2012.4868%20-0.00217586%2011.7574%20-0.000407766%2011.028V8.972C-0.00317566%208.2426%200.00415845%207.5132%200.0215923%206.784L0.0285923%206.59C0.0365923%206.365%200.0465923%206.144%200.0585922%205.878C0.108592%204.813%200.276592%204.088%200.523592%203.45C0.775287%202.7822%201.16982%202.17744%201.67959%201.678C2.17875%201.16955%202.78278%200.776074%203.44959%200.525C4.08759%200.278%204.81259%200.11%205.87759%200.0599999C6.14359%200.0479999%206.36559%200.038%206.58959%200.03L6.78359%200.0239999C7.51278%200.00623271%208.24219%20-0.0014347%208.97159%200.000999928L11.0276%200ZM9.99959%205C8.67351%205%207.40174%205.52678%206.46406%206.46447C5.52638%207.40215%204.99959%208.67392%204.99959%2010C4.99959%2011.3261%205.52638%2012.5979%206.46406%2013.5355C7.40174%2014.4732%208.67351%2015%209.99959%2015C11.3257%2015%2012.5974%2014.4732%2013.5351%2013.5355C14.4728%2012.5979%2014.9996%2011.3261%2014.9996%2010C14.9996%208.67392%2014.4728%207.40215%2013.5351%206.46447C12.5974%205.52678%2011.3257%205%209.99959%205ZM9.99959%207C10.3936%206.99993%2010.7837%207.07747%2011.1477%207.22817C11.5117%207.37887%2011.8424%207.5998%2012.1211%207.87833C12.3997%208.15686%2012.6207%208.48754%2012.7715%208.85149C12.9224%209.21544%2013%209.60553%2013.0001%209.9995C13.0002%2010.3935%2012.9226%2010.7836%2012.7719%2011.1476C12.6212%2011.5116%2012.4003%2011.8423%2012.1218%2012.121C11.8432%2012.3996%2011.5126%2012.6206%2011.1486%2012.7714C10.7847%2012.9223%2010.3946%2012.9999%2010.0006%2013C9.20494%2013%208.44188%2012.6839%207.87927%2012.1213C7.31666%2011.5587%207.00059%2010.7956%207.00059%2010C7.00059%209.20435%207.31666%208.44129%207.87927%207.87868C8.44188%207.31607%209.20494%207%2010.0006%207M15.2506%203.5C14.9191%203.5%2014.6011%203.6317%2014.3667%203.86612C14.1323%204.10054%2014.0006%204.41848%2014.0006%204.75C14.0006%205.08152%2014.1323%205.39946%2014.3667%205.63388C14.6011%205.8683%2014.9191%206%2015.2506%206C15.5821%206%2015.9001%205.8683%2016.1345%205.63388C16.3689%205.39946%2016.5006%205.08152%2016.5006%204.75C16.5006%204.41848%2016.3689%204.10054%2016.1345%203.86612C15.9001%203.6317%2015.5821%203.5%2015.2506%203.5Z'%20fill='white'%20fill-opacity='0.25'/%3e%3c/svg%3e",Ave="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_2233_8368)'%3e%3cpath%20d='M18.5186%200H1.47559C0.65918%200%20-0.000976562%200.644531%20-0.000976562%201.44141V18.5547C-0.000976562%2019.3516%200.65918%2020%201.47559%2020H18.5186C19.335%2020%2019.999%2019.3516%2019.999%2018.5586V1.44141C19.999%200.644531%2019.335%200%2018.5186%200ZM5.93262%2017.043H2.96387V7.49609H5.93262V17.043ZM4.44824%206.19531C3.49512%206.19531%202.72559%205.42578%202.72559%204.47656C2.72559%203.52734%203.49512%202.75781%204.44824%202.75781C5.39746%202.75781%206.16699%203.52734%206.16699%204.47656C6.16699%205.42188%205.39746%206.19531%204.44824%206.19531ZM17.042%2017.043H14.0771V12.4023C14.0771%2011.2969%2014.0576%209.87109%2012.5342%209.87109C10.9912%209.87109%2010.7568%2011.0781%2010.7568%2012.3242V17.043H7.7959V7.49609H10.6396V8.80078H10.6787C11.0732%208.05078%2012.042%207.25781%2013.4834%207.25781C16.4873%207.25781%2017.042%209.23438%2017.042%2011.8047V17.043Z'%20fill='white'%20fill-opacity='0.25'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_2233_8368'%3e%3crect%20width='20'%20height='20'%20fill='white'%20transform='translate(-0.000976562)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e";/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:o$,setPrototypeOf:I7,isFrozen:Tve,getPrototypeOf:Cve,getOwnPropertyDescriptor:Mve}=Object;let{freeze:Xa,seal:_l,create:l$}=Object,{apply:AI,construct:TI}=typeof Reflect<"u"&&Reflect;Xa||(Xa=function(t){return t});_l||(_l=function(t){return t});AI||(AI=function(t,i,r){return t.apply(i,r)});TI||(TI=function(t,i){return new t(...i)});const _S=Ya(Array.prototype.forEach),Pve=Ya(Array.prototype.lastIndexOf),R7=Ya(Array.prototype.pop),_1=Ya(Array.prototype.push),Dve=Ya(Array.prototype.splice),CE=Ya(String.prototype.toLowerCase),BM=Ya(String.prototype.toString),O7=Ya(String.prototype.match),E1=Ya(String.prototype.replace),Ive=Ya(String.prototype.indexOf),Rve=Ya(String.prototype.trim),Xl=Ya(Object.prototype.hasOwnProperty),Ia=Ya(RegExp.prototype.test),A1=Ove(TypeError);function Ya(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return AI(e,t,r)}}function Ove(e){return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return TI(e,i)}}function Li(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:CE;I7&&I7(e,null);let r=t.length;for(;r--;){let n=t[r];if(typeof n=="string"){const s=i(n);s!==n&&(Tve(t)||(t[r]=s),n=s)}e[n]=!0}return e}function Lve(e){for(let t=0;t<e.length;t++)Xl(e,t)||(e[t]=null);return e}function mh(e){const t=l$(null);for(const[i,r]of o$(e))Xl(e,i)&&(Array.isArray(r)?t[i]=Lve(r):r&&typeof r=="object"&&r.constructor===Object?t[i]=mh(r):t[i]=r);return t}function T1(e,t){for(;e!==null;){const r=Mve(e,t);if(r){if(r.get)return Ya(r.get);if(typeof r.value=="function")return Ya(r.value)}e=Cve(e)}function i(){return null}return i}const L7=Xa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),jM=Xa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),NM=Xa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),kve=Xa(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),VM=Xa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),zve=Xa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),k7=Xa(["#text"]),z7=Xa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),UM=Xa(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),B7=Xa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ES=Xa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Bve=_l(/\{\{[\w\W]*|[\w\W]*\}\}/gm),jve=_l(/<%[\w\W]*|[\w\W]*%>/gm),Nve=_l(/\$\{[\w\W]*/gm),Vve=_l(/^data-[\-\w.\u00B7-\uFFFF]+$/),Uve=_l(/^aria-[\-\w]+$/),c$=_l(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Fve=_l(/^(?:\w+script|data):/i),Hve=_l(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),u$=_l(/^html$/i),Gve=_l(/^[a-z][.\w]*(-[.\w]+)+$/i);var j7=Object.freeze({__proto__:null,ARIA_ATTR:Uve,ATTR_WHITESPACE:Hve,CUSTOM_ELEMENT:Gve,DATA_ATTR:Vve,DOCTYPE_NAME:u$,ERB_EXPR:jve,IS_ALLOWED_URI:c$,IS_SCRIPT_OR_DATA:Fve,MUSTACHE_EXPR:Bve,TMPLIT_EXPR:Nve});const C1={element:1,text:3,progressingInstruction:7,comment:8,document:9},Wve=function(){return typeof window>"u"?null:window},qve=function(t,i){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const n="data-tt-policy-suffix";i&&i.hasAttribute(n)&&(r=i.getAttribute(n));const s="dompurify"+(r?"#"+r:"");try{return t.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},N7=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function h$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wve();const t=st=>h$(st);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==C1.document||!e.Element)return t.isSupported=!1,t;let{document:i}=e;const r=i,n=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:m}=e,g=l.prototype,v=T1(g,"cloneNode"),x=T1(g,"remove"),b=T1(g,"nextSibling"),S=T1(g,"childNodes"),_=T1(g,"parentNode");if(typeof a=="function"){const st=i.createElement("template");st.content&&st.content.ownerDocument&&(i=st.content.ownerDocument)}let A,M="";const{implementation:C,createNodeIterator:D,createDocumentFragment:T,getElementsByTagName:R}=i,{importNode:O}=r;let L=N7();t.isSupported=typeof o$=="function"&&typeof _=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:k,ERB_EXPR:B,TMPLIT_EXPR:V,DATA_ATTR:$,ARIA_ATTR:q,IS_SCRIPT_OR_DATA:Y,ATTR_WHITESPACE:X,CUSTOM_ELEMENT:ne}=j7;let{IS_ALLOWED_URI:F}=j7,K=null;const re=Li({},[...L7,...jM,...NM,...VM,...k7]);let oe=null;const ce=Li({},[...z7,...UM,...B7,...ES]);let de=Object.seal(l$(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),se=null,xe=null,fe=!0,ye=!0,_e=!1,Te=!0,Ce=!1,Le=!0,Ke=!1,Xe=!1,pt=!1,ct=!1,ot=!1,rt=!1,Dt=!0,At=!1;const he="user-content-";let ie=!0,Me=!1,$e={},Z=null;const We=Li({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let dt=null;const lt=Li({},["audio","video","img","source","image","track"]);let Ve=null;const Tt=Li({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ft="http://www.w3.org/1998/Math/MathML",St="http://www.w3.org/2000/svg",Ct="http://www.w3.org/1999/xhtml";let bt=Ct,It=!1,Ei=null;const er=Li({},[ft,St,Ct],BM);let be=Li({},["mi","mo","mn","ms","mtext"]),Ue=Li({},["annotation-xml"]);const qe=Li({},["title","style","font","a","script"]);let ut=null;const Bt=["application/xhtml+xml","text/html"],si="text/html";let hi=null,Hi=null;const Yn=i.createElement("form"),Pi=function(me){return me instanceof RegExp||me instanceof Function},In=function(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Hi&&Hi===me)){if((!me||typeof me!="object")&&(me={}),me=mh(me),ut=Bt.indexOf(me.PARSER_MEDIA_TYPE)===-1?si:me.PARSER_MEDIA_TYPE,hi=ut==="application/xhtml+xml"?BM:CE,K=Xl(me,"ALLOWED_TAGS")?Li({},me.ALLOWED_TAGS,hi):re,oe=Xl(me,"ALLOWED_ATTR")?Li({},me.ALLOWED_ATTR,hi):ce,Ei=Xl(me,"ALLOWED_NAMESPACES")?Li({},me.ALLOWED_NAMESPACES,BM):er,Ve=Xl(me,"ADD_URI_SAFE_ATTR")?Li(mh(Tt),me.ADD_URI_SAFE_ATTR,hi):Tt,dt=Xl(me,"ADD_DATA_URI_TAGS")?Li(mh(lt),me.ADD_DATA_URI_TAGS,hi):lt,Z=Xl(me,"FORBID_CONTENTS")?Li({},me.FORBID_CONTENTS,hi):We,se=Xl(me,"FORBID_TAGS")?Li({},me.FORBID_TAGS,hi):mh({}),xe=Xl(me,"FORBID_ATTR")?Li({},me.FORBID_ATTR,hi):mh({}),$e=Xl(me,"USE_PROFILES")?me.USE_PROFILES:!1,fe=me.ALLOW_ARIA_ATTR!==!1,ye=me.ALLOW_DATA_ATTR!==!1,_e=me.ALLOW_UNKNOWN_PROTOCOLS||!1,Te=me.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ce=me.SAFE_FOR_TEMPLATES||!1,Le=me.SAFE_FOR_XML!==!1,Ke=me.WHOLE_DOCUMENT||!1,ct=me.RETURN_DOM||!1,ot=me.RETURN_DOM_FRAGMENT||!1,rt=me.RETURN_TRUSTED_TYPE||!1,pt=me.FORCE_BODY||!1,Dt=me.SANITIZE_DOM!==!1,At=me.SANITIZE_NAMED_PROPS||!1,ie=me.KEEP_CONTENT!==!1,Me=me.IN_PLACE||!1,F=me.ALLOWED_URI_REGEXP||c$,bt=me.NAMESPACE||Ct,be=me.MATHML_TEXT_INTEGRATION_POINTS||be,Ue=me.HTML_INTEGRATION_POINTS||Ue,de=me.CUSTOM_ELEMENT_HANDLING||{},me.CUSTOM_ELEMENT_HANDLING&&Pi(me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(de.tagNameCheck=me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),me.CUSTOM_ELEMENT_HANDLING&&Pi(me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(de.attributeNameCheck=me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),me.CUSTOM_ELEMENT_HANDLING&&typeof me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(de.allowCustomizedBuiltInElements=me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ce&&(ye=!1),ot&&(ct=!0),$e&&(K=Li({},k7),oe=[],$e.html===!0&&(Li(K,L7),Li(oe,z7)),$e.svg===!0&&(Li(K,jM),Li(oe,UM),Li(oe,ES)),$e.svgFilters===!0&&(Li(K,NM),Li(oe,UM),Li(oe,ES)),$e.mathMl===!0&&(Li(K,VM),Li(oe,B7),Li(oe,ES))),me.ADD_TAGS&&(K===re&&(K=mh(K)),Li(K,me.ADD_TAGS,hi)),me.ADD_ATTR&&(oe===ce&&(oe=mh(oe)),Li(oe,me.ADD_ATTR,hi)),me.ADD_URI_SAFE_ATTR&&Li(Ve,me.ADD_URI_SAFE_ATTR,hi),me.FORBID_CONTENTS&&(Z===We&&(Z=mh(Z)),Li(Z,me.FORBID_CONTENTS,hi)),ie&&(K["#text"]=!0),Ke&&Li(K,["html","head","body"]),K.table&&(Li(K,["tbody"]),delete se.tbody),me.TRUSTED_TYPES_POLICY){if(typeof me.TRUSTED_TYPES_POLICY.createHTML!="function")throw A1('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof me.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw A1('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=me.TRUSTED_TYPES_POLICY,M=A.createHTML("")}else A===void 0&&(A=qve(m,n)),A!==null&&typeof M=="string"&&(M=A.createHTML(""));Xa&&Xa(me),Hi=me}},bi=Li({},[...jM,...NM,...kve]),gr=Li({},[...VM,...zve]),zr=function(me){let Be=_(me);(!Be||!Be.tagName)&&(Be={namespaceURI:bt,tagName:"template"});const ht=CE(me.tagName),wi=CE(Be.tagName);return Ei[me.namespaceURI]?me.namespaceURI===St?Be.namespaceURI===Ct?ht==="svg":Be.namespaceURI===ft?ht==="svg"&&(wi==="annotation-xml"||be[wi]):!!bi[ht]:me.namespaceURI===ft?Be.namespaceURI===Ct?ht==="math":Be.namespaceURI===St?ht==="math"&&Ue[wi]:!!gr[ht]:me.namespaceURI===Ct?Be.namespaceURI===St&&!Ue[wi]||Be.namespaceURI===ft&&!be[wi]?!1:!gr[ht]&&(qe[ht]||!bi[ht]):!!(ut==="application/xhtml+xml"&&Ei[me.namespaceURI]):!1},Rr=function(me){_1(t.removed,{element:me});try{_(me).removeChild(me)}catch{x(me)}},fs=function(me,Be){try{_1(t.removed,{attribute:Be.getAttributeNode(me),from:Be})}catch{_1(t.removed,{attribute:null,from:Be})}if(Be.removeAttribute(me),me==="is")if(ct||ot)try{Rr(Be)}catch{}else try{Be.setAttribute(me,"")}catch{}},ue=function(me){let Be=null,ht=null;if(pt)me="<remove></remove>"+me;else{const ti=O7(me,/^[\r\n\t ]+/);ht=ti&&ti[0]}ut==="application/xhtml+xml"&&bt===Ct&&(me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+me+"</body></html>");const wi=A?A.createHTML(me):me;if(bt===Ct)try{Be=new f().parseFromString(wi,ut)}catch{}if(!Be||!Be.documentElement){Be=C.createDocument(bt,"template",null);try{Be.documentElement.innerHTML=It?M:wi}catch{}}const tr=Be.body||Be.documentElement;return me&&ht&&tr.insertBefore(i.createTextNode(ht),tr.childNodes[0]||null),bt===Ct?R.call(Be,Ke?"html":"body")[0]:Ke?Be.documentElement:tr},De=function(me){return D.call(me.ownerDocument||me,me,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Fe=function(me){return me instanceof h&&(typeof me.nodeName!="string"||typeof me.textContent!="string"||typeof me.removeChild!="function"||!(me.attributes instanceof u)||typeof me.removeAttribute!="function"||typeof me.setAttribute!="function"||typeof me.namespaceURI!="string"||typeof me.insertBefore!="function"||typeof me.hasChildNodes!="function")},Ae=function(me){return typeof o=="function"&&me instanceof o};function Ne(st,me,Be){_S(st,ht=>{ht.call(t,me,Be,Hi)})}const xt=function(me){let Be=null;if(Ne(L.beforeSanitizeElements,me,null),Fe(me))return Rr(me),!0;const ht=hi(me.nodeName);if(Ne(L.uponSanitizeElement,me,{tagName:ht,allowedTags:K}),Le&&me.hasChildNodes()&&!Ae(me.firstElementChild)&&Ia(/<[/\w!]/g,me.innerHTML)&&Ia(/<[/\w!]/g,me.textContent)||me.nodeType===C1.progressingInstruction||Le&&me.nodeType===C1.comment&&Ia(/<[/\w]/g,me.data))return Rr(me),!0;if(!K[ht]||se[ht]){if(!se[ht]&&zt(ht)&&(de.tagNameCheck instanceof RegExp&&Ia(de.tagNameCheck,ht)||de.tagNameCheck instanceof Function&&de.tagNameCheck(ht)))return!1;if(ie&&!Z[ht]){const wi=_(me)||me.parentNode,tr=S(me)||me.childNodes;if(tr&&wi){const ti=tr.length;for(let Vt=ti-1;Vt>=0;--Vt){const cr=v(tr[Vt],!0);cr.__removalCount=(me.__removalCount||0)+1,wi.insertBefore(cr,b(me))}}}return Rr(me),!0}return me instanceof l&&!zr(me)||(ht==="noscript"||ht==="noembed"||ht==="noframes")&&Ia(/<\/no(script|embed|frames)/i,me.innerHTML)?(Rr(me),!0):(Ce&&me.nodeType===C1.text&&(Be=me.textContent,_S([k,B,V],wi=>{Be=E1(Be,wi," ")}),me.textContent!==Be&&(_1(t.removed,{element:me.cloneNode()}),me.textContent=Be)),Ne(L.afterSanitizeElements,me,null),!1)},kt=function(me,Be,ht){if(Dt&&(Be==="id"||Be==="name")&&(ht in i||ht in Yn))return!1;if(!(ye&&!xe[Be]&&Ia($,Be))){if(!(fe&&Ia(q,Be))){if(!oe[Be]||xe[Be]){if(!(zt(me)&&(de.tagNameCheck instanceof RegExp&&Ia(de.tagNameCheck,me)||de.tagNameCheck instanceof Function&&de.tagNameCheck(me))&&(de.attributeNameCheck instanceof RegExp&&Ia(de.attributeNameCheck,Be)||de.attributeNameCheck instanceof Function&&de.attributeNameCheck(Be))||Be==="is"&&de.allowCustomizedBuiltInElements&&(de.tagNameCheck instanceof RegExp&&Ia(de.tagNameCheck,ht)||de.tagNameCheck instanceof Function&&de.tagNameCheck(ht))))return!1}else if(!Ve[Be]){if(!Ia(F,E1(ht,X,""))){if(!((Be==="src"||Be==="xlink:href"||Be==="href")&&me!=="script"&&Ive(ht,"data:")===0&&dt[me])){if(!(_e&&!Ia(Y,E1(ht,X,"")))){if(ht)return!1}}}}}}return!0},zt=function(me){return me!=="annotation-xml"&&O7(me,ne)},_t=function(me){Ne(L.beforeSanitizeAttributes,me,null);const{attributes:Be}=me;if(!Be||Fe(me))return;const ht={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:oe,forceKeepAttr:void 0};let wi=Be.length;for(;wi--;){const tr=Be[wi],{name:ti,namespaceURI:Vt,value:cr}=tr,Ut=hi(ti),ir=cr;let Zi=ti==="value"?ir:Rve(ir);if(ht.attrName=Ut,ht.attrValue=Zi,ht.keepAttr=!0,ht.forceKeepAttr=void 0,Ne(L.uponSanitizeAttribute,me,ht),Zi=ht.attrValue,At&&(Ut==="id"||Ut==="name")&&(fs(ti,me),Zi=he+Zi),Le&&Ia(/((--!?|])>)|<\/(style|title)/i,Zi)){fs(ti,me);continue}if(ht.forceKeepAttr)continue;if(!ht.keepAttr){fs(ti,me);continue}if(!Te&&Ia(/\/>/i,Zi)){fs(ti,me);continue}Ce&&_S([k,B,V],en=>{Zi=E1(Zi,en," ")});const ca=hi(me.nodeName);if(!kt(ca,Ut,Zi)){fs(ti,me);continue}if(A&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Vt)switch(m.getAttributeType(ca,Ut)){case"TrustedHTML":{Zi=A.createHTML(Zi);break}case"TrustedScriptURL":{Zi=A.createScriptURL(Zi);break}}if(Zi!==ir)try{Vt?me.setAttributeNS(Vt,ti,Zi):me.setAttribute(ti,Zi),Fe(me)?Rr(me):R7(t.removed)}catch{fs(ti,me)}}Ne(L.afterSanitizeAttributes,me,null)},Ht=function st(me){let Be=null;const ht=De(me);for(Ne(L.beforeSanitizeShadowDOM,me,null);Be=ht.nextNode();)Ne(L.uponSanitizeShadowNode,Be,null),xt(Be),_t(Be),Be.content instanceof s&&st(Be.content);Ne(L.afterSanitizeShadowDOM,me,null)};return t.sanitize=function(st){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Be=null,ht=null,wi=null,tr=null;if(It=!st,It&&(st="<!-->"),typeof st!="string"&&!Ae(st))if(typeof st.toString=="function"){if(st=st.toString(),typeof st!="string")throw A1("dirty is not a string, aborting")}else throw A1("toString is not a function");if(!t.isSupported)return st;if(Xe||In(me),t.removed=[],typeof st=="string"&&(Me=!1),Me){if(st.nodeName){const cr=hi(st.nodeName);if(!K[cr]||se[cr])throw A1("root node is forbidden and cannot be sanitized in-place")}}else if(st instanceof o)Be=ue("<!---->"),ht=Be.ownerDocument.importNode(st,!0),ht.nodeType===C1.element&&ht.nodeName==="BODY"||ht.nodeName==="HTML"?Be=ht:Be.appendChild(ht);else{if(!ct&&!Ce&&!Ke&&st.indexOf("<")===-1)return A&&rt?A.createHTML(st):st;if(Be=ue(st),!Be)return ct?null:rt?M:""}Be&&pt&&Rr(Be.firstChild);const ti=De(Me?st:Be);for(;wi=ti.nextNode();)xt(wi),_t(wi),wi.content instanceof s&&Ht(wi.content);if(Me)return st;if(ct){if(ot)for(tr=T.call(Be.ownerDocument);Be.firstChild;)tr.appendChild(Be.firstChild);else tr=Be;return(oe.shadowroot||oe.shadowrootmode)&&(tr=O.call(r,tr,!0)),tr}let Vt=Ke?Be.outerHTML:Be.innerHTML;return Ke&&K["!doctype"]&&Be.ownerDocument&&Be.ownerDocument.doctype&&Be.ownerDocument.doctype.name&&Ia(u$,Be.ownerDocument.doctype.name)&&(Vt="<!DOCTYPE "+Be.ownerDocument.doctype.name+`>
`+Vt),Ce&&_S([k,B,V],cr=>{Vt=E1(Vt,cr," ")}),A&&rt?A.createHTML(Vt):Vt},t.setConfig=function(){let st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};In(st),Xe=!0},t.clearConfig=function(){Hi=null,Xe=!1},t.isValidAttribute=function(st,me,Be){Hi||In({});const ht=hi(st),wi=hi(me);return kt(ht,wi,Be)},t.addHook=function(st,me){typeof me=="function"&&_1(L[st],me)},t.removeHook=function(st,me){if(me!==void 0){const Be=Pve(L[st],me);return Be===-1?void 0:Dve(L[st],Be,1)[0]}return R7(L[st])},t.removeHooks=function(st){L[st]=[]},t.removeAllHooks=function(){L=N7()},t}var Xve=h$();const Yve=({activePolicy:e})=>{const{t}=jt(),i=Xve.sanitize(t("terms.content"));return J.useEffect(()=>{if(e){const r=document.getElementById(e);r&&r.scrollIntoView({behavior:"smooth"})}},[e]),E.jsxs(Sve,{id:"privacy",children:[E.jsx(TE.Element,{name:"privacy",className:"policy-section",children:E.jsxs(zM,{children:[E.jsx(xr,{children:"USER AGREEMENT AND PRIVACY POLICY of the Sabsus Platform: 16 May 2025"}),E.jsxs(SS,{children:[E.jsx("p",{children:"Welcome to the Sabsus Platform. This document constitutes a unified User Agreement and Privacy Policy applicable to the website, mobile application and other Sabsus services (together, the “Sabsus Platform” or “Service”). By using or registering on the Sabsus Platform, you (the “User,” “you”) agree to the terms of this Agreement and confirm that you have read our personal-data processing policy. If you do not agree with any provision, please do not use the Service."}),E.jsx("p",{children:"We recommend that you read the following terms carefully. The document sets out the rules for using the Sabsus Platform, the rights and obligations of Users, and the conditions for processing and protecting personal data in accordance with global requirements (GDPR, CCPA/CPRA, PIPEDA, UK GDPR, etc.), as well as regional clauses for different jurisdictions. This Agreement is written in Russian but is intended to apply to all users worldwide (in the relevant parts, taking regional specifics into account). If any local law conflicts with the provisions of this Agreement, the mandatory rules of your jurisdiction prevail to the extent of the conflict."})]})]})}),E.jsx(a$,{}),E.jsx(TE.Element,{id:"cookie",name:"cookie",className:"policy-section",children:E.jsxs(zM,{children:[E.jsx(xr,{children:"1. Terms and Definitions"}),E.jsx(xr,{children:"Sabsus Platform (or Service)"}),E.jsxs(SS,{children:[E.jsx("p",{children:"The combination of software and hardware that powers the Sabsus website, mobile app and other digital tools designed for interaction between partner restaurants and their customers. The Platform allows Users to register, order restaurant goods and services, pay online, participate in loyalty programs, use gift cards, leave reviews, etc."}),E.jsx(xr,{children:"Sabsus Company (or we/our)"}),E.jsx("p",{children:"The owner of the Sabsus Platform responsible for its operation. It is assumed to be a legal entity incorporated under the laws of the State of California, USA (e.g., Sabsus, Inc.), acting as the personal-data controller of Users"}),E.jsx(xr,{children:"User (or you)"}),E.jsx("p",{children:"Any natural person who is a customer of restaurants and uses the Sabsus Platform to order goods/services, participate in loyalty programs, submit reviews and other interactions. The User must have reached the age allowing them to enter into legally binding agreements (normally 18 years) or use the Service with the consent of a legal guardian."}),E.jsx(xr,{children:"Restaurant "}),E.jsx("p",{children:"A business entity or entrepreneur, partner of Sabsus, offering its goods and services (e.g., dishes, drinks, gift certificates) to Users through the Platform. Each purchase transaction via the Service is concluded between the User and the relevant Restaurant."}),E.jsx(xr,{children:"Account"}),E.jsx("p",{children:"The User’s account on the Sabsus Platform created during registration and used to access the Service’s features. Registration requires providing current and accurate information (e.g., name, phone number, email address) and creating a strong password"}),E.jsx(xr,{children:"Personal data"}),E.jsx("p",{children:"Any information relating to an identified or identifiable natural person. Such data may include: name, contact details, payment information, order data, reviews, as well as technical data about the device and network used to access the Service, and other information that directly or indirectly identifies the User. See examples at opentable.comopentable.com."}),E.jsx(xr,{children:"Privacy Policy"}),E.jsx("p",{children:"The section of this document that describes how Sabsus collects, uses, discloses and protects Users’ Personal Data, and explains Users’ privacy rights and how to exercise them."}),E.jsx(xr,{children:"Payment providers"}),E.jsx("p",{children:"Third-party electronic-payment services integrated with the Sabsus Platform. In particular, we use Stripe and PayPal to process payments. These providers may request and process a User’s financial data (e.g., card details) under their own rules and privacy policies"}),E.jsx(xr,{children:"Bonus program"}),E.jsx("p",{children:"A loyalty program implemented through the Sabsus Platform under which the User may accumulate bonus points or receive other rewards for orders and certain actions, and redeem them for discounts or prizes under established terms."}),E.jsx(xr,{children:"Gift card"}),E.jsx("p",{children:"A digital or physical certificate (voucher) granting the right to receive Restaurant goods/services for a specific amount or volume. Gift cards may be purchased or issued in promotions and are subject to special terms (see Section 5 below)."}),E.jsx(xr,{children:" User Content"}),E.jsx("p",{children:"Materials that the User posts on the Sabsus Platform, including reviews, ratings, comments, photos and other content. The User retains rights to their Content but grants Sabsus a non-exclusive right to use, reproduce, publish and display such Content within the Service’s operation (see Section 7 for details)."}),E.jsx(xr,{children:"Cookie"}),E.jsx("p",{children:"A small data fragment placed by the Service (or third parties on our behalf) on the User’s device when visiting the website. Cookies remember User actions and preferences (e.g., interface language, cart contents) and collect usage statistics to personalise the Service."}),E.jsx(xr,{children:"Pixel (tracking pixel)"}),E.jsx("p",{children:"A snippet of code or invisible image on a webpage or email used to track User activity (e.g., page view or email open). Marketing and analytics services may use pixels on our Platform to gather information on User interaction with content."}),E.jsx(xr,{children:"SDK"}),E.jsx("p",{children:"A set of development tools integrated into our mobile app and provided by third parties for additional functions. In particular, the Service may include Firebase SDK (Google Firebase platform) and Supabase SDK (Supabase platform) for authentication, data storage, analytics, push notifications, etc. These SDKs may automatically collect certain device data (e.g., identifiers, technical info) and use cookies or similar technologies."}),E.jsx(xr,{children:"GDPR"}),E.jsx("p",{children:"Regulation (EU) 2016/679, the General Data Protection Regulation—see privacyaffairs.com."}),E.jsx(xr,{children:"CCPA"}),E.jsx("p",{children:"California Consumer Privacy Act 2018, as amended (including CPRA 2020); see prioritypass.comprioritypass.com."}),E.jsx(xr,{children:"PIPEDA"}),E.jsx("p",{children:"Canada’s Personal Information Protection and Electronic Documents Act; see myemail-api.constantcontact.com."}),E.jsx(xr,{children:"UK GDPR"}),E.jsx("p",{children:"UK data-protection law equivalent to EU GDPR; see ico.org.uk."})]}),E.jsx(D7,{}),E.jsxs(SS,{children:[E.jsx(xr,{children:"2. Account Registration"}),E.jsx(xr,{children:"2.1 Creating an account."}),E.jsx("p",{children:"To access the main features of the Sabsus Platform (placing orders, receiving bonuses, etc.), you must create an account. During registration you must provide accurate and complete information, including at least your full name, valid email address and phone number, and set a strong password. Choosing a unique password and keeping it secret is recommended. Registering an account confirms your agreement with this User Agreement and Privacy Policy."}),E.jsx(xr,{children:"2.2 User requirements."}),E.jsx("p",{children:"The Service is intended for persons aged 18 years or the age of majority in your country. Persons under 18 must not register or use the Platform for monetary transactions on their own. If you are under the age of majority, you may register and use the Service only under the supervision and with the consent of a parent or legal guardian. By registering, you confirm that you have the legal capacity to enter into a binding agreement, or that you act with the appropriate permission of a legal representative."})," ",E.jsx(xr,{children:"2.3 One user – one account."}),E.jsx("p",{children:"Each User may have no more than one active account unless Sabsus permits otherwise. Accounts are personal: you may not transfer login credentials to others, nor sell, gift or otherwise dispose of the account. You are personally responsible for all actions performed under your account."})," ",E.jsx(xr,{children:"2.4 Data accuracy."}),E.jsx("p",{children:"The User agrees to keep their registration and profile data up to date. If your address, phone number, payment details or other essential information changes, please update it in your account settings. Sabsus is not liable for negative consequences arising from the User providing inaccurate or outdated data (e.g., failure to receive an important notice, delivery issues)."})," ",E.jsx(xr,{children:"2.5 Account security."}),E.jsx("p",{children:"You are responsible for keeping your password confidential and for restricting access to devices on which your account is logged in. If you suspect your password has been compromised or that there is unauthorised access to your account, change your password immediately and contact us. We may request additional information to verify your identity when restoring access or changing security settings."})," ",E.jsx(xr,{children:"2.6 Completion of registration and electronic consent"}),E.jsx("p",{children:"By completing the registration process (e.g., clicking a “Register” button) and/or ticking a checkbox indicating consent to the terms, you give your electronic consent to enter into this Agreement. Electronic consent has the same legal force as a written signature under applicable law. You also agree to receive notifications and other information from Sabsus in electronic form (e.g., by email, push notifications, or within the Service interface)."})]})]})}),E.jsx(D7,{}),E.jsx(TE.Element,{id:"terms",name:"terms",className:"policy-section",children:E.jsxs(zM,{children:[E.jsx(xr,{children:"3. Using the Service: General Terms"}),E.jsx(xr,{children:"3.1 Provision of Sabsus Services."}),E.jsxs(SS,{children:[E.jsx("h3",{children:t("policies.terms.title")}),t("policies.terms.content",{joinArrays:`

`}).split(`

`).map((r,n)=>E.jsx("p",{children:r},n))]}),E.jsx("div",{dangerouslySetInnerHTML:{__html:i}})]})})]})},Gd=U(Bm)`
color: #808080;
`,Qve=U.div`
 margin: 0 auto;
  margin-top: 100px;
 
  /* Фікс для Safari - запобігає зламу верстки при скролі */
  -webkit-overflow-scrolling: touch;

    @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,Kve=U.p`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
      width: max-content;
  height: 28px;
  display: flex;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  /* backdrop-filter може спричиняти проблеми з продуктивністю на iOS */
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px); /* Підтримка для Safari */
  box-shadow: 
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), 
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 
    0 8px 16px -8px rgba(0, 0, 0, 0.03), 
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%);
  align-items: center;
  
  /* Запобігає "липкому" стану при натисканні на iOS */
  -webkit-tap-highlight-color: transparent;

    @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,Zve=U.h2`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  /* Фікс для автоматичного масштабування тексту на iOS */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
    @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  max-width: 800px;
  width: 100%;
  margin: 0 auto;
  margin-bottom: 26px;
  }
`,$ve=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  /* Покращує рендеринг шрифтів на iOS */
  -webkit-font-smoothing: antialiased;
    @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
   max-width: 800px;
  width: 100%;
  margin: 0 auto;
  margin-bottom: 26px;
  }
`,Jve=U.div`
  display: flex;
  flex-direction: column;
  gap: 24px;
  /* Фікс для Safari - запобігає зламу flex-контейнера */
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;

  @media screen and (min-width: 768px) {
    /* Стилі для планшетів (якщо потрібно) */
  }
  
  @media screen and (min-width: 1440px) {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: auto auto auto;
    gap: 20px;
    max-width: 1400px;
    margin: 0 auto;
    
    /* Перший ряд - 2 картки */
    & > :nth-child(1) {
      grid-column: 1;
      width: 151% ;
    }
    & > :nth-child(2) {
      grid-column: 2;
      width: 151% ;
       margin-left: 53%;
    }
    
    /* Другий ряд - 3 картки */
    & > :nth-child(3) {
      grid-column: 1;
      grid-row: 2;
    }
    & > :nth-child(4) {
      grid-column: 2;
      grid-row: 2;
    }
    & > :nth-child(5) {
      grid-column: 3;
      grid-row: 2;
    }
    
    /* Третій ряд - 2 картки */
    & > :nth-child(6) {
      grid-column: 1;
      grid-row: 3;
       width: 151% ;
    }
    & > :nth-child(7) {
      grid-column: 2;
      grid-row: 3;
        width: 151% ;
       margin-left: 53%;
    }
  }
`,eye=U(G.div)`
  border: 1px solid #212121;
  border-radius: 24px;
  padding: 16px;
  width: 343px;
  min-height: 332px;
  height: auto;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  position: relative;
  justify-content: space-between;
  /* backdrop-filter з підтримкою для Safari */
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  box-shadow: 
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), 
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 
    0 8px 16px -8px rgba(0, 0, 0, 0.03), 
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: rgba(255, 255, 255, 0.03);
  
  /* Фікс для рендерингу тіней на iOS */
  transform: translateY(0);
 transition: all 0.5s ease;
  &:hover {
    transform: translateY(-4px);
     will-change: transform;

            background: rgba(10, 10, 30, 0.6);
          
      
  }

  &:active {
    transform: translateY(-2px);
  }
  @media screen and (min-width: 768px) {
    min-width: 343px;
    width: 100%;
    max-width: 740px;
    height: 388px; 
  }
  
  @media screen and (min-width: 1440px) {
    width: 100%;
    height: 388px; 
    margin: 0;
  }
`,tye=U.h3`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 20px;
  line-height: 130%;
  color: var(--white-100);
  margin-bottom: 8px;
  /* Покращує рендеринг тексту на Retina дисплеях */
  -webkit-font-smoothing: subpixel-antialiased;
    @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,iye=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-80);
  margin-bottom: 20px;
position: relative;
    z-index: 101;
  -webkit-backdrop-filter: none;
  backdrop-filter: none;
  /* Запобігає "підскакуванню" тексту при завантаженні на iOS */
  -webkit-transform: translate3d(0,0,0);
    @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,rye=U.img`
  width: 100%;
  height: 109px;
  margin: 15px auto 30px;
  border-radius: 12px;
  
  /* Оптимізовані стилі для фону */
  background: 
    rgba(255, 255, 255, 0.03),
    radial-gradient(156.48% 245.47% at 14.29% -16.72%, rgba(0, 0, 0, 0) 0%, #000 87.76%);
  
  /* Виправлення для iOS */
  -webkit-transform-style: preserve-3d;
  -webkit-backface-visibility: hidden;
  image-rendering: -webkit-optimize-contrast;
  
  /* Оптимальне відображення зображення */
  object-fit: contain;
  object-position: center;
  
  /* Фікс для Retina-дисплеїв */
  @media (-webkit-min-device-pixel-ratio: 2) {
    image-rendering: crisp-edges;
  }
  
  /* Специфічні стилі для проблемних карток (3, 4, 7) */
  ${({src:e})=>e!=null&&e.includes("card3")||e!=null&&e.includes("card4")||e!=null&&e.includes("card7")?`
        object-fit: contain;
        overflow: visible;
        padding: 0;
        -webkit-transform: translateZ(0) scale(0.95);
        transform: translateZ(0) scale(0.95);
        
        @media (max-width: 767px) {
          height: auto;
          max-height: 109px;
        }
      `:""}

    @media screen and (min-width: 768px) {
  height: 212px;
  }
  
  @media screen and (min-width: 1440px) {
    height: 160px;
  }
`,nye=U.div`
  display: flex;
  justify-content: flex-start;
  width: 100%;
  flex-direction: row;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: auto;
  /* Фікс для Safari flex-wrap багу */
  -webkit-box-pack: start;

    @media screen and (min-width: 768px) {
  
  }
  
  @media screen and (min-width: 1440px) {
  
  }
`,sye=U.p`
  border-radius: 24px;
  padding: 4px 8px 4px 8px; /* Уніфіковані відступи */
  width: auto;
  gap: 8px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: #ffffff; /* Використовуємо явний колір замість змінної для iOS */
  align-items: center;
  display: flex;
  height: 28px;
  position: relative; /* Для псевдоелементів */
  
  /* Оптимізований блюр для всіх браузерів */
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  
  /* Виправлені тіні для iOS */
  box-shadow: 
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), 
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 
    0 8px 16px -8px rgba(0, 0, 0, 0.03), 
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  
  /* Покращений градієнт з фолбеками */
  background-color: rgba(30, 30, 30, 0.5); /* Фон для браузерів без підтримки backdrop-filter */
  
  @supports (backdrop-filter: blur(16px)) or (-webkit-backdrop-filter: blur(16px)) {
    background: 
      linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%),
      rgba(255, 255, 255, 0.03);
  }
  
  /* Виправлення для Safari */
  @supports (-webkit-touch-callout: none) {
    background-color: rgba(40, 40, 40, 0.7);
    -webkit-backdrop-filter: saturate(180%) blur(16px);
  }
  
  /* Виправлення анімацій та інтерактивності */
  -webkit-transform: translateZ(0);
  -webkit-tap-highlight-color: transparent;
  transition: all 0.3s ease;
  
  /* Псевдоелемент для покращення відображення градієнта */
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 24px;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%);
    z-index: -1;
    opacity: 0.5;
  }
  
  /* Стан при наведенні */
  &:hover {
    background-color: rgba(50, 50, 50, 0.7);
    box-shadow: 
      inset 0 -8px 24px 0 rgba(255, 255, 255, 0.05), 
      inset 0 -5px 6px 0 rgba(255, 255, 255, 0.05), 
      0 8px 20px -8px rgba(0, 0, 0, 0.1), 
      0 4px 6px -2px rgba(0, 0, 0, 0.1);
  }
  
  /* Стан при натисканні */
  &:active {
    background-color: rgba(60, 60, 60, 0.7);
    transform: scale(0.98);
  }

@media screen and (min-width: 768px) {

}

@media screen and (min-width: 1440px) {

}
`,Ur=U.img`
  border-radius: 25px;
  padding: 4px;
  overflow: visible;
  font-size: 13px;
  width: 20px;
  margin-left: 6px;

  box-shadow: 
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.18), 
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 
    0 4px 8px rgba(0, 0, 0, 0.08), 
    0 1px 2px rgba(0, 0, 0, 0.06);

  background: 
    linear-gradient(315deg, rgba(122, 121, 122, 0) 7%, rgba(172, 172, 172, 0) 86%) 
    rgba(255, 255, 255, 0.03);

  -webkit-transform: translateZ(0);
`,aye=()=>{const e=QT(),t=Cl(),i=(r,n=t.pathname)=>{if(t.pathname===n){const s=document.getElementById(r);s&&window.scrollTo({top:s.offsetTop-100,behavior:"smooth"})}else e(`${n}#${r}`)};return J.useEffect(()=>{if(t.hash){const r=t.hash.replace("#",""),n=document.getElementById(r);n&&setTimeout(()=>{window.scrollTo({top:n.offsetTop-100,behavior:"smooth"})},50)}},[t]),{scrollTo:i}},oye=()=>{const{scrollTo:e}=aye(),{t}=jt(),[i,r]=J.useState(!1),[n,s]=J.useState(null);J.useEffect(()=>{if(i&&n){const o=setTimeout(()=>{TE.scroller.scrollTo(n,{duration:800,delay:0,smooth:"easeInOutQuart",offset:-100})},100);return()=>clearTimeout(o)}},[i,n]);const a=o=>{s(o),r(!0)};return E.jsxs(E.Fragment,{children:[E.jsx(pve,{children:E.jsxs(gve,{children:[E.jsx(S1,{children:E.jsx(vve,{onClick:()=>e("hero","home"),style:{marginBottom:16},children:E.jsx("img",{src:u3,alt:"Logo"})})}),E.jsxs(mve,{children:[E.jsxs(S1,{children:[E.jsx(bS,{children:t("footer.sections.home")}),E.jsx(zg,{to:"/home/#benefits",children:t("footer.links.benefits")}),E.jsx(zg,{to:"/service",children:t("footer.links.service")}),E.jsx(zg,{to:"/pricing",children:t("footer.links.prices")})]}),E.jsxs(S1,{children:[E.jsx(bS,{children:t("footer.sections.product")}),E.jsx(Gd,{to:"/service/customer-experience",children:t("footer.links.customerExperience")}),E.jsx(Gd,{to:"/service/pos-staff-operations",children:t("footer.links.posStaff")}),E.jsx(Gd,{to:"/service/kitchen-fulfillment",children:t("footer.links.kitchen")}),E.jsx(Gd,{to:"/service/inventory-warehousing",children:t("footer.links.inventory")}),E.jsx(Gd,{to:"/service/analytics-management",children:t("footer.links.analytics")}),E.jsx(Gd,{to:"/service/marketing-customization",children:t("footer.links.marketing")}),E.jsx(Gd,{to:"/service/integration-scaling",children:t("footer.links.integration")})]}),E.jsxs(S1,{children:[" ",E.jsx(bS,{children:t("footer.sections.company")}),E.jsx(zg,{to:"/service",children:t("footer.links.ourServices")}),E.jsx(zg,{to:"/about",children:t("footer.links.aboutUs")}),E.jsx(zg,{to:"/contact",children:t("footer.links.contactUs")})]})]}),E.jsxs(bve,{children:[" ",E.jsxs(S1,{children:[E.jsx(bS,{children:t("footer.sections.demo")}),E.jsx("a",{href:"https://sabsus.app/login/demo@sabsus.com/demo2025",target:"_blank",rel:"noopener noreferrer",children:E.jsx(xve,{children:t("footer.buttons.viewDemo")})})]}),E.jsxs(wve,{children:[E.jsx(LM,{href:"https://www.facebook.com/profile.php?id=61578562106724&mibextid=wwXIfr",target:"_blank",rel:"noopener noreferrer",children:E.jsx(kM,{src:_ve,alt:"🔗"})}),E.jsx(LM,{href:"https://www.instagram.com/sabsus.app/",target:"_blank",rel:"noopener noreferrer",children:E.jsx(kM,{src:Eve,alt:"🔗"})}),E.jsx(LM,{href:"https://www.linkedin.com/company/sabsus/",target:"_blank",rel:"noopener noreferrer",children:E.jsx(kM,{src:Ave,alt:"🔗"})})]})," "]}),E.jsx(a$,{}),E.jsxs(yve,{children:[E.jsxs(M7,{children:[E.jsxs(wS,{to:"#privacy",onClick:()=>a("privacy"),children:[t("footer.legal.cookiePolicy")," ",E.jsx(P7,{})," "]}),E.jsxs(wS,{to:"#cookie",onClick:()=>a("cookie"),children:[t("footer.legal.privacyStatement")," ",E.jsx(P7,{})," "]}),E.jsx(wS,{to:"#terms",onClick:()=>a("terms"),children:t("footer.legal.termsOfUse")})]}),E.jsx(M7,{children:E.jsx(wS,{to:"",children:t("footer.legal.copyright")})})]})]})}),i&&E.jsx(Yve,{activePolicy:n})]})},lye=()=>{const e=Cl();return J.useEffect(()=>{if(e.hash){const t=e.hash.replace("#",""),i=document.getElementById(t);i&&setTimeout(()=>{i.scrollIntoView({behavior:"smooth"})},400)}else window.scrollTo({top:0,behavior:"auto"})},[e]),E.jsxs(E.Fragment,{children:[E.jsx(Q0e,{}),E.jsx(J.Suspense,{children:E.jsx(fce,{})}),E.jsx(oye,{})]})},cye="/assets/card1-DKryc5qz.png",uye="/assets/card2-D2DHc8mE.png",d$="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3crect%20width='12'%20height='12'%20fill='url(%23pattern0_2100_14721)'/%3e%3cdefs%3e%3cpattern%20id='pattern0_2100_14721'%20patternContentUnits='objectBoundingBox'%20width='1'%20height='1'%3e%3cuse%20xlink:href='%23image0_2100_14721'%20transform='scale(0.0138889)'/%3e%3c/pattern%3e%3cimage%20id='image0_2100_14721'%20width='72'%20height='72'%20preserveAspectRatio='none'%20xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAC6FBMVEUAAACqqqqxsbGqqqqqqqqsrK2urq6oqKiFhYWrq6ugoKCvr6+srayFhYV+fn6np6mioqKen5+oqKisrKyqqqqrq6tlZWWpqamqqqoLCwsCAgIFBQYHBwcJCQkEBAQAAAANDQ1OTU1gYGD///9CQkJiYmMrKipbW1tdXV1mZmZQT1AxMTEPEA5M2mQcsftoaGhQUVAwLzCZmZntZV0oJygUFBQctf/7+/seHh5FRUUgICAZGBkJDhCWlpZM3mX/5V9RVFL/4F1OS0wcGxzfpehN1d3XTNCRkZFXV1ciISMXFhb/jgDc3NwUdKHSvaBQWlILIi0LFhgSIBQTExEdEgj29vZX0+xqamplZWVMwWDzZ18YNztDPBsQCwcYxvccsPfs7OyioqJL1GJMzWL43l1QZFQ8PDyPPTktKy0kJCRHIB4DCQxZ2fIbquwWhLeCgoJycnJwcHBIYWgNSmZNtV4OPFM6oUwKLDxfKicmJiZTJSMIGB8oGwkan93JyclHvce7u7vYwqQ6naQ7j5w9doV2dnaIemhNWV1OfFYgSE9MHUkMMUOikT1HQDeFOjUkDyMZDBi4aQIXyPrx8fHlqe4euuZUzOTcTtXT09NJy9MZmNK+jcVBs7mkpKSRbJYQZ46JiYmGhoZNplzu11pFwlpOjVkNP1hCvFdOblRPPVJOYFGunEKZiTo4ODhnXCkPIyRaUCMaOx9AJQXgfwHviAAZxfUisdkjr9UYkcjCRbwtmrisgLNDoLK2QbGvP6nTvqE4g5SKMoUsbHSPgW1sbGz3aWHyZ1/wZl7vZl5aRV5yaFi5qEebQz6ZQjxLRTuQgjcpazRyMi45NC0QHiBNRB06NBcyFxZ3RQPTdwEZxPUbp+jGk87Fk83CkMooo8Qtmrm+RLgXgbJBm6wUfazbxaeeOZrDr5WLM4YTW30lYGRNqFzjYVngYFlbI1jizFXeyVROaFN/czE4MisrEypSSSAzLhepYQLPdwEjG5luAAAAGXRSTlMApfb1XV1dFefHj10H9vbsnp6Fbm42/j49P+0obAAABeBJREFUWMPF2HVYE2EcB3C7u++tu0NqY7BNNl2hyAwMlLkhqKhYgB2IgmB3d3d3d3d3d3e3/ut7wzkT3lMf/T7s+T4/9tznud3d7m6X6cfkLJo7S7rJXTRnJobkLJTfQ0w3HvkLMUj58nTQCVy6EXQd8+TLECqeK54Tvk6a+u1/4nOVyhDKtk//7VL66lLsgl7vhvT7imQI5fD69oOpDNWkVOesBvcbglfmDKG830GcXU9jFziVivsDCNN8btcsD7LXqVNHRdug07WkrTJVq2bmaFutVr0cqE6XefPmneKwX4+aNWuqMT58/drVrfGYE2fPnt3RzAZJGxuvblrev3wXFfQpV7p06SYcN2NcpUqVFiNVhzJlylT1xnIgfzc0/WsoKEgmVL68BIU61wjjz5Age43qdFm4cOEpDml71aw5yQvhw1OnTt2qw1xI+/btI83sEN09dK/RxmaTySDNZqu1OqYbubrZbKfNCrkPGPzzZodw2gu7Xpy7ZUAY2x6FhYUlclgfazQaTRifGbB37xEzxoP79u27x4YxE+TBYdS1bdmyZW9bULJCrY70xHjAvd69dw6Hljtt2rSZ0ABhjhUa2jYgoGw7C9IpFAq1kUK9a9WqdQJatrWpW/dPoZ2/A+HwKY0bNw7jkMlDEaVYjtERukIPziBuV926dXuGs0HZJYjrmpiYmELbkJzcUoVx9eHDh78RMD47ePDgBtL7HowQRlLcjSANTmuE5UCQxgkAQj5DLlcWxEWvWLEqFSFVSJSXjwlhR7ekpFYCRnpvb2+DDAi9f1mxYoVhHDHGlCtXbhZCIw4GHnrWCmGjWqHwMSPEBmEEo+dS6KgKpJ1GEDpWPzAwsBvEIoW8DBDhfw6dn1uhQoWlDYEygkJlEIrbX79+YCuIQyLVai8rO4RUK5YtOxmNkLk/PSMuh+jCiLi403aETLGenloOsUMISqFFpHaN7maHpEWc5W7kalmQbeXKlRbao0aOHMkh1DolPDyFjg1TU1MdMiB4tk/Pnj33IPJ2x+bNt55DmNC9e/dN4QRdXLt27ehU5o0NSYPJlStX7mMhQ6pUqTLxIURhZQMCGi8gDUfXqFFj3RoI2SD0BQJOaLcLAl8g9JsQdEKJLoiwQ7a+06ZNe4zIyPvbt+8YQsiCTVOmtJO20cdLlz442NcIQovNZsO0hVGjRtEZ2VJSLHTEDoejIWSEfCUIEkKc9dNmh6SzGQLORojQdhruRr5sENG3z5p1ejAkjpNLlw6LJsRAr5OxAiF+UQq1UiDMEIiNod/6LAL/rjk9CywjxJN+6xXVAO4o3da0BExQNl9EeM+xFOql4lc1l86UFKLnIUVLCkk3WjpA2CD4K4j/AkFWKH5SREREGcxHv2jevPlrAJZHRUX5mgH0DQoKam9lhwj0E8UQugA6f+5ctJ0QbDCZzJAAe7xWa4CEHSI8DaANaBOpAXCNtFkhQIAzxN1psCuAFQJwaEJCQjgAqFVSUpIDAIOHQiFywBV2KLx7QEBAWGu+1dODhw6MAGAWvU7GGHn5UNr9UWu+G72c1T9OYBN6NJQLlQ/xXf8G5EModIXeQ96lHy2w/oH9cQAEUShCdEPEhw0CrRNmzpzZFfANT8fFjbjA836zqlbtoJcPucPTP14qZ8uG0sn/gfgMwwpxLeO9f51kgRECOFYZXLt2bY1SowweOHCghoaOwdLo4+sTqvQUABtkUtZ+Uq9evflKsdONDRs29hPFQXTsvEQUg+hv5V6+Sh0jpFMukn7TdtaE9GvUqNGYLaJyTnl/f/9BIcE96IE5tr+oJWxQshPyl6DL69d/D0W4INlrdPO3IZNySedmzZpJ22jj+PHjd4nifDrWeyUqp8fExEzyYtxGJRAXq6zdokULups0Azt16hSs0QTTcYlGowxVR0Z6aIwqFFWE4UFUNV7Q+Wm1Wj93voxaGm8Vb8pVkuHRWKQB8OkGWNV58jE8rCtcINQz3YQWKMz22K9Y7oJZ00nB3MV+4nwCSMVVVfRT0SwAAAAASUVORK5CYII='/%3e%3c/defs%3e%3c/svg%3e",hye="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3crect%20width='12'%20height='12'%20fill='url(%23pattern0_2100_13786)'/%3e%3cdefs%3e%3cpattern%20id='pattern0_2100_13786'%20patternContentUnits='objectBoundingBox'%20width='1'%20height='1'%3e%3cuse%20xlink:href='%23image0_2100_13786'%20transform='scale(0.0138889)'/%3e%3c/pattern%3e%3cimage%20id='image0_2100_13786'%20width='72'%20height='72'%20preserveAspectRatio='none'%20xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAC61BMVEUAAACWoqS5wcXL09arAAAJCQqoAACTe2uAkpyClqKFmqYAAACF1eC2wbsCAQEAAADNz82BAQCLAADLCQgAAAAAAAB5wssGBgbHw7O8EhEVAQEAAAB8CwuNrq8FAwN9jZeEqqrGwq8PAgJqt8qep6+KCQiVprIAAAB5io7i0oW5tJ20HRubpqW3tqpurr2y2M3SpYX1QzVms8SOAQHKxrFpt8qoBQSQ3OPrUUmh3drJw5e9vai2jn2sQDbCuZ9fobXOybasbGyN3eXwtaj/uQD/qwDnAAD/pQDtiQD5kwDzjgD/oQDeewD/vwD/vQDkAAD1sgDt48L/mAHpnwDSfQDkfQDcAQFlamaZYgAjIyXglQDXcwDOAAAtLS/UAAAoKCnHlAnadgAxMjPGAADr37+9AACyAADqCQfmDAohICEYGRpIS077NCb3lwCxtrV4en5UV1o4ODpaqr96h4ypmG2uQEIUExSGQgDLwqZwc3ZobG9iZWhbXWBgscRMmLLGvaTBuqFPUlU/QEMcHB327MvnrpdDRUiXVABQnrd/g4LJdCLyAwH3lgCIQQD/AgB+ztpRbXWdh2iWVABmuMhVpLzSx6xEjqpNfovDm0XidQDWbQD5AQBwwtHc0bSprauipqWIio08PD1dBATVcQDSbABqvc2bnaCgAQF2yNRpn6P7Khy6EBD+Fgm3AQHosJiQlJWDhYg7PT/1LRIlEBG2sZxak5xRiJQ3CQkXCAhDBgZ0AQHQZACXVQDKAACXAACL3eelp5b/opL/e2j/ali/jUDyUw7yFg3MmQvflADmJQBij5P/iXnFdCb3dwJKAQHk2rtqrLSTlYb/lIVifX6Gfmj+XUl/aEipeUCxfz/8oQHmRgH69tuTxsb/q5m8jYJLdIG3iD/+Sjf+QC2XZSfTJwJVnKy3lEupOz3DIB/+sQiQXAGPTwF+PgGXYADmWQCFQQClf1rJbh7/hxi0fRe3fRGmEBHvhxDChQvbkAEuqhzuAAAARHRSTlMADE77+/1fI7i3tQv+/r2h/v7+wEEX/Ove3HpkYSjYt/jZkHhsQD4s/vrkyaSEUfzy6OTgy8SmhHL57erm4cu6s5SOPxm1in8AAAbJSURBVFjDYhgFo2AUkA0Y1ZiIA2qM+A1SsdJkRgdzNQXQhQQ0rVXwG6Qz8XE4OriGKRT++KIOfp9xXfmSgAG+I3OOg8HnTi5GvAZxPHN18fNFAX4uLn4YQgElBAySn+Hiiwb8gABDyIWwQX4QpXgBdoMYAZzSPUgCYRzHca6lghOapEVQXCTKQJRoKqIQa+llieZWF204BD2HAxUETTvPwZcp6KYWdRJ0cBCXFCUIBVsMUtwb+z//e8EK8tGvyv1O5MNzILOqR06k/fTf/kKmnUOn02LZxCzba9ljqj5/QyuWQnGj3xcKxWKxYOhztuUgZmXL1m4/C4LYMkKtPO//uKLrB8TsGbrGWs18K3ByDZJF3v86nl7PbzruzUDM0W6szbKs+UXgZRaSOc6fPacLT6SdZ7/eSkBynkCJBCvzAJ3QNQNZWUM3p0LhMg56yH23rkF2IzzYE6klAkRGOQyQe0HI5BrUyzmMQDgViKo3HbLmDN30I1bhhHCFjGUgk2PQGaWVKjxAOAh0RpUOWdMFKagm8QKPN5XSwhDjGsRGwaCPFJTCAMFGqBGPx71eeGNkwj1OCK/45akK2R11yaeFEI4S/LMnqUgkRarCFXakSj7wSuGAK2nSUyCrORZ60CLQEAec6L15M6cm6eseIeagLkX1ECJjCCdqXFLlUR7NZO5koiG1TFK8yAeSyWQ3IALkoUqF7N+U0k1o01AAwPEVBL3s4Dx5EC8i4hi42w4qiNANKTwqGihtUxpLP0KwhDErenB0TNCwsB06aEKEuoKQpYO2g36EDZu5QujHsFg3Ciu2FLbD2FTQsy9NqOuaQ/YjebzAy5/HS9aDy/87n61WKxeBOOvsLYMh7bDHIovLmm6nZ3b6yyNDproh0/2dr68XVa/WPacYDy1dgqFrt3c8XOSlIsJ5+kM/pgzphaz63pwvdPHu/Bo0r1Em6tNac3rPYohbDV1F/Lp8q8HvRyehAQt9Qguhk6NvWgiYda0Gd58Y093RzTt/K7L5bAsAAEN7Tw2xdEM3PJOTFQDOZLSQRVcUXppTZzTG/a5sdztUMQUV1ZIacuuKRo+3FY3jaNQN2dUdcY8rMoAZvl4q7O8XpDbVC+3adbiZRkpZWqhJrVSDcdvtK9oZVRoAwM6WJJVKtUKhVoeb0kLxFYUdUgZ1LsqEVCtJW4qWIDMME1c//70OAgBFC7xQ9Pn9KaJVJyighUQxrmCUWwFHURbabV6gfBRLC4LAyqIoav8RAIiZplnHyMdMJlO97GAFWtvRz3K5/L7frw5L02ZvvprJVfNe+B7VKZeXriuh0WcbKEsj+XQASyZJLJDOA5pCUBT9824Yet6v6afZRDX7wuZ0uuayOS9L+5vDH2DI9HD0Agxv5GzhMIk5MTKctOUcNOJNJD4dzAw6ZNnNLI4lYyQZCydd2RGWOjyYeWAamhjni4BFc84wFsDxORy3YW+xDEoVCYLneWKAD3ZcMcwGV+IBZ4xMb1LmFD8+MXTlXy31rto4EIUBeAopjVn5EgcT26QImBRbBvIIadN5GdB4YIS8jATWqBHo0owEApF3sGUVUmWsxUUuYD/CPtOeOOBikbPVfqXmn/8cBNJ0Cp9IQdbUwm6api62SEqKx6efzZ6NHXWpdXwNcGX9a2c+Q8UlupzN9lOFw0Nm21JK22YJi3k1bTZ7LBLIuvZRnOA1K550XYciXTdnBYHbQvrlsvSlJNxlha7PmujGjpBkLaW/3TpCpgl1d4qx/yjaGxvzhVEuhF9+63SWvpCcuC8bQ2+wNw4ewVSIbNHpLPIochNG3zfm/hp9N0yl2hHMwjDbrpbLsg4jhllyMI0GpvluEZ5GwXa5WKy2fiQSQgplY1yjh8286lmUp0HgZHWe104QxJxY3bnZYK4UkBWhX+fbPM/8MKSUvlXK5hpNlKrX9Si34WFwFPopx163mjdQDgVkw+CH/yGAGwTzt15VPSB0cf/efeU4zkLxKXRczl+7B6VB1Ss8zCM/OhKR71Ns/e727icIocl4rFmYOJlMgS0cOPRuxheNxsNBgu06tI+iOsLYa4/HE/RpqGIqy0zGcSydrY0TdYjOaGkeDM2jFLKiztc4GfTRyd2NR1m4WtVOVpYRgYXu0DkjNaFxXjph6JSlhGy7hcBpJYu6Il8tV5nNqAcLnXWlqZzEzgr+BLmE7HGhk1Ybmtg6tVMXZqjtK3QWrA9Nri0iuWbYG4z+mnOrqgkmhHJL/bIH9DXVwoQxgi311HPSGmnqJ23UQl+CqTeqB9RBu9903L9ta9pt/wr9290Iou1h/9zIVqvp5Hz2f/gDrzNx1X0c3awAAAAASUVORK5CYII='/%3e%3c/defs%3e%3c/svg%3e",dye="/assets/Puzzle%20Piece-CSJDk1Or.svg",fye="/assets/Wrapped%20Gift-y76EkBmv.svg",pye="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3crect%20width='12'%20height='12'%20fill='url(%23pattern0_2100_8690)'/%3e%3cdefs%3e%3cpattern%20id='pattern0_2100_8690'%20patternContentUnits='objectBoundingBox'%20width='1'%20height='1'%3e%3cuse%20xlink:href='%23image0_2100_8690'%20transform='scale(0.0138889)'/%3e%3c/pattern%3e%3cimage%20id='image0_2100_8690'%20width='72'%20height='72'%20preserveAspectRatio='none'%20xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAADAFBMVEUAAAD74cLxkjv0hDX1mj/0nEL917b6u3n5qFf3oj77r2j4njb3nDH8wIT92q39ypz3lCn3lzD2jiv9rF35oEL0mTz5pij7r0b+tnD8q1n9tm76pzL4lzv7xTL9zUX+uE/5ryL2nh/+sVn1oij+smPzlyb8sFP8rV7+woX+wDf7syP/3YX+xVn7qSP9zlD9v1v+nC/+r1j/x2f9v1n6uDT3oyT7jy/1oSP7rjn7tUf7rzr6nEv9unL7r1X6qEz6kzv+zlr/v0f3tSX7uTT+pS3/14P/sS/8sS7/ul77rzL8rFP4w0/+vV/0mR79uEj7plP/xWb4qjD/wlr7rzz7tFT+umD3lx77jj79rFv7pU/1qC77oE//u278jjX8sTnynCP4ojX1kSn8p1v6t27+0JT8y1f/xUn2rSb5xUL7tDT9wS79wkn8qSf/1Hn7wDr6sST4oh78piL7zU39sjr+yFj9rFH8oyv9vF3+rVj+yWz8kDX7szv+q1P+uEL/w1b+jTb5tTj3ozr9rVn9jz36xWD9p1f6okz7iy3/rFf/vmr6o0L9w2H8iTT+1n79rFn+tXX8v2X+1YT+rU371mL+0G37xjn+0W/82V382FH811r8wlb6uST+yWj/qVP+uS//tFf/vEX2qy73ukD/lDL9ljX+wDf+1n3/pzL/yVr5pz78nSP8nED5qSD+0m36sVT/oTH8mkf3tTH/u0f/nDT/wD70oiz8qmT/4Tz94Dv42zn/5D/73jr63Dn/4z796U7/3jz63jv840H83j//2T3+yzf+0TD+7XH96lz96lX+1Tj+vyf/4Tv+5l/+5Vb/4EL82DX+zC38yin/6o//5XP/41r/4lD+3Ub+0jz+xjf/tzP+6oX/2XD962v97GT+5mT/3mT/2WL97Fz/y1b/31T+2k7/sE785Er/4kn95Ub90UD/4zz62C//yC/9vi760yr8xSb7vCP/55f+5n3+6nz/6Gv+1EX+tif6rCL/4I/+4Xn/0Vv/1ln90lD+xj//zS7/tUWXt6Z2AAAAt3RSTlMAAgYDDgoEFAgiGCsYEAoHRTcnIRwWj0hDNTEwEv789PLJrHhvZj0mIf39+/n27uvn3t3a0LmnhnVvalRRUU0+/f38+vry7NfHv72wrquooqCempWRjYR+enRubGhgX1lXVEQ9G/r68fDt6ejo5ubk497d2tTU0c/Ny8vHxr+5trKompWRkYqJhYN/dGtdXVxKOy/++vj29vXz8u/u7u3o5NzX1tPRz8nGxsG0saegnpaLfHt1cGSfnQKkAAAFM0lEQVRYw82WVVRbQRCG40qQJFCguFtxKFAKdXd3d3d3d3d3dwukCYF4grtLcVqgtFi9vdA+lMhlt6fntPNwH3bu+c7u/LP/Dub/DuzfApH1/hLI2Al9w3qgW7abipommRLBOPjhwah5ih0ZDESxGYeaZwx0BKx1r92oedY6BzCQo/cgElrexKsjGMjk3AZdtPyU82PBQMHHlk1Dyx8o2QUG2pvtfhgtP6pkCx5I/UEFFvvRfhhWYgPUSOwbRZVDUKqNsynpZQayob2uxd/moAhs1uu7D0Aj6Tyb/z5NJL5+SKtwVJ9MDxPUhqZRj7R5css1KYXPF4nd7+8/bMoma7ifJh5VbmiNRKJN2bHOslNBflEclytQJFR2tly+JXiaOqijW1WhHbo9EOkBvuYJEgGfL5BIKuY+OKTRmAI7VRYOb7VE1MdzEhUCgUJi0ddYT4v6nzI+9cO1SsKNOZugUHw7vk2bVRD7FYg/rzbEtE4yUkokygEMrbKuTBblz6cDNFLbhYmJPbR7JN27tiy5exsAEPGeUtmboTUdckIal/whEAMQ7Wsahmq394DsWE7MhyEg13aii0uQ9rYd8LGMk/putQ4AyMCqnfYSUL2T47hxWUBFYi6eZ6o1Gehax+FG170bBOAkZtYraFolXfYuFgGVJXWfANBJ/nd1tXHWu2aV81+/jk5Jmjuh9e7e+UizaDpBS7OTYvmvORyOICX/ghG9NenGa3olCG0D1s7IlkZwuQgHIaVVZPY0CjVEZYUaN5sBnqRHITLINJajqfG44Rsuzfgck8rlcpENRUcjJFF6RmaPmw+fjtc3YLLNiDgSFo9VPYIT8tGbZhr8YtR2mz6rvLwuWnYuLEhJLYvjc7l8ThgSv1Bi58zMbt08Pa+u2ei/deS+EFbL4pJIzV9dsiGNZRIyeuByy85f64tS4zh8PoL5LQQiRcJbZUNjN881/iPH69NpFCyqiuyQYT6d8t+/jymNEoaFRb5sDh6v6RufYN718mZ7A0Mc4KRDHbN2+sek2tyI8ihhJALhhYeHvwyLElXN9LNnokLUtX9+5WhWlvRVRFRkZBMmPDJKaD6zvz4BAx30we7JtQhJiICaOIou1pOJfzTgEmxn5UlzkS0hnDc8sZURG3gTBLaKoc+KyZWXCxHOm0QrWyL4aZgdVNzIyEKGVIkXXp3YpT0FoiyhI7EqduSbJkfO9qa6xs8Qpr6Tt6qOJbbmEfLSyOq3VhOhhNq3kaj2xgjlEbzqGmsdKNDOazTV8vuJI+S8RJf2UBycv+cRtTemqlQe/7Yd3MnM7qg/A5O6pCGgRXQoEHNxQ5Ca284TyXg11oZQIH0rpdpTyV6R/irepT8FCjRCWenrpPqi+4llisYRUByHngnxGdtUxwCjjNz0RntgCJbCsvMxjw+TOA8wZpBatKRzXUU7fQCCLtlp6kG7Xf28p4slwlKhRNlj/ZDd4w4aO+n+5E3uGlOxiAkAIukyWFNG9znzpV6UFiuTlQvTv1qu2n7AhPZrwjWYHSuGEI3Qpu/JlJicHGlO3um+HWm/aUftWZTRH8ZdCYHueTlSad6SCYSW672LneFEwwedkslkS/RVlwd/6WqPgQrCplR5cYDa8p7C2QgcKuwtYheoX6pJbkuZkCCDBcW9CeqrHrfNIEE6vvWD8erTn9dmHCSIuMnCVkPp+uzAQAZ+qNskDXY3cCwGNkZ7GGhY3dMBGtRhJVXTaig0yMFG04xg6ggNYo3SpA+ZAQ0iOOA1GQQWGoQnYDH/KH4AT4/pyTh2s94AAAAASUVORK5CYII='/%3e%3c/defs%3e%3c/svg%3e",mye="/assets/Laptop-BHBrFA-I.svg",gye="/assets/Credit%20Card-BYaCUoPT.svg",vye="/assets/OfficeWorkerLightSkinTone-CYMRvt7K.svg",yye="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3crect%20width='12'%20height='12'%20fill='url(%23pattern0_2100_8730)'/%3e%3cdefs%3e%3cpattern%20id='pattern0_2100_8730'%20patternContentUnits='objectBoundingBox'%20width='1'%20height='1'%3e%3cuse%20xlink:href='%23image0_2100_8730'%20transform='scale(0.0138889)'/%3e%3c/pattern%3e%3cimage%20id='image0_2100_8730'%20width='72'%20height='72'%20preserveAspectRatio='none'%20xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAb1BMVEXZ2dns7Ozk5OLh4d7e3tvb29rn5+bZ2dnZ2dnp6urr7OzZ2trZ2dnZ3Nzp7+/p6uoAAADZ2dnl5eTc29vk5OPn5+bq6uri4uDd3dtaWlrh4N7f3tx5eXgKCgocHBxeXV2srKxvb24XFxe9vbu9vLslJnuQAAAAEHRSTlPr6+vr6+vq4/mUk5GQGRoai2KSFQAAAUVJREFUWMPt1ttugzAMgOGsLdDjthgogWyj7fb+zzibDCOkIWbwBdL401CM6Kdc1rwc46fZxcdnc8ivCuUHE19Vik2cq6QKwXjj7yCEr/VWmEef9Z8jtAGVNopQ9ntAGzKgC9V8h9tu7r4JUqkPQQ6CchiC4PNN1Bf0oKIpww33x4egxx3wV/TB3UAZLrpC/S6qhoIjiIP6VVQf2nZDJoWygtsuEaq4QgoVFbdCf4I8J4c8tzW7bqhKGVRWntstEXLeO0/bTYAcRkADcV4KecctEYp0oGgelDqX4gpQyjkp5FJOF7J0Z6dClhZBPEyB7M8iyGJhlEPWtlRkDA7BkkOp5QxBLZWKIT5RgMKMl/knshonIkL1RCu0Qiv0jyHpP7ZB6FaXgurbAISSMNuHprdCK9RCiQ6UmNNew9mfzOWcmNkl58s3q1BjYWuX37MAAAAASUVORK5CYII='/%3e%3c/defs%3e%3c/svg%3e",xye="/assets/Shopping%20Cart-BfhegbxF.svg",bye="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3crect%20width='12'%20height='12'%20fill='url(%23pattern0_2100_8744)'/%3e%3cdefs%3e%3cpattern%20id='pattern0_2100_8744'%20patternContentUnits='objectBoundingBox'%20width='1'%20height='1'%3e%3cuse%20xlink:href='%23image0_2100_8744'%20transform='scale(0.0138889)'/%3e%3c/pattern%3e%3cimage%20id='image0_2100_8744'%20width='72'%20height='72'%20preserveAspectRatio='none'%20xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAABs1BMVEWqX1/b29sAAADf3t6qXV3g4ODd3d2wa2uuZ2e1dHSwaWnf3t6qYF+xbWyrYGC9gXzt1sSvamje39/EjIarYWGsYmGybGq0cW+3dXLf3t7lyLyqXV2tZGPEi4W9jIrz5ty+gn3EjYfatazgvrCxaWixbGq9gHq3dHG3dnK5e3mzdnTAgn/i2NjKl46uZmW5eXXd3t7WysrZzc3hwbTc3Nzb29uqXl6qXV2rYGDe3t6pW1uuaGjf39+rX1/TxsbW1tY4ODhPT0/Ux8euZ2dSUlKsYmKtZGShoaE1NTXPurqtZmYzMzPT09PR0dGwbW1TU1NLS0u3f39UVFRcXFyJiYnX0NCzc3NHR0fZ2NiycXGvampNTU1ERERBQUHWzMy4gYE6OjqcnJyva2tfX19ZWVk+Pj60d3ezdXWxb2+6hoa5hIRlZWU8PDza2dnGpaXOzs7DnZ22fHxubm5paWmfn5+1enpiYmK5ubmampq+j494eHhWVlbZ1dW+vr6vr6+Pj49sbGzJycnFxcW8i4u7ioqqqqrCmZl9fX3LsrLIqqqjo6PFoqK/k5ODg4NycnLQvr6kpKR0LcIbAAAANHRSTlP+/QCB/XyPi498i4L9jPhrB8uPQvPuuKuKfw7+5VExAWU8GBTSw6eagnhVTUkp8b2Qj3wbsqjXuQAABgtJREFUWMOMk/lPE0EUx59NtWpKDwtC5PC+o0Yt7w2zrEZx17SJS0rChvYHNmlMDxKPqv0BgxoDIV6J/7LvzS4sxS30051lBmY+vPlOB+5kxsbGMtErMzV7IX82c4BocNa0s0Jm7mKJe4Nk7sJpUJA1AMD9G6WrN+Ag6fCdlheD2fHiXCqfI5rGdMx0+gyctm1bGQBsuDb3+AGC9BJBHC9O3mFRbmZimnAPIhGBAmORNnOpcLE0mYNhGqmLxgqXp2bnLk9N0KCILbYdymbuXkylUlcnMdkDKLLc9VsFmVbIj4uJG0UiwZSFNwsp4fJMsgaNCKh4NSVcOK9RoEiUFY/NVUH2UspwpYj/e5joJ50vpAy3CA2xSNJlGeQj0bUEUSQzogspwxQNVGRzRiA52TgZzihNDAkpck2Uwv93nQZPDWwJWxjPS9H3zuPA4lgCEJV0TyKayuJgRiAl2cY2cXO2lC8ecfhomC7enr00mSNjiTOylYmaUHHLjWcRUAMQJYdkoHQuTcYjHx1tLTx9909And26md/748LOjjq8QVQdheQ1CV2fJXWXqNMkqrYwFNmiwsb6W117syF16PerHlQqsQgNrKuzqN7htTWFEFhEbV/rZtc2InM97FC0tqEjkR2LompcfrsKsepyRRai4wKqJYcHS/tbs5U6LILDIqfFAXQ9olaPVFBT2u8BWRsdrWoBRCI5fLSOEakqIvpVoiZvzasDSVXKt/gX9Sgjc2ZRRYczwv2C6k2OyOd5fZccnwOvt4EaLR6090RKSU1HbA1FFPQJ+12HvE1PO70mUW9baRm43UAZkW2LaEhFsWvJRXQbCp2Gg1BVMgBSDYdU09oPG0GBZNRb2zYV/V5vighjD1fUQmxtWHzYLe0EG4paO0u6udnXTq0fhY3ez5rW3up77a3/UJp040nFUZUKaka2ZUQ+Z9tpOWS1PI7FV1jvV7XV41NrRxXJV+hvq/N2LSDYnf/Z84PKWlerypOgxljR1ZBIodNmEa9jKyERNyG+tNhd31rd+u1wpLvSe74NqH5srQqBDkXuThegtmnp+qavq906oUB4QMSHj53tzb5cOEQv6NYsSdxrt9u+77u49zVyAVwX0OGglasw5KCI19tyg4E7ANJDMB3B9MMxciPEsMUa3BehmYTDiZckoQ0sGrOOY4mfBKryVPe4DQ+fJ/OEH4N0jucRnFsYjbI8ZX6SOQmnykcznzCe/48TJ+FceVTmI0miaHhFC4uM2chiAgsjixa//3r58tPXN+Xyu1+fXg5i/sD1jST6+vHF8vKLD0/Li19ec4/7Mt7j2ee18igZLb769vrFyspKJFphllfMWz4Mi0bZ2sK/1uqnNXEgDAM4i8fe9uZ36GEPM4eBASew0IE0EBohhRhIiDllgqClEaX1D4inlv3I+77xbYq2IU7oE2KScfj5jA5YvePnfzR6cM4Dja6CxCgNYHI9fztibLcZn+Vt7TjRquyG9kcngmNVwCtAl5H/nCiK7kQn5M39KPKnKV79BUGf24d5Wxz3WOeGnGW+788r+XgBwYGOvPMhWKgbCp3xTLLRNvTDxX3DUK1ZAcNFU4i1L20WZAcu2AkqECKi9kQaQp7OCrVBm73E62gxCScNRBz0xVGPXQGVpWBfIVqZWE4gVKh7QxIUT+Lne/qCaHm7AAc9ZgUVBFHQE5sYAoXsoDzOszNI7NYwBoUsIYMQGXXExuR5/iS5HfRschM0jWCy2P81eZJ5zBZK8oQgyjgxxqSS20LKIEQrw0KRMirwmC2UqUSdIMLeVJIkqeB9oClBWOjFR9lj/SHKUSulUsntIa00QPTbi5dQKU2FekN4Hl0qZA0FAK0/liariVbu1GP9ILeB+MpVWi0l7wO5n5CoYirUDv3uhjgr312tNRTq2+jBOxV6zbXGQj0hjVBdaI6FUsl7QdMaAobL18R1XdpD1lB5WKbp4ZFhKrhdVox3Qvw7SWLovfqWd0Ftob8/Rie/CmqrhQgpnVCLQsMIkWS9NE4uxwOV66A/v34iAN3e3AwGzTkYDuEFH+DxMjQ0PM2h0N3tfwRK6yPQabH+AAAAAElFTkSuQmCC'/%3e%3c/defs%3e%3c/svg%3e",wye="/assets/Cooking-D0q0Sqcz.svg",Sye="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3crect%20width='12'%20height='12'%20fill='url(%23pattern0_2100_11347)'/%3e%3cdefs%3e%3cpattern%20id='pattern0_2100_11347'%20patternContentUnits='objectBoundingBox'%20width='1'%20height='1'%3e%3cuse%20xlink:href='%23image0_2100_11347'%20transform='scale(0.0138889)'/%3e%3c/pattern%3e%3cimage%20id='image0_2100_11347'%20width='72'%20height='72'%20preserveAspectRatio='none'%20xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAC7lBMVEUAAACIDgbyEAl1MS38HhexGhWoEwx2EA5paWomGxoVERGNjY6PXlwkHB39HRWhGhQgHx+pGxg1NjY7OzsmIiJzLCofFxgkGRkuLC1VVVdeX2AlICBZQ0x0GRrFs7P3dHDcQUEjHBuKJSAnJSUvMDE4O0BCREQrLCw6OzxrbnJVV1kmJyp8lLDEGhQ2NjavJSGTFA9yDglVVlfDMCv0Hhb8Ihv9Mit2MzD8PTaCg4SQFhDXKiRKS032MyyKFxGUqsY1PEf0GxOlsr2hs8T3NCqzGBDBJyLsIBv4HRbCMSloaGn6Ny33NCr7OC71Myn7OS/2NSv0MyjOFgzkJBvxLCLxMSaODAU0NDSvFg7/QDYtDAqnDwi0DQTTPznjOTKzIBjAIRgzDAvdUUvyLyS0FAz9Rj3/cm39OS//VUz/jIcrJidqX2awMzLoKiAyMjL/Vk21ODR0aXL/cGsvLi6Oen9+bnHD3/m/2/jfHxXI4/n/i4ZuYWXUSkTV7PpwYmTYIhnr+P3NREK71/jb5OckICDmJx3e8/zM5/rk8vihoap4a3LXS0XQR0PiIRfY8Pzd7/m31PbAzduMgobw+v7o9vv/jYg3NzgtLCzeJh0xHh3k9v3Q6/y81/Xi3uB7bXGYXVxkV1np5+nY3eCtvdrbxMjLsLOekZb1SD+YjpOdaWjsRDv4NSt2GhXP6Pji5unL3OfK1t6zw9ydmJ6pLi3T4ei6zOW1x+S5yd7S2d2ztLiRdHmEdXh4aGroPjbjMinD3vPE1ue/0eavxOOSiI2AYWpWSkxJR0joNy7XGQ+HDQfKzNKwur6/oaRub2/+Vk3/S0NBQkLyPzdtNTa4OTTUMispGhm6HRciCAdsCwZMCAWlrLSvp6qGUVi/JyCsHReWHRaiGhOaDwnEEAeqCwLc5+641OyziYqHaXnPUEzVQjusMC64GRSyDAS6wtCMo8DXurzcfIDrgHr/YFr/W1WeSUP3RDv+PTPuOjCMMy/KGxAXBTD1AAAAS3RSTlMAlAYirt7WJ/7rN38gEq7Yyd4M/rgnHPRf/HlwOicPBfvd0Uss0rmmlT0m/Pfu69jWz8K6uK6sp4yAeUlIOiru7uLg397XxcCyr1U6p3hNAAAFLklEQVRYw+3XZVwTYRzA8dkFooJSdnd3d8HGJszZhTm9qQx1JsYZ2ImYWKCAMWcHFiEgiiIgdne3vvP/PM+eu43jBnK+9PvZnd7tf7/djucFyP7LLfu2bm6tigm0cnNra/8XmVIujQtfvVpYCJ1t7JLjVJmarq5xjkFBGoGgIMc4V9fqVXPWqVo99jofEcaux1UrmqP7qR7nqNHo9Bu1Wdio12k0jter5eCeStVEt6PXsmnORQSc01gtpIIca2T/nKrURx3W2cm9SlGBKu5OzuxGuCdHl2xvqAbuFHG3F/uBVmL18KCcsrulovU1Op3W2V18wsVZq4MHVSWbkLtep9OzTqVs3LMTi2Zq2u5UqLERhdxszbiwaIZ+lujHoaE6vW3NlC2CZkrYfkj2JdCQrpbNBVsJh8pkF9KzbBGbodqVWFafg5C2jqaj7VA1HavNPqTVBj6vW9ZmqMululptlqEKeSn7Emmb7pzvUBbOiCrd+fkHbVqlMtyJCuZMu5bNm+U361nvbXrFERV75C9evDgcoo1XHMvfFAbS39ZrSt9t1rxlO9Rq0zX5i99ov9EcPz84EOWH4f9QX8d0aiOTle+lvjZ6BjHOwgZ4AbyHA3IGNmIGvDijk72blJfZNYiPTB6b2UR4gbHwujZx4jXY0DE6QzY8QiV7GRrYyewc+viM6S/JD3VAydIoxHh4jQGwy8TLGj/Aj6OTcl9zyMdD7iWXy72skePve81ueHiJkav5EAEXW/c8Pu+hPn6yLsnJHl+hIqF4X7mcpCiu+/NFIHUnFO4JTpJ7t55TGEhIJYeShyAGJy6H+/uvJaKTImBGAF+nDC5ZTpbPId7TwwIpIHBwOTxs393ExMT3gftMSRGR5G28kR0hj/RGoYIGGMgahO6a1ppMpsA7+06FQkhE5MICKLTCRijE/8yU6OhoU+DZMC4kpzseg0MGtahzIf5rz5729993akpYaJT4HFOgkMyu8sCRovrd40MvHtiYq2wnK98kdYSoV9wdnQlLeiU+l9rdTpavm3qUqAiLUOhe8TklfDV42ApPEYpzlqEIhdiYJ4ND3pYnlUolbGYoFL0jJibm9F0UUimtwTQMewISWiH8CKWnQgF7FAp0jYuNjT0TZkIheiHZU3xIATzNe5xAG1CdC098ZrwCjM+MoVEqbgwP4FGrkAKBKSskFHJygZkx6TKMiOBCKoL8C/PmTaX+FbuD+qZGbwF+nM7TkMqSwurg/ibOUP7jBLiQrxjm4X6zh4zokEq1kIR87t+8eXPSJHgJTXhzhHgzQdR9xhwKDtnG2UWdRIxG4xpLJ7DDxG7qXjBDQgHh64i52GZsEbISmT17C1gMpoOpyDQwH6zGYgK40Hq4fr3ZkiVLILEK4AiAzAHagRAtQYt4SUPBKVMy285Zamny0slZSKEh5vatARLcum1+RgYmI+HB0Fx78DAjeCEJqR8N7CfFI4aGbkQNkSDqhpqGfH0k8aUhJnWZlVkCy63MyySVfrXgkJ3UQWIBcRQ7RFxALiLHsOPYJXCPPuyA8Ll0XaN1Sdc1t7BnCxc2WY1b6crmQkt4q6jZxAGMX9bnAepspVbDyqZfLWWOtZkzZ+Idb/x42MSkcCFY2cNzDVY2F8p4nD4s19IfZdAQ0/fxQAkeJyz0RiGHeJ+o14MleB2lNpSEUMM+jFqhlELNBDiUg9ATg7dEht8OpeH3o6dP+kj0ZCT6/ahFwtN3gyR597Rvi/LwR3OjhL4SJTQqKwPtW+eRqHV72b/zB6dH7PNd6uwuAAAAAElFTkSuQmCC'/%3e%3c/defs%3e%3c/svg%3e",_ye="/assets/Alarm%20Clock-DD59pFfK.svg",Eye="/assets/Open%20Book-BEOR4Ehx.svg",Aye="/assets/card3-D5Hj3wXA.png",Tye="/assets/card4-D9Ii8puw.png",Cye="/assets/Package-5iNIs4eP.svg",Mye="/assets/CardFileBox-B4wVLkF2.svg",Pye="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3crect%20width='12'%20height='12'%20fill='url(%23pattern0_2100_7652)'/%3e%3cdefs%3e%3cpattern%20id='pattern0_2100_7652'%20patternContentUnits='objectBoundingBox'%20width='1'%20height='1'%3e%3cuse%20xlink:href='%23image0_2100_7652'%20transform='scale(0.0138889)'/%3e%3c/pattern%3e%3cimage%20id='image0_2100_7652'%20width='72'%20height='72'%20preserveAspectRatio='none'%20xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAC91BMVEUAAADjkomnqarXYVLGycqRkpnR2dbrsKjrr6iJio9hZWmssLuKjpi0tcNfYWZ8foPR2NSpqbBXW2GDhYtcXmRtb3W7sbFQU1hydHp4eoFzdXt7foRiZmt0eIBeYGefpLHTq6nrsKjopZ2kqLNkaG2YnKdbXmJgZGhTVluvsr7Vo6OYkJx/gITNhXqfpbE+QkWgZWXHXlPrrqa7w9mjNCaqNiiyOSmmNSe+PCzw9/WuNynu9fPGPi61urm3Oiu9wsDTTj7UV0jXYVLCPS3s8/Hhi4DUVETPQjDKQC7e5uLeeW3abF7RSjrnoJfPRjTo7+zMQS/LQzLj6+i7PSzx+fe5vbvKzs20uLbW3OOiqLDf5e3/USv/RSvW29yLj5bBxcS2u8Ktsruorrbq8e/b4d/fRBvl6/PO09rV2deGipD9eVD/aT6iPTDGytDL0c+WmqJ1eH9bWV3/YTfEyce8wcfei2H9hF3lSx/h6Obp2NTP1NHCxszHzsrfwbv9oXdgY2p5YF+rPzH/WzDrRC7QPiHb4OeeoKjWmIxoa3L8m2ttYWP8jWDTa1r7c0Dv7ern6+nQxsKcoqzEn5e6j4mAgonJg3X7gW75iVOxXFHUXE3aZTrhRS/rWijJztWyt7zqvrfaqqCRlJz/vJrgoZdwb3T4jnO+dWvtmGq/aVZaUVRsR0XNaETGUUPMUUKtST3ITDzIRDPtaDCwPS/iUSTvTCTYPxvbzsjozMbPpJrNlYn5tIeJamrQdWjbdGaNgla+X1LNXE1cTE36f0a7T0J8QTv4ajXYSDGTOS35SyjYRCbk4t67yq/8xaXkraXJrKDikoXFjn/WiH22g3ngjm7NbmFGS1F7ek6gWEf/VkPpeT4yNjrESDmLQDj2QzPfWzH5WSvt49/JurbQta7Csauik5j/sI71rHrbgHPmhXKdZF/LdFbZfFF6VUtQczpmcjXW4dPF07fduLKcuH+he2rkW1XuWlXwuaWlvI+rrY2niIqproKHoVxJUCB9WqrhAAAANHRSTlMABgarqi+qqqrupx0aEAnqqv66bFA4/fPp1cmij4ci6K2rqqZyPfHb1s/Jxb+qg+fYx6tgsFQc8gAABf1JREFUWMPN2GVUU2EYwHGcLaACYnd3UnOIDCYlgsoshMEAZeSYEg4cOFEGEtKp0iklIg2igDRISCh2d7cffN5Nj6jHbVeO8f/A4dNvz33v7n3fM5FfhRMXEx34Q6Ki4jgRDOHEpKUmTRg/ftzYsWNHjBgxlBf8N27hwglSUgPFcEIp0jMl544Zw2C4uXkm2NkFW1Bi6R4QPZZiEWxnl+DpOXb8BKmBAq2Bw5ZcvHjhgpsnELH0gG0mVGN7l6Pm5ltRhuY29lQPiwQ3xpxJovwd0fHAuNlRgNhmYkKlGgNjw3UO6uvr7+R20NzYgsGYIc5/oKEXPINjAwJAQc4xY3sEHTU3BAmor5a+id08Uf7QFDqdHkAP8NgG8SjeTN8o1FYbYwGQ+AIKhQIUMJAEUL0loLgLZUylUqfyX+5+/cOLPd1gqS0odA8JCXAAgstzsYFcXOyNj1FN4BM8gjjT+wmAlFWte9LOnEllMHi3P9gCRYG4f2Jjb71vTSq5u26wIEhtg4KcvEx1T2VlWhoCQWQcgvbtKy6+f/9+eEV6BnGt1hrhIFl5ma9Z82Kzc3L0FBQ11qtrKxNVEDREeEheXlZWduVKOTk5JSU9BVVVReTo9BlS+A8h1f9uoj8EDf53EJL6DEE5FaehCr0f75qAhxa3KELjGyTPTim8kcesq6tjsgqSLqn2guKn4vhDA66HVMjJAgOxk27QzMw0NfdsPKxLIujmhWRpIEgtwuduTN5IQdBmo9FBSeFsmCm8iWZoaAgSgkxJBDyJ1Q4PLbGUw6rbqDlIILR61apNm24GBgX576137gWRCATytfj4aKYfnmAqHLRl1abVu/fa2u59+6Le0Ezz6TPNPZqHTfEoMoQnkHSFh4yQZFv/8QUr+l3Hh7L2lqb6Z09JXIwA0B5MkDNr3YMnZaVlj59Yd3aUtYZw8oFBA5nCRCOFh/zjQ0O1Oj89efy4o6Ms5PXrV2u1okHCDPk3JyYm3vMJf/Qy5s290NCuy5dfqZQyyVwIyxoZcdqSEx0tQxNDE2+7Wlp1dRkYuBMj1vhhnqigrS3ZO8wScgx1tNrVtd3A4HIUUSWaTIDFxgBdb3NwSHb1CnNEWVrt2g+QgbsysZmEJ2C6/U0ODg53Goq8XL28HR19EcQdSW0tk4wNKoSBihqKiuJuA2VpxZNgJLg27NCdojtxDQ1xrr2hiHV4PCbo/MOHDslernFxcbe/m4i4hoARevCwOyzMy9UVXRmsEReqQRAJK3S8u/tsmLd3WNhXp6bGPUq5vJmAbY0CU45HdvuehXx9q3btR06ue9S5DGIjxsW+CdCJE1WgVFVdhWpykaOToZKPEVodcjwy8gR0BMrNzXVycopC0F0/vFDf7H6LrhvxHhE00hVATp50gnZAtbXqWeXPybzbnzdV0HbkE8iDdgcCdAUYUFCnTtWqZ2e1+CGIoMuKny5wX0tvHc17HxX4RALERaADBw5kX/JhgkOGV7cwe/96vfCg0QBttr1RQlQ+d662FgxIA5x85Fxr1CoV9hCRGcR91fpzfNS0dXTWa0DZ2ektaB58o0+E8Fu2DDsIQTSaP6ekPCMrKyu9vJ2TbwoMOVpNDdPenxm42dbZmWZoRst7HhMTw2IeJsAi48n5EdrYzkcgIQgk2B910f5IAgfPitDBfNBin/enAdRrpyX7xWSo/86x5nSTM3K+QHg/Vkk29vMRN3ZKoD+Nd2l+zMaSS4q/edCCZDNTQgoLCjgt7emqqn06sfHOfkpKPx39pvX5wN53SPHPQMv5Q2LLhIXmi/OHlmoLBzXPF+UPjevUEAa6VzgAJuLXpEPWeoKh0pDRK0T4N1kytWelIEglSQIGEpC0ZGpatQw/SLm8VWIGWiFBMw0bc6ay+leQ+ob0pFtTFsM8ghs+SnJMahqy5L+DIL2K8Je3psyYhfY04ahhc2czHj2q7Km2tkZYTk4OOzOzs7g4eOiCxcAIH27yqImSc2a7oZ8geCUk2I0YN0FqlpgI5oZPlh41c+LEYdwmTpo5SlpsuEgfwg2HcCJ/rc8oYPvHAwWECgAAAABJRU5ErkJggg=='/%3e%3c/defs%3e%3c/svg%3e",f$="/assets/Chart%20Increasing-Dc97XcE1.svg",Dye="/assets/Money%20Bag-NiNRycUS.svg",Iye="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3crect%20width='12'%20height='12'%20fill='url(%23pattern0_2100_8951)'/%3e%3cdefs%3e%3cpattern%20id='pattern0_2100_8951'%20patternContentUnits='objectBoundingBox'%20width='1'%20height='1'%3e%3cuse%20xlink:href='%23image0_2100_8951'%20transform='scale(0.0138889)'/%3e%3c/pattern%3e%3cimage%20id='image0_2100_8951'%20width='72'%20height='72'%20preserveAspectRatio='none'%20xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAACtVBMVEUAAADfuYniv5Pv8/7w3cfVuJPguon3l0DlxJrozKvt1rr7+fpMYvj4o1Xs1Ljy2cHguorjv5Lguorjv5Liv5LkwZXjwJPjxJ3lyKXt2L7ivpDjv5LkwpfjwZbjwpfjwZfevpfkwpjjwZblxZ3ozavt1rvbuY3cuY3fvI/kwpjkw5nkxJzlxZ3myKPnzKn00a/3lz/Rr4XfuovWtInbuY74m0bjwJPjwJRLYPjkwpjiv5PiwJPiwJXauZDiwJX4plnlxZ3iwJXmxp/4p135rmvvxpz/AAA9VPjeuYvguorqr3LbuIv3mEHguorcu43ptHxPYfHnu4qChNL4olPXuJJQZfjKsKH5pVhWavjny6dkd/r5rmmAkvzguorhu4vgu4vfuYjhvIzhu4zfuonYtYfivIy/oHnQroPWsobRroPhu4rNrILEpHz3lj3PrYLSr4TKqYA4UfjJqH/JrJ3ivY/jsYZIWu/fuozzTUb2NzjMq4HmmXa3oajFpn7tqWT3Pj33lTr2OTnqrG34OzxCV/TbuYzUsYU9U/g+VPc7Uvf3lz/ZuIrXtIfoXFD2QD/4ljv4Nzg+U/TIp3/KqHvaZVXimlTfvI3ZtYnFpX29oXqZiZzcuozbtojduIbRsYbIpn7Bo3vcuIrHp4DLqX49U/TRrYDOq4DxlkL5lTn4NTZBVvZOXedcZttxc8u0m5PTspGxmY7gpX7WrHu8mnTKlXPBkW/eiWzMnmvOd1/acFvln1reaFbgYVPtVkvyREL5OTthaNJ9esCCfLeajK24o6eUh6Swm5+djJ2bip2aip2ij5vKrZeok5e3nIfjs4a/oobksYXbnXnImnbFl3TmrnPYqHO3lXLgq3HnjW/kqGrSh2rGmGjtqGPho2LjdmDgbFramFjuaVjhnFbqZVbfVUrlUkjzPTwYxCkmAAAAXXRSTlMA/W8CBXL6+nEgGgObWBIL98/0w7awpkpBFdq9oJKGgHFjWFMpDuPZyJp4aU5FPAf39O7nz8rIqpeVjox7dmxpZV5cUjIXBvX07+/r6unn1M+3mIuKhXxuYjQzJQ5ZDHroAAAFLElEQVRYw+2X9Z8SQRTATezu7u7u7u52d7ldThCU5c5YRbHBwkIF4zzv7O7u7u5u/TucnoVFRfEnP36Bx5t5876z7O5xdxn+El0z/Oc3GdUpD6ZT53rxeDo3qZ+N0LtdPKJ2ixjjm3TBc7ly5cqSBYTMv+HJPGg8p/6wfKB35JDmuTHNh4+OUVO5fc1+c3T0HFCm3ND+8ykLug3MDihfPiulfPlaHSsbPfmKypq2fr3Xu3jxYq93/XotKMv2a/PmL6Ak7Q0FtZDN6g5shCRvU/1erUgVgyhvdZuqWhFOGFSA4+KueYxdu/eNdbo3HXm/hPL5mK9xF4OoeFWbanW4XQi3w6r6bJb9V6bruW2xqePOnJ9LOX/uYd9ihk9WRPL6U92bPIhNbtWWokmSXVHMGxBmRREULT31yLm5Mylz574IlsobISrRWH166tRqwqfj4zwuh9MRgTv58ZmZSxEzZ8LwLrVajghRnaqHts+atYywY/vxTarPhz5rMgZ4VZv/4LQwDtp6VcocfqoLBZ+M17Hsg8eiael+39bNKzHbxtpCmhwMBuGFhXjBtdU0qUDOMFGOaqlvd8zi7Nj+epzL7QocuHVjHeLm9Tv3NzvQNeVYwSWpGn4r1W3kfP5mhp6XhxzulVd3r1ixZQt4rQBcuLsZXNTkQMCzBuMJBFzuRsX1npylEhMnRpCYKKfuSVrISEq6bE7Q0i0+JzlvLrfVZ0mXCuXQH1DDFIsBv2/f5CQ9e7fabKoj2ZO2FpPmcTlTLd3r6O/GBoFxRtIuTQ5jzwEwN+bw0ROrCKdPn3y1sUEx3TUrE/LbDFhCEyLYD44ycPjrcsrUqVO/HVtcowQTdcwvJ8iyJMkgyBIE5Qn2CERN83tOzNaz82OCqT0TtbH41LEIK3jgd4YVAxPnNlfasy87p+rYeXarvxwXbU4bEyNHT04J5+yj5MGZ6amuHrLEQiglJf3eg0kRpKRUq01/8MXEWEmIQqJYKC++GwuIfFamMTpytJFcMgcTyWQOJjLLjH080+UiF4FupIKRvEdtAYgokdFKBBeVaCrCMamJWEPHVAVzkVc4oJeK8hYSZRE88STIQIQPQw9ZgoOIIwrkO6lKKREio4gWkhFZh95IG9+Kd4h2KiosiNGhSokecXTsTUvg+6iwHawVf010kSRK5D6qV8TO5v4ASZJK4d+3WZoJBo9BKbFoLEuF82FRUTtRg5fBEcPBCkzENoIy44YSDKxu9ApF6mFRaUFCyyUE7mWfn5VgxDI2jQpA1CwLF9klyY4qeA2BDQQ2ZIv4WCiKRblqCHwpR2Am3sn1tCwIXJS5hQCGArOBHGVCmI9UWCLQMWguTURlBARvwymKeg3vRC8UBb2oJd4ARFpha0lO6hIesAJNauTColZkllc4ZOuf04J8+5cVjEg/bjZWyjBRnLQkonLxiloRUet4RWUzYGr+LVH2eEXlqEiJWlZiFrUmoloZUd8fe4SaRFQho0ERi4+XshNRB9PPOhXFWFRIJCMqqmiK5fQY1WaSZKxFRflxK9co5M38YyMXKaYKRFQpP2riIhzNcG+S4+OAXjpDPyQUdSCi2vnNZmBHBwIyQUHrYSN8kh40T8x4CyQB02ZTRSIqVhB4zHASiUCGjhvkSEA3hyJuNSPQqvw6ETQpuAKfCKiAgdjxLgpx8EVAVImI6hQM62XQlM9Hp2Bt+ldtD2PRaPuJqBgRjehjjouGdYmoRGGTKWMcVM/J/n+sVKFt20x/SoXKGf5xuv4lz3dt+bBRidJ7dgAAAABJRU5ErkJggg=='/%3e%3c/defs%3e%3c/svg%3e",Rye="/assets/Brain-sfxWN5d_.svg",Oye="/assets/card5-BEkl4JO4.png",Lye="/assets/card6-CUowhhrk.png",kye="/assets/Megaphone-BE75S7po.svg",zye="/assets/Framed%20Picture-B_-bEji7.svg",Bye="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3crect%20width='12'%20height='12'%20fill='url(%23pattern0_2100_4419)'/%3e%3cdefs%3e%3cpattern%20id='pattern0_2100_4419'%20patternContentUnits='objectBoundingBox'%20width='1'%20height='1'%3e%3cuse%20xlink:href='%23image0_2100_4419'%20transform='scale(0.0138889)'/%3e%3c/pattern%3e%3cimage%20id='image0_2100_4419'%20width='72'%20height='72'%20preserveAspectRatio='none'%20xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAC+lBMVEUAAABJe0lpeGqwq65SnVJjc2P3+PihoqHCs7yQzKX19vXw8vHb29tle2kubEZkcWhfemCcoZ2A56fy8vJff2GKyKA2p1IkbEA4aEpPd1zOzs5ggGsyz0SQoJMz1DhEml+ysrL3+vhBbVLU1NRngm6kp6WJn46ZoJvr9e9Aok84wUk5zEUyrkmtsa+7vLzGx8bNzs2QkpHW1dVulHhZfGW/v79efGbo6eh3lX69wb6kpaRthXVshnOGm4lkdW5g2G482Ua5wrnY2dhEnFczmVVQlmBJm2TE5tE0dk0+iVykvq3r8e7MzMzY2dl+mYOws7De3t6ysrLh4eHQ0NAxxUlphXHExMQ11zww0DEwwz2np6c1uEni4+NYmnBakWZt3IrS7dva2tr2/PmdoZ9ikW2e1LOLr5hmqIBYkm9PdV5EcVbo6enn5+fl5eW7u7tYbmHX19Y9r0Z0i31XwWeBmYdhkGOmqKd+gH9Gq2Hw8PDDwsI5qUMcaDew3cCq2bskZzzu7u5rm31Mm22Gxp663Mav0rxYemKCv5mcwqmqrazCwsJgzHqI1ZZp24VofW5nvmtqim6cnJx+fn3h8eZ6o4qBgoF6t5HDxMR7oIixtrVlbGmSxJQ610We+MHCwsJkznFCpVmIvplJz12i1qVo5moAcygAdicAcCbK6tUAeicAfyXO69gBjyEAkhww1jQAiiADtBQBoBoLkCsAhCIFuhTG6dLB6c842TwCnB0BpBgTyhq45Mib1K8z2DYUmDIGcysYzR686cuy48Mm0isfzyQAlxsNxRcBrBVJ0FMxoVE82EIAiCKm3Lgq1S4SoCwLmCgJwBSr376h1rSFxZyBwph6vJI0tUAbgT4FhieW0aqG15hBrl83klUjlEgfpD0xzDoOejJoq35ap3ZZxm4siksGfitNtWhE2Eouo0kinEkjg0YMiC4dwC0VpysHrhuQ2qR3zIt54IFjxnxSoW05q1kzi08sfEZotH0+pFsfsDkTuyLH99Cl7bCX75xZNUcNAAAApXRSTlMABTYSChzgLAf+3t3KROpUKCD81RH+/vHm4tq4XUci/uzj4sCndFo5/v7+/v38+Pbz3dzc19PLx8W9sZmLiXBrRUH+/Pz7+u3i29XQsayqoaCNjHVuZFgtEv79/fv39PDv7evr6ung3NvYyre0qqmehIF+fHBvWlRRRCz+/fz7+PTz8+rm4uLh3tawq56Jf1lV+/r07N7d29vWwIZ3XenZz7u4qTzyAo7bAAAGKklEQVRYw6XWZVhTURgH8Lu5UQuY1BgTEMSmFERCCQssUkFABRFElBIVu7u7OzZiTpgwhhubA1FKJiWNktJ26/N47mDGN8/1/+l++j3nvvf83w3BEIIyjaB4NvA95OSPYIuyh41NtKkyDn3GMZnrfJ2xOYPsA1xHBlme9VJGIScnzNAIq+PmriEMRgjDVAtB/C5dYvpjhE4fNwo1syTPNgk5AA7lb0BAsIVoZcmwO29kTo71IZu49E/8FhZsAxkcx5Z81nyc93rPcfNxwGE6OePgZ+1JtnAlzdK0jd5vEbXeG5X8nJhMArTjTV5BCgoizfJMSLC3WIlKCMGZaQDtxJJXaGpuC9oWlUDRoHkByXOcC2LgDPvhVHyAQ9IkbXO1G6KhZXDUwyJqvokJzdnXD87B+ZBXaqqRSCRbo4DZG/yZ8fH2lrGm43wM/CBHNN8EOGokNdu1pkZGc1zifePm7Wd42TFGIHBxMYkCjtrJ4It4/FqbKyYX49ZMdjCysbf0wsE5s+doKqmpKZEOxeGJOBc7C4bHkZgYK3ObEBsa1EU8MGfWUCXg3IxbR8ThcMoe5ubnJ164EOo60kgZZnlEo46SklosBZwHwWkR8ZP2m5mFnrYKMLOCgGjRs22HopA3XgM4BAIRT1GfPNcq1CzgxIlJKv9+ET0GHM81R4loKY6uo6jPmzw54QDD3t500L87XnYrhi4BmXXo4MHDly8fPnzjYDxwKD5zNqioQFxo0z0zT44ESRysyGKQq9eu24ErBOPonQtOASmrnzq1oaGzs7Ox8UtPbuHYhTOHIDBZqzc+OCUxMWVLa0dtbUdS8r27d7LSH2SO3QHrLI+YgTqbP1R/zeb28AacQFhniLW13BEasouy0lPTeEWctPT7mYHTZw6H2/UT9AackiReCYcj43HSUu9nj56+D85R1jfelZKYksJ/x066Xc0Ti8UcAeoYhg+HaipN33g3ep6MZvbt2yxWEk/c0QucMVPDV0M5g4bRgQPSJEEd8MFK8p8/4uZPPQXpOND3yZ1KCbvfuStI7VsAnEkEKMeRHt7vvFA4eWmyxvyC7XCOyip6eGJGRmJi+W/n8aNc1NGCclbTzwVnAEi1Ch20wnmpA+kgw43Hz0AdEXDa2nUUztiFc2GdCLlT1gXOI8vt4f1yiHDFWK63i8/nZ2z5gL5XUZaAk/f4ae7LQFhnxICzuZ7NZoP5FMkEj58+LAycNlcDrhgT3HbzQXIMJVM+1beB+aT1AWf09ImQjj49TCqV8oXv2OL8N/lidHFgcWj61H1SoVAqbJawBE/vp5dw+h3DiXgErmDUvVKhlC9tkrBZHEGWoCQvK/1h5pgpsI4D9YwQnOfba3ChwebgiUvAQsTgOFKX5eTkCKVvelngwycrnFHjKQhcwajLNqNQuTgZLQaYcxomZzU1YktpaU6O9kDB5E72GJ3xxxC4YtDdw0oBpNrFZg84YCEWwjvG7mHFxaWlNa1sSdULcKFRh1s4duk8HFzB9NzCikFEoBi8/NHVmJ3lbjvLysqKRYZgPnnpfZx+59nSNXDOCGvqXpGorEw0HZ1PMkfuPMkEDgGyqLpnRGjeSdjyhQh+wB4BZ9ERAmTBdJfV1NSIapr/chYscoR3VFVrivmqVQoHLETU0YIsqm6Eqqrqq+8/8hslLBZw8uTONAdIx0HXXVsbQG8epsraWEnV/c7zacOIkAXTdd+pDaTXjQKOrC2pseULWKzZ0A5yjOq+s7xcW7uyAfzf4HXz+h58RZ0psA4t0m1vRUV5eWUrO6m7O1km4wjSUEdfA4HLkU07yisqKirrFYUXCHq43FHQjlZkV1fznw5YrMCZAOsgeOrngqrmSkOJ3CkCzgPUwSOwUdete99Q1QqctpLqAWcjcOChrXU6BQ0v0AtdJF+IT7gbrSkIfCi6n98XAAm8Fw8UHrODaNBb2wsKCjq7k+/2ZoHFwX22Rx3BEpWYTe11Ojo6HWL5Asp+pgccTKFQP75tr6ure9/7fw6i4rj1w+u3LS1vW55zM8F74bBCoPxbP36qra19Vdsyyho9D3Zpldumj9OampoWDcMj/xUc3jHS2DgyRp2A3VBQRDye+B/MT1/ERTchXRK2AAAAAElFTkSuQmCC'/%3e%3c/defs%3e%3c/svg%3e",jye="/assets/GlobeWithMeridians-DmbDLIXx.svg",Nye="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3crect%20width='12'%20height='12'%20fill='url(%23pattern0_2100_9064)'/%3e%3cdefs%3e%3cpattern%20id='pattern0_2100_9064'%20patternContentUnits='objectBoundingBox'%20width='1'%20height='1'%3e%3cuse%20xlink:href='%23image0_2100_9064'%20transform='scale(0.0138889)'/%3e%3c/pattern%3e%3cimage%20id='image0_2100_9064'%20width='72'%20height='72'%20preserveAspectRatio='none'%20xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAABp1BMVEUAAAD42rb50qT10KH41q7606X30aP2zp72z572z6H62bH30KDeybr506P40aL1z6Hx59v2zp340aGscFj40aH31Kn51qr106r85cuudV340aGXX0j52K/52bH52K/75Mj1zZz506Pzy5ykaFCdY0z2zp351Kb2z6D51aj30aKMXkv31Kr31q3727SKal764MGqgm3mwqr63bv64se2fGWpblWyd2D506T40aL506O2fWf40qO9hG+ialGpcFi/h3L1zp/1z5/206f20aWbZ0/20aO1fmeNW0b51qrBjHj306f20qe6iHLHlYL627b62LCnemSzhW/21q362bP31q/Tppb30KD40aD2zp350qL2z571zZz1zp340KH3z5/1zZv3z570zJz3z6D0zZ32zp/0y5v50aHyyZn1zZ760qPyy5zvx5ema1LvypzpxJngu472zZznwZPjvZDctIzYsIXRroTKmnq9iHC0fGKXeVufa0+eY0uTW0SCW0KIUz53SjXRpYTVqoPNoH7Fo3u/jnXEknO2lnKxkm65h2ith2SieFiHYUZ8WkBuKvTWAAAAVnRSTlMAC362a34v+Oq2a/gH9/i1A/Xq/t95cmsJ/vPpYk4pEP35+Pj48My/t7Z5W0Y8MjEtIxcM9/Py8O/r5uXk5OPg09CgoJualZGQh4WDc25iU0tJRTgyLl7evloAAAVYSURBVFjD7VZls9QwFF3c3d3d3d3d05CkfZu2j8Xd3f1Hc85NSgsMDHxhhhnObpKr555s90nrP/7jP/5lTFsyeWzPPj0FOPvArB1CbJpYwRJn7KlWE+OPzd8w48KFs2fTMjl79iyMr0irMy/Pn7vAXAPnzp6du6zBs3L/urM/A4kiU55iVhMKySFHa56p82f8nCdtKKStyhJHjSEDv/IsmXv295CqFCsvVTP2lWj4lNHp14FK/ZpI0ipP61BSEQ2evClJAQknrExz1byYbBXEynP5nM8JD68mPGPXJ2hP0wSq0YJUcr4gkzgletiUkkMWpqKbxXJWisaPmZiAqExJji1XMhEmgJZSCTtfEJCGXSXnUA3KhBCi8X3Ik2AwgkRZUhmFiKtUrjCAQqRTlKFeqmERQ0E0fKzw8FNRKmG5Ol+GPDaV8pp5Ii4QjETJTtREU0YmAeCJkvL8XIxVfm0bckRayZWRaNoCttdQSdOtRtR2+U06JTPygwa2po7+vlFkB/aYKlWdNJGhjuAj0VDUdyQkKiBVxI9ymIzNNPOGHIlLuxBBWoYKkzd5gkGK3HtVMeIdHSXPgQEuPUiIjHHGKIJM5xoT8TOVn7/oVVo/RG0UM6VKo0Y45uLMcSBypjT5+StXr14hUz08yUzKsRjSeKZKvgvmYqkUg5QFJf16t/r2N8YUV5+/vnfv7q0reU6KDAvIU2yB4ateWDmVeo3NaHwmJMpwNRA5d/XNhNmTJl2+//JKUUD9+TyMIlgezkx25UQnHUpRAUOpyLmLd0dNWrh06b7ZE14U3nZf1KlcPSIz1PXVs2D7AYNIpM2N+7MWDscvgd2X318quruDgqxmAo/hQTSPaGUqEyLnbo/asrwFHJ816qY7702aUnsNPCRd93HJht0YOVQgMrcvbxWiE2suX3PO61BlaibqMRLlamjSVo52VHTr4ajDvNreyw9vFM66TGCycKHMhbFZG0dbRAgNCjJtZUa4WlFc+vho45EVZw6sffzhYmGlrdaEanoKvG0GjCYRksZIHcNBkS2KO08erd62ecLjT9eKwhkDSbGKZG0RBzlBl/FGIWsIjdXWXocvpLX+4qvPz54+ffbkjvdOI828kKG9nZl2mxFyIqwt44YvY61GuTNaiLTrvlhce/fgwdubnU6n26HHoYGSwKG0UTiokJwOfLrNWawQZXDaQmScLXzhCjwvQjNDEdi4ay0KyCVNFdqMKoYAIYJVeHIVhXXakiiM4UUwHCGt6UcyzTnBCiywhAiGs4RzWrsiUGjs6MbhOt1GSABjNXNCJhvSiIiiqaNZzamOhrUGXj0KRqdDlxqQ9l8ZtEAqHImmLdCWUXhGeKTQuiCcXtGx0iCPSZ4F3ZCPIFFrSn/LKzlmydm8utPIuY6oNPSt9zCjYmu1OD4QDR4zgnIIFw/9FWSyogiGZHxdEueTj0StHgdHfNtLhGFGTM8QLiWObY5ykdGBCFh1iJoAFjURA96ynz1RVtXOJu7WkoiaxsxhQL4AAcbCsb6mZEbyNCIYoigMIhExeFz/6yQiRRhpMZy+ERYxbWCLKj0rwnjY/cZV//otGs1qNHdjo4me6/SFlXeMBJcueWHu6pYkKpnH37UKi3d0WRJ0YYXRQHcXdxc6NHbb6YDJ2QgxCixercLpedPJT2AeN8qjdNK4Lrb7bo/V5QgtdQUqu4Soxoo9IyiASw5HCZQiGj3burpo0qDJVxw8YnKrgVWL5s2ZHmsI0Vd5nnuV/MHcvqz1DVYuHrNz2LBexAAubMN6DcAxIEbh0OMZfb6H7To5vPU9Bo/v8ecY3PqP//iPv4QvNxD6hCZEhPsAAAAASUVORK5CYII='/%3e%3c/defs%3e%3c/svg%3e",Vye="/assets/card7-rbWc8bjh.png",Uye="/assets/Electric%20Plug-oZAfYuVq.svg",Fye="/assets/Link-BGiMzZWf.svg",Hye="/assets/Satellite%20Antenna-BZqZFG0m.svg",Gye="/assets/dnk-C5a5_LEB.svg",Wye="/assets/MobilePhoneOff-DHMMcsQr.svg",p$=()=>{const{t:e}=jt(),t=e("allInOne",{returnObjects:!0}),i=[[d$,hye,fye,dye,pye],[gye,vye,yye,xye,bye],[wye,Sye,_ye,Eye],[Cye,Mye,Pye],[f$,Dye,Rye,Iye],[kye,zye,Bye,jye,Nye],[Uye,Fye,Hye,Gye,Wye]],r=a=>{switch(a){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}},n=["/service/customer-experience","/service/pos-staff-operations","/service/kitchen-fulfillment","/service/inventory-warehousing","/service/analytics-management","/service/marketing-customization","/service/integration-scaling"],s=[cye,uye,Aye,Tye,Oye,Lye,Vye];return E.jsxs(Qve,{style:{margin:"0 auto"},children:[E.jsxs(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:[" ",E.jsxs(Kve,{style:{marginTop:0,marginBottom:50},children:[t.mainText,E.jsx(Ur,{src:mye,alt:"Laptop"})]})]}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(Zve,{style:{marginTop:0,marginBottom:50},children:t.mainTitle})}),E.jsxs(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:[" ",E.jsx($ve,{children:t.description})]}),E.jsx(Jve,{children:t.cards.map((a,o)=>E.jsx(Gd,{to:n[o],children:E.jsx(G.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:10},children:J.createElement(eye,{as:G.div,...r(o),transition:{duration:.5,delay:o*.1},viewport:{once:!1,amount:.3},key:o},E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:o*.15},viewport:{once:!1,amount:.3},children:E.jsx(tye,{children:a.title})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:o*.2},viewport:{once:!1,amount:.3},children:E.jsx(iye,{style:o===4?{marginBottom:240}:{},children:a.text})}),E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:o*.25},viewport:{once:!1,amount:.3},children:E.jsx(rye,{src:s[o],alt:a.title,style:o===2?{border:"none",width:"100%",background:"transparent",overflow:"visible",backdropFilter:"none"}:o===4?{position:"absolute",top:"13%",left:"0",borderRadius:24,height:"84%",width:"100%",objectFit:"cover",overflow:"hidden"}:{}})}),E.jsx(G.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:o*.3},viewport:{once:!1,amount:.3},children:E.jsx(nye,{children:a.buttons.map((l,c)=>E.jsxs(sye,{children:[l,E.jsx(Ur,{src:i[o][c],alt:l})]},c))})}))})},o))})]})},qye=U.div`
  width: 343px;
  margin: 0 auto;
  margin-top: 50px;
  margin-bottom: 88px;
  overflow: hidden; /* Запобігає артефактам анімації */
  
  @media screen and (min-width: 768px) {
    max-width: 768px;
    width: 100%;
  }
  
  @media screen and (min-width: 1440px) {
    max-width: 1440px;
    width: 100%;
  }
`,Ff=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow: inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), 
              inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 
              0 8px 16px -8px rgba(0, 0, 0, 0.03), 
              0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%);
  align-items: center;
  will-change: transform, opacity; /* Оптимізація анімації */
  
  @media screen and (min-width: 768px) {
    /* Додаткові стилі для планшетів */
  }
  
  @media screen and (min-width: 1440px) {
    /* Додаткові стилі для десктопів */
  }
`,Hf=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;
  
  @media screen and (min-width: 768px) {
    font-size: 44px;
  }
  
  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,pc=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;
  
  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }
  
  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,Xye=U(G.div)`
  width: 100%;
  margin: 0 auto;
  display: flex;
  gap: 6px;
  position: relative;
  align-items: flex-start;
  justify-items: center;
  flex-direction: row;
  flex-wrap: wrap;
  align-content: center;
  justify-content: space-between;
  perspective: 1000px; /* Для 3D ефектів */
  
  @media screen and (min-width: 768px) {
    column-gap: 4px;
    max-width: 740px;
    justify-content: space-evenly;
    margin-top: 100px;
  }
  
  @media screen and (min-width: 1440px) {
    max-width: 1440px;
  }
`,Yye=U(G.div)`
  border: 0.58px solid #212121;
  border-radius: 14px;
  padding: 11px;
  width: 186px;
  height: 186px;
  min-height: 186px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  backdrop-filter: blur(9.247057914733887px);
  box-shadow: 0 5px 9px -5px rgba(0, 0, 0, 0.03), 
              0 1px 2px -1px rgba(0, 0, 0, 0.08), 
              inset 0 -5px 14px 0 rgba(255, 255, 255, 0.03), 
              inset 0 -3px 3px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  overflow: hidden;
  transform-origin: center left;
  will-change: transform, opacity;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  
  &:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    z-index: 1;
  }
  
  @media screen and (min-width: 768px) {
    width: 176px;
    height: 176px;
    min-height: 176px;
  }
  
  @media screen and (min-width: 1440px) {
    width: 323px;
    height: 322px;
    justify-content: space-around;
  }
`,Qye=U(G.div)`
  border: 0.58px solid #212121;
  border-radius: 14px;
  padding: 11px;
  width: 186px;
  height: 186px;
  min-height: 186px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  overflow: hidden;
  backdrop-filter: blur(9.247057914733887px);
  box-shadow: 0 5px 9px -5px rgba(0, 0, 0, 0.03), 
              0 1px 2px -1px rgba(0, 0, 0, 0.08), 
              inset 0 -5px 14px 0 rgba(255, 255, 255, 0.03), 
              inset 0 -3px 3px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  transform-origin: center top;
  will-change: transform, opacity;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  
  &:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    z-index: 1;
  }
  
  @media screen and (min-width: 768px) {
    width: 176px;
    height: 176px;
    min-height: 176px;
    margin-top: -20px;
  }
  
  @media screen and (min-width: 1440px) {
    width: 323px;
    height: 322px;
    justify-content: space-around;
  }
`,Kye=U(G.div)`
  display: none;
  transform-origin: center right;
  will-change: transform, opacity;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  
  &:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    z-index: 1;
  }
  
  @media screen and (min-width: 768px) {
    border: 0.58px solid #212121;
    border-radius: 14px;
    padding: 11px;
    width: 176px;
    height: 176px;
    min-height: 176px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    overflow: hidden;
    backdrop-filter: blur(9.247057914733887px);
    box-shadow: 0 5px 9px -5px rgba(0, 0, 0, 0.03), 
                0 1px 2px -1px rgba(0, 0, 0, 0.08), 
                inset 0 -5px 14px 0 rgba(255, 255, 255, 0.03), 
                inset 0 -3px 3px 0 rgba(255, 255, 255, 0.03);
    background: rgba(255, 255, 255, 0.03);
  }
  
  @media screen and (min-width: 1440px) {
    width: 323px;
    height: 322px;
    justify-content: space-around;
  }
`,FM=U(G.img)`
  width: 115px;
  height: 60px;
  will-change: transform, opacity;
  
  @media screen and (min-width: 1440px) {
    width: 200px;
    height: 104px;
  }
`,HM=U(G.div)`
  width: 163px;
  height: 66px;
  will-change: transform, opacity;
`,GM=U(G.p)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 46px;
  line-height: 100%;
  color: var(--white-100);
  will-change: transform, opacity;
  
  @media screen and (min-width: 1440px) {
    font-size: 80px;
    width: max-content;
  }
`,WM=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 10px;
  line-height: 130%;
  color: var(--white-60);
  will-change: transform, opacity;
     width: fit-content;
    height: max-content;
  @media screen and (min-width: 1440px) {
    font-size: 14px;
            height: max-content;
        width: max-content;
  }
`,Zye=U(G.img)`
  border-radius: 14px;
  width: 151px;
  height: 186px;
  object-fit: cover;
  transform-origin: center;
  will-change: transform, opacity;
  transition: transform 0.3s ease;
  
  &:hover {
    transform: scale(1.03);
  }
  
  @media screen and (min-width: 768px) {
    width: 176px;
    height: 176px;
    margin-top: -20px;
  }
  
  @media screen and (min-width: 1440px) {
    width: 323px;
    height: 322px;
  }
`,$ye=U(G.img)`
  border-radius: 14px;
  width: 150px;
  height: 231px;
  transform-origin: bottom center;
  will-change: transform, opacity;
  transition: transform 0.3s ease;
  
  &:hover {
    transform: scale(1.03);
  }
  
  @media screen and (min-width: 768px) {
    width: 176px;
    height: 176px;
  }
  
  @media screen and (min-width: 1440px) {
    width: 323px;
    height: 322px;
  }
`,Jye=U(G.img)`
  border-radius: 14px;
  width: 187px;
  height: 186px;
  margin-top: -45px;
  transform-origin: left top;
  will-change: transform, opacity;
  transition: transform 0.3s ease;
  
  &:hover {
    transform: scale(1.03);
  }
  
  @media screen and (min-width: 768px) {
    width: 176px;
    height: 176px;
    margin-top: 0;
  }
  
  @media screen and (min-width: 1440px) {
    width: 323px;
    height: 322px;
  }
`,e1e=U(G.img)`
  border-radius: 14px;
  width: 150px;
  height: 142px;
  transform-origin: right bottom;
  will-change: transform, opacity;
  transition: transform 0.3s ease;
  
  &:hover {
    transform: scale(1.03);
  }
  
  @media screen and (min-width: 768px) {
    width: 176px;
    height: 176px;
    margin-top: -40px;
  }
  
  @media screen and (min-width: 1440px) {
    width: 323px;
    height: 322px;
  }
`,t1e=U(G.img)`
  position: absolute;
  z-index: 3;
  top: 10%;
  left: 20%;
  transform: translate(-50%, -50%);
  width: 203px;
  height: 429px;
  pointer-events: none;
  will-change: transform, opacity;
  
  @media screen and (min-width: 768px) {
    width: 152px;
    height: 322px;
            left: 40%;
        top: 0%;
  }
  
  @media screen and (min-width: 1440px) {
    width: 264px;
    height: 558px;
  }
`,i1e=U(G.img)`
  display: none;
  transform-origin: center;
  will-change: transform, opacity;
  transition: transform 0.3s ease;
  
  &:hover {
    transform: scale(1.03);
  }
  
  @media screen and (min-width: 768px) {
    display: flex;
    border-radius: 14px;
    width: 176px;
    height: 176px;
    min-height: 176px;
    margin-top: -40px;
  }
  
  @media screen and (min-width: 1440px) {
    width: 323px;
    height: 322px;
  }
`,r1e="/assets/Bellhop-DBPRJ64k.svg",n1e=()=>{};var V7={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m$=function(e){const t=[];let i=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t[i++]=n:n<2048?(t[i++]=n>>6|192,t[i++]=n&63|128):(n&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(n=65536+((n&1023)<<10)+(e.charCodeAt(++r)&1023),t[i++]=n>>18|240,t[i++]=n>>12&63|128,t[i++]=n>>6&63|128,t[i++]=n&63|128):(t[i++]=n>>12|224,t[i++]=n>>6&63|128,t[i++]=n&63|128)}return t},s1e=function(e){const t=[];let i=0,r=0;for(;i<e.length;){const n=e[i++];if(n<128)t[r++]=String.fromCharCode(n);else if(n>191&&n<224){const s=e[i++];t[r++]=String.fromCharCode((n&31)<<6|s&63)}else if(n>239&&n<365){const s=e[i++],a=e[i++],o=e[i++],l=((n&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=e[i++],a=e[i++];t[r++]=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63)}}return t.join("")},g$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let n=0;n<e.length;n+=3){const s=e[n],a=n+1<e.length,o=a?e[n+1]:0,l=n+2<e.length,c=l?e[n+2]:0,u=s>>2,h=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,m=c&63;l||(m=64,a||(f=64)),r.push(i[u],i[h],i[f],i[m])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(m$(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):s1e(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let n=0;n<e.length;){const s=i[e.charAt(n++)],o=n<e.length?i[e.charAt(n)]:0;++n;const c=n<e.length?i[e.charAt(n)]:64;++n;const h=n<e.length?i[e.charAt(n)]:64;if(++n,s==null||o==null||c==null||h==null)throw new a1e;const f=s<<2|o>>4;if(r.push(f),c!==64){const m=o<<4&240|c>>2;if(r.push(m),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a1e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o1e=function(e){const t=m$(e);return g$.encodeByteArray(t,!0)},dA=function(e){return o1e(e).replace(/\./g,"")},l1e=function(e){try{return g$.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1e=()=>c1e().__FIREBASE_DEFAULTS__,h1e=()=>{if(typeof process>"u"||typeof V7>"u")return;const e=V7.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},d1e=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&l1e(e[1]);return t&&JSON.parse(t)},pL=()=>{try{return n1e()||u1e()||h1e()||d1e()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},f1e=e=>{var t,i;return(i=(t=pL())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[e]},v$=e=>{const t=f1e(e);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},y$=()=>{var e;return(e=pL())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function x$(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",n=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[dA(JSON.stringify(i)),dA(JSON.stringify(a)),""].join(".")}const Dx={};function m1e(){const e={prod:[],emulator:[]};for(const t of Object.keys(Dx))Dx[t]?e.emulator.push(t):e.prod.push(t);return e}function g1e(e){let t=document.getElementById(e),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),i=!0),{created:i,element:t}}let U7=!1;function w$(e,t){if(typeof window>"u"||typeof document>"u"||!uw(window.location.host)||Dx[e]===t||Dx[e]||U7)return;Dx[e]=t;function i(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=m1e().prod.length>0;function a(){const f=document.getElementById(r);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{U7=!0,a()},f}function u(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=g1e(r),m=i("text"),g=document.getElementById(m)||document.createElement("span"),v=i("learnmore"),x=document.getElementById(v)||document.createElement("a"),b=i("preprendIcon"),S=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;o(_),u(x,v);const A=c();l(S,b),_.append(S,g,x,A),document.body.appendChild(_)}s?(g.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y1e(){var e;const t=(e=pL())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x1e(){return!y1e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b1e(){try{return typeof indexedDB=="object"}catch{return!1}}function w1e(){return new Promise((e,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),i||self.indexedDB.deleteDatabase(r),e(!0)},n.onupgradeneeded=()=>{i=!1},n.onerror=()=>{var s;t(((s=n.error)===null||s===void 0?void 0:s.message)||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1e="FirebaseError";class jm extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=S1e,Object.setPrototypeOf(this,jm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S$.prototype.create)}}class S${constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},n=`${this.service}/${t}`,s=this.errors[t],a=s?_1e(s,r):"Error",o=`${this.serviceName}: ${a} (${n}).`;return new jm(n,o,r)}}function _1e(e,t){return e.replace(E1e,(i,r)=>{const n=t[r];return n!=null?String(n):`<${r}?>`})}const E1e=/\{\$([^}]+)}/g;function fA(e,t){if(e===t)return!0;const i=Object.keys(e),r=Object.keys(t);for(const n of i){if(!r.includes(n))return!1;const s=e[n],a=t[n];if(F7(s)&&F7(a)){if(!fA(s,a))return!1}else if(s!==a)return!1}for(const n of r)if(!i.includes(n))return!1;return!0}function F7(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(e){return e&&e._delegate?e._delegate:e}class yv{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1e{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new p1e;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:i});n&&r.resolve(n)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(C1e(t))try{this.getOrInitializeService({instanceIdentifier:zp})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(i);try{const s=this.getOrInitializeService({instanceIdentifier:n});r.resolve(s)}catch{}}}}clearInstance(t=zp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zp){return this.instances.has(t)}getOptions(t=zp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(n)}return n}onInit(t,i){var r;const n=this.normalizeInstanceIdentifier(i),s=(r=this.onInitCallbacks.get(n))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(n,s);const a=this.instances.get(n);return a&&t(a,n),()=>{s.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const n of r)try{n(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:T1e(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=zp){return this.component?this.component.multipleInstances?t:zp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function T1e(e){return e===zp?void 0:e}function C1e(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1e{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new A1e(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ki;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ki||(Ki={}));const P1e={debug:Ki.DEBUG,verbose:Ki.VERBOSE,info:Ki.INFO,warn:Ki.WARN,error:Ki.ERROR,silent:Ki.SILENT},D1e=Ki.INFO,I1e={[Ki.DEBUG]:"log",[Ki.VERBOSE]:"log",[Ki.INFO]:"info",[Ki.WARN]:"warn",[Ki.ERROR]:"error"},R1e=(e,t,...i)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),n=I1e[t];if(n)console[n](`[${r}]  ${e.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let _$=class{constructor(t){this.name=t,this._logLevel=D1e,this._logHandler=R1e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ki))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?P1e[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ki.DEBUG,...t),this._logHandler(this,Ki.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ki.VERBOSE,...t),this._logHandler(this,Ki.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ki.INFO,...t),this._logHandler(this,Ki.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ki.WARN,...t),this._logHandler(this,Ki.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ki.ERROR,...t),this._logHandler(this,Ki.ERROR,...t)}};const O1e=(e,t)=>t.some(i=>e instanceof i);let H7,G7;function L1e(){return H7||(H7=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k1e(){return G7||(G7=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E$=new WeakMap,CI=new WeakMap,A$=new WeakMap,qM=new WeakMap,mL=new WeakMap;function z1e(e){const t=new Promise((i,r)=>{const n=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{i(ff(e.result)),n()},a=()=>{r(e.error),n()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(i=>{i instanceof IDBCursor&&E$.set(i,e)}).catch(()=>{}),mL.set(t,e),t}function B1e(e){if(CI.has(e))return;const t=new Promise((i,r)=>{const n=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{i(),n()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});CI.set(e,t)}let MI={get(e,t,i){if(e instanceof IDBTransaction){if(t==="done")return CI.get(e);if(t==="objectStoreNames")return e.objectStoreNames||A$.get(e);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ff(e[t])},set(e,t,i){return e[t]=i,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function j1e(e){MI=e(MI)}function N1e(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=e.call(XM(this),t,...i);return A$.set(r,t.sort?t.sort():[t]),ff(r)}:k1e().includes(e)?function(...t){return e.apply(XM(this),t),ff(E$.get(this))}:function(...t){return ff(e.apply(XM(this),t))}}function V1e(e){return typeof e=="function"?N1e(e):(e instanceof IDBTransaction&&B1e(e),O1e(e,L1e())?new Proxy(e,MI):e)}function ff(e){if(e instanceof IDBRequest)return z1e(e);if(qM.has(e))return qM.get(e);const t=V1e(e);return t!==e&&(qM.set(e,t),mL.set(t,e)),t}const XM=e=>mL.get(e);function U1e(e,t,{blocked:i,upgrade:r,blocking:n,terminated:s}={}){const a=indexedDB.open(e,t),o=ff(a);return r&&a.addEventListener("upgradeneeded",l=>{r(ff(a.result),l.oldVersion,l.newVersion,ff(a.transaction),l)}),i&&a.addEventListener("blocked",l=>i(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),n&&l.addEventListener("versionchange",c=>n(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const F1e=["get","getKey","getAll","getAllKeys","count"],H1e=["put","add","delete","clear"],YM=new Map;function W7(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(YM.get(t))return YM.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,n=H1e.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(n||F1e.includes(i)))return;const s=async function(a,...o){const l=this.transaction(a,n?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[i](...o),n&&l.done]))[0]};return YM.set(t,s),s}j1e(e=>({...e,get:(t,i,r)=>W7(t,i)||e.get(t,i,r),has:(t,i)=>!!W7(t,i)||e.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1e{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(W1e(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function W1e(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const PI="@firebase/app",q7="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new _$("@firebase/app"),q1e="@firebase/app-compat",X1e="@firebase/analytics-compat",Y1e="@firebase/analytics",Q1e="@firebase/app-check-compat",K1e="@firebase/app-check",Z1e="@firebase/auth",$1e="@firebase/auth-compat",J1e="@firebase/database",exe="@firebase/data-connect",txe="@firebase/database-compat",ixe="@firebase/functions",rxe="@firebase/functions-compat",nxe="@firebase/installations",sxe="@firebase/installations-compat",axe="@firebase/messaging",oxe="@firebase/messaging-compat",lxe="@firebase/performance",cxe="@firebase/performance-compat",uxe="@firebase/remote-config",hxe="@firebase/remote-config-compat",dxe="@firebase/storage",fxe="@firebase/storage-compat",pxe="@firebase/firestore",mxe="@firebase/ai",gxe="@firebase/firestore-compat",vxe="firebase",yxe="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="[DEFAULT]",xxe={[PI]:"fire-core",[q1e]:"fire-core-compat",[Y1e]:"fire-analytics",[X1e]:"fire-analytics-compat",[K1e]:"fire-app-check",[Q1e]:"fire-app-check-compat",[Z1e]:"fire-auth",[$1e]:"fire-auth-compat",[J1e]:"fire-rtdb",[exe]:"fire-data-connect",[txe]:"fire-rtdb-compat",[ixe]:"fire-fn",[rxe]:"fire-fn-compat",[nxe]:"fire-iid",[sxe]:"fire-iid-compat",[axe]:"fire-fcm",[oxe]:"fire-fcm-compat",[lxe]:"fire-perf",[cxe]:"fire-perf-compat",[uxe]:"fire-rc",[hxe]:"fire-rc-compat",[dxe]:"fire-gcs",[fxe]:"fire-gcs-compat",[pxe]:"fire-fst",[gxe]:"fire-fst-compat",[mxe]:"fire-vertex","fire-js":"fire-js",[vxe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=new Map,bxe=new Map,II=new Map;function X7(e,t){try{e.container.addComponent(t)}catch(i){Gh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function mb(e){const t=e.name;if(II.has(t))return Gh.debug(`There were multiple attempts to register component ${t}.`),!1;II.set(t,e);for(const i of pA.values())X7(i,e);for(const i of bxe.values())X7(i,e);return!0}function T$(e,t){const i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}function C$(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wxe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pf=new S$("app","Firebase",wxe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sxe{constructor(t,i,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yv("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw pf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$=yxe;function P$(e,t={}){let i=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:DI,automaticDataCollectionEnabled:!0},t),n=r.name;if(typeof n!="string"||!n)throw pf.create("bad-app-name",{appName:String(n)});if(i||(i=y$()),!i)throw pf.create("no-options");const s=pA.get(n);if(s){if(fA(i,s.options)&&fA(r,s.config))return s;throw pf.create("duplicate-app",{appName:n})}const a=new M1e(n);for(const l of II.values())a.addComponent(l);const o=new Sxe(i,r,a);return pA.set(n,o),o}function D$(e=DI){const t=pA.get(e);if(!t&&e===DI&&y$())return P$();if(!t)throw pf.create("no-app",{appName:e});return t}function mf(e,t,i){var r;let n=(r=xxe[e])!==null&&r!==void 0?r:e;i&&(n+=`-${i}`);const s=n.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const o=[`Unable to register library "${n}" with version "${t}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Gh.warn(o.join(" "));return}mb(new yv(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _xe="firebase-heartbeat-database",Exe=1,gb="firebase-heartbeat-store";let QM=null;function I$(){return QM||(QM=U1e(_xe,Exe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(gb)}catch(i){console.warn(i)}}}}).catch(e=>{throw pf.create("idb-open",{originalErrorMessage:e.message})})),QM}async function Axe(e){try{const i=(await I$()).transaction(gb),r=await i.objectStore(gb).get(R$(e));return await i.done,r}catch(t){if(t instanceof jm)Gh.warn(t.message);else{const i=pf.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Gh.warn(i.message)}}}async function Y7(e,t){try{const r=(await I$()).transaction(gb,"readwrite");await r.objectStore(gb).put(t,R$(e)),await r.done}catch(i){if(i instanceof jm)Gh.warn(i.message);else{const r=pf.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Gh.warn(r.message)}}}function R$(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Txe=1024,Cxe=30;class Mxe{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Dxe(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,i;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Q7();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>Cxe){const a=Ixe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gh.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=Q7(),{heartbeatsToSend:r,unsentEntries:n}=Pxe(this._heartbeatsCache.heartbeats),s=dA(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=i,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(i){return Gh.warn(i),""}}}function Q7(){return new Date().toISOString().substring(0,10)}function Pxe(e,t=Txe){const i=[];let r=e.slice();for(const n of e){const s=i.find(a=>a.agent===n.agent);if(s){if(s.dates.push(n.date),K7(i)>t){s.dates.pop();break}}else if(i.push({agent:n.agent,dates:[n.date]}),K7(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class Dxe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b1e()?w1e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await Axe(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const n=await this.read();return Y7(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const n=await this.read();return Y7(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function K7(e){return dA(JSON.stringify({version:2,heartbeats:e})).length}function Ixe(e){if(e.length===0)return-1;let t=0,i=e[0].date;for(let r=1;r<e.length;r++)e[r].date<i&&(i=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rxe(e){mb(new yv("platform-logger",t=>new G1e(t),"PRIVATE")),mb(new yv("heartbeat",t=>new Mxe(t),"PRIVATE")),mf(PI,q7,e),mf(PI,q7,"esm2017"),mf("fire-js","")}Rxe("");var Z7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gf,O$;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,T){function R(){}R.prototype=T.prototype,D.D=T.prototype,D.prototype=new R,D.prototype.constructor=D,D.C=function(O,L,k){for(var B=Array(arguments.length-2),V=2;V<arguments.length;V++)B[V-2]=arguments[V];return T.prototype[L].apply(O,B)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,i),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(D,T,R){R||(R=0);var O=Array(16);if(typeof T=="string")for(var L=0;16>L;++L)O[L]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(L=0;16>L;++L)O[L]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=D.g[0],R=D.g[1],L=D.g[2];var k=D.g[3],B=T+(k^R&(L^k))+O[0]+3614090360&4294967295;T=R+(B<<7&4294967295|B>>>25),B=k+(L^T&(R^L))+O[1]+3905402710&4294967295,k=T+(B<<12&4294967295|B>>>20),B=L+(R^k&(T^R))+O[2]+606105819&4294967295,L=k+(B<<17&4294967295|B>>>15),B=R+(T^L&(k^T))+O[3]+3250441966&4294967295,R=L+(B<<22&4294967295|B>>>10),B=T+(k^R&(L^k))+O[4]+4118548399&4294967295,T=R+(B<<7&4294967295|B>>>25),B=k+(L^T&(R^L))+O[5]+1200080426&4294967295,k=T+(B<<12&4294967295|B>>>20),B=L+(R^k&(T^R))+O[6]+2821735955&4294967295,L=k+(B<<17&4294967295|B>>>15),B=R+(T^L&(k^T))+O[7]+4249261313&4294967295,R=L+(B<<22&4294967295|B>>>10),B=T+(k^R&(L^k))+O[8]+1770035416&4294967295,T=R+(B<<7&4294967295|B>>>25),B=k+(L^T&(R^L))+O[9]+2336552879&4294967295,k=T+(B<<12&4294967295|B>>>20),B=L+(R^k&(T^R))+O[10]+4294925233&4294967295,L=k+(B<<17&4294967295|B>>>15),B=R+(T^L&(k^T))+O[11]+2304563134&4294967295,R=L+(B<<22&4294967295|B>>>10),B=T+(k^R&(L^k))+O[12]+1804603682&4294967295,T=R+(B<<7&4294967295|B>>>25),B=k+(L^T&(R^L))+O[13]+4254626195&4294967295,k=T+(B<<12&4294967295|B>>>20),B=L+(R^k&(T^R))+O[14]+2792965006&4294967295,L=k+(B<<17&4294967295|B>>>15),B=R+(T^L&(k^T))+O[15]+1236535329&4294967295,R=L+(B<<22&4294967295|B>>>10),B=T+(L^k&(R^L))+O[1]+4129170786&4294967295,T=R+(B<<5&4294967295|B>>>27),B=k+(R^L&(T^R))+O[6]+3225465664&4294967295,k=T+(B<<9&4294967295|B>>>23),B=L+(T^R&(k^T))+O[11]+643717713&4294967295,L=k+(B<<14&4294967295|B>>>18),B=R+(k^T&(L^k))+O[0]+3921069994&4294967295,R=L+(B<<20&4294967295|B>>>12),B=T+(L^k&(R^L))+O[5]+3593408605&4294967295,T=R+(B<<5&4294967295|B>>>27),B=k+(R^L&(T^R))+O[10]+38016083&4294967295,k=T+(B<<9&4294967295|B>>>23),B=L+(T^R&(k^T))+O[15]+3634488961&4294967295,L=k+(B<<14&4294967295|B>>>18),B=R+(k^T&(L^k))+O[4]+3889429448&4294967295,R=L+(B<<20&4294967295|B>>>12),B=T+(L^k&(R^L))+O[9]+568446438&4294967295,T=R+(B<<5&4294967295|B>>>27),B=k+(R^L&(T^R))+O[14]+3275163606&4294967295,k=T+(B<<9&4294967295|B>>>23),B=L+(T^R&(k^T))+O[3]+4107603335&4294967295,L=k+(B<<14&4294967295|B>>>18),B=R+(k^T&(L^k))+O[8]+1163531501&4294967295,R=L+(B<<20&4294967295|B>>>12),B=T+(L^k&(R^L))+O[13]+2850285829&4294967295,T=R+(B<<5&4294967295|B>>>27),B=k+(R^L&(T^R))+O[2]+4243563512&4294967295,k=T+(B<<9&4294967295|B>>>23),B=L+(T^R&(k^T))+O[7]+1735328473&4294967295,L=k+(B<<14&4294967295|B>>>18),B=R+(k^T&(L^k))+O[12]+2368359562&4294967295,R=L+(B<<20&4294967295|B>>>12),B=T+(R^L^k)+O[5]+4294588738&4294967295,T=R+(B<<4&4294967295|B>>>28),B=k+(T^R^L)+O[8]+2272392833&4294967295,k=T+(B<<11&4294967295|B>>>21),B=L+(k^T^R)+O[11]+1839030562&4294967295,L=k+(B<<16&4294967295|B>>>16),B=R+(L^k^T)+O[14]+4259657740&4294967295,R=L+(B<<23&4294967295|B>>>9),B=T+(R^L^k)+O[1]+2763975236&4294967295,T=R+(B<<4&4294967295|B>>>28),B=k+(T^R^L)+O[4]+1272893353&4294967295,k=T+(B<<11&4294967295|B>>>21),B=L+(k^T^R)+O[7]+4139469664&4294967295,L=k+(B<<16&4294967295|B>>>16),B=R+(L^k^T)+O[10]+3200236656&4294967295,R=L+(B<<23&4294967295|B>>>9),B=T+(R^L^k)+O[13]+681279174&4294967295,T=R+(B<<4&4294967295|B>>>28),B=k+(T^R^L)+O[0]+3936430074&4294967295,k=T+(B<<11&4294967295|B>>>21),B=L+(k^T^R)+O[3]+3572445317&4294967295,L=k+(B<<16&4294967295|B>>>16),B=R+(L^k^T)+O[6]+76029189&4294967295,R=L+(B<<23&4294967295|B>>>9),B=T+(R^L^k)+O[9]+3654602809&4294967295,T=R+(B<<4&4294967295|B>>>28),B=k+(T^R^L)+O[12]+3873151461&4294967295,k=T+(B<<11&4294967295|B>>>21),B=L+(k^T^R)+O[15]+530742520&4294967295,L=k+(B<<16&4294967295|B>>>16),B=R+(L^k^T)+O[2]+3299628645&4294967295,R=L+(B<<23&4294967295|B>>>9),B=T+(L^(R|~k))+O[0]+4096336452&4294967295,T=R+(B<<6&4294967295|B>>>26),B=k+(R^(T|~L))+O[7]+1126891415&4294967295,k=T+(B<<10&4294967295|B>>>22),B=L+(T^(k|~R))+O[14]+2878612391&4294967295,L=k+(B<<15&4294967295|B>>>17),B=R+(k^(L|~T))+O[5]+4237533241&4294967295,R=L+(B<<21&4294967295|B>>>11),B=T+(L^(R|~k))+O[12]+1700485571&4294967295,T=R+(B<<6&4294967295|B>>>26),B=k+(R^(T|~L))+O[3]+2399980690&4294967295,k=T+(B<<10&4294967295|B>>>22),B=L+(T^(k|~R))+O[10]+4293915773&4294967295,L=k+(B<<15&4294967295|B>>>17),B=R+(k^(L|~T))+O[1]+2240044497&4294967295,R=L+(B<<21&4294967295|B>>>11),B=T+(L^(R|~k))+O[8]+1873313359&4294967295,T=R+(B<<6&4294967295|B>>>26),B=k+(R^(T|~L))+O[15]+4264355552&4294967295,k=T+(B<<10&4294967295|B>>>22),B=L+(T^(k|~R))+O[6]+2734768916&4294967295,L=k+(B<<15&4294967295|B>>>17),B=R+(k^(L|~T))+O[13]+1309151649&4294967295,R=L+(B<<21&4294967295|B>>>11),B=T+(L^(R|~k))+O[4]+4149444226&4294967295,T=R+(B<<6&4294967295|B>>>26),B=k+(R^(T|~L))+O[11]+3174756917&4294967295,k=T+(B<<10&4294967295|B>>>22),B=L+(T^(k|~R))+O[2]+718787259&4294967295,L=k+(B<<15&4294967295|B>>>17),B=R+(k^(L|~T))+O[9]+3951481745&4294967295,D.g[0]=D.g[0]+T&4294967295,D.g[1]=D.g[1]+(L+(B<<21&4294967295|B>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+k&4294967295}r.prototype.u=function(D,T){T===void 0&&(T=D.length);for(var R=T-this.blockSize,O=this.B,L=this.h,k=0;k<T;){if(L==0)for(;k<=R;)n(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<T;)if(O[L++]=D.charCodeAt(k++),L==this.blockSize){n(this,O),L=0;break}}else for(;k<T;)if(O[L++]=D[k++],L==this.blockSize){n(this,O),L=0;break}}this.h=L,this.o+=T},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var T=1;T<D.length-8;++T)D[T]=0;var R=8*this.o;for(T=D.length-8;T<D.length;++T)D[T]=R&255,R/=256;for(this.u(D),D=Array(16),T=R=0;4>T;++T)for(var O=0;32>O;O+=8)D[R++]=this.g[T]>>>O&255;return D};function s(D,T){var R=o;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=T(D)}function a(D,T){this.h=T;for(var R=[],O=!0,L=D.length-1;0<=L;L--){var k=D[L]|0;O&&k==T||(R[L]=k,O=!1)}this.g=R}var o={};function l(D){return-128<=D&&128>D?s(D,function(T){return new a([T|0],0>T?-1:0)}):new a([D|0],0>D?-1:0)}function c(D){if(isNaN(D)||!isFinite(D))return h;if(0>D)return x(c(-D));for(var T=[],R=1,O=0;D>=R;O++)T[O]=D/R|0,R*=4294967296;return new a(T,0)}function u(D,T){if(D.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D.charAt(0)=="-")return x(u(D.substring(1),T));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=c(Math.pow(T,8)),O=h,L=0;L<D.length;L+=8){var k=Math.min(8,D.length-L),B=parseInt(D.substring(L,L+k),T);8>k?(k=c(Math.pow(T,k)),O=O.j(k).add(c(B))):(O=O.j(R),O=O.add(c(B)))}return O}var h=l(0),f=l(1),m=l(16777216);e=a.prototype,e.m=function(){if(v(this))return-x(this).m();for(var D=0,T=1,R=0;R<this.g.length;R++){var O=this.i(R);D+=(0<=O?O:4294967296+O)*T,T*=4294967296}return D},e.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(g(this))return"0";if(v(this))return"-"+x(this).toString(D);for(var T=c(Math.pow(D,6)),R=this,O="";;){var L=A(R,T).g;R=b(R,L.j(T));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(D);if(R=L,g(R))return k+O;for(;6>k.length;)k="0"+k;O=k+O}},e.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function g(D){if(D.h!=0)return!1;for(var T=0;T<D.g.length;T++)if(D.g[T]!=0)return!1;return!0}function v(D){return D.h==-1}e.l=function(D){return D=b(this,D),v(D)?-1:g(D)?0:1};function x(D){for(var T=D.g.length,R=[],O=0;O<T;O++)R[O]=~D.g[O];return new a(R,~D.h).add(f)}e.abs=function(){return v(this)?x(this):this},e.add=function(D){for(var T=Math.max(this.g.length,D.g.length),R=[],O=0,L=0;L<=T;L++){var k=O+(this.i(L)&65535)+(D.i(L)&65535),B=(k>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);O=B>>>16,k&=65535,B&=65535,R[L]=B<<16|k}return new a(R,R[R.length-1]&-2147483648?-1:0)};function b(D,T){return D.add(x(T))}e.j=function(D){if(g(this)||g(D))return h;if(v(this))return v(D)?x(this).j(x(D)):x(x(this).j(D));if(v(D))return x(this.j(x(D)));if(0>this.l(m)&&0>D.l(m))return c(this.m()*D.m());for(var T=this.g.length+D.g.length,R=[],O=0;O<2*T;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<D.g.length;L++){var k=this.i(O)>>>16,B=this.i(O)&65535,V=D.i(L)>>>16,$=D.i(L)&65535;R[2*O+2*L]+=B*$,S(R,2*O+2*L),R[2*O+2*L+1]+=k*$,S(R,2*O+2*L+1),R[2*O+2*L+1]+=B*V,S(R,2*O+2*L+1),R[2*O+2*L+2]+=k*V,S(R,2*O+2*L+2)}for(O=0;O<T;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=T;O<2*T;O++)R[O]=0;return new a(R,0)};function S(D,T){for(;(D[T]&65535)!=D[T];)D[T+1]+=D[T]>>>16,D[T]&=65535,T++}function _(D,T){this.g=D,this.h=T}function A(D,T){if(g(T))throw Error("division by zero");if(g(D))return new _(h,h);if(v(D))return T=A(x(D),T),new _(x(T.g),x(T.h));if(v(T))return T=A(D,x(T)),new _(x(T.g),T.h);if(30<D.g.length){if(v(D)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var R=f,O=T;0>=O.l(D);)R=M(R),O=M(O);var L=C(R,1),k=C(O,1);for(O=C(O,2),R=C(R,2);!g(O);){var B=k.add(O);0>=B.l(D)&&(L=L.add(R),k=B),O=C(O,1),R=C(R,1)}return T=b(D,L.j(T)),new _(L,T)}for(L=h;0<=D.l(T);){for(R=Math.max(1,Math.floor(D.m()/T.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),k=c(R),B=k.j(T);v(B)||0<B.l(D);)R-=O,k=c(R),B=k.j(T);g(k)&&(k=f),L=L.add(k),D=b(D,B)}return new _(L,D)}e.A=function(D){return A(this,D).h},e.and=function(D){for(var T=Math.max(this.g.length,D.g.length),R=[],O=0;O<T;O++)R[O]=this.i(O)&D.i(O);return new a(R,this.h&D.h)},e.or=function(D){for(var T=Math.max(this.g.length,D.g.length),R=[],O=0;O<T;O++)R[O]=this.i(O)|D.i(O);return new a(R,this.h|D.h)},e.xor=function(D){for(var T=Math.max(this.g.length,D.g.length),R=[],O=0;O<T;O++)R[O]=this.i(O)^D.i(O);return new a(R,this.h^D.h)};function M(D){for(var T=D.g.length+1,R=[],O=0;O<T;O++)R[O]=D.i(O)<<1|D.i(O-1)>>>31;return new a(R,D.h)}function C(D,T){var R=T>>5;T%=32;for(var O=D.g.length-R,L=[],k=0;k<O;k++)L[k]=0<T?D.i(k+R)>>>T|D.i(k+R+1)<<32-T:D.i(k+R);return new a(L,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,O$=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,gf=a}).apply(typeof Z7<"u"?Z7:typeof self<"u"?self:typeof window<"u"?window:{});var AS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L$,ox,k$,ME,RI,z$,B$,j$;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(P,N,H){return P==Array.prototype||P==Object.prototype||(P[N]=H.value),P};function i(P){P=[typeof globalThis=="object"&&globalThis,P,typeof window=="object"&&window,typeof self=="object"&&self,typeof AS=="object"&&AS];for(var N=0;N<P.length;++N){var H=P[N];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}var r=i(this);function n(P,N){if(N)e:{var H=r;P=P.split(".");for(var ae=0;ae<P.length-1;ae++){var Pe=P[ae];if(!(Pe in H))break e;H=H[Pe]}P=P[P.length-1],ae=H[P],N=N(ae),N!=ae&&N!=null&&t(H,P,{configurable:!0,writable:!0,value:N})}}function s(P,N){P instanceof String&&(P+="");var H=0,ae=!1,Pe={next:function(){if(!ae&&H<P.length){var He=H++;return{value:N(He,P[He]),done:!1}}return ae=!0,{done:!0,value:void 0}}};return Pe[Symbol.iterator]=function(){return Pe},Pe}n("Array.prototype.values",function(P){return P||function(){return s(this,function(N,H){return H})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(P){var N=typeof P;return N=N!="object"?N:P?Array.isArray(P)?"array":N:"null",N=="array"||N=="object"&&typeof P.length=="number"}function c(P){var N=typeof P;return N=="object"&&P!=null||N=="function"}function u(P,N,H){return P.call.apply(P.bind,arguments)}function h(P,N,H){if(!P)throw Error();if(2<arguments.length){var ae=Array.prototype.slice.call(arguments,2);return function(){var Pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Pe,ae),P.apply(N,Pe)}}return function(){return P.apply(N,arguments)}}function f(P,N,H){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function m(P,N){var H=Array.prototype.slice.call(arguments,1);return function(){var ae=H.slice();return ae.push.apply(ae,arguments),P.apply(this,ae)}}function g(P,N){function H(){}H.prototype=N.prototype,P.aa=N.prototype,P.prototype=new H,P.prototype.constructor=P,P.Qb=function(ae,Pe,He){for(var gt=Array(arguments.length-2),Gi=2;Gi<arguments.length;Gi++)gt[Gi-2]=arguments[Gi];return N.prototype[Pe].apply(ae,gt)}}function v(P){const N=P.length;if(0<N){const H=Array(N);for(let ae=0;ae<N;ae++)H[ae]=P[ae];return H}return[]}function x(P,N){for(let H=1;H<arguments.length;H++){const ae=arguments[H];if(l(ae)){const Pe=P.length||0,He=ae.length||0;P.length=Pe+He;for(let gt=0;gt<He;gt++)P[Pe+gt]=ae[gt]}else P.push(ae)}}class b{constructor(N,H){this.i=N,this.j=H,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function S(P){return/^[\s\xa0]*$/.test(P)}function _(){var P=o.navigator;return P&&(P=P.userAgent)?P:""}function A(P){return A[" "](P),P}A[" "]=function(){};var M=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function C(P,N,H){for(const ae in P)N.call(H,P[ae],ae,P)}function D(P,N){for(const H in P)N.call(void 0,P[H],H,P)}function T(P){const N={};for(const H in P)N[H]=P[H];return N}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(P,N){let H,ae;for(let Pe=1;Pe<arguments.length;Pe++){ae=arguments[Pe];for(H in ae)P[H]=ae[H];for(let He=0;He<R.length;He++)H=R[He],Object.prototype.hasOwnProperty.call(ae,H)&&(P[H]=ae[H])}}function L(P){var N=1;P=P.split(":");const H=[];for(;0<N&&P.length;)H.push(P.shift()),N--;return P.length&&H.push(P.join(":")),H}function k(P){o.setTimeout(()=>{throw P},0)}function B(){var P=ne;let N=null;return P.g&&(N=P.g,P.g=P.g.next,P.g||(P.h=null),N.next=null),N}class V{constructor(){this.h=this.g=null}add(N,H){const ae=$.get();ae.set(N,H),this.h?this.h.next=ae:this.g=ae,this.h=ae}}var $=new b(()=>new q,P=>P.reset());class q{constructor(){this.next=this.g=this.h=null}set(N,H){this.h=N,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,X=!1,ne=new V,F=()=>{const P=o.Promise.resolve(void 0);Y=()=>{P.then(K)}};var K=()=>{for(var P;P=B();){try{P.h.call(P.g)}catch(H){k(H)}var N=$;N.j(P),100>N.h&&(N.h++,P.next=N.g,N.g=P)}X=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(P,N){this.type=P,this.g=this.target=N,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var P=!1,N=Object.defineProperty({},"passive",{get:function(){P=!0}});try{const H=()=>{};o.addEventListener("test",H,N),o.removeEventListener("test",H,N)}catch{}return P}();function de(P,N){if(oe.call(this,P?P.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,P){var H=this.type=P.type,ae=P.changedTouches&&P.changedTouches.length?P.changedTouches[0]:null;if(this.target=P.target||P.srcElement,this.g=N,N=P.relatedTarget){if(M){e:{try{A(N.nodeName);var Pe=!0;break e}catch{}Pe=!1}Pe||(N=null)}}else H=="mouseover"?N=P.fromElement:H=="mouseout"&&(N=P.toElement);this.relatedTarget=N,ae?(this.clientX=ae.clientX!==void 0?ae.clientX:ae.pageX,this.clientY=ae.clientY!==void 0?ae.clientY:ae.pageY,this.screenX=ae.screenX||0,this.screenY=ae.screenY||0):(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0),this.button=P.button,this.key=P.key||"",this.ctrlKey=P.ctrlKey,this.altKey=P.altKey,this.shiftKey=P.shiftKey,this.metaKey=P.metaKey,this.pointerId=P.pointerId||0,this.pointerType=typeof P.pointerType=="string"?P.pointerType:se[P.pointerType]||"",this.state=P.state,this.i=P,P.defaultPrevented&&de.aa.h.call(this)}}g(de,oe);var se={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var P=this.i;P.preventDefault?P.preventDefault():P.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),fe=0;function ye(P,N,H,ae,Pe){this.listener=P,this.proxy=null,this.src=N,this.type=H,this.capture=!!ae,this.ha=Pe,this.key=++fe,this.da=this.fa=!1}function _e(P){P.da=!0,P.listener=null,P.proxy=null,P.src=null,P.ha=null}function Te(P){this.src=P,this.g={},this.h=0}Te.prototype.add=function(P,N,H,ae,Pe){var He=P.toString();P=this.g[He],P||(P=this.g[He]=[],this.h++);var gt=Le(P,N,ae,Pe);return-1<gt?(N=P[gt],H||(N.fa=!1)):(N=new ye(N,this.src,He,!!ae,Pe),N.fa=H,P.push(N)),N};function Ce(P,N){var H=N.type;if(H in P.g){var ae=P.g[H],Pe=Array.prototype.indexOf.call(ae,N,void 0),He;(He=0<=Pe)&&Array.prototype.splice.call(ae,Pe,1),He&&(_e(N),P.g[H].length==0&&(delete P.g[H],P.h--))}}function Le(P,N,H,ae){for(var Pe=0;Pe<P.length;++Pe){var He=P[Pe];if(!He.da&&He.listener==N&&He.capture==!!H&&He.ha==ae)return Pe}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),Xe={};function pt(P,N,H,ae,Pe){if(Array.isArray(N)){for(var He=0;He<N.length;He++)pt(P,N[He],H,ae,Pe);return null}return H=$e(H),P&&P[xe]?P.K(N,H,c(ae)?!!ae.capture:!1,Pe):ct(P,N,H,!1,ae,Pe)}function ct(P,N,H,ae,Pe,He){if(!N)throw Error("Invalid event type");var gt=c(Pe)?!!Pe.capture:!!Pe,Gi=ie(P);if(Gi||(P[Ke]=Gi=new Te(P)),H=Gi.add(N,H,ae,gt,He),H.proxy)return H;if(ae=ot(),H.proxy=ae,ae.src=P,ae.listener=H,P.addEventListener)ce||(Pe=gt),Pe===void 0&&(Pe=!1),P.addEventListener(N.toString(),ae,Pe);else if(P.attachEvent)P.attachEvent(At(N.toString()),ae);else if(P.addListener&&P.removeListener)P.addListener(ae);else throw Error("addEventListener and attachEvent are unavailable.");return H}function ot(){function P(H){return N.call(P.src,P.listener,H)}const N=he;return P}function rt(P,N,H,ae,Pe){if(Array.isArray(N))for(var He=0;He<N.length;He++)rt(P,N[He],H,ae,Pe);else ae=c(ae)?!!ae.capture:!!ae,H=$e(H),P&&P[xe]?(P=P.i,N=String(N).toString(),N in P.g&&(He=P.g[N],H=Le(He,H,ae,Pe),-1<H&&(_e(He[H]),Array.prototype.splice.call(He,H,1),He.length==0&&(delete P.g[N],P.h--)))):P&&(P=ie(P))&&(N=P.g[N.toString()],P=-1,N&&(P=Le(N,H,ae,Pe)),(H=-1<P?N[P]:null)&&Dt(H))}function Dt(P){if(typeof P!="number"&&P&&!P.da){var N=P.src;if(N&&N[xe])Ce(N.i,P);else{var H=P.type,ae=P.proxy;N.removeEventListener?N.removeEventListener(H,ae,P.capture):N.detachEvent?N.detachEvent(At(H),ae):N.addListener&&N.removeListener&&N.removeListener(ae),(H=ie(N))?(Ce(H,P),H.h==0&&(H.src=null,N[Ke]=null)):_e(P)}}}function At(P){return P in Xe?Xe[P]:Xe[P]="on"+P}function he(P,N){if(P.da)P=!0;else{N=new de(N,this);var H=P.listener,ae=P.ha||P.src;P.fa&&Dt(P),P=H.call(ae,N)}return P}function ie(P){return P=P[Ke],P instanceof Te?P:null}var Me="__closure_events_fn_"+(1e9*Math.random()>>>0);function $e(P){return typeof P=="function"?P:(P[Me]||(P[Me]=function(N){return P.handleEvent(N)}),P[Me])}function Z(){re.call(this),this.i=new Te(this),this.M=this,this.F=null}g(Z,re),Z.prototype[xe]=!0,Z.prototype.removeEventListener=function(P,N,H,ae){rt(this,P,N,H,ae)};function We(P,N){var H,ae=P.F;if(ae)for(H=[];ae;ae=ae.F)H.push(ae);if(P=P.M,ae=N.type||N,typeof N=="string")N=new oe(N,P);else if(N instanceof oe)N.target=N.target||P;else{var Pe=N;N=new oe(ae,P),O(N,Pe)}if(Pe=!0,H)for(var He=H.length-1;0<=He;He--){var gt=N.g=H[He];Pe=dt(gt,ae,!0,N)&&Pe}if(gt=N.g=P,Pe=dt(gt,ae,!0,N)&&Pe,Pe=dt(gt,ae,!1,N)&&Pe,H)for(He=0;He<H.length;He++)gt=N.g=H[He],Pe=dt(gt,ae,!1,N)&&Pe}Z.prototype.N=function(){if(Z.aa.N.call(this),this.i){var P=this.i,N;for(N in P.g){for(var H=P.g[N],ae=0;ae<H.length;ae++)_e(H[ae]);delete P.g[N],P.h--}}this.F=null},Z.prototype.K=function(P,N,H,ae){return this.i.add(String(P),N,!1,H,ae)},Z.prototype.L=function(P,N,H,ae){return this.i.add(String(P),N,!0,H,ae)};function dt(P,N,H,ae){if(N=P.i.g[String(N)],!N)return!0;N=N.concat();for(var Pe=!0,He=0;He<N.length;++He){var gt=N[He];if(gt&&!gt.da&&gt.capture==H){var Gi=gt.listener,Qn=gt.ha||gt.src;gt.fa&&Ce(P.i,gt),Pe=Gi.call(Qn,ae)!==!1&&Pe}}return Pe&&!ae.defaultPrevented}function lt(P,N,H){if(typeof P=="function")H&&(P=f(P,H));else if(P&&typeof P.handleEvent=="function")P=f(P.handleEvent,P);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:o.setTimeout(P,N||0)}function Ve(P){P.g=lt(()=>{P.g=null,P.i&&(P.i=!1,Ve(P))},P.l);const N=P.h;P.h=null,P.m.apply(null,N)}class Tt extends re{constructor(N,H){super(),this.m=N,this.l=H,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Ve(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ft(P){re.call(this),this.h=P,this.g={}}g(ft,re);var St=[];function Ct(P){C(P.g,function(N,H){this.g.hasOwnProperty(H)&&Dt(N)},P),P.g={}}ft.prototype.N=function(){ft.aa.N.call(this),Ct(this)},ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bt=o.JSON.stringify,It=o.JSON.parse,Ei=class{stringify(P){return o.JSON.stringify(P,void 0)}parse(P){return o.JSON.parse(P,void 0)}};function er(){}er.prototype.h=null;function be(P){return P.h||(P.h=P.i())}function Ue(){}var qe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ut(){oe.call(this,"d")}g(ut,oe);function Bt(){oe.call(this,"c")}g(Bt,oe);var si={},hi=null;function Hi(){return hi=hi||new Z}si.La="serverreachability";function Yn(P){oe.call(this,si.La,P)}g(Yn,oe);function Pi(P){const N=Hi();We(N,new Yn(N))}si.STAT_EVENT="statevent";function In(P,N){oe.call(this,si.STAT_EVENT,P),this.stat=N}g(In,oe);function bi(P){const N=Hi();We(N,new In(N,P))}si.Ma="timingevent";function gr(P,N){oe.call(this,si.Ma,P),this.size=N}g(gr,oe);function zr(P,N){if(typeof P!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){P()},N)}function Rr(){this.g=!0}Rr.prototype.xa=function(){this.g=!1};function fs(P,N,H,ae,Pe,He){P.info(function(){if(P.g)if(He)for(var gt="",Gi=He.split("&"),Qn=0;Qn<Gi.length;Qn++){var Wi=Gi[Qn].split("=");if(1<Wi.length){var ms=Wi[0];Wi=Wi[1];var Kn=ms.split("_");gt=2<=Kn.length&&Kn[1]=="type"?gt+(ms+"="+Wi+"&"):gt+(ms+"=redacted&")}}else gt=null;else gt=He;return"XMLHTTP REQ ("+ae+") [attempt "+Pe+"]: "+N+`
`+H+`
`+gt})}function ue(P,N,H,ae,Pe,He,gt){P.info(function(){return"XMLHTTP RESP ("+ae+") [ attempt "+Pe+"]: "+N+`
`+H+`
`+He+" "+gt})}function De(P,N,H,ae){P.info(function(){return"XMLHTTP TEXT ("+N+"): "+Ae(P,H)+(ae?" "+ae:"")})}function Fe(P,N){P.info(function(){return"TIMEOUT: "+N})}Rr.prototype.info=function(){};function Ae(P,N){if(!P.g)return N;if(!N)return null;try{var H=JSON.parse(N);if(H){for(P=0;P<H.length;P++)if(Array.isArray(H[P])){var ae=H[P];if(!(2>ae.length)){var Pe=ae[1];if(Array.isArray(Pe)&&!(1>Pe.length)){var He=Pe[0];if(He!="noop"&&He!="stop"&&He!="close")for(var gt=1;gt<Pe.length;gt++)Pe[gt]=""}}}}return bt(H)}catch{return N}}var Ne={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kt;function zt(){}g(zt,er),zt.prototype.g=function(){return new XMLHttpRequest},zt.prototype.i=function(){return{}},kt=new zt;function _t(P,N,H,ae){this.j=P,this.i=N,this.l=H,this.R=ae||1,this.U=new ft(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ht}function Ht(){this.i=null,this.g="",this.h=!1}var st={},me={};function Be(P,N,H){P.L=1,P.v=ep(So(N)),P.m=H,P.P=!0,ht(P,null)}function ht(P,N){P.F=Date.now(),ti(P),P.A=So(P.v);var H=P.A,ae=P.R;Array.isArray(ae)||(ae=[String(ae)]),wy(H.i,"t",ae),P.C=0,H=P.j.J,P.h=new Ht,P.g=Yw(P.j,H?N:null,!P.m),0<P.O&&(P.M=new Tt(f(P.Y,P,P.g),P.O)),N=P.U,H=P.g,ae=P.ca;var Pe="readystatechange";Array.isArray(Pe)||(Pe&&(St[0]=Pe.toString()),Pe=St);for(var He=0;He<Pe.length;He++){var gt=pt(H,Pe[He],ae||N.handleEvent,!1,N.h||N);if(!gt)break;N.g[gt.key]=gt}N=P.H?T(P.H):{},P.m?(P.u||(P.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",P.g.ea(P.A,P.u,P.m,N)):(P.u="GET",P.g.ea(P.A,P.u,null,N)),Pi(),fs(P.i,P.u,P.A,P.l,P.R,P.m)}_t.prototype.ca=function(P){P=P.target;const N=this.M;N&&qo(P)==3?N.j():this.Y(P)},_t.prototype.Y=function(P){try{if(P==this.g)e:{const Kn=qo(this.g);var N=this.g.Ba();const Hu=this.g.Z();if(!(3>Kn)&&(Kn!=3||this.g&&(this.h.h||this.g.oa()||Vw(this.g)))){this.J||Kn!=4||N==7||(N==8||0>=Hu?Pi(3):Pi(2)),cr(this);var H=this.g.Z();this.X=H;t:if(wi(this)){var ae=Vw(this.g);P="";var Pe=ae.length,He=qo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ir(this),Ut(this);var gt="";break t}this.h.i=new o.TextDecoder}for(N=0;N<Pe;N++)this.h.h=!0,P+=this.h.i.decode(ae[N],{stream:!(He&&N==Pe-1)});ae.length=0,this.h.g+=P,this.C=0,gt=this.h.g}else gt=this.g.oa();if(this.o=H==200,ue(this.i,this.u,this.A,this.l,this.R,Kn,H),this.o){if(this.T&&!this.K){t:{if(this.g){var Gi,Qn=this.g;if((Gi=Qn.g?Qn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Gi)){var Wi=Gi;break t}}Wi=null}if(H=Wi)De(this.i,this.l,H,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zi(this,H);else{this.o=!1,this.s=3,bi(12),ir(this),Ut(this);break e}}if(this.P){H=!0;let js;for(;!this.J&&this.C<gt.length;)if(js=tr(this,gt),js==me){Kn==4&&(this.s=4,bi(14),H=!1),De(this.i,this.l,null,"[Incomplete Response]");break}else if(js==st){this.s=4,bi(15),De(this.i,this.l,gt,"[Invalid Chunk]"),H=!1;break}else De(this.i,this.l,js,null),Zi(this,js);if(wi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kn!=4||gt.length!=0||this.h.h||(this.s=1,bi(16),H=!1),this.o=this.o&&H,!H)De(this.i,this.l,gt,"[Invalid Chunked Response]"),ir(this),Ut(this);else if(0<gt.length&&!this.W){this.W=!0;var ms=this.j;ms.g==this&&ms.ba&&!ms.M&&(ms.j.info("Great, no buffering proxy detected. Bytes received: "+gt.length),lp(ms),ms.M=!0,bi(11))}}else De(this.i,this.l,gt,null),Zi(this,gt);Kn==4&&ir(this),this.o&&!this.J&&(Kn==4?Ww(this.j,this):(this.o=!1,ti(this)))}else aC(this.g),H==400&&0<gt.indexOf("Unknown SID")?(this.s=3,bi(12)):(this.s=0,bi(13)),ir(this),Ut(this)}}}catch{}finally{}};function wi(P){return P.g?P.u=="GET"&&P.L!=2&&P.j.Ca:!1}function tr(P,N){var H=P.C,ae=N.indexOf(`
`,H);return ae==-1?me:(H=Number(N.substring(H,ae)),isNaN(H)?st:(ae+=1,ae+H>N.length?me:(N=N.slice(ae,ae+H),P.C=ae+H,N)))}_t.prototype.cancel=function(){this.J=!0,ir(this)};function ti(P){P.S=Date.now()+P.I,Vt(P,P.I)}function Vt(P,N){if(P.B!=null)throw Error("WatchDog timer not null");P.B=zr(f(P.ba,P),N)}function cr(P){P.B&&(o.clearTimeout(P.B),P.B=null)}_t.prototype.ba=function(){this.B=null;const P=Date.now();0<=P-this.S?(Fe(this.i,this.A),this.L!=2&&(Pi(),bi(17)),ir(this),this.s=2,Ut(this)):Vt(this,this.S-P)};function Ut(P){P.j.G==0||P.J||Ww(P.j,P)}function ir(P){cr(P);var N=P.M;N&&typeof N.ma=="function"&&N.ma(),P.M=null,Ct(P.U),P.g&&(N=P.g,P.g=null,N.abort(),N.ma())}function Zi(P,N){try{var H=P.j;if(H.G!=0&&(H.g==P||ge(H.h,P))){if(!P.K&&ge(H.h,P)&&H.G==3){try{var ae=H.Da.g.parse(N)}catch{ae=null}if(Array.isArray(ae)&&ae.length==3){var Pe=ae;if(Pe[0]==0){e:if(!H.u){if(H.g)if(H.g.F+3e3<P.F)sg(H),rg(H);else break e;Ty(H),bi(18)}}else H.za=Pe[1],0<H.za-H.T&&37500>Pe[2]&&H.F&&H.v==0&&!H.C&&(H.C=zr(f(H.Za,H),6e3));if(1>=ee(H.h)&&H.ca){try{H.ca()}catch{}H.ca=void 0}}else Fu(H,11)}else if((P.K||H.g==P)&&sg(H),!S(N))for(Pe=H.Da.g.parse(N),N=0;N<Pe.length;N++){let Wi=Pe[N];if(H.T=Wi[0],Wi=Wi[1],H.G==2)if(Wi[0]=="c"){H.K=Wi[1],H.ia=Wi[2];const ms=Wi[3];ms!=null&&(H.la=ms,H.j.info("VER="+H.la));const Kn=Wi[4];Kn!=null&&(H.Aa=Kn,H.j.info("SVER="+H.Aa));const Hu=Wi[5];Hu!=null&&typeof Hu=="number"&&0<Hu&&(ae=1.5*Hu,H.L=ae,H.j.info("backChannelRequestTimeoutMs_="+ae)),ae=H;const js=P.g;if(js){const Cc=js.g?js.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cc){var He=ae.h;He.g||Cc.indexOf("spdy")==-1&&Cc.indexOf("quic")==-1&&Cc.indexOf("h2")==-1||(He.j=He.l,He.g=new Set,He.h&&(le(He,He.h),He.h=null))}if(ae.D){const My=js.g?js.g.getResponseHeader("X-HTTP-Session-Id"):null;My&&(ae.ya=My,Ar(ae.I,ae.D,My))}}H.G=3,H.l&&H.l.ua(),H.ba&&(H.R=Date.now()-P.F,H.j.info("Handshake RTT: "+H.R+"ms")),ae=H;var gt=P;if(ae.qa=Xw(ae,ae.J?ae.ia:null,ae.W),gt.K){we(ae.h,gt);var Gi=gt,Qn=ae.L;Qn&&(Gi.I=Qn),Gi.B&&(cr(Gi),ti(Gi)),ae.g=gt}else Hw(ae);0<H.i.length&&ng(H)}else Wi[0]!="stop"&&Wi[0]!="close"||Fu(H,7);else H.G==3&&(Wi[0]=="stop"||Wi[0]=="close"?Wi[0]=="stop"?Fu(H,7):Ey(H):Wi[0]!="noop"&&H.l&&H.l.ta(Wi),H.v=0)}}Pi(4)}catch{}}var ca=class{constructor(P,N){this.g=P,this.map=N}};function en(P){this.l=P||10,o.PerformanceNavigationTiming?(P=o.performance.getEntriesByType("navigation"),P=0<P.length&&(P[0].nextHopProtocol=="hq"||P[0].nextHopProtocol=="h2")):P=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=P?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Q(P){return P.h?!0:P.g?P.g.size>=P.j:!1}function ee(P){return P.h?1:P.g?P.g.size:0}function ge(P,N){return P.h?P.h==N:P.g?P.g.has(N):!1}function le(P,N){P.g?P.g.add(N):P.h=N}function we(P,N){P.h&&P.h==N?P.h=null:P.g&&P.g.has(N)&&P.g.delete(N)}en.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const P of this.g.values())P.cancel();this.g.clear()}};function nt(P){if(P.h!=null)return P.i.concat(P.h.D);if(P.g!=null&&P.g.size!==0){let N=P.i;for(const H of P.g.values())N=N.concat(H.D);return N}return v(P.i)}function wo(P){if(P.V&&typeof P.V=="function")return P.V();if(typeof Map<"u"&&P instanceof Map||typeof Set<"u"&&P instanceof Set)return Array.from(P.values());if(typeof P=="string")return P.split("");if(l(P)){for(var N=[],H=P.length,ae=0;ae<H;ae++)N.push(P[ae]);return N}N=[],H=0;for(ae in P)N[H++]=P[ae];return N}function xc(P){if(P.na&&typeof P.na=="function")return P.na();if(!P.V||typeof P.V!="function"){if(typeof Map<"u"&&P instanceof Map)return Array.from(P.keys());if(!(typeof Set<"u"&&P instanceof Set)){if(l(P)||typeof P=="string"){var N=[];P=P.length;for(var H=0;H<P;H++)N.push(H);return N}N=[],H=0;for(const ae in P)N[H++]=ae;return N}}}function bc(P,N){if(P.forEach&&typeof P.forEach=="function")P.forEach(N,void 0);else if(l(P)||typeof P=="string")Array.prototype.forEach.call(P,N,void 0);else for(var H=xc(P),ae=wo(P),Pe=ae.length,He=0;He<Pe;He++)N.call(void 0,ae[He],H&&H[He],P)}var Dl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rd(P,N){if(P){P=P.split("&");for(var H=0;H<P.length;H++){var ae=P[H].indexOf("="),Pe=null;if(0<=ae){var He=P[H].substring(0,ae);Pe=P[H].substring(ae+1)}else He=P[H];N(He,Pe?decodeURIComponent(Pe.replace(/\+/g," ")):"")}}}function Qr(P){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,P instanceof Qr){this.h=P.h,Jf(this,P.j),this.o=P.o,this.g=P.g,nd(this,P.s),this.l=P.l;var N=P.i,H=new ju;H.i=N.i,N.g&&(H.g=new Map(N.g),H.h=N.h),Bu(this,H),this.m=P.m}else P&&(N=String(P).match(Dl))?(this.h=!1,Jf(this,N[1]||"",!0),this.o=Ho(N[2]||""),this.g=Ho(N[3]||"",!0),nd(this,N[4]),this.l=Ho(N[5]||"",!0),Bu(this,N[6]||"",!0),this.m=Ho(N[7]||"")):(this.h=!1,this.i=new ju(null,this.h))}Qr.prototype.toString=function(){var P=[],N=this.j;N&&P.push(tp(N,xy,!0),":");var H=this.g;return(H||N=="file")&&(P.push("//"),(N=this.o)&&P.push(tp(N,xy,!0),"@"),P.push(encodeURIComponent(String(H)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),H=this.s,H!=null&&P.push(":",String(H))),(H=this.l)&&(this.g&&H.charAt(0)!="/"&&P.push("/"),P.push(tp(H,H.charAt(0)=="/"?nC:by,!0))),(H=this.i.toString())&&P.push("?",H),(H=this.m)&&P.push("#",tp(H,$m)),P.join("")};function So(P){return new Qr(P)}function Jf(P,N,H){P.j=H?Ho(N,!0):N,P.j&&(P.j=P.j.replace(/:$/,""))}function nd(P,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);P.s=N}else P.s=null}function Bu(P,N,H){N instanceof ju?(P.i=N,jw(P.i,P.h)):(H||(N=tp(N,sC)),P.i=new ju(N,P.h))}function Ar(P,N,H){P.i.set(N,H)}function ep(P){return Ar(P,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),P}function Ho(P,N){return P?N?decodeURI(P.replace(/%25/g,"%2525")):decodeURIComponent(P):""}function tp(P,N,H){return typeof P=="string"?(P=encodeURI(P).replace(N,Bw),H&&(P=P.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P):null}function Bw(P){return P=P.charCodeAt(0),"%"+(P>>4&15).toString(16)+(P&15).toString(16)}var xy=/[#\/\?@]/g,by=/[#\?:]/g,nC=/[#\?]/g,sC=/[#\?@]/g,$m=/#/g;function ju(P,N){this.h=this.g=null,this.i=P||null,this.j=!!N}function Go(P){P.g||(P.g=new Map,P.h=0,P.i&&rd(P.i,function(N,H){P.add(decodeURIComponent(N.replace(/\+/g," ")),H)}))}e=ju.prototype,e.add=function(P,N){Go(this),this.i=null,P=wc(this,P);var H=this.g.get(P);return H||this.g.set(P,H=[]),H.push(N),this.h+=1,this};function Nu(P,N){Go(P),N=wc(P,N),P.g.has(N)&&(P.i=null,P.h-=P.g.get(N).length,P.g.delete(N))}function Vu(P,N){return Go(P),N=wc(P,N),P.g.has(N)}e.forEach=function(P,N){Go(this),this.g.forEach(function(H,ae){H.forEach(function(Pe){P.call(N,Pe,ae,this)},this)},this)},e.na=function(){Go(this);const P=Array.from(this.g.values()),N=Array.from(this.g.keys()),H=[];for(let ae=0;ae<N.length;ae++){const Pe=P[ae];for(let He=0;He<Pe.length;He++)H.push(N[ae])}return H},e.V=function(P){Go(this);let N=[];if(typeof P=="string")Vu(this,P)&&(N=N.concat(this.g.get(wc(this,P))));else{P=Array.from(this.g.values());for(let H=0;H<P.length;H++)N=N.concat(P[H])}return N},e.set=function(P,N){return Go(this),this.i=null,P=wc(this,P),Vu(this,P)&&(this.h-=this.g.get(P).length),this.g.set(P,[N]),this.h+=1,this},e.get=function(P,N){return P?(P=this.V(P),0<P.length?String(P[0]):N):N};function wy(P,N,H){Nu(P,N),0<H.length&&(P.i=null,P.g.set(wc(P,N),v(H)),P.h+=H.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const P=[],N=Array.from(this.g.keys());for(var H=0;H<N.length;H++){var ae=N[H];const He=encodeURIComponent(String(ae)),gt=this.V(ae);for(ae=0;ae<gt.length;ae++){var Pe=He;gt[ae]!==""&&(Pe+="="+encodeURIComponent(String(gt[ae]))),P.push(Pe)}}return this.i=P.join("&")};function wc(P,N){return N=String(N),P.j&&(N=N.toLowerCase()),N}function jw(P,N){N&&!P.j&&(Go(P),P.i=null,P.g.forEach(function(H,ae){var Pe=ae.toLowerCase();ae!=Pe&&(Nu(this,ae),wy(this,Pe,H))},P)),P.j=N}function ip(P,N){const H=new Rr;if(o.Image){const ae=new Image;ae.onload=m(Wo,H,"TestLoadImage: loaded",!0,N,ae),ae.onerror=m(Wo,H,"TestLoadImage: error",!1,N,ae),ae.onabort=m(Wo,H,"TestLoadImage: abort",!1,N,ae),ae.ontimeout=m(Wo,H,"TestLoadImage: timeout",!1,N,ae),o.setTimeout(function(){ae.ontimeout&&ae.ontimeout()},1e4),ae.src=P}else N(!1)}function Il(P,N){const H=new Rr,ae=new AbortController,Pe=setTimeout(()=>{ae.abort(),Wo(H,"TestPingServer: timeout",!1,N)},1e4);fetch(P,{signal:ae.signal}).then(He=>{clearTimeout(Pe),He.ok?Wo(H,"TestPingServer: ok",!0,N):Wo(H,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(Pe),Wo(H,"TestPingServer: error",!1,N)})}function Wo(P,N,H,ae,Pe){try{Pe&&(Pe.onload=null,Pe.onerror=null,Pe.onabort=null,Pe.ontimeout=null),ae(H)}catch{}}function rp(){this.g=new Ei}function Sc(P,N,H){const ae=H||"";try{bc(P,function(Pe,He){let gt=Pe;c(Pe)&&(gt=bt(Pe)),N.push(ae+He+"="+encodeURIComponent(gt))})}catch(Pe){throw N.push(ae+"type="+encodeURIComponent("_badmap")),Pe}}function sd(P){this.l=P.Ub||null,this.j=P.eb||!1}g(sd,er),sd.prototype.g=function(){return new Uu(this.l,this.j)},sd.prototype.i=function(P){return function(){return P}}({});function Uu(P,N){Z.call(this),this.D=P,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Uu,Z),e=Uu.prototype,e.open=function(P,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=P,this.A=N,this.readyState=1,Ec(this)},e.send=function(P){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};P&&(N.body=P),(this.D||o).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_c(this)),this.readyState=0},e.Sa=function(P){if(this.g&&(this.l=P,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=P.headers,this.readyState=2,Ec(this)),this.g&&(this.readyState=3,Ec(this),this.g)))if(this.responseType==="arraybuffer")P.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in P){if(this.j=P.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sy(this)}else P.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sy(P){P.j.read().then(P.Pa.bind(P)).catch(P.ga.bind(P))}e.Pa=function(P){if(this.g){if(this.o&&P.value)this.response.push(P.value);else if(!this.o){var N=P.value?P.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!P.done}))&&(this.response=this.responseText+=N)}P.done?_c(this):Ec(this),this.readyState==3&&Sy(this)}},e.Ra=function(P){this.g&&(this.response=this.responseText=P,_c(this))},e.Qa=function(P){this.g&&(this.response=P,_c(this))},e.ga=function(){this.g&&_c(this)};function _c(P){P.readyState=4,P.l=null,P.j=null,P.v=null,Ec(P)}e.setRequestHeader=function(P,N){this.u.append(P,N)},e.getResponseHeader=function(P){return this.h&&this.h.get(P.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const P=[],N=this.h.entries();for(var H=N.next();!H.done;)H=H.value,P.push(H[0]+": "+H[1]),H=N.next();return P.join(`\r
`)};function Ec(P){P.onreadystatechange&&P.onreadystatechange.call(P)}Object.defineProperty(Uu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(P){this.m=P?"include":"same-origin"}});function _y(P){let N="";return C(P,function(H,ae){N+=ae,N+=":",N+=H,N+=`\r
`}),N}function ps(P,N,H){e:{for(ae in H){var ae=!1;break e}ae=!0}ae||(H=_y(H),typeof P=="string"?H!=null&&encodeURIComponent(String(H)):Ar(P,N,H))}function ur(P){Z.call(this),this.headers=new Map,this.o=P||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(ur,Z);var Jm=/^https?$/i,np=["POST","PUT"];e=ur.prototype,e.Ha=function(P){this.J=P},e.ea=function(P,N,H,ae){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+P);N=N?N.toUpperCase():"GET",this.D=P,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kt.g(),this.v=this.o?be(this.o):be(kt),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(N,String(P),!0),this.B=!1}catch(He){Nw(this,He);return}if(P=H||"",H=new Map(this.headers),ae)if(Object.getPrototypeOf(ae)===Object.prototype)for(var Pe in ae)H.set(Pe,ae[Pe]);else if(typeof ae.keys=="function"&&typeof ae.get=="function")for(const He of ae.keys())H.set(He,ae.get(He));else throw Error("Unknown input type for opt_headers: "+String(ae));ae=Array.from(H.keys()).find(He=>He.toLowerCase()=="content-type"),Pe=o.FormData&&P instanceof o.FormData,!(0<=Array.prototype.indexOf.call(np,N,void 0))||ae||Pe||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[He,gt]of H)this.g.setRequestHeader(He,gt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sp(this),this.u=!0,this.g.send(P),this.u=!1}catch(He){Nw(this,He)}};function Nw(P,N){P.h=!1,P.g&&(P.j=!0,P.g.abort(),P.j=!1),P.l=N,P.m=5,eg(P),Ac(P)}function eg(P){P.A||(P.A=!0,We(P,"complete"),We(P,"error"))}e.abort=function(P){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=P||7,We(this,"complete"),We(this,"abort"),Ac(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ac(this,!0)),ur.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?tg(this):this.bb())},e.bb=function(){tg(this)};function tg(P){if(P.h&&typeof a<"u"&&(!P.v[1]||qo(P)!=4||P.Z()!=2)){if(P.u&&qo(P)==4)lt(P.Ea,0,P);else if(We(P,"readystatechange"),qo(P)==4){P.h=!1;try{const gt=P.Z();e:switch(gt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var H;if(!(H=N)){var ae;if(ae=gt===0){var Pe=String(P.D).match(Dl)[1]||null;!Pe&&o.self&&o.self.location&&(Pe=o.self.location.protocol.slice(0,-1)),ae=!Jm.test(Pe?Pe.toLowerCase():"")}H=ae}if(H)We(P,"complete"),We(P,"success");else{P.m=6;try{var He=2<qo(P)?P.g.statusText:""}catch{He=""}P.l=He+" ["+P.Z()+"]",eg(P)}}finally{Ac(P)}}}}function Ac(P,N){if(P.g){sp(P);const H=P.g,ae=P.v[0]?()=>{}:null;P.g=null,P.v=null,N||We(P,"ready");try{H.onreadystatechange=ae}catch{}}}function sp(P){P.I&&(o.clearTimeout(P.I),P.I=null)}e.isActive=function(){return!!this.g};function qo(P){return P.g?P.g.readyState:0}e.Z=function(){try{return 2<qo(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(P){if(this.g){var N=this.g.responseText;return P&&N.indexOf(P)==0&&(N=N.substring(P.length)),It(N)}};function Vw(P){try{if(!P.g)return null;if("response"in P.g)return P.g.response;switch(P.H){case"":case"text":return P.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in P.g)return P.g.mozResponseArrayBuffer}return null}catch{return null}}function aC(P){const N={};P=(P.g&&2<=qo(P)&&P.g.getAllResponseHeaders()||"").split(`\r
`);for(let ae=0;ae<P.length;ae++){if(S(P[ae]))continue;var H=L(P[ae]);const Pe=H[0];if(H=H[1],typeof H!="string")continue;H=H.trim();const He=N[Pe]||[];N[Pe]=He,He.push(H)}D(N,function(ae){return ae.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ap(P,N,H){return H&&H.internalChannelParams&&H.internalChannelParams[P]||N}function ig(P){this.Aa=0,this.i=[],this.j=new Rr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ap("failFast",!1,P),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ap("baseRetryDelayMs",5e3,P),this.cb=ap("retryDelaySeedMs",1e4,P),this.Wa=ap("forwardChannelMaxRetries",2,P),this.wa=ap("forwardChannelRequestTimeoutMs",2e4,P),this.pa=P&&P.xmlHttpFactory||void 0,this.Xa=P&&P.Tb||void 0,this.Ca=P&&P.useFetchStreams||!1,this.L=void 0,this.J=P&&P.supportsCrossDomainXhr||!1,this.K="",this.h=new en(P&&P.concurrentRequestLimit),this.Da=new rp,this.P=P&&P.fastHandshake||!1,this.O=P&&P.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=P&&P.Rb||!1,P&&P.xa&&this.j.xa(),P&&P.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&P&&P.detectBufferingProxy||!1,this.ja=void 0,P&&P.longPollingTimeout&&0<P.longPollingTimeout&&(this.ja=P.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ig.prototype,e.la=8,e.G=1,e.connect=function(P,N,H,ae){bi(0),this.W=P,this.H=N||{},H&&ae!==void 0&&(this.H.OSID=H,this.H.OAID=ae),this.F=this.X,this.I=Xw(this,null,this.W),ng(this)};function Ey(P){if(Uw(P),P.G==3){var N=P.U++,H=So(P.I);if(Ar(H,"SID",P.K),Ar(H,"RID",N),Ar(H,"TYPE","terminate"),op(P,H),N=new _t(P,P.j,N),N.L=2,N.v=ep(So(H)),H=!1,o.navigator&&o.navigator.sendBeacon)try{H=o.navigator.sendBeacon(N.v.toString(),"")}catch{}!H&&o.Image&&(new Image().src=N.v,H=!0),H||(N.g=Yw(N.j,null),N.g.ea(N.v)),N.F=Date.now(),ti(N)}qw(P)}function rg(P){P.g&&(lp(P),P.g.cancel(),P.g=null)}function Uw(P){rg(P),P.u&&(o.clearTimeout(P.u),P.u=null),sg(P),P.h.cancel(),P.s&&(typeof P.s=="number"&&o.clearTimeout(P.s),P.s=null)}function ng(P){if(!Q(P.h)&&!P.s){P.s=!0;var N=P.Ga;Y||F(),X||(Y(),X=!0),ne.add(N,P),P.B=0}}function oC(P,N){return ee(P.h)>=P.h.j-(P.s?1:0)?!1:P.s?(P.i=N.D.concat(P.i),!0):P.G==1||P.G==2||P.B>=(P.Va?0:P.Wa)?!1:(P.s=zr(f(P.Ga,P,N),Cy(P,P.B)),P.B++,!0)}e.Ga=function(P){if(this.s)if(this.s=null,this.G==1){if(!P){this.U=Math.floor(1e5*Math.random()),P=this.U++;const Pe=new _t(this,this.j,P);let He=this.o;if(this.S&&(He?(He=T(He),O(He,this.S)):He=this.S),this.m!==null||this.O||(Pe.H=He,He=null),this.P)e:{for(var N=0,H=0;H<this.i.length;H++){t:{var ae=this.i[H];if("__data__"in ae.map&&(ae=ae.map.__data__,typeof ae=="string")){ae=ae.length;break t}ae=void 0}if(ae===void 0)break;if(N+=ae,4096<N){N=H;break e}if(N===4096||H===this.i.length-1){N=H+1;break e}}N=1e3}else N=1e3;N=Fw(this,Pe,N),H=So(this.I),Ar(H,"RID",P),Ar(H,"CVER",22),this.D&&Ar(H,"X-HTTP-Session-Id",this.D),op(this,H),He&&(this.O?N="headers="+encodeURIComponent(String(_y(He)))+"&"+N:this.m&&ps(H,this.m,He)),le(this.h,Pe),this.Ua&&Ar(H,"TYPE","init"),this.P?(Ar(H,"$req",N),Ar(H,"SID","null"),Pe.T=!0,Be(Pe,H,null)):Be(Pe,H,N),this.G=2}}else this.G==3&&(P?Ay(this,P):this.i.length==0||Q(this.h)||Ay(this))};function Ay(P,N){var H;N?H=N.l:H=P.U++;const ae=So(P.I);Ar(ae,"SID",P.K),Ar(ae,"RID",H),Ar(ae,"AID",P.T),op(P,ae),P.m&&P.o&&ps(ae,P.m,P.o),H=new _t(P,P.j,H,P.B+1),P.m===null&&(H.H=P.o),N&&(P.i=N.D.concat(P.i)),N=Fw(P,H,1e3),H.I=Math.round(.5*P.wa)+Math.round(.5*P.wa*Math.random()),le(P.h,H),Be(H,ae,N)}function op(P,N){P.H&&C(P.H,function(H,ae){Ar(N,ae,H)}),P.l&&bc({},function(H,ae){Ar(N,ae,H)})}function Fw(P,N,H){H=Math.min(P.i.length,H);var ae=P.l?f(P.l.Na,P.l,P):null;e:{var Pe=P.i;let He=-1;for(;;){const gt=["count="+H];He==-1?0<H?(He=Pe[0].g,gt.push("ofs="+He)):He=0:gt.push("ofs="+He);let Gi=!0;for(let Qn=0;Qn<H;Qn++){let Wi=Pe[Qn].g;const ms=Pe[Qn].map;if(Wi-=He,0>Wi)He=Math.max(0,Pe[Qn].g-100),Gi=!1;else try{Sc(ms,gt,"req"+Wi+"_")}catch{ae&&ae(ms)}}if(Gi){ae=gt.join("&");break e}}}return P=P.i.splice(0,H),N.D=P,ae}function Hw(P){if(!P.g&&!P.u){P.Y=1;var N=P.Fa;Y||F(),X||(Y(),X=!0),ne.add(N,P),P.v=0}}function Ty(P){return P.g||P.u||3<=P.v?!1:(P.Y++,P.u=zr(f(P.Fa,P),Cy(P,P.v)),P.v++,!0)}e.Fa=function(){if(this.u=null,Gw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var P=2*this.R;this.j.info("BP detection timer enabled: "+P),this.A=zr(f(this.ab,this),P)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bi(10),rg(this),Gw(this))};function lp(P){P.A!=null&&(o.clearTimeout(P.A),P.A=null)}function Gw(P){P.g=new _t(P,P.j,"rpc",P.Y),P.m===null&&(P.g.H=P.o),P.g.O=0;var N=So(P.qa);Ar(N,"RID","rpc"),Ar(N,"SID",P.K),Ar(N,"AID",P.T),Ar(N,"CI",P.F?"0":"1"),!P.F&&P.ja&&Ar(N,"TO",P.ja),Ar(N,"TYPE","xmlhttp"),op(P,N),P.m&&P.o&&ps(N,P.m,P.o),P.L&&(P.g.I=P.L);var H=P.g;P=P.ia,H.L=1,H.v=ep(So(N)),H.m=null,H.P=!0,ht(H,P)}e.Za=function(){this.C!=null&&(this.C=null,rg(this),Ty(this),bi(19))};function sg(P){P.C!=null&&(o.clearTimeout(P.C),P.C=null)}function Ww(P,N){var H=null;if(P.g==N){sg(P),lp(P),P.g=null;var ae=2}else if(ge(P.h,N))H=N.D,we(P.h,N),ae=1;else return;if(P.G!=0){if(N.o)if(ae==1){H=N.m?N.m.length:0,N=Date.now()-N.F;var Pe=P.B;ae=Hi(),We(ae,new gr(ae,H)),ng(P)}else Hw(P);else if(Pe=N.s,Pe==3||Pe==0&&0<N.X||!(ae==1&&oC(P,N)||ae==2&&Ty(P)))switch(H&&0<H.length&&(N=P.h,N.i=N.i.concat(H)),Pe){case 1:Fu(P,5);break;case 4:Fu(P,10);break;case 3:Fu(P,6);break;default:Fu(P,2)}}}function Cy(P,N){let H=P.Ta+Math.floor(Math.random()*P.cb);return P.isActive()||(H*=2),H*N}function Fu(P,N){if(P.j.info("Error code "+N),N==2){var H=f(P.fb,P),ae=P.Xa;const Pe=!ae;ae=new Qr(ae||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Jf(ae,"https"),ep(ae),Pe?ip(ae.toString(),H):Il(ae.toString(),H)}else bi(2);P.G=0,P.l&&P.l.sa(N),qw(P),Uw(P)}e.fb=function(P){P?(this.j.info("Successfully pinged google.com"),bi(2)):(this.j.info("Failed to ping google.com"),bi(1))};function qw(P){if(P.G=0,P.ka=[],P.l){const N=nt(P.h);(N.length!=0||P.i.length!=0)&&(x(P.ka,N),x(P.ka,P.i),P.h.i.length=0,v(P.i),P.i.length=0),P.l.ra()}}function Xw(P,N,H){var ae=H instanceof Qr?So(H):new Qr(H);if(ae.g!="")N&&(ae.g=N+"."+ae.g),nd(ae,ae.s);else{var Pe=o.location;ae=Pe.protocol,N=N?N+"."+Pe.hostname:Pe.hostname,Pe=+Pe.port;var He=new Qr(null);ae&&Jf(He,ae),N&&(He.g=N),Pe&&nd(He,Pe),H&&(He.l=H),ae=He}return H=P.D,N=P.ya,H&&N&&Ar(ae,H,N),Ar(ae,"VER",P.la),op(P,ae),ae}function Yw(P,N,H){if(N&&!P.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=P.Ca&&!P.pa?new ur(new sd({eb:H})):new ur(P.pa),N.Ha(P.J),N}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qw(){}e=Qw.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ag(){}ag.prototype.g=function(P,N){return new Pa(P,N)};function Pa(P,N){Z.call(this),this.g=new ig(N),this.l=P,this.h=N&&N.messageUrlParams||null,P=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(P?P["X-Client-Protocol"]="webchannel":P={"X-Client-Protocol":"webchannel"}),this.g.o=P,P=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(P?P["X-WebChannel-Content-Type"]=N.messageContentType:P={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(P?P["X-WebChannel-Client-Profile"]=N.va:P={"X-WebChannel-Client-Profile":N.va}),this.g.S=P,(P=N&&N.Sb)&&!S(P)&&(this.g.m=P),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!S(N)&&(this.g.D=N,P=this.h,P!==null&&N in P&&(P=this.h,N in P&&delete P[N])),this.j=new Tc(this)}g(Pa,Z),Pa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pa.prototype.close=function(){Ey(this.g)},Pa.prototype.o=function(P){var N=this.g;if(typeof P=="string"){var H={};H.__data__=P,P=H}else this.u&&(H={},H.__data__=bt(P),P=H);N.i.push(new ca(N.Ya++,P)),N.G==3&&ng(N)},Pa.prototype.N=function(){this.g.l=null,delete this.j,Ey(this.g),delete this.g,Pa.aa.N.call(this)};function Kw(P){ut.call(this),P.__headers__&&(this.headers=P.__headers__,this.statusCode=P.__status__,delete P.__headers__,delete P.__status__);var N=P.__sm__;if(N){e:{for(const H in N){P=H;break e}P=void 0}(this.i=P)&&(P=this.i,N=N!==null&&P in N?N[P]:void 0),this.data=N}else this.data=P}g(Kw,ut);function Zw(){Bt.call(this),this.status=1}g(Zw,Bt);function Tc(P){this.g=P}g(Tc,Qw),Tc.prototype.ua=function(){We(this.g,"a")},Tc.prototype.ta=function(P){We(this.g,new Kw(P))},Tc.prototype.sa=function(P){We(this.g,new Zw)},Tc.prototype.ra=function(){We(this.g,"b")},ag.prototype.createWebChannel=ag.prototype.g,Pa.prototype.send=Pa.prototype.o,Pa.prototype.open=Pa.prototype.m,Pa.prototype.close=Pa.prototype.close,j$=function(){return new ag},B$=function(){return Hi()},z$=si,RI={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,ME=Ne,xt.COMPLETE="complete",k$=xt,Ue.EventType=qe,qe.OPEN="a",qe.CLOSE="b",qe.ERROR="c",qe.MESSAGE="d",Z.prototype.listen=Z.prototype.K,ox=Ue,ur.prototype.listenOnce=ur.prototype.L,ur.prototype.getLastError=ur.prototype.Ka,ur.prototype.getLastErrorCode=ur.prototype.Ba,ur.prototype.getStatus=ur.prototype.Z,ur.prototype.getResponseJson=ur.prototype.Oa,ur.prototype.getResponseText=ur.prototype.oa,ur.prototype.send=ur.prototype.ea,ur.prototype.setWithCredentials=ur.prototype.Ha,L$=ur}).apply(typeof AS<"u"?AS:typeof self<"u"?self:typeof window<"u"?window:{});const $7="@firebase/firestore",J7="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ga.UNAUTHENTICATED=new ga(null),ga.GOOGLE_CREDENTIALS=new ga("google-credentials-uid"),ga.FIRST_PARTY=new ga("first-party-uid"),ga.MOCK_USER=new ga("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zv="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=new _$("@firebase/firestore");function S0(){return bm.logLevel}function Pt(e,...t){if(bm.logLevel<=Ki.DEBUG){const i=t.map(gL);bm.debug(`Firestore (${Zv}): ${e}`,...i)}}function Wh(e,...t){if(bm.logLevel<=Ki.ERROR){const i=t.map(gL);bm.error(`Firestore (${Zv}): ${e}`,...i)}}function Mf(e,...t){if(bm.logLevel<=Ki.WARN){const i=t.map(gL);bm.warn(`Firestore (${Zv}): ${e}`,...i)}}function gL(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,N$(e,r,i)}function N$(e,t,i){let r=`FIRESTORE (${Zv}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw Wh(r),new Error(r)}function pr(e,t,i,r){let n="Unexpected state";typeof i=="string"?n=i:r=i,e||N$(t,n,r)}function xi(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Nt extends jm{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Oxe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(ga.UNAUTHENTICATED))}shutdown(){}}class Lxe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class kxe{constructor(t){this.t=t,this.currentUser=ga.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){pr(this.o===void 0,42304);let r=this.i;const n=l=>this.i!==r?(r=this.i,i(l)):Promise.resolve();let s=new vf;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vf,t.enqueueRetryable(()=>n(this.currentUser))};const a=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await n(this.currentUser)})},o=l=>{Pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vf)}},0),a()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(r=>this.i!==t?(Pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pr(typeof r.accessToken=="string",31837,{l:r}),new V$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return pr(t===null||typeof t=="string",2055,{h:t}),new ga(t)}}class zxe{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=ga.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Bxe{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new zxe(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i(ga.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eU{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jxe{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,C$(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){pr(this.o===void 0,3512);const r=s=>{s.error!=null&&Pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Pt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?i(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const n=s=>{Pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>n(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?n(s):Pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new eU(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(pr(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new eU(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nxe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<e;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U$(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const n=Nxe(40);for(let s=0;s<n.length;++s)r.length<20&&n[s]<i&&(r+=t.charAt(n[s]%62))}return r}}function Mi(e,t){return e<t?-1:e>t?1:0}function OI(e,t){let i=0;for(;i<e.length&&i<t.length;){const r=e.codePointAt(i),n=t.codePointAt(i);if(r!==n){if(r<128&&n<128)return Mi(r,n);{const s=U$(),a=Vxe(s.encode(tU(e,i)),s.encode(tU(t,i)));return a!==0?a:Mi(r,n)}}i+=r>65535?2:1}return Mi(e.length,t.length)}function tU(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Vxe(e,t){for(let i=0;i<e.length&&i<t.length;++i)if(e[i]!==t[i])return Mi(e[i],t[i]);return Mi(e.length,t.length)}function xv(e,t,i){return e.length===t.length&&e.every((r,n)=>i(r,t[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU="__name__";class Yc{constructor(t,i,r){i===void 0?i=0:i>t.length&&oi(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&oi(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return Yc.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Yc?t.forEach(r=>{i.push(r)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let n=0;n<r;n++){const s=Yc.compareSegments(t.get(n),i.get(n));if(s!==0)return s}return Mi(t.length,i.length)}static compareSegments(t,i){const r=Yc.isNumericId(t),n=Yc.isNumericId(i);return r&&!n?-1:!r&&n?1:r&&n?Yc.extractNumericId(t).compare(Yc.extractNumericId(i)):OI(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return gf.fromString(t.substring(4,t.length-2))}}class Gr extends Yc{construct(t,i,r){return new Gr(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new Nt(at.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter(n=>n.length>0))}return new Gr(i)}static emptyPath(){return new Gr([])}}const Uxe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $s extends Yc{construct(t,i,r){return new $s(t,i,r)}static isValidIdentifier(t){return Uxe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$s.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iU}static keyField(){return new $s([iU])}static fromServerFormat(t){const i=[];let r="",n=0;const s=()=>{if(r.length===0)throw new Nt(at.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let a=!1;for(;n<t.length;){const o=t[n];if(o==="\\"){if(n+1===t.length)throw new Nt(at.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[n+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Nt(at.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,n+=2}else o==="`"?(a=!a,n++):o!=="."||a?(r+=o,n++):(s(),n++)}if(s(),a)throw new Nt(at.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new $s(i)}static emptyPath(){return new $s([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.path=t}static fromPath(t){return new Zt(Gr.fromString(t))}static fromName(t){return new Zt(Gr.fromString(t).popFirst(5))}static empty(){return new Zt(Gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Gr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return Gr.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Zt(new Gr(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F$(e,t,i){if(!i)throw new Nt(at.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Fxe(e,t,i,r){if(t===!0&&r===!0)throw new Nt(at.INVALID_ARGUMENT,`${e} and ${i} cannot be used together.`)}function rU(e){if(!Zt.isDocumentKey(e))throw new Nt(at.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function nU(e){if(Zt.isDocumentKey(e))throw new Nt(at.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function H$(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function yL(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":oi(12329,{type:typeof e})}function mA(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Nt(at.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=yL(e);throw new Nt(at.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(e,t){const i={typeString:e};return t&&(i.value=t),i}function hw(e,t){if(!H$(e))throw new Nt(at.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in t)if(t[r]){const n=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){i=`JSON missing required field: '${r}'`;break}const a=e[r];if(n&&typeof a!==n){i=`JSON field '${r}' must be a ${n}.`;break}if(s!==void 0&&a!==s.value){i=`Expected '${r}' field to equal '${s.value}'`;break}}if(i)throw new Nt(at.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=-62135596800,aU=1e6;class Wr{static now(){return Wr.fromMillis(Date.now())}static fromDate(t){return Wr.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*aU);return new Wr(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new Nt(at.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Nt(at.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<sU)throw new Nt(at.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Nt(at.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aU}_compareTo(t){return this.seconds===t.seconds?Mi(this.nanoseconds,t.nanoseconds):Mi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Wr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(hw(t,Wr._jsonSchema))return new Wr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-sU;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Wr._jsonSchemaVersion="firestore/timestamp/1.0",Wr._jsonSchema={type:Fn("string",Wr._jsonSchemaVersion),seconds:Fn("number"),nanoseconds:Fn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{static fromTimestamp(t){return new gi(t)}static min(){return new gi(new Wr(0,0))}static max(){return new gi(new Wr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=-1;function Hxe(e,t){const i=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,n=gi.fromTimestamp(r===1e9?new Wr(i+1,0):new Wr(i,r));return new Pf(n,Zt.empty(),t)}function Gxe(e){return new Pf(e.readTime,e.key,vb)}class Pf{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new Pf(gi.min(),Zt.empty(),vb)}static max(){return new Pf(gi.max(),Zt.empty(),vb)}}function Wxe(e,t){let i=e.readTime.compareTo(t.readTime);return i!==0?i:(i=Zt.comparator(e.documentKey,t.documentKey),i!==0?i:Mi(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qxe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Xxe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $v(e){if(e.code!==at.FAILED_PRECONDITION||e.message!==qxe)throw e;Pt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&oi(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new it((r,n)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,n)},this.catchCallback=s=>{this.wrapFailure(i,s).next(r,n)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof it?i:it.resolve(i)}catch(i){return it.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):it.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):it.reject(i)}static resolve(t){return new it((i,r)=>{i(t)})}static reject(t){return new it((i,r)=>{r(t)})}static waitFor(t){return new it((i,r)=>{let n=0,s=0,a=!1;t.forEach(o=>{++n,o.next(()=>{++s,a&&s===n&&i()},l=>r(l))}),a=!0,s===n&&i()})}static or(t){let i=it.resolve(!1);for(const r of t)i=i.next(n=>n?it.resolve(n):r());return i}static forEach(t,i){const r=[];return t.forEach((n,s)=>{r.push(i.call(this,n,s))}),this.waitFor(r)}static mapArray(t,i){return new it((r,n)=>{const s=t.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;i(t[c]).next(u=>{a[c]=u,++o,o===s&&r(a)},u=>n(u))}})}static doWhile(t,i){return new it((r,n)=>{const s=()=>{t()===!0?i().next(()=>{s()},n):r()};s()})}}function Yxe(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Jv(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this._e(r),this.ae=r=>i.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}p3.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL=-1;function m3(e){return e==null}function gA(e){return e===0&&1/e==-1/0}function Qxe(e){return typeof e=="number"&&Number.isInteger(e)&&!gA(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$="";function Kxe(e){let t="";for(let i=0;i<e.length;i++)t.length>0&&(t=oU(t)),t=Zxe(e.get(i),t);return oU(t)}function Zxe(e,t){let i=t;const r=e.length;for(let n=0;n<r;n++){const s=e.charAt(n);switch(s){case"\0":i+="";break;case G$:i+="";break;default:i+=s}}return i}function oU(e){return e+G$+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(e){let t=0;for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t++;return t}function Nm(e,t){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(i,e[i])}function W$(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t,i){this.comparator=t,this.root=i||Qs.EMPTY}insert(t,i){return new ln(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Qs.BLACK,null,null))}remove(t){return new ln(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qs.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return i+r.left.size;n<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,r)=>(t(i,r),!1))}toString(){const t=[];return this.inorderTraversal((i,r)=>(t.push(`${i}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new TS(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new TS(this.root,t,this.comparator,!1)}getReverseIterator(){return new TS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new TS(this.root,t,this.comparator,!0)}}class TS{constructor(t,i,r,n){this.isReverse=n,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=i?r(t.key,i):1,i&&n&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Qs{constructor(t,i,r,n,s){this.key=t,this.value=i,this.color=r??Qs.RED,this.left=n??Qs.EMPTY,this.right=s??Qs.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,n,s){return new Qs(t??this.key,i??this.value,r??this.color,n??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let n=this;const s=r(t,n.key);return n=s<0?n.copy(null,null,null,n.left.insert(t,i,r),null):s===0?n.copy(null,i,null,null,null):n.copy(null,null,null,null,n.right.insert(t,i,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return Qs.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,n=this;if(i(t,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(t,i),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),i(t,n.key)===0){if(n.right.isEmpty())return Qs.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(t,i))}return n.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Qs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Qs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oi(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oi(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw oi(27949);return t+(this.isRed()?0:1)}}Qs.EMPTY=null,Qs.RED=!0,Qs.BLACK=!1;Qs.EMPTY=new class{constructor(){this.size=0}get key(){throw oi(57766)}get value(){throw oi(16141)}get color(){throw oi(16727)}get left(){throw oi(29726)}get right(){throw oi(36894)}copy(t,i,r,n,s){return this}insert(t,i,r){return new Qs(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t){this.comparator=t,this.data=new ln(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,r)=>(t(i),!1))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,t[1])>=0)return;i(n.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new cU(this.data.getIterator())}getIteratorFrom(t){return new cU(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(r=>{i=i.add(r)}),i}isEqual(t){if(!(t instanceof cs)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const n=i.getNext().key,s=r.getNext().key;if(this.comparator(n,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new cs(this.comparator);return i.data=t,i}}class cU{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t){this.fields=t,t.sort($s.comparator)}static empty(){return new Kl([])}unionWith(t){let i=new cs($s.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new Kl(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return xv(this.fields,t.fields,(i,r)=>i.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(n){try{return atob(n)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new q$("Invalid base64 string: "+s):s}}(t);return new aa(i)}static fromUint8Array(t){const i=function(n){let s="";for(let a=0;a<n.length;++a)s+=String.fromCharCode(n[a]);return s}(t);return new aa(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const r=new Uint8Array(i.length);for(let n=0;n<i.length;n++)r[n]=i.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Mi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}aa.EMPTY_BYTE_STRING=new aa("");const $xe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Df(e){if(pr(!!e,39018),typeof e=="string"){let t=0;const i=$xe.exec(e);if(pr(!!i,46558,{timestamp:e}),i[1]){let n=i[1];n=(n+"000000000").substr(0,9),t=Number(n)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:An(e.seconds),nanos:An(e.nanos)}}function An(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function If(e){return typeof e=="string"?aa.fromBase64String(e):aa.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$="server_timestamp",Y$="__type__",Q$="__previous_value__",K$="__local_write_time__";function bL(e){var t,i;return((i=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Y$])===null||i===void 0?void 0:i.stringValue)===X$}function g3(e){const t=e.mapValue.fields[Q$];return bL(t)?g3(t):t}function yb(e){const t=Df(e.mapValue.fields[K$].timestampValue);return new Wr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jxe{constructor(t,i,r,n,s,a,o,l,c,u){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=n,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const vA="(default)";class xb{constructor(t,i){this.projectId=t,this.database=i||vA}static empty(){return new xb("","")}get isDefaultDatabase(){return this.database===vA}isEqual(t){return t instanceof xb&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$="__type__",ebe="__max__",CS={mapValue:{}},$$="__vector__",yA="value";function Rf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bL(e)?4:ibe(e)?9007199254740991:tbe(e)?10:11:oi(28295,{value:e})}function _u(e,t){if(e===t)return!0;const i=Rf(e);if(i!==Rf(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return yb(e).isEqual(yb(t));case 3:return function(n,s){if(typeof n.timestampValue=="string"&&typeof s.timestampValue=="string"&&n.timestampValue.length===s.timestampValue.length)return n.timestampValue===s.timestampValue;const a=Df(n.timestampValue),o=Df(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(n,s){return If(n.bytesValue).isEqual(If(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(n,s){return An(n.geoPointValue.latitude)===An(s.geoPointValue.latitude)&&An(n.geoPointValue.longitude)===An(s.geoPointValue.longitude)}(e,t);case 2:return function(n,s){if("integerValue"in n&&"integerValue"in s)return An(n.integerValue)===An(s.integerValue);if("doubleValue"in n&&"doubleValue"in s){const a=An(n.doubleValue),o=An(s.doubleValue);return a===o?gA(a)===gA(o):isNaN(a)&&isNaN(o)}return!1}(e,t);case 9:return xv(e.arrayValue.values||[],t.arrayValue.values||[],_u);case 10:case 11:return function(n,s){const a=n.mapValue.fields||{},o=s.mapValue.fields||{};if(lU(a)!==lU(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!_u(a[l],o[l])))return!1;return!0}(e,t);default:return oi(52216,{left:e})}}function bb(e,t){return(e.values||[]).find(i=>_u(i,t))!==void 0}function bv(e,t){if(e===t)return 0;const i=Rf(e),r=Rf(t);if(i!==r)return Mi(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return Mi(e.booleanValue,t.booleanValue);case 2:return function(s,a){const o=An(s.integerValue||s.doubleValue),l=An(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(e,t);case 3:return uU(e.timestampValue,t.timestampValue);case 4:return uU(yb(e),yb(t));case 5:return OI(e.stringValue,t.stringValue);case 6:return function(s,a){const o=If(s),l=If(a);return o.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=Mi(o[c],l[c]);if(u!==0)return u}return Mi(o.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const o=Mi(An(s.latitude),An(a.latitude));return o!==0?o:Mi(An(s.longitude),An(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return hU(e.arrayValue,t.arrayValue);case 10:return function(s,a){var o,l,c,u;const h=s.fields||{},f=a.fields||{},m=(o=h[yA])===null||o===void 0?void 0:o.arrayValue,g=(l=f[yA])===null||l===void 0?void 0:l.arrayValue,v=Mi(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:hU(m,g)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===CS.mapValue&&a===CS.mapValue)return 0;if(s===CS.mapValue)return 1;if(a===CS.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=OI(l[h],u[h]);if(f!==0)return f;const m=bv(o[l[h]],c[u[h]]);if(m!==0)return m}return Mi(l.length,u.length)}(e.mapValue,t.mapValue);default:throw oi(23264,{le:i})}}function uU(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Mi(e,t);const i=Df(e),r=Df(t),n=Mi(i.seconds,r.seconds);return n!==0?n:Mi(i.nanos,r.nanos)}function hU(e,t){const i=e.values||[],r=t.values||[];for(let n=0;n<i.length&&n<r.length;++n){const s=bv(i[n],r[n]);if(s)return s}return Mi(i.length,r.length)}function wv(e){return LI(e)}function LI(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(i){const r=Df(i);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(i){return If(i).toBase64()}(e.bytesValue):"referenceValue"in e?function(i){return Zt.fromName(i).toString()}(e.referenceValue):"geoPointValue"in e?function(i){return`geo(${i.latitude},${i.longitude})`}(e.geoPointValue):"arrayValue"in e?function(i){let r="[",n=!0;for(const s of i.values||[])n?n=!1:r+=",",r+=LI(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(i){const r=Object.keys(i.fields||{}).sort();let n="{",s=!0;for(const a of r)s?s=!1:n+=",",n+=`${a}:${LI(i.fields[a])}`;return n+"}"}(e.mapValue):oi(61005,{value:e})}function PE(e){switch(Rf(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=g3(e);return t?16+PE(t):16;case 5:return 2*e.stringValue.length;case 6:return If(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((n,s)=>n+PE(s),0)}(e.arrayValue);case 10:case 11:return function(r){let n=0;return Nm(r.fields,(s,a)=>{n+=s.length+PE(a)}),n}(e.mapValue);default:throw oi(13486,{value:e})}}function kI(e){return!!e&&"integerValue"in e}function wL(e){return!!e&&"arrayValue"in e}function dU(e){return!!e&&"nullValue"in e}function fU(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function DE(e){return!!e&&"mapValue"in e}function tbe(e){var t,i;return((i=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Z$])===null||i===void 0?void 0:i.stringValue)===$$}function Ix(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Nm(e.mapValue.fields,(i,r)=>t.mapValue.fields[i]=Ix(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(e.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Ix(e.arrayValue.values[i]);return t}return Object.assign({},e)}function ibe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ebe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(t){this.value=t}static empty(){return new ml({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!DE(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ix(i)}setAll(t){let i=$s.emptyPath(),r={},n=[];t.forEach((a,o)=>{if(!i.isImmediateParentOf(o)){const l=this.getFieldsMap(i);this.applyChanges(l,r,n),r={},n=[],i=o.popLast()}a?r[o.lastSegment()]=Ix(a):n.push(o.lastSegment())});const s=this.getFieldsMap(i);this.applyChanges(s,r,n)}delete(t){const i=this.field(t.popLast());DE(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return _u(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let n=i.mapValue.fields[t.get(r)];DE(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=n),i=n}return i.mapValue.fields}applyChanges(t,i,r){Nm(i,(n,s)=>t[n]=s);for(const n of r)delete t[n]}clone(){return new ml(Ix(this.value))}}function J$(e){const t=[];return Nm(e.fields,(i,r)=>{const n=new $s([i]);if(DE(r)){const s=J$(r.mapValue).fields;if(s.length===0)t.push(n);else for(const a of s)t.push(n.child(a))}else t.push(n)}),new Kl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(t,i,r,n,s,a,o){this.key=t,this.documentType=i,this.version=r,this.readTime=n,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(t){return new va(t,0,gi.min(),gi.min(),gi.min(),ml.empty(),0)}static newFoundDocument(t,i,r,n){return new va(t,1,i,gi.min(),r,n,0)}static newNoDocument(t,i){return new va(t,2,i,gi.min(),gi.min(),ml.empty(),0)}static newUnknownDocument(t,i){return new va(t,3,i,gi.min(),gi.min(),ml.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(gi.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ml.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ml.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gi.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof va&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new va(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t,i){this.position=t,this.inclusive=i}}function pU(e,t,i){let r=0;for(let n=0;n<e.position.length;n++){const s=t[n],a=e.position[n];if(s.field.isKeyField()?r=Zt.comparator(Zt.fromName(a.referenceValue),i.key):r=bv(a,i.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function mU(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let i=0;i<e.position.length;i++)if(!_u(e.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(t,i="asc"){this.field=t,this.dir=i}}function rbe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{}class ss extends eJ{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new sbe(t,i,r):i==="array-contains"?new lbe(t,r):i==="in"?new cbe(t,r):i==="not-in"?new ube(t,r):i==="array-contains-any"?new hbe(t,r):new ss(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new abe(t,r):new obe(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(bv(i,this.value)):i!==null&&Rf(this.value)===Rf(i)&&this.matchesComparison(bv(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return oi(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Eu extends eJ{constructor(t,i){super(),this.filters=t,this.op=i,this.he=null}static create(t,i){return new Eu(t,i)}matches(t){return tJ(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function tJ(e){return e.op==="and"}function iJ(e){return nbe(e)&&tJ(e)}function nbe(e){for(const t of e.filters)if(t instanceof Eu)return!1;return!0}function zI(e){if(e instanceof ss)return e.field.canonicalString()+e.op.toString()+wv(e.value);if(iJ(e))return e.filters.map(t=>zI(t)).join(",");{const t=e.filters.map(i=>zI(i)).join(",");return`${e.op}(${t})`}}function rJ(e,t){return e instanceof ss?function(r,n){return n instanceof ss&&r.op===n.op&&r.field.isEqual(n.field)&&_u(r.value,n.value)}(e,t):e instanceof Eu?function(r,n){return n instanceof Eu&&r.op===n.op&&r.filters.length===n.filters.length?r.filters.reduce((s,a,o)=>s&&rJ(a,n.filters[o]),!0):!1}(e,t):void oi(19439)}function nJ(e){return e instanceof ss?function(i){return`${i.field.canonicalString()} ${i.op} ${wv(i.value)}`}(e):e instanceof Eu?function(i){return i.op.toString()+" {"+i.getFilters().map(nJ).join(" ,")+"}"}(e):"Filter"}class sbe extends ss{constructor(t,i,r){super(t,i,r),this.key=Zt.fromName(r.referenceValue)}matches(t){const i=Zt.comparator(t.key,this.key);return this.matchesComparison(i)}}class abe extends ss{constructor(t,i){super(t,"in",i),this.keys=sJ("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class obe extends ss{constructor(t,i){super(t,"not-in",i),this.keys=sJ("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function sJ(e,t){var i;return(((i=t.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(r=>Zt.fromName(r.referenceValue))}class lbe extends ss{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return wL(i)&&bb(i.arrayValue,this.value)}}class cbe extends ss{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&bb(this.value.arrayValue,i)}}class ube extends ss{constructor(t,i){super(t,"not-in",i)}matches(t){if(bb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!bb(this.value.arrayValue,i)}}class hbe extends ss{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!wL(i)||!i.arrayValue.values)&&i.arrayValue.values.some(r=>bb(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dbe{constructor(t,i=null,r=[],n=[],s=null,a=null,o=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=n,this.limit=s,this.startAt=a,this.endAt=o,this.Pe=null}}function gU(e,t=null,i=[],r=[],n=null,s=null,a=null){return new dbe(e,t,i,r,n,s,a)}function SL(e){const t=xi(e);if(t.Pe===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(r=>zI(r)).join(","),i+="|ob:",i+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),m3(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>wv(r)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>wv(r)).join(",")),t.Pe=i}return t.Pe}function _L(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!rbe(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(!rJ(e.filters[i],t.filters[i]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!mU(e.startAt,t.startAt)&&mU(e.endAt,t.endAt)}function BI(e){return Zt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(t,i=null,r=[],n=[],s=null,a="F",o=null,l=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=n,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function fbe(e,t,i,r,n,s,a,o){return new v3(e,t,i,r,n,s,a,o)}function EL(e){return new v3(e)}function vU(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function pbe(e){return e.collectionGroup!==null}function Rx(e){const t=xi(e);if(t.Te===null){t.Te=[];const i=new Set;for(const s of t.explicitOrderBy)t.Te.push(s),i.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new cs($s.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(t).forEach(s=>{i.has(s.canonicalString())||s.isKeyField()||t.Te.push(new bA(s,r))}),i.has($s.keyField().canonicalString())||t.Te.push(new bA($s.keyField(),r))}return t.Te}function pu(e){const t=xi(e);return t.Ie||(t.Ie=mbe(t,Rx(e))),t.Ie}function mbe(e,t){if(e.limitType==="F")return gU(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(n=>{const s=n.dir==="desc"?"asc":"desc";return new bA(n.field,s)});const i=e.endAt?new xA(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new xA(e.startAt.position,e.startAt.inclusive):null;return gU(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}}function jI(e,t,i){return new v3(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,i,e.startAt,e.endAt)}function y3(e,t){return _L(pu(e),pu(t))&&e.limitType===t.limitType}function aJ(e){return`${SL(pu(e))}|lt:${e.limitType}`}function _0(e){return`Query(target=${function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map(n=>nJ(n)).join(", ")}]`),m3(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map(n=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(n)).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map(n=>wv(n)).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map(n=>wv(n)).join(",")),`Target(${r})`}(pu(e))}; limitType=${e.limitType})`}function x3(e,t){return t.isFoundDocument()&&function(r,n){const s=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Zt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,n){for(const s of Rx(r))if(!s.field.isKeyField()&&n.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,n){for(const s of r.filters)if(!s.matches(n))return!1;return!0}(e,t)&&function(r,n){return!(r.startAt&&!function(a,o,l){const c=pU(a,o,l);return a.inclusive?c<=0:c<0}(r.startAt,Rx(r),n)||r.endAt&&!function(a,o,l){const c=pU(a,o,l);return a.inclusive?c>=0:c>0}(r.endAt,Rx(r),n))}(e,t)}function gbe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function oJ(e){return(t,i)=>{let r=!1;for(const n of Rx(e)){const s=vbe(n,t,i);if(s!==0)return s;r=r||n.field.isKeyField()}return 0}}function vbe(e,t,i){const r=e.field.isKeyField()?Zt.comparator(t.key,i.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?bv(l,c):oi(42886)}(e.field,t,i);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return oi(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[n,s]of r)if(this.equalsFn(n,t))return s}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return void(n[s]=[t,i]);n.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return r.length===1?delete this.inner[i]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(t){Nm(this.inner,(i,r)=>{for(const[n,s]of r)t(n,s)})}isEmpty(){return W$(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ybe=new ln(Zt.comparator);function qh(){return ybe}const lJ=new ln(Zt.comparator);function lx(...e){let t=lJ;for(const i of e)t=t.insert(i.key,i);return t}function cJ(e){let t=lJ;return e.forEach((i,r)=>t=t.insert(i,r.overlayedDocument)),t}function Zp(){return Ox()}function uJ(){return Ox()}function Ox(){return new Vm(e=>e.toString(),(e,t)=>e.isEqual(t))}const xbe=new ln(Zt.comparator),bbe=new cs(Zt.comparator);function ji(...e){let t=bbe;for(const i of e)t=t.add(i);return t}const wbe=new cs(Mi);function Sbe(){return wbe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gA(t)?"-0":t}}function hJ(e){return{integerValue:""+e}}function _be(e,t){return Qxe(t)?hJ(t):AL(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this._=void 0}}function Ebe(e,t,i){return e instanceof wb?function(n,s){const a={fields:{[Y$]:{stringValue:X$},[K$]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return s&&bL(s)&&(s=g3(s)),s&&(a.fields[Q$]=s),{mapValue:a}}(i,t):e instanceof Sb?fJ(e,t):e instanceof _b?pJ(e,t):function(n,s){const a=dJ(n,s),o=yU(a)+yU(n.Ee);return kI(a)&&kI(n.Ee)?hJ(o):AL(n.serializer,o)}(e,t)}function Abe(e,t,i){return e instanceof Sb?fJ(e,t):e instanceof _b?pJ(e,t):i}function dJ(e,t){return e instanceof wA?function(r){return kI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class wb extends b3{}class Sb extends b3{constructor(t){super(),this.elements=t}}function fJ(e,t){const i=mJ(t);for(const r of e.elements)i.some(n=>_u(n,r))||i.push(r);return{arrayValue:{values:i}}}class _b extends b3{constructor(t){super(),this.elements=t}}function pJ(e,t){let i=mJ(t);for(const r of e.elements)i=i.filter(n=>!_u(n,r));return{arrayValue:{values:i}}}class wA extends b3{constructor(t,i){super(),this.serializer=t,this.Ee=i}}function yU(e){return An(e.integerValue||e.doubleValue)}function mJ(e){return wL(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tbe{constructor(t,i){this.field=t,this.transform=i}}function Cbe(e,t){return e.field.isEqual(t.field)&&function(r,n){return r instanceof Sb&&n instanceof Sb||r instanceof _b&&n instanceof _b?xv(r.elements,n.elements,_u):r instanceof wA&&n instanceof wA?_u(r.Ee,n.Ee):r instanceof wb&&n instanceof wb}(e.transform,t.transform)}class Mbe{constructor(t,i){this.version=t,this.transformResults=i}}class zh{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new zh}static exists(t){return new zh(void 0,t)}static updateTime(t){return new zh(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function IE(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class w3{}function gJ(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new yJ(e.key,zh.none()):new dw(e.key,e.data,zh.none());{const i=e.data,r=ml.empty();let n=new cs($s.comparator);for(let s of t.fields)if(!n.has(s)){let a=i.field(s);a===null&&s.length>1&&(s=s.popLast(),a=i.field(s)),a===null?r.delete(s):r.set(s,a),n=n.add(s)}return new Um(e.key,r,new Kl(n.toArray()),zh.none())}}function Pbe(e,t,i){e instanceof dw?function(n,s,a){const o=n.value.clone(),l=bU(n.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(e,t,i):e instanceof Um?function(n,s,a){if(!IE(n.precondition,s))return void s.convertToUnknownDocument(a.version);const o=bU(n.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(vJ(n)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,i):function(n,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,i)}function Lx(e,t,i,r){return e instanceof dw?function(s,a,o,l){if(!IE(s.precondition,a))return o;const c=s.value.clone(),u=wU(s.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(e,t,i,r):e instanceof Um?function(s,a,o,l){if(!IE(s.precondition,a))return o;const c=wU(s.fieldTransforms,l,a),u=a.data;return u.setAll(vJ(s)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(e,t,i,r):function(s,a,o){return IE(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(e,t,i)}function Dbe(e,t){let i=null;for(const r of e.fieldTransforms){const n=t.data.field(r.field),s=dJ(r.transform,n||null);s!=null&&(i===null&&(i=ml.empty()),i.set(r.field,s))}return i||null}function xU(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&xv(r,n,(s,a)=>Cbe(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class dw extends w3{constructor(t,i,r,n=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class Um extends w3{constructor(t,i,r,n,s=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=n,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vJ(e){const t=new Map;return e.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const r=e.data.field(i);t.set(i,r)}}),t}function bU(e,t,i){const r=new Map;pr(e.length===i.length,32656,{Ae:i.length,Re:e.length});for(let n=0;n<i.length;n++){const s=e[n],a=s.transform,o=t.data.field(s.field);r.set(s.field,Abe(a,o,i[n]))}return r}function wU(e,t,i){const r=new Map;for(const n of e){const s=n.transform,a=i.data.field(n.field);r.set(n.field,Ebe(s,a,t))}return r}class yJ extends w3{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ibe extends w3{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rbe{constructor(t,i,r,n){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let n=0;n<this.mutations.length;n++){const s=this.mutations[n];s.key.isEqual(t.key)&&Pbe(s,t,r[n])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Lx(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Lx(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=uJ();return this.mutations.forEach(n=>{const s=t.get(n.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=i.has(n.key)?null:o;const l=gJ(a,o);l!==null&&r.set(n.key,l),a.isValidDocument()||a.convertToNoDocument(gi.min())}),r}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),ji())}isEqual(t){return this.batchId===t.batchId&&xv(this.mutations,t.mutations,(i,r)=>xU(i,r))&&xv(this.baseMutations,t.baseMutations,(i,r)=>xU(i,r))}}class TL{constructor(t,i,r,n){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=n}static from(t,i,r){pr(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let n=function(){return xbe}();const s=t.mutations;for(let a=0;a<s.length;a++)n=n.insert(s[a].key,r[a].version);return new TL(t,i,r,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Obe=class{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lbe{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zn,Xi;function kbe(e){switch(e){case at.OK:return oi(64938);case at.CANCELLED:case at.UNKNOWN:case at.DEADLINE_EXCEEDED:case at.RESOURCE_EXHAUSTED:case at.INTERNAL:case at.UNAVAILABLE:case at.UNAUTHENTICATED:return!1;case at.INVALID_ARGUMENT:case at.NOT_FOUND:case at.ALREADY_EXISTS:case at.PERMISSION_DENIED:case at.FAILED_PRECONDITION:case at.ABORTED:case at.OUT_OF_RANGE:case at.UNIMPLEMENTED:case at.DATA_LOSS:return!0;default:return oi(15467,{code:e})}}function xJ(e){if(e===void 0)return Wh("GRPC error has no .code"),at.UNKNOWN;switch(e){case zn.OK:return at.OK;case zn.CANCELLED:return at.CANCELLED;case zn.UNKNOWN:return at.UNKNOWN;case zn.DEADLINE_EXCEEDED:return at.DEADLINE_EXCEEDED;case zn.RESOURCE_EXHAUSTED:return at.RESOURCE_EXHAUSTED;case zn.INTERNAL:return at.INTERNAL;case zn.UNAVAILABLE:return at.UNAVAILABLE;case zn.UNAUTHENTICATED:return at.UNAUTHENTICATED;case zn.INVALID_ARGUMENT:return at.INVALID_ARGUMENT;case zn.NOT_FOUND:return at.NOT_FOUND;case zn.ALREADY_EXISTS:return at.ALREADY_EXISTS;case zn.PERMISSION_DENIED:return at.PERMISSION_DENIED;case zn.FAILED_PRECONDITION:return at.FAILED_PRECONDITION;case zn.ABORTED:return at.ABORTED;case zn.OUT_OF_RANGE:return at.OUT_OF_RANGE;case zn.UNIMPLEMENTED:return at.UNIMPLEMENTED;case zn.DATA_LOSS:return at.DATA_LOSS;default:return oi(39323,{code:e})}}(Xi=zn||(zn={}))[Xi.OK=0]="OK",Xi[Xi.CANCELLED=1]="CANCELLED",Xi[Xi.UNKNOWN=2]="UNKNOWN",Xi[Xi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xi[Xi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xi[Xi.NOT_FOUND=5]="NOT_FOUND",Xi[Xi.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xi[Xi.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xi[Xi.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xi[Xi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xi[Xi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xi[Xi.ABORTED=10]="ABORTED",Xi[Xi.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xi[Xi.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xi[Xi.INTERNAL=13]="INTERNAL",Xi[Xi.UNAVAILABLE=14]="UNAVAILABLE",Xi[Xi.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zbe=new gf([4294967295,4294967295],0);function SU(e){const t=U$().encode(e),i=new O$;return i.update(t),new Uint8Array(i.digest())}function _U(e){const t=new DataView(e.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),n=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new gf([i,r],0),new gf([n,s],0)]}class CL{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new cx(`Invalid padding: ${i}`);if(r<0)throw new cx(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new cx(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new cx(`Invalid padding when bitmap length is 0: ${i}`);this.fe=8*t.length-i,this.ge=gf.fromNumber(this.fe)}pe(t,i,r){let n=t.add(i.multiply(gf.fromNumber(r)));return n.compare(zbe)===1&&(n=new gf([n.getBits(0),n.getBits(1)],0)),n.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const i=SU(t),[r,n]=_U(i);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,n,s);if(!this.ye(a))return!1}return!0}static create(t,i,r){const n=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new CL(s,n,i);return r.forEach(o=>a.insert(o)),a}insert(t){if(this.fe===0)return;const i=SU(t),[r,n]=_U(i);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,n,s);this.we(a)}}we(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class cx extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(t,i,r,n,s){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const n=new Map;return n.set(t,fw.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new S3(gi.min(),n,new ln(Mi),qh(),ji())}}class fw{constructor(t,i,r,n,s){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new fw(r,i,ji(),ji(),ji())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(t,i,r,n){this.Se=t,this.removedTargetIds=i,this.key=r,this.be=n}}class bJ{constructor(t,i){this.targetId=t,this.De=i}}class wJ{constructor(t,i,r=aa.EMPTY_BYTE_STRING,n=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=n}}class EU{constructor(){this.ve=0,this.Ce=AU(),this.Fe=aa.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=ji(),i=ji(),r=ji();return this.Ce.forEach((n,s)=>{switch(s){case 0:t=t.add(n);break;case 2:i=i.add(n);break;case 1:r=r.add(n);break;default:oi(38017,{changeType:s})}}),new fw(this.Fe,this.Me,t,i,r)}ke(){this.xe=!1,this.Ce=AU()}qe(t,i){this.xe=!0,this.Ce=this.Ce.insert(t,i)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,pr(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Bbe{constructor(t){this.We=t,this.Ge=new Map,this.ze=qh(),this.je=MS(),this.Je=MS(),this.He=new ln(Mi)}Ye(t){for(const i of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(i,t.be):this.Xe(i,t.key,t.be);for(const i of t.removedTargetIds)this.Xe(i,t.key,t.be)}et(t){this.forEachTarget(t,i=>{const r=this.tt(i);switch(t.state){case 0:this.nt(i)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(i);break;case 3:this.nt(i)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(i)&&(this.rt(i),r.Be(t.resumeToken));break;default:oi(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.Ge.forEach((r,n)=>{this.nt(n)&&i(n)})}it(t){const i=t.targetId,r=t.De.count,n=this.st(i);if(n){const s=n.target;if(BI(s))if(r===0){const a=new Zt(s.path);this.Xe(i,a,va.newNoDocument(a,gi.min()))}else pr(r===1,20013,{expectedCount:r});else{const a=this.ot(i);if(a!==r){const o=this._t(t),l=o?this.ut(o,t,a):1;if(l!==0){this.rt(i);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(i,c)}}}}}_t(t){const i=t.De.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:n=0},hashCount:s=0}=i;let a,o;try{a=If(r).toUint8Array()}catch(l){if(l instanceof q$)return Mf("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new CL(a,n,s)}catch(l){return Mf(l instanceof cx?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.fe===0?null:o}ut(t,i,r){return i.De.count===r-this.ht(t,i.targetId)?0:2}ht(t,i){const r=this.We.getRemoteKeysForTarget(i);let n=0;return r.forEach(s=>{const a=this.We.lt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.Xe(i,s,null),n++)}),n}Pt(t){const i=new Map;this.Ge.forEach((s,a)=>{const o=this.st(a);if(o){if(s.current&&BI(o.target)){const l=new Zt(o.target.path);this.Tt(l).has(a)||this.It(a,l)||this.Xe(a,l,va.newNoDocument(l,t))}s.Ne&&(i.set(a,s.Le()),s.ke())}});let r=ji();this.Je.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ze.forEach((s,a)=>a.setReadTime(t));const n=new S3(t,i,this.He,this.ze,r);return this.ze=qh(),this.je=MS(),this.Je=MS(),this.He=new ln(Mi),n}Ze(t,i){if(!this.nt(t))return;const r=this.It(t,i.key)?2:0;this.tt(t).qe(i.key,r),this.ze=this.ze.insert(i.key,i),this.je=this.je.insert(i.key,this.Tt(i.key).add(t)),this.Je=this.Je.insert(i.key,this.dt(i.key).add(t))}Xe(t,i,r){if(!this.nt(t))return;const n=this.tt(t);this.It(t,i)?n.qe(i,1):n.Qe(i),this.Je=this.Je.insert(i,this.dt(i).delete(t)),this.Je=this.Je.insert(i,this.dt(i).add(t)),r&&(this.ze=this.ze.insert(i,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const i=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let i=this.Ge.get(t);return i||(i=new EU,this.Ge.set(t,i)),i}dt(t){let i=this.Je.get(t);return i||(i=new cs(Mi),this.Je=this.Je.insert(t,i)),i}Tt(t){let i=this.je.get(t);return i||(i=new cs(Mi),this.je=this.je.insert(t,i)),i}nt(t){const i=this.st(t)!==null;return i||Pt("WatchChangeAggregator","Detected inactive target",t),i}st(t){const i=this.Ge.get(t);return i&&i.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new EU),this.We.getRemoteKeysForTarget(t).forEach(i=>{this.Xe(t,i,null)})}It(t,i){return this.We.getRemoteKeysForTarget(t).has(i)}}function MS(){return new ln(Zt.comparator)}function AU(){return new ln(Zt.comparator)}const jbe={asc:"ASCENDING",desc:"DESCENDING"},Nbe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vbe={and:"AND",or:"OR"};class Ube{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function NI(e,t){return e.useProto3Json||m3(t)?t:{value:t}}function SA(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function SJ(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Fbe(e,t){return SA(e,t.toTimestamp())}function mu(e){return pr(!!e,49232),gi.fromTimestamp(function(i){const r=Df(i);return new Wr(r.seconds,r.nanos)}(e))}function ML(e,t){return VI(e,t).canonicalString()}function VI(e,t){const i=function(n){return new Gr(["projects",n.projectId,"databases",n.database])}(e).child("documents");return t===void 0?i:i.child(t)}function _J(e){const t=Gr.fromString(e);return pr(MJ(t),10190,{key:t.toString()}),t}function UI(e,t){return ML(e.databaseId,t.path)}function KM(e,t){const i=_J(t);if(i.get(1)!==e.databaseId.projectId)throw new Nt(at.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+e.databaseId.projectId);if(i.get(3)!==e.databaseId.database)throw new Nt(at.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+e.databaseId.database);return new Zt(AJ(i))}function EJ(e,t){return ML(e.databaseId,t)}function Hbe(e){const t=_J(e);return t.length===4?Gr.emptyPath():AJ(t)}function FI(e){return new Gr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function AJ(e){return pr(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function TU(e,t,i){return{name:UI(e,t),fields:i.value.mapValue.fields}}function Gbe(e,t){let i;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oi(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),n=t.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(pr(u===void 0||typeof u=="string",58123),aa.fromBase64String(u||"")):(pr(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),aa.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(c){const u=c.code===void 0?at.UNKNOWN:xJ(c.code);return new Nt(u,c.message||"")}(a);i=new wJ(r,n,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const n=KM(e,r.document.name),s=mu(r.document.updateTime),a=r.document.createTime?mu(r.document.createTime):gi.min(),o=new ml({mapValue:{fields:r.document.fields}}),l=va.newFoundDocument(n,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];i=new RE(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const n=KM(e,r.document),s=r.readTime?mu(r.readTime):gi.min(),a=va.newNoDocument(n,s),o=r.removedTargetIds||[];i=new RE([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const n=KM(e,r.document),s=r.removedTargetIds||[];i=new RE([],s,n,null)}else{if(!("filter"in t))return oi(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:n=0,unchangedNames:s}=r,a=new Lbe(n,s),o=r.targetId;i=new bJ(o,a)}}return i}function Wbe(e,t){let i;if(t instanceof dw)i={update:TU(e,t.key,t.value)};else if(t instanceof yJ)i={delete:UI(e,t.key)};else if(t instanceof Um)i={update:TU(e,t.key,t.data),updateMask:ewe(t.fieldMask)};else{if(!(t instanceof Ibe))return oi(16599,{Rt:t.type});i={verify:UI(e,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof wb)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Sb)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof _b)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof wA)return{fieldPath:a.field.canonicalString(),increment:o.Ee};throw oi(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(i.currentDocument=function(n,s){return s.updateTime!==void 0?{updateTime:Fbe(n,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oi(27497)}(e,t.precondition)),i}function qbe(e,t){return e&&e.length>0?(pr(t!==void 0,14353),e.map(i=>function(n,s){let a=n.updateTime?mu(n.updateTime):mu(s);return a.isEqual(gi.min())&&(a=mu(s)),new Mbe(a,n.transformResults||[])}(i,t))):[]}function Xbe(e,t){return{documents:[EJ(e,t.path)]}}function Ybe(e,t){const i={structuredQuery:{}},r=t.path;let n;t.collectionGroup!==null?(n=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=EJ(e,n);const s=function(c){if(c.length!==0)return CJ(Eu.create(c,"and"))}(t.filters);s&&(i.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:E0(f.field),direction:Zbe(f.dir)}}(u))}(t.orderBy);a&&(i.structuredQuery.orderBy=a);const o=NI(e,t.limit);return o!==null&&(i.structuredQuery.limit=o),t.startAt&&(i.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{Vt:i,parent:n}}function Qbe(e){let t=Hbe(e.parent);const i=e.structuredQuery,r=i.from?i.from.length:0;let n=null;if(r>0){pr(r===1,65062);const u=i.from[0];u.allDescendants?n=u.collectionId:t=t.child(u.collectionId)}let s=[];i.where&&(s=function(h){const f=TJ(h);return f instanceof Eu&&iJ(f)?f.getFilters():[f]}(i.where));let a=[];i.orderBy&&(a=function(h){return h.map(f=>function(g){return new bA(A0(g.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(i.orderBy));let o=null;i.limit&&(o=function(h){let f;return f=typeof h=="object"?h.value:h,m3(f)?null:f}(i.limit));let l=null;i.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new xA(m,f)}(i.startAt));let c=null;return i.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new xA(m,f)}(i.endAt)),fbe(t,n,a,s,o,"F",l,c)}function Kbe(e,t){const i=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oi(28987,{purpose:n})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function TJ(e){return e.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=A0(i.unaryFilter.field);return ss.create(r,"==",{doubleValue:NaN});case"IS_NULL":const n=A0(i.unaryFilter.field);return ss.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=A0(i.unaryFilter.field);return ss.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=A0(i.unaryFilter.field);return ss.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oi(61313);default:return oi(60726)}}(e):e.fieldFilter!==void 0?function(i){return ss.create(A0(i.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oi(58110);default:return oi(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(i){return Eu.create(i.compositeFilter.filters.map(r=>TJ(r)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return oi(1026)}}(i.compositeFilter.op))}(e):oi(30097,{filter:e})}function Zbe(e){return jbe[e]}function $be(e){return Nbe[e]}function Jbe(e){return Vbe[e]}function E0(e){return{fieldPath:e.canonicalString()}}function A0(e){return $s.fromServerFormat(e.fieldPath)}function CJ(e){return e instanceof ss?function(i){if(i.op==="=="){if(fU(i.value))return{unaryFilter:{field:E0(i.field),op:"IS_NAN"}};if(dU(i.value))return{unaryFilter:{field:E0(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(fU(i.value))return{unaryFilter:{field:E0(i.field),op:"IS_NOT_NAN"}};if(dU(i.value))return{unaryFilter:{field:E0(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:E0(i.field),op:$be(i.op),value:i.value}}}(e):e instanceof Eu?function(i){const r=i.getFilters().map(n=>CJ(n));return r.length===1?r[0]:{compositeFilter:{op:Jbe(i.op),filters:r}}}(e):oi(54877,{filter:e})}function ewe(e){const t=[];return e.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function MJ(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(t,i,r,n,s=gi.min(),a=gi.min(),o=aa.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(t){return new ef(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class twe{constructor(t){this.gt=t}}function iwe(e){const t=Qbe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?jI(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rwe{constructor(){this.Dn=new nwe}addToCollectionParentIndex(t,i){return this.Dn.add(i),it.resolve()}getCollectionParents(t,i){return it.resolve(this.Dn.getEntries(i))}addFieldIndex(t,i){return it.resolve()}deleteFieldIndex(t,i){return it.resolve()}deleteAllFieldIndexes(t){return it.resolve()}createTargetIndexes(t,i){return it.resolve()}getDocumentsMatchingTarget(t,i){return it.resolve(null)}getIndexType(t,i){return it.resolve(0)}getFieldIndexes(t,i){return it.resolve([])}getNextCollectionGroupToUpdate(t){return it.resolve(null)}getMinOffset(t,i){return it.resolve(Pf.min())}getMinOffsetFromCollectionGroup(t,i){return it.resolve(Pf.min())}updateCollectionGroup(t,i,r){return it.resolve()}updateIndexEntries(t,i){return it.resolve()}}class nwe{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),n=this.index[i]||new cs(Gr.comparator),s=!n.has(r);return this.index[i]=n.add(r),s}has(t){const i=t.lastSegment(),r=t.popLast(),n=this.index[i];return n&&n.has(r)}getEntries(t){return(this.index[t]||new cs(Gr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PJ=41943040;class no{static withCacheSize(t){return new no(t,no.DEFAULT_COLLECTION_PERCENTILE,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */no.DEFAULT_COLLECTION_PERCENTILE=10,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,no.DEFAULT=new no(PJ,no.DEFAULT_COLLECTION_PERCENTILE,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),no.DISABLED=new no(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Sv(0)}static ur(){return new Sv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="LruGarbageCollector",swe=1048576;function PU([e,t],[i,r]){const n=Mi(e,i);return n===0?Mi(t,r):n}class awe{constructor(t){this.Tr=t,this.buffer=new cs(PU),this.Ir=0}dr(){return++this.Ir}Er(t){const i=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();PU(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class owe{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){Pt(MU,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Jv(i)?Pt(MU,"Ignoring IndexedDB error during garbage collection: ",i):await $v(i)}await this.Rr(3e5)})}}class lwe{constructor(t,i){this.Vr=t,this.params=i}calculateTargetCount(t,i){return this.Vr.mr(t).next(r=>Math.floor(i/100*r))}nthSequenceNumber(t,i){if(i===0)return it.resolve(p3.ue);const r=new awe(i);return this.Vr.forEachTarget(t,n=>r.Er(n.sequenceNumber)).next(()=>this.Vr.gr(t,n=>r.Er(n))).next(()=>r.maxValue)}removeTargets(t,i,r){return this.Vr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.Vr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(Pt("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve(CU)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CU):this.pr(t,i))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,i){let r,n,s,a,o,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),n=this.params.maximumSequenceNumbersToCollect):n=h,a=Date.now(),this.nthSequenceNumber(t,n))).next(h=>(r=h,o=Date.now(),this.removeTargets(t,r,i))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(t,r))).next(h=>(c=Date.now(),S0()<=Ki.DEBUG&&Pt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${n} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:s,documentsRemoved:h})))}}function cwe(e,t){return new lwe(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uwe{constructor(){this.changes=new Vm(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,va.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?it.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hwe{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dwe{constructor(t,i,r,n){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=n}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next(n=>(r=n,this.remoteDocumentCache.getEntry(t,i))).next(n=>(r!==null&&Lx(r.mutation,n,Kl.empty(),Wr.now()),n))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.getLocalViewOfDocuments(t,r,ji()).next(()=>r))}getLocalViewOfDocuments(t,i,r=ji()){const n=Zp();return this.populateOverlays(t,n,i).next(()=>this.computeViews(t,i,n,r).next(s=>{let a=lx();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,i){const r=Zp();return this.populateOverlays(t,r,i).next(()=>this.computeViews(t,i,r,ji()))}populateOverlays(t,i,r){const n=[];return r.forEach(s=>{i.has(s)||n.push(s)}),this.documentOverlayCache.getOverlays(t,n).next(s=>{s.forEach((a,o)=>{i.set(a,o)})})}computeViews(t,i,r,n){let s=qh();const a=Ox(),o=function(){return Ox()}();return i.forEach((l,c)=>{const u=r.get(c.key);n.has(c.key)&&(u===void 0||u.mutation instanceof Um)?s=s.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),Lx(u.mutation,c,u.mutation.getFieldMask(),Wr.now())):a.set(c.key,Kl.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,u)=>a.set(c,u)),i.forEach((c,u)=>{var h;return o.set(c,new hwe(u,(h=a.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(t,i){const r=Ox();let n=new ln((a,o)=>a-o),s=ji();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=i.get(l);if(c===null)return;let u=r.get(l)||Kl.empty();u=o.applyToLocalView(c,u),r.set(l,u);const h=(n.get(o.batchId)||ji()).add(l);n=n.insert(o.batchId,h)})}).next(()=>{const a=[],o=n.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,h=uJ();u.forEach(f=>{if(!s.has(f)){const m=gJ(i.get(f),r.get(f));m!==null&&h.set(f,m),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(t,c,h))}return it.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,i,r,n){return function(a){return Zt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):pbe(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,n):this.getDocumentsMatchingCollectionQuery(t,i,r,n)}getNextDocuments(t,i,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,n).next(s=>{const a=n-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,n-s.size):it.resolve(Zp());let o=vb,l=s;return a.next(c=>it.forEach(c,(u,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(u)?it.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,ji())).next(u=>({batchId:o,changes:cJ(u)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new Zt(i)).next(r=>{let n=lx();return r.isFoundDocument()&&(n=n.insert(r.key,r)),n})}getDocumentsMatchingCollectionGroupQuery(t,i,r,n){const s=i.collectionGroup;let a=lx();return this.indexManager.getCollectionParents(t,s).next(o=>it.forEach(o,l=>{const c=function(h,f){return new v3(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(i,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,r,n).next(u=>{u.forEach((h,f)=>{a=a.insert(h,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,i,r,n){let s;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,s,n))).next(a=>{s.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,va.newInvalidDocument(u)))});let o=lx();return a.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Lx(u.mutation,c,Kl.empty(),Wr.now()),x3(i,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fwe{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,i){return it.resolve(this.Br.get(i))}saveBundleMetadata(t,i){return this.Br.set(i.id,function(n){return{id:n.id,version:n.version,createTime:mu(n.createTime)}}(i)),it.resolve()}getNamedQuery(t,i){return it.resolve(this.Lr.get(i))}saveNamedQuery(t,i){return this.Lr.set(i.name,function(n){return{name:n.name,query:iwe(n.bundledQuery),readTime:mu(n.readTime)}}(i)),it.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pwe{constructor(){this.overlays=new ln(Zt.comparator),this.kr=new Map}getOverlay(t,i){return it.resolve(this.overlays.get(i))}getOverlays(t,i){const r=Zp();return it.forEach(i,n=>this.getOverlay(t,n).next(s=>{s!==null&&r.set(n,s)})).next(()=>r)}saveOverlays(t,i,r){return r.forEach((n,s)=>{this.wt(t,i,s)}),it.resolve()}removeOverlaysForBatchId(t,i,r){const n=this.kr.get(r);return n!==void 0&&(n.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),it.resolve()}getOverlaysForCollection(t,i,r){const n=Zp(),s=i.length+1,a=new Zt(i.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!i.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&n.set(l.getKey(),l)}return it.resolve(n)}getOverlaysForCollectionGroup(t,i,r,n){let s=new ln((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===i&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Zp(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Zp(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=n)););return it.resolve(o)}wt(t,i,r){const n=this.overlays.get(r.key);if(n!==null){const a=this.kr.get(n.largestBatchId).delete(r.key);this.kr.set(n.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Obe(i,r));let s=this.kr.get(i);s===void 0&&(s=ji(),this.kr.set(i,s)),this.kr.set(i,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mwe{constructor(){this.sessionToken=aa.EMPTY_BYTE_STRING}getSessionToken(t){return it.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,it.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.qr=new cs(Ss.Qr),this.$r=new cs(Ss.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,i){const r=new Ss(t,i);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,i){t.forEach(r=>this.addReference(r,i))}removeReference(t,i){this.Wr(new Ss(t,i))}Gr(t,i){t.forEach(r=>this.removeReference(r,i))}zr(t){const i=new Zt(new Gr([])),r=new Ss(i,t),n=new Ss(i,t+1),s=[];return this.$r.forEachInRange([r,n],a=>{this.Wr(a),s.push(a.key)}),s}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const i=new Zt(new Gr([])),r=new Ss(i,t),n=new Ss(i,t+1);let s=ji();return this.$r.forEachInRange([r,n],a=>{s=s.add(a.key)}),s}containsKey(t){const i=new Ss(t,0),r=this.qr.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Ss{constructor(t,i){this.key=t,this.Hr=i}static Qr(t,i){return Zt.comparator(t.key,i.key)||Mi(t.Hr,i.Hr)}static Ur(t,i){return Mi(t.Hr,i.Hr)||Zt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gwe{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.er=1,this.Yr=new cs(Ss.Qr)}checkEmpty(t){return it.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,n){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Rbe(s,i,r,n);this.mutationQueue.push(a);for(const o of n)this.Yr=this.Yr.add(new Ss(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return it.resolve(a)}lookupMutationBatch(t,i){return it.resolve(this.Zr(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,n=this.Xr(r),s=n<0?0:n;return it.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(this.mutationQueue.length===0?xL:this.er-1)}getAllMutationBatches(t){return it.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Ss(i,0),n=new Ss(i,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,n],a=>{const o=this.Zr(a.Hr);s.push(o)}),it.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new cs(Mi);return i.forEach(n=>{const s=new Ss(n,0),a=new Ss(n,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,a],o=>{r=r.add(o.Hr)})}),it.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,n=r.length+1;let s=r;Zt.isDocumentKey(s)||(s=s.child(""));const a=new Ss(new Zt(s),0);let o=new cs(Mi);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===n&&(o=o.add(l.Hr)),!0)},a),it.resolve(this.ei(o))}ei(t){const i=[];return t.forEach(r=>{const n=this.Zr(r);n!==null&&i.push(n)}),i}removeMutationBatch(t,i){pr(this.ti(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return it.forEach(i.mutations,n=>{const s=new Ss(n.key,i.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,n.key)}).next(()=>{this.Yr=r})}rr(t){}containsKey(t,i){const r=new Ss(i,0),n=this.Yr.firstAfterOrEqual(r);return it.resolve(i.isEqual(n&&n.key))}performConsistencyCheck(t){return this.mutationQueue.length,it.resolve()}ti(t,i){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const i=this.Xr(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vwe{constructor(t){this.ni=t,this.docs=function(){return new ln(Zt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,n=this.docs.get(r),s=n?n.size:0,a=this.ni(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return it.resolve(r?r.document.mutableCopy():va.newInvalidDocument(i))}getEntries(t,i){let r=qh();return i.forEach(n=>{const s=this.docs.get(n);r=r.insert(n,s?s.document.mutableCopy():va.newInvalidDocument(n))}),it.resolve(r)}getDocumentsMatchingQuery(t,i,r,n){let s=qh();const a=i.path,o=new Zt(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Wxe(Gxe(u),r)<=0||(n.has(u.key)||x3(i,u))&&(s=s.insert(u.key,u.mutableCopy()))}return it.resolve(s)}getAllFromCollectionGroup(t,i,r,n){oi(9500)}ri(t,i){return it.forEach(this.docs,r=>i(r))}newChangeBuffer(t){return new ywe(this)}getSize(t){return it.resolve(this.size)}}class ywe extends uwe{constructor(t){super(),this.Or=t}applyChanges(t){const i=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?i.push(this.Or.addEntry(t,n)):this.Or.removeEntry(r)}),it.waitFor(i)}getFromCache(t,i){return this.Or.getEntry(t,i)}getAllFromCache(t,i){return this.Or.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xwe{constructor(t){this.persistence=t,this.ii=new Vm(i=>SL(i),_L),this.lastRemoteSnapshotVersion=gi.min(),this.highestTargetId=0,this.si=0,this.oi=new PL,this.targetCount=0,this._i=Sv.ar()}forEachTarget(t,i){return this.ii.forEach((r,n)=>i(n)),it.resolve()}getLastRemoteSnapshotVersion(t){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return it.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.si&&(this.si=i),it.resolve()}hr(t){this.ii.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this._i=new Sv(i),this.highestTargetId=i),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,i){return this.hr(i),this.targetCount+=1,it.resolve()}updateTargetData(t,i){return this.hr(i),it.resolve()}removeTargetData(t,i){return this.ii.delete(i.target),this.oi.zr(i.targetId),this.targetCount-=1,it.resolve()}removeTargets(t,i,r){let n=0;const s=[];return this.ii.forEach((a,o)=>{o.sequenceNumber<=i&&r.get(o.targetId)===null&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),n++)}),it.waitFor(s).next(()=>n)}getTargetCount(t){return it.resolve(this.targetCount)}getTargetData(t,i){const r=this.ii.get(i)||null;return it.resolve(r)}addMatchingKeys(t,i,r){return this.oi.Kr(i,r),it.resolve()}removeMatchingKeys(t,i,r){this.oi.Gr(i,r);const n=this.persistence.referenceDelegate,s=[];return n&&i.forEach(a=>{s.push(n.markPotentiallyOrphaned(t,a))}),it.waitFor(s)}removeMatchingKeysForTargetId(t,i){return this.oi.zr(i),it.resolve()}getMatchingKeysForTargetId(t,i){const r=this.oi.Jr(i);return it.resolve(r)}containsKey(t,i){return it.resolve(this.oi.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DJ{constructor(t,i){this.ai={},this.overlays={},this.ui=new p3(0),this.ci=!1,this.ci=!0,this.li=new mwe,this.referenceDelegate=t(this),this.hi=new xwe(this),this.indexManager=new rwe,this.remoteDocumentCache=function(n){return new vwe(n)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new twe(i),this.Ti=new fwe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new pwe,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ai[t.toKey()];return r||(r=new gwe(i,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,i,r){Pt("MemoryPersistence","Starting transaction:",t);const n=new bwe(this.ui.next());return this.referenceDelegate.Ii(),r(n).next(s=>this.referenceDelegate.di(n).next(()=>s)).toPromise().then(s=>(n.raiseOnCommittedEvent(),s))}Ei(t,i){return it.or(Object.values(this.ai).map(r=>()=>r.containsKey(t,i)))}}class bwe extends Xxe{constructor(t){super(),this.currentSequenceNumber=t}}class DL{constructor(t){this.persistence=t,this.Ai=new PL,this.Ri=null}static Vi(t){return new DL(t)}get mi(){if(this.Ri)return this.Ri;throw oi(60996)}addReference(t,i,r){return this.Ai.addReference(r,i),this.mi.delete(r.toString()),it.resolve()}removeReference(t,i,r){return this.Ai.removeReference(r,i),this.mi.add(r.toString()),it.resolve()}markPotentiallyOrphaned(t,i){return this.mi.add(i.toString()),it.resolve()}removeTarget(t,i){this.Ai.zr(i.targetId).forEach(n=>this.mi.add(n.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next(n=>{n.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(t,i))}Ii(){this.Ri=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.mi,r=>{const n=Zt.fromPath(r);return this.fi(t,n).next(s=>{s||i.removeEntry(n,gi.min())})}).next(()=>(this.Ri=null,i.apply(t)))}updateLimboDocument(t,i){return this.fi(t,i).next(r=>{r?this.mi.delete(i.toString()):this.mi.add(i.toString())})}Pi(t){return 0}fi(t,i){return it.or([()=>it.resolve(this.Ai.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ei(t,i)])}}class _A{constructor(t,i){this.persistence=t,this.gi=new Vm(r=>Kxe(r.path),(r,n)=>r.isEqual(n)),this.garbageCollector=cwe(this,i)}static Vi(t,i){return new _A(t,i)}Ii(){}di(t){return it.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}mr(t){const i=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>i.next(n=>r+n))}yr(t){let i=0;return this.gr(t,r=>{i++}).next(()=>i)}gr(t,i){return it.forEach(this.gi,(r,n)=>this.Sr(t,r,n).next(s=>s?it.resolve():i(n)))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const n=this.persistence.getRemoteDocumentCache(),s=n.newChangeBuffer();return n.ri(t,a=>this.Sr(t,a,i).next(o=>{o||(r++,s.removeEntry(a,gi.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,i){return this.gi.set(i,t.currentSequenceNumber),it.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.gi.set(r,t.currentSequenceNumber),it.resolve()}removeReference(t,i,r){return this.gi.set(r,t.currentSequenceNumber),it.resolve()}updateLimboDocument(t,i){return this.gi.set(i,t.currentSequenceNumber),it.resolve()}Pi(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=PE(t.data.value)),i}Sr(t,i,r){return it.or([()=>this.persistence.Ei(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const n=this.gi.get(i);return it.resolve(n!==void 0&&n>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(t,i,r,n){this.targetId=t,this.fromCache=i,this.Is=r,this.ds=n}static Es(t,i){let r=ji(),n=ji();for(const s of i.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:n=n.add(s.doc.key)}return new IL(t,i.fromCache,r,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wwe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Swe{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return x1e()?8:Yxe(v1e())>0?6:4}()}initialize(t,i){this.gs=t,this.indexManager=i,this.As=!0}getDocumentsMatchingQuery(t,i,r,n){const s={result:null};return this.ps(t,i).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ys(t,i,n,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new wwe;return this.ws(t,i,a).next(o=>{if(s.result=o,this.Rs)return this.Ss(t,i,a,o.size)})}).next(()=>s.result)}Ss(t,i,r,n){return r.documentReadCount<this.Vs?(S0()<=Ki.DEBUG&&Pt("QueryEngine","SDK will not create cache indexes for query:",_0(i),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),it.resolve()):(S0()<=Ki.DEBUG&&Pt("QueryEngine","Query:",_0(i),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.fs*n?(S0()<=Ki.DEBUG&&Pt("QueryEngine","The SDK decides to create cache indexes for query:",_0(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,pu(i))):it.resolve())}ps(t,i){if(vU(i))return it.resolve(null);let r=pu(i);return this.indexManager.getIndexType(t,r).next(n=>n===0?null:(i.limit!==null&&n===1&&(i=jI(i,null,"F"),r=pu(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const a=ji(...s);return this.gs.getDocuments(t,a).next(o=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.bs(i,o);return this.Ds(i,c,a,l.readTime)?this.ps(t,jI(i,null,"F")):this.vs(t,c,i,l)}))})))}ys(t,i,r,n){return vU(i)||n.isEqual(gi.min())?it.resolve(null):this.gs.getDocuments(t,r).next(s=>{const a=this.bs(i,s);return this.Ds(i,a,r,n)?it.resolve(null):(S0()<=Ki.DEBUG&&Pt("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),_0(i)),this.vs(t,a,i,Hxe(n,vb)).next(o=>o))})}bs(t,i){let r=new cs(oJ(t));return i.forEach((n,s)=>{x3(t,s)&&(r=r.add(s))}),r}Ds(t,i,r,n){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const s=t.limitType==="F"?i.last():i.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(n)>0)}ws(t,i,r){return S0()<=Ki.DEBUG&&Pt("QueryEngine","Using full collection scan to execute query:",_0(i)),this.gs.getDocumentsMatchingQuery(t,i,Pf.min(),r)}vs(t,i,r,n){return this.gs.getDocumentsMatchingQuery(t,r,n).next(s=>(i.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL="LocalStore",_we=3e8;class Ewe{constructor(t,i,r,n){this.persistence=t,this.Cs=i,this.serializer=n,this.Fs=new ln(Mi),this.Ms=new Vm(s=>SL(s),_L),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new dwe(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.Fs))}}function Awe(e,t,i,r){return new Ewe(e,t,i,r)}async function IJ(e,t){const i=xi(e);return await i.persistence.runTransaction("Handle user change","readonly",r=>{let n;return i.mutationQueue.getAllMutationBatches(r).next(s=>(n=s,i.Ns(t),i.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=ji();for(const c of n){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return i.localDocuments.getDocuments(r,l).next(c=>({Bs:c,removedBatchIds:a,addedBatchIds:o}))})})}function Twe(e,t){const i=xi(e);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const n=t.batch.keys(),s=i.Os.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const h=c.batch,f=h.keys();let m=it.resolve();return f.forEach(g=>{m=m.next(()=>u.getEntry(l,g)).next(v=>{const x=c.docVersions.get(g);pr(x!==null,48541),v.version.compareTo(x)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(i,r,t,s).next(()=>s.apply(r)).next(()=>i.mutationQueue.performConsistencyCheck(r)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(r,n,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=ji();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(t))).next(()=>i.localDocuments.getDocuments(r,n))})}function RJ(e){const t=xi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.hi.getLastRemoteSnapshotVersion(i))}function Cwe(e,t){const i=xi(e),r=t.snapshotVersion;let n=i.Fs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=i.Os.newChangeBuffer({trackRemovals:!0});n=i.Fs;const o=[];t.targetChanges.forEach((u,h)=>{const f=n.get(h);if(!f)return;o.push(i.hi.removeMatchingKeys(s,u.removedDocuments,h).next(()=>i.hi.addMatchingKeys(s,u.addedDocuments,h)));let m=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(h)!==null?m=m.withResumeToken(aa.EMPTY_BYTE_STRING,gi.min()).withLastLimboFreeSnapshotVersion(gi.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),n=n.insert(h,m),function(v,x,b){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=_we?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,m,u)&&o.push(i.hi.updateTargetData(s,m))});let l=qh(),c=ji();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&o.push(i.persistence.referenceDelegate.updateLimboDocument(s,u))}),o.push(Mwe(s,a,t.documentUpdates).next(u=>{l=u.Ls,c=u.ks})),!r.isEqual(gi.min())){const u=i.hi.getLastRemoteSnapshotVersion(s).next(h=>i.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(u)}return it.waitFor(o).next(()=>a.apply(s)).next(()=>i.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(i.Fs=n,s))}function Mwe(e,t,i){let r=ji(),n=ji();return i.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let a=qh();return i.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(n=n.add(o)),l.isNoDocument()&&l.version.isEqual(gi.min())?(t.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),a=a.insert(o,l)):Pt(RL,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ls:a,ks:n}})}function Pwe(e,t){const i=xi(e);return i.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=xL),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Dwe(e,t){const i=xi(e);return i.persistence.runTransaction("Allocate target","readwrite",r=>{let n;return i.hi.getTargetData(r,t).next(s=>s?(n=s,it.resolve(n)):i.hi.allocateTargetId(r).next(a=>(n=new ef(t,a,"TargetPurposeListen",r.currentSequenceNumber),i.hi.addTargetData(r,n).next(()=>n))))}).then(r=>{const n=i.Fs.get(r.targetId);return(n===null||r.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(i.Fs=i.Fs.insert(r.targetId,r),i.Ms.set(t,r.targetId)),r})}async function HI(e,t,i){const r=xi(e),n=r.Fs.get(t),s=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,n))}catch(a){if(!Jv(a))throw a;Pt(RL,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(n.target)}function DU(e,t,i){const r=xi(e);let n=gi.min(),s=ji();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const h=xi(l),f=h.Ms.get(u);return f!==void 0?it.resolve(h.Fs.get(f)):h.hi.getTargetData(c,u)}(r,a,pu(t)).next(o=>{if(o)return n=o.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,t,i?n:gi.min(),i?s:ji())).next(o=>(Iwe(r,gbe(t),o),{documents:o,qs:s})))}function Iwe(e,t,i){let r=e.xs.get(t)||gi.min();i.forEach((n,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.xs.set(t,r)}class IU{constructor(){this.activeTargetIds=Sbe()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Rwe{constructor(){this.Fo=new IU,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,i,r){this.Mo[t]=i}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new IU,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Owe{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU="ConnectivityMonitor";class OU{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Pt(RU,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){Pt(RU,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PS=null;function GI(){return PS===null?PS=function(){return 268435456+Math.round(2147483648*Math.random())}():PS++,"0x"+PS.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="RestConnection",Lwe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kwe{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.$o=i+"://"+t.host,this.Uo=`projects/${r}/databases/${n}`,this.Ko=this.databaseId.database===vA?`project_id=${r}`:`project_id=${r}&database_id=${n}`}Wo(t,i,r,n,s){const a=GI(),o=this.Go(t,i.toUriEncodedString());Pt(ZM,`Sending RPC '${t}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,n,s);const{host:c}=new URL(o),u=uw(c);return this.jo(t,o,l,r,u).then(h=>(Pt(ZM,`Received RPC '${t}' ${a}: `,h),h),h=>{throw Mf(ZM,`RPC '${t}' ${a} failed with error: `,h,"url: ",o,"request:",r),h})}Jo(t,i,r,n,s,a){return this.Wo(t,i,r,n,s)}zo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zv}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((n,s)=>t[s]=n),r&&r.headers.forEach((n,s)=>t[s]=n)}Go(t,i){const r=Lwe[t];return`${this.$o}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zwe{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="WebChannelConnection";class Bwe extends kwe{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,i,r,n,s){const a=GI();return new Promise((o,l)=>{const c=new L$;c.setWithCredentials(!0),c.listenOnce(k$.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ME.NO_ERROR:const h=c.getResponseJson();Pt(da,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(h)),o(h);break;case ME.TIMEOUT:Pt(da,`RPC '${t}' ${a} timed out`),l(new Nt(at.DEADLINE_EXCEEDED,"Request time out"));break;case ME.HTTP_ERROR:const f=c.getStatus();if(Pt(da,`RPC '${t}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const v=function(b){const S=b.toLowerCase().replace(/_/g,"-");return Object.values(at).indexOf(S)>=0?S:at.UNKNOWN}(g.status);l(new Nt(v,g.message))}else l(new Nt(at.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Nt(at.UNAVAILABLE,"Connection failed."));break;default:oi(9055,{c_:t,streamId:a,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{Pt(da,`RPC '${t}' ${a} completed.`)}});const u=JSON.stringify(n);Pt(da,`RPC '${t}' ${a} sending request:`,n),c.send(i,"POST",u,r,15)})}P_(t,i,r){const n=GI(),s=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=j$(),o=B$(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,i,r),l.encodeInitMessageHeaders=!0;const u=s.join("");Pt(da,`Creating RPC '${t}' stream ${n}: ${u}`,l);const h=a.createWebChannel(u,l);this.T_(h);let f=!1,m=!1;const g=new zwe({Ho:x=>{m?Pt(da,`Not sending because RPC '${t}' stream ${n} is closed:`,x):(f||(Pt(da,`Opening RPC '${t}' stream ${n} transport.`),h.open(),f=!0),Pt(da,`RPC '${t}' stream ${n} sending:`,x),h.send(x))},Yo:()=>h.close()}),v=(x,b,S)=>{x.listen(b,_=>{try{S(_)}catch(A){setTimeout(()=>{throw A},0)}})};return v(h,ox.EventType.OPEN,()=>{m||(Pt(da,`RPC '${t}' stream ${n} transport opened.`),g.s_())}),v(h,ox.EventType.CLOSE,()=>{m||(m=!0,Pt(da,`RPC '${t}' stream ${n} transport closed`),g.__(),this.I_(h))}),v(h,ox.EventType.ERROR,x=>{m||(m=!0,Mf(da,`RPC '${t}' stream ${n} transport errored. Name:`,x.name,"Message:",x.message),g.__(new Nt(at.UNAVAILABLE,"The operation could not be completed")))}),v(h,ox.EventType.MESSAGE,x=>{var b;if(!m){const S=x.data[0];pr(!!S,16349);const _=S,A=(_==null?void 0:_.error)||((b=_[0])===null||b===void 0?void 0:b.error);if(A){Pt(da,`RPC '${t}' stream ${n} received error:`,A);const M=A.status;let C=function(R){const O=zn[R];if(O!==void 0)return xJ(O)}(M),D=A.message;C===void 0&&(C=at.INTERNAL,D="Unknown error status: "+M+" with message "+A.message),m=!0,g.__(new Nt(C,D)),h.close()}else Pt(da,`RPC '${t}' stream ${n} received:`,S),g.a_(S)}}),v(o,z$.STAT_EVENT,x=>{x.stat===RI.PROXY?Pt(da,`RPC '${t}' stream ${n} detected buffering proxy`):x.stat===RI.NOPROXY&&Pt(da,`RPC '${t}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{g.o_()},0),g}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(i=>i===t)}}function $M(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(e){return new Ube(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OJ{constructor(t,i,r=1e3,n=1.5,s=6e4){this.Fi=t,this.timerId=i,this.d_=r,this.E_=n,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const i=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),n=Math.max(0,i-r);n>0&&Pt("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.R_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,n,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU="PersistentStream";class LJ{constructor(t,i,r,n,s,a,o,l){this.Fi=t,this.w_=r,this.S_=n,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new OJ(t,i)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():i&&i.code===at.RESOURCE_EXHAUSTED?(Wh(i.toString()),Wh("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):i&&i.code===at.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(i)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),i=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,n])=>{this.b_===i&&this.W_(r,n)},r=>{t(()=>{const n=new Nt(at.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(n)})})}W_(t,i){const r=this.K_(this.b_);this.stream=this.z_(t,i),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(n=>{r(()=>this.G_(n))}),this.stream.onMessage(n=>{r(()=>++this.C_==1?this.j_(n):this.onNext(n))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return Pt(LU,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return i=>{this.Fi.enqueueAndForget(()=>this.b_===t?i():(Pt(LU,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jwe extends LJ{constructor(t,i,r,n,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,n,a),this.serializer=s}z_(t,i){return this.connection.P_("Listen",t,i)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const i=Gbe(this.serializer,t),r=function(s){if(!("targetChange"in s))return gi.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?gi.min():a.readTime?mu(a.readTime):gi.min()}(t);return this.listener.J_(i,r)}H_(t){const i={};i.database=FI(this.serializer),i.addTarget=function(s,a){let o;const l=a.target;if(o=BI(l)?{documents:Xbe(s,l)}:{query:Ybe(s,l).Vt},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=SJ(s,a.resumeToken);const c=NI(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(gi.min())>0){o.readTime=SA(s,a.snapshotVersion.toTimestamp());const c=NI(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,t);const r=Kbe(this.serializer,t);r&&(i.labels=r),this.k_(i)}Y_(t){const i={};i.database=FI(this.serializer),i.removeTarget=t,this.k_(i)}}class Nwe extends LJ{constructor(t,i,r,n,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,n,a),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,i){return this.connection.P_("Write",t,i)}j_(t){return pr(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,pr(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){pr(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const i=qbe(t.writeResults,t.commitTime),r=mu(t.commitTime);return this.listener.ta(r,i)}na(){const t={};t.database=FI(this.serializer),this.k_(t)}X_(t){const i={streamToken:this.lastStreamToken,writes:t.map(r=>Wbe(this.serializer,r))};this.k_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vwe{}class Uwe extends Vwe{constructor(t,i,r,n){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=n,this.ra=!1}ia(){if(this.ra)throw new Nt(at.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,i,r,n){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(t,VI(i,r),n,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===at.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Nt(at.UNKNOWN,s.toString())})}Jo(t,i,r,n,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Jo(t,VI(i,r),n,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===at.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Nt(at.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Fwe{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Wh(i),this._a=!1):Pt("OnlineStateTracker",i)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="RemoteStore";class Hwe{constructor(t,i,r,n,s){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(a=>{r.enqueueAndForget(async()=>{Fm(this)&&(Pt(wm,"Restarting streams for network reachability change."),await async function(l){const c=xi(l);c.Ia.add(4),await pw(c),c.Aa.set("Unknown"),c.Ia.delete(4),await E3(c)}(this))})}),this.Aa=new Fwe(r,n)}}async function E3(e){if(Fm(e))for(const t of e.da)await t(!0)}async function pw(e){for(const t of e.da)await t(!1)}function kJ(e,t){const i=xi(e);i.Ta.has(t.targetId)||(i.Ta.set(t.targetId,t),zL(i)?kL(i):ey(i).x_()&&LL(i,t))}function OL(e,t){const i=xi(e),r=ey(i);i.Ta.delete(t),r.x_()&&zJ(i,t),i.Ta.size===0&&(r.x_()?r.B_():Fm(i)&&i.Aa.set("Unknown"))}function LL(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(gi.min())>0){const i=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}ey(e).H_(t)}function zJ(e,t){e.Ra.$e(t),ey(e).Y_(t)}function kL(e){e.Ra=new Bbe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),ey(e).start(),e.Aa.aa()}function zL(e){return Fm(e)&&!ey(e).M_()&&e.Ta.size>0}function Fm(e){return xi(e).Ia.size===0}function BJ(e){e.Ra=void 0}async function Gwe(e){e.Aa.set("Online")}async function Wwe(e){e.Ta.forEach((t,i)=>{LL(e,t)})}async function qwe(e,t){BJ(e),zL(e)?(e.Aa.la(t),kL(e)):e.Aa.set("Unknown")}async function Xwe(e,t,i){if(e.Aa.set("Online"),t instanceof wJ&&t.state===2&&t.cause)try{await async function(n,s){const a=s.cause;for(const o of s.targetIds)n.Ta.has(o)&&(await n.remoteSyncer.rejectListen(o,a),n.Ta.delete(o),n.Ra.removeTarget(o))}(e,t)}catch(r){Pt(wm,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await EA(e,r)}else if(t instanceof RE?e.Ra.Ye(t):t instanceof bJ?e.Ra.it(t):e.Ra.et(t),!i.isEqual(gi.min()))try{const r=await RJ(e.localStore);i.compareTo(r)>=0&&await function(s,a){const o=s.Ra.Pt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Ta.get(c);u&&s.Ta.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=s.Ta.get(l);if(!u)return;s.Ta.set(l,u.withResumeToken(aa.EMPTY_BYTE_STRING,u.snapshotVersion)),zJ(s,l);const h=new ef(u.target,l,c,u.sequenceNumber);LL(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(e,i)}catch(r){Pt(wm,"Failed to raise snapshot:",r),await EA(e,r)}}async function EA(e,t,i){if(!Jv(t))throw t;e.Ia.add(1),await pw(e),e.Aa.set("Offline"),i||(i=()=>RJ(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Pt(wm,"Retrying IndexedDB access"),await i(),e.Ia.delete(1),await E3(e)})}function jJ(e,t){return t().catch(i=>EA(e,i,t))}async function A3(e){const t=xi(e),i=Of(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:xL;for(;Ywe(t);)try{const n=await Pwe(t.localStore,r);if(n===null){t.Pa.length===0&&i.B_();break}r=n.batchId,Qwe(t,n)}catch(n){await EA(t,n)}NJ(t)&&VJ(t)}function Ywe(e){return Fm(e)&&e.Pa.length<10}function Qwe(e,t){e.Pa.push(t);const i=Of(e);i.x_()&&i.Z_&&i.X_(t.mutations)}function NJ(e){return Fm(e)&&!Of(e).M_()&&e.Pa.length>0}function VJ(e){Of(e).start()}async function Kwe(e){Of(e).na()}async function Zwe(e){const t=Of(e);for(const i of e.Pa)t.X_(i.mutations)}async function $we(e,t,i){const r=e.Pa.shift(),n=TL.from(r,t,i);await jJ(e,()=>e.remoteSyncer.applySuccessfulWrite(n)),await A3(e)}async function Jwe(e,t){t&&Of(e).Z_&&await async function(r,n){if(function(a){return kbe(a)&&a!==at.ABORTED}(n.code)){const s=r.Pa.shift();Of(r).N_(),await jJ(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,n)),await A3(r)}}(e,t),NJ(e)&&VJ(e)}async function kU(e,t){const i=xi(e);i.asyncQueue.verifyOperationInProgress(),Pt(wm,"RemoteStore received new credentials");const r=Fm(i);i.Ia.add(3),await pw(i),r&&i.Aa.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ia.delete(3),await E3(i)}async function e2e(e,t){const i=xi(e);t?(i.Ia.delete(2),await E3(i)):t||(i.Ia.add(2),await pw(i),i.Aa.set("Unknown"))}function ey(e){return e.Va||(e.Va=function(i,r,n){const s=xi(i);return s.ia(),new jwe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{Zo:Gwe.bind(null,e),e_:Wwe.bind(null,e),n_:qwe.bind(null,e),J_:Xwe.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),zL(e)?kL(e):e.Aa.set("Unknown")):(await e.Va.stop(),BJ(e))})),e.Va}function Of(e){return e.ma||(e.ma=function(i,r,n){const s=xi(i);return s.ia(),new Nwe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:Kwe.bind(null,e),n_:Jwe.bind(null,e),ea:Zwe.bind(null,e),ta:$we.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await A3(e)):(await e.ma.stop(),e.Pa.length>0&&(Pt(wm,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(t,i,r,n,s){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=n,this.removalCallback=s,this.deferred=new vf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,n,s){const a=Date.now()+r,o=new BL(t,i,a,n,s);return o.start(r),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Nt(at.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jL(e,t){if(Wh("AsyncQueue",`${t}: ${e}`),Jv(e))return new Nt(at.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{static emptySet(t){return new Q0(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||Zt.comparator(i.key,r.key):(i,r)=>Zt.comparator(i.key,r.key),this.keyedMap=lx(),this.sortedSet=new ln(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,r)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Q0)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const n=i.getNext().key,s=r.getNext().key;if(!n.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new Q0;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(){this.fa=new ln(Zt.comparator)}track(t){const i=t.doc.key,r=this.fa.get(i);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(i,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(i):t.type===1&&r.type===2?this.fa=this.fa.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(i,{type:2,doc:t.doc}):oi(63341,{At:t,ga:r}):this.fa=this.fa.insert(i,t)}pa(){const t=[];return this.fa.inorderTraversal((i,r)=>{t.push(r)}),t}}class _v{constructor(t,i,r,n,s,a,o,l,c){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,i,r,n,s){const a=[];return i.forEach(o=>{a.push({type:0,doc:o})}),new _v(t,i,Q0.emptySet(i),a,r,n,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&y3(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let n=0;n<i.length;n++)if(i[n].type!==r[n].type||!i[n].doc.isEqual(r[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2e{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class i2e{constructor(){this.queries=BU(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(i,r){const n=xi(i),s=n.queries;n.queries=BU(),s.forEach((a,o)=>{for(const l of o.wa)l.onError(r)})})(this,new Nt(at.ABORTED,"Firestore shutting down"))}}function BU(){return new Vm(e=>aJ(e),y3)}async function r2e(e,t){const i=xi(e);let r=3;const n=t.query;let s=i.queries.get(n);s?!s.Sa()&&t.ba()&&(r=2):(s=new t2e,r=t.ba()?0:1);try{switch(r){case 0:s.ya=await i.onListen(n,!0);break;case 1:s.ya=await i.onListen(n,!1);break;case 2:await i.onFirstRemoteStoreListen(n)}}catch(a){const o=jL(a,`Initialization of query '${_0(t.query)}' failed`);return void t.onError(o)}i.queries.set(n,s),s.wa.push(t),t.va(i.onlineState),s.ya&&t.Ca(s.ya)&&NL(i)}async function n2e(e,t){const i=xi(e),r=t.query;let n=3;const s=i.queries.get(r);if(s){const a=s.wa.indexOf(t);a>=0&&(s.wa.splice(a,1),s.wa.length===0?n=t.ba()?0:1:!s.Sa()&&t.ba()&&(n=2))}switch(n){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function s2e(e,t){const i=xi(e);let r=!1;for(const n of t){const s=n.query,a=i.queries.get(s);if(a){for(const o of a.wa)o.Ca(n)&&(r=!0);a.ya=n}}r&&NL(i)}function a2e(e,t,i){const r=xi(e),n=r.queries.get(t);if(n)for(const s of n.wa)s.onError(i);r.queries.delete(t)}function NL(e){e.Da.forEach(t=>{t.next()})}var WI,jU;(jU=WI||(WI={})).Fa="default",jU.Cache="cache";class o2e{constructor(t,i,r){this.query=t,this.Ma=i,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const n of t.docChanges)n.type!==3&&r.push(n);t=new _v(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),i=!0):this.Ba(t,this.onlineState)&&(this.La(t),i=!0),this.Oa=t,i}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let i=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),i=!0),i}Ba(t,i){if(!t.fromCache||!this.ba())return!0;const r=i!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const i=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}La(t){t=_v.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==WI.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UJ{constructor(t){this.key=t}}class FJ{constructor(t){this.key=t}}class l2e{constructor(t,i){this.query=t,this.Ha=i,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ji(),this.mutatedKeys=ji(),this.Xa=oJ(t),this.eu=new Q0(this.Xa)}get tu(){return this.Ha}nu(t,i){const r=i?i.ru:new zU,n=i?i.eu:this.eu;let s=i?i.mutatedKeys:this.mutatedKeys,a=n,o=!1;const l=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,c=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(t.inorderTraversal((u,h)=>{const f=n.get(u),m=x3(this.query,h)?h:null,g=!!f&&this.mutatedKeys.has(f.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;f&&m?f.data.isEqual(m.data)?g!==v&&(r.track({type:3,doc:m}),x=!0):this.iu(f,m)||(r.track({type:2,doc:m}),x=!0,(l&&this.Xa(m,l)>0||c&&this.Xa(m,c)<0)&&(o=!0)):!f&&m?(r.track({type:0,doc:m}),x=!0):f&&!m&&(r.track({type:1,doc:f}),x=!0,(l||c)&&(o=!0)),x&&(m?(a=a.add(m),s=v?s.add(u):s.delete(u)):(a=a.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{eu:a,ru:r,Ds:o,mutatedKeys:s}}iu(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,n){const s=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const a=t.ru.pa();a.sort((u,h)=>function(m,g){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oi(20277,{At:x})}};return v(m)-v(g)}(u.type,h.type)||this.Xa(u.doc,h.doc)),this.su(r),n=n!=null&&n;const o=i&&!n?this.ou():[],l=this.Za.size===0&&this.current&&!n?1:0,c=l!==this.Ya;return this.Ya=l,a.length!==0||c?{snapshot:new _v(this.query,t.eu,s,a,t.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new zU,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(i=>this.Ha=this.Ha.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ha=this.Ha.delete(i)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=ji(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const i=[];return t.forEach(r=>{this.Za.has(r)||i.push(new FJ(r))}),this.Za.forEach(r=>{t.has(r)||i.push(new UJ(r))}),i}uu(t){this.Ha=t.qs,this.Za=ji();const i=this.nu(t.documents);return this.applyChanges(i,!0)}cu(){return _v.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const VL="SyncEngine";class c2e{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class u2e{constructor(t){this.key=t,this.lu=!1}}class h2e{constructor(t,i,r,n,s,a){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=n,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Vm(o=>aJ(o),y3),this.Tu=new Map,this.Iu=new Set,this.du=new ln(Zt.comparator),this.Eu=new Map,this.Au=new PL,this.Ru={},this.Vu=new Map,this.mu=Sv.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function d2e(e,t,i=!0){const r=YJ(e);let n;const s=r.Pu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.cu()):n=await HJ(r,t,i,!0),n}async function f2e(e,t){const i=YJ(e);await HJ(i,t,!0,!1)}async function HJ(e,t,i,r){const n=await Dwe(e.localStore,pu(t)),s=n.targetId,a=e.sharedClientState.addLocalQueryTarget(s,i);let o;return r&&(o=await p2e(e,t,s,a==="current",n.resumeToken)),e.isPrimaryClient&&i&&kJ(e.remoteStore,n),o}async function p2e(e,t,i,r,n){e.gu=(h,f,m)=>async function(v,x,b,S){let _=x.view.nu(b);_.Ds&&(_=await DU(v.localStore,x.query,!1).then(({documents:D})=>x.view.nu(D,_)));const A=S&&S.targetChanges.get(x.targetId),M=S&&S.targetMismatches.get(x.targetId)!=null,C=x.view.applyChanges(_,v.isPrimaryClient,A,M);return VU(v,x.targetId,C._u),C.snapshot}(e,h,f,m);const s=await DU(e.localStore,t,!0),a=new l2e(t,s.qs),o=a.nu(s.documents),l=fw.createSynthesizedTargetChangeForCurrentChange(i,r&&e.onlineState!=="Offline",n),c=a.applyChanges(o,e.isPrimaryClient,l);VU(e,i,c._u);const u=new c2e(t,i,a);return e.Pu.set(t,u),e.Tu.has(i)?e.Tu.get(i).push(t):e.Tu.set(i,[t]),c.snapshot}async function m2e(e,t,i){const r=xi(e),n=r.Pu.get(t),s=r.Tu.get(n.targetId);if(s.length>1)return r.Tu.set(n.targetId,s.filter(a=>!y3(a,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await HI(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),i&&OL(r.remoteStore,n.targetId),qI(r,n.targetId)}).catch($v)):(qI(r,n.targetId),await HI(r.localStore,n.targetId,!0))}async function g2e(e,t){const i=xi(e),r=i.Pu.get(t),n=i.Tu.get(r.targetId);i.isPrimaryClient&&n.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),OL(i.remoteStore,r.targetId))}async function v2e(e,t,i){const r=E2e(e);try{const n=await function(a,o){const l=xi(a),c=Wr.now(),u=o.reduce((m,g)=>m.add(g.key),ji());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=qh(),v=ji();return l.Os.getEntries(m,u).next(x=>{g=x,g.forEach((b,S)=>{S.isValidDocument()||(v=v.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,g)).next(x=>{h=x;const b=[];for(const S of o){const _=Dbe(S,h.get(S.key).overlayedDocument);_!=null&&b.push(new Um(S.key,_,J$(_.value.mapValue),zh.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,b,o)}).next(x=>{f=x;const b=x.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,x.batchId,b)})}).then(()=>({batchId:f.batchId,changes:cJ(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(n.batchId),function(a,o,l){let c=a.Ru[a.currentUser.toKey()];c||(c=new ln(Mi)),c=c.insert(o,l),a.Ru[a.currentUser.toKey()]=c}(r,n.batchId,i),await mw(r,n.changes),await A3(r.remoteStore)}catch(n){const s=jL(n,"Failed to persist write");i.reject(s)}}async function GJ(e,t){const i=xi(e);try{const r=await Cwe(i.localStore,t);t.targetChanges.forEach((n,s)=>{const a=i.Eu.get(s);a&&(pr(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,22616),n.addedDocuments.size>0?a.lu=!0:n.modifiedDocuments.size>0?pr(a.lu,14607):n.removedDocuments.size>0&&(pr(a.lu,42227),a.lu=!1))}),await mw(i,r,t)}catch(r){await $v(r)}}function NU(e,t,i){const r=xi(e);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const n=[];r.Pu.forEach((s,a)=>{const o=a.view.va(t);o.snapshot&&n.push(o.snapshot)}),function(a,o){const l=xi(a);l.onlineState=o;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.wa)f.va(o)&&(c=!0)}),c&&NL(l)}(r.eventManager,t),n.length&&r.hu.J_(n),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function y2e(e,t,i){const r=xi(e);r.sharedClientState.updateQueryState(t,"rejected",i);const n=r.Eu.get(t),s=n&&n.key;if(s){let a=new ln(Zt.comparator);a=a.insert(s,va.newNoDocument(s,gi.min()));const o=ji().add(s),l=new S3(gi.min(),new Map,new ln(Mi),a,o);await GJ(r,l),r.du=r.du.remove(s),r.Eu.delete(t),UL(r)}else await HI(r.localStore,t,!1).then(()=>qI(r,t,i)).catch($v)}async function x2e(e,t){const i=xi(e),r=t.batch.batchId;try{const n=await Twe(i.localStore,t);qJ(i,r,null),WJ(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await mw(i,n)}catch(n){await $v(n)}}async function b2e(e,t,i){const r=xi(e);try{const n=await function(a,o){const l=xi(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(h=>(pr(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,t);qJ(r,t,i),WJ(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await mw(r,n)}catch(n){await $v(n)}}function WJ(e,t){(e.Vu.get(t)||[]).forEach(i=>{i.resolve()}),e.Vu.delete(t)}function qJ(e,t,i){const r=xi(e);let n=r.Ru[r.currentUser.toKey()];if(n){const s=n.get(t);s&&(i?s.reject(i):s.resolve(),n=n.remove(t)),r.Ru[r.currentUser.toKey()]=n}}function qI(e,t,i=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),i&&e.hu.pu(r,i);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(r=>{e.Au.containsKey(r)||XJ(e,r)})}function XJ(e,t){e.Iu.delete(t.path.canonicalString());const i=e.du.get(t);i!==null&&(OL(e.remoteStore,i),e.du=e.du.remove(t),e.Eu.delete(i),UL(e))}function VU(e,t,i){for(const r of i)r instanceof UJ?(e.Au.addReference(r.key,t),w2e(e,r)):r instanceof FJ?(Pt(VL,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||XJ(e,r.key)):oi(19791,{yu:r})}function w2e(e,t){const i=t.key,r=i.path.canonicalString();e.du.get(i)||e.Iu.has(r)||(Pt(VL,"New document in limbo: "+i),e.Iu.add(r),UL(e))}function UL(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const i=new Zt(Gr.fromString(t)),r=e.mu.next();e.Eu.set(r,new u2e(i)),e.du=e.du.insert(i,r),kJ(e.remoteStore,new ef(pu(EL(i.path)),r,"TargetPurposeLimboResolution",p3.ue))}}async function mw(e,t,i){const r=xi(e),n=[],s=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((o,l)=>{a.push(r.gu(l,t,i).then(c=>{var u;if((c||i)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=i==null?void 0:i.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){n.push(c);const h=IL.Es(l.targetId,c);s.push(h)}}))}),await Promise.all(a),r.hu.J_(n),await async function(l,c){const u=xi(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>it.forEach(c,f=>it.forEach(f.Is,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>it.forEach(f.ds,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Jv(h))throw h;Pt(RL,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=u.Fs.get(f),g=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(g);u.Fs=u.Fs.insert(f,v)}}}(r.localStore,s))}async function S2e(e,t){const i=xi(e);if(!i.currentUser.isEqual(t)){Pt(VL,"User change. New user:",t.toKey());const r=await IJ(i.localStore,t);i.currentUser=t,function(s,a){s.Vu.forEach(o=>{o.forEach(l=>{l.reject(new Nt(at.CANCELLED,a))})}),s.Vu.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await mw(i,r.Bs)}}function _2e(e,t){const i=xi(e),r=i.Eu.get(t);if(r&&r.lu)return ji().add(r.key);{let n=ji();const s=i.Tu.get(t);if(!s)return n;for(const a of s){const o=i.Pu.get(a);n=n.unionWith(o.view.tu)}return n}}function YJ(e){const t=xi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=GJ.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_2e.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=y2e.bind(null,t),t.hu.J_=s2e.bind(null,t.eventManager),t.hu.pu=a2e.bind(null,t.eventManager),t}function E2e(e){const t=xi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=x2e.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=b2e.bind(null,t),t}class AA{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=_3(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,i){return null}Fu(t,i){return null}vu(t){return Awe(this.persistence,new Swe,t.initialUser,this.serializer)}Du(t){return new DJ(DL.Vi,this.serializer)}bu(t){return new Rwe}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}AA.provider={build:()=>new AA};class A2e extends AA{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,i){pr(this.persistence.referenceDelegate instanceof _A,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new owe(r,t.asyncQueue,i)}Du(t){const i=this.cacheSizeBytes!==void 0?no.withCacheSize(this.cacheSizeBytes):no.DEFAULT;return new DJ(r=>_A.Vi(r,i),this.serializer)}}class XI{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>NU(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=S2e.bind(null,this.syncEngine),await e2e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new i2e}()}createDatastore(t){const i=_3(t.databaseInfo.databaseId),r=function(s){return new Bwe(s)}(t.databaseInfo);return function(s,a,o,l){return new Uwe(s,a,o,l)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,n,s,a,o){return new Hwe(r,n,s,a,o)}(this.localStore,this.datastore,t.asyncQueue,i=>NU(this.syncEngine,i,0),function(){return OU.C()?new OU:new Owe}())}createSyncEngine(t,i){return function(n,s,a,o,l,c,u){const h=new h2e(n,s,a,o,l,c);return u&&(h.fu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await async function(n){const s=xi(n);Pt(wm,"RemoteStore shutting down."),s.Ia.add(5),await pw(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}XI.provider={build:()=>new XI};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2e{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):Wh("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="FirestoreClient";class C2e{constructor(t,i,r,n,s){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=n,this.user=ga.UNAUTHENTICATED,this.clientId=vL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Pt(Lf,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Pt(Lf,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new vf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=jL(i,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function JM(e,t){e.asyncQueue.verifyOperationInProgress(),Pt(Lf,"Initializing OfflineComponentProvider");const i=e.configuration;await t.initialize(i);let r=i.initialUser;e.setCredentialChangeListener(async n=>{r.isEqual(n)||(await IJ(t.localStore,n),r=n)}),t.persistence.setDatabaseDeletedListener(()=>{Mf("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{Pt("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(n=>{Mf("Terminating Firestore due to IndexedDb database deletion failed",n)})}),e._offlineComponents=t}async function UU(e,t){e.asyncQueue.verifyOperationInProgress();const i=await M2e(e);Pt(Lf,"Initializing OnlineComponentProvider"),await t.initialize(i,e.configuration),e.setCredentialChangeListener(r=>kU(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,n)=>kU(t.remoteStore,n)),e._onlineComponents=t}async function M2e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Pt(Lf,"Using user provided OfflineComponentProvider");try{await JM(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(n){return n.name==="FirebaseError"?n.code===at.FAILED_PRECONDITION||n.code===at.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(i))throw i;Mf("Error using user provided cache. Falling back to memory cache: "+i),await JM(e,new AA)}}else Pt(Lf,"Using default OfflineComponentProvider"),await JM(e,new A2e(void 0));return e._offlineComponents}async function QJ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Pt(Lf,"Using user provided OnlineComponentProvider"),await UU(e,e._uninitializedComponentsProvider._online)):(Pt(Lf,"Using default OnlineComponentProvider"),await UU(e,new XI))),e._onlineComponents}function P2e(e){return QJ(e).then(t=>t.syncEngine)}async function D2e(e){const t=await QJ(e),i=t.eventManager;return i.onListen=d2e.bind(null,t.syncEngine),i.onUnlisten=m2e.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=f2e.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=g2e.bind(null,t.syncEngine),i}function I2e(e,t,i={}){const r=new vf;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const u=new T2e({next:f=>{u.Ou(),a.enqueueAndForget(()=>n2e(s,h));const m=f.docs.has(o);!m&&f.fromCache?c.reject(new Nt(at.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new Nt(at.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new o2e(EL(o.path),u,{includeMetadataChanges:!0,ka:!0});return r2e(s,h)}(await D2e(e),e.asyncQueue,t,i,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KJ(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZJ="firestore.googleapis.com",HU=!0;class GU{constructor(t){var i,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Nt(at.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZJ,this.ssl=HU}else this.host=t.host,this.ssl=(i=t.ssl)!==null&&i!==void 0?i:HU;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=PJ;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<swe)throw new Nt(at.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Fxe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KJ((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Nt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Nt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Nt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,n){return r.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class T3{constructor(t,i,r,n){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GU({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Nt(at.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Nt(at.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GU(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Oxe;switch(r.type){case"firstParty":return new Bxe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Nt(at.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const r=FU.get(i);r&&(Pt("ComponentProvider","Removing Datastore"),FU.delete(i),r.terminate())}(this),Promise.resolve()}}function R2e(e,t,i,r={}){var n;e=mA(e,T3);const s=uw(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${i}`;s&&(x$(`https://${l}`),w$("Firestore",!0)),a.host!==ZJ&&a.host!==l&&Mf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:r});if(!fA(c,o)&&(e._setSettings(c),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=ga.MOCK_USER;else{u=b$(r.mockUserToken,(n=e._app)===null||n===void 0?void 0:n.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Nt(at.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ga(f)}e._authCredentials=new Lxe(new V$(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new FL(this.firestore,t,this._query)}}class Ps{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yf(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ps(this.firestore,t,this._key)}toJSON(){return{type:Ps._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,r){if(hw(i,Ps._jsonSchema))return new Ps(t,r||null,new Zt(Gr.fromString(i.referencePath)))}}Ps._jsonSchemaVersion="firestore/documentReference/1.0",Ps._jsonSchema={type:Fn("string",Ps._jsonSchemaVersion),referencePath:Fn("string")};class yf extends FL{constructor(t,i,r){super(t,i,EL(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ps(this.firestore,null,new Zt(t))}withConverter(t){return new yf(this.firestore,t,this._path)}}function $J(e,t,...i){if(e=Cf(e),F$("collection","path",t),e instanceof T3){const r=Gr.fromString(t,...i);return nU(r),new yf(e,null,r)}{if(!(e instanceof Ps||e instanceof yf))throw new Nt(at.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Gr.fromString(t,...i));return nU(r),new yf(e.firestore,null,r)}}function Hm(e,t,...i){if(e=Cf(e),arguments.length===1&&(t=vL.newId()),F$("doc","path",t),e instanceof T3){const r=Gr.fromString(t,...i);return rU(r),new Ps(e,null,new Zt(r))}{if(!(e instanceof Ps||e instanceof yf))throw new Nt(at.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Gr.fromString(t,...i));return rU(r),new Ps(e.firestore,e instanceof yf?e.converter:null,new Zt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU="AsyncQueue";class qU{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new OJ(this,"async_queue_retry"),this.oc=()=>{const r=$M();r&&Pt(WU,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const i=$M();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const i=$M();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const i=new vf;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Jv(t))throw t;Pt(WU,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const i=this._c.then(()=>(this.nc=!0,t().catch(r=>{throw this.tc=r,this.nc=!1,Wh("INTERNAL UNHANDLED ERROR: ",XU(r)),r}).then(r=>(this.nc=!1,r))));return this._c=i,i}enqueueAfterDelay(t,i,r){this.ac(),this.sc.indexOf(t)>-1&&(i=0);const n=BL.createAndSchedule(this,t,i,r,s=>this.lc(s));return this.ec.push(n),n}ac(){this.tc&&oi(47125,{hc:XU(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const i of this.ec)if(i.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((i,r)=>i.targetTimeMs-r.targetTimeMs);for(const i of this.ec)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const i=this.ec.indexOf(t);this.ec.splice(i,1)}}function XU(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class HL extends T3{constructor(t,i,r,n){super(t,i,r,n),this.type="firestore",this._queue=new qU,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new qU(t),this._firestoreClient=void 0,await t}}}function O2e(e,t){const i=typeof e=="object"?e:D$(),r=typeof e=="string"?e:vA,n=T$(i,"firestore").getImmediate({identifier:r});if(!n._initialized){const s=v$("firestore");s&&R2e(n,...s)}return n}function JJ(e){if(e._terminated)throw new Nt(at.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||L2e(e),e._firestoreClient}function L2e(e){var t,i,r;const n=e._freezeSettings(),s=function(o,l,c,u){return new Jxe(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,KJ(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._componentsProvider||!((i=n.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((r=n.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),e._firestoreClient=new C2e(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gl(aa.fromBase64String(t))}catch(i){throw new Nt(at.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new gl(aa.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:gl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(hw(t,gl._jsonSchema))return gl.fromBase64String(t.bytes)}}gl._jsonSchemaVersion="firestore/bytes/1.0",gl._jsonSchema={type:Fn("string",gl._jsonSchemaVersion),bytes:Fn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new Nt(at.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $s(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new Nt(at.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new Nt(at.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Mi(this._lat,t._lat)||Mi(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gu._jsonSchemaVersion}}static fromJSON(t){if(hw(t,gu._jsonSchema))return new gu(t.latitude,t.longitude)}}gu._jsonSchemaVersion="firestore/geoPoint/1.0",gu._jsonSchema={type:Fn("string",gu._jsonSchemaVersion),latitude:Fn("number"),longitude:Fn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,n){if(r.length!==n.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==n[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:vu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(hw(t,vu._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(i=>typeof i=="number"))return new vu(t.vectorValues);throw new Nt(at.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vu._jsonSchemaVersion="firestore/vectorValue/1.0",vu._jsonSchema={type:Fn("string",vu._jsonSchemaVersion),vectorValues:Fn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2e=/^__.*__$/;class z2e{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new Um(t,this.data,this.fieldMask,i,this.fieldTransforms):new dw(t,this.data,i,this.fieldTransforms)}}function eee(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oi(40011,{Ec:e})}}class qL{constructor(t,i,r,n,s,a){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=n,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new qL(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),n=this.Rc({path:r,mc:!1});return n.fc(t),n}gc(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),n=this.Rc({path:r,mc:!1});return n.Ac(),n}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return TA(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(eee(this.Ec)&&k2e.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class B2e{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||_3(t)}Dc(t,i,r,n=!1){return new qL({Ec:t,methodName:i,bc:r,path:$s.emptyPath(),mc:!1,Sc:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function j2e(e){const t=e._freezeSettings(),i=_3(e._databaseId);return new B2e(e._databaseId,!!t.ignoreUndefinedProperties,i)}function N2e(e,t,i,r,n,s={}){const a=e.Dc(s.merge||s.mergeFields?2:0,t,i,n);nee("Data must be an object, but it was:",a,r);const o=iee(r,a);let l,c;if(s.merge)l=new Kl(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const f=V2e(t,h,i);if(!a.contains(f))throw new Nt(at.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);F2e(u,f)||u.push(f)}l=new Kl(u),c=a.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=a.fieldTransforms;return new z2e(new ml(o),l,c)}class XL extends WL{_toFieldTransform(t){return new Tbe(t.path,new wb)}isEqual(t){return t instanceof XL}}function tee(e,t){if(ree(e=Cf(e)))return nee("Unsupported field value:",t,e),iee(e,t);if(e instanceof WL)return function(r,n){if(!eee(n.Ec))throw n.wc(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(n);s&&n.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(r,n){const s=[];let a=0;for(const o of r){let l=tee(o,n.yc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(e,t)}return function(r,n){if((r=Cf(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _be(n.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Wr.fromDate(r);return{timestampValue:SA(n.serializer,s)}}if(r instanceof Wr){const s=new Wr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:SA(n.serializer,s)}}if(r instanceof gu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gl)return{bytesValue:SJ(n.serializer,r._byteString)};if(r instanceof Ps){const s=n.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw n.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ML(r.firestore._databaseId||n.databaseId,r._key.path)}}if(r instanceof vu)return function(a,o){return{mapValue:{fields:{[Z$]:{stringValue:$$},[yA]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.wc("VectorValues must only contain numeric values.");return AL(o.serializer,c)})}}}}}}(r,n);throw n.wc(`Unsupported field value: ${yL(r)}`)}(e,t)}function iee(e,t){const i={};return W$(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Nm(e,(r,n)=>{const s=tee(n,t.Vc(r));s!=null&&(i[r]=s)}),{mapValue:{fields:i}}}function ree(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Wr||e instanceof gu||e instanceof gl||e instanceof Ps||e instanceof WL||e instanceof vu)}function nee(e,t,i){if(!ree(i)||!H$(i)){const r=yL(i);throw r==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function V2e(e,t,i){if((t=Cf(t))instanceof GL)return t._internalPath;if(typeof t=="string")return see(e,t);throw TA("Field path arguments must be of type string or ",e,!1,void 0,i)}const U2e=new RegExp("[~\\*/\\[\\]]");function see(e,t,i){if(t.search(U2e)>=0)throw TA(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,i);try{return new GL(...t.split("."))._internalPath}catch{throw TA(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,i)}}function TA(e,t,i,r,n){const s=r&&!r.isEmpty(),a=n!==void 0;let o=`Function ${t}() called with invalid data`;i&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${n}`),l+=")"),new Nt(at.INVALID_ARGUMENT,o+e+l)}function F2e(e,t){return e.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aee{constructor(t,i,r,n,s){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=n,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ps(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new H2e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(oee("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class H2e extends aee{data(){return super.data()}}function oee(e,t){return typeof t=="string"?see(e,t):t instanceof GL?t._internalPath:t._delegate._internalPath}class G2e{convertValue(t,i="none"){switch(Rf(t)){case 0:return null;case 1:return t.booleanValue;case 2:return An(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(If(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw oi(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return Nm(t,(n,s)=>{r[n]=this.convertValue(s,i)}),r}convertVectorValue(t){var i,r,n;const s=(n=(r=(i=t.fields)===null||i===void 0?void 0:i[yA].arrayValue)===null||r===void 0?void 0:r.values)===null||n===void 0?void 0:n.map(a=>An(a.doubleValue));return new vu(s)}convertGeoPoint(t){return new gu(An(t.latitude),An(t.longitude))}convertArray(t,i){return(t.values||[]).map(r=>this.convertValue(r,i))}convertServerTimestamp(t,i){switch(i){case"previous":const r=g3(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(yb(t));default:return null}}convertTimestamp(t){const i=Df(t);return new Wr(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=Gr.fromString(t);pr(MJ(r),9688,{name:t});const n=new xb(r.get(1),r.get(3)),s=new Zt(r.popFirst(5));return n.isEqual(i)||Wh(`Document ${s} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2e(e,t,i){let r;return r=e?e.toFirestore(t):t,r}class ux{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class hm extends aee{constructor(t,i,r,n,s,a){super(t,i,r,n,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new OE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(oee("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Nt(at.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=hm._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}hm._jsonSchemaVersion="firestore/documentSnapshot/1.0",hm._jsonSchema={type:Fn("string",hm._jsonSchemaVersion),bundleSource:Fn("string","DocumentSnapshot"),bundleName:Fn("string"),bundle:Fn("string")};class OE extends hm{data(t={}){return super.data(t)}}class kx{constructor(t,i,r,n){this._firestore=t,this._userDataWriter=i,this._snapshot=n,this.metadata=new ux(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(r=>{t.call(i,new OE(this._firestore,this._userDataWriter,r.key,r,new ux(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Nt(at.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(n,s){if(n._snapshot.oldDocs.isEmpty()){let a=0;return n._snapshot.docChanges.map(o=>{const l=new OE(n._firestore,n._userDataWriter,o.doc.key,o.doc,new ux(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new OE(n._firestore,n._userDataWriter,o.doc.key,o.doc,new ux(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:q2e(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Nt(at.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=kx._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=vL.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],n=[];return this.docs.forEach(s=>{s._document!==null&&(i.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),n.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function q2e(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oi(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(e){e=mA(e,Ps);const t=mA(e.firestore,HL);return I2e(JJ(t),e._key).then(i=>Q2e(t,e,i))}kx._jsonSchemaVersion="firestore/querySnapshot/1.0",kx._jsonSchema={type:Fn("string",kx._jsonSchemaVersion),bundleSource:Fn("string","QuerySnapshot"),bundleName:Fn("string"),bundle:Fn("string")};class X2e extends G2e{constructor(t){super(),this.firestore=t}convertBytes(t){return new gl(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Ps(this.firestore,null,i)}}function lee(e,t){const i=mA(e.firestore,HL),r=Hm(e),n=W2e(e.converter,t);return Y2e(i,[N2e(j2e(e.firestore),"addDoc",r._key,n,e.converter!==null,{}).toMutation(r._key,zh.exists(!1))]).then(()=>r)}function Y2e(e,t){return function(r,n){const s=new vf;return r.asyncQueue.enqueueAndForget(async()=>v2e(await P2e(r),n,s)),s.promise}(JJ(e),t)}function Q2e(e,t,i){const r=i.docs.get(t._key),n=new X2e(e);return new hm(e,n,t._key,r,new ux(i.hasPendingWrites,i.fromCache),t.converter)}function cee(){return new XL("serverTimestamp")}(function(t,i=!0){(function(n){Zv=n})(M$),mb(new yv("firestore",(r,{instanceIdentifier:n,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new HL(new kxe(r.getProvider("auth-internal")),new jxe(a,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Nt(at.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xb(c.options.projectId,u)}(a,n),a);return s=Object.assign({useFetchStreams:i},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),mf($7,J7,t),mf($7,J7,"esm2017")})();var K2e="firebase",Z2e="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mf(K2e,Z2e,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uee="firebasestorage.googleapis.com",hee="storageBucket",$2e=2*60*1e3,J2e=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends jm{constructor(t,i,r=0){super(eP(t),`Firebase Storage: ${i} (${eP(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return eP(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ls;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ls||(Ls={}));function eP(e){return"storage/"+e}function dee(){const e="An unknown error occurred, please check the error payload for server response.";return new Bs(Ls.UNKNOWN,e)}function eSe(e){return new Bs(Ls.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function tSe(e){return new Bs(Ls.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function iSe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Bs(Ls.UNAUTHENTICATED,e)}function rSe(){return new Bs(Ls.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nSe(e){return new Bs(Ls.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function sSe(){return new Bs(Ls.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aSe(){return new Bs(Ls.CANCELED,"User canceled the upload/download.")}function oSe(e){return new Bs(Ls.INVALID_URL,"Invalid URL '"+e+"'.")}function lSe(e){return new Bs(Ls.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function cSe(){return new Bs(Ls.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hee+"' property when initializing the app?")}function uSe(){return new Bs(Ls.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function YI(e){return new Bs(Ls.INVALID_ARGUMENT,e)}function fee(){return new Bs(Ls.APP_DELETED,"The Firebase app was deleted.")}function hSe(e){return new Bs(Ls.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function M1(e){throw new Bs(Ls.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(t,i){this.bucket=t,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,i){let r;try{r=Bo.makeFromUrl(t,i)}catch{return new Bo(t,"")}if(r.path==="")return r;throw lSe(t)}static makeFromUrl(t,i){let r=null;const n="([A-Za-z0-9.\\-_]+)";function s(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+n+a,"i"),l={bucket:1,path:3};function c(A){A.path_=decodeURIComponent(A.path)}const u="v[A-Za-z0-9_]+",h=i.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${u}/b/${n}/o${f}`,"i"),g={bucket:1,path:3},v=i===uee?"(?:storage.googleapis.com|storage.cloud.google.com)":i,x="([^?#]*)",b=new RegExp(`^https?://${v}/${n}/${x}`,"i"),_=[{regex:o,indices:l,postModify:s},{regex:m,indices:g,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let A=0;A<_.length;A++){const M=_[A],C=M.regex.exec(t);if(C){const D=C[M.indices.bucket];let T=C[M.indices.path];T||(T=""),r=new Bo(D,T),M.postModify(r);break}}if(r==null)throw oSe(t);return r}}class dSe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fSe(e,t,i){let r=1,n=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...x){c||(c=!0,t.apply(null,x))}function h(x){n=setTimeout(()=>{n=null,e(m,l())},x)}function f(){s&&clearTimeout(s)}function m(x,...b){if(c){f();return}if(x){f(),u.call(null,x,...b);return}if(l()||a){f(),u.call(null,x,...b);return}r<64&&(r*=2);let _;o===1?(o=2,_=0):_=(r+Math.random())*1e3,h(_)}let g=!1;function v(x){g||(g=!0,f(),!c&&(n!==null?(x||(o=2),clearTimeout(n),h(0)):x||(o=1)))}return h(0),s=setTimeout(()=>{a=!0,v(!0)},i),v}function pSe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mSe(e){return e!==void 0}function gSe(e){return typeof e=="object"&&!Array.isArray(e)}function pee(e){return typeof e=="string"||e instanceof String}function YU(e,t,i,r){if(r<t)throw YI(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>i)throw YI(`Invalid value for '${e}'. Expected ${i} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mee(e,t,i){let r=t;return i==null&&(r=`https://${t}`),`${i}://${r}/v0${e}`}function gee(e){const t=encodeURIComponent;let i="?";for(const r in e)if(e.hasOwnProperty(r)){const n=t(r)+"="+t(e[r]);i=i+n+"&"}return i=i.slice(0,-1),i}var dm;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(dm||(dm={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vSe(e,t){const i=e>=500&&e<600,n=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return i||n||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ySe{constructor(t,i,r,n,s,a,o,l,c,u,h,f=!0,m=!1){this.url_=t,this.method_=i,this.headers_=r,this.body_=n,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const t=(r,n)=>{if(n){r(!1,new DS(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===dm.NO_ERROR,l=s.getStatus();if(!o||vSe(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===dm.ABORT;r(!1,new DS(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new DS(c,s))})},i=(r,n)=>{const s=this.resolve_,a=this.reject_,o=n.connection;if(n.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());mSe(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=dee();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(n.canceled){const l=this.appDelete_?fee():aSe();a(l)}else{const l=sSe();a(l)}};this.canceled_?i(!1,new DS(!1,null,!0)):this.backoffId_=fSe(t,i,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&pSe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class DS{constructor(t,i,r){this.wasSuccessCode=t,this.connection=i,this.canceled=!!r}}function xSe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function bSe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function wSe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function SSe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function _Se(e,t,i,r,n,s,a=!0,o=!1){const l=gee(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return wSe(u,t),xSe(u,i),bSe(u,s),SSe(u,r),new ySe(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vee(e){let t;try{t=JSON.parse(e)}catch{return null}return gSe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ESe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function ASe(e,t){const i=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?i:e+"/"+i}function yee(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TSe(e,t){return t}class Ra{constructor(t,i,r,n){this.server=t,this.local=i||t,this.writable=!!r,this.xform=n||TSe}}let IS=null;function CSe(e){return!pee(e)||e.length<2?e:yee(e)}function MSe(){if(IS)return IS;const e=[];e.push(new Ra("bucket")),e.push(new Ra("generation")),e.push(new Ra("metageneration")),e.push(new Ra("name","fullPath",!0));function t(s,a){return CSe(a)}const i=new Ra("name");i.xform=t,e.push(i);function r(s,a){return a!==void 0?Number(a):a}const n=new Ra("size");return n.xform=r,e.push(n),e.push(new Ra("timeCreated")),e.push(new Ra("updated")),e.push(new Ra("md5Hash",null,!0)),e.push(new Ra("cacheControl",null,!0)),e.push(new Ra("contentDisposition",null,!0)),e.push(new Ra("contentEncoding",null,!0)),e.push(new Ra("contentLanguage",null,!0)),e.push(new Ra("contentType",null,!0)),e.push(new Ra("metadata","customMetadata",!0)),IS=e,IS}function PSe(e,t){function i(){const r=e.bucket,n=e.fullPath,s=new Bo(r,n);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:i})}function DSe(e,t,i){const r={};r.type="file";const n=i.length;for(let s=0;s<n;s++){const a=i[s];r[a.local]=a.xform(r,t[a.server])}return PSe(r,e),r}function ISe(e,t,i){const r=vee(t);return r===null?null:DSe(e,r,i)}function RSe(e,t,i,r){const n=vee(t);if(n===null||!pee(n.downloadTokens))return null;const s=n.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const u=e.bucket,h=e.fullPath,f="/b/"+a(u)+"/o/"+a(h),m=mee(f,i,r),g=gee({alt:"media",token:c});return m+g})[0]}class OSe{constructor(t,i,r,n){this.url=t,this.method=i,this.handler=r,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LSe(e){if(!e)throw dee()}function kSe(e,t){function i(r,n){const s=ISe(e,n,t);return LSe(s!==null),RSe(s,n,e.host,e._protocol)}return i}function zSe(e){function t(i,r){let n;return i.getStatus()===401?i.getErrorText().includes("Firebase App Check token is invalid")?n=rSe():n=iSe():i.getStatus()===402?n=tSe(e.bucket):i.getStatus()===403?n=nSe(e.path):n=r,n.status=i.getStatus(),n.serverResponse=r.serverResponse,n}return t}function BSe(e){const t=zSe(e);function i(r,n){let s=t(r,n);return r.getStatus()===404&&(s=eSe(e.path)),s.serverResponse=n.serverResponse,s}return i}function jSe(e,t,i){const r=t.fullServerUrl(),n=mee(r,e.host,e._protocol),s="GET",a=e.maxOperationRetryTime,o=new OSe(n,s,kSe(e,i),a);return o.errorHandler=BSe(t),o}class NSe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dm.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dm.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dm.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,i,r,n,s){if(this.sent_)throw M1("cannot .send() more than once");if(uw(t)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(i,t,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw M1("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw M1("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw M1("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw M1("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class VSe extends NSe{initXhr(){this.xhr_.responseType="text"}}function USe(){return new VSe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(t,i){this._service=t,i instanceof Bo?this._location=i:this._location=Bo.makeFromUrl(i,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,i){return new Sm(t,i)}get root(){const t=new Bo(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yee(this._location.path)}get storage(){return this._service}get parent(){const t=ESe(this._location.path);if(t===null)return null;const i=new Bo(this._location.bucket,t);return new Sm(this._service,i)}_throwIfRoot(t){if(this._location.path==="")throw hSe(t)}}function FSe(e){e._throwIfRoot("getDownloadURL");const t=jSe(e.storage,e._location,MSe());return e.storage.makeRequestWithTokens(t,USe).then(i=>{if(i===null)throw uSe();return i})}function HSe(e,t){const i=ASe(e._location.path,t),r=new Bo(e._location.bucket,i);return new Sm(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GSe(e){return/^[A-Za-z]+:\/\//.test(e)}function WSe(e,t){return new Sm(e,t)}function xee(e,t){if(e instanceof YL){const i=e;if(i._bucket==null)throw cSe();const r=new Sm(i,i._bucket);return t!=null?xee(r,t):r}else return t!==void 0?HSe(e,t):e}function qSe(e,t){if(t&&GSe(t)){if(e instanceof YL)return WSe(e,t);throw YI("To use ref(service, url), the first argument must be a Storage instance.")}else return xee(e,t)}function QU(e,t){const i=t==null?void 0:t[hee];return i==null?null:Bo.makeFromBucketSpec(i,e)}function XSe(e,t,i,r={}){e.host=`${t}:${i}`;const n=uw(t);n&&(x$(`https://${e.host}/b`),w$("Storage",!0)),e._isUsingEmulator=!0,e._protocol=n?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken=typeof s=="string"?s:b$(s,e.app.options.projectId))}class YL{constructor(t,i,r,n,s,a=!1){this.app=t,this._authProvider=i,this._appCheckProvider=r,this._url=n,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=uee,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$2e,this._maxUploadRetryTime=J2e,this._requests=new Set,n!=null?this._bucket=Bo.makeFromBucketSpec(n,this._host):this._bucket=QU(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Bo.makeFromBucketSpec(this._url,t):this._bucket=QU(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){YU("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){YU("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const i=await t.getToken();if(i!==null)return i.accessToken}return null}async _getAppCheckToken(){if(C$(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Sm(this,t)}_makeRequest(t,i,r,n,s=!0){if(this._deleted)return new dSe(fee());{const a=_Se(t,this._appId,r,n,i,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,i){const[r,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,i,r,n).getPromise()}}const KU="@firebase/storage",ZU="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bee="storage";function Eb(e){return e=Cf(e),FSe(e)}function Ab(e,t){return e=Cf(e),qSe(e,t)}function YSe(e=D$(),t){e=Cf(e);const r=T$(e,bee).getImmediate({identifier:t}),n=v$("storage");return n&&QSe(r,...n),r}function QSe(e,t,i,r={}){XSe(e,t,i,r)}function KSe(e,{instanceIdentifier:t}){const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),n=e.getProvider("app-check-internal");return new YL(i,r,n,t,M$)}function ZSe(){mb(new yv(bee,KSe,"PUBLIC").setMultipleInstances(!0)),mf(KU,ZU,""),mf(KU,ZU,"esm2017")}ZSe();const $Se={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},wee=P$($Se),Gf=O2e(wee),Tb=YSe(wee),JSe=()=>{const[e,t]=J.useState([]),[i,r]=J.useState(""),[n,s]=J.useState(!0),[a,o]=J.useState(null);return J.useEffect(()=>{(async()=>{var c,u;try{const h=Hm(Gf,"content","7BChHRBrC6O4kAHjqnwH"),f=await ty(h);if(f.exists()){const g=f.data().heroSection,v=["image","image1","image2","image3","image4"],x=await Promise.all(v.map(_=>{const A=g.images[_],M=Ab(Tb,A.replace("gs://sabsusshop.appspot.com/","HomePageHeroSection/"));return Eb(M)}));t(x);const b=localStorage.getItem("i18nextLng")||"en",S=((u=(c=g.translations)==null?void 0:c[b])==null?void 0:u.trustText)||"";r(S)}}catch(h){console.error("Помилка отримання даних з Firebase:",a),o(h.message||"Помилка при завантаженні")}finally{s(!1)}})()},[]),{images:e,trustText:i,loading:n,error:a}},e_e=()=>{const[e,t]=J.useState([]),[i,r]=J.useState(!0),[n,s]=J.useState(null);return J.useEffect(()=>{(async()=>{var o,l;try{const c=Hm(Gf,"content","7BChHRBrC6O4kAHjqnwH"),u=await ty(c);if(u.exists()){const f=u.data().swipperStats,m=localStorage.getItem("i18nextLng")||"en",g=((l=(o=f.translations)==null?void 0:o[m])==null?void 0:l.stats)||[];t(g)}}catch(c){console.error("Помилка при отриманні swiper stats:",n),s(c.message||"Помилка при завантаженні")}finally{r(!1)}})()},[]),{stats:e,loading:i,error:n}},t_e=()=>{const[e,t]=J.useState([]),[i,r]=J.useState(!0),[n,s]=J.useState(null);return J.useEffect(()=>{(async()=>{var o;try{const l=Hm(Gf,"content","7BChHRBrC6O4kAHjqnwH"),c=await ty(l);if(!c.exists()){r(!1);return}const h=c.data().feedbackSection,f=localStorage.getItem("i18nextLng")||"en",m=((o=h.translations)==null?void 0:o[f])||[],g=await Promise.all(m.map(async v=>{const{avatar:x,icon:b,text:S,name:_,position:A,id:M}=v,C=Ab(Tb,x),D=Ab(Tb,b),[T,R]=await Promise.all([Eb(C),Eb(D)]);return{id:M,name:_,position:A,text:S,avatarUrl:T,iconUrl:R}}));t(g)}catch(l){console.error("Помилка fetchFeedback:",l),s(l.message||"Помилка при завантаженні")}finally{r(!1)}})()},[]),{items:e,loading:i,error:n}},i_e=e=>{const{i18n:t}=jt(),[i,r]=J.useState([]),[n,s]=J.useState(!0),[a,o]=J.useState(null);return J.useEffect(()=>{(async()=>{var c,u;s(!0);try{const h=t.language||"en",f=e?"monthly":"annually",m=Hm(Gf,"content","7BChHRBrC6O4kAHjqnwH"),g=await ty(m);if(!g.exists())throw new Error("Дані не знайдені");const v=(u=(c=g.data())==null?void 0:c.pricing)==null?void 0:u.translations;if(!v||!v[h])throw new Error(`Немає перекладу для мови ${h}`);const x=v[h][f];if(!x)throw new Error("Немає планів");r(x)}catch(h){console.error(h),o(h.message||"Помилка при завантаженні")}finally{s(!1)}})()},[e,t.language]),{pricingData:i,loading:n,error:a}},r_e=()=>{const[e,t]=J.useState(null),[i,r]=J.useState(!0),[n,s]=J.useState(null);return J.useEffect(()=>{(async()=>{try{const o=Hm(Gf,"content","7BChHRBrC6O4kAHjqnwH"),l=await ty(o);if(!l.exists()){s("Документ не знайдено"),r(!1);return}const c=l.data().partnersBanner;if(!c||!Array.isArray(c.carousels)||!Array.isArray(c.partners)){s("Структура partnersBanner не відповідає очікуваній"),r(!1);return}const u=async m=>{const g=m.replace("gs://sabsusshop.appspot.com/",""),v=Ab(Tb,g);return Eb(v)},h=await Promise.all(c.carousels.map(async m=>({id:m.id,link:m.link,imageUrl:await u(m.imageUrl)}))),f=await Promise.all(c.partners.map(m=>u(m)));t({carousels:h,partners:f})}catch(o){s("Помилка при завантаженні: "+o.message)}finally{r(!1)}})()},[]),{data:e,loading:i,error:n}},n_e=(e="desktop")=>{const[t,i]=J.useState(""),[r,n]=J.useState(!0),[s,a]=J.useState(null),{i18n:o}=jt();return J.useEffect(()=>{(async()=>{try{const c=Hm(Gf,"content","7BChHRBrC6O4kAHjqnwH"),u=await ty(c);if(!u.exists())throw new Error("Документ не знайдено");const f=u.data().videos,m=o.language||"en",g=f[`${m}_${e}`]||f[m];if(!g)throw new Error("Відео не знайдено");const v=g.replace("gs://sabsusshop.appspot.com/",""),x=Ab(Tb,v),b=await Eb(x);i(b)}catch(c){console.error("Помилка отримання відео:",c),a(c.message)}finally{n(!1)}})()},[o.language,e]),{videoUrl:t,loading:r,error:s}},s_e=U.div`
  margin: 80px auto;
  max-width: 1200px;
  padding: 0 20px;
  text-align: center;
`,a_e=U.div`
  background: rgba(255, 255, 255, 0.03);
  border-radius: 24px;
  padding: 40px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  border: 1px solid #212121;
  max-width: 800px;
  margin: 0 auto;
`,o_e=U.form`
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-top: 30px;
`,$U=U.div`
  display: flex;
  gap: 20px;

  @media (max-width: 768px) {
    flex-direction: column;
    gap: 20px;
  }
`,Bg=U.div`
  flex: 1;
  text-align: left;
`,jg=U.label`
  display: block;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 14px;
  color: var(--white-100);
  margin-bottom: 8px;
`,RS=U.input`
  width: 100%;
  padding: 12px 16px;
  border: 1px solid #212121;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.03);
  color: var(--white-100);
  font-family: var(--font-family);
  font-size: 16px;
  transition: border-color 0.3s;

  &:focus {
    outline: none;
    border-color: #494bec;
  }
`,l_e=U.select`
  width: 100%;
  padding: 12px 16px;
  border: 1px solid #212121;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.03);
  color: var(--white-100);
  font-family: var(--font-family);
  font-size: 16px;
  cursor: pointer;

  option {
    background: #1a1a1a;
  }
`,c_e=U.textarea`
  width: 100%;
  padding: 12px 16px;
  border: 1px solid #212121;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.03);
  color: var(--white-100);
  font-family: var(--font-family);
  font-size: 16px;
  min-height: 120px;
  resize: vertical;
`,u_e=U.div`
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 10px 0;
`,h_e=U.input.attrs({type:"checkbox"})`
  width: 18px;
  height: 18px;
  margin: 0;
  cursor: pointer;
  appearance: none;
  -webkit-appearance: none;
  border: 1px solid #494bec;
  border-radius: 4px;
  outline: none;
  transition: all 0.2s;

  &:checked {
    background-color: #494bec;
    position: relative;
  }

  &:checked::after {
    content: '✓';
    position: absolute;
    color: white;
    font-size: 12px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
`,d_e=U.button`
  background: linear-gradient(139deg, #494bec, #6a6bff);
  color: white;
  border: none;
  border-radius: 8px;
  padding: 14px 24px;
  font-family: var(--font-family);
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition:
    transform 0.2s,
    box-shadow 0.2s;
  margin-top: 20px;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(73, 75, 236, 0.3);
  }

  &:active {
    transform: translateY(0);
  }
`,f_e=U.label`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 14px;
  color: var(--white-100);
  cursor: pointer;
`,p_e=()=>{const{t:e}=jt(),[t,i]=J.useState({name:"",company:"",email:"",phone:"",locations:"",message:"",scheduleCall:!1}),r=s=>{const{name:a,value:o,type:l}=s.target,c=l==="checkbox"?s.target.checked:void 0;i(u=>({...u,[a]:l==="checkbox"?c:o}))},n=async s=>{s.preventDefault();try{await lee($J(Gf,"feedbackMessages"),{...t,createdAt:cee()}),alert("Дані успішно надіслано!"),i({name:"",company:"",email:"",phone:"",locations:"",message:"",scheduleCall:!1})}catch(a){alert("Помилка при відправці: "+a.message)}};return E.jsx(s_e,{children:E.jsxs(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},children:[E.jsxs(Ml,{children:[e("feedback1.title")," ",E.jsx(Ur,{src:r1e,alt:"star"})]}),E.jsx(Pl,{children:e("feedback1.subtitle")}),E.jsx(pc,{children:e("feedback1.description")}),E.jsx(a_e,{children:E.jsxs(o_e,{onSubmit:n,children:[E.jsxs($U,{children:[E.jsxs(Bg,{children:[E.jsx(jg,{children:e("feedback1.form.name")}),E.jsx(RS,{type:"text",name:"name",value:t.name,onChange:r,required:!0})]}),E.jsxs(Bg,{children:[E.jsx(jg,{children:e("feedback1.form.company")}),E.jsx(RS,{type:"text",name:"company",value:t.company,onChange:r,required:!0})]})]}),E.jsxs($U,{children:[E.jsxs(Bg,{children:[E.jsx(jg,{children:e("feedback1.form.email")}),E.jsx(RS,{type:"email",name:"email",value:t.email,onChange:r,required:!0})]}),E.jsxs(Bg,{children:[E.jsxs(jg,{children:[e("feedback1.form.phone")," (",e("feedback1.form.optional"),")"]}),E.jsx(RS,{type:"tel",name:"phone",value:t.phone,onChange:r})]})]}),E.jsxs(Bg,{children:[E.jsx(jg,{children:e("feedback1.form.locations")}),E.jsxs(l_e,{name:"locations",value:t.locations,onChange:r,required:!0,children:[E.jsx("option",{value:"",children:e("feedback1.form.selectOption")}),E.jsx("option",{value:"1-10",children:"1-10"}),E.jsx("option",{value:"11-20",children:"11-20"}),E.jsx("option",{value:"21-50",children:"21-50"}),E.jsx("option",{value:"50+",children:"50+"})]})]}),E.jsxs(Bg,{children:[E.jsx(jg,{children:e("feedback1.form.message")}),E.jsx(c_e,{name:"message",value:t.message,onChange:r})]}),E.jsxs(u_e,{children:[E.jsx(h_e,{id:"scheduleCall",name:"scheduleCall",checked:t.scheduleCall,onChange:r}),E.jsx(f_e,{htmlFor:"scheduleCall",children:e("feedback1.form.scheduleCall")})]}),E.jsx(d_e,{type:"submit",children:e("feedback1.form.submit")})]})})]})})},m_e=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 500;
  font-size: 24px;
  line-height: 130%;
  text-align: center;
  color: var(--white-100);
`,g_e=U(G.div)`
  display: flex;
  margin-top: 20px;
  justify-content: space-evenly;
  justify-items: column;
  flex-direction: row;
  gap: 4px;
  width: 343px;
     height: max-content;
  flex-wrap: wrap;
  align-content: space-between;
`,v_e=U(G.img)`
  width: 104px;
  height: 16px;
`,y_e=U(G.p)`
  font-family: var(--font-family);
  font-weight: 500;
  font-size: 24px;
  line-height: 130%;
  text-align: center;
  color: var(--white-100);
`,x_e=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-100);
`,b_e=U(G.div)`
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 100px;
  background: linear-gradient(90deg, rgb(0, 0, 0) 0%, rgba(0,0,0,0) 100%);
  z-index: 10;
  pointer-events: none;
`,See=U(G.div)`
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 100px;
  background: linear-gradient(270deg, rgb(0, 0, 0) 0%, rgba(0,0,0,0) 100%);
  z-index: 10;
  pointer-events: none;
`,w_e=U(G.div)`
  display: flex;
  padding: 0 16px;
  max-width: 1200px;
  margin: 0 auto;
  flex-direction: column;
  align-items: center;
`,S_e=U(G.div)`
  width: 100%;
  position: relative;
  margin: 0 auto;
  padding: 80px 0;
  overflow: hidden;
  
  .swiper {
    width: 100%;
    padding: 0 10%;
  }
  
  .swiper-slide {
    display: flex;
    justify-content: center;
    transition: transform 0.3s ease;
  }
`,__e=U(G.div)`
  overflow: hidden;
  display: flex;
  flex-direction: column;
  border: 1px solid #212121;
  border-radius: 24px;
  padding: 20px;
  width: 311px;
  height: auto;
  backdrop-filter: blur(16px);
  box-shadow: 0 8px 16px -8px rgba(0, 0, 0, 0.03), 
              0 2px 4px -2px rgba(0, 0, 0, 0.08), 
              inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), 
              inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  margin: 0 auto;
  will-change: transform, box-shadow;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
`,E_e=U(G.img)`
  width: 123px;
  height: 64px;
  margin-bottom: 16px;
  will-change: transform;
  object-fit: contain;
  object-position: center ;
`,A_e=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  line-height: 130%;
  color: var(--white-100);
  margin-bottom: 40px;
`,T_e=U(G.div)`
  display: flex;
  align-items: center;
  gap: 8px;
`,C_e=U(G.div)`
  will-change: transform;
`,M_e=U(G.img)`
  border-radius: 24px;
  width: 45px;
  height: 45px;
  will-change: transform;
  transition: transform 0.3s ease;
`,P_e=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 14px;
  line-height: 130%;
  color: var(--white-100);
`,D_e=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-50);
`,I_e="data:image/svg+xml,%3csvg%20width='104'%20height='16'%20viewBox='0%200%20104%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8%200L9.79611%205.52786H15.6085L10.9062%208.94427L12.7023%2014.4721L8%2011.0557L3.29772%2014.4721L5.09383%208.94427L0.391548%205.52786H6.20389L8%200Z'%20fill='%23494BEC'/%3e%3cpath%20d='M28%200L29.7961%205.52786H35.6085L30.9062%208.94427L32.7023%2014.4721L28%2011.0557L23.2977%2014.4721L25.0938%208.94427L20.3915%205.52786H26.2039L28%200Z'%20fill='%23494BEC'/%3e%3cpath%20d='M48%200L49.7961%205.52786H55.6085L50.9062%208.94427L52.7023%2014.4721L48%2011.0557L43.2977%2014.4721L45.0938%208.94427L40.3915%205.52786H46.2039L48%200Z'%20fill='%23494BEC'/%3e%3cpath%20d='M68%200L69.7961%205.52786H75.6085L70.9062%208.94427L72.7023%2014.4721L68%2011.0557L63.2977%2014.4721L65.0938%208.94427L60.3915%205.52786H66.2039L68%200Z'%20fill='%23494BEC'/%3e%3cpath%20d='M88%200L89.7961%205.52786H95.6085L90.9062%208.94427L92.7023%2014.4721L88%2011.0557L83.2977%2014.4721L85.0938%208.94427L80.3915%205.52786H86.2039L88%200Z'%20fill='%23494BEC'/%3e%3c/svg%3e";function JU(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function QL(e,t){e===void 0&&(e={}),t===void 0&&(t={});const i=["__proto__","constructor","prototype"];Object.keys(t).filter(r=>i.indexOf(r)<0).forEach(r=>{typeof e[r]>"u"?e[r]=t[r]:JU(t[r])&&JU(e[r])&&Object.keys(t[r]).length>0&&QL(e[r],t[r])})}const _ee={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function yu(){const e=typeof document<"u"?document:{};return QL(e,_ee),e}const R_e={document:_ee,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function Za(){const e=typeof window<"u"?window:{};return QL(e,R_e),e}function O_e(e){return e===void 0&&(e=""),e.trim().split(" ").filter(t=>!!t.trim())}function L_e(e){const t=e;Object.keys(t).forEach(i=>{try{t[i]=null}catch{}try{delete t[i]}catch{}})}function Eee(e,t){return t===void 0&&(t=0),setTimeout(e,t)}function CA(){return Date.now()}function k_e(e){const t=Za();let i;return t.getComputedStyle&&(i=t.getComputedStyle(e,null)),!i&&e.currentStyle&&(i=e.currentStyle),i||(i=e.style),i}function z_e(e,t){t===void 0&&(t="x");const i=Za();let r,n,s;const a=k_e(e);return i.WebKitCSSMatrix?(n=a.transform||a.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(o=>o.replace(",",".")).join(", ")),s=new i.WebKitCSSMatrix(n==="none"?"":n)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),t==="x"&&(i.WebKitCSSMatrix?n=s.m41:r.length===16?n=parseFloat(r[12]):n=parseFloat(r[4])),t==="y"&&(i.WebKitCSSMatrix?n=s.m42:r.length===16?n=parseFloat(r[13]):n=parseFloat(r[5])),n||0}function OS(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function B_e(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function ko(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let i=1;i<arguments.length;i+=1){const r=i<0||arguments.length<=i?void 0:arguments[i];if(r!=null&&!B_e(r)){const n=Object.keys(Object(r)).filter(s=>t.indexOf(s)<0);for(let s=0,a=n.length;s<a;s+=1){const o=n[s],l=Object.getOwnPropertyDescriptor(r,o);l!==void 0&&l.enumerable&&(OS(e[o])&&OS(r[o])?r[o].__swiper__?e[o]=r[o]:ko(e[o],r[o]):!OS(e[o])&&OS(r[o])?(e[o]={},r[o].__swiper__?e[o]=r[o]:ko(e[o],r[o])):e[o]=r[o])}}}return e}function LS(e,t,i){e.style.setProperty(t,i)}function Aee(e){let{swiper:t,targetPosition:i,side:r}=e;const n=Za(),s=-t.translate;let a=null,o;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(t.cssModeFrameID);const c=i>s?"next":"prev",u=(f,m)=>c==="next"&&f>=m||c==="prev"&&f<=m,h=()=>{o=new Date().getTime(),a===null&&(a=o);const f=Math.max(Math.min((o-a)/l,1),0),m=.5-Math.cos(f*Math.PI)/2;let g=s+m*(i-s);if(u(g,i)&&(g=i),t.wrapperEl.scrollTo({[r]:g}),u(g,i)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[r]:g})}),n.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=n.requestAnimationFrame(h)};h()}function au(e,t){t===void 0&&(t="");const i=Za(),r=[...e.children];return i.HTMLSlotElement&&e instanceof HTMLSlotElement&&r.push(...e.assignedElements()),t?r.filter(n=>n.matches(t)):r}function j_e(e,t){const i=[t];for(;i.length>0;){const r=i.shift();if(e===r)return!0;i.push(...r.children,...r.shadowRoot?r.shadowRoot.children:[],...r.assignedElements?r.assignedElements():[])}}function N_e(e,t){const i=Za();let r=t.contains(e);return!r&&i.HTMLSlotElement&&t instanceof HTMLSlotElement&&(r=[...t.assignedElements()].includes(e),r||(r=j_e(e,t))),r}function MA(e){try{console.warn(e);return}catch{}}function PA(e,t){t===void 0&&(t=[]);const i=document.createElement(e);return i.classList.add(...Array.isArray(t)?t:O_e(t)),i}function V_e(e,t){const i=[];for(;e.previousElementSibling;){const r=e.previousElementSibling;t?r.matches(t)&&i.push(r):i.push(r),e=r}return i}function U_e(e,t){const i=[];for(;e.nextElementSibling;){const r=e.nextElementSibling;t?r.matches(t)&&i.push(r):i.push(r),e=r}return i}function tf(e,t){return Za().getComputedStyle(e,null).getPropertyValue(t)}function eF(e){let t=e,i;if(t){for(i=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(i+=1);return i}}function F_e(e,t){const i=[];let r=e.parentElement;for(;r;)i.push(r),r=r.parentElement;return i}function tF(e,t,i){const r=Za();return e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom"))}function rh(e){return(Array.isArray(e)?e:[e]).filter(t=>!!t)}function iF(e,t){t===void 0&&(t=""),typeof trustedTypes<"u"?e.innerHTML=trustedTypes.createPolicy("html",{createHTML:i=>i}).createHTML(t):e.innerHTML=t}function H_e(e,t,i,r){return e.params.createElements&&Object.keys(r).forEach(n=>{if(!i[n]&&i.auto===!0){let s=au(e.el,`.${r[n]}`)[0];s||(s=PA("div",r[n]),s.className=r[n],e.el.append(s)),i[n]=s,t[n]=s}}),i}function G_e(e){let{swiper:t,extendParams:i,on:r,emit:n}=e;i({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null};function s(g){let v;return g&&typeof g=="string"&&t.isElement&&(v=t.el.querySelector(g)||t.hostEl.querySelector(g),v)?v:(g&&(typeof g=="string"&&(v=[...document.querySelectorAll(g)]),t.params.uniqueNavElements&&typeof g=="string"&&v&&v.length>1&&t.el.querySelectorAll(g).length===1?v=t.el.querySelector(g):v&&v.length===1&&(v=v[0])),g&&!v?g:v)}function a(g,v){const x=t.params.navigation;g=rh(g),g.forEach(b=>{b&&(b.classList[v?"add":"remove"](...x.disabledClass.split(" ")),b.tagName==="BUTTON"&&(b.disabled=v),t.params.watchOverflow&&t.enabled&&b.classList[t.isLocked?"add":"remove"](x.lockClass))})}function o(){const{nextEl:g,prevEl:v}=t.navigation;if(t.params.loop){a(v,!1),a(g,!1);return}a(v,t.isBeginning&&!t.params.rewind),a(g,t.isEnd&&!t.params.rewind)}function l(g){g.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),n("navigationPrev"))}function c(g){g.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),n("navigationNext"))}function u(){const g=t.params.navigation;if(t.params.navigation=H_e(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(g.nextEl||g.prevEl))return;let v=s(g.nextEl),x=s(g.prevEl);Object.assign(t.navigation,{nextEl:v,prevEl:x}),v=rh(v),x=rh(x);const b=(S,_)=>{S&&S.addEventListener("click",_==="next"?c:l),!t.enabled&&S&&S.classList.add(...g.lockClass.split(" "))};v.forEach(S=>b(S,"next")),x.forEach(S=>b(S,"prev"))}function h(){let{nextEl:g,prevEl:v}=t.navigation;g=rh(g),v=rh(v);const x=(b,S)=>{b.removeEventListener("click",S==="next"?c:l),b.classList.remove(...t.params.navigation.disabledClass.split(" "))};g.forEach(b=>x(b,"next")),v.forEach(b=>x(b,"prev"))}r("init",()=>{t.params.navigation.enabled===!1?m():(u(),o())}),r("toEdge fromEdge lock unlock",()=>{o()}),r("destroy",()=>{h()}),r("enable disable",()=>{let{nextEl:g,prevEl:v}=t.navigation;if(g=rh(g),v=rh(v),t.enabled){o();return}[...g,...v].filter(x=>!!x).forEach(x=>x.classList.add(t.params.navigation.lockClass))}),r("click",(g,v)=>{let{nextEl:x,prevEl:b}=t.navigation;x=rh(x),b=rh(b);const S=v.target;let _=b.includes(S)||x.includes(S);if(t.isElement&&!_){const A=v.path||v.composedPath&&v.composedPath();A&&(_=A.find(M=>x.includes(M)||b.includes(M)))}if(t.params.navigation.hideOnClick&&!_){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===S||t.pagination.el.contains(S)))return;let A;x.length?A=x[0].classList.contains(t.params.navigation.hiddenClass):b.length&&(A=b[0].classList.contains(t.params.navigation.hiddenClass)),n(A===!0?"navigationShow":"navigationHide"),[...x,...b].filter(M=>!!M).forEach(M=>M.classList.toggle(t.params.navigation.hiddenClass))}});const f=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),u(),o()},m=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(t.navigation,{enable:f,disable:m,update:o,init:u,destroy:h})}function ra(e){let{swiper:t,extendParams:i,on:r,emit:n,params:s}=e;t.autoplay={running:!1,paused:!1,timeLeft:0},i({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let a,o,l=s&&s.autoplay?s.autoplay.delay:3e3,c=s&&s.autoplay?s.autoplay.delay:3e3,u,h=new Date().getTime(),f,m,g,v,x,b,S;function _(X){!t||t.destroyed||!t.wrapperEl||X.target===t.wrapperEl&&(t.wrapperEl.removeEventListener("transitionend",_),!(S||X.detail&&X.detail.bySwiperTouchMove)&&O())}const A=()=>{if(t.destroyed||!t.autoplay.running)return;t.autoplay.paused?f=!0:f&&(c=u,f=!1);const X=t.autoplay.paused?u:h+c-new Date().getTime();t.autoplay.timeLeft=X,n("autoplayTimeLeft",X,X/l),o=requestAnimationFrame(()=>{A()})},M=()=>{let X;return t.virtual&&t.params.virtual.enabled?X=t.slides.find(F=>F.classList.contains("swiper-slide-active")):X=t.slides[t.activeIndex],X?parseInt(X.getAttribute("data-swiper-autoplay"),10):void 0},C=X=>{if(t.destroyed||!t.autoplay.running)return;cancelAnimationFrame(o),A();let ne=typeof X>"u"?t.params.autoplay.delay:X;l=t.params.autoplay.delay,c=t.params.autoplay.delay;const F=M();!Number.isNaN(F)&&F>0&&typeof X>"u"&&(ne=F,l=F,c=F),u=ne;const K=t.params.speed,re=()=>{!t||t.destroyed||(t.params.autoplay.reverseDirection?!t.isBeginning||t.params.loop||t.params.rewind?(t.slidePrev(K,!0,!0),n("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(t.slides.length-1,K,!0,!0),n("autoplay")):!t.isEnd||t.params.loop||t.params.rewind?(t.slideNext(K,!0,!0),n("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(0,K,!0,!0),n("autoplay")),t.params.cssMode&&(h=new Date().getTime(),requestAnimationFrame(()=>{C()})))};return ne>0?(clearTimeout(a),a=setTimeout(()=>{re()},ne)):requestAnimationFrame(()=>{re()}),ne},D=()=>{h=new Date().getTime(),t.autoplay.running=!0,C(),n("autoplayStart")},T=()=>{t.autoplay.running=!1,clearTimeout(a),cancelAnimationFrame(o),n("autoplayStop")},R=(X,ne)=>{if(t.destroyed||!t.autoplay.running)return;clearTimeout(a),X||(b=!0);const F=()=>{n("autoplayPause"),t.params.autoplay.waitForTransition?t.wrapperEl.addEventListener("transitionend",_):O()};if(t.autoplay.paused=!0,ne){x&&(u=t.params.autoplay.delay),x=!1,F();return}u=(u||t.params.autoplay.delay)-(new Date().getTime()-h),!(t.isEnd&&u<0&&!t.params.loop)&&(u<0&&(u=0),F())},O=()=>{t.isEnd&&u<0&&!t.params.loop||t.destroyed||!t.autoplay.running||(h=new Date().getTime(),b?(b=!1,C(u)):C(),t.autoplay.paused=!1,n("autoplayResume"))},L=()=>{if(t.destroyed||!t.autoplay.running)return;const X=yu();X.visibilityState==="hidden"&&(b=!0,R(!0)),X.visibilityState==="visible"&&O()},k=X=>{X.pointerType==="mouse"&&(b=!0,S=!0,!(t.animating||t.autoplay.paused)&&R(!0))},B=X=>{X.pointerType==="mouse"&&(S=!1,t.autoplay.paused&&O())},V=()=>{t.params.autoplay.pauseOnMouseEnter&&(t.el.addEventListener("pointerenter",k),t.el.addEventListener("pointerleave",B))},$=()=>{t.el&&typeof t.el!="string"&&(t.el.removeEventListener("pointerenter",k),t.el.removeEventListener("pointerleave",B))},q=()=>{yu().addEventListener("visibilitychange",L)},Y=()=>{yu().removeEventListener("visibilitychange",L)};r("init",()=>{t.params.autoplay.enabled&&(V(),q(),D())}),r("destroy",()=>{$(),Y(),t.autoplay.running&&T()}),r("_freeModeStaticRelease",()=>{(g||b)&&O()}),r("_freeModeNoMomentumRelease",()=>{t.params.autoplay.disableOnInteraction?T():R(!0,!0)}),r("beforeTransitionStart",(X,ne,F)=>{t.destroyed||!t.autoplay.running||(F||!t.params.autoplay.disableOnInteraction?R(!0,!0):T())}),r("sliderFirstMove",()=>{if(!(t.destroyed||!t.autoplay.running)){if(t.params.autoplay.disableOnInteraction){T();return}m=!0,g=!1,b=!1,v=setTimeout(()=>{b=!0,g=!0,R(!0)},200)}}),r("touchEnd",()=>{if(!(t.destroyed||!t.autoplay.running||!m)){if(clearTimeout(v),clearTimeout(a),t.params.autoplay.disableOnInteraction){g=!1,m=!1;return}g&&t.params.cssMode&&O(),g=!1,m=!1}}),r("slideChange",()=>{t.destroyed||!t.autoplay.running||(x=!0)}),Object.assign(t.autoplay,{start:D,stop:T,pause:R,resume:O})}let tP;function W_e(){const e=Za(),t=yu();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function Tee(){return tP||(tP=W_e()),tP}let iP;function q_e(e){let{userAgent:t}=e===void 0?{}:e;const i=Tee(),r=Za(),n=r.navigator.platform,s=t||r.navigator.userAgent,a={ios:!1,android:!1},o=r.screen.width,l=r.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let u=s.match(/(iPad).*OS\s([\d_]+)/);const h=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),m=n==="Win32";let g=n==="MacIntel";const v=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&g&&i.touch&&v.indexOf(`${o}x${l}`)>=0&&(u=s.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),g=!1),c&&!m&&(a.os="android",a.android=!0),(u||f||h)&&(a.os="ios",a.ios=!0),a}function Cee(e){return e===void 0&&(e={}),iP||(iP=q_e(e)),iP}let rP;function X_e(){const e=Za(),t=Cee();let i=!1;function r(){const o=e.navigator.userAgent.toLowerCase();return o.indexOf("safari")>=0&&o.indexOf("chrome")<0&&o.indexOf("android")<0}if(r()){const o=String(e.navigator.userAgent);if(o.includes("Version/")){const[l,c]=o.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));i=l<16||l===16&&c<2}}const n=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),s=r(),a=s||n&&t.ios;return{isSafari:i||s,needPerspectiveFix:i,need3dFix:a,isWebView:n}}function Mee(){return rP||(rP=X_e()),rP}function Y_e(e){let{swiper:t,on:i,emit:r}=e;const n=Za();let s=null,a=null;const o=()=>{!t||t.destroyed||!t.initialized||(r("beforeResize"),r("resize"))},l=()=>{!t||t.destroyed||!t.initialized||(s=new ResizeObserver(h=>{a=n.requestAnimationFrame(()=>{const{width:f,height:m}=t;let g=f,v=m;h.forEach(x=>{let{contentBoxSize:b,contentRect:S,target:_}=x;_&&_!==t.el||(g=S?S.width:(b[0]||b).inlineSize,v=S?S.height:(b[0]||b).blockSize)}),(g!==f||v!==m)&&o()})}),s.observe(t.el))},c=()=>{a&&n.cancelAnimationFrame(a),s&&s.unobserve&&t.el&&(s.unobserve(t.el),s=null)},u=()=>{!t||t.destroyed||!t.initialized||r("orientationchange")};i("init",()=>{if(t.params.resizeObserver&&typeof n.ResizeObserver<"u"){l();return}n.addEventListener("resize",o),n.addEventListener("orientationchange",u)}),i("destroy",()=>{c(),n.removeEventListener("resize",o),n.removeEventListener("orientationchange",u)})}function Q_e(e){let{swiper:t,extendParams:i,on:r,emit:n}=e;const s=[],a=Za(),o=function(u,h){h===void 0&&(h={});const f=a.MutationObserver||a.WebkitMutationObserver,m=new f(g=>{if(t.__preventObserver__)return;if(g.length===1){n("observerUpdate",g[0]);return}const v=function(){n("observerUpdate",g[0])};a.requestAnimationFrame?a.requestAnimationFrame(v):a.setTimeout(v,0)});m.observe(u,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:t.isElement||(typeof h.childList>"u"?!0:h).childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),s.push(m)},l=()=>{if(t.params.observer){if(t.params.observeParents){const u=F_e(t.hostEl);for(let h=0;h<u.length;h+=1)o(u[h])}o(t.hostEl,{childList:t.params.observeSlideChildren}),o(t.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(u=>{u.disconnect()}),s.splice(0,s.length)};i({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",l),r("destroy",c)}var K_e={on(e,t,i){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;const n=i?"unshift":"push";return e.split(" ").forEach(s=>{r.eventsListeners[s]||(r.eventsListeners[s]=[]),r.eventsListeners[s][n](t)}),r},once(e,t,i){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;function n(){r.off(e,n),n.__emitterProxy&&delete n.__emitterProxy;for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];t.apply(r,a)}return n.__emitterProxy=t,r.on(e,n,i)},onAny(e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return i.eventsAnyListeners.indexOf(e)<0&&i.eventsAnyListeners[r](e),i},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const i=t.eventsAnyListeners.indexOf(e);return i>=0&&t.eventsAnyListeners.splice(i,1),t},off(e,t){const i=this;return!i.eventsListeners||i.destroyed||!i.eventsListeners||e.split(" ").forEach(r=>{typeof t>"u"?i.eventsListeners[r]=[]:i.eventsListeners[r]&&i.eventsListeners[r].forEach((n,s)=>{(n===t||n.__emitterProxy&&n.__emitterProxy===t)&&i.eventsListeners[r].splice(s,1)})}),i},emit(){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let t,i,r;for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return typeof s[0]=="string"||Array.isArray(s[0])?(t=s[0],i=s.slice(1,s.length),r=e):(t=s[0].events,i=s[0].data,r=s[0].context||e),i.unshift(r),(Array.isArray(t)?t:t.split(" ")).forEach(l=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(c=>{c.apply(r,[l,...i])}),e.eventsListeners&&e.eventsListeners[l]&&e.eventsListeners[l].forEach(c=>{c.apply(r,i)})}),e}};function Z_e(){const e=this;let t,i;const r=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=r.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?i=e.params.height:i=r.clientHeight,!(t===0&&e.isHorizontal()||i===0&&e.isVertical())&&(t=t-parseInt(tf(r,"padding-left")||0,10)-parseInt(tf(r,"padding-right")||0,10),i=i-parseInt(tf(r,"padding-top")||0,10)-parseInt(tf(r,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(i)&&(i=0),Object.assign(e,{width:t,height:i,size:e.isHorizontal()?t:i}))}function $_e(){const e=this;function t(O,L){return parseFloat(O.getPropertyValue(e.getDirectionLabel(L))||0)}const i=e.params,{wrapperEl:r,slidesEl:n,size:s,rtlTranslate:a,wrongRTL:o}=e,l=e.virtual&&i.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,u=au(n,`.${e.params.slideClass}, swiper-slide`),h=l?e.virtual.slides.length:u.length;let f=[];const m=[],g=[];let v=i.slidesOffsetBefore;typeof v=="function"&&(v=i.slidesOffsetBefore.call(e));let x=i.slidesOffsetAfter;typeof x=="function"&&(x=i.slidesOffsetAfter.call(e));const b=e.snapGrid.length,S=e.slidesGrid.length;let _=i.spaceBetween,A=-v,M=0,C=0;if(typeof s>"u")return;typeof _=="string"&&_.indexOf("%")>=0?_=parseFloat(_.replace("%",""))/100*s:typeof _=="string"&&(_=parseFloat(_)),e.virtualSize=-_,u.forEach(O=>{a?O.style.marginLeft="":O.style.marginRight="",O.style.marginBottom="",O.style.marginTop=""}),i.centeredSlides&&i.cssMode&&(LS(r,"--swiper-centered-offset-before",""),LS(r,"--swiper-centered-offset-after",""));const D=i.grid&&i.grid.rows>1&&e.grid;D?e.grid.initSlides(u):e.grid&&e.grid.unsetSlides();let T;const R=i.slidesPerView==="auto"&&i.breakpoints&&Object.keys(i.breakpoints).filter(O=>typeof i.breakpoints[O].slidesPerView<"u").length>0;for(let O=0;O<h;O+=1){T=0;let L;if(u[O]&&(L=u[O]),D&&e.grid.updateSlide(O,L,u),!(u[O]&&tf(L,"display")==="none")){if(i.slidesPerView==="auto"){R&&(u[O].style[e.getDirectionLabel("width")]="");const k=getComputedStyle(L),B=L.style.transform,V=L.style.webkitTransform;if(B&&(L.style.transform="none"),V&&(L.style.webkitTransform="none"),i.roundLengths)T=e.isHorizontal()?tF(L,"width"):tF(L,"height");else{const $=t(k,"width"),q=t(k,"padding-left"),Y=t(k,"padding-right"),X=t(k,"margin-left"),ne=t(k,"margin-right"),F=k.getPropertyValue("box-sizing");if(F&&F==="border-box")T=$+X+ne;else{const{clientWidth:K,offsetWidth:re}=L;T=$+q+Y+X+ne+(re-K)}}B&&(L.style.transform=B),V&&(L.style.webkitTransform=V),i.roundLengths&&(T=Math.floor(T))}else T=(s-(i.slidesPerView-1)*_)/i.slidesPerView,i.roundLengths&&(T=Math.floor(T)),u[O]&&(u[O].style[e.getDirectionLabel("width")]=`${T}px`);u[O]&&(u[O].swiperSlideSize=T),g.push(T),i.centeredSlides?(A=A+T/2+M/2+_,M===0&&O!==0&&(A=A-s/2-_),O===0&&(A=A-s/2-_),Math.abs(A)<1/1e3&&(A=0),i.roundLengths&&(A=Math.floor(A)),C%i.slidesPerGroup===0&&f.push(A),m.push(A)):(i.roundLengths&&(A=Math.floor(A)),(C-Math.min(e.params.slidesPerGroupSkip,C))%e.params.slidesPerGroup===0&&f.push(A),m.push(A),A=A+T+_),e.virtualSize+=T+_,M=T,C+=1}}if(e.virtualSize=Math.max(e.virtualSize,s)+x,a&&o&&(i.effect==="slide"||i.effect==="coverflow")&&(r.style.width=`${e.virtualSize+_}px`),i.setWrapperSize&&(r.style[e.getDirectionLabel("width")]=`${e.virtualSize+_}px`),D&&e.grid.updateWrapperSize(T,f),!i.centeredSlides){const O=[];for(let L=0;L<f.length;L+=1){let k=f[L];i.roundLengths&&(k=Math.floor(k)),f[L]<=e.virtualSize-s&&O.push(k)}f=O,Math.floor(e.virtualSize-s)-Math.floor(f[f.length-1])>1&&f.push(e.virtualSize-s)}if(l&&i.loop){const O=g[0]+_;if(i.slidesPerGroup>1){const L=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/i.slidesPerGroup),k=O*i.slidesPerGroup;for(let B=0;B<L;B+=1)f.push(f[f.length-1]+k)}for(let L=0;L<e.virtual.slidesBefore+e.virtual.slidesAfter;L+=1)i.slidesPerGroup===1&&f.push(f[f.length-1]+O),m.push(m[m.length-1]+O),e.virtualSize+=O}if(f.length===0&&(f=[0]),_!==0){const O=e.isHorizontal()&&a?"marginLeft":e.getDirectionLabel("marginRight");u.filter((L,k)=>!i.cssMode||i.loop?!0:k!==u.length-1).forEach(L=>{L.style[O]=`${_}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let O=0;g.forEach(k=>{O+=k+(_||0)}),O-=_;const L=O>s?O-s:0;f=f.map(k=>k<=0?-v:k>L?L+x:k)}if(i.centerInsufficientSlides){let O=0;g.forEach(k=>{O+=k+(_||0)}),O-=_;const L=(i.slidesOffsetBefore||0)+(i.slidesOffsetAfter||0);if(O+L<s){const k=(s-O-L)/2;f.forEach((B,V)=>{f[V]=B-k}),m.forEach((B,V)=>{m[V]=B+k})}}if(Object.assign(e,{slides:u,snapGrid:f,slidesGrid:m,slidesSizesGrid:g}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){LS(r,"--swiper-centered-offset-before",`${-f[0]}px`),LS(r,"--swiper-centered-offset-after",`${e.size/2-g[g.length-1]/2}px`);const O=-e.snapGrid[0],L=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(k=>k+O),e.slidesGrid=e.slidesGrid.map(k=>k+L)}if(h!==c&&e.emit("slidesLengthChange"),f.length!==b&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),m.length!==S&&e.emit("slidesGridLengthChange"),i.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!l&&!i.cssMode&&(i.effect==="slide"||i.effect==="fade")){const O=`${i.containerModifierClass}backface-hidden`,L=e.el.classList.contains(O);h<=i.maxBackfaceHiddenSlides?L||e.el.classList.add(O):L&&e.el.classList.remove(O)}}function J_e(e){const t=this,i=[],r=t.virtual&&t.params.virtual.enabled;let n=0,s;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const a=o=>r?t.slides[t.getSlideIndexByData(o)]:t.slides[o];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(o=>{i.push(o)});else for(s=0;s<Math.ceil(t.params.slidesPerView);s+=1){const o=t.activeIndex+s;if(o>t.slides.length&&!r)break;i.push(a(o))}else i.push(a(t.activeIndex));for(s=0;s<i.length;s+=1)if(typeof i[s]<"u"){const o=i[s].offsetHeight;n=o>n?o:n}(n||n===0)&&(t.wrapperEl.style.height=`${n}px`)}function eEe(){const e=this,t=e.slides,i=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=(e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop)-i-e.cssOverflowAdjustment()}const rF=(e,t,i)=>{t&&!e.classList.contains(i)?e.classList.add(i):!t&&e.classList.contains(i)&&e.classList.remove(i)};function tEe(e){e===void 0&&(e=this&&this.translate||0);const t=this,i=t.params,{slides:r,rtlTranslate:n,snapGrid:s}=t;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let a=-e;n&&(a=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let o=i.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*t.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<r.length;l+=1){const c=r[l];let u=c.swiperSlideOffset;i.cssMode&&i.centeredSlides&&(u-=r[0].swiperSlideOffset);const h=(a+(i.centeredSlides?t.minTranslate():0)-u)/(c.swiperSlideSize+o),f=(a-s[0]+(i.centeredSlides?t.minTranslate():0)-u)/(c.swiperSlideSize+o),m=-(a-u),g=m+t.slidesSizesGrid[l],v=m>=0&&m<=t.size-t.slidesSizesGrid[l],x=m>=0&&m<t.size-1||g>1&&g<=t.size||m<=0&&g>=t.size;x&&(t.visibleSlides.push(c),t.visibleSlidesIndexes.push(l)),rF(c,x,i.slideVisibleClass),rF(c,v,i.slideFullyVisibleClass),c.progress=n?-h:h,c.originalProgress=n?-f:f}}function iEe(e){const t=this;if(typeof e>"u"){const u=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*u||0}const i=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:n,isBeginning:s,isEnd:a,progressLoop:o}=t;const l=s,c=a;if(r===0)n=0,s=!0,a=!0;else{n=(e-t.minTranslate())/r;const u=Math.abs(e-t.minTranslate())<1,h=Math.abs(e-t.maxTranslate())<1;s=u||n<=0,a=h||n>=1,u&&(n=0),h&&(n=1)}if(i.loop){const u=t.getSlideIndexByData(0),h=t.getSlideIndexByData(t.slides.length-1),f=t.slidesGrid[u],m=t.slidesGrid[h],g=t.slidesGrid[t.slidesGrid.length-1],v=Math.abs(e);v>=f?o=(v-f)/g:o=(v+g-m)/g,o>1&&(o-=1)}Object.assign(t,{progress:n,progressLoop:o,isBeginning:s,isEnd:a}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),s&&!l&&t.emit("reachBeginning toEdge"),a&&!c&&t.emit("reachEnd toEdge"),(l&&!s||c&&!a)&&t.emit("fromEdge"),t.emit("progress",n)}const nP=(e,t,i)=>{t&&!e.classList.contains(i)?e.classList.add(i):!t&&e.classList.contains(i)&&e.classList.remove(i)};function rEe(){const e=this,{slides:t,params:i,slidesEl:r,activeIndex:n}=e,s=e.virtual&&i.virtual.enabled,a=e.grid&&i.grid&&i.grid.rows>1,o=h=>au(r,`.${i.slideClass}${h}, swiper-slide${h}`)[0];let l,c,u;if(s)if(i.loop){let h=n-e.virtual.slidesBefore;h<0&&(h=e.virtual.slides.length+h),h>=e.virtual.slides.length&&(h-=e.virtual.slides.length),l=o(`[data-swiper-slide-index="${h}"]`)}else l=o(`[data-swiper-slide-index="${n}"]`);else a?(l=t.find(h=>h.column===n),u=t.find(h=>h.column===n+1),c=t.find(h=>h.column===n-1)):l=t[n];l&&(a||(u=U_e(l,`.${i.slideClass}, swiper-slide`)[0],i.loop&&!u&&(u=t[0]),c=V_e(l,`.${i.slideClass}, swiper-slide`)[0],i.loop&&!c===0&&(c=t[t.length-1]))),t.forEach(h=>{nP(h,h===l,i.slideActiveClass),nP(h,h===u,i.slideNextClass),nP(h,h===c,i.slidePrevClass)}),e.emitSlidesClasses()}const LE=(e,t)=>{if(!e||e.destroyed||!e.params)return;const i=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,r=t.closest(i());if(r){let n=r.querySelector(`.${e.params.lazyPreloaderClass}`);!n&&e.isElement&&(r.shadowRoot?n=r.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(n=r.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),n&&n.remove())})),n&&n.remove()}},sP=(e,t)=>{if(!e.slides[t])return;const i=e.slides[t].querySelector('[loading="lazy"]');i&&i.removeAttribute("loading")},QI=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const i=e.slides.length;if(!i||!t||t<0)return;t=Math.min(t,i);const r=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),n=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const a=n,o=[a-t];o.push(...Array.from({length:t}).map((l,c)=>a+r+c)),e.slides.forEach((l,c)=>{o.includes(l.column)&&sP(e,c)});return}const s=n+r-1;if(e.params.rewind||e.params.loop)for(let a=n-t;a<=s+t;a+=1){const o=(a%i+i)%i;(o<n||o>s)&&sP(e,o)}else for(let a=Math.max(n-t,0);a<=Math.min(s+t,i-1);a+=1)a!==n&&(a>s||a<n)&&sP(e,a)};function nEe(e){const{slidesGrid:t,params:i}=e,r=e.rtlTranslate?e.translate:-e.translate;let n;for(let s=0;s<t.length;s+=1)typeof t[s+1]<"u"?r>=t[s]&&r<t[s+1]-(t[s+1]-t[s])/2?n=s:r>=t[s]&&r<t[s+1]&&(n=s+1):r>=t[s]&&(n=s);return i.normalizeSlideIndex&&(n<0||typeof n>"u")&&(n=0),n}function sEe(e){const t=this,i=t.rtlTranslate?t.translate:-t.translate,{snapGrid:r,params:n,activeIndex:s,realIndex:a,snapIndex:o}=t;let l=e,c;const u=m=>{let g=m-t.virtual.slidesBefore;return g<0&&(g=t.virtual.slides.length+g),g>=t.virtual.slides.length&&(g-=t.virtual.slides.length),g};if(typeof l>"u"&&(l=nEe(t)),r.indexOf(i)>=0)c=r.indexOf(i);else{const m=Math.min(n.slidesPerGroupSkip,l);c=m+Math.floor((l-m)/n.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),l===s&&!t.params.loop){c!==o&&(t.snapIndex=c,t.emit("snapIndexChange"));return}if(l===s&&t.params.loop&&t.virtual&&t.params.virtual.enabled){t.realIndex=u(l);return}const h=t.grid&&n.grid&&n.grid.rows>1;let f;if(t.virtual&&n.virtual.enabled&&n.loop)f=u(l);else if(h){const m=t.slides.find(v=>v.column===l);let g=parseInt(m.getAttribute("data-swiper-slide-index"),10);Number.isNaN(g)&&(g=Math.max(t.slides.indexOf(m),0)),f=Math.floor(g/n.grid.rows)}else if(t.slides[l]){const m=t.slides[l].getAttribute("data-swiper-slide-index");m?f=parseInt(m,10):f=l}else f=l;Object.assign(t,{previousSnapIndex:o,snapIndex:c,previousRealIndex:a,realIndex:f,previousIndex:s,activeIndex:l}),t.initialized&&QI(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(a!==f&&t.emit("realIndexChange"),t.emit("slideChange"))}function aEe(e,t){const i=this,r=i.params;let n=e.closest(`.${r.slideClass}, swiper-slide`);!n&&i.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(o=>{!n&&o.matches&&o.matches(`.${r.slideClass}, swiper-slide`)&&(n=o)});let s=!1,a;if(n){for(let o=0;o<i.slides.length;o+=1)if(i.slides[o]===n){s=!0,a=o;break}}if(n&&s)i.clickedSlide=n,i.virtual&&i.params.virtual.enabled?i.clickedIndex=parseInt(n.getAttribute("data-swiper-slide-index"),10):i.clickedIndex=a;else{i.clickedSlide=void 0,i.clickedIndex=void 0;return}r.slideToClickedSlide&&i.clickedIndex!==void 0&&i.clickedIndex!==i.activeIndex&&i.slideToClickedSlide()}var oEe={updateSize:Z_e,updateSlides:$_e,updateAutoHeight:J_e,updateSlidesOffset:eEe,updateSlidesProgress:tEe,updateProgress:iEe,updateSlidesClasses:rEe,updateActiveIndex:sEe,updateClickedSlide:aEe};function lEe(e){e===void 0&&(e=this.isHorizontal()?"x":"y");const t=this,{params:i,rtlTranslate:r,translate:n,wrapperEl:s}=t;if(i.virtualTranslate)return r?-n:n;if(i.cssMode)return n;let a=z_e(s,e);return a+=t.cssOverflowAdjustment(),r&&(a=-a),a||0}function cEe(e,t){const i=this,{rtlTranslate:r,params:n,wrapperEl:s,progress:a}=i;let o=0,l=0;const c=0;i.isHorizontal()?o=r?-e:e:l=e,n.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?o:l,n.cssMode?s[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-o:-l:n.virtualTranslate||(i.isHorizontal()?o-=i.cssOverflowAdjustment():l-=i.cssOverflowAdjustment(),s.style.transform=`translate3d(${o}px, ${l}px, ${c}px)`);let u;const h=i.maxTranslate()-i.minTranslate();h===0?u=0:u=(e-i.minTranslate())/h,u!==a&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)}function uEe(){return-this.snapGrid[0]}function hEe(){return-this.snapGrid[this.snapGrid.length-1]}function dEe(e,t,i,r,n){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),i===void 0&&(i=!0),r===void 0&&(r=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(r&&e>l?u=l:r&&e<c?u=c:u=e,s.updateProgress(u),a.cssMode){const h=s.isHorizontal();if(t===0)o[h?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return Aee({swiper:s,targetPosition:-u,side:h?"left":"top"}),!0;o.scrollTo({[h?"left":"top"]:-u,behavior:"smooth"})}return!0}return t===0?(s.setTransition(0),s.setTranslate(u),i&&(s.emit("beforeTransitionStart",t,n),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(u),i&&(s.emit("beforeTransitionStart",t,n),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(f){!s||s.destroyed||f.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,i&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var fEe={getTranslate:lEe,setTranslate:cEe,minTranslate:uEe,maxTranslate:hEe,translateTo:dEe};function pEe(e,t){const i=this;i.params.cssMode||(i.wrapperEl.style.transitionDuration=`${e}ms`,i.wrapperEl.style.transitionDelay=e===0?"0ms":""),i.emit("setTransition",e,t)}function Pee(e){let{swiper:t,runCallbacks:i,direction:r,step:n}=e;const{activeIndex:s,previousIndex:a}=t;let o=r;o||(s>a?o="next":s<a?o="prev":o="reset"),t.emit(`transition${n}`),i&&o==="reset"?t.emit(`slideResetTransition${n}`):i&&s!==a&&(t.emit(`slideChangeTransition${n}`),o==="next"?t.emit(`slideNextTransition${n}`):t.emit(`slidePrevTransition${n}`))}function mEe(e,t){e===void 0&&(e=!0);const i=this,{params:r}=i;r.cssMode||(r.autoHeight&&i.updateAutoHeight(),Pee({swiper:i,runCallbacks:e,direction:t,step:"Start"}))}function gEe(e,t){e===void 0&&(e=!0);const i=this,{params:r}=i;i.animating=!1,!r.cssMode&&(i.setTransition(0),Pee({swiper:i,runCallbacks:e,direction:t,step:"End"}))}var vEe={setTransition:pEe,transitionStart:mEe,transitionEnd:gEe};function yEe(e,t,i,r,n){e===void 0&&(e=0),i===void 0&&(i=!0),typeof e=="string"&&(e=parseInt(e,10));const s=this;let a=e;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:h,rtlTranslate:f,wrapperEl:m,enabled:g}=s;if(!g&&!r&&!n||s.destroyed||s.animating&&o.preventInteractionOnTransition)return!1;typeof t>"u"&&(t=s.params.speed);const v=Math.min(s.params.slidesPerGroupSkip,a);let x=v+Math.floor((a-v)/s.params.slidesPerGroup);x>=l.length&&(x=l.length-1);const b=-l[x];if(o.normalizeSlideIndex)for(let D=0;D<c.length;D+=1){const T=-Math.floor(b*100),R=Math.floor(c[D]*100),O=Math.floor(c[D+1]*100);typeof c[D+1]<"u"?T>=R&&T<O-(O-R)/2?a=D:T>=R&&T<O&&(a=D+1):T>=R&&(a=D)}if(s.initialized&&a!==h&&(!s.allowSlideNext&&(f?b>s.translate&&b>s.minTranslate():b<s.translate&&b<s.minTranslate())||!s.allowSlidePrev&&b>s.translate&&b>s.maxTranslate()&&(h||0)!==a))return!1;a!==(u||0)&&i&&s.emit("beforeSlideChangeStart"),s.updateProgress(b);let S;a>h?S="next":a<h?S="prev":S="reset";const _=s.virtual&&s.params.virtual.enabled;if(!(_&&n)&&(f&&-b===s.translate||!f&&b===s.translate))return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),o.effect!=="slide"&&s.setTranslate(b),S!=="reset"&&(s.transitionStart(i,S),s.transitionEnd(i,S)),!1;if(o.cssMode){const D=s.isHorizontal(),T=f?b:-b;if(t===0)_&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),_&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{m[D?"scrollLeft":"scrollTop"]=T})):m[D?"scrollLeft":"scrollTop"]=T,_&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1});else{if(!s.support.smoothScroll)return Aee({swiper:s,targetPosition:T,side:D?"left":"top"}),!0;m.scrollTo({[D?"left":"top"]:T,behavior:"smooth"})}return!0}const C=Mee().isSafari;return _&&!n&&C&&s.isElement&&s.virtual.update(!1,!1,a),s.setTransition(t),s.setTranslate(b),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,r),s.transitionStart(i,S),t===0?s.transitionEnd(i,S):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(T){!s||s.destroyed||T.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(i,S))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function xEe(e,t,i,r){e===void 0&&(e=0),i===void 0&&(i=!0),typeof e=="string"&&(e=parseInt(e,10));const n=this;if(n.destroyed)return;typeof t>"u"&&(t=n.params.speed);const s=n.grid&&n.params.grid&&n.params.grid.rows>1;let a=e;if(n.params.loop)if(n.virtual&&n.params.virtual.enabled)a=a+n.virtual.slidesBefore;else{let o;if(s){const f=a*n.params.grid.rows;o=n.slides.find(m=>m.getAttribute("data-swiper-slide-index")*1===f).column}else o=n.getSlideIndexByData(a);const l=s?Math.ceil(n.slides.length/n.params.grid.rows):n.slides.length,{centeredSlides:c}=n.params;let u=n.params.slidesPerView;u==="auto"?u=n.slidesPerViewDynamic():(u=Math.ceil(parseFloat(n.params.slidesPerView,10)),c&&u%2===0&&(u=u+1));let h=l-o<u;if(c&&(h=h||o<Math.ceil(u/2)),r&&c&&n.params.slidesPerView!=="auto"&&!s&&(h=!1),h){const f=c?o<n.activeIndex?"prev":"next":o-n.activeIndex-1<n.params.slidesPerView?"next":"prev";n.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?o+1:o-l+1,slideRealIndex:f==="next"?n.realIndex:void 0})}if(s){const f=a*n.params.grid.rows;a=n.slides.find(m=>m.getAttribute("data-swiper-slide-index")*1===f).column}else a=n.getSlideIndexByData(a)}return requestAnimationFrame(()=>{n.slideTo(a,t,i,r)}),n}function bEe(e,t,i){t===void 0&&(t=!0);const r=this,{enabled:n,params:s,animating:a}=r;if(!n||r.destroyed)return r;typeof e>"u"&&(e=r.params.speed);let o=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(o=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<s.slidesPerGroupSkip?1:o,c=r.virtual&&s.virtual.enabled;if(s.loop){if(a&&!c&&s.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+l,e,t,i)}),!0}return s.rewind&&r.isEnd?r.slideTo(0,e,t,i):r.slideTo(r.activeIndex+l,e,t,i)}function wEe(e,t,i){t===void 0&&(t=!0);const r=this,{params:n,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=r;if(!l||r.destroyed)return r;typeof e>"u"&&(e=r.params.speed);const u=r.virtual&&n.virtual.enabled;if(n.loop){if(c&&!u&&n.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const h=o?r.translate:-r.translate;function f(S){return S<0?-Math.floor(Math.abs(S)):Math.floor(S)}const m=f(h),g=s.map(S=>f(S)),v=n.freeMode&&n.freeMode.enabled;let x=s[g.indexOf(m)-1];if(typeof x>"u"&&(n.cssMode||v)){let S;s.forEach((_,A)=>{m>=_&&(S=A)}),typeof S<"u"&&(x=v?s[S]:s[S>0?S-1:S])}let b=0;if(typeof x<"u"&&(b=a.indexOf(x),b<0&&(b=r.activeIndex-1),n.slidesPerView==="auto"&&n.slidesPerGroup===1&&n.slidesPerGroupAuto&&(b=b-r.slidesPerViewDynamic("previous",!0)+1,b=Math.max(b,0))),n.rewind&&r.isBeginning){const S=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(S,e,t,i)}else if(n.loop&&r.activeIndex===0&&n.cssMode)return requestAnimationFrame(()=>{r.slideTo(b,e,t,i)}),!0;return r.slideTo(b,e,t,i)}function SEe(e,t,i){t===void 0&&(t=!0);const r=this;if(!r.destroyed)return typeof e>"u"&&(e=r.params.speed),r.slideTo(r.activeIndex,e,t,i)}function _Ee(e,t,i,r){t===void 0&&(t=!0),r===void 0&&(r=.5);const n=this;if(n.destroyed)return;typeof e>"u"&&(e=n.params.speed);let s=n.activeIndex;const a=Math.min(n.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/n.params.slidesPerGroup),l=n.rtlTranslate?n.translate:-n.translate;if(l>=n.snapGrid[o]){const c=n.snapGrid[o],u=n.snapGrid[o+1];l-c>(u-c)*r&&(s+=n.params.slidesPerGroup)}else{const c=n.snapGrid[o-1],u=n.snapGrid[o];l-c<=(u-c)*r&&(s-=n.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,n.slidesGrid.length-1),n.slideTo(s,e,t,i)}function EEe(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:i}=e,r=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let n=e.getSlideIndexWhenGrid(e.clickedIndex),s;const a=e.isElement?"swiper-slide":`.${t.slideClass}`,o=e.grid&&e.params.grid&&e.params.grid.rows>1;if(t.loop){if(e.animating)return;s=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?e.slideToLoop(s):n>(o?(e.slides.length-r)/2-(e.params.grid.rows-1):e.slides.length-r)?(e.loopFix(),n=e.getSlideIndex(au(i,`${a}[data-swiper-slide-index="${s}"]`)[0]),Eee(()=>{e.slideTo(n)})):e.slideTo(n)}else e.slideTo(n)}var AEe={slideTo:yEe,slideToLoop:xEe,slideNext:bEe,slidePrev:wEe,slideReset:SEe,slideToClosest:_Ee,slideToClickedSlide:EEe};function TEe(e,t){const i=this,{params:r,slidesEl:n}=i;if(!r.loop||i.virtual&&i.params.virtual.enabled)return;const s=()=>{au(n,`.${r.slideClass}, swiper-slide`).forEach((m,g)=>{m.setAttribute("data-swiper-slide-index",g)})},a=()=>{const f=au(n,`.${r.slideBlankClass}`);f.forEach(m=>{m.remove()}),f.length>0&&(i.recalcSlides(),i.updateSlides())},o=i.grid&&r.grid&&r.grid.rows>1;r.loopAddBlankSlides&&(r.slidesPerGroup>1||o)&&a();const l=r.slidesPerGroup*(o?r.grid.rows:1),c=i.slides.length%l!==0,u=o&&i.slides.length%r.grid.rows!==0,h=f=>{for(let m=0;m<f;m+=1){const g=i.isElement?PA("swiper-slide",[r.slideBlankClass]):PA("div",[r.slideClass,r.slideBlankClass]);i.slidesEl.append(g)}};if(c){if(r.loopAddBlankSlides){const f=l-i.slides.length%l;h(f),i.recalcSlides(),i.updateSlides()}else MA("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(u){if(r.loopAddBlankSlides){const f=r.grid.rows-i.slides.length%r.grid.rows;h(f),i.recalcSlides(),i.updateSlides()}else MA("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();i.loopFix({slideRealIndex:e,direction:r.centeredSlides?void 0:"next",initial:t})}function CEe(e){let{slideRealIndex:t,slideTo:i=!0,direction:r,setTranslate:n,activeSlideIndex:s,initial:a,byController:o,byMousewheel:l}=e===void 0?{}:e;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:u,allowSlidePrev:h,allowSlideNext:f,slidesEl:m,params:g}=c,{centeredSlides:v,initialSlide:x}=g;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&g.virtual.enabled){i&&(!g.centeredSlides&&c.snapIndex===0?c.slideTo(c.virtual.slides.length,0,!1,!0):g.centeredSlides&&c.snapIndex<g.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0)),c.allowSlidePrev=h,c.allowSlideNext=f,c.emit("loopFix");return}let b=g.slidesPerView;b==="auto"?b=c.slidesPerViewDynamic():(b=Math.ceil(parseFloat(g.slidesPerView,10)),v&&b%2===0&&(b=b+1));const S=g.slidesPerGroupAuto?b:g.slidesPerGroup;let _=v?Math.max(S,Math.ceil(b/2)):S;_%S!==0&&(_+=S-_%S),_+=g.loopAdditionalSlides,c.loopedSlides=_;const A=c.grid&&g.grid&&g.grid.rows>1;u.length<b+_||c.params.effect==="cards"&&u.length<b+_*2?MA("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):A&&g.grid.fill==="row"&&MA("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const M=[],C=[],D=A?Math.ceil(u.length/g.grid.rows):u.length,T=a&&D-x<b&&!v;let R=T?x:c.activeIndex;typeof s>"u"?s=c.getSlideIndex(u.find(q=>q.classList.contains(g.slideActiveClass))):R=s;const O=r==="next"||!r,L=r==="prev"||!r;let k=0,B=0;const $=(A?u[s].column:s)+(v&&typeof n>"u"?-b/2+.5:0);if($<_){k=Math.max(_-$,S);for(let q=0;q<_-$;q+=1){const Y=q-Math.floor(q/D)*D;if(A){const X=D-Y-1;for(let ne=u.length-1;ne>=0;ne-=1)u[ne].column===X&&M.push(ne)}else M.push(D-Y-1)}}else if($+b>D-_){B=Math.max($-(D-_*2),S),T&&(B=Math.max(B,b-D+x+1));for(let q=0;q<B;q+=1){const Y=q-Math.floor(q/D)*D;A?u.forEach((X,ne)=>{X.column===Y&&C.push(ne)}):C.push(Y)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),c.params.effect==="cards"&&u.length<b+_*2&&(C.includes(s)&&C.splice(C.indexOf(s),1),M.includes(s)&&M.splice(M.indexOf(s),1)),L&&M.forEach(q=>{u[q].swiperLoopMoveDOM=!0,m.prepend(u[q]),u[q].swiperLoopMoveDOM=!1}),O&&C.forEach(q=>{u[q].swiperLoopMoveDOM=!0,m.append(u[q]),u[q].swiperLoopMoveDOM=!1}),c.recalcSlides(),g.slidesPerView==="auto"?c.updateSlides():A&&(M.length>0&&L||C.length>0&&O)&&c.slides.forEach((q,Y)=>{c.grid.updateSlide(Y,q,c.slides)}),g.watchSlidesProgress&&c.updateSlidesOffset(),i){if(M.length>0&&L){if(typeof t>"u"){const q=c.slidesGrid[R],X=c.slidesGrid[R+k]-q;l?c.setTranslate(c.translate-X):(c.slideTo(R+Math.ceil(k),0,!1,!0),n&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-X,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-X))}else if(n){const q=A?M.length/g.grid.rows:M.length;c.slideTo(c.activeIndex+q,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(C.length>0&&O)if(typeof t>"u"){const q=c.slidesGrid[R],X=c.slidesGrid[R-B]-q;l?c.setTranslate(c.translate-X):(c.slideTo(R-B,0,!1,!0),n&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-X,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-X))}else{const q=A?C.length/g.grid.rows:C.length;c.slideTo(c.activeIndex-q,0,!1,!0)}}if(c.allowSlidePrev=h,c.allowSlideNext=f,c.controller&&c.controller.control&&!o){const q={slideRealIndex:t,direction:r,setTranslate:n,activeSlideIndex:s,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(Y=>{!Y.destroyed&&Y.params.loop&&Y.loopFix({...q,slideTo:Y.params.slidesPerView===g.slidesPerView?i:!1})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...q,slideTo:c.controller.control.params.slidesPerView===g.slidesPerView?i:!1})}c.emit("loopFix")}function MEe(){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||!i||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const r=[];e.slides.forEach(n=>{const s=typeof n.swiperSlideIndex>"u"?n.getAttribute("data-swiper-slide-index")*1:n.swiperSlideIndex;r[s]=n}),e.slides.forEach(n=>{n.removeAttribute("data-swiper-slide-index")}),r.forEach(n=>{i.append(n)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}var PEe={loopCreate:TEe,loopFix:CEe,loopDestroy:MEe};function DEe(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const i=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),i.style.cursor="move",i.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function IEe(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}var REe={setGrabCursor:DEe,unsetGrabCursor:IEe};function OEe(e,t){t===void 0&&(t=this);function i(r){if(!r||r===yu()||r===Za())return null;r.assignedSlot&&(r=r.assignedSlot);const n=r.closest(e);return!n&&!r.getRootNode?null:n||i(r.getRootNode().host)}return i(t)}function nF(e,t,i){const r=Za(),{params:n}=e,s=n.edgeSwipeDetection,a=n.edgeSwipeThreshold;return s&&(i<=a||i>=r.innerWidth-a)?s==="prevent"?(t.preventDefault(),!0):!1:!0}function LEe(e){const t=this,i=yu();let r=e;r.originalEvent&&(r=r.originalEvent);const n=t.touchEventsData;if(r.type==="pointerdown"){if(n.pointerId!==null&&n.pointerId!==r.pointerId)return;n.pointerId=r.pointerId}else r.type==="touchstart"&&r.targetTouches.length===1&&(n.touchId=r.targetTouches[0].identifier);if(r.type==="touchstart"){nF(t,r,r.targetTouches[0].pageX);return}const{params:s,touches:a,enabled:o}=t;if(!o||!s.simulateTouch&&r.pointerType==="mouse"||t.animating&&s.preventInteractionOnTransition)return;!t.animating&&s.cssMode&&s.loop&&t.loopFix();let l=r.target;if(s.touchEventsTarget==="wrapper"&&!N_e(l,t.wrapperEl)||"which"in r&&r.which===3||"button"in r&&r.button>0||n.isTouched&&n.isMoved)return;const c=!!s.noSwipingClass&&s.noSwipingClass!=="",u=r.composedPath?r.composedPath():r.path;c&&r.target&&r.target.shadowRoot&&u&&(l=u[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(r.target&&r.target.shadowRoot);if(s.noSwiping&&(f?OEe(h,l):l.closest(h))){t.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;a.currentX=r.pageX,a.currentY=r.pageY;const m=a.currentX,g=a.currentY;if(!nF(t,r,m))return;Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=m,a.startY=g,n.touchStartTime=CA(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,s.threshold>0&&(n.allowThresholdMove=!1);let v=!0;l.matches(n.focusableElements)&&(v=!1,l.nodeName==="SELECT"&&(n.isTouched=!1)),i.activeElement&&i.activeElement.matches(n.focusableElements)&&i.activeElement!==l&&(r.pointerType==="mouse"||r.pointerType!=="mouse"&&!l.matches(n.focusableElements))&&i.activeElement.blur();const x=v&&t.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||x)&&!l.isContentEditable&&r.preventDefault(),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.animating&&!s.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",r)}function kEe(e){const t=yu(),i=this,r=i.touchEventsData,{params:n,touches:s,rtlTranslate:a,enabled:o}=i;if(!o||!n.simulateTouch&&e.pointerType==="mouse")return;let l=e;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(r.touchId!==null||l.pointerId!==r.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].find(M=>M.identifier===r.touchId),!c||c.identifier!==r.touchId)return}else c=l;if(!r.isTouched){r.startMoving&&r.isScrolling&&i.emit("touchMoveOpposite",l);return}const u=c.pageX,h=c.pageY;if(l.preventedByNestedSwiper){s.startX=u,s.startY=h;return}if(!i.allowTouchMove){l.target.matches(r.focusableElements)||(i.allowClick=!1),r.isTouched&&(Object.assign(s,{startX:u,startY:h,currentX:u,currentY:h}),r.touchStartTime=CA());return}if(n.touchReleaseOnEdges&&!n.loop)if(i.isVertical()){if(h<s.startY&&i.translate<=i.maxTranslate()||h>s.startY&&i.translate>=i.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else{if(a&&(u>s.startX&&-i.translate<=i.maxTranslate()||u<s.startX&&-i.translate>=i.minTranslate()))return;if(!a&&(u<s.startX&&i.translate<=i.maxTranslate()||u>s.startX&&i.translate>=i.minTranslate()))return}if(t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==l.target&&l.pointerType!=="mouse"&&t.activeElement.blur(),t.activeElement&&l.target===t.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,i.allowClick=!1;return}r.allowTouchCallbacks&&i.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=u,s.currentY=h;const f=s.currentX-s.startX,m=s.currentY-s.startY;if(i.params.threshold&&Math.sqrt(f**2+m**2)<i.params.threshold)return;if(typeof r.isScrolling>"u"){let M;i.isHorizontal()&&s.currentY===s.startY||i.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:f*f+m*m>=25&&(M=Math.atan2(Math.abs(m),Math.abs(f))*180/Math.PI,r.isScrolling=i.isHorizontal()?M>n.touchAngle:90-M>n.touchAngle)}if(r.isScrolling&&i.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(r.startMoving=!0),r.isScrolling||l.type==="touchmove"&&r.preventTouchMoveFromPointerMove){r.isTouched=!1;return}if(!r.startMoving)return;i.allowClick=!1,!n.cssMode&&l.cancelable&&l.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&l.stopPropagation();let g=i.isHorizontal()?f:m,v=i.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;n.oneWayMovement&&(g=Math.abs(g)*(a?1:-1),v=Math.abs(v)*(a?1:-1)),s.diff=g,g*=n.touchRatio,a&&(g=-g,v=-v);const x=i.touchesDirection;i.swipeDirection=g>0?"prev":"next",i.touchesDirection=v>0?"prev":"next";const b=i.params.loop&&!n.cssMode,S=i.touchesDirection==="next"&&i.allowSlideNext||i.touchesDirection==="prev"&&i.allowSlidePrev;if(!r.isMoved){if(b&&S&&i.loopFix({direction:i.swipeDirection}),r.startTranslate=i.getTranslate(),i.setTransition(0),i.animating){const M=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});i.wrapperEl.dispatchEvent(M)}r.allowMomentumBounce=!1,n.grabCursor&&(i.allowSlideNext===!0||i.allowSlidePrev===!0)&&i.setGrabCursor(!0),i.emit("sliderFirstMove",l)}if(new Date().getTime(),n._loopSwapReset!==!1&&r.isMoved&&r.allowThresholdMove&&x!==i.touchesDirection&&b&&S&&Math.abs(g)>=1){Object.assign(s,{startX:u,startY:h,currentX:u,currentY:h,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;return}i.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=g+r.startTranslate;let _=!0,A=n.resistanceRatio;if(n.touchReleaseOnEdges&&(A=0),g>0?(b&&S&&r.allowThresholdMove&&r.currentTranslate>(n.centeredSlides?i.minTranslate()-i.slidesSizesGrid[i.activeIndex+1]-(n.slidesPerView!=="auto"&&i.slides.length-n.slidesPerView>=2?i.slidesSizesGrid[i.activeIndex+1]+i.params.spaceBetween:0)-i.params.spaceBetween:i.minTranslate())&&i.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>i.minTranslate()&&(_=!1,n.resistance&&(r.currentTranslate=i.minTranslate()-1+(-i.minTranslate()+r.startTranslate+g)**A))):g<0&&(b&&S&&r.allowThresholdMove&&r.currentTranslate<(n.centeredSlides?i.maxTranslate()+i.slidesSizesGrid[i.slidesSizesGrid.length-1]+i.params.spaceBetween+(n.slidesPerView!=="auto"&&i.slides.length-n.slidesPerView>=2?i.slidesSizesGrid[i.slidesSizesGrid.length-1]+i.params.spaceBetween:0):i.maxTranslate())&&i.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:i.slides.length-(n.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(parseFloat(n.slidesPerView,10)))}),r.currentTranslate<i.maxTranslate()&&(_=!1,n.resistance&&(r.currentTranslate=i.maxTranslate()+1-(i.maxTranslate()-r.startTranslate-g)**A))),_&&(l.preventedByNestedSwiper=!0),!i.allowSlideNext&&i.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&i.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&!i.allowSlideNext&&(r.currentTranslate=r.startTranslate),n.threshold>0)if(Math.abs(g)>n.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,s.diff=i.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{r.currentTranslate=r.startTranslate;return}!n.followFinger||n.cssMode||((n.freeMode&&n.freeMode.enabled&&i.freeMode||n.watchSlidesProgress)&&(i.updateActiveIndex(),i.updateSlidesClasses()),n.freeMode&&n.freeMode.enabled&&i.freeMode&&i.freeMode.onTouchMove(),i.updateProgress(r.currentTranslate),i.setTranslate(r.currentTranslate))}function zEe(e){const t=this,i=t.touchEventsData;let r=e;r.originalEvent&&(r=r.originalEvent);let n;if(r.type==="touchend"||r.type==="touchcancel"){if(n=[...r.changedTouches].find(M=>M.identifier===i.touchId),!n||n.identifier!==i.touchId)return}else{if(i.touchId!==null||r.pointerId!==i.pointerId)return;n=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(t.browser.isSafari||t.browser.isWebView)))return;i.pointerId=null,i.touchId=null;const{params:a,touches:o,rtlTranslate:l,slidesGrid:c,enabled:u}=t;if(!u||!a.simulateTouch&&r.pointerType==="mouse")return;if(i.allowTouchCallbacks&&t.emit("touchEnd",r),i.allowTouchCallbacks=!1,!i.isTouched){i.isMoved&&a.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,i.startMoving=!1;return}a.grabCursor&&i.isMoved&&i.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const h=CA(),f=h-i.touchStartTime;if(t.allowClick){const M=r.path||r.composedPath&&r.composedPath();t.updateClickedSlide(M&&M[0]||r.target,M),t.emit("tap click",r),f<300&&h-i.lastClickTime<300&&t.emit("doubleTap doubleClick",r)}if(i.lastClickTime=CA(),Eee(()=>{t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||o.diff===0&&!i.loopSwapReset||i.currentTranslate===i.startTranslate&&!i.loopSwapReset){i.isTouched=!1,i.isMoved=!1,i.startMoving=!1;return}i.isTouched=!1,i.isMoved=!1,i.startMoving=!1;let m;if(a.followFinger?m=l?t.translate:-t.translate:m=-i.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:m});return}const g=m>=-t.maxTranslate()&&!t.params.loop;let v=0,x=t.slidesSizesGrid[0];for(let M=0;M<c.length;M+=M<a.slidesPerGroupSkip?1:a.slidesPerGroup){const C=M<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof c[M+C]<"u"?(g||m>=c[M]&&m<c[M+C])&&(v=M,x=c[M+C]-c[M]):(g||m>=c[M])&&(v=M,x=c[c.length-1]-c[c.length-2])}let b=null,S=null;a.rewind&&(t.isBeginning?S=a.virtual&&a.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(b=0));const _=(m-c[v])/x,A=v<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(f>a.longSwipesMs){if(!a.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(_>=a.longSwipesRatio?t.slideTo(a.rewind&&t.isEnd?b:v+A):t.slideTo(v)),t.swipeDirection==="prev"&&(_>1-a.longSwipesRatio?t.slideTo(v+A):S!==null&&_<0&&Math.abs(_)>a.longSwipesRatio?t.slideTo(S):t.slideTo(v))}else{if(!a.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(r.target===t.navigation.nextEl||r.target===t.navigation.prevEl)?r.target===t.navigation.nextEl?t.slideTo(v+A):t.slideTo(v):(t.swipeDirection==="next"&&t.slideTo(b!==null?b:v+A),t.swipeDirection==="prev"&&t.slideTo(S!==null?S:v))}}function sF(){const e=this,{params:t,el:i}=e;if(i&&i.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:n,snapGrid:s}=e,a=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const o=a&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!o?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!a?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=n,e.allowSlideNext=r,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}function BEe(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function jEe(){const e=this,{wrapperEl:t,rtlTranslate:i,enabled:r}=e;if(!r)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let n;const s=e.maxTranslate()-e.minTranslate();s===0?n=0:n=(e.translate-e.minTranslate())/s,n!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function NEe(e){const t=this;LE(t,e.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}function VEe(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const Dee=(e,t)=>{const i=yu(),{params:r,el:n,wrapperEl:s,device:a}=e,o=!!r.nested,l=t==="on"?"addEventListener":"removeEventListener",c=t;!n||typeof n=="string"||(i[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:o}),n[l]("touchstart",e.onTouchStart,{passive:!1}),n[l]("pointerdown",e.onTouchStart,{passive:!1}),i[l]("touchmove",e.onTouchMove,{passive:!1,capture:o}),i[l]("pointermove",e.onTouchMove,{passive:!1,capture:o}),i[l]("touchend",e.onTouchEnd,{passive:!0}),i[l]("pointerup",e.onTouchEnd,{passive:!0}),i[l]("pointercancel",e.onTouchEnd,{passive:!0}),i[l]("touchcancel",e.onTouchEnd,{passive:!0}),i[l]("pointerout",e.onTouchEnd,{passive:!0}),i[l]("pointerleave",e.onTouchEnd,{passive:!0}),i[l]("contextmenu",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&n[l]("click",e.onClick,!0),r.cssMode&&s[l]("scroll",e.onScroll),r.updateOnWindowResize?e[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",sF,!0):e[c]("observerUpdate",sF,!0),n[l]("load",e.onLoad,{capture:!0}))};function UEe(){const e=this,{params:t}=e;e.onTouchStart=LEe.bind(e),e.onTouchMove=kEe.bind(e),e.onTouchEnd=zEe.bind(e),e.onDocumentTouchStart=VEe.bind(e),t.cssMode&&(e.onScroll=jEe.bind(e)),e.onClick=BEe.bind(e),e.onLoad=NEe.bind(e),Dee(e,"on")}function FEe(){Dee(this,"off")}var HEe={attachEvents:UEe,detachEvents:FEe};const aF=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function GEe(){const e=this,{realIndex:t,initialized:i,params:r,el:n}=e,s=r.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const a=yu(),o=r.breakpointsBase==="window"||!r.breakpointsBase?r.breakpointsBase:"container",l=["window","container"].includes(r.breakpointsBase)||!r.breakpointsBase?e.el:a.querySelector(r.breakpointsBase),c=e.getBreakpoint(s,o,l);if(!c||e.currentBreakpoint===c)return;const h=(c in s?s[c]:void 0)||e.originalParams,f=aF(e,r),m=aF(e,h),g=e.params.grabCursor,v=h.grabCursor,x=r.enabled;f&&!m?(n.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),e.emitContainerClasses()):!f&&m&&(n.classList.add(`${r.containerModifierClass}grid`),(h.grid.fill&&h.grid.fill==="column"||!h.grid.fill&&r.grid.fill==="column")&&n.classList.add(`${r.containerModifierClass}grid-column`),e.emitContainerClasses()),g&&!v?e.unsetGrabCursor():!g&&v&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(C=>{if(typeof h[C]>"u")return;const D=r[C]&&r[C].enabled,T=h[C]&&h[C].enabled;D&&!T&&e[C].disable(),!D&&T&&e[C].enable()});const b=h.direction&&h.direction!==r.direction,S=r.loop&&(h.slidesPerView!==r.slidesPerView||b),_=r.loop;b&&i&&e.changeDirection(),ko(e.params,h);const A=e.params.enabled,M=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),x&&!A?e.disable():!x&&A&&e.enable(),e.currentBreakpoint=c,e.emit("_beforeBreakpoint",h),i&&(S?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!_&&M?(e.loopCreate(t),e.updateSlides()):_&&!M&&e.loopDestroy()),e.emit("breakpoint",h)}function WEe(e,t,i){if(t===void 0&&(t="window"),!e||t==="container"&&!i)return;let r=!1;const n=Za(),s=t==="window"?n.innerHeight:i.clientHeight,a=Object.keys(e).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:s*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:c}=a[o];t==="window"?n.matchMedia(`(min-width: ${c}px)`).matches&&(r=l):c<=i.clientWidth&&(r=l)}return r||"max"}var qEe={setBreakpoint:GEe,getBreakpoint:WEe};function XEe(e,t){const i=[];return e.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(n=>{r[n]&&i.push(t+n)}):typeof r=="string"&&i.push(t+r)}),i}function YEe(){const e=this,{classNames:t,params:i,rtl:r,el:n,device:s}=e,a=XEe(["initialized",i.direction,{"free-mode":e.params.freeMode&&i.freeMode.enabled},{autoheight:i.autoHeight},{rtl:r},{grid:i.grid&&i.grid.rows>1},{"grid-column":i.grid&&i.grid.rows>1&&i.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":i.cssMode},{centered:i.cssMode&&i.centeredSlides},{"watch-progress":i.watchSlidesProgress}],i.containerModifierClass);t.push(...a),n.classList.add(...t),e.emitContainerClasses()}function QEe(){const e=this,{el:t,classNames:i}=e;!t||typeof t=="string"||(t.classList.remove(...i),e.emitContainerClasses())}var KEe={addClasses:YEe,removeClasses:QEe};function ZEe(){const e=this,{isLocked:t,params:i}=e,{slidesOffsetBefore:r}=i;if(r){const n=e.slides.length-1,s=e.slidesGrid[n]+e.slidesSizesGrid[n]+r*2;e.isLocked=e.size>s}else e.isLocked=e.snapGrid.length===1;i.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),i.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}var $Ee={checkOverflow:ZEe},KI={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function JEe(e,t){return function(r){r===void 0&&(r={});const n=Object.keys(r)[0],s=r[n];if(typeof s!="object"||s===null){ko(t,r);return}if(e[n]===!0&&(e[n]={enabled:!0}),n==="navigation"&&e[n]&&e[n].enabled&&!e[n].prevEl&&!e[n].nextEl&&(e[n].auto=!0),["pagination","scrollbar"].indexOf(n)>=0&&e[n]&&e[n].enabled&&!e[n].el&&(e[n].auto=!0),!(n in e&&"enabled"in s)){ko(t,r);return}typeof e[n]=="object"&&!("enabled"in e[n])&&(e[n].enabled=!0),e[n]||(e[n]={enabled:!1}),ko(t,r)}}const aP={eventsEmitter:K_e,update:oEe,translate:fEe,transition:vEe,slide:AEe,loop:PEe,grabCursor:REe,events:HEe,breakpoints:qEe,checkOverflow:$Ee,classes:KEe},oP={};let KL=class gh{constructor(){let t,i;for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];n.length===1&&n[0].constructor&&Object.prototype.toString.call(n[0]).slice(8,-1)==="Object"?i=n[0]:[t,i]=n,i||(i={}),i=ko({},i),t&&!i.el&&(i.el=t);const a=yu();if(i.el&&typeof i.el=="string"&&a.querySelectorAll(i.el).length>1){const u=[];return a.querySelectorAll(i.el).forEach(h=>{const f=ko({},i,{el:h});u.push(new gh(f))}),u}const o=this;o.__swiper__=!0,o.support=Tee(),o.device=Cee({userAgent:i.userAgent}),o.browser=Mee(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],i.modules&&Array.isArray(i.modules)&&o.modules.push(...i.modules);const l={};o.modules.forEach(u=>{u({params:i,swiper:o,extendParams:JEe(i,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=ko({},KI,l);return o.params=ko({},c,oP,i),o.originalParams=ko({},o.params),o.passedParams=ko({},i),o.params&&o.params.on&&Object.keys(o.params.on).forEach(u=>{o.on(u,o.params.on[u])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){const{slidesEl:i,params:r}=this,n=au(i,`.${r.slideClass}, swiper-slide`),s=eF(n[0]);return eF(t)-s}getSlideIndexByData(t){return this.getSlideIndex(this.slides.find(i=>i.getAttribute("data-swiper-slide-index")*1===t))}getSlideIndexWhenGrid(t){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?t=Math.floor(t/this.params.grid.rows):this.params.grid.fill==="row"&&(t=t%Math.ceil(this.slides.length/this.params.grid.rows))),t}recalcSlides(){const t=this,{slidesEl:i,params:r}=t;t.slides=au(i,`.${r.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,i){const r=this;t=Math.min(Math.max(t,0),1);const n=r.minTranslate(),a=(r.maxTranslate()-n)*t+n;r.translateTo(a,typeof i>"u"?0:i),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const i=t.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",i.join(" "))}getSlideClasses(t){const i=this;return i.destroyed?"":t.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(i.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const i=[];t.slides.forEach(r=>{const n=t.getSlideClasses(r);i.push({slideEl:r,classNames:n}),t.emit("_slideClass",r,n)}),t.emit("_slideClasses",i)}slidesPerViewDynamic(t,i){t===void 0&&(t="current"),i===void 0&&(i=!1);const r=this,{params:n,slides:s,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:c}=r;let u=1;if(typeof n.slidesPerView=="number")return n.slidesPerView;if(n.centeredSlides){let h=s[c]?Math.ceil(s[c].swiperSlideSize):0,f;for(let m=c+1;m<s.length;m+=1)s[m]&&!f&&(h+=Math.ceil(s[m].swiperSlideSize),u+=1,h>l&&(f=!0));for(let m=c-1;m>=0;m-=1)s[m]&&!f&&(h+=s[m].swiperSlideSize,u+=1,h>l&&(f=!0))}else if(t==="current")for(let h=c+1;h<s.length;h+=1)(i?a[h]+o[h]-a[c]<l:a[h]-a[c]<l)&&(u+=1);else for(let h=c-1;h>=0;h-=1)a[c]-a[h]<l&&(u+=1);return u}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:i,params:r}=t;r.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&LE(t,a)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function n(){const a=t.rtlTranslate?t.translate*-1:t.translate,o=Math.min(Math.max(a,t.maxTranslate()),t.minTranslate());t.setTranslate(o),t.updateActiveIndex(),t.updateSlidesClasses()}let s;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)n(),r.autoHeight&&t.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&t.isEnd&&!r.centeredSlides){const a=t.virtual&&r.virtual.enabled?t.virtual.slides:t.slides;s=t.slideTo(a.length-1,0,!1,!0)}else s=t.slideTo(t.activeIndex,0,!1,!0);s||n()}r.watchOverflow&&i!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,i){i===void 0&&(i=!0);const r=this,n=r.params.direction;return t||(t=n==="horizontal"?"vertical":"horizontal"),t===n||t!=="horizontal"&&t!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${n}`),r.el.classList.add(`${r.params.containerModifierClass}${t}`),r.emitContainerClasses(),r.params.direction=t,r.slides.forEach(s=>{t==="vertical"?s.style.width="":s.style.height=""}),r.emit("changeDirection"),i&&r.update()),r}changeLanguageDirection(t){const i=this;i.rtl&&t==="rtl"||!i.rtl&&t==="ltr"||(i.rtl=t==="rtl",i.rtlTranslate=i.params.direction==="horizontal"&&i.rtl,i.rtl?(i.el.classList.add(`${i.params.containerModifierClass}rtl`),i.el.dir="rtl"):(i.el.classList.remove(`${i.params.containerModifierClass}rtl`),i.el.dir="ltr"),i.update())}mount(t){const i=this;if(i.mounted)return!0;let r=t||i.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=i,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName===i.params.swiperElementNodeName.toUpperCase()&&(i.isElement=!0);const n=()=>`.${(i.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(n()):au(r,n())[0];return!a&&i.params.createElements&&(a=PA("div",i.params.wrapperClass),r.append(a),au(r,`.${i.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(i,{el:r,wrapperEl:a,slidesEl:i.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:a,hostEl:i.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||tf(r,"direction")==="rtl",rtlTranslate:i.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||tf(r,"direction")==="rtl"),wrongRTL:tf(a,"display")==="-webkit-box"}),!0}init(t){const i=this;if(i.initialized||i.mount(t)===!1)return i;i.emit("beforeInit"),i.params.breakpoints&&i.setBreakpoint(),i.addClasses(),i.updateSize(),i.updateSlides(),i.params.watchOverflow&&i.checkOverflow(),i.params.grabCursor&&i.enabled&&i.setGrabCursor(),i.params.loop&&i.virtual&&i.params.virtual.enabled?i.slideTo(i.params.initialSlide+i.virtual.slidesBefore,0,i.params.runCallbacksOnInit,!1,!0):i.slideTo(i.params.initialSlide,0,i.params.runCallbacksOnInit,!1,!0),i.params.loop&&i.loopCreate(void 0,!0),i.attachEvents();const n=[...i.el.querySelectorAll('[loading="lazy"]')];return i.isElement&&n.push(...i.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach(s=>{s.complete?LE(i,s):s.addEventListener("load",a=>{LE(i,a.target)})}),QI(i),i.initialized=!0,QI(i),i.emit("init"),i.emit("afterInit"),i}destroy(t,i){t===void 0&&(t=!0),i===void 0&&(i=!0);const r=this,{params:n,el:s,wrapperEl:a,slides:o}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),n.loop&&r.loopDestroy(),i&&(r.removeClasses(),s&&typeof s!="string"&&s.removeAttribute("style"),a&&a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),t!==!1&&(r.el&&typeof r.el!="string"&&(r.el.swiper=null),L_e(r)),r.destroyed=!0),null}static extendDefaults(t){ko(oP,t)}static get extendedDefaults(){return oP}static get defaults(){return KI}static installModule(t){gh.prototype.__modules__||(gh.prototype.__modules__=[]);const i=gh.prototype.__modules__;typeof t=="function"&&i.indexOf(t)<0&&i.push(t)}static use(t){return Array.isArray(t)?(t.forEach(i=>gh.installModule(i)),gh):(gh.installModule(t),gh)}};Object.keys(aP).forEach(e=>{Object.keys(aP[e]).forEach(t=>{KL.prototype[t]=aP[e][t]})});KL.use([Y_e,Q_e]);const Iee=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function _m(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"&&!e.__swiper__}function K0(e,t){const i=["__proto__","constructor","prototype"];Object.keys(t).filter(r=>i.indexOf(r)<0).forEach(r=>{typeof e[r]>"u"?e[r]=t[r]:_m(t[r])&&_m(e[r])&&Object.keys(t[r]).length>0?t[r].__swiper__?e[r]=t[r]:K0(e[r],t[r]):e[r]=t[r]})}function Ree(e){return e===void 0&&(e={}),e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function Oee(e){return e===void 0&&(e={}),e.pagination&&typeof e.pagination.el>"u"}function Lee(e){return e===void 0&&(e={}),e.scrollbar&&typeof e.scrollbar.el>"u"}function kee(e){e===void 0&&(e="");const t=e.split(" ").map(r=>r.trim()).filter(r=>!!r),i=[];return t.forEach(r=>{i.indexOf(r)<0&&i.push(r)}),i.join(" ")}function eAe(e){return e===void 0&&(e=""),e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}function tAe(e){let{swiper:t,slides:i,passedParams:r,changedParams:n,nextEl:s,prevEl:a,scrollbarEl:o,paginationEl:l}=e;const c=n.filter(R=>R!=="children"&&R!=="direction"&&R!=="wrapperClass"),{params:u,pagination:h,navigation:f,scrollbar:m,virtual:g,thumbs:v}=t;let x,b,S,_,A,M,C,D;n.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&!r.thumbs.swiper.destroyed&&u.thumbs&&(!u.thumbs.swiper||u.thumbs.swiper.destroyed)&&(x=!0),n.includes("controller")&&r.controller&&r.controller.control&&u.controller&&!u.controller.control&&(b=!0),n.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(u.pagination||u.pagination===!1)&&h&&!h.el&&(S=!0),n.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||o)&&(u.scrollbar||u.scrollbar===!1)&&m&&!m.el&&(_=!0),n.includes("navigation")&&r.navigation&&(r.navigation.prevEl||a)&&(r.navigation.nextEl||s)&&(u.navigation||u.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(A=!0);const T=R=>{t[R]&&(t[R].destroy(),R==="navigation"?(t.isElement&&(t[R].prevEl.remove(),t[R].nextEl.remove()),u[R].prevEl=void 0,u[R].nextEl=void 0,t[R].prevEl=void 0,t[R].nextEl=void 0):(t.isElement&&t[R].el.remove(),u[R].el=void 0,t[R].el=void 0))};n.includes("loop")&&t.isElement&&(u.loop&&!r.loop?M=!0:!u.loop&&r.loop?C=!0:D=!0),c.forEach(R=>{if(_m(u[R])&&_m(r[R]))Object.assign(u[R],r[R]),(R==="navigation"||R==="pagination"||R==="scrollbar")&&"enabled"in r[R]&&!r[R].enabled&&T(R);else{const O=r[R];(O===!0||O===!1)&&(R==="navigation"||R==="pagination"||R==="scrollbar")?O===!1&&T(R):u[R]=r[R]}}),c.includes("controller")&&!b&&t.controller&&t.controller.control&&u.controller&&u.controller.control&&(t.controller.control=u.controller.control),n.includes("children")&&i&&g&&u.virtual.enabled?(g.slides=i,g.update(!0)):n.includes("virtual")&&g&&u.virtual.enabled&&(i&&(g.slides=i),g.update(!0)),n.includes("children")&&i&&u.loop&&(D=!0),x&&v.init()&&v.update(!0),b&&(t.controller.control=u.controller.control),S&&(t.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),t.el.appendChild(l)),l&&(u.pagination.el=l),h.init(),h.render(),h.update()),_&&(t.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),t.el.appendChild(o)),o&&(u.scrollbar.el=o),m.init(),m.updateSize(),m.setTranslate()),A&&(t.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),iF(s,t.hostEl.constructor.nextButtonSvg),s.part.add("button-next"),t.el.appendChild(s)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),iF(a,t.hostEl.constructor.prevButtonSvg),a.part.add("button-prev"),t.el.appendChild(a))),s&&(u.navigation.nextEl=s),a&&(u.navigation.prevEl=a),f.init(),f.update()),n.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),n.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),n.includes("direction")&&t.changeDirection(r.direction,!1),(M||D)&&t.loopDestroy(),(C||D)&&t.loopCreate(),t.update()}function iAe(e,t){e===void 0&&(e={}),t===void 0&&(t=!0);const i={on:{}},r={},n={};K0(i,KI),i._emitClasses=!0,i.init=!1;const s={},a=Iee.map(l=>l.replace(/_/,"")),o=Object.assign({},e);return Object.keys(o).forEach(l=>{typeof e[l]>"u"||(a.indexOf(l)>=0?_m(e[l])?(i[l]={},n[l]={},K0(i[l],e[l]),K0(n[l],e[l])):(i[l]=e[l],n[l]=e[l]):l.search(/on[A-Z]/)===0&&typeof e[l]=="function"?t?r[`${l[2].toLowerCase()}${l.substr(3)}`]=e[l]:i.on[`${l[2].toLowerCase()}${l.substr(3)}`]=e[l]:s[l]=e[l])}),["navigation","pagination","scrollbar"].forEach(l=>{i[l]===!0&&(i[l]={}),i[l]===!1&&delete i[l]}),{params:i,passedParams:n,rest:s,events:r}}function rAe(e,t){let{el:i,nextEl:r,prevEl:n,paginationEl:s,scrollbarEl:a,swiper:o}=e;Ree(t)&&r&&n&&(o.params.navigation.nextEl=r,o.originalParams.navigation.nextEl=r,o.params.navigation.prevEl=n,o.originalParams.navigation.prevEl=n),Oee(t)&&s&&(o.params.pagination.el=s,o.originalParams.pagination.el=s),Lee(t)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(i)}function nAe(e,t,i,r,n){const s=[];if(!t)return s;const a=l=>{s.indexOf(l)<0&&s.push(l)};if(i&&r){const l=r.map(n),c=i.map(n);l.join("")!==c.join("")&&a("children"),r.length!==i.length&&a("children")}return Iee.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in e&&l in t)if(_m(e[l])&&_m(t[l])){const c=Object.keys(e[l]),u=Object.keys(t[l]);c.length!==u.length?a(l):(c.forEach(h=>{e[l][h]!==t[l][h]&&a(l)}),u.forEach(h=>{e[l][h]!==t[l][h]&&a(l)}))}else e[l]!==t[l]&&a(l)}),s}const sAe=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.emit("_virtualUpdated"),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())};function DA(){return DA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},DA.apply(this,arguments)}function zee(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function Bee(e){const t=[];return Bi.Children.toArray(e).forEach(i=>{zee(i)?t.push(i):i.props&&i.props.children&&Bee(i.props.children).forEach(r=>t.push(r))}),t}function aAe(e){const t=[],i={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Bi.Children.toArray(e).forEach(r=>{if(zee(r))t.push(r);else if(r.props&&r.props.slot&&i[r.props.slot])i[r.props.slot].push(r);else if(r.props&&r.props.children){const n=Bee(r.props.children);n.length>0?n.forEach(s=>t.push(s)):i["container-end"].push(r)}else i["container-end"].push(r)}),{slides:t,slots:i}}function oAe(e,t,i){if(!i)return null;const r=u=>{let h=u;return u<0?h=t.length+u:h>=t.length&&(h=h-t.length),h},n=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${i.offset}px`}:{top:`${i.offset}px`},{from:s,to:a}=i,o=e.params.loop?-t.length:0,l=e.params.loop?t.length*2:t.length,c=[];for(let u=o;u<l;u+=1)u>=s&&u<=a&&c.push(t[r(u)]);return c.map((u,h)=>Bi.cloneElement(u,{swiper:e,style:n,key:u.props.virtualIndex||u.key||`slide-${h}`}))}function zx(e,t){return typeof window>"u"?J.useEffect(e,t):J.useLayoutEffect(e,t)}const oF=J.createContext(null),lAe=J.createContext(null),Aa=J.forwardRef(function(e,t){let{className:i,tag:r="div",wrapperTag:n="div",children:s,onSwiper:a,...o}=e===void 0?{}:e,l=!1;const[c,u]=J.useState("swiper"),[h,f]=J.useState(null),[m,g]=J.useState(!1),v=J.useRef(!1),x=J.useRef(null),b=J.useRef(null),S=J.useRef(null),_=J.useRef(null),A=J.useRef(null),M=J.useRef(null),C=J.useRef(null),D=J.useRef(null),{params:T,passedParams:R,rest:O,events:L}=iAe(o),{slides:k,slots:B}=aAe(s),V=()=>{g(!m)};Object.assign(T.on,{_containerClasses(ne,F){u(F)}});const $=()=>{Object.assign(T.on,L),l=!0;const ne={...T};if(delete ne.wrapperClass,b.current=new KL(ne),b.current.virtual&&b.current.params.virtual.enabled){b.current.virtual.slides=k;const F={cache:!1,slides:k,renderExternal:f,renderExternalUpdate:!1};K0(b.current.params.virtual,F),K0(b.current.originalParams.virtual,F)}};x.current||$(),b.current&&b.current.on("_beforeBreakpoint",V);const q=()=>{l||!L||!b.current||Object.keys(L).forEach(ne=>{b.current.on(ne,L[ne])})},Y=()=>{!L||!b.current||Object.keys(L).forEach(ne=>{b.current.off(ne,L[ne])})};J.useEffect(()=>()=>{b.current&&b.current.off("_beforeBreakpoint",V)}),J.useEffect(()=>{!v.current&&b.current&&(b.current.emitSlidesClasses(),v.current=!0)}),zx(()=>{if(t&&(t.current=x.current),!!x.current)return b.current.destroyed&&$(),rAe({el:x.current,nextEl:A.current,prevEl:M.current,paginationEl:C.current,scrollbarEl:D.current,swiper:b.current},T),a&&!b.current.destroyed&&a(b.current),()=>{b.current&&!b.current.destroyed&&b.current.destroy(!0,!1)}},[]),zx(()=>{q();const ne=nAe(R,S.current,k,_.current,F=>F.key);return S.current=R,_.current=k,ne.length&&b.current&&!b.current.destroyed&&tAe({swiper:b.current,slides:k,passedParams:R,changedParams:ne,nextEl:A.current,prevEl:M.current,scrollbarEl:D.current,paginationEl:C.current}),()=>{Y()}}),zx(()=>{sAe(b.current)},[h]);function X(){return T.virtual?oAe(b.current,k,h):k.map((ne,F)=>Bi.cloneElement(ne,{swiper:b.current,swiperSlideIndex:F}))}return Bi.createElement(r,DA({ref:x,className:kee(`${c}${i?` ${i}`:""}`)},O),Bi.createElement(lAe.Provider,{value:b.current},B["container-start"],Bi.createElement(n,{className:eAe(T.wrapperClass)},B["wrapper-start"],X(),B["wrapper-end"]),Ree(T)&&Bi.createElement(Bi.Fragment,null,Bi.createElement("div",{ref:M,className:"swiper-button-prev"}),Bi.createElement("div",{ref:A,className:"swiper-button-next"})),Lee(T)&&Bi.createElement("div",{ref:D,className:"swiper-scrollbar"}),Oee(T)&&Bi.createElement("div",{ref:C,className:"swiper-pagination"}),B["container-end"]))});Aa.displayName="Swiper";const na=J.forwardRef(function(e,t){let{tag:i="div",children:r,className:n="",swiper:s,zoom:a,lazy:o,virtualIndex:l,swiperSlideIndex:c,...u}=e===void 0?{}:e;const h=J.useRef(null),[f,m]=J.useState("swiper-slide"),[g,v]=J.useState(!1);function x(A,M,C){M===h.current&&m(C)}zx(()=>{if(typeof c<"u"&&(h.current.swiperSlideIndex=c),t&&(t.current=h.current),!(!h.current||!s)){if(s.destroyed){f!=="swiper-slide"&&m("swiper-slide");return}return s.on("_slideClass",x),()=>{s&&s.off("_slideClass",x)}}}),zx(()=>{s&&h.current&&!s.destroyed&&m(s.getSlideClasses(h.current))},[s]);const b={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},S=()=>typeof r=="function"?r(b):r,_=()=>{v(!0)};return Bi.createElement(i,DA({ref:h,className:kee(`${f}${n?` ${n}`:""}`),"data-swiper-slide-index":l,onLoad:_},u),a&&Bi.createElement(oF.Provider,{value:b},Bi.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0},S(),o&&!g&&Bi.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&Bi.createElement(oF.Provider,{value:b},S(),o&&!g&&Bi.createElement("div",{className:"swiper-lazy-preloader"})))});na.displayName="SwiperSlide";const cAe="/assets/banner2-ZGIS2MhF.svg",uAe="/assets/banner3-B7141gQ0.svg",hAe="/assets/banner4-BC2MbK6f.svg",dAe="data:image/svg+xml,%3csvg%20width='260'%20height='80'%20viewBox='0%200%20260%2080'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M107.512%2058.8879L115.758%200H126.026L120.581%2038.5844L115.835%2037.4176L138.706%2016.5695H152.319L134.272%2033.6058L146.718%2058.8879H135.672L124.937%2036.9508L130.538%2035.7062L115.835%2049.3974L119.958%2043.1741L117.78%2058.8879H107.512Z'%20fill='%23E4E1E1'/%3e%3cpath%20d='M61.4062%2058.8886L67.3184%2016.5702H76.8867L75.7976%2024.8939L75.1753%2023.1825C76.5237%2020.5894%2078.3647%2018.6965%2080.6985%2017.5037C83.0322%2016.259%2085.6252%2015.6367%2088.4776%2015.6367C91.693%2015.6367%2094.4156%2016.3887%2096.6457%2017.8927C98.9275%2019.3966%20100.587%2021.4451%20101.624%2024.0382C102.713%2026.5793%20103.025%2029.4576%20102.558%2032.673L98.9016%2058.8886H88.711L92.2116%2033.8399C92.5746%2031.1431%2092.0819%2028.9909%2090.7335%2027.3832C89.3852%2025.7755%2087.4663%2024.9717%2084.977%2024.9717C83.3174%2024.9717%2081.7616%2025.3606%2080.3095%2026.1385C78.9093%2026.8646%2077.7424%2027.9018%2076.8089%2029.2502C75.9273%2030.5986%2075.3309%2032.2062%2075.0197%2034.0732L71.5969%2058.8886H61.4062Z'%20fill='%23E4E1E1'/%3e%3cpath%20d='M41.6484%2058.888L47.5606%2016.5696H57.829L51.9169%2058.888H41.6484ZM48.1829%2011.8244L49.7387%200.933594H60.0072L58.5291%2011.8244H48.1829Z'%20fill='%23E4E1E1'/%3e%3cpath%20d='M0.265625%2058.888L8.35591%200.933594H18.9355L12.1677%2049.5531H36.9831L35.6606%2058.888H0.265625Z'%20fill='%23E4E1E1'/%3e%3cpath%20d='M153.266%2059L161.439%200H171.464L168.071%2024.9406L166.914%2023.2259C168.251%2020.6279%20170.076%2018.7314%20172.389%2017.5363C174.703%2016.2893%20177.273%2015.6658%20180.1%2015.6658C183.288%2015.6658%20185.986%2016.4192%20188.197%2017.926C190.459%2019.4328%20192.104%2021.4852%20193.132%2024.0832C194.212%2026.6292%20194.52%2029.513%20194.057%2032.7345L190.433%2059H180.332L183.725%2033.9036C184.136%2031.2017%20183.673%2029.0454%20182.337%2027.4346C181%2025.8239%20179.098%2025.0185%20176.63%2025.0185C174.985%2025.0185%20173.469%2025.4082%20172.081%2026.1876C170.693%2026.915%20169.536%2027.9542%20168.611%2029.3052C167.685%2030.6561%20167.069%2032.2668%20166.76%2034.1374L163.367%2059H153.266Z'%20fill='%23E4E1E1'%20fill-opacity='0.59'/%3e%3cpath%20d='M180.424%2080C177.082%2080%20174.28%2079.235%20172.017%2077.705C169.755%2076.1223%20168.135%2073.9329%20167.158%2071.1367C166.233%2068.3405%20166.027%2065.0695%20166.541%2061.3237L170.012%2036H180.193L176.722%2061.482C176.465%2063.2758%20176.594%2064.8585%20177.108%2066.2302C177.622%2067.6019%20178.47%2068.6571%20179.653%2069.3957C180.836%2070.1343%20182.25%2070.5036%20183.895%2070.5036C185.592%2070.5036%20187.109%2070.1343%20188.446%2069.3957C189.834%2068.6043%20190.991%2067.5228%20191.917%2066.1511C192.894%2064.7266%20193.485%2063.0911%20193.691%2061.2446L197.162%2036H207.266L201.404%2079.0504H191.84L192.919%2070.5827L193.614%2072.3237C192.328%2074.9616%20190.503%2076.9137%20188.137%2078.1799C185.824%2079.3933%20183.253%2080%20180.424%2080Z'%20fill='%23E4E1E1'%20fill-opacity='0.6'/%3e%3cpath%20d='M236.693%2060C233.395%2060%20230.406%2059.3758%20227.726%2058.1274C225.098%2056.827%20223.088%2055.0325%20221.697%2052.7438L223.011%2050.8713L221.928%2059.0637H212.266L220.46%200H230.664L227.262%2025.0455L224.479%2022.7828C226.129%2020.4941%20228.216%2018.7516%20230.741%2017.5553C233.318%2016.3069%20236.152%2015.6827%20239.244%2015.6827C243.161%2015.6827%20246.614%2016.619%20249.603%2018.4915C252.592%2020.3121%20254.937%2022.7828%20256.637%2025.9038C258.39%2029.0247%20259.266%2032.5358%20259.266%2036.4369C259.266%2039.6619%20258.673%2042.7048%20257.488%2045.5657C256.354%2048.4265%20254.756%2050.9493%20252.695%2053.1339C250.633%2055.2666%20248.237%2056.9571%20245.506%2058.2055C242.774%2059.4018%20239.837%2060%20236.693%2060ZM235.688%2050.6372C238.214%2050.6372%20240.455%2050.013%20242.414%2048.7646C244.372%2047.4642%20245.892%2045.7477%20246.975%2043.6151C248.108%2041.4824%20248.675%2039.1157%20248.675%2036.515C248.675%2034.2783%20248.211%2032.3017%20247.284%2030.5852C246.408%2028.8687%20245.171%2027.5163%20243.573%2026.528C241.976%2025.5397%20240.069%2025.0455%20237.853%2025.0455C235.379%2025.0455%20233.163%2025.6957%20231.205%2026.9961C229.298%2028.2445%20227.803%2029.935%20226.721%2032.0676C225.639%2034.2003%20225.098%2036.567%20225.098%2039.1677C225.098%2041.4044%20225.536%2043.407%20226.412%2045.1756C227.34%2046.8921%20228.602%2048.2445%20230.2%2049.2328C231.797%2050.169%20233.627%2050.6372%20235.688%2050.6372Z'%20fill='%23E4E1E1'/%3e%3c/svg%3e",fAe="data:image/svg+xml,%3csvg%20width='257'%20height='106'%20viewBox='0%200%20257%20106'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cmask%20id='mask0_2959_1741'%20style='mask-type:luminance'%20maskUnits='userSpaceOnUse'%20x='0'%20y='0'%20width='257'%20height='106'%3e%3cpath%20d='M0.695312%200H256.24V106H0.695312V0Z'%20fill='white'/%3e%3c/mask%3e%3cg%20mask='url(%23mask0_2959_1741)'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M27.3677%2047.6814C21.8604%2045.6444%2018.8422%2044.0601%2018.8422%2041.5704C18.8422%2039.4575%2020.5776%2038.2506%2023.6711%2038.2506C29.3294%2038.2506%2035.1383%2040.4387%2039.1371%2042.3999L41.4004%2028.4429C38.2318%2026.9339%2031.7433%2024.4442%2022.7657%2024.4442C16.4283%2024.4442%2011.1468%2026.1038%207.37495%2029.1972C3.45143%2032.4412%201.41442%2037.1189%201.41442%2042.7773C1.41442%2053.0376%207.67654%2057.4138%2017.8616%2061.1104C24.4253%2063.449%2026.6134%2065.1092%2026.6134%2067.6741C26.6134%2070.1638%2024.5006%2071.5971%2020.6529%2071.5971C15.8999%2071.5971%208.05395%2069.2585%202.92351%2066.2409L0.660156%2080.3489C5.03578%2082.8386%2013.1838%2085.4035%2021.6341%2085.4035C28.3483%2085.4035%2033.9314%2083.8192%2037.7038%2080.8016C41.9284%2077.4818%2044.1165%2072.5783%2044.1165%2066.2409C44.1165%2055.7536%2037.7038%2051.378%2027.3677%2047.6814ZM80.9621%2039.4575L83.2255%2025.5758H71.2767V8.72408L55.2114%2011.3677L52.8915%2025.5758L47.241%2026.4925L45.1259%2039.4575H52.8683V66.6935C52.8683%2073.7852%2054.679%2078.6893%2058.3756%2081.7069C61.469%2084.1966%2065.9199%2085.4035%2072.182%2085.4035C77.0103%2085.4035%2079.9526%2084.574%2081.9897%2084.0455V69.3337C80.858%2069.6359%2078.293%2070.1638%2076.5576%2070.1638C72.861%2070.1638%2071.2767%2068.2779%2071.2767%2063.9775V39.4575H80.9621ZM116.845%2024.765C111.564%2024.765%20107.339%2027.5376%20105.68%2032.517L104.548%2025.5758H88.1765V84.2718H106.887V46.1723C109.226%2043.3052%20112.545%2042.2686%20117.072%2042.2686C118.053%2042.2686%20119.109%2042.2686%20120.391%2042.4949V25.2177C119.109%2024.9161%20117.977%2024.765%20116.845%2024.765ZM134.349%2019.7664C139.781%2019.7664%20144.157%2015.3155%20144.157%209.88348C144.157%204.37562%20139.781%200%20134.349%200C128.841%200%20124.465%204.37562%20124.465%209.88348C124.465%2015.3155%20128.841%2019.7664%20134.349%2019.7664ZM124.918%2025.5758H143.704V84.2718H124.918V25.5758ZM196.94%2030.8568C193.62%2026.5564%20189.018%2024.4442%20183.133%2024.4442C177.701%2024.4442%20172.948%2026.7075%20168.497%2031.4606L167.516%2025.5758H151.069V106L169.779%20102.907V84.0455C172.646%2084.9508%20175.588%2085.4035%20178.229%2085.4035C182.907%2085.4035%20189.697%2084.1966%20194.978%2078.463C200.032%2072.9551%20202.598%2064.4302%20202.598%2053.1887C202.598%2043.23%20200.711%2035.6857%20196.94%2030.8568ZM181.398%2067.0704C179.889%2069.9375%20177.55%2071.4466%20174.834%2071.4466C172.948%2071.4466%20171.288%2071.0692%20169.779%2070.3149V42.3999C172.948%2039.0807%20175.815%2038.7033%20176.871%2038.7033C181.624%2038.7033%20183.963%2043.8337%20183.963%2053.8677C183.963%2059.6013%20183.133%2064.0528%20181.398%2067.0704ZM256.239%2054.3956C256.239%2045.0407%20254.202%2037.6469%20250.203%2032.4412C246.129%2027.1602%20240.018%2024.4442%20232.248%2024.4442C216.329%2024.4442%20206.446%2036.2136%20206.446%2055.0746C206.446%2065.6371%20209.086%2073.5589%20214.292%2078.6135C218.969%2083.1402%20225.684%2085.4035%20234.36%2085.4035C242.357%2085.4035%20249.751%2083.5176%20254.429%2080.4242L252.392%2067.5989C247.789%2070.0886%20242.433%2071.4466%20236.397%2071.4466C232.776%2071.4466%20230.286%2070.6918%20228.475%2069.1074C226.514%2067.4478%20225.382%2064.7318%20225.005%2060.8841H256.013C256.088%2059.9788%20256.239%2055.7537%20256.239%2054.3956ZM224.854%2049.4163C225.382%2041.0419%20227.645%2037.1189%20231.946%2037.1189C236.171%2037.1189%20238.359%2041.1177%20238.66%2049.4163H224.854Z'%20fill='%23E4E1E1'/%3e%3c/g%3e%3c/svg%3e",pAe="/assets/banner7-BAr-EIfE.svg",mAe="/assets/banner8-NfEv2uCG.svg",gAe="/assets/userpartner-Cst85qlq.svg",vAe="/assets/userpartner0-K6n5obvo.svg",yAe="/assets/userpartner1-7MrB_o-D.svg",xAe="/assets/userpartner2-BKapPsx-.svg",bAe="/assets/userpartner3-DQjw2Gfd.svg",wAe="/assets/userpartner4-QobLAyKL.svg",SAe="/assets/userpartner5-Drr4dgRZ.svg",_Ae="/assets/userpartner6-CzLnMRNk.svg",EAe="/assets/userpartner7-DXQNL7jA.svg",AAe="/assets/userpartner8-CpNky4Ac.svg",TAe=U(G.div)`
  display: flex;
  height: 100vh;
  align-items: center;
  justify-content: center;
  background: #ff4d4f;
  color: white;
  font-weight: 700;
  font-size: 1.4rem;
  padding: 1rem 2rem;
  border-radius: 8px;
  user-select: none;
`,CAe={x:[0,-10,10,-10,10,0],transition:{duration:.6,ease:"easeInOut"}},gw=({message:e})=>E.jsxs(TAe,{...CAe,role:"alert","aria-live":"assertive",children:["Помилка: ",e]}),MAe=U.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  background-color: transparent;
`,PAe=U(G.svg).attrs({initial:{rotate:0},animate:{rotate:360,transition:{repeat:1/0,ease:"linear",duration:2}}})`
  width: 164px;
  height: 164px;
  margin-bottom: 16px;
`,DAe=U(G.div)`
  color: white;
  font-size: 1.2rem;
  font-weight: 500;
  letter-spacing: 0.05em;
`,IAe={animate:{opacity:[.3,1,.3],transition:{duration:1.5,repeat:1/0}}},vw=()=>E.jsxs(MAe,{children:[E.jsxs(PAe,{viewBox:"0 0 48 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[E.jsx("path",{d:"M22.8291 0.924989L36.4462 0.924988L47.8504 19.5085H43.2727L34.1573 4.515H30.2164L38.6946 19.5085H25.0516L13.6572 0.924989L18.2351 0.924989L27.3405 15.7747H31.5386L22.8291 0.924989Z",fill:"white"}),E.jsx("path",{d:"M18.2352 32.127L25.0517 21.0014H47.8503L45.5614 24.7353H27.3406L24.9737 28.5226L43.2723 28.469L36.4458 39.5945H13.6572L15.9462 35.8513H34.1569L36.4539 32.1143L18.2352 32.127Z",fill:"white"}),E.jsx("path",{d:"M7.49353 31.38L0.666992 20.2545L12.0714 1.67105L14.3603 5.3953L5.25483 20.2545L7.58711 24.0574L16.6492 9.13867L23.4657 20.2547L12.0714 38.8476L9.78249 35.1045L18.8879 20.2547L16.6332 16.4063L7.49353 31.38Z",fill:"white"})]}),E.jsx(DAe,{...IAe})]}),RAe=U(G.div)`
  position: relative;
  overflow: hidden;
  width: 100vw;
`,mc=()=>{const{t:e}=jt(),t=Yr({query:"(max-width: 743px)"}),i=Yr({query:"(min-width: 744px) and (max-width: 1023px)"}),r=Yr({query:"(min-width: 1024px)"}),n=e("feedback",{returnObjects:!0}),s=n.testimonials.map((v,x)=>{const b=[cAe,uAe,hAe,dAe,fAe,pAe,mAe],S=[gAe,vAe,yAe,xAe,bAe,wAe,SAe,_Ae,AAe,EAe];return{...v,id:x+1,icon:b[x%b.length],avatar:S[x%S.length]}}),a=t?1:i?2:r?4:5,o=s.length>a,l={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},c={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},u=v=>({initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:v*.1}}),{items:h,loading:f,error:m}=t_e(),g=h;return f?E.jsx(vw,{}):m?E.jsx(gw,{message:m}):E.jsxs(RAe,{initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.2},children:[E.jsxs(w_e,{as:G.div,variants:l,children:[E.jsx(G.div,{variants:c,children:E.jsx(m_e,{children:n.title})}),E.jsx(g_e,{as:G.div,variants:l,children:n.ratings.map((v,x)=>E.jsxs(G.div,{variants:c,...u(x),children:[E.jsx(y_e,{children:v.value}),E.jsxs("div",{children:[E.jsx(v_e,{src:I_e,alt:"⭐"}),E.jsx(x_e,{children:v.source})]})]},x))})]}),E.jsxs(S_e,{as:G.div,initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.8},viewport:{once:!1,amount:.2},children:[E.jsx(b_e,{}),E.jsx(Aa,{loop:o,slidesPerView:a,spaceBetween:20,centeredSlides:!0,autoplay:{delay:0,disableOnInteraction:!1},speed:4e3,modules:[ra],className:"mySwiper",children:g.map((v,x)=>E.jsx(na,{children:E.jsxs(__e,{as:G.div,initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.5,delay:x*.1},viewport:{once:!1,amount:.2},whileHover:{y:5,boxShadow:"0 10px 20px rgba(0,0,0,0.1)"},children:[E.jsx(E_e,{src:v.iconUrl,alt:"Company logo"}),E.jsx(A_e,{children:v.text}),E.jsxs(T_e,{children:[E.jsx(C_e,{children:E.jsx(M_e,{src:v.avatarUrl,alt:`${v.name} avatar`,as:G.img,whileHover:{y:-5,boxShadow:"0 10px 20px rgba(0,0,0,0.1)"}})}),E.jsxs("div",{children:[E.jsx(P_e,{children:v.name}),E.jsx(D_e,{children:v.position})]})]})]})},v.id))}),E.jsx(See,{})]})]})},OAe="modulepreload",LAe=function(e){return"/"+e},lF={},gc=function(t,i,r){let n=Promise.resolve();if(i&&i.length>0){let a=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=a(i.map(c=>{if(c=LAe(c),c in lF)return;lF[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":OAe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},jee=U.div`
position: relative;
  width: 100vw;
  height: 100%;
  background-color: transparent; /* півпрозорий фон */
  
margin: 0px 0;
padding: 40px 0px;

.swiper-wrapper {
display: flex;
transition-timing-function: linear !important;
padding: 0px 0px;
margin: 0 auto;
  }

@media screen and (min-width: 744px){

}

@media screen and (min-width: 1440px){

}
`,kAe=U.a`
  display: flex;
  padding: 18px;
  flex-direction: column;
  align-items: flex-start;
  border-radius: 21.028px;
  backdrop-filter: blur(14.02px);
  box-shadow: 
    inset 0 -7px 21px 0 rgba(255, 255, 255, 0.03),
    inset 0 -4px 5px 0 rgba(255, 255, 255, 0.03),
    0 7px 14px -7px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: rgba(255, 255, 255, 0.03);
  width: 350px;
 height: 198px;
 margin-top: 100px;
  overflow: hidden;
  position: relative;
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);

  &:hover {
    box-shadow: 
       0 0 5px 4px #494BEC, 
      0 0 5px 0px #4F51ED, 
      inset 0 0 16px 8px #6567EF;
      background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(74, 131, 238, 0.86);
  }
`,zAe=cn`
  0% {
    transform: translate(0, 0);
  }
  50% {
    transform: translate(5px, -5px); /* Рух вправо-вверх */
  }
  100% {
    transform: translate(0, 0);
  }
`,BAe=U.img`
  width: 46px;
  height: 46px;
  position: absolute;
  right: 20px;
  top: 20px;
  border: none;
  animation: ${zAe} 2s ease-in-out infinite;
  transition: transform 0.3s ease;

  &:hover {
    animation-play-state: paused; /* Пауза при наведенні */
    transform: translate(3px, -3px); /* Фіксуємо в кінцевій позиції */
  }
`,jAe=U.div`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: start;
  width: 100%;
  height: 100%;
  position: relative;
`,NAe=U.p`
  color: #FFF;
  font-family: 'Inter', sans-serif;
  font-size: 12.266px;
  font-weight: 400;
  line-height: 1.3em;
  width: 100%;
`,VAe=U.p`
  font-family: 'Inter', sans-serif;
  font-size: 76.226px;
  font-weight: 500;
  line-height: 1em;
  background: linear-gradient(93deg, #FFF 0.99%, #F7F8FD 14.42%, #B6B8EE 29.08%, #6A82FC 38.92%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  width: 100%;
`,UAe=U.div`
  position: absolute;
  left: 14px;
  top: 4px;
  width: 275px;
  height: 5px;
`,FAe=U.div`
  position: absolute;
  left: 2px;
  top: 2px;
  width: 119px;
  height: 5px;
`,Nee="data:image/svg+xml,%3csvg%20width='46'%20height='46'%20viewBox='0%200%2046%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_537_68234)'%3e%3cpath%20d='M1.3717%2045.4069L45.478%201.30054M45.478%201.30054H16.0738M45.478%201.30054V30.7048'%20stroke='white'%20stroke-opacity='0.5'%20stroke-width='1.75232'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_537_68234'%3e%3crect%20width='45.5604'%20height='45.5604'%20fill='white'%20transform='translate(0.402466%200.331238)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",HAe=()=>{const e=Yr({query:"(max-width: 743px)"}),t=Yr({query:"(min-width: 744px) and (max-width: 1439px)"}),i=Yr({query:"(min-width: 1440px)"}),{stats:r}=e_e();if(!r||r.length===0)return null;const n=[...r,...r.slice(0,3)],s=e?1:t?2:4,a=n.length>s;return E.jsxs(jee,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:1,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(Aa,{loop:a,slidesPerView:s,spaceBetween:1,autoplay:{delay:2e3,disableOnInteraction:!1,waitForTransition:!0,pauseOnMouseEnter:!0},speed:4e3,modules:[ra],className:"mySwiper",style:{width:"100%"},children:n.map((o,l)=>E.jsx(na,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"auto",padding:20},children:E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.8,delay:.1*l},viewport:{once:!1,amount:.3},children:E.jsxs(kAe,{children:[E.jsx(G.div,{initial:{opacity:0,rotate:-45},whileInView:{opacity:1,rotate:0},transition:{duration:.7,delay:.2+.1*l},viewport:{once:!1,amount:.3},children:E.jsx(BAe,{src:Nee,alt:"↗️"})}),E.jsxs(jAe,{children:[E.jsx(G.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3+.1*l},viewport:{once:!1,amount:.3},children:E.jsx(NAe,{children:o.description})}),E.jsx(G.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},transition:{duration:.7,delay:.4+.1*l},viewport:{once:!1,amount:.3},children:E.jsx(VAe,{children:o.value})})]}),E.jsx(G.div,{initial:{scaleX:0},whileInView:{scaleX:1},transition:{duration:.6,delay:.5+.1*l},viewport:{once:!1,amount:.3},children:E.jsx(UAe,{})}),E.jsx(G.div,{initial:{scaleX:0},whileInView:{scaleX:1},transition:{duration:.6,delay:.6+.1*l},viewport:{once:!1,amount:.3},children:E.jsx(FAe,{})})]})})},l))})}),e&&E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:1,delay:.7},viewport:{once:!1,amount:.3},children:E.jsx(Aa,{loop:a,slidesPerView:s,spaceBetween:10,autoplay:{delay:0,disableOnInteraction:!1,waitForTransition:!0,pauseOnMouseEnter:!0},speed:4e3,modules:[ra],className:"mySwiper",style:{width:"100vh"}})})]})},GAe="/assets/HeroSplayn-CixhLBD5.png",WAe=typeof window<"u"?J.useLayoutEffect:J.useEffect;function Vee(e,t){const i=Sx({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))i[r]=Sx({},e[r],i[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const n=e[r]||{},s=t[r];i[r]={},!s||!Object.keys(s)?i[r]=n:!n||!Object.keys(n)?i[r]=s:(i[r]=Sx({},s),Object.keys(n).forEach(a=>{i[r][a]=Vee(n[a],s[a])}))}else i[r]===void 0&&(i[r]=e[r])}),i}function qAe(e){const{theme:t,name:i,props:r}=e;return!t||!t.components||!t.components[i]||!t.components[i].defaultProps?r:Vee(t.components[i].defaultProps,r)}function XAe(e){return Object.keys(e).length===0}function YAe(e=null){const t=J.useContext(S6);return!t||XAe(t)?e:t}function QAe(e,t,i,r,n){const[s,a]=J.useState(()=>n&&i?i(e).matches:r?r(e).matches:t);return WAe(()=>{let o=!0;if(!i)return;const l=i(e),c=()=>{o&&a(l.matches)};return c(),l.addListener(c),()=>{o=!1,l.removeListener(c)}},[e,i]),s}const Uee=J.useSyncExternalStore;function KAe(e,t,i,r,n){const s=J.useCallback(()=>t,[t]),a=J.useMemo(()=>{if(n&&i)return()=>i(e).matches;if(r!==null){const{matches:u}=r(e);return()=>u}return s},[s,e,r,n,i]),[o,l]=J.useMemo(()=>{if(i===null)return[s,()=>()=>{}];const u=i(e);return[()=>u.matches,h=>(u.addListener(h),()=>{u.removeListener(h)})]},[s,i,e]);return Uee(l,o,a)}function kf(e,t={}){const i=YAe(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:n=!1,matchMedia:s=r?window.matchMedia:null,ssrMatchMedia:a=null,noSsr:o=!1}=qAe({name:"MuiUseMediaQuery",props:t,theme:i});let l=typeof e=="function"?e(i):e;return l=l.replace(/^@media( ?)/m,""),(Uee!==void 0?KAe:QAe)(l,n,s,a,o)}U.div`
position: relative;
  width: 100vw;
  height: 100%;
  background-color: transparent; /* півпрозорий фон */
  
margin: 0px 0;
padding: 40px 0px;

.swiper-wrapper {
display: flex;
transition-timing-function: linear !important;
padding: 0px 0px;
margin: 0 auto;
  }

@media screen and (min-width: 744px){

}

@media screen and (min-width: 1440px){

}
`;const ZAe=U.div`
  display: flex;
  padding: 18px;
  flex-direction: column;
  align-items: flex-start;
  border-radius: 21.028px;
  backdrop-filter: blur(14.02px);
  box-shadow: 
    inset 0 -7px 21px 0 rgba(255, 255, 255, 0.03),
    inset 0 -4px 5px 0 rgba(255, 255, 255, 0.03),
    0 7px 14px -7px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: rgba(255, 255, 255, 0.03);
  width: 350px;
 height: 198px;
 margin-top: 100px;
  overflow: hidden;
  position: relative;
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);

  &:hover {
    box-shadow: 
       0 0 5px 4px #494BEC, 
      0 0 5px 0px #4F51ED, 
      inset 0 0 16px 8px #6567EF;
      background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(74, 131, 238, 0.86);
  }
`,$Ae=cn`
  0% {
    transform: translate(0, 0);
  }
  50% {
    transform: translate(5px, -5px);
  }
  100% {
    transform: translate(0, 0);
  }
`,JAe=U.div`
position: relative;
top: -100px;
`,eTe=U.div`
position : relative;
top: 140px;
`,tTe=U.img`
  width: 46px;
  height: 46px;
  position: absolute;
  right: 20px;
  top: 20px;
  border: none;
  animation: ${$Ae} 2s ease-in-out infinite;
  transition: transform 0.3s ease;

  &:hover {
    animation-play-state: paused;
    transform: translate(3px, -3px);
  }
`,iTe=U.div`
display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    // gap: 5px;
    // flex-direction: row;
    // flex-wrap: wrap;
    justify-content: flex-start;
    align-content: center;
`,rTe=U.span`
  border-radius: 25px;
  margin-left: 10px;
  padding: 2px;
  width: 22px;
  height: 22px;
  font-size: 13px;

  box-shadow:
    inset 0 -8px 24px rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.03),
    0 2px 4px rgba(0, 0, 0, 0.08),
    0 0px 10px rgba(244, 242, 245, 0.58); /* ніжне фіолетове світіння */

  background: linear-gradient(
    315deg,
    rgba(31, 30, 31, 0.96) 7%,
    rgba(40, 38, 41, 0.54) 86%
  );
`,nTe=U.p`
  color: #FFF;
  font-family: 'Inter', sans-serif;
  font-size: 18px;
  font-weight: 500;
  line-height: 1.3em;
  text-align: center;
`,sTe=U.img`
   filter: drop-shadow(0 0 20px rgba(123, 137, 231, 1));
  transition: filter 0.3s ease;
  width: 189px;
height: min-content;
  &:hover {
    filter: drop-shadow(0 0 40px rgba(92, 112, 240, 1));
  object-fit: cover;
`,aTe=U.div`
//   position: absolute;
//   left: 14px;
//   top: 4px;
//   width: 275px;
//   height: 5px;
//   background: linear-gradient(90deg, rgba(191, 123, 246, 0.8), transparent);
`,oTe=U.div`
//   position: absolute;
//   left: 2px;
//   top: 2px;
//   width: 119px;
//   height: 5px;
//   background: linear-gradient(90deg, rgba(106, 130, 252, 0.8), transparent);
`,cF="/assets/Restaurant-ojXH3dqx.png",lTe="/assets/Bistro-CufvkdsS.png",cTe="/assets/Vegan%20Restaurant-BURw8sun.png",uTe="/assets/Sushi-BWqS6kck.png",hTe="/assets/FastFood-BvOo6QXr.png",dTe="/assets/Buffet-BIp-NqOx.png",fTe="/assets/FoodTruck-BzTyXlAh.png",pTe="/assets/CoffeeShop-BbzwXUDd.png",mTe="/assets/Bakery-C_S4Hx-F.png",gTe="/assets/IceCreamParlor-C2yCBe8v.png",vTe="/assets/CandyShop-C6N1rX0N.png",yTe="/assets/DarkKitchen-IQFRZnz-.png",xTe="/assets/Delivery-B1yfr6hP.png",bTe="/assets/FranchiseOwners-BPbzvhqI.png",wTe="/assets/Catering%20Services-BXHy2sBe.png",STe="/assets/Event%20Food%20Stands-DZVsLCMs.png",_Te="/assets/Meal%20Prep%20Business-CqDZem8M.png",ETe="/assets/Store-CCR4cHf-.png",ATe="/assets/Online%20Shop-D8ILETUK.png",TTe="/assets/Gift%20Shop-CMRi1kaC.png",CTe="/assets/SmokeShop-Cv6zkSoG.png",MTe="/assets/HealthStore-Ch1jiV9K.png",PTe="/assets/Florist-Crb_OM7m.png",DTe="/assets/PetShop-wUcDwtU-.png",ITe="/assets/BeautyShop-DP4zp2hX.png",RTe=()=>{const{t:e}=jt(),t=Yr({query:"(max-width: 743px)"}),i=Yr({query:"(min-width: 744px) and (max-width: 1439px)"}),r=Yr({query:"(min-width: 1440px)"}),n=[{key:"restaurant",image:cF},{key:"bistro",image:lTe},{key:"veganRestaurant",image:cTe},{key:"sushi",image:uTe},{key:"fastFood",image:hTe},{key:"buffet",image:dTe},{key:"foodTruck",image:fTe},{key:"coffeeShop",image:pTe},{key:"pizzeria",image:cF},{key:"bakery",image:mTe},{key:"iceCreamParlor",image:gTe},{key:"candyShop",image:vTe},{key:"darkKitchen",image:yTe},{key:"delivery",image:xTe},{key:"franchiseOwners",image:bTe},{key:"cateringServices",image:wTe},{key:"eventFoodStands",image:STe},{key:"mealPrepBusiness",image:_Te},{key:"store",image:ETe},{key:"onlineShop",image:ATe},{key:"giftShop",image:TTe},{key:"beautyShop",image:ITe},{key:"smokeShop",image:CTe},{key:"healthStore",image:MTe},{key:"florist",image:PTe},{key:"petShop",image:DTe}],s=t?1:i?2:4,a=n.length>s;return E.jsxs(JAe,{children:[E.jsxs(eTe,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},style:{position:"relative",zIndex:1,width:"100%",marginBottom:30},children:E.jsxs(Ml,{children:[e("businessSwiper.title")," ",E.jsx(rTe,{children:" 🤖"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(Pl,{children:e("businessSwiper.subtitle")})})]}),E.jsx(jee,{children:E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:1,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(Aa,{loop:a,slidesPerView:s,spaceBetween:1,autoplay:{delay:2e3,disableOnInteraction:!1,waitForTransition:!0,pauseOnMouseEnter:!0},speed:4e3,modules:[ra],className:"businessSwiper",children:n.map((o,l)=>E.jsx(na,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"auto",padding:20},children:E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.8,delay:.1*l},viewport:{once:!1,amount:.3},children:E.jsxs(ZAe,{children:[E.jsx(G.div,{initial:{opacity:0,rotate:-45},whileInView:{opacity:1,rotate:0},transition:{duration:.7,delay:.2+.1*l},viewport:{once:!1,amount:.3},children:E.jsx(tTe,{src:Nee,alt:"↗️"})}),E.jsxs(iTe,{children:[E.jsx(sTe,{src:o.image,alt:e(`businessSwiper.businessTypes.${o.key}`)}),E.jsx(G.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3+.1*l},viewport:{once:!1,amount:.3},children:E.jsx(nTe,{children:e(`businessSwiper.businessTypes.${o.key}`)})})]}),E.jsx(G.div,{initial:{scaleX:0},whileInView:{scaleX:1},transition:{duration:.6,delay:.5+.1*l},viewport:{once:!1,amount:.3},children:E.jsx(aTe,{})}),E.jsx(G.div,{initial:{scaleX:0},whileInView:{scaleX:1},transition:{duration:.6,delay:.6+.1*l},viewport:{once:!1,amount:.3},children:E.jsx(oTe,{})})]})})},o.key))})})})]})},OTe=J.lazy(()=>gc(()=>Promise.resolve().then(()=>Cae),[])),uF=()=>E.jsx(sve,{src:GAe,alt:"3D Scene"}),LTe=()=>{const{images:e,trustText:t,loading:i,error:r}=JSe(),{t:n}=jt(),s=kf("(max-width: 768px)");return i?E.jsx(vw,{}):r?E.jsx(gw,{message:r}):E.jsxs(E.Fragment,{children:[E.jsxs(ave,{id:"hero",children:[E.jsx(nve,{children:s?E.jsx(uF,{}):E.jsx(J.Suspense,{fallback:E.jsx(uF,{}),children:E.jsx(OTe,{scene:"https://prod.spline.design/xDMwKEPv7aTOBHEg/scene.splinecode",style:{transition:"transform 0.5s ease-out",filter:"blur(0.5px)",maxWidth:"100%",overflow:"visible"}})})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},style:{position:"relative",zIndex:1,width:"100%"},children:E.jsxs(Ml,{children:[n("hero.innovative")," ",E.jsx(ove,{children:" 🦄"})]})}),E.jsxs(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.3},viewport:{once:!1,amount:.3},children:[" ",E.jsx(Pl,{children:n("hero.title")})]}),E.jsxs(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.9,delay:.5},viewport:{once:!1,amount:.3},children:[" ",E.jsx(lve,{children:n("hero.description")})]}),E.jsxs(cve,{children:[!i&&E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:1,delay:.7},viewport:{once:!1,amount:.3},children:E.jsxs(uve,{children:[E.jsx(hve,{children:e.map((a,o)=>E.jsx(dve,{src:a,alt:`Avatar ${o+1}`},o))}),E.jsx(fve,{children:t})]})}),E.jsxs(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:1.5,delay:.9},viewport:{once:!1,amount:.3},children:[" ",E.jsxs(Pu,{children:[E.jsx("a",{href:"https://sabsus.app/registrcompany/web",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Du,{children:n("hero.buttons.tryFree")})}),E.jsx("a",{href:"https://sabsus.app/login/demo@sabsus.com/demo2025",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Iu,{children:n("hero.buttons.viewDemo")})})]})]})]})]}),E.jsx(HAe,{}),E.jsx(RTe,{})]})},kTe=U(G.div)`
  width: 100vw;
  background-color: rgba(0, 0, 0, 0);
  backdrop-filter: blur(1px);
  padding: 60px 0px;
  overflow: visible;
  z-index: 6;
  will-change: transform, opacity;

  .swiper-wrapper {
    display: flex;
    transition-timing-function: linear !important;
    padding: 0px 0px;
    margin: 0px auto;
  }

  @media screen and (min-width: 744px) {
    width: 100vw;
  }

  @media screen and (min-width: 1440px) {
    gap: 0px;
  }
`;U(G.a)`
  border: 0.61px solid #212121;
  border-radius: 29px;
  width: 132px;
  height: 62px;
  backdrop-filter: blur(9.684210777282715px);
  box-shadow: 0 5px 10px -5px rgba(0, 0, 0, 0.03), 
              0 1px 2px -1px rgba(0, 0, 0, 0.08), 
              inset 0 -5px 15px 0 rgba(255, 255, 255, 0.03), 
              inset 0 -3px 4px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  will-change: transform, box-shadow;
  transition: all 0.3s ease;

  @media screen and (min-width: 768px) {
    border: 1px solid #212121;
    border-radius: 48px;
    padding: 20px 48px;
    width: 219px;
    height: 104px;
  }
`;const hF=U(G.img)`
  margin: 5px 0;
  border: 0.61px solid #212121;
  border-radius: 29px;
  padding: 10px 29px;
  width: 132px;
  height: 62px;
  object-fit: contain; /* ⬅️ головне! */
  object-position: center;
  
  backdrop-filter: blur(9.68px);
  box-shadow: 
    0 5px 10px -5px rgba(0, 0, 0, 0.03),
    0 1px 2px -1px rgba(0, 0, 0, 0.08),
    inset 0 -5px 15px rgba(255, 255, 255, 0.03),
    inset 0 -3px 4px rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  transition: all 0.3s ease;
  z-index: 12;
  position: relative;
  will-change: transform, box-shadow;

  &:hover {
    box-shadow: 
      0 0 5px 4px #494BEC, 
      0 0 5px 0px #4F51ED, 
      inset 0 0 16px 8px #6567EF;
    background: rgba(255, 255, 255, 0.06);
    border-color: white;
  }

  &:active {
    transform: translateY(-2px);
  }

  @media screen and (min-width: 768px) {
    border: 1px solid #212121;
    border-radius: 48px;
    width: 219px;
    height: 104px;
  }
`;U(G.div)`
  height: auto;
  width: 100%;
  padding: 0 auto;
  margin: 0 auto;
  will-change: transform;

  @media screen and (min-width: 1440px) {
    margin-right: 50px;
  }
`;const zTe=U(G.div)`
  margin: 0 auto;
  margin-top: 32px;
  display: flex;
  justify-content: center;
  will-change: transform;

  @media screen and (min-width: 768px) {
    /* Додаткові стилі для планшетів */
  }
`,BTe=U(G.img)`
  border-radius: 100%;
  stroke-width: 1px;
  stroke: #212121;
  margin-left: 0px;
  margin-right: -15px;
  will-change: transform;
  transition: transform 0.3s ease;

  @media screen and (min-width: 768px) {
    /* Додаткові стилі для планшетів */
  }
`,jTe=U(G.p)`
  display: flex;
  border: 1px solid #212121;
  border-radius: 48px;
 padding: 4px 14px;
 width: max-content;
  height: 36px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow: 0 8px 16px -8px rgba(0, 0, 0, 0.03), 
              0 2px 4px -2px rgba(0, 0, 0, 0.08), 
              inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), 
              inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  align-items: center;
  justify-content: center;
  will-change: transform;
  transition: transform 0.3s ease;

  @media screen and (min-width: 768px) {
    /* Додаткові стилі для планшетів */
  }
`,NTe=()=>{const{data:e,loading:t,error:i}=r_e(),{t:r}=jt(),n=Yr({query:"(max-width: 743px)"}),s=Yr({query:"(min-width: 744px) and (max-width: 1223px)"}),a=Yr({query:"(min-width: 1224px)"});if(t)return E.jsx(vw,{});if(i)return E.jsx(gw,{message:i});if(!e)return null;const{carousels:o,partners:l}=e,c=n?2:s?3:6,u=l.length>c,h=n?3:s?6:15,f=l.slice(0,h),m={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},g={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return E.jsxs(kTe,{as:G.div,initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.2},variants:m,children:[E.jsx(G.div,{variants:g,children:E.jsx(Aa,{loop:u,slidesPerView:c,spaceBetween:10,autoplay:{delay:0,disableOnInteraction:!1,reverseDirection:!1},speed:4e3,modules:[ra],className:"mySwiper",children:o.map(v=>E.jsx(na,{children:E.jsx("a",{href:v.link,target:"_blank",rel:"noopener noreferrer",children:E.jsx(hF,{as:G.img,src:v.imageUrl,alt:`Partner ${v.id}`,loading:"lazy",whileHover:{scale:1.05,boxShadow:"0 0 5px 4px #494BEC, 0 0 5px 0px #4F51ED, inset 0 0 16px 8px #6567EF"},transition:{type:"spring",stiffness:400,damping:10}})})},`right-${v.id}`))})}),E.jsx(G.div,{variants:g,children:E.jsx(Aa,{loop:u,slidesPerView:c,spaceBetween:10,autoplay:{delay:0,disableOnInteraction:!1,reverseDirection:!0},speed:4e3,modules:[ra],className:"mySwiper reverse-swiper",children:[...o].reverse().map(v=>E.jsx(na,{children:E.jsx("a",{href:v.link,target:"_blank",rel:"noopener noreferrer",children:E.jsx(hF,{as:G.img,src:v.imageUrl,alt:`Partner ${v.id}`,loading:"lazy",whileHover:{scale:1.05,boxShadow:"0 0 5px 4px #494BEC, 0 0 5px 0px #4F51ED, inset 0 0 16px 8px #6567EF"},transition:{type:"spring",stiffness:400,damping:10}})})},`left-${v.id}`))})}),E.jsxs(zTe,{as:G.div,variants:m,children:[f.map((v,x)=>E.jsx(BTe,{as:G.img,src:v,alt:`Partner ${x}`,loading:"lazy",variants:g,whileHover:{rotate:10,scale:1.1},transition:{type:"spring",stiffness:300,damping:10}},`partner-${x}`)),E.jsx(jTe,{as:G.p,variants:g,whileHover:{scale:1.02},children:r("partnersBanner.trustedText")})]})]})},VTe=U(G.div)`
  margin: 0 auto;
  width: 100%;
  width: 343px;
  padding: 0 16px;
 @media screen and (min-width: 768px) {
  width: 710px;
  }
  
  @media screen and (min-width: 1440px) {
  max-width: 1440px;
  }
`,UTe=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
    padding: 4px 1px 4px 14px;
    width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow: inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), 
              inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 
              0 8px 16px -8px rgba(0, 0, 0, 0.03), 
              0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%);
  align-items: center;
  will-change: transform, opacity;
`,Fee=U(G.img)`
  border-radius: 25px;
  margin: 0 auto;
  margin-left: 5px;
  padding: 4px;
  width: 20px;
  font-size: 13px;
  overflow: visible;

  box-shadow: 
    inset 0 -8px 24px rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.04),
    0 1px 2px rgba(0, 0, 0, 0.06); /* дуже легка зовнішня тінь */

  background: linear-gradient(
    315deg,
    rgba(122, 121, 122, 0.58) 7%,
    rgba(172, 172, 172, 0.22) 86%
  );

  -webkit-transform: translateZ(0);
  will-change: transform;
`,FTe=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  margin: 0 auto;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;
`,HTe=U(G.p)`
  margin: 0 auto;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;
`,GTe=U(G.div)`
  color: white;
  margin: 0 auto;
`,WTe=U(G.div)`
  display: flex;
  margin: 0 auto;
  justify-content: center;
  align-items: center;
  border-radius: 24px;
  width: 100%;
  max-width: 350px;
  min-height: 64px;
  backdrop-filter: blur(16px);
  box-shadow: 
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), 
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 
    0 8px 16px -8px rgba(0, 0, 0, 0.03), 
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: rgba(255, 255, 255, 0.03);
  margin-bottom: 24px;
  font-family: var(--font-family);
  font-weight: 500;
  font-size: 18px;
  color: var(--white-100);
  position: relative;
  overflow: hidden;
  border: 1px solid #212121;
  padding: 8px;
  will-change: transform, opacity;
  
  &::before {
    content: '';
    position: absolute;
    top: 8px;
    bottom: 8px;
    left: 8px;
    width: calc(50% - 16px);
    background: white;
    border-radius: 16px;
    z-index: 0;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    transform: translateX(${({$isMonthly:e})=>e?"0":"calc(100% + 8px)"});
  }

  button {
    flex: 1;
    font-family: var(--font-family);
    font-weight: 400;
    font-size: clamp(16px, 3vw, 20px);
    color: var(--white);
    cursor: pointer;
    white-space: normal;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 8px 12px;
    border: none;
    background: transparent;
    position: relative;
    z-index: 1;
    transition: color 0.3s ease;
    word-break: break-word;
    hyphens: auto;
    min-width: 0;

    &:hover {
      color: rgba(255, 255, 255, 0.8);
    }

    &.active {
      color: black;
      font-weight: 500;
    }
  }
`,qTe=U(G.div)`
  display: flex;
  margin: 0 auto;
  gap: 24px;
  justify-content: center;
  flex-wrap: wrap;
  width: 100%;
  padding: 0 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    width: 656px;
  }
  
  @media screen and (min-width: 1440px) {
    flex-direction: row;
    flex-wrap: nowrap;
  }
`,XTe=U(G.div).withConfig({shouldForwardProp:e=>e!=="highlight"})`
  padding: 20px;
  margin: 0 auto;
  border-radius: 23px; /* Відповідає rx="23" з SVG */
  width: 100%;
  width: 343px;
  backdrop-filter: blur(16px);
  transition: all 0.3s ease;
  will-change: transform, box-shadow;

  /* Стилі для звичайних карток */
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid #333;
  box-shadow: none;

  /* Стилі для підсвіченої картки (останньої) */
  ${({highlight:e})=>e&&Px`
      background: rgba(10, 10, 30, 0.5);
      border: 2px solid transparent;
      background-clip: padding-box;
      
      /* Градієнтна обводка (як у SVG) */
      &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 23px;
        padding: 2px;
        background: linear-gradient(
          135deg,
          white 0%,
          #6567EF 30%,
          #4F51ED 50%,
          #E4E5FC 100%
        );
        -webkit-mask: 
          linear-gradient(#fff 0 0) content-box, 
          linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        pointer-events: none;
        z-index: -1;
      }

      /* Тіні з розмиттям (як у filter0_f та filter1_f) */
      box-shadow:
        0 0 15px 5px rgba(101, 103, 239, 0.2),
        0 0 30px 10px rgba(101, 103, 239, 0.15),
        inset 0 0 20px 5px rgba(101, 103, 239, 0.3);
    `}

  &:hover {
    transform: translateY(-4px);
    
    ${({highlight:e})=>e?Px`
            box-shadow:
              0 0 25px 10px rgba(101, 103, 239, 0.3),
              0 0 40px 15px rgba(101, 103, 239, 0.25),
              inset 0 0 25px 8px rgba(101, 103, 239, 0.4);
            background: rgba(10, 10, 30, 0.6);
          `:Px`
            box-shadow: 
              0 4px 20px rgba(0, 0, 0, 0.15),
              0 2px 8px rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.06);
          `}
  }

  &:active {
    transform: translateY(-2px);
  }

  @media screen and (min-width: 768px) {
    width: 656px;
  }
  
  @media screen and (min-width: 1440px) {
    width: 440px;
  }
`,YTe=U(G.div)`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  flex-wrap: nowrap;
  will-change: transform;
`,QTe=U(G.h3)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  line-height: 130%;
  color: #494bec;
  will-change: transform;
`,KTe=U(G.span)`
 font-family: var(--font-family);
    font-weight: 400;
    font-size: 12px;
    line-height: 130%;
    color: rgba(146, 147, 240, 0.8);
    text-shadow: 0 0 8px rgba(101, 103, 239, 0.8);
    padding: 1px 5px;
    border-radius: 12.5px;
    border: 1px solid transparent;
    background: linear-gradient(rgba(10, 10, 30, 0.5), rgba(10, 10, 30, 0.5)) padding-box, linear-gradient(135deg, white 0%, #6567EF 30%, #4F51ED 50%, #E4E5FC 100%) border-box;
    box-shadow: 0 0 15px 5px rgba(101, 103, 239, 0.2), 0 0 30px 10px rgba(101, 103, 239, 0.15), inset 0 0 10px 2px rgba(101, 103, 239, 0.3);
    backdrop-filter: blur(4px);
    will-change: transform;
    position: absolute;
     left: 12%;
    bottom: 100%;
`,ZTe=U(G.div).withConfig({shouldForwardProp:e=>e!=="$isSelected"})`
  font-size: 24px;
  font-weight: bold;
  margin: 16px 0;
  font-family: var(--font-family);
  font-weight: 500;
  font-size: 22px;
  line-height: 130%;
  color: var(--white-100);
  display: flex;
  align-items: baseline;
  border-bottom: 1px solid var(--white-25);
  padding-bottom: 16px;
  justify-content: space-between;
  flex-wrap: nowrap;
  flex-direction: row;
  cursor: pointer;
  transition: all 0.3s ease;
  will-change: transform, background;

  ${({$isSelected:e})=>e&&`
      background: rgba(73, 75, 236, 0.1);
      border-radius: 8px;
      padding: 12px;
      border-bottom: 1px solid #494BEC;
    `}

  &:hover {
    background: rgba(73, 75, 236, 0.05);
  }
`,$Te=U(G.p)`
  font-family: var(--font-family);
  font-weight: 500;
  font-size: 22px;
  line-height: 130%;
  color: var(--white-100);
  width: 50%;
  will-change: transform;
`,JTe=U(G.h4)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 32px;
  line-height: 130%;
  color: var(--white-100);
  display: flex;
  align-items: baseline;
  will-change: transform;
`,e3e=U(G.div)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 14px;
  line-height: 130%;
  color: var(--white-100);
  will-change: transform;
  position: relative;

`,t3e=U(G.button).withConfig({shouldForwardProp:e=>e!=="highlight"})`
  border-radius: 12px;
  padding: 12px 20px;
  width: 303px;
  height: 43px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: ${({highlight:e})=>e?"#E4E5FC":"var(--white-100)"};
  backdrop-filter: blur(16px);
  background: ${({highlight:e})=>e?"linear-gradient(180deg, rgb(72, 27, 179) 0%, rgba(255, 255, 255, 0.03) 100%)":"linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%)"};
  box-shadow: ${({highlight:e})=>e?"0 0 20px rgba(101, 103, 239, 0.5), inset 0 0 10px rgba(73, 75, 236, 0.4)":`inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
         inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
         0 8px 16px -8px rgba(0, 0, 0, 0.03),
         0 2px 4px -2px rgba(0, 0, 0, 0.08)`};
  ${({highlight:e})=>e&&`
    position: relative;
    z-index: 1;
    border: none;
    &::before {
      content: '';
      position: absolute;
      top: -1px;
      left: -1px;
      right: -1px;
      bottom: -1px;
      border-radius: 12px;
      padding: 1px;
      background: linear-gradient(90deg, #494BEC, #4F51ED, #6567EF, #E4E5FC);
      -webkit-mask:
        linear-gradient(#fff 0 0) content-box,
        linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      z-index: -1;
    }
  `}
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
  will-change: transform, box-shadow, background;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: ${({highlight:e})=>e?"0 0 30px rgba(101, 103, 239, 0.7), inset 0 0 15px rgba(73, 75, 236, 0.6)":"0 4px 12px rgba(0, 0, 0, 0.1), inset 0 -4px 8px rgba(255, 255, 255, 0.05)"};
    background: ${({highlight:e})=>e?"linear-gradient(180deg, rgb(82, 37, 189) 0%, rgba(255, 255, 255, 0.05) 100%)":"linear-gradient(180deg, rgba(255, 255, 255, 0.16) 7%, rgba(255, 255, 255, 0.02) 86%)"};
  }

  &:active {
    transform: translateY(0);
    transition-duration: 0.1s;
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none !important;
  }

  @media screen and (min-width: 768px) {
    width: 100%;
  }
`,i3e=U(G.p)`
  margin-top: 16px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);
  margin-bottom: 12px;
  will-change: transform;
`,r3e=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 15px;
  color: var(--white-60);
  margin-bottom: 12px;
  display: flex;
  gap: 6px;
  align-items: baseline;
  will-change: transform;
`,n3e=U(G.img)`
  width: 13px;
  height: 13px;
  will-change: transform;
`,s3e="/assets/Money%20Bag-DSKweVBs.svg",a3e="data:image/svg+xml,%3csvg%20width='16'%20height='11'%20viewBox='0%200%2016%2011'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.6667%201L5.50004%2010.1667L1.33337%206'%20fill='white'%20fill-opacity='0.6'/%3e%3cpath%20d='M14.6667%201L5.50004%2010.1667L1.33337%206'%20stroke='white'%20stroke-opacity='0.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Hee=()=>{const{t:e}=jt(),[t,i]=J.useState(!1),[r,n]=J.useState(null),s=e("pricePlan",{returnObjects:!0}),{pricingData:a,loading:o,error:l}=i_e(t);if(o)return E.jsx(vw,{});if(l)return E.jsx(gw,{message:l});const c=(h,f)=>h===2?"https://sabsus.app/login/demo@sabsus.com/demo2025":"https://sabsus.app/registrcompany/web/"+(h===1?["whitestart","whitestandart","whitebusiness"]:["saasstart","saasstandart","saasbusiness"])[f],u=(h,f)=>{n({planIndex:h,tierIndex:f})};return E.jsxs(VTe,{as:G.div,initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.2},children:[E.jsx(G.div,{children:E.jsxs(UTe,{children:[s.mainText," ",E.jsx(Fee,{src:s3e,alt:"💰"})]})}),E.jsx(G.div,{children:E.jsx(FTe,{children:s.title})}),E.jsx(G.div,{children:E.jsx(HTe,{children:s.description})}),E.jsxs(GTe,{children:[E.jsxs(WTe,{$isMonthly:t,children:[E.jsx("button",{onClick:()=>i(!0),className:t?"active":"",children:s.switch.monthly}),E.jsx("button",{onClick:()=>i(!1),className:t?"":"active",children:s.switch.annually})]}),E.jsx(qTe,{children:a.map((h,f)=>E.jsxs(G.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:10},children:[E.jsxs(XTe,{highlight:h.highlight,children:[E.jsx(YTe,{children:E.jsx(QTe,{children:h.title})}),h.tiers.map((m,g)=>E.jsxs(ZTe,{as:G.div,onClick:()=>u(f,g),$isSelected:(r==null?void 0:r.planIndex)===f&&(r==null?void 0:r.tierIndex)===g,whileTap:{scale:.98},children:[E.jsx($Te,{children:m.name}),E.jsxs(JTe,{children:[m.price," ",E.jsxs(e3e,{children:[h.highlight?E.jsx("span",{style:{color:"transparent"},children:"/Month"}):"/Month",E.jsx(KTe,{children:m.discount})]})]})]},g)),E.jsx("a",{href:c(f,(r==null?void 0:r.tierIndex)??0),target:"_blank",rel:"noopener noreferrer",children:E.jsx(t3e,{as:G.button,highlight:h.highlight||(r==null?void 0:r.planIndex)===f,whileHover:{y:-2},whileTap:{scale:.98},children:h.button})})]}),E.jsx(i3e,{children:h.note}),h.noteList.map((m,g)=>E.jsxs(r3e,{children:[E.jsx(n3e,{src:a3e,alt:"✔️"})," ",m]},g))]},f))})]})]})},o3e="/assets/pizzario-CE4eYw8m.png",l3e="/assets/image1(2)-CR2khMdP.png",c3e="/assets/image2(10)-ODxwWa1j.png",u3e="/assets/image3()-DpQnakDt.png",h3e="/assets/image4-Buu_F2YF.png",d3e="/assets/iPhone16ProMaxNew-Da9lGn0c.png",f3e="/assets/burbanBites-BbcglOAd.png",p3e="/assets/image5-C0iakDsT.png",m3e="/assets/sweetTreats-C9dqNr85.png",Wf=()=>{const{t:e}=jt(),t=e("results",{returnObjects:!0}),i={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},r={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},n=s=>{switch(s){case 0:return{initial:{x:-100,opacity:0},animate:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},animate:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},animate:{x:0,opacity:1}};default:return{initial:{opacity:0},animate:{opacity:1}}}};return E.jsxs(qye,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Ff,{children:[t.mainText," ",E.jsx(Ur,{src:f$,alt:"💹"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(Hf,{children:t.mainTitle})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(pc,{children:t.description})}),E.jsxs(Xye,{as:G.div,variants:i,initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.3},children:[E.jsx(t1e,{as:G.img,src:d3e,alt:"Main Image",initial:{scale:.9,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.6},viewport:{once:!1,amount:.3}}),E.jsxs(Yye,{as:G.div,...n(0),transition:{duration:.5,delay:.3},viewport:{once:!1,amount:.3},children:[E.jsx(G.div,{variants:r,children:E.jsx(FM,{src:o3e,alt:"Icon"})}),E.jsx(G.div,{variants:r,children:E.jsxs(HM,{children:[E.jsx(GM,{children:t.cards[0].title}),E.jsx(WM,{children:t.cards[0].text})]})})]}),E.jsx(Zye,{as:G.img,src:l3e,alt:"Image 1",initial:{x:-50,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.5,delay:.4},viewport:{once:!1,amount:.3}}),E.jsx(i1e,{as:G.img,src:p3e,alt:"Image 5",initial:{x:50,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.5,delay:.5},viewport:{once:!1,amount:.3}}),E.jsxs(Kye,{as:G.div,...n(1),transition:{duration:.5,delay:.6},viewport:{once:!1,amount:.3},children:[E.jsx(G.div,{variants:r,children:E.jsx(FM,{src:m3e,alt:"Icon"})}),E.jsx(G.div,{variants:r,children:E.jsxs(HM,{children:[E.jsx(GM,{children:t.cards[2].title}),E.jsx(WM,{children:t.cards[2].text})]})})]}),E.jsx($ye,{as:G.img,src:c3e,alt:"Image 2",initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:.7},viewport:{once:!0,amount:.3}}),E.jsxs(Qye,{as:G.div,...n(2),transition:{duration:.5,delay:.8},viewport:{once:!1,amount:.3},children:[E.jsx(G.div,{variants:r,children:E.jsx(FM,{src:f3e,alt:"Icon"})}),E.jsx(G.div,{variants:r,children:E.jsxs(HM,{children:[E.jsx(GM,{children:t.cards[1].title}),E.jsx(WM,{children:t.cards[1].text})]})})]}),E.jsx(e1e,{as:G.img,src:h3e,alt:"Image 4",initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.5,delay:.9},viewport:{once:!1,amount:.3}}),E.jsx(Jye,{as:G.img,src:u3e,alt:"Image 3",initial:{rotate:10,opacity:0},whileInView:{rotate:0,opacity:1},transition:{duration:.5,delay:1},viewport:{once:!1,amount:.3}})]})]})},g3e=U.div`
  &::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100vh;
    height: 200vw;
    border-radius: 50%;
    background: radial-gradient(
      ellipse at center,
      var(--purple-500) 0%,
      rgba(76, 78, 236, 0.1) 100%,
      transparent 100%
    );
    filter: blur(180px);
    z-index: -5000;
    opacity: 0.6;
    will-change: opacity;
  }

  @media screen and (min-width: 768px) {
    &::after {
      height: 100vh;
    }
  }
`,v3e=U(G.div)`
  position: relative;
  margin: 0 auto;
  -webkit-overflow-scrolling: touch;
  margin-top: 100px;
  margin-bottom: 154px;
  z-index: 1;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    /* Додаткові стилі для планшетів */
  }
`,y3e=U(G.h2)`
  width: 343px;
  height: auto;
  margin: 0 auto;
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  background: linear-gradient(142deg, #fff 0%, #f7f8fd 28.77%, #b6b8ee 40.91%, #6a82fc 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 24px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 48px;
  }
`,x3e=U(G.p)`
  width: 343px;
  height: 80px;
  margin: 0 auto;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-75);
  margin-bottom: 24px;
  will-change: transform, opacity;
`,Ru=()=>{const{t:e}=jt(),t="https://sabsus.app/login/demo@sabsus.com/demo2025",i="https://sabsus.app/registrcompany/web/PRO",r={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},n={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return E.jsxs(v3e,{as:G.div,initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.2},variants:r,children:[E.jsx(y3e,{as:G.h2,variants:n,children:e("startSmall.title")}),E.jsx(x3e,{as:G.p,variants:n,children:e("startSmall.text")}),E.jsxs(Pu,{as:G.div,variants:n,children:[E.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:E.jsx(Du,{as:G.button,whileHover:{y:-2},whileTap:{scale:.98},children:e("startSmall.buttons.getStarted")})}),E.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:E.jsx(Iu,{as:G.button,whileHover:{y:-2},whileTap:{scale:.98},children:e("startSmall.buttons.viewDemo")})})]}),E.jsx(g3e,{})]})};var ZI=new Map,kS=new WeakMap,dF=0,b3e=void 0;function w3e(e){return e?(kS.has(e)||(dF+=1,kS.set(e,dF.toString())),kS.get(e)):"0"}function S3e(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?w3e(e.root):e[t]}`).toString()}function _3e(e){const t=S3e(e);let i=ZI.get(t);if(!i){const r=new Map;let n;const s=new IntersectionObserver(a=>{a.forEach(o=>{var l;const c=o.isIntersecting&&n.some(u=>o.intersectionRatio>=u);e.trackVisibility&&typeof o.isVisible>"u"&&(o.isVisible=c),(l=r.get(o.target))==null||l.forEach(u=>{u(c,o)})})},e);n=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:t,observer:s,elements:r},ZI.set(t,i)}return i}function E3e(e,t,i={},r=b3e){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const l=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:typeof i.threshold=="number"?i.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:n,observer:s,elements:a}=_3e(i),o=a.get(e)||[];return a.has(e)||a.set(e,o),o.push(t),s.observe(e),function(){o.splice(o.indexOf(t),1),o.length===0&&(a.delete(e),s.unobserve(e)),a.size===0&&(s.disconnect(),ZI.delete(n))}}function A3e({threshold:e,delay:t,trackVisibility:i,rootMargin:r,root:n,triggerOnce:s,skip:a,initialInView:o,fallbackInView:l,onChange:c}={}){var u;const[h,f]=J.useState(null),m=J.useRef(c),[g,v]=J.useState({inView:!!o,entry:void 0});m.current=c,J.useEffect(()=>{if(a||!h)return;let _;return _=E3e(h,(A,M)=>{v({inView:A,entry:M}),m.current&&m.current(A,M),M.isIntersecting&&s&&_&&(_(),_=void 0)},{root:n,rootMargin:r,threshold:e,trackVisibility:i,delay:t},l),()=>{_&&_()}},[Array.isArray(e)?e.toString():e,h,n,r,s,a,i,l,t]);const x=(u=g.entry)==null?void 0:u.target,b=J.useRef(void 0);!h&&x&&!s&&!a&&b.current!==x&&(b.current=x,v({inView:!!o,entry:void 0}));const S=[f,g.inView,g.entry];return S.ref=S[0],S.inView=S[1],S.entry=S[2],S}const T3e=U(G.div)`
  max-width: 100%;
  margin: 0 auto;
  padding: 0 auto;
  overflow: hidden;
  position: relative;
`,C3e=U(G.h2)`
  font-size: 2rem;
  color: #ffffff;
  text-align: center;
  margin-bottom: 2rem;
  font-weight: 600;
  background: linear-gradient(90deg, #494bec 0%, #6567ef 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
`,M3e=U.div`
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
  border: 1px solid rgba(255, 255, 255, 0.08);
  padding-top: 40px;

  @media (max-width: 767px) {
    width: 100%;
    min-width: 320px;
  }

  @media (min-width: 768px) {
    border-radius: 16px;
  }

  @media (min-width: 1024px) {
    border-radius: 20px;
  }
  @media (min-width: 1284px) {
  padding-top: 0px;
  }
`,P3e=U(G.table)`
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;

  @media (max-width: 767px) {
    min-width: 320px;
  }

  @media (min-width: 768px) {
    min-width: 600px;
  }

  @media (min-width: 1024px) {
    min-width: 800px;
  }
`,D3e=U.thead``,I3e=U.tbody``,IA=U(G.tr)`
  &:nth-child(even) {
    background: rgba(97, 143, 243, 0.02);
  }

  &:hover {
    background: rgba(73, 76, 236, 0.85);
  }
`,Up=U(G.th)`
  padding: 1rem;
  text-align: left;
  font-weight: 600;
  color: #ffffff;
  position: sticky;
  top: 0;
  background: rgba(25, 25, 35, 0.9);
  backdrop-filter: blur(10px);
  z-index: 10;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  
  &:hover {
    background: rgba(73, 76, 236, 0.85) !important;
  }
  
  &:first-child {
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
  }

  &:last-child {
    border-top-right-radius: 12px;
    border-bottom-right-radius: 12px;
  }
`,ZL=U(G.td)`
  padding: 1rem;
  color: rgba(255, 255, 255, 0.8);
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  position: relative;
  transition: all 0.3s ease;

  &:first-child {
    font-weight: 500;
    color: #ffffff;
    white-space: nowrap;
  }
`,R3e=U(ZL)`
  background: rgba(73, 75, 236, 0.1);
  position: relative;
  color: #ffffff;

  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-left: 3px solid #494bec;
    pointer-events: none;
  }
`,O3e=U(IA)`
  background: rgba(25, 25, 35, 0.7) !important;
  font-weight: 600;

  td {
    color: #ffffff;
    font-weight: 600;
  }
`,L3e=U(IA)`
  background: linear-gradient(
    90deg,
    rgba(73, 75, 236, 0.2) 0%,
    rgba(101, 103, 239, 0.1) 100%
  ) !important;

  td {
    font-size: 1.1rem;
    font-weight: 700;
    color: #ffffff;
  }
`,Oa=U(ZL)`
  transition: all 0.3s ease;

  @media (max-width: 767px) {
    min-width: 80px;
    font-size: 12px;
    padding: 8px 10px;

    &:nth-child(3) {
      background: rgba(73, 75, 236, 0.05);
      font-weight: 500;
    }
  }

  @media (min-width: 768px) {
    min-width: 100px;
    font-size: 14px;
    padding: 10px 12px;
  }

  @media (min-width: 1024px) {
    min-width: 120px;
    font-size: 15px;
    padding: 12px 14px;
  }

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
`,k3e=U(Up)`
  position: sticky;
  left: 0;
  z-index: 20;
  background: rgba(25, 25, 35, 0.95) !important;
  border-right: 1px solid rgba(255, 255, 255, 0.1);

  @media (max-width: 767px) {
    width: 120px;
    min-width: 120px;
    font-size: 14px;
    padding: 8px 12px;
  }

  @media (min-width: 768px) {
    width: 300px;
    min-width: 300px;
    max-width: 300px;
    font-size: 15px;
    padding: 10px 14px;
  }

  @media (min-width: 1024px) {
    font-size: 16px;
    padding: 12px 16px;
  }
`,z3e=U(Up)`
  position: sticky;
  z-index: 20;
  border-right: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(10, 10, 30, 0.5);
  border: 2px solid transparent;
  background-clip: padding-box;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    padding: 2px;
    background: linear-gradient(
      135deg,
      white 0%,
      #6567ef 30%,
      #4f51ed 50%,
      #e4e5fc 100%
    );
    -webkit-mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
    z-index: -1;
  }

  box-shadow:
    0 0 15px 5px rgba(101, 103, 239, 0.2),
    0 0 30px 10px rgba(101, 103, 239, 0.15),
    inset 0 0 20px 5px rgba(101, 103, 239, 0.3);

  @media (max-width: 767px) {
    left: 120px;
    width: 100px;
    min-width: 100px;
    font-size: 14px;
    padding: 8px 10px;
  }

  @media (min-width: 768px) {
    left: 300px;
    width: 100px;
    min-width: 100px;
    font-size: 15px;
    padding: 10px 12px;
  }

  @media (min-width: 1024px) {
    font-size: 16px;
    padding: 12px 14px;
  }
`,lP=U(ZL)`
  position: sticky;
  left: 0;
  z-index: 10;
  background: rgba(15, 15, 25, 0.95);
  border-right: 1px solid rgba(255, 255, 255, 0.05);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  @media (max-width: 767px) {
    width: 120px;
    min-width: 120px;
    max-width: 120px;
    font-size: 12px;
    padding: 8px 12px;
  }

  @media (min-width: 768px) {
    width: 300px;
    min-width: 300px;
    max-width: 300px;
    font-size: 14px;
    padding: 10px 14px;
  }

  @media (min-width: 1024px) {
    font-size: 15px;
    padding: 12px 16px;
  }
`,cP=U(R3e)`
  position: sticky;
  z-index: 10;
  border-right: 1px solid rgba(255, 255, 255, 0.05);
  background: rgba(10, 10, 30, 0.5);
  border: 2px solid transparent;
  background-clip: padding-box;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    padding: 2px;
    background: linear-gradient(
      135deg,
      white 0%,
      #6567ef 30%,
      #4f51ed 50%,
      #e4e5fc 100%
    );
    -webkit-mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
    z-index: -1;
  }

  box-shadow:
    0 0 15px 5px rgba(101, 103, 239, 0.2),
    0 0 30px 10px rgba(101, 103, 239, 0.15),
    inset 0 0 20px 5px rgba(101, 103, 239, 0.3);
    
  &:hover {
    transform: translateY(-4px);
    box-shadow:
      0 0 25px 10px rgba(101, 103, 239, 0.3),
      0 0 40px 15px rgba(101, 103, 239, 0.25),
      inset 0 0 25px 8px rgba(101, 103, 239, 0.4);
    background: rgba(10, 10, 30, 0.6);
  }

  @media (max-width: 767px) {
    left: 120px;
    width: 100px;
    min-width: 100px;
    font-size: 12px;
    padding: 8px 10px;
  }

  @media (min-width: 768px) {
    left: 300px;
    width: 150px;
    min-width: 150px;
    font-size: 14px;
    padding: 10px 12px;
  }

  @media (min-width: 1024px) {
    font-size: 15px;
    padding: 12px 14px;
  }
`,B3e=U(G.div)`
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 1px;
  flex-wrap: wrap;
  justify-content: center;
  
  @media (min-width: 768px) {
    gap: 6px;
  }
`,fF=U(G.div)`
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 8px solid #6567ef;
  filter: drop-shadow(0 0 4px rgba(101, 103, 239, 0.7));
`,j3e=U.div`
  position: fixed;
  top: 0px;
  right: -140px;
  display: flex;
  gap: 10px;
  z-index: 1000;
  background: rgba(25, 25, 35, 0.8);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 4px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);

  @media (min-width: 768px) {
    right: 100px;
  }
`,uP=U.button`
  background: rgba(73, 75, 236, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  backdrop-filter: blur(5px);
  transition: all 0.3s ease;

  &:hover {
    background: rgba(73, 75, 236, 0.6);
    transform: scale(1.1);
  }
`,N3e={animate:{y:[0,5,0],opacity:[.6,1,.6],transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}}},V3e={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},zS={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},bn={hidden:{opacity:0,x:-10},visible:{opacity:1,x:0}},U3e=()=>{const{t:e}=jt(),[t,i]=A3e({triggerOnce:!0,threshold:.1}),r=J.useRef(null),n=J.useRef(null),[s,a]=J.useState(!1),[o,l]=J.useState(!1),[c,u]=J.useState(!0);J.useEffect(()=>{const b=()=>{a(window.innerWidth<1280)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),J.useEffect(()=>{if(!s||!r.current||!n.current)return;const b=r.current;let S,_=0;const A=.5;let M=1;const C=()=>{if(!c)return;const O=n.current.scrollWidth-b.clientWidth;_>=O?(M=-1,_=O):_<=0&&(M=1,_=0),_+=A*M,b.scrollLeft=_,o&&c&&(S=requestAnimationFrame(C))},D=()=>{l(!1)},T=()=>{c&&(l(!0),S=requestAnimationFrame(C))},R=setTimeout(()=>{c&&(l(!0),S=requestAnimationFrame(C))},3e3);return b.addEventListener("mouseenter",D),b.addEventListener("mouseleave",T),()=>{clearTimeout(R),cancelAnimationFrame(S),b.removeEventListener("mouseenter",D),b.removeEventListener("mouseleave",T)}},[s,i,c]);const h=()=>{u(!c)},f=()=>{r.current&&r.current.scrollTo({left:0,behavior:"smooth"})},m=()=>{r.current&&n.current&&r.current.scrollTo({left:n.current.scrollWidth,behavior:"smooth"})},g=e("comparisonTable.features",{returnObjects:!0}),v=e("comparisonTable.costs",{returnObjects:!0}),x=e("comparisonTable.savings",{returnObjects:!0});return E.jsxs(T3e,{ref:t,initial:"hidden",animate:i?"visible":"hidden",variants:V3e,children:[E.jsx(C3e,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},dangerouslySetInnerHTML:{__html:e("comparisonTable.title",{highlight:b=>`<span class="highlight">${b}</span>`})}}),E.jsxs(M3e,{ref:r,children:[s&&E.jsxs(j3e,{children:[E.jsx(uP,{onClick:f,title:e("comparisonTable.controls.start"),children:"⇤"}),E.jsx(uP,{onClick:h,title:e("comparisonTable.controls.toggleAutoScroll"),style:{background:c?"rgba(73, 75, 236, 0.6)":"rgba(255, 255, 255, 0.1)"},children:c?"⏸":"▶"}),E.jsx(uP,{onClick:m,title:e("comparisonTable.controls.end"),children:"⇥"})]}),E.jsxs(P3e,{ref:n,children:[E.jsx(D3e,{children:E.jsxs(IA,{variants:zS,children:[E.jsx(k3e,{children:e("comparisonTable.headers.feature")}),E.jsx(z3e,{children:E.jsxs(B3e,{variants:N3e,animate:"animate",children:[E.jsx(fF,{})," ",e("comparisonTable.headers.sabsus"),E.jsx(fF,{})]})}),E.jsx(Up,{children:e("comparisonTable.headers.toast")}),E.jsx(Up,{children:e("comparisonTable.headers.square")}),E.jsx(Up,{children:e("comparisonTable.headers.clover")}),E.jsx(Up,{children:e("comparisonTable.headers.otter")}),E.jsx(Up,{children:e("comparisonTable.headers.skytab")})]})}),E.jsxs(I3e,{children:[g.map((b,S)=>E.jsxs(IA,{variants:zS,children:[E.jsx(lP,{variants:bn,children:b.name}),E.jsx(cP,{variants:bn,children:b.sabsus}),E.jsx(Oa,{variants:bn,children:b.toast}),E.jsx(Oa,{variants:bn,children:b.square}),E.jsx(Oa,{variants:bn,children:b.clover}),E.jsx(Oa,{variants:bn,children:b.otter}),E.jsx(Oa,{variants:bn,children:b.skytab})]},S)),E.jsxs(L3e,{variants:zS,children:[E.jsx(lP,{variants:bn,children:e("comparisonTable.rows.annualCost")}),E.jsx(cP,{variants:bn,children:v.sabsus}),E.jsx(Oa,{variants:bn,children:v.toast}),E.jsx(Oa,{variants:bn,children:v.square}),E.jsx(Oa,{variants:bn,children:v.clover}),E.jsx(Oa,{variants:bn,children:v.otter}),E.jsx(Oa,{variants:bn,children:v.skytab})]}),E.jsxs(O3e,{variants:zS,children:[E.jsx(lP,{variants:bn,children:e("comparisonTable.rows.savings")}),E.jsx(cP,{variants:bn,children:"-"}),E.jsx(Oa,{variants:bn,children:x.toast}),E.jsx(Oa,{variants:bn,children:x.square}),E.jsx(Oa,{variants:bn,children:x.clover}),E.jsx(Oa,{variants:bn,children:x.otter}),E.jsx(Oa,{variants:bn,children:x.skytab})]})]})]})]})]})},F3e=U.div`
 width: 100%;
margin: 0 auto;
margin-top: 50px;
`,H3e=U.p`
display: flex;
align-items: center;
    justify-content: space-between;
font-family: var(--font-family);
font-weight: 400;
font-size: 12px;
color: var(--white-100);
height: 28px;
margin: 0 auto;
border-radius: 24px;
    padding: 4px 1px 4px 14px;
    width: max-content;
height: 28px;

backdrop-filter: blur(16px);
box-shadow: inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03), inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03), 0 8px 16px -8px rgba(0, 0, 0, 0.03), 0 2px 4px -2px rgba(0, 0, 0, 0.08);
background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 7%, rgba(255, 255, 255, 0) 86%) , rgba(255, 255, 255, 0.03);
margin-bottom: 8px;
`,G3e=U.img`
  border-radius: 25px;
  padding: 0px;
  width: 20px;
  height: 20px;
  margin-left: 10px;
  font-size: 13px;

  box-shadow: 
    inset 0 -8px 24px rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 1px 2px rgba(0, 0, 0, 0.06);

  background: linear-gradient(
    315deg,
    rgba(176, 253, 161, 0.68) 7%,
    rgb(142, 250, 121) 86%
  );

  -webkit-transform: translateZ(0);
`,W3e=U.h2`
font-family: var(--font-family);
font-weight: 600;
font-size: 36px;
line-height: 110%;
text-align: center;
color: var(--white-100);
margin-bottom: 16px;
`,q3e=U.p`
font-family: var(--font-family);
font-weight: 400;
font-size: 16px;
text-align: center;
color: var(--white-80);
margin-bottom: 56px;
`,X3e="/assets/stars-01puzzle-B--0OZkg.svg",Gee="data:image/svg+xml,%3csvg%20width='37'%20height='9'%20viewBox='0%200%2037%209'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_i_537_67380)'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.43175%208.6052C6.73669%208.6052%208.6052%206.73669%208.6052%204.43175C8.6052%202.12682%206.73669%200.258301%204.43175%200.258301C2.12682%200.258301%200.258301%202.12682%200.258301%204.43175C0.258301%206.73669%202.12682%208.6052%204.43175%208.6052Z'%20fill='%23EE6A5F'/%3e%3c/g%3e%3cpath%20d='M4.43213%200.432129C6.64085%200.432332%208.43115%202.22336%208.43115%204.43213C8.43095%206.64072%206.64072%208.43095%204.43213%208.43115C2.22336%208.43115%200.432332%206.64085%200.432129%204.43213C0.432129%202.22323%202.22323%200.432129%204.43213%200.432129Z'%20stroke='%23CE5347'%20stroke-width='0.347788'/%3e%3cg%20filter='url(%23filter1_i_537_67380)'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M18.3434%208.6052C20.6483%208.6052%2022.5168%206.73669%2022.5168%204.43175C22.5168%202.12682%2020.6483%200.258301%2018.3434%200.258301C16.0384%200.258301%2014.1699%202.12682%2014.1699%204.43175C14.1699%206.73669%2016.0384%208.6052%2018.3434%208.6052Z'%20fill='%23F5BD4F'/%3e%3c/g%3e%3cpath%20d='M18.3438%200.432129C20.5525%200.432332%2022.3428%202.22336%2022.3428%204.43213C22.3426%206.64072%2020.5523%208.43095%2018.3438%208.43115C16.135%208.43115%2014.344%206.64085%2014.3438%204.43213C14.3438%202.22323%2016.1349%200.432129%2018.3438%200.432129Z'%20stroke='%23D6A243'%20stroke-width='0.347788'/%3e%3cg%20filter='url(%23filter2_i_537_67380)'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M32.2548%208.6052C34.5597%208.6052%2036.4282%206.73669%2036.4282%204.43175C36.4282%202.12682%2034.5597%200.258301%2032.2548%200.258301C29.9498%200.258301%2028.0813%202.12682%2028.0813%204.43175C28.0813%206.73669%2029.9498%208.6052%2032.2548%208.6052Z'%20fill='%2361C454'/%3e%3c/g%3e%3cpath%20d='M32.2551%200.432129C34.4638%200.432332%2036.2542%202.22336%2036.2542%204.43213C36.2539%206.64072%2034.4637%208.43095%2032.2551%208.43115C30.0464%208.43115%2028.2553%206.64085%2028.2551%204.43213C28.2551%202.22323%2030.0462%200.432129%2032.2551%200.432129Z'%20stroke='%2358A942'%20stroke-width='0.347788'/%3e%3cdefs%3e%3cfilter%20id='filter0_i_537_67380'%20x='0.258301'%20y='0.258301'%20width='8.34692'%20height='8.34692'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'%20result='hardAlpha'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2.08673'/%3e%3cfeComposite%20in2='hardAlpha'%20operator='arithmetic'%20k2='-1'%20k3='1'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.92549%200%200%200%200%200.427451%200%200%200%200%200.384314%200%200%200%201%200'/%3e%3cfeBlend%20mode='normal'%20in2='shape'%20result='effect1_innerShadow_537_67380'/%3e%3c/filter%3e%3cfilter%20id='filter1_i_537_67380'%20x='14.1699'%20y='0.258301'%20width='8.34692'%20height='8.34692'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'%20result='hardAlpha'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2.08673'/%3e%3cfeComposite%20in2='hardAlpha'%20operator='arithmetic'%20k2='-1'%20k3='1'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.960784%200%200%200%200%200.768627%200%200%200%200%200.317647%200%200%200%201%200'/%3e%3cfeBlend%20mode='normal'%20in2='shape'%20result='effect1_innerShadow_537_67380'/%3e%3c/filter%3e%3cfilter%20id='filter2_i_537_67380'%20x='28.0813'%20y='0.258301'%20width='8.34692'%20height='8.34692'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'%20result='hardAlpha'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2.08673'/%3e%3cfeComposite%20in2='hardAlpha'%20operator='arithmetic'%20k2='-1'%20k3='1'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.407843%200%200%200%200%200.8%200%200%200%200%200.345098%200%200%200%201%200'/%3e%3cfeBlend%20mode='normal'%20in2='shape'%20result='effect1_innerShadow_537_67380'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",Y3e="/assets/Frame%203479-DJkAWrN0.png",Q3e="/assets/Frame%203479-1-B4ukTjCX.png",K3e="/assets/Frame%203479-2-CS203dq3.png",Z3e="/assets/Frame%203479-3-eAfR4eMP.png",Wee="data:image/svg+xml,%3csvg%20width='81'%20height='21'%20viewBox='0%200%2081%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_537_67384)'%3e%3cpath%20d='M12.2274%2016.3261C15.4492%2016.3261%2018.1167%2013.6528%2018.1167%2010.4368C18.1167%207.21499%2015.4434%204.54749%2012.2217%204.54749C9.00564%204.54749%206.33813%207.21499%206.33813%2010.4368C6.33813%2013.6528%209.01141%2016.3261%2012.2274%2016.3261ZM12.2274%2015.3445C9.50219%2015.3445%207.32546%2013.162%207.32546%2010.4368C7.32546%207.71154%209.49641%205.52903%2012.2217%205.52903C14.9469%205.52903%2017.1294%207.71154%2017.1352%2010.4368C17.1409%2013.162%2014.9527%2015.3445%2012.2274%2015.3445ZM12.2274%207.49791C11.9792%207.49791%2011.7944%207.67689%2011.7944%207.93094V10.8179L11.8406%2012.0361L11.2632%2011.3433L10.5761%2010.6504C10.4953%2010.5754%2010.3914%2010.5234%2010.2701%2010.5234C10.0334%2010.5234%209.85439%2010.7081%209.85439%2010.9391C9.85439%2011.0604%209.88903%2011.1643%209.96409%2011.2393L11.8925%2013.162C12.008%2013.2775%2012.1062%2013.3237%2012.2274%2013.3237C12.3545%2013.3237%2012.4584%2013.2717%2012.5681%2013.162L14.4908%2011.2393C14.5658%2011.1643%2014.612%2011.0604%2014.612%2010.9391C14.612%2010.7081%2014.4273%2010.5234%2014.1905%2010.5234C14.0635%2010.5234%2013.9596%2010.5696%2013.8845%2010.6504L13.2032%2011.3433L12.6143%2012.0419L12.6605%2010.8179V7.93094C12.6605%207.67689%2012.4815%207.49791%2012.2274%207.49791Z'%20fill='%23999C9F'/%3e%3cpath%20d='M40.746%2012.0072C40.9943%2012.0072%2041.2022%2011.7993%2041.2022%2011.5568V5.62712L41.1675%204.76105L41.5602%205.17099L42.432%206.10635C42.5128%206.19873%2042.6341%206.24492%2042.7438%206.24492C42.9863%206.24492%2043.1653%206.0717%2043.1653%205.83498C43.1653%205.71373%2043.1191%205.62135%2043.0325%205.53474L41.0809%203.65248C40.9655%203.537%2040.8615%203.49658%2040.746%203.49658C40.6306%203.49658%2040.5266%203.537%2040.4112%203.65248L38.4596%205.53474C38.373%205.62135%2038.321%205.71373%2038.321%205.83498C38.321%206.0717%2038.5%206.24492%2038.7368%206.24492C38.8522%206.24492%2038.9735%206.19873%2039.0543%206.10635L39.9319%205.17099L40.3246%204.76105L40.2841%205.62712V11.5568C40.2841%2011.7993%2040.4978%2012.0072%2040.746%2012.0072ZM37.4319%2016.5281H44.0544C45.2612%2016.5281%2045.8674%2015.9276%2045.8674%2014.7382V8.97593C45.8674%207.78653%2045.2612%207.18605%2044.0544%207.18605H42.4435V8.11564H44.0371C44.6087%208.11564%2044.9378%208.42742%2044.9378%209.0279V14.6862C44.9378%2015.2867%2044.6087%2015.5985%2044.0371%2015.5985H37.4434C36.866%2015.5985%2036.5485%2015.2867%2036.5485%2014.6862V9.0279C36.5485%208.42742%2036.866%208.11564%2037.4434%208.11564H39.0428V7.18605H37.4319C36.2251%207.18605%2035.6189%207.78653%2035.6189%208.97593V14.7382C35.6189%2015.9276%2036.2251%2016.5281%2037.4319%2016.5281Z'%20fill='%23999C9F'/%3e%3cpath%20d='M64.9689%2013.8201H65.9562V14.7035C65.9562%2015.8929%2066.5567%2016.4934%2067.7692%2016.4934H73.5661C74.767%2016.4934%2075.3733%2015.8929%2075.3733%2014.7035V8.86038C75.3733%207.67097%2074.767%207.07049%2073.5661%207.07049H72.573V6.1871C72.573%204.99769%2071.9667%204.39722%2070.7658%204.39722H64.9689C63.7564%204.39722%2063.1559%204.99769%2063.1559%206.1871V12.0302C63.1559%2013.2196%2063.7564%2013.8201%2064.9689%2013.8201ZM64.9804%2012.8905C64.403%2012.8905%2064.0855%2012.5787%2064.0855%2011.9782V6.23906C64.0855%205.63859%2064.403%205.3268%2064.9804%205.3268H70.7485C71.3201%205.3268%2071.6434%205.63859%2071.6434%206.23906V7.07049H67.7692C66.5567%207.07049%2065.9562%207.6652%2065.9562%208.86038V12.8905H64.9804ZM67.7807%2015.5638C67.2091%2015.5638%2066.8858%2015.252%2066.8858%2014.6515V8.91234C66.8858%208.31187%2067.2091%208.00008%2067.7807%208.00008H73.5488C74.1204%208.00008%2074.4437%208.31187%2074.4437%208.91234V14.6515C74.4437%2015.252%2074.1204%2015.5638%2073.5488%2015.5638H67.7807Z'%20fill='%23999C9F'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_537_67384'%3e%3crect%20width='79.9911'%20height='19.4761'%20fill='white'%20transform='translate(0.750488%200.693848)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",$3e=U.div`
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  align-content: center;
  align-items: center;
  justify-content: center;
  gap: 40px;

    @media screen and (min-width: 768px) {
    border-top: 1px solid var(--white-60);
    padding-top: 40px;
    display: flex;
    flex-direction: row;
    gap: 0px;
    flex-wrap: nowrap;
    justify-content: space-around;
    align-items: baseline;
    margin: 0 auto: 
    max-width: 740px;
    width: 100%;
  }

  @media screen and (min-width: 1440px) {
max-width: 1130px;
margin: 0 auto;
  }
`,J3e=U.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 12px;
  width: 100%;

    @media screen and (min-width: 768px) {

  }

  @media screen and (min-width: 1440px) {

  }
`,eCe=U.div`
  position: relative;
  width: 127px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 0 auto;

    @media screen and (min-width: 768px) {

  }

  @media screen and (min-width: 1440px) {

  }
`,pF=U.div`
  display: flex;
  max-width: 127px;
  height: 28px;

@media screen and (min-width: 768px) {

}

@media screen and (min-width: 1440px) {

}
`,BS=U.div`
  position: absolute;
  width: 127px;
  height: 28px;
  border-radius: 24px;
  display: flex;
  opacity: ${e=>e.opacity||0};

@media screen and (min-width: 768px) {

}

@media screen and (min-width: 1440px) {

}
`,tCe=U.div`
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
   width: fit-content;
   gap: 6px;

@media screen and (min-width: 768px) {

}

@media screen and (min-width: 1440px) {

}
`,iCe=U.div`
  position: absolute;
  left: 86%;
  top: 3px;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 22px;
  height: 22px;

  border-radius: 25px;
  padding: 10px;
  font-size: 13px;

  box-shadow:
    inset 0 -8px 24px rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.05),
    0 1px 3px rgba(0, 0, 0, 0.08);

  background: linear-gradient(
      315deg,
      rgba(141, 136, 143, 0.58) 7%,
      rgba(79, 74, 82, 0.86)
    ),
    rgba(255, 255, 255, 0.03);

  -webkit-transform: translateZ(0);

`,rCe=U.button`
  cursor: pointer;
  display: flex;
  padding: 4px 4px 4px 18px;
  justify-content: center;
  align-items: center;
  gap: 4px;
  border-radius: 24px;
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.12) 7%,
      rgba(255, 255, 255, 0) 86%
    ),
    rgba(255, 255, 255, 0.03);
  box-shadow:
    0px 2px 4px -2px rgba(0, 0, 0, 0.08),
    0px 8px 16px -8px rgba(0, 0, 0, 0.03),
    0px -5px 6px 0px rgba(255, 255, 255, 0.03) inset,
    0px -8px 24px 0px rgba(255, 255, 255, 0.03) inset;
  width: 165px;
  height: 28px;
  border: none;
  outline: none;
  justify-content: space-between;
  position: relative; // Додаємо для псевдоелемента

  @media screen and (min-width: 768px) {
    &::after {
      content: '';
      position: absolute;
      bottom: 67px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 3px;
      box-shadow: inset 0 0 20px 0 rgba(123, 156, 246, 0.85), inset 0 -10px 25px 0 rgba(255, 255, 255, 0.15), inset 0 -5px 10px 0 rgba(255, 255, 255, 0.1), 0 0 10px 6px rgba(64, 141, 242, 0.68), 0 15px 30px -10px rgba(0, 0, 0, 0.25), 0 5px 10px -5px rgba(0, 0, 0, 0.2);
      background: linear-gradient(90deg, #7b92f6ff 0%, #6A6BFF 100%);
      transition: width 0.3s ease;
    }

    &.active::after,
    &[aria-selected="true"]::after {
      width: 100%;
    }
  }

  @media screen and (min-width: 1440px) {
    &::after {
    // bottom: 67px;
    }
  }
`,nCe=U.p`
  color: #fff;
  font-family: Inter, sans-serif;
  font-size: 12px;
  font-weight: 400;
  line-height: 1.2em;
 padding-right: 10px;
width: max-content;
 @media screen and (min-width: 768px) {

}

@media screen and (min-width: 1440px) {

}
`,sCe=U.p`
  color: #fff;
  font-family: Inter, sans-serif;
  font-size: 17px;
  font-weight: 400;
  line-height: 1.3em;
  text-align: center;
  width: 100%;

@media screen and (min-width: 768px) {

}

@media screen and (min-width: 1440px) {

}
`,aCe=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 15px;
  text-align: center;
  color: var(--white-60);
  text-align: center;
  width: 100%;
@media screen and (min-width: 768px) {

}

@media screen and (min-width: 1440px) {

}
`,oCe=U.div`
  background: rgba(245, 228, 228, 0.25);
  width: 34px;
  height: 1px;
  transform: rotate(90deg);

  @media screen and (min-width: 768px) {
width: 501px;
    height: 2px;
}

@media screen and (min-width: 1440px) {

}
`,lCe=U.div`
margin: 0 auto;
  width: 343px;
  height: 545px;
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(11.129203796386719px);
  box-shadow:
    0 6px 11px -6px rgba(0, 0, 0, 0.03),
    0 1px 3px -1px rgba(0, 0, 0, 0.08),
    inset 0 -6px 17px 0 rgba(255, 255, 255, 0.03),
    inset 0 -3px 4px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  border-radius: 28px ;
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60%;
    box-shadow: inset 0 -100px 50px -30px rgba(0, 0, 0, 0.65);
    // backdrop-filter: blur(12px);
    z-index: 1;

    pointer-events: none;
  }

 @media screen and (min-width: 768px) {
max-width: 740px;
width: 100%;
margin: 0 auto;

}

@media screen and (min-width: 1440px) {
max-width: 1130px;
} 
`,cCe=U.div`
  padding: 16px 22px;
  width: 100%;
  max-width: 343px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-top: 0.35px solid rgba(33, 33, 33, 0.7); /* Прозорість для iOS */

  /* Оптимізовані стилі для iOS */
  -webkit-backdrop-filter: blur(11px); /* Префікс для Safari */
  backdrop-filter: blur(11px);
  
  /* Оптимізовані тіні для iOS */
  box-shadow:
    0 6px 11px -6px rgba(0, 0, 0, 0.03),
    0 1px 3px -1px rgba(0, 0, 0, 0.08),
    inset 0 -6px 17px 0 rgba(255, 255, 255, 0.03),
    inset 0 -3px 4px 0 rgba(255, 255, 255, 0.03);
  
  /* Оптимізований фон для iOS */
  background-color: rgba(255, 255, 255, 0.03);
  background-image: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.03),
    rgba(255, 255, 255, 0.01)
  );
  
  margin-bottom: 6px;

  /* Виправлення для Safari */
  @supports (-webkit-touch-callout: none) {
    background-color: rgba(0, 0, 0, 0.86); /* Фолбек для iOS */
    -webkit-backdrop-filter: saturate(180%) blur(11px);
  }

  @media screen and (min-width: 768px) {
    max-width: 740px;
    width: 100%;
    margin: 0 auto;
    padding: 16px 24px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 1130px;
    padding: 16px 32px;
  }
`,uCe=U.img`
  width: 37px;
  height: 9px;

  @media screen and (min-width: 768px) {

}

@media screen and (min-width: 1440px) {

}
`,hCe=U.div`
  width: 343px;
  height: 492px;
  display: flex;
  position: relative; /* Додаємо для позиціонування дочірніх елементів */
  overflow: hidden; /* Щоб обрізати картинку за межами контейнера */
  border-radius: 0 0 28px 0; /* Закруглення лише знизу */


 @media screen and (min-width: 768px) {
max-width: 740px;
width: 100%;
margin: 0 auto;

}

@media screen and (min-width: 1440px) {
max-width: 1130px;
} 
`,dCe=U.div`
  position: absolute;
  top: 0; /* Фіксуємо зверху */
  left: -1%; /* Фіксуємо зліва */
  width: 100vh;
  height: 100%;
  background-image: url(${e=>e.$image});
  background-size: cover;
  background-position: start;
  background-repeat: no-repeat;

 @media screen and (min-width: 768px) {
max-width: 740px;
width: 100%;
margin: 0 auto;

}

@media screen and (min-width: 1440px) {
max-width: 1130px;
} 
`,fCe=U.img`
  width: 82px;
  height: 11px;


`,pCe=U.img`
  width: 79px;
  height: 19px;
  @media screen and (min-width: 768px) {

}

@media screen and (min-width: 1440px) {

}
`,mCe=U.div`
  position: absolute;
  bottom: 0%;
  left: 0;
  right: 0;
  height: 74%;
  padding: 20px;
  backdrop-filter: blur(1px);
    -webkit-backdrop-filter: blur(10px);
    background: linear-gradient(360deg, rgba(0, 0, 0, 0.9) 10%, rgba(0, 0, 0, 0.2) 100%);
  background: linear-gradient(360deg, #000 10%, rgba(0, 0, 0, 0.1) 100%);
  display: flex;
  flex-direction: column;
  align-items: center;
  z-index: 2;
  @media screen and (min-width: 768px) {

}

@media screen and (min-width: 1440px) {

}
`,gCe=U.div`

`,vCe=U.h3`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 20px;
  line-height: 130%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 12px;
 @media screen and (min-width: 768px) {

}

@media screen and (min-width: 1440px) {

}
`,yCe=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 20px;
@media screen and (min-width: 768px) {

}

@media screen and (min-width: 1440px) {

}
`,xCe=()=>{const[e,t]=J.useState(0),i=J.useRef(null),{t:r}=jt(),s=r("featureSwiper.features",{returnObjects:!0}).map((l,c)=>({...l,icon:["🎆","👨‍💼","🤖","🔌"][c],smallIcon:["/Fireworks(1).png","/ManOfficeWorker(1).png","/Robot(1).png","/ElectricPlug(1).png"][c],image:[Y3e,Q3e,K3e,Z3e][c],active:e===c})),a=l=>{t(l.activeIndex)},o=l=>{t(l),i.current&&i.current.slideTo(l)};return E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx($3e,{children:s.map((l,c)=>E.jsxs(Bi.Fragment,{children:[c!==0&&E.jsx(oCe,{}),E.jsxs(J3e,{onClick:()=>o(c),children:[E.jsxs(eCe,{children:[E.jsxs(pF,{children:[E.jsx(BS,{opacity:"0.06"}),E.jsx(BS,{})]}),E.jsxs(tCe,{children:[E.jsx(iCe,{children:E.jsx("p",{children:l.icon})}),E.jsx(rCe,{className:l.active?"active":"","aria-selected":l.active,style:{boxShadow:l.active?"inset 0 0 20px 0 rgba(41, 111, 241, 0.88), inset 0 -10px 25px 0 rgba(255, 255, 255, 0.15), inset 0 -5px 10px 0 rgba(255, 255, 255, 0.1), 0 0 10px 6px rgba(38, 96, 166, 0.49), 0 15px 30px -10px rgba(0, 0, 0, 0.25), 0 5px 10px -5px rgba(0, 0, 0, 0.2)":"none"},children:E.jsx(nCe,{children:l.id})})]}),E.jsxs(pF,{children:[E.jsx(BS,{opacity:"0.66"}),E.jsx(BS,{})]})]}),E.jsxs("div",{children:[E.jsx(sCe,{children:l.title}),E.jsx(aCe,{children:l.subtitle})]})]})]},l.id))}),E.jsx("div",{style:{width:"100%",margin:"40px auto"},children:E.jsx(Aa,{id:"benefits",onSwiper:l=>{i.current=l},spaceBetween:0,slidesPerView:1,autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{clickable:!0},navigation:!1,modules:[ra,G_e],onSlideChange:a,initialSlide:e,children:s.map((l,c)=>E.jsx(na,{children:E.jsxs(lCe,{children:[E.jsxs(cCe,{children:[E.jsx(uCe,{src:Gee,alt:"Logo"}),E.jsx(fCe,{src:u3,alt:"Logo"}),E.jsx(pCe,{src:Wee,alt:"Tools"})]}),E.jsxs(hCe,{children:[E.jsx(dCe,{$image:l.image}),E.jsx(mCe,{children:E.jsxs(gCe,{children:[E.jsx(vCe,{children:l.overlay.title}),E.jsx(yCe,{children:l.overlay.text}),E.jsxs(Pu,{children:[E.jsx("a",{href:"https://sabsus.app/registrcompany/web/PRO",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Du,{children:r("featureSwiper.buttons.tryFree")})})," ",E.jsx("a",{href:"https://sabsus.app/login/demo@sabsus.com/demo2025",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Iu,{children:r("featureSwiper.buttons.viewDemo")})})]})]})})]})]})},c))})})]})},qf=()=>{const{t:e}=jt();return E.jsxs(F3e,{children:[E.jsxs(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:[" ",E.jsxs(H3e,{children:[e("whyChoosePlatform.title")," ",E.jsx(G3e,{src:X3e,alt:"🎲"})]})]}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(W3e,{dangerouslySetInnerHTML:{__html:e("whyChoosePlatform.mainTitle")}})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(q3e,{children:e("whyChoosePlatform.description")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.9,delay:.5},viewport:{once:!1,amount:.3},children:E.jsx(xCe,{})})]})},ed=U.div`
  width: 100%;
  min-height: 100vh;
  margin: 0 auto;
  padding: 0 16px;
  background: transparent;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  gap: 50px; /* Відступи між компонентами */

  /* Мобільні пристрої (до 768px) */
  @media (max-width: 767px) {
    gap: 40px;
    padding: 0 12px;
  }

  /* Планшети (768px - 1023px) */
  @media (min-width: 768px) and (max-width: 1023px) {
    max-width: 768px;
    padding: 0 24px;
  }

  /* Невеликі десктопи (1024px - 1279px) */
  @media (min-width: 1024px) and (max-width: 1279px) {
    max-width: 1024px;
    padding: 0 32px;
  }

  /* Середні десктопи (1280px - 1439px) */
  @media (min-width: 1280px) and (max-width: 1439px) {
    max-width: 1280px;
    padding: 0 48px;
  }

  /* Великі десктопи (1440px і більше) */
  @media (min-width: 1440px) {
    max-width: 1440px;
    padding: 0 64px;
  }

  /* Дуже великі екрани (1920px і більше) */
  @media (min-width: 1920px) {
    max-width: 1920px;
    padding: 0 120px;
  }
`,hP=()=>E.jsx(E.Fragment,{children:E.jsxs(ed,{children:[E.jsx(LTe,{}),E.jsx(p$,{}),E.jsx(qf,{}),E.jsx(Wf,{}),E.jsx(mc,{}),E.jsx(Hee,{}),E.jsx(p_e,{}),E.jsx(NTe,{}),E.jsx(Ru,{}),E.jsx(U3e,{})]})}),bCe=U.div`
  width: 100%;
  min-height: 100vh;
  margin: 0 auto;
  padding: 0 16px;
  background: transparent;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  gap: 50px; /* Відступи між компонентами */

  /* Мобільні пристрої (до 768px) */
  @media (max-width: 767px) {
    gap: 40px;
    padding: 0 12px;
  }

  /* Планшети (768px - 1023px) */
  @media (min-width: 768px) and (max-width: 1023px) {
    max-width: 768px;
    padding: 0 24px;
  }

  /* Невеликі десктопи (1024px - 1279px) */
  @media (min-width: 1024px) and (max-width: 1279px) {
    max-width: 1024px;
    padding: 0 32px;
  }

  /* Середні десктопи (1280px - 1439px) */
  @media (min-width: 1280px) and (max-width: 1439px) {
    max-width: 1280px;
    padding: 0 48px;
  }

  /* Великі десктопи (1440px і більше) */
  @media (min-width: 1440px) {
    max-width: 1440px;
    padding: 0 64px;
  }

  /* Дуже великі екрани (1920px і більше) */
  @media (min-width: 1920px) {
    max-width: 1920px;
    padding: 0 120px;
  }
  `,wCe="/assets/Books-DGYWVQlb.svg",SCe=cn`
  0%, 100% {
    transform: translateY(0) rotateX(0deg) scale(1);
  }
  50% {
    transform: translateY(-30px) rotateX(10deg) scale(1.05);
  }
`,_Ce=cn`
  0%, 100% { opacity: 0.8; }
  50% { opacity: 1; }
`,ECe=cn`
  0% { transform: translateX(0) translateY(0); }
  25% { transform: translateX(-5px) translateY(-5px); }
  50% { transform: translateX(5px) translateY(0); }
  75% { transform: translateX(0) translateY(5px); }
`,ACe=cn`
  0% { transform: translateY(100px) translateX(0); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(-150px) translateX(30px); opacity: 0; }
`,TCe=U.g`
  animation: ${ECe} 7s ease-in-out infinite;
  will-change: transform;
`,CCe=U.circle.attrs(e=>({style:{animationDelay:`${e.delay*.7}s`,willChange:"transform, opacity"}}))`
  animation: ${ACe} ${e=>1+e.delay*.9}s linear infinite;
  will-change: transform, opacity;
`,MCe=U.div`
  position: relative;
  width: 100%;
  height: 486px;
  margin: 0 auto 600px;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  will-change: transform;
  top: -50px;
  overflow: visible; 

  @media screen and (min-width: 768px) {
    height: 704px;
  }
  @media screen and (min-width: 1440px) {
    height: 873px;
    top: 40px;
  }
`,PCe=U.div`
  position: relative;
  width: auto;
  height: auto;
  display: flex;
  z-index: 1;
  justify-content: center;
  will-change: transform;
   overflow: visible; 
`,DCe=U.svg`
  position: absolute;
  width: 100vw;
  height: 100%;
  z-index: -4555;
`,ICe=U.svg`
  height: auto;
  min-width: 375px;
  animation: ${SCe} 8s ease-in-out infinite, ${_Ce} 3s ease-in-out infinite;
  filter: drop-shadow(0 0 90px rgba(94, 94, 243, 0.5));
  position: relative;
  top: 300px;
  z-index: 551;
  will-change: transform, opacity;
 overflow: visible; 
  @media screen and (min-width: 768px) {
    top: 200px;
    min-width: 768px;
    filter: drop-shadow(0 0 100px rgba(94, 94, 243, 0.5));
  }

  @media screen and (min-width: 1440px) {
    top: 230px;
    max-width: 1440px;
    height: 1000px;
    filter: drop-shadow(0 0 180px rgba(94, 94, 243, 0.4));
  }
`,RCe=U.path`
  transform: scale(1.4);
  transform-origin: center;
`,OCe=U.div`
  position: absolute;
  top: 70%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  max-width: 1200px;
  padding: 0 20px;
  text-align: center;
  z-index: 3;

  @media screen and (min-width: 768px) {
    top: 45%;
  }
`,LCe=U.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  top: 300px;
  gap: 20px;
  width: 100%;
  will-change: transform;

  @media screen and (min-width: 768px) {
    top: -300px;
    flex-direction: row;
    justify-content: space-between;
  }

  @media screen and (min-width: 1440px) {
    top: -150px;
    justify-content: space-evenly;
    max-width: 1440px;
  }
`,kCe=U.h2`
  font-weight: 500;
  font-size: 96px;
  text-align: center;
  color: var(--white-100);
  @media screen and (min-width: 768px) {
    font-size: 113px;
  }
`,zCe=U.p`
  font-weight: 400;
  font-size: 17px;
  text-align: center;
  color: var(--white-50);
  width: 70%;
  margin: 0 auto;
`,BCe=()=>{const{t:e}=jt(),[t,i]=J.useState([]),r=J.useRef(null);return J.useEffect(()=>{const s=/iPad|iPhone|iPod/.test(navigator.userAgent)?10:window.innerWidth>=1440?100:50,a=()=>Array.from({length:s}).map((l,c)=>({id:c,cx:Math.random()*window.innerWidth,cy:Math.random()*window.innerHeight,r:Math.random()*1.2+.2,delay:Math.random()}));i(a());const o=()=>i(a());return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),E.jsxs(MCe,{children:[E.jsx(PCe,{children:E.jsxs(ICe,{viewBox:"0 0 375 486",ref:r,xmlns:"http://www.w3.org/2000/svg",children:[E.jsx(TCe,{children:E.jsx("g",{filter:"url(#filter0_f_536_51994)",children:E.jsx(RCe,{d:"M167.567 460.116C148.106 294.453 167.567 196.218 -36.2227 -42.2329H407.778C208.715 196.657 241.799 293.479 208.715 460.116H167.567Z",fill:"url(#paint0_linear_536_51994)"})})}),E.jsx(DCe,{children:t.map(n=>E.jsx(CCe,{cx:n.cx,cy:n.cy,r:n.r,delay:n.delay,fill:"#a6a6f5ff"},n.id))}),E.jsxs("defs",{children:[E.jsx("filter",{id:"filter0_f_536_51994",children:E.jsx("feGaussianBlur",{stdDeviation:"12.5"})}),E.jsxs("linearGradient",{id:"paint0_linear_536_51994",x1:"192.3",y1:"48.4",x2:"192.3",y2:"533.7",gradientUnits:"userSpaceOnUse",children:[E.jsx("stop",{stopColor:"#5E5EF3",children:E.jsx("animate",{attributeName:"stop-color",values:"#5E5EF3; #9E5EF3; #5E5EF3",dur:"10s",repeatCount:"indefinite"})}),E.jsx("stop",{offset:"0.8",stopColor:"#5E5EF3",stopOpacity:"0",children:E.jsx("animate",{attributeName:"stop-color",values:"#5E5EF3; #9E5EF3; #5E5EF3",dur:"10s",repeatCount:"indefinite"})})]})]})]})}),E.jsxs(OCe,{children:[E.jsx(G.div,{initial:!1,whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Ml,{children:[e("hero1.aboutUs")," ",E.jsx(Ur,{src:wCe,alt:"book"})]})}),E.jsx(G.div,{initial:!1,whileInView:{opacity:1,y:0},transition:{duration:.7},viewport:{once:!1,amount:.3},children:E.jsx(Pl,{children:e("hero1.title")})}),E.jsx(G.div,{initial:!1,whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsx(pc,{children:e("hero1.description")})})]}),E.jsx(LCe,{children:[{value:"98%",text:"satisfaction",delay:.45},{value:"3x",text:"launchSpeed",delay:.35},{value:"70%",text:"scaling",delay:.25}].map(({value:n,text:s,delay:a},o)=>E.jsx(G.div,{initial:!1,whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:a},viewport:{once:!1,amount:.3},children:E.jsxs("div",{children:[E.jsx(kCe,{children:n}),E.jsx(zCe,{children:e(`hero1.stats.${s}`)})]})},o))})]})},xo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG5SURBVHgBfZFdKGRhGMffM+fYXXasNTtm7ZrGcjG22dXerKkJGSFxMVz5aMhHyg1R8pFEai5cUZJSJBJjpPE1CYW50JBmyCUXuBDThGaE0XHO3zkKIx//et7et/fX8/yf56HI+5IIwWflGDUSqSLh3HPgZN4DO4uLk/P0+jmr6q/UExpPXEur7FswcZjHxyoLSiBcOW//AIAL/qehffNVeHnDbputaeKihSo9DAPf9SXMVjMfG6cxiv+UeMxFSVM7wj/ELyiVe8blSy6zuZd32FbgYf2YsU2yhoIS/0NW6uSHvAsUgxtCoNDlc+q6KVSs32J/pw/Dlgm2rKoaMlmU8t5Bt/rzP7QEA0U0ptUSl6Zxhm/dusJuYgKiq0bYlNxCfIuM0Qowfe+5dOiT6Sg72LYk49Q5F+kRWSovIrRhRPc9k1fZRxnvtiP89GTfKU7t0ZIY8JX63FemmzRCY1EXuuakaBwGkdqHQTwTXCHHgOW27U8szqzywkXqi1voh3fJQ1pfwNm/SCROf8N/mIEze5ippZzEQUHBLf04GeDgSQ3/g7Tz9ZLuQT35Kr6H6pgkSwxtCNxLoO4AH2GwjKsZieIAAAAASUVORK5CYII=",jCe=U.div`
  display: flex;
  margin: 0 auto;
  // margin-top: 100px;
  width: 100%;
  height: 100%;
  margin-bottom: 100px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  @media screen and (min-width: 768px) {
    margin-top: -600px;
  }

    @media screen and (min-width: 1440px) {

    
  }
`,NCe=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity; /* Оптимізація анімації */

  @media screen and (min-width: 768px) {
    /* Додаткові стилі для планшетів */
  }

  @media screen and (min-width: 1440px) {
    /* Додаткові стилі для десктопів */
  }
`,VCe=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,UCe=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,FCe=U.img`
  border-radius: 25px;
  padding: 4px;
  overflow: visible;
  font-size: 13px;
  width: 20px;
  margin-left: 6px;

  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 1px 2px rgba(0, 0, 0, 0.06);

  background: linear-gradient(
      315deg,
      rgba(122, 121, 122, 0) 7%,
      rgba(172, 172, 172, 0) 86%
    )
    rgba(255, 255, 255, 0.03);

  -webkit-transform: translateZ(0);
`,HCe=U.div`
  display: flex;
  flex-direction: column;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;

  @media screen and (min-width: 768px) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    width: 100vw;
    // gap: 24px;
    padding: 0 24px;
    position: relative;

    /* Вертикальні бордери між картками */
    &::before {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      width: 1px;
      // background-color: rgba(255, 255, 255, 0.25);
      transform: translateX(-50%);
    }

    /* Горизонтальні бордери між рядами */
    &::after {
      content: '';
      position: absolute;
      left: 2%;
      right: 0;
      bottom: 0;
      height: 1px;
      width: 96%;
      background-color: rgba(255, 255, 255, 0.25);
    }

    /* Індивідуальні ширини для карток на планшеті */
    & > :nth-child(1) {
      width: 80%; /* Перша картка менша на 20% */
    }
    & > :nth-child(2) {
      width: 120%; /* Друга картка більша */
      margin-left: -20%; /* Зсуваємо для вирівнювання */
    }
    & > :nth-child(3) {
      width: 120%; /* Третя картка більша */
    }
    & > :nth-child(4) {
      width: 80%; /* Четверта картка менша */
      margin-left: 20%; /* Зсуваємо для вирівнювання */
    }
    /* Продовжуємо шаблон для решти карток */
    & > :nth-child(5) {
      width: 80%;
    }
    & > :nth-child(6) {
      width: 120%;
      margin-left: -20%;
    }
    & > :nth-child(7) {
      width: 120%;
    }
    & > :nth-child(8) {
      width: 80%;
      margin-left: 20%;
    }
  }

  @media screen and (min-width: 1440px) {
    display: grid;
    grid-template-columns: repeat(
      3,
      minmax(0, 1fr)
    ); /* Додано minmax для правильного розподілу простору */
    grid-template-rows: auto auto auto;
    max-width: 1400px;
    width: 100%;
    margin: 0 auto;
    padding: 0 20px; /* Додаємо падінги по боках */
    box-sizing: border-box; /* Щоб падінги враховувались у загальній ширині */

    /* Прибираємо бордери для десктопу */
    &::before,
    &::after {
      // display: none;
    }

    /* Скидаємо ширини для десктопу */
    & > * {
      width: auto !important;
      margin-left: 0 !important;
    }

    /* Розміщення карток для десктопу з бордерами */
    & > :nth-child(1) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Бордер праворуч */
    }
    & > :nth-child(2) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25); /* Бордер праворуч */
    }
    & > :nth-child(3) {
      grid-column: 3;
      /* Без бордера праворуч (остання в рядку) */
    }
    & > :nth-child(4) {
      grid-column: 1;
      width: 151% !important; /* Широка картка */
      //?  margin-left: 53%!important; /* Зсуваємо для вирівнювання */
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Прибираємо бордер для широкої картки */
    }
    & > :nth-child(5) {
      grid-column: 2;
      width: 151% !important; /* Широка картка */
      margin-left: 51% !important; /* Зсуваємо для вирівнювання */
      border: none; /* Бордер праворуч */
    }
    & > :nth-child(6) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25); /* Бордер праворуч */
    }
    & > :nth-child(7) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Бордер праворуч */
    }
    & > :nth-child(8) {
      grid-column: 3;
      /* Без бордера */
    }
  }
`,GCe=U(G.div)`
  padding: 16px;
  width: 100%;
  height: fit-content;
  display: flex;
  gap: 4px;
  flex-direction: column;
  position: relative;

  /* Бордер для мобільної версії */
  &:not(:last-child)::after {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 0;
    width: 100%;
    height: 1px;
    background-color: rgba(255, 255, 255, 0.25);
  }

  @media screen and (min-width: 768px) {
    padding: 32px;
    height: 100%;

    /* Прибираємо бордери між картками для планшета */
    &::after {
      top: 0%;
      // display: none;
    }

    /* Додаткові бордери для окремих карток */
    &:nth-child(odd) {
      border-right: 1px solid rgba(255, 255, 255, 0.25);
    }
    &:nth-child(even) {
      border-left: 1px solid rgba(255, 255, 255, 0.25);
    }
  }

  @media screen and (min-width: 1440px) {
    &:nth-child(odd) {
      border-right: none;
    }
    &:nth-child(even) {
      border-left: none;
    }
  }
`,WCe=U(G.p)`
  border-radius: 6px;
  padding: 6px 13px;
  width: 36px;
  height: 36px;
  margin: 10px 0px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.12) 7%,
      rgba(255, 255, 255, 0) 86%
    ),
    rgba(255, 255, 255, 0.03);

  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);

  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,qCe=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,XCe=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-80);
  @media screen and (min-width: 768px) {
    font-size: 17px;
  }

  @media screen and (min-width: 1440px) {
  }
`,YCe=U.div`
  display: none;

  @media screen and (min-width: 768px) {
    display: flex;
    background-color: rgba(255, 255, 255, 0.25);
    width: 1px;
    height: 100%;
  }
`,mF=U.div`
  position: absolute;
  width: 100vw;
  height: 1px;
  // background-color: rgba(255, 255, 255, 0.25);

  @media screen and (min-width: 768px) {
    // display: none;
    width: 100vw;
    height: 1px;
    margin: 0 auto;
    left: 50%;
    transform: translateX(-50%);
  }
`,QCe=()=>{const{t:e}=jt(),t=[{id:"1",key:"discovery"},{id:"2",key:"scope"},{id:"3",key:"prototyping"},{id:"4",key:"syncs"},{id:"5",key:"design"},{id:"6",key:"flexibility"},{id:"7",key:"quality"},{id:"8",key:"support"}],i=r=>{switch(r){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}};return E.jsxs(jCe,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(NCe,{children:[e("howWeWorkSection3.header.title")," ",E.jsx(FCe,{src:xo,alt:"Icon"})]})}),E.jsx(VCe,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:e("howWeWorkSection3.header.heading")}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(UCe,{children:e("howWeWorkSection3.header.description")})}),E.jsxs(HCe,{children:[t.map((r,n)=>E.jsx(Bi.Fragment,{children:E.jsxs(GCe,{as:G.div,...i(n),transition:{duration:.5,delay:n*.1},viewport:{once:!1,amount:.3},children:[E.jsx(mF,{}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.15},viewport:{once:!1,amount:.3},children:E.jsx(WCe,{children:r.id})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.2},viewport:{once:!1,amount:.3},children:E.jsx(qCe,{children:e(`howWeWorkSection3.cards.${r.key}.title`)})}),E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:n*.25},viewport:{once:!1,amount:.3},children:E.jsx(XCe,{children:e(`howWeWorkSection3.cards.${r.key}.desc`)})}),E.jsx(mF,{})]})},n)),E.jsx(YCe,{})]})]})},KCe=()=>E.jsxs(bCe,{children:[E.jsx(BCe,{}),E.jsx(QCe,{}),E.jsx(Ru,{})]}),ZCe=U.div`
width: 100%;
  min-height: 100vh;
  margin: 0 auto;
  padding: 0 16px;
  background: transparent;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  gap: 50px; /* Відступи між компонентами */

  /* Мобільні пристрої (до 768px) */
  @media (max-width: 767px) {
    gap: 40px;
    padding: 0 12px;
  }

  /* Планшети (768px - 1023px) */
  @media (min-width: 768px) and (max-width: 1023px) {
    max-width: 768px;
    padding: 0 24px;
  }

  /* Невеликі десктопи (1024px - 1279px) */
  @media (min-width: 1024px) and (max-width: 1279px) {
    max-width: 1024px;
    padding: 0 32px;
  }

  /* Середні десктопи (1280px - 1439px) */
  @media (min-width: 1280px) and (max-width: 1439px) {
    max-width: 1280px;
    padding: 0 48px;
  }

  /* Великі десктопи (1440px і більше) */
  @media (min-width: 1440px) {
    max-width: 1440px;
    padding: 0 64px;
  }

  /* Дуже великі екрани (1920px і більше) */
  @media (min-width: 1920px) {
    max-width: 1920px;
    padding: 0 120px;
  }
`;U.h1`
font-family: var(--font-family);
font-weight: 600;
font-size: 32px;
line-height: 162%;
color: #fff;
`;U.div`
display: flex;
gap: 20%;
 margin-top: 50px;
 margin-bottom: 50px;
@media screen and (min-width: 744px){
  gap: 50%;
}

@media screen and (min-width: 1440px){

display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
    flex-wrap: wrap;
    gap: 50%;
    margin-top: 50px;
    height: 30%;
}


`;U.div`
display: flex;
flex-direction: column;
gap: 5px;
`;U.p`
font-family: var(--second-family);
font-weight: 400;
font-size: 11px;
letter-spacing: -0.02em;
color: #808080;

@media screen and (min-width: 744px){
font-family: var(--second-family);
font-weight: 400;
font-size: 13px;
letter-spacing: -0.02em;
color: #808080;
margin-bottom: 30px;
}

@media screen and (min-width: 1440px){
font-size: 16px;
margin-bottom: 50px;

}
`;U.a`
font-family: var(--font-family);
font-weight: 600;
font-size: 14px;
line-height: 162%;
color: #fff;
@media screen and (min-width: 744px){
font-size: 16px;

}

@media screen and (min-width: 1440px){
font-size: 20px;

}
`;U.div`

display: flex;
flex-direction: column;
align-items: flex-start;
gap: 10px;
`;U.a`
font-family: var(--font-family);
font-weight: 600;
font-size: 14px;
line-height: 162%;
color: #fff;
@media screen and (min-width: 744px){
font-size: 16px;

}

@media screen and (min-width: 1440px){
font-size: 20px;

}
`;const $Ce="/assets/Star-copy-W-uNnFXW.svg",JCe=U.div`
  margin: 0 auto;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  position: relative;
  top: 140px;
  margin-bottom: 200px;
  @media screen and (min-width: 768px) {
    max-width: 518px;
    width: 100%;
  }
  @media screen and (min-width: 1440px) {
  }
`,e5e=U.div`
  position: absolute;
  top: 15%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  max-width: 1200px;
  padding: 0 20px;
  text-align: center;
  z-index: 3;

  @media screen and (min-width: 768px) {
    max-width: 518px;
    width: 100%;
  }
  @media screen and (min-width: 1440px) {
  }
`,gF=cn`
  0% {
    box-shadow: 0 0 0 0 rgba(73, 75, 236, 0.7);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(73, 75, 236, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(73, 75, 236, 0);
  }
`,t5e=cn`
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
  }
`,dP=cn`
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
`,vF=U.button`
  z-index: 10;
  border-radius: 12px;
  min-width: 343px;
  height: 46px;
  margin-bottom: 32px;
  position: relative;
  overflow: hidden;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 15px;
  color: var(--white-100);
  box-shadow: inset 0 0 6px 0 rgba(255, 255, 255, 0.54);
  background: linear-gradient(139deg, #494bec, #6a6bff, #494bec, #3a3bc7);
  background-size: 300% 300%;
  animation:
    ${gF} 2s infinite,
    ${dP} 6s ease infinite;
  transition: all 0.4s ease;
  border: none;
  cursor: pointer;

  &:hover {
    box-shadow:
      inset 0 0 8px 0 rgba(255, 255, 255, 0.74),
      0 0 15px rgba(73, 75, 236, 0.5);
    transform: perspective(500px) rotateX(10deg) translateY(-2px);
    animation:
      ${gF} 2s infinite,
      ${dP} 3s ease infinite;
    background-size: 200% 200%;
  }

  &:active {
    animation:
      ${t5e} 0.3s ease,
      ${dP} 6s ease infinite;
    background: linear-gradient(139deg, #3a3bc7, #494bec, #3a3bc7);
  }

  @media screen and (min-width: 768px) {
    width: 518px;
  }
`,i5e=U.form`
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  top: 300px;
  width: 100%;

  @media screen and (min-width: 768px) {
    max-width: 518px;
    width: 100%;
  }
`,yF=U.label`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 14px;
  line-height: 130%;
  color: var(--white-100);
  margin-bottom: 20px;
  padding-bottom: 8px;
  width: 343px;
  @media screen and (min-width: 768px) {
    max-width: 518px;
    width: 100%;
  }
`,r5e=U.input`
  border: 1px solid ${e=>e.$error?"#ff4d4f":"#212121"};
  border-radius: 8px;
  padding: 12px 16px;
  width: 100%;
  height: 46px;
  margin-top: 8px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 17px;
  line-height: 130%;
  color: rgba(161, 161, 170, 0.8);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  transition: border-color 0.3s ease;

  &:focus {
    outline: none;
    border-color: ${e=>e.$error?"#ff4d4f":"#494bec"};
  }

  @media screen and (min-width: 768px) {
    max-width: 518px;
    width: 100%;
  }
`,n5e=U.select`
  border: 1px solid #212121;
  border-radius: 8px;
  padding: 12px 16px 12px 16px; /* Залишаємо стандартні падінги */
  width: 100%;
  height: 46px;
  margin-bottom: 32px;
  margin-top: 8px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 17px;
  line-height: 130%;
  color: rgba(161, 161, 170, 0.8);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.12) 7%,
      rgba(255, 255, 255, 0) 86%
    )
    no-repeat;
  background-position: right 10px center; /* Відступ стрілки від правого краю */
  cursor: pointer;
  appearance: none; /* Вимкнення стандартного вигляду */
  -webkit-appearance: none; /* Для Safari */
  -moz-appearance: none; /* Для Firefox */

  /* Додаємо власну стрілку */
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23a1a1aa'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-size: 26px;

  option {
    background-color: rgba(25, 24, 24, 1);
    color: rgba(161, 161, 170, 0.8);
  }

  &:focus {
    outline: none;
    border-color: #494bec;
  }

  @media screen and (min-width: 768px) {
    max-width: 518px;
    width: 100%;
  }
`,s5e=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-100);
  text-align: center;
  max-width: 343px;
  @media screen and (min-width: 768px) {
    max-width: 518px;
    width: 100%;
  }
`,a5e=U.div`
  color: #ff4d4f;
  font-size: 12px;
  margin-top: 4px;
`,o5e=U.div`
  margin-top: 380px;
  text-align: center;
  width: 100%;
  max-width: 518px;
`,l5e=U.h2`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 24px;
  color: var(--white-100);
  margin-bottom: 24px;
`,c5e=U.div`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-bottom: 24px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-100);
`,u5e=U.a`
  color: #6a6bff;
  text-decoration: none;
  transition: color 0.2s ease;

  &:hover {
    color: #8a8bff;
    text-decoration: underline;
  }
`,h5e=U.span`
  background: rgba(73, 75, 236, 0.2);
  border-radius: 4px;
  padding: 2px 6px;
  font-size: 12px;
  color: #6a6bff;
`;U.a`
  display: inline-block;
  padding: 12px 24px;
  border-radius: 8px;
  background: linear-gradient(139deg, #494bec, #6a6bff);
  background-size: 200% 200%;
  color: var(--white-100);
  font-family: var(--font-family);
  font-weight: 500;
  text-decoration: none;
  margin-bottom: 12px;
  transition: all 0.3s ease;
  border: 1px solid rgba(255, 255, 255, 0.1);

  &:hover {
    background-position: 100% 50%;
    box-shadow: 0 4px 12px rgba(73, 75, 236, 0.3);
    transform: translateY(-2px);
  }
`;const d5e=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 14px;
  color: rgba(255, 255, 255, 0.7);
  max-width: 300px;
  margin: 0 auto;
`,f5e=()=>{const{t:e}=jt(),[t,i]=J.useState(""),[r,n]=J.useState(!1),[s,a]=J.useState(""),o=J.useRef(null),l=J.useRef(null),[c,u]=J.useState(!1),h=g=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g),f=g=>{const v=g.target.value;i(v),n(v?!h(v):!1)},m=async g=>{if(g.preventDefault(),!h(t)){n(!0);return}u(!0);try{await lee($J(Gf,"contactMessages"),{email:t,teammates:s,createdAt:cee()}),i(""),a("");const v=document.createElement("a");v.href="https://sabsus.app/registrcompany/web/PRO",v.target="_blank",v.rel="noopener noreferrer",v.click()}catch(v){console.error("Помилка при відправці до Firestore:",v),alert("Сталася помилка. Спробуйте пізніше.")}finally{u(!1)}};return E.jsxs(JCe,{children:[E.jsxs(e5e,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},style:{position:"relative",zIndex:1,width:"100%"},children:E.jsxs(Ml,{children:[e("contact.getStarted")," ",E.jsx(Ur,{src:$Ce,alt:"star"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(Pl,{children:e("contact.title")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(pc,{children:e("contact.description")})})]}),E.jsxs(i5e,{ref:o,onSubmit:m,children:[E.jsxs(yF,{children:[e("contact.form.emailLabel"),E.jsx(r5e,{type:"email",placeholder:e("contact.form.emailPlaceholder"),value:t,onChange:f,$error:r}),r&&E.jsx(a5e,{children:e("contact.form.emailError")})]}),E.jsxs(yF,{htmlFor:"teammates-select",children:[e("contact.form.teammatesLabel"),E.jsxs(n5e,{id:"teammates-select",name:"teammates",value:s,onChange:g=>a(g.target.value),children:[E.jsx("option",{value:"",children:e("contact.form.teammatesOptions.select")}),E.jsx("option",{value:"from-1-to-5",children:e("contact.form.teammatesOptions.1-5")}),E.jsx("option",{value:"from-5-to-15",children:e("contact.form.teammatesOptions.5-15")}),E.jsx("option",{value:"from-15-to-30",children:e("contact.form.teammatesOptions.15-30")}),E.jsx("option",{value:"from-30-to-50",children:e("contact.form.teammatesOptions.30-50")}),E.jsx("option",{value:"from-50-to-100",children:e("contact.form.teammatesOptions.50-100")})]})]}),E.jsx("a",{ref:l,href:"https://sabsus.app/registrcompany/web/PRO",target:"_blank",rel:"noopener noreferrer",children:E.jsx(vF,{type:"submit",disabled:c,children:e(c?"contact.form.submitting":"contact.form.submit")})}),E.jsx(s5e,{children:e("contact.form.terms")}),E.jsx("a",{ref:l,href:"https://sabsus.app/registrcompany/web/PRO",target:"_blank",rel:"noopener noreferrer",style:{display:"none"}})]}),E.jsx(o5e,{children:E.jsxs(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},children:[E.jsx(l5e,{children:e("contact.help.title")}),E.jsxs(c5e,{children:[E.jsx("span",{children:e("contact.help.support")}),E.jsx(u5e,{href:"mailto:support@sabsus.com",children:e("contact.help.supportEmail")}),E.jsx(h5e,{children:e("contact.help.supportBadge")})]}),E.jsx("a",{href:"https://sabsus.info",target:"_blank",rel:"noopener",children:E.jsx(vF,{children:e("contact.help.helpCenter")})}),E.jsx(d5e,{children:e("contact.help.helpText")})]})})]})},p5e=()=>E.jsxs(ZCe,{children:[E.jsx(f5e,{}),E.jsx(mc,{})]}),m5e=U.div`
 width: 100%;
  min-height: 100vh;
  margin: 0 auto;
  padding: 0 16px;
  background: transparent;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  gap: 50px; /* Відступи між компонентами */
margin-top: 50px;

  /* Мобільні пристрої (до 768px) */
  @media (max-width: 767px) {
    gap: 40px;
    padding: 0 12px;
  }

  /* Планшети (768px - 1023px) */
  @media (min-width: 768px) and (max-width: 1023px) {
    max-width: 768px;
    padding: 0 24px;
  }

  /* Невеликі десктопи (1024px - 1279px) */
  @media (min-width: 1024px) and (max-width: 1279px) {
    max-width: 1024px;
    padding: 0 32px;
  }

  /* Середні десктопи (1280px - 1439px) */
  @media (min-width: 1280px) and (max-width: 1439px) {
    max-width: 1280px;
    padding: 0 48px;
  }

  /* Великі десктопи (1440px і більше) */
  @media (min-width: 1440px) {
    max-width: 1440px;
    padding: 0 64px;
    margin-top: 100px;
  }

  /* Дуже великі екрани (1920px і більше) */
  @media (min-width: 1920px) {
    max-width: 1920px;
    padding: 0 120px;
  }
`,g5e=()=>E.jsxs(m5e,{children:[E.jsx(Hee,{}),E.jsx(mc,{})]}),Bx="generated",v5e="pointerdown",y5e="pointerup",$I="pointerleave",x5e="pointerout",Em="pointermove",b5e="touchstart",xF="touchend",w5e="touchmove",S5e="touchcancel",_5e="resize",E5e="visibilitychange",El="tsParticles - Error";class Lo{constructor(t,i,r){if(this._updateFromAngle=(n,s)=>{this.x=Math.cos(n)*s,this.y=Math.sin(n)*s},!ic(t)&&t){this.x=t.x,this.y=t.y;const n=t;this.z=n.z?n.z:0}else if(t!==void 0&&i!==void 0)this.x=t,this.y=i,this.z=r??0;else throw new Error(`${El} Vector3d not initialized correctly`)}static get origin(){return Lo.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(t){this._updateFromAngle(t,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(t){this._updateFromAngle(this.angle,t)}static clone(t){return Lo.create(t.x,t.y,t.z)}static create(t,i,r){return new Lo(t,i,r)}add(t){return Lo.create(this.x+t.x,this.y+t.y,this.z+t.z)}addTo(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}copy(){return Lo.clone(this)}distanceTo(t){return this.sub(t).length}distanceToSq(t){return this.sub(t).getLengthSq()}div(t){return Lo.create(this.x/t,this.y/t,this.z/t)}divTo(t){this.x/=t,this.y/=t,this.z/=t}getLengthSq(){return this.x**2+this.y**2}mult(t){return Lo.create(this.x*t,this.y*t,this.z*t)}multTo(t){this.x*=t,this.y*=t,this.z*=t}normalize(){const t=this.length;t!=0&&this.multTo(1/t)}rotate(t){return Lo.create(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t),0)}setTo(t){this.x=t.x,this.y=t.y;const i=t;this.z=i.z?i.z:0}sub(t){return Lo.create(this.x-t.x,this.y-t.y,this.z-t.z)}subFrom(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}}class Rs extends Lo{constructor(t,i){super(t,i,0)}static get origin(){return Rs.create(0,0)}static clone(t){return Rs.create(t.x,t.y)}static create(t,i){return new Rs(t,i)}}let A5e=Math.random;const JI=new Map;function fP(e,t){JI.get(e)||JI.set(e,t)}function qee(e){return JI.get(e)||(t=>t)}function Xr(){return ac(A5e(),0,1-1e-16)}function ac(e,t,i){return Math.min(Math.max(e,t),i)}function pP(e,t,i,r){return Math.floor((e*i+t*r)/(i+r))}function fo(e){const t=rf(e);let i=$L(e);return t===i&&(i=0),Xr()*(t-i)+i}function ri(e){return ic(e)?e:fo(e)}function $L(e){return ic(e)?e:e.min}function rf(e){return ic(e)?e:e.max}function Ti(e,t){if(e===t||t===void 0&&ic(e))return e;const i=$L(e),r=rf(e);return t!==void 0?{min:Math.min(i,t),max:Math.max(r,t)}:Ti(i,r)}function Am(e){const t=e.random,{enable:i,minimumValue:r}=xf(t)?{enable:t,minimumValue:0}:t;return ri(i?Ti(e.value,r):e.value)}function qa(e,t){const i=e.x-t.x,r=e.y-t.y;return{dx:i,dy:r,distance:Math.sqrt(i**2+r**2)}}function Vo(e,t){return qa(e,t).distance}function T5e(e,t,i){if(ic(e))return e*Math.PI/180;switch(e){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(i.y-t.y,i.x-t.x);case"outside":return Math.atan2(t.y-i.y,t.x-i.x);default:return Xr()*Math.PI*2}}function C5e(e){const t=Rs.origin;return t.length=1,t.angle=e,t}function bF(e,t,i,r){return Rs.create(e.x*(i-r)/(i+r)+t.x*2*r/(i+r),e.y)}function M5e(e){var t,i;return{x:((t=e.position)==null?void 0:t.x)??Xr()*e.size.width,y:((i=e.position)==null?void 0:i.y)??Xr()*e.size.height}}function Xee(e){return e?e.endsWith("%")?parseFloat(e)/100:parseFloat(e):1}const P5e={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function Tm(){return P5e}function wF(e){const t={bounced:!1},{pSide:i,pOtherSide:r,rectSide:n,rectOtherSide:s,velocity:a,factor:o}=e;return r.min<s.min||r.min>s.max||r.max<s.min||r.max>s.max||(i.max>=n.min&&i.max<=(n.max+n.min)/2&&a>0||i.min<=n.max&&i.min>(n.max+n.min)/2&&a<0)&&(t.velocity=a*-o,t.bounced=!0),t}function D5e(e,t){const i=ks(t,r=>e.matches(r));return Uo(i)?i.some(r=>r):i}function Ev(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function I5e(){return!Ev()&&typeof matchMedia<"u"}function Yee(e){if(I5e())return matchMedia(e)}function R5e(e){if(!(Ev()||typeof MutationObserver>"u"))return new MutationObserver(e)}function Tn(e,t){return e===t||Uo(t)&&t.indexOf(e)>-1}async function O5e(e,t){try{await document.fonts.load(`${t??"400"} 36px '${e??"Verdana"}'`)}catch{}}function L5e(e){return Math.floor(Xr()*e.length)}function C3(e,t,i=!0){return e[t!==void 0&&i?t%e.length:L5e(e)]}function JL(e,t,i,r,n){return k5e(yw(e,r??0),t,i,n)}function k5e(e,t,i,r){let n=!0;return(!r||r==="bottom")&&(n=e.top<t.height+i.x),n&&(!r||r==="left")&&(n=e.right>i.x),n&&(!r||r==="right")&&(n=e.left<t.width+i.y),n&&(!r||r==="top")&&(n=e.bottom>i.y),n}function yw(e,t){return{bottom:e.y+t,left:e.x-t,right:e.x+t,top:e.y-t}}function Sa(e,...t){for(const i of t){if(i==null)continue;if(!N0(i)){e=i;continue}const r=Array.isArray(i);r&&(N0(e)||!e||!Array.isArray(e))?e=[]:!r&&(N0(e)||!e||Array.isArray(e))&&(e={});for(const n in i){if(n==="__proto__")continue;const s=i,a=s[n],o=e;o[n]=N0(a)&&Array.isArray(a)?a.map(l=>Sa(o[n],l)):Sa(o[n],a)}}return e}function ek(e,t){return!!Zee(t,i=>i.enable&&Tn(e,i.mode))}function tk(e,t,i){ks(t,r=>{const n=r.mode;r.enable&&Tn(e,n)&&z5e(r,i)})}function z5e(e,t){const i=e.selectors;ks(i,r=>{t(r,e)})}function Qee(e,t){if(!(!t||!e))return Zee(e,i=>D5e(t,i.selectors))}function eR(e){return{position:e.getPosition(),radius:e.getRadius(),mass:e.getMass(),velocity:e.velocity,factor:Rs.create(Am(e.options.bounce.horizontal),Am(e.options.bounce.vertical))}}function Kee(e,t){const{x:i,y:r}=e.velocity.sub(t.velocity),[n,s]=[e.position,t.position],{dx:a,dy:o}=qa(s,n);if(i*a+r*o<0)return;const l=-Math.atan2(o,a),c=e.mass,u=t.mass,h=e.velocity.rotate(l),f=t.velocity.rotate(l),m=bF(h,f,c,u),g=bF(f,h,c,u),v=m.rotate(-l),x=g.rotate(-l);e.velocity.x=v.x*e.factor.x,e.velocity.y=v.y*e.factor.y,t.velocity.x=x.x*t.factor.x,t.velocity.y=x.y*t.factor.y}function B5e(e,t){const i=e.getPosition(),r=e.getRadius(),n=yw(i,r),s=wF({pSide:{min:n.left,max:n.right},pOtherSide:{min:n.top,max:n.bottom},rectSide:{min:t.left,max:t.right},rectOtherSide:{min:t.top,max:t.bottom},velocity:e.velocity.x,factor:Am(e.options.bounce.horizontal)});s.bounced&&(s.velocity!==void 0&&(e.velocity.x=s.velocity),s.position!==void 0&&(e.position.x=s.position));const a=wF({pSide:{min:n.top,max:n.bottom},pOtherSide:{min:n.left,max:n.right},rectSide:{min:t.top,max:t.bottom},rectOtherSide:{min:t.left,max:t.right},velocity:e.velocity.y,factor:Am(e.options.bounce.vertical)});a.bounced&&(a.velocity!==void 0&&(e.velocity.y=a.velocity),a.position!==void 0&&(e.position.y=a.position))}function ks(e,t){return Uo(e)?e.map((i,r)=>t(i,r)):t(e,0)}function Bh(e,t,i){return Uo(e)?C3(e,t,i):e}function Zee(e,t){return Uo(e)?e.find((i,r)=>t(i,r)):t(e,0)?e:void 0}function $ee(e,t){const i=e.value,r=e.animation,n={delayTime:ri(r.delay)*1e3,enable:r.enable,value:ri(e.value)*t,max:rf(i)*t,min:$L(i)*t,loops:0,maxLoops:ri(r.count),time:0};if(r.enable){switch(n.decay=1-ri(r.decay),r.mode){case"increase":n.status="increasing";break;case"decrease":n.status="decreasing";break;case"random":n.status=Xr()>=.5?"increasing":"decreasing";break}const s=r.mode==="auto";switch(r.startValue){case"min":n.value=n.min,s&&(n.status="increasing");break;case"max":n.value=n.max,s&&(n.status="decreasing");break;case"random":default:n.value=fo(n),s&&(n.status=Xr()>=.5?"increasing":"decreasing");break}}return n.initialValue=n.value,n}function j5e(e,t){if(!(e.mode==="percent")){const{mode:n,...s}=e;return s}return"x"in e?{x:e.x/100*t.width,y:e.y/100*t.height}:{width:e.width/100*t.width,height:e.height/100*t.height}}function Jee(e,t){return j5e(e,t)}function xf(e){return typeof e=="boolean"}function tc(e){return typeof e=="string"}function ic(e){return typeof e=="number"}function ete(e){return typeof e=="function"}function N0(e){return typeof e=="object"&&e!==null}function Uo(e){return Array.isArray(e)}const RA="random",kE="mid",M3=new Map;function SF(e){M3.set(e.key,e)}function mP(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function N5e(e){for(const[,s]of M3)if(e.startsWith(s.stringPrefix))return s.parseString(e);const t=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,i=e.replace(t,(s,a,o,l,c)=>a+a+o+o+l+l+(c!==void 0?c+c:"")),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,n=r.exec(i);return n?{a:n[4]!==void 0?parseInt(n[4],16)/255:1,b:parseInt(n[3],16),g:parseInt(n[2],16),r:parseInt(n[1],16)}:void 0}function rc(e,t,i=!0){if(!e)return;const r=tc(e)?{value:e}:e;if(tc(r.value))return tte(r.value,t,i);if(Uo(r.value))return rc({value:C3(r.value,t,i)});for(const[,n]of M3){const s=n.handleRangeColor(r);if(s)return s}}function tte(e,t,i=!0){if(!e)return;const r=tc(e)?{value:e}:e;if(tc(r.value))return r.value===RA?rte():V5e(r.value);if(Uo(r.value))return tte({value:C3(r.value,t,i)});for(const[,n]of M3){const s=n.handleColor(r);if(s)return s}}function Cb(e,t,i=!0){const r=rc(e,t,i);return r?ite(r):void 0}function ite(e){const t=e.r/255,i=e.g/255,r=e.b/255,n=Math.max(t,i,r),s=Math.min(t,i,r),a={h:0,l:(n+s)/2,s:0};return n!==s&&(a.s=a.l<.5?(n-s)/(n+s):(n-s)/(2-n-s),a.h=t===n?(i-r)/(n-s):a.h=i===n?2+(r-t)/(n-s):4+(t-i)/(n-s)),a.l*=100,a.s*=100,a.h*=60,a.h<0&&(a.h+=360),a.h>=360&&(a.h-=360),a}function V5e(e){return N5e(e)}function Av(e){const t={b:0,g:0,r:0},i={h:e.h/360,l:e.l/100,s:e.s/100};if(!i.s)t.r=t.g=t.b=i.l;else{const r=i.l<.5?i.l*(1+i.s):i.l+i.s-i.l*i.s,n=2*i.l-r;t.r=mP(n,r,i.h+1/3),t.g=mP(n,r,i.h),t.b=mP(n,r,i.h-1/3)}return t.r=Math.floor(t.r*255),t.g=Math.floor(t.g*255),t.b=Math.floor(t.b*255),t}function U5e(e){const t=Av(e);return{a:e.a,b:t.b,g:t.g,r:t.r}}function rte(e){return{b:Math.floor(fo(Ti(0,256))),g:Math.floor(fo(Ti(0,256))),r:Math.floor(fo(Ti(0,256)))}}function jh(e,t){return`rgba(${e.r}, ${e.g}, ${e.b}, ${t??1})`}function Mb(e,t){return`hsla(${e.h}, ${e.s}%, ${e.l}%, ${t??1})`}function ik(e,t,i,r){let n=e,s=t;return n.r===void 0&&(n=Av(e)),s.r===void 0&&(s=Av(t)),{b:pP(n.b,s.b,i,r),g:pP(n.g,s.g,i,r),r:pP(n.r,s.r,i,r)}}function tR(e,t,i){if(i===RA)return rte();if(i===kE){const r=e.getFillColor()??e.getStrokeColor(),n=(t==null?void 0:t.getFillColor())??(t==null?void 0:t.getStrokeColor());if(r&&n&&t)return ik(r,n,e.getRadius(),t.getRadius());{const s=r??n;if(s)return Av(s)}}else return i}function nte(e,t,i){const r=tc(e)?e:e.value;return r===RA?i?rc({value:r}):t?RA:kE:r===kE?kE:rc({value:r})}function _F(e){return e!==void 0?{h:e.h.value,s:e.s.value,l:e.l.value}:void 0}function ste(e,t,i){const r={h:{enable:!1,value:e.h},s:{enable:!1,value:e.s},l:{enable:!1,value:e.l}};return t&&(gP(r.h,t.h,i),gP(r.s,t.s,i),gP(r.l,t.l,i)),r}function gP(e,t,i){e.enable=t.enable,e.enable?(e.velocity=ri(t.speed)/100*i,e.decay=1-ri(t.decay),e.status="increasing",e.loops=0,e.maxLoops=ri(t.count),e.time=0,e.delayTime=ri(t.delay)*1e3,t.sync||(e.velocity*=Xr(),e.value*=Xr()),e.initialValue=e.value):e.velocity=0}function jx(e,t,i){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(i.x,i.y),e.closePath()}function F5e(e,t,i,r){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(i.x,i.y),e.lineTo(r.x,r.y),e.closePath()}function H5e(e,t,i){e.fillStyle=i??"rgba(0,0,0,0)",e.fillRect(0,0,t.width,t.height)}function G5e(e,t,i,r){i&&(e.globalAlpha=r,e.drawImage(i,0,0,t.width,t.height),e.globalAlpha=1)}function vP(e,t){e.clearRect(0,0,t.width,t.height)}function W5e(e){const{container:t,context:i,particle:r,delta:n,colorStyles:s,backgroundMask:a,composite:o,radius:l,opacity:c,shadow:u,transform:h}=e,f=r.getPosition(),m=r.rotation+(r.pathRotation?r.velocity.angle:0),g={sin:Math.sin(m),cos:Math.cos(m)},v={a:g.cos*(h.a??1),b:g.sin*(h.b??1),c:-g.sin*(h.c??1),d:g.cos*(h.d??1)};i.setTransform(v.a,v.b,v.c,v.d,f.x,f.y),i.beginPath(),a&&(i.globalCompositeOperation=o);const x=r.shadowColor;u.enable&&x&&(i.shadowBlur=u.blur,i.shadowColor=jh(x),i.shadowOffsetX=u.offset.x,i.shadowOffsetY=u.offset.y),s.fill&&(i.fillStyle=s.fill);const b=r.strokeWidth??0;i.lineWidth=b,s.stroke&&(i.strokeStyle=s.stroke),q5e(t,i,r,l,c,n),b>0&&i.stroke(),r.close&&i.closePath(),r.fill&&i.fill(),X5e(t,i,r,l,c,n),i.globalCompositeOperation="source-over",i.setTransform(1,0,0,1,0,0)}function q5e(e,t,i,r,n,s){if(!i.shape)return;const a=e.drawers.get(i.shape);a&&a.draw(t,i,r,n,s,e.retina.pixelRatio)}function X5e(e,t,i,r,n,s){if(!i.shape)return;const a=e.drawers.get(i.shape);!a||!a.afterEffect||a.afterEffect(t,i,r,n,s,e.retina.pixelRatio)}function Y5e(e,t,i){t.draw&&t.draw(e,i)}function Q5e(e,t,i,r){t.drawParticle&&t.drawParticle(e,i,r)}function K5e(e,t,i){return{h:e.h,s:e.s,l:e.l+(t==="darken"?-1:1)*i}}function Z5e(e,t,i){const r=t[i];r!==void 0&&(e[i]=(e[i]??1)*r)}class $5e{constructor(t){this.container=t,this._applyPostDrawUpdaters=i=>{for(const r of this._postDrawUpdaters)r.afterDraw&&r.afterDraw(i)},this._applyPreDrawUpdaters=(i,r,n,s,a,o)=>{for(const l of this._preDrawUpdaters){if(l.getColorStyles){const{fill:c,stroke:u}=l.getColorStyles(r,i,n,s);c&&(a.fill=c),u&&(a.stroke=u)}if(l.getTransformValues){const c=l.getTransformValues(r);for(const u in c)Z5e(o,c,u)}l.beforeDraw&&l.beforeDraw(r)}},this._applyResizePlugins=()=>{for(const i of this._resizePlugins)i.resize&&i.resize()},this._getPluginParticleColors=i=>{let r,n;for(const s of this._colorPlugins)if(!r&&s.particleFillColor&&(r=Cb(s.particleFillColor(i))),!n&&s.particleStrokeColor&&(n=Cb(s.particleStrokeColor(i))),r&&n)break;return[r,n]},this._initCover=()=>{const i=this.container.actualOptions,r=i.backgroundMask.cover,n=r.color,s=rc(n);if(s){const a={...s,a:r.opacity};this._coverColorStyle=jh(a,a.a)}},this._initStyle=()=>{const i=this.element,r=this.container.actualOptions;if(i){this._fullScreen?(this._originalStyle=Sa({},i.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const n in r.style){if(!n||!r.style)continue;const s=r.style[n];s&&i.style.setProperty(n,s,"important")}}},this._initTrail=async()=>{const i=this.container.actualOptions,r=i.particles.move.trail,n=r.fill;if(r.enable)if(n.color){const s=rc(n.color);if(!s)return;const a=i.particles.move.trail;this._trailFill={color:{...s},opacity:1/a.length}}else await new Promise((s,a)=>{if(!n.image)return;const o=document.createElement("img");o.addEventListener("load",()=>{this._trailFill={image:o,opacity:1/r.length},s()}),o.addEventListener("error",l=>{a(l.error)}),o.src=n.image})},this._paintBase=i=>{this.draw(r=>H5e(r,this.size,i))},this._paintImage=(i,r)=>{this.draw(n=>G5e(n,this.size,i,r))},this._repairStyle=()=>{const i=this.element;i&&(this._safeMutationObserver(r=>r.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(r=>r.observe(i,{attributes:!0})))},this._resetOriginalStyle=()=>{const i=this.element,r=this._originalStyle;if(!(i&&r))return;const n=i.style;n.position=r.position,n.zIndex=r.zIndex,n.top=r.top,n.left=r.left,n.width=r.width,n.height=r.height},this._safeMutationObserver=i=>{this._mutationObserver&&i(this._mutationObserver)},this._setFullScreenStyle=()=>{const i=this.element;if(!i)return;const r="important",n=i.style;n.setProperty("position","fixed",r),n.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),r),n.setProperty("top","0",r),n.setProperty("left","0",r),n.setProperty("width","100%",r),n.setProperty("height","100%",r)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const t=this.container.actualOptions,i=t.particles.move.trail,r=this._trailFill;t.backgroundMask.enable?this.paint():i.enable&&i.length>0&&r?r.color?this._paintBase(jh(r.color,r.opacity)):r.image&&this._paintImage(r.image,r.opacity):this.draw(n=>{vP(n,this.size)})}destroy(){if(this.stop(),this._generated){const t=this.element;t&&t.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(t){const i=this._context;if(i)return t(i)}drawParticle(t,i){if(t.spawning||t.destroyed)return;const r=t.getRadius();if(r<=0)return;const n=t.getFillColor(),s=t.getStrokeColor()??n;let[a,o]=this._getPluginParticleColors(t);a||(a=n),o||(o=s),!(!a&&!o)&&this.draw(l=>{var _;const c=this.container,u=c.actualOptions,h=t.options.zIndex,f=(1-t.zIndexFactor)**h.opacityRate,m=t.bubble.opacity??((_=t.opacity)==null?void 0:_.value)??1,g=t.strokeOpacity??m,v=m*f,x=g*f,b={},S={fill:a?Mb(a,v):void 0};S.stroke=o?Mb(o,x):S.fill,this._applyPreDrawUpdaters(l,t,r,v,S,b),W5e({container:c,context:l,particle:t,delta:i,colorStyles:S,backgroundMask:u.backgroundMask.enable,composite:u.backgroundMask.composite,radius:r*(1-t.zIndexFactor)**h.sizeRate,opacity:v,shadow:t.options.shadow,transform:b}),this._applyPostDrawUpdaters(t)})}drawParticlePlugin(t,i,r){this.draw(n=>Q5e(n,t,i,r))}drawPlugin(t,i){this.draw(r=>Y5e(r,t,i))}async init(){this._safeMutationObserver(t=>t.disconnect()),this._mutationObserver=R5e(t=>{for(const i of t)i.type==="attributes"&&i.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(t){Tm().error(t)}this.initBackground(),this._safeMutationObserver(t=>{this.element&&t.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const t=this.container.actualOptions,i=t.background,r=this.element;if(!r)return;const n=r.style;if(n){if(i.color){const s=rc(i.color);n.backgroundColor=s?jh(s,i.opacity):""}else n.backgroundColor="";n.backgroundImage=i.image||"",n.backgroundPosition=i.position||"",n.backgroundRepeat=i.repeat||"",n.backgroundSize=i.size||""}}initPlugins(){this._resizePlugins=[];for(const[,t]of this.container.plugins)t.resize&&this._resizePlugins.push(t),(t.particleFillColor||t.particleStrokeColor)&&this._colorPlugins.push(t)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const t of this.container.particles.updaters)t.afterDraw&&this._postDrawUpdaters.push(t),(t.getColorStyles||t.getTransformValues||t.beforeDraw)&&this._preDrawUpdaters.push(t)}loadCanvas(t){this._generated&&this.element&&this.element.remove(),this._generated=t.dataset&&Bx in t.dataset?t.dataset[Bx]==="true":this._generated,this.element=t,this.element.ariaHidden="true",this._originalStyle=Sa({},this.element.style),this.size.height=t.offsetHeight,this.size.width=t.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver(i=>{this.element&&i.observe(this.element,{attributes:!0})}),this.container.retina.init(),this.initBackground()}paint(){const t=this.container.actualOptions;this.draw(i=>{t.backgroundMask.enable&&t.backgroundMask.cover?(vP(i,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()})}resize(){if(!this.element)return!1;const t=this.container,i=t.retina.pixelRatio,r=t.canvas.size,n={width:this.element.offsetWidth*i,height:this.element.offsetHeight*i};if(n.height===r.height&&n.width===r.width&&n.height===this.element.height&&n.width===this.element.width)return!1;const s={...r};return this.element.width=r.width=this.element.offsetWidth*i,this.element.height=r.height=this.element.offsetHeight*i,this.container.started&&(this.resizeFactor={width:r.width/s.width,height:r.height/s.height}),!0}stop(){this._safeMutationObserver(t=>t.disconnect()),this._mutationObserver=void 0,this.draw(t=>vP(t,this.size))}async windowResize(){if(!this.element||!this.resize())return;const t=this.container,i=t.updateActualOptions();t.particles.setDensity(),this._applyResizePlugins(),i&&await t.refresh()}}function tl(e,t,i,r,n){if(r){let s={passive:!0};xf(n)?s.capture=n:n!==void 0&&(s=n),e.addEventListener(t,i,s)}else{const s=n;e.removeEventListener(t,i,s)}}class J5e{constructor(t){this.container=t,this._doMouseTouchClick=i=>{const r=this.container,n=r.actualOptions;if(this._canPush){const s=r.interactivity.mouse,a=s.position;if(!a)return;s.clickPosition={...a},s.clickTime=new Date().getTime();const o=n.interactivity.events.onClick;ks(o.mode,l=>this.container.handleClickMode(l))}i.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),500)},this._handleThemeChange=i=>{const r=i,n=this.container,s=n.options,a=s.defaultThemes,o=r.matches?a.dark:a.light,l=s.themes.find(c=>c.name===o);l&&l.default.auto&&n.loadTheme(o)},this._handleVisibilityChange=()=>{const i=this.container,r=i.actualOptions;this._mouseTouchFinish(),r.pauseOnBlur&&(document&&document.hidden?(i.pageHidden=!0,i.pause()):(i.pageHidden=!1,i.getAnimationStatus()?i.play(!0):i.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout(async()=>{const i=this.container.canvas;i&&await i.windowResize()},this.container.actualOptions.interactivity.events.resize.delay*1e3)},this._manageInteractivityListeners=(i,r)=>{const n=this._handlers,s=this.container,a=s.actualOptions,o=s.interactivity.element;if(!o)return;const l=o,c=s.canvas.element;c&&(c.style.pointerEvents=l===c?"initial":"none"),(a.interactivity.events.onHover.enable||a.interactivity.events.onClick.enable)&&(tl(o,Em,n.mouseMove,r),tl(o,b5e,n.touchStart,r),tl(o,w5e,n.touchMove,r),a.interactivity.events.onClick.enable?(tl(o,xF,n.touchEndClick,r),tl(o,y5e,n.mouseUp,r),tl(o,v5e,n.mouseDown,r)):tl(o,xF,n.touchEnd,r),tl(o,i,n.mouseLeave,r),tl(o,S5e,n.touchCancel,r))},this._manageListeners=i=>{const r=this._handlers,n=this.container,s=n.actualOptions,a=s.interactivity.detectsOn,o=n.canvas.element;let l=$I;a==="window"?(n.interactivity.element=window,l=x5e):a==="parent"&&o?n.interactivity.element=o.parentElement??o.parentNode:n.interactivity.element=o,this._manageMediaMatch(i),this._manageResize(i),this._manageInteractivityListeners(l,i),document&&tl(document,E5e,r.visibilityChange,i,!1)},this._manageMediaMatch=i=>{const r=this._handlers,n=Yee("(prefers-color-scheme: dark)");if(n){if(n.addEventListener!==void 0){tl(n,"change",r.themeChange,i);return}n.addListener!==void 0&&(i?n.addListener(r.oldThemeChange):n.removeListener(r.oldThemeChange))}},this._manageResize=i=>{const r=this._handlers,n=this.container;if(!n.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){tl(window,_5e,r.resize,i);return}const a=n.canvas.element;this._resizeObserver&&!i?(a&&this._resizeObserver.unobserve(a),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&i&&a&&(this._resizeObserver=new ResizeObserver(async o=>{o.find(c=>c.target===a)&&await this._handleWindowResize()}),this._resizeObserver.observe(a))},this._mouseDown=()=>{const{interactivity:i}=this.container;if(!i)return;const{mouse:r}=i;r.clicking=!0,r.downPosition=r.position},this._mouseTouchClick=i=>{const r=this.container,n=r.actualOptions,{mouse:s}=r.interactivity;s.inside=!0;let a=!1;const o=s.position;if(!(!o||!n.interactivity.events.onClick.enable)){for(const[,l]of r.plugins)if(l.clickPositionValid&&(a=l.clickPositionValid(o),a))break;a||this._doMouseTouchClick(i),s.clicking=!1}},this._mouseTouchFinish=()=>{const i=this.container.interactivity;if(!i)return;const r=i.mouse;delete r.position,delete r.clickPosition,delete r.downPosition,i.status=$I,r.inside=!1,r.clicking=!1},this._mouseTouchMove=i=>{const r=this.container,n=r.actualOptions,s=r.interactivity,a=r.canvas.element;if(!s||!s.element)return;s.mouse.inside=!0;let o;if(i.type.startsWith("pointer")){this._canPush=!0;const c=i;if(s.element===window){if(a){const u=a.getBoundingClientRect();o={x:c.clientX-u.left,y:c.clientY-u.top}}}else if(n.interactivity.detectsOn==="parent"){const u=c.target,h=c.currentTarget;if(u&&h&&a){const f=u.getBoundingClientRect(),m=h.getBoundingClientRect(),g=a.getBoundingClientRect();o={x:c.offsetX+2*f.left-(m.left+g.left),y:c.offsetY+2*f.top-(m.top+g.top)}}else o={x:c.offsetX??c.clientX,y:c.offsetY??c.clientY}}else c.target===a&&(o={x:c.offsetX??c.clientX,y:c.offsetY??c.clientY})}else if(this._canPush=i.type!=="touchmove",a){const c=i,u=c.touches[c.touches.length-1],h=a.getBoundingClientRect();o={x:u.clientX-(h.left??0),y:u.clientY-(h.top??0)}}const l=r.retina.pixelRatio;o&&(o.x*=l,o.y*=l),s.mouse.position=o,s.status=Em},this._touchEnd=i=>{const r=i,n=Array.from(r.changedTouches);for(const s of n)this._touches.delete(s.identifier);this._mouseTouchFinish()},this._touchEndClick=i=>{const r=i,n=Array.from(r.changedTouches);for(const s of n)this._touches.delete(s.identifier);this._mouseTouchClick(i)},this._touchStart=i=>{const r=i,n=Array.from(r.changedTouches);for(const s of n)this._touches.set(s.identifier,performance.now());this._mouseTouchMove(i)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:i=>this._mouseTouchMove(i),mouseUp:i=>this._mouseTouchClick(i),touchStart:i=>this._touchStart(i),touchMove:i=>this._mouseTouchMove(i),touchEnd:i=>this._touchEnd(i),touchCancel:i=>this._touchEnd(i),touchEndClick:i=>this._touchEndClick(i),visibilityChange:()=>this._handleVisibilityChange(),themeChange:i=>this._handleThemeChange(i),oldThemeChange:i=>this._handleThemeChange(i),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}class oa{constructor(){this.value=""}static create(t,i){const r=new oa;return r.load(t),i!==void 0&&(tc(i)||Uo(i)?r.load({value:i}):r.load(i)),r}load(t){(t==null?void 0:t.value)!==void 0&&(this.value=t.value)}}class eMe{constructor(){this.color=new oa,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(t){t&&(t.color!==void 0&&(this.color=oa.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image),t.position!==void 0&&(this.position=t.position),t.repeat!==void 0&&(this.repeat=t.repeat),t.size!==void 0&&(this.size=t.size),t.opacity!==void 0&&(this.opacity=t.opacity))}}class tMe{constructor(){this.color=new oa,this.color.value="#fff",this.opacity=1}load(t){t&&(t.color!==void 0&&(this.color=oa.create(this.color,t.color)),t.opacity!==void 0&&(this.opacity=t.opacity))}}class iMe{constructor(){this.composite="destination-out",this.cover=new tMe,this.enable=!1}load(t){if(t){if(t.composite!==void 0&&(this.composite=t.composite),t.cover!==void 0){const i=t.cover,r=tc(t.cover)?{color:t.cover}:t.cover;this.cover.load(i.color!==void 0?i:{color:r})}t.enable!==void 0&&(this.enable=t.enable)}}}class rMe{constructor(){this.enable=!0,this.zIndex=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.zIndex!==void 0&&(this.zIndex=t.zIndex))}}class nMe{constructor(){this.enable=!1,this.mode=[]}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode))}}class EF{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(t){this.elementId=t}get elementId(){return this.ids}set elementId(t){this.ids=t}get ids(){return ks(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=ks(t,i=>`#${i}`)}load(t){if(!t)return;const i=t.ids??t.elementId??t.el;i!==void 0&&(this.ids=i),t.selectors!==void 0&&(this.selectors=t.selectors),t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode),t.type!==void 0&&(this.type=t.type)}}class sMe{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.force!==void 0&&(this.force=t.force),t.smooth!==void 0&&(this.smooth=t.smooth))}}class aMe{constructor(){this.enable=!1,this.mode=[],this.parallax=new sMe}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode),this.parallax.load(t.parallax))}}class oMe{constructor(){this.delay=.5,this.enable=!0}load(t){t!==void 0&&(t.delay!==void 0&&(this.delay=t.delay),t.enable!==void 0&&(this.enable=t.enable))}}class lMe{constructor(){this.onClick=new nMe,this.onDiv=new EF,this.onHover=new aMe,this.resize=new oMe}get onclick(){return this.onClick}set onclick(t){this.onClick=t}get ondiv(){return this.onDiv}set ondiv(t){this.onDiv=t}get onhover(){return this.onHover}set onhover(t){this.onHover=t}load(t){if(!t)return;this.onClick.load(t.onClick??t.onclick);const i=t.onDiv??t.ondiv;i!==void 0&&(this.onDiv=ks(i,r=>{const n=new EF;return n.load(r),n})),this.onHover.load(t.onHover??t.onhover),xf(t.resize)?this.resize.enable=t.resize:this.resize.load(t.resize)}}class cMe{constructor(t,i){this._engine=t,this._container=i}load(t){if(!t||!this._container)return;const i=this._engine.plugins.interactors.get(this._container);if(i)for(const r of i)r.loadModeOptions&&r.loadModeOptions(this,t)}}class ate{constructor(t,i){this.detectsOn="window",this.events=new lMe,this.modes=new cMe(t,i)}get detect_on(){return this.detectsOn}set detect_on(t){this.detectsOn=t}load(t){if(!t)return;const i=t.detectsOn??t.detect_on;i!==void 0&&(this.detectsOn=i),this.events.load(t.events),this.modes.load(t.modes)}}class uMe{load(t){t&&(t.position&&(this.position={x:t.position.x??50,y:t.position.y??50,mode:t.position.mode??"percent"}),t.options&&(this.options=Sa({},t.options)))}}class hMe{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(t){t&&(t.maxWidth!==void 0&&(this.maxWidth=t.maxWidth),t.mode!==void 0&&(t.mode==="screen"?this.mode="screen":this.mode="canvas"),t.options!==void 0&&(this.options=Sa({},t.options)))}}class dMe{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(t){t&&(t.auto!==void 0&&(this.auto=t.auto),t.mode!==void 0&&(this.mode=t.mode),t.value!==void 0&&(this.value=t.value))}}class fMe{constructor(){this.name="",this.default=new dMe}load(t){t&&(t.name!==void 0&&(this.name=t.name),this.default.load(t.default),t.options!==void 0&&(this.options=Sa({},t.options)))}}class yP{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(t){t&&(t.count!==void 0&&(this.count=Ti(t.count)),t.enable!==void 0&&(this.enable=t.enable),t.offset!==void 0&&(this.offset=Ti(t.offset)),t.speed!==void 0&&(this.speed=Ti(t.speed)),t.decay!==void 0&&(this.decay=Ti(t.decay)),t.delay!==void 0&&(this.delay=Ti(t.delay)),t.sync!==void 0&&(this.sync=t.sync))}}class pMe{constructor(){this.h=new yP,this.s=new yP,this.l=new yP}load(t){t&&(this.h.load(t.h),this.s.load(t.s),this.l.load(t.l))}}class Pb extends oa{constructor(){super(),this.animation=new pMe}static create(t,i){const r=new Pb;return r.load(t),i!==void 0&&(tc(i)||Uo(i)?r.load({value:i}):r.load(i)),r}load(t){if(super.load(t),!t)return;const i=t.animation;i!==void 0&&(i.enable!==void 0?this.animation.h.load(i):this.animation.load(t.animation))}}class mMe{constructor(){this.speed=2}load(t){t&&t.speed!==void 0&&(this.speed=t.speed)}}class gMe{constructor(){this.enable=!0,this.retries=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.retries!==void 0&&(this.retries=t.retries))}}class vMe{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(t){t&&(t.count!==void 0&&(this.count=Ti(t.count)),t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0&&(this.speed=Ti(t.speed)),t.decay!==void 0&&(this.decay=Ti(t.decay)),t.delay!==void 0&&(this.delay=Ti(t.delay)),t.sync!==void 0&&(this.sync=t.sync))}}class ote extends vMe{constructor(){super(),this.mode="auto",this.startValue="random"}load(t){super.load(t),t&&(t.minimumValue!==void 0&&(this.minimumValue=t.minimumValue),t.mode!==void 0&&(this.mode=t.mode),t.startValue!==void 0&&(this.startValue=t.startValue))}}class yMe{constructor(){this.enable=!1,this.minimumValue=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.minimumValue!==void 0&&(this.minimumValue=t.minimumValue))}}class Xf{constructor(){this.random=new yMe,this.value=0}load(t){t&&(xf(t.random)?this.random.enable=t.random:this.random.load(t.random),t.value!==void 0&&(this.value=Ti(t.value,this.random.enable?this.random.minimumValue:void 0)))}}class AF extends Xf{constructor(){super(),this.random.minimumValue=.1,this.value=1}}class lte{constructor(){this.horizontal=new AF,this.vertical=new AF}load(t){t&&(this.horizontal.load(t.horizontal),this.vertical.load(t.vertical))}}class xMe{constructor(){this.absorb=new mMe,this.bounce=new lte,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new gMe}load(t){t&&(this.absorb.load(t.absorb),this.bounce.load(t.bounce),t.enable!==void 0&&(this.enable=t.enable),t.maxSpeed!==void 0&&(this.maxSpeed=Ti(t.maxSpeed)),t.mode!==void 0&&(this.mode=t.mode),this.overlap.load(t.overlap))}}class bMe{constructor(){this.offset=0,this.value=90}load(t){t&&(t.offset!==void 0&&(this.offset=Ti(t.offset)),t.value!==void 0&&(this.value=Ti(t.value)))}}class wMe{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(t){this.rotate.x=t}get rotateY(){return this.rotate.y}set rotateY(t){this.rotate.y=t}load(t){var n,s;if(!t)return;t.distance!==void 0&&(this.distance=Ti(t.distance)),t.enable!==void 0&&(this.enable=t.enable);const i=((n=t.rotate)==null?void 0:n.x)??t.rotateX;i!==void 0&&(this.rotate.x=i);const r=((s=t.rotate)==null?void 0:s.y)??t.rotateY;r!==void 0&&(this.rotate.y=r)}}class SMe{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(t){t&&(t.x!==void 0&&(this.x=t.x),t.y!==void 0&&(this.y=t.y),t.mode!==void 0&&(this.mode=t.mode),t.radius!==void 0&&(this.radius=t.radius))}}class _Me{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(t){t&&(t.acceleration!==void 0&&(this.acceleration=Ti(t.acceleration)),t.enable!==void 0&&(this.enable=t.enable),t.inverse!==void 0&&(this.inverse=t.inverse),t.maxSpeed!==void 0&&(this.maxSpeed=Ti(t.maxSpeed)))}}class EMe{constructor(){this.clamp=!0,this.delay=new Xf,this.enable=!1,this.options={}}load(t){t&&(t.clamp!==void 0&&(this.clamp=t.clamp),this.delay.load(t.delay),t.enable!==void 0&&(this.enable=t.enable),this.generator=t.generator,t.options&&(this.options=Sa(this.options,t.options)))}}class AMe{load(t){t&&(t.color!==void 0&&(this.color=oa.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image))}}class TMe{constructor(){this.enable=!1,this.length=10,this.fill=new AMe}get fillColor(){return this.fill.color}set fillColor(t){this.fill.load({color:t})}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),(t.fill!==void 0||t.fillColor!==void 0)&&this.fill.load(t.fill||{color:t.fillColor}),t.length!==void 0&&(this.length=t.length))}}class CMe{constructor(){this.default="out"}load(t){t&&(t.default!==void 0&&(this.default=t.default),this.bottom=t.bottom??t.default,this.left=t.left??t.default,this.right=t.right??t.default,this.top=t.top??t.default)}}class MMe{constructor(){this.acceleration=0,this.enable=!1}load(t){t&&(t.acceleration!==void 0&&(this.acceleration=Ti(t.acceleration)),t.enable!==void 0&&(this.enable=t.enable),t.position&&(this.position=Sa({},t.position)))}}class PMe{constructor(){this.angle=new bMe,this.attract=new wMe,this.center=new SMe,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new _Me,this.path=new EMe,this.outModes=new CMe,this.random=!1,this.size=!1,this.speed=2,this.spin=new MMe,this.straight=!1,this.trail=new TMe,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(t){this.collisions=t}get collisions(){return!1}set collisions(t){}get noise(){return this.path}set noise(t){this.path=t}get outMode(){return this.outModes.default}set outMode(t){this.outModes.default=t}get out_mode(){return this.outMode}set out_mode(t){this.outMode=t}load(t){if(!t)return;this.angle.load(ic(t.angle)?{value:t.angle}:t.angle),this.attract.load(t.attract),this.center.load(t.center),t.decay!==void 0&&(this.decay=Ti(t.decay)),t.direction!==void 0&&(this.direction=t.direction),t.distance!==void 0&&(this.distance=ic(t.distance)?{horizontal:t.distance,vertical:t.distance}:{...t.distance}),t.drift!==void 0&&(this.drift=Ti(t.drift)),t.enable!==void 0&&(this.enable=t.enable),this.gravity.load(t.gravity);const i=t.outModes??t.outMode??t.out_mode;i!==void 0&&(N0(i)?this.outModes.load(i):this.outModes.load({default:i})),this.path.load(t.path??t.noise),t.random!==void 0&&(this.random=t.random),t.size!==void 0&&(this.size=t.size),t.speed!==void 0&&(this.speed=Ti(t.speed)),this.spin.load(t.spin),t.straight!==void 0&&(this.straight=t.straight),this.trail.load(t.trail),t.vibrate!==void 0&&(this.vibrate=t.vibrate),t.warp!==void 0&&(this.warp=t.warp)}}class DMe extends ote{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(t){this.minimumValue=t}load(t){(t==null?void 0:t.opacity_min)!==void 0&&t.minimumValue===void 0&&(t.minimumValue=t.opacity_min),super.load(t),t&&t.destroy!==void 0&&(this.destroy=t.destroy)}}class IMe extends Xf{constructor(){super(),this.animation=new DMe,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(t){this.animation=t}load(t){if(!t)return;super.load(t);const i=t.animation??t.anim;i!==void 0&&(this.animation.load(i),this.value=Ti(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class RMe{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(t){this.width=t}get factor(){return this.height}set factor(t){this.height=t}get value_area(){return this.area}set value_area(t){this.area=t}load(t){if(!t)return;t.enable!==void 0&&(this.enable=t.enable);const i=t.width??t.area??t.value_area;i!==void 0&&(this.width=i);const r=t.height??t.factor;r!==void 0&&(this.height=r)}}class OMe{constructor(){this.density=new RMe,this.limit=0,this.value=0}get max(){return this.limit}set max(t){this.limit=t}load(t){if(!t)return;this.density.load(t.density);const i=t.limit??t.max;i!==void 0&&(this.limit=i),t.value!==void 0&&(this.value=t.value)}}class LMe{constructor(){this.blur=0,this.color=new oa,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(t){t&&(t.blur!==void 0&&(this.blur=t.blur),this.color=oa.create(this.color,t.color),t.enable!==void 0&&(this.enable=t.enable),t.offset!==void 0&&(t.offset.x!==void 0&&(this.offset.x=t.offset.x),t.offset.y!==void 0&&(this.offset.y=t.offset.y)))}}const xP="character",bP="char",wP="image",SP="images",_P="polygon",EP="star";class kMe{constructor(){this.loadShape=(t,i,r,n)=>{if(!t)return;const s=Uo(t),a=s?[]:{},o=s!==Uo(this.options[i]),l=s!==Uo(this.options[r]);o&&(this.options[i]=a),l&&n&&(this.options[r]=a),this.options[i]=Sa(this.options[i]??a,t),(!this.options[r]||n)&&(this.options[r]=Sa(this.options[r]??a,t))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){return this.options[xP]??this.options[bP]}set character(t){this.options[bP]=this.options[xP]=t}get custom(){return this.options}set custom(t){this.options=t}get image(){return this.options[wP]??this.options[SP]}set image(t){this.options[SP]=this.options[wP]=t}get images(){return this.image}set images(t){this.image=t}get polygon(){return this.options[_P]??this.options[EP]}set polygon(t){this.options[EP]=this.options[_P]=t}get stroke(){return[]}set stroke(t){}load(t){if(!t)return;const i=t.options??t.custom;if(i!==void 0)for(const r in i){const n=i[r];n&&(this.options[r]=Sa(this.options[r]??{},n))}this.loadShape(t.character,xP,bP,!0),this.loadShape(t.polygon,_P,EP,!1),this.loadShape(t.image??t.images,wP,SP,!0),t.close!==void 0&&(this.close=t.close),t.fill!==void 0&&(this.fill=t.fill),t.type!==void 0&&(this.type=t.type)}}class zMe extends ote{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(t){this.minimumValue=t}load(t){(t==null?void 0:t.size_min)!==void 0&&t.minimumValue===void 0&&(t.minimumValue=t.size_min),super.load(t),t&&t.destroy!==void 0&&(this.destroy=t.destroy)}}class BMe extends Xf{constructor(){super(),this.animation=new zMe,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(t){this.animation=t}load(t){if(super.load(t),!t)return;const i=t.animation??t.anim;i!==void 0&&(this.animation.load(i),this.value=Ti(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class TF{constructor(){this.width=0}load(t){t&&(t.color!==void 0&&(this.color=Pb.create(this.color,t.color)),t.width!==void 0&&(this.width=Ti(t.width)),t.opacity!==void 0&&(this.opacity=Ti(t.opacity)))}}class jMe extends Xf{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(t){super.load(t),t&&(t.opacityRate!==void 0&&(this.opacityRate=t.opacityRate),t.sizeRate!==void 0&&(this.sizeRate=t.sizeRate),t.velocityRate!==void 0&&(this.velocityRate=t.velocityRate))}}class NMe{constructor(t,i){this._engine=t,this._container=i,this.bounce=new lte,this.collisions=new xMe,this.color=new Pb,this.color.value="#fff",this.groups={},this.move=new PMe,this.number=new OMe,this.opacity=new IMe,this.reduceDuplicates=!1,this.shadow=new LMe,this.shape=new kMe,this.size=new BMe,this.stroke=new TF,this.zIndex=new jMe}load(t){var n,s,a;if(!t)return;if(this.bounce.load(t.bounce),this.color.load(Pb.create(this.color,t.color)),t.groups!==void 0)for(const o in t.groups){const l=t.groups[o];l!==void 0&&(this.groups[o]=Sa(this.groups[o]??{},l))}this.move.load(t.move),this.number.load(t.number),this.opacity.load(t.opacity),t.reduceDuplicates!==void 0&&(this.reduceDuplicates=t.reduceDuplicates),this.shape.load(t.shape),this.size.load(t.size),this.shadow.load(t.shadow),this.zIndex.load(t.zIndex);const i=((n=t.move)==null?void 0:n.collisions)??((s=t.move)==null?void 0:s.bounce);i!==void 0&&(this.collisions.enable=i),this.collisions.load(t.collisions),t.interactivity!==void 0&&(this.interactivity=Sa({},t.interactivity));const r=t.stroke??((a=t.shape)==null?void 0:a.stroke);if(r&&(this.stroke=ks(r,o=>{const l=new TF;return l.load(o),l})),this._container){const o=this._engine.plugins.updaters.get(this._container);if(o)for(const c of o)c.loadOptions&&c.loadOptions(this,t);const l=this._engine.plugins.interactors.get(this._container);if(l)for(const c of l)c.loadParticlesOptions&&c.loadParticlesOptions(this,t)}}}function cte(e,...t){for(const i of t)e.load(i)}function ute(e,t,...i){const r=new NMe(e,t);return cte(r,...i),r}class VMe{constructor(t,i){this._findDefaultTheme=r=>this.themes.find(n=>n.default.value&&n.default.mode===r)??this.themes.find(n=>n.default.value&&n.default.mode==="any"),this._importPreset=r=>{this.load(this._engine.plugins.getPreset(r))},this._engine=t,this._container=i,this.autoPlay=!0,this.background=new eMe,this.backgroundMask=new iMe,this.defaultThemes={},this.delay=0,this.fullScreen=new rMe,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new ate(t,i),this.manualParticles=[],this.particles=ute(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(t){this.fullScreen.load(t)}get fps_limit(){return this.fpsLimit}set fps_limit(t){this.fpsLimit=t}get retina_detect(){return this.detectRetina}set retina_detect(t){this.detectRetina=t}load(t){var a,o;if(!t)return;t.preset!==void 0&&ks(t.preset,l=>this._importPreset(l)),t.autoPlay!==void 0&&(this.autoPlay=t.autoPlay),t.delay!==void 0&&(this.delay=Ti(t.delay));const i=t.detectRetina??t.retina_detect;i!==void 0&&(this.detectRetina=i),t.duration!==void 0&&(this.duration=Ti(t.duration));const r=t.fpsLimit??t.fps_limit;r!==void 0&&(this.fpsLimit=r),t.pauseOnBlur!==void 0&&(this.pauseOnBlur=t.pauseOnBlur),t.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=t.pauseOnOutsideViewport),t.zLayers!==void 0&&(this.zLayers=t.zLayers),this.background.load(t.background);const n=t.fullScreen??t.backgroundMode;xf(n)?this.fullScreen.enable=n:this.fullScreen.load(n),this.backgroundMask.load(t.backgroundMask),this.interactivity.load(t.interactivity),t.manualParticles&&(this.manualParticles=t.manualParticles.map(l=>{const c=new uMe;return c.load(l),c})),this.particles.load(t.particles),this.style=Sa(this.style,t.style),this._engine.plugins.loadOptions(this,t),t.smooth!==void 0&&(this.smooth=t.smooth);const s=this._engine.plugins.interactors.get(this._container);if(s)for(const l of s)l.loadOptions&&l.loadOptions(this,t);if(t.responsive!==void 0)for(const l of t.responsive){const c=new hMe;c.load(l),this.responsive.push(c)}if(this.responsive.sort((l,c)=>l.maxWidth-c.maxWidth),t.themes!==void 0)for(const l of t.themes){const c=this.themes.find(u=>u.name===l.name);if(c)c.load(l);else{const u=new fMe;u.load(l),this.themes.push(u)}}this.defaultThemes.dark=(a=this._findDefaultTheme("dark"))==null?void 0:a.name,this.defaultThemes.light=(o=this._findDefaultTheme("light"))==null?void 0:o.name}setResponsive(t,i,r){this.load(r);const n=this.responsive.find(s=>s.mode==="screen"&&screen?s.maxWidth>screen.availWidth:s.maxWidth*i>t);return this.load(n==null?void 0:n.options),n==null?void 0:n.maxWidth}setTheme(t){if(t){const i=this.themes.find(r=>r.name===t);i&&this.load(i.options)}else{const i=Yee("(prefers-color-scheme: dark)"),r=i&&i.matches,n=this._findDefaultTheme(r?"dark":"light");n&&this.load(n.options)}}}class UMe{constructor(t,i){this.container=i,this._engine=t,this._interactors=t.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(t){for(const i of this._externalInteractors)i.isEnabled()&&await i.interact(t)}handleClickMode(t){for(const i of this._externalInteractors)i.handleClickMode&&i.handleClickMode(t)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const t of this._interactors){switch(t.type){case"external":this._externalInteractors.push(t);break;case"particles":this._particleInteractors.push(t);break}t.init()}}async particlesInteract(t,i){for(const r of this._externalInteractors)r.clear(t,i);for(const r of this._particleInteractors)r.isEnabled(t)&&await r.interact(t,i)}async reset(t){for(const i of this._externalInteractors)i.isEnabled()&&i.reset(t);for(const i of this._particleInteractors)i.isEnabled(t)&&i.reset(t)}}const CF=e=>{if(!Tn(e.outMode,e.checkModes))return;const t=e.radius*2;e.coord>e.maxCoord-t?e.setCb(-e.radius):e.coord<t&&e.setCb(e.radius)};class FMe{constructor(t,i,r,n,s,a){this.container=r,this._calcPosition=(o,l,c,u=0)=>{for(const[,S]of o.plugins){const _=S.particlePosition!==void 0?S.particlePosition(l,this):void 0;if(_)return Lo.create(_.x,_.y,c)}const h=o.canvas.size,f=M5e({size:h,position:l}),m=Lo.create(f.x,f.y,c),g=this.getRadius(),v=this.options.move.outModes,x=S=>{CF({outMode:S,checkModes:["bounce","bounce-horizontal"],coord:m.x,maxCoord:o.canvas.size.width,setCb:_=>m.x+=_,radius:g})},b=S=>{CF({outMode:S,checkModes:["bounce","bounce-vertical"],coord:m.y,maxCoord:o.canvas.size.height,setCb:_=>m.y+=_,radius:g})};return x(v.left??v.default),x(v.right??v.default),b(v.top??v.default),b(v.bottom??v.default),this._checkOverlap(m,u)?this._calcPosition(o,void 0,c,u+1):m},this._calculateVelocity=()=>{const o=C5e(this.direction),l=o.copy(),c=this.options.move;if(c.direction==="inside"||c.direction==="outside")return l;const u=Math.PI/180*ri(c.angle.value),h=Math.PI/180*ri(c.angle.offset),f={left:h-u/2,right:h+u/2};return c.straight||(l.angle+=fo(Ti(f.left,f.right))),c.random&&typeof c.speed=="number"&&(l.length*=Xr()),l},this._checkOverlap=(o,l=0)=>{const c=this.options.collisions,u=this.getRadius();if(!c.enable)return!1;const h=c.overlap;if(h.enable)return!1;const f=h.retries;if(f>=0&&l>f)throw new Error(`${El} particle is overlapping and can't be placed`);return!!this.container.particles.find(m=>Vo(o,m.position)<u+m.getRadius())},this._getRollColor=o=>{if(!o||!this.roll||!this.backColor&&!this.roll.alter)return o;const l=this.roll.horizontal&&this.roll.vertical?2:1,c=this.roll.horizontal?Math.PI/2:0;return Math.floor(((this.roll.angle??0)+c)/(Math.PI/l))%2?this.backColor?this.backColor:this.roll.alter?K5e(o,this.roll.alter.type,this.roll.alter.value):o:o},this._initPosition=o=>{const l=this.container,c=ri(this.options.zIndex.value);this.position=this._calcPosition(l,o,ac(c,0,l.zLayers)),this.initialPosition=this.position.copy();const u=l.canvas.size;switch(this.moveCenter={...Jee(this.options.move.center,u),radius:this.options.move.center.radius??0,mode:this.options.move.center.mode??"percent"},this.direction=T5e(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside";break}this.offset=Rs.origin},this._loadShapeData=(o,l)=>{const c=o.options[this.shape];if(c)return Sa({close:o.close,fill:o.fill},Bh(c,this.id,l))},this._engine=t,this.init(i,n,s,a)}destroy(t){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const i=this.container,r=this.pathGenerator;for(const[,n]of i.plugins)n.particleDestroyed&&n.particleDestroyed(this,t);for(const n of i.particles.updaters)n.particleDestroyed&&n.particleDestroyed(this,t);r&&r.reset(this)}draw(t){const i=this.container;for(const[,r]of i.plugins)i.canvas.drawParticlePlugin(r,this,t);i.canvas.drawParticle(this,t)}getFillColor(){return this._getRollColor(this.bubble.color??_F(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??_F(this.strokeColor))}init(t,i,r,n){const s=this.container,a=this._engine;this.id=t,this.group=n,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const o=s.retina.pixelRatio,l=s.actualOptions,c=ute(this._engine,s,l.particles),u=c.shape.type,{reduceDuplicates:h}=c;this.shape=Bh(u,this.id,h);const f=c.shape;if(r&&r.shape&&r.shape.type){const _=r.shape.type,A=Bh(_,this.id,h);A&&(this.shape=A,f.load(r.shape))}this.shapeData=this._loadShapeData(f,h),c.load(r);const m=this.shapeData;m&&c.load(m.particles);const g=new ate(a,s);g.load(s.actualOptions.interactivity),g.load(c.interactivity),this.interactivity=g,this.fill=(m==null?void 0:m.fill)??c.shape.fill,this.close=(m==null?void 0:m.close)??c.shape.close,this.options=c;const v=this.options.move.path;this.pathDelay=Am(v.delay)*1e3,v.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(v.generator),this.pathGenerator&&s.addPath(v.generator,this.pathGenerator)&&this.pathGenerator.init(s)),s.retina.initParticle(this),this.size=$ee(this.options.size,o),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(i),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-ri(this.options.move.decay);const x=s.particles;x.needsSort=x.needsSort||x.lastZIndex<this.position.z,x.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/s.zLayers,this.sides=24;let b=s.drawers.get(this.shape);b||(b=this._engine.plugins.getShapeDrawer(this.shape),b&&s.drawers.set(this.shape,b)),b&&b.loadShape&&b.loadShape(this);const S=b==null?void 0:b.getSidesCount;S&&(this.sides=S(this)),this.spawning=!1,this.shadowColor=rc(this.options.shadow.color);for(const _ of s.particles.updaters)_.init(this);for(const _ of s.particles.movers)_.init&&_.init(this);b&&b.particleInit&&b.particleInit(s,this);for(const[,_]of s.plugins)_.particleCreated&&_.particleCreated(this)}isInsideCanvas(){const t=this.getRadius(),i=this.container.canvas.size,r=this.position;return r.x>=-t&&r.y>=-t&&r.y<=i.height+t&&r.x<=i.width+t}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const t of this.container.particles.updaters)t.reset&&t.reset(this)}}class HMe{constructor(t,i){this.position=t,this.particle=i}}class hte{constructor(t,i){this.position={x:t,y:i}}}class oc extends hte{constructor(t,i,r,n){super(t,i),this.size={height:n,width:r}}contains(t){const i=this.size.width,r=this.size.height,n=this.position;return t.x>=n.x&&t.x<=n.x+i&&t.y>=n.y&&t.y<=n.y+r}intersects(t){t instanceof _a&&t.intersects(this);const i=this.size.width,r=this.size.height,n=this.position,s=t.position,a=t instanceof oc?t.size:{width:0,height:0},o=a.width,l=a.height;return s.x<n.x+i&&s.x+o>n.x&&s.y<n.y+r&&s.y+l>n.y}}class _a extends hte{constructor(t,i,r){super(t,i),this.radius=r}contains(t){return Vo(t,this.position)<=this.radius}intersects(t){const i=this.position,r=t.position,n={x:Math.abs(r.x-i.x),y:Math.abs(r.y-i.y)},s=this.radius;if(t instanceof _a){const a=s+t.radius,o=Math.sqrt(n.x**2+n.y**2);return a>o}else if(t instanceof oc){const{width:a,height:o}=t.size;return Math.pow(n.x-a,2)+Math.pow(n.y-o,2)<=s**2||n.x<=s+a&&n.y<=s+o||n.x<=a||n.y<=o}return!1}}class OA{constructor(t,i){this.rectangle=t,this.capacity=i,this._subdivide=()=>{const{x:r,y:n}=this.rectangle.position,{width:s,height:a}=this.rectangle.size,{capacity:o}=this;for(let l=0;l<4;l++)this._subs.push(new OA(new oc(r+s/2*(l%2),n+a/2*(Math.round(l/2)-l%2),s/2,a/2),o));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(t){return this.rectangle.contains(t.position)?this._points.length<this.capacity?(this._points.push(t),!0):(this._divided||this._subdivide(),this._subs.some(i=>i.insert(t))):!1}query(t,i,r){const n=r||[];if(!t.intersects(this.rectangle))return[];for(const s of this._points)!t.contains(s.position)&&Vo(t.position,s.position)>s.particle.getRadius()&&(!i||i(s.particle))||n.push(s.particle);if(this._divided)for(const s of this._subs)s.query(t,i,n);return n}queryCircle(t,i,r){return this.query(new _a(t.x,t.y,i),r)}queryRectangle(t,i,r){return this.query(new oc(t.x,t.y,i.width,i.height),r)}}const MF=4,PF=e=>new oc(-e.width/4,-e.height/4,e.width*3/2,e.height*3/2);let GMe=class{constructor(t,i){this._applyDensity=(n,s,a)=>{var m;if(!((m=n.number.density)!=null&&m.enable))return;const o=n.number,l=this._initDensityFactor(o.density),c=o.value,u=o.limit>0?o.limit:c,h=Math.min(c,u)*l+s,f=Math.min(this.count,this.filter(g=>g.group===a).length);this.limit=o.limit*l,f<h?this.push(Math.abs(h-f),void 0,n,a):f>h&&this.removeQuantity(f-h,a)},this._initDensityFactor=n=>{const s=this._container;if(!s.canvas.element||!n.enable)return 1;const a=s.canvas.element,o=s.retina.pixelRatio;return a.width*a.height/(n.factor*o**2*n.area)},this._pushParticle=(n,s,a,o)=>{try{let l=this.pool.pop();l?l.init(this._nextId,n,s,a):l=new FMe(this._engine,this._nextId,this._container,n,s,a);let c=!0;return o&&(c=o(l)),c?(this._array.push(l),this._zArray.push(l),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:l}}),l):void 0}catch(l){Tm().warning(`${El} adding particle: ${l}`);return}},this._removeParticle=(n,s,a)=>{const o=this._array[n];if(!o||o.group!==s)return!1;o.destroy(a);const l=this._zArray.indexOf(o);return this._array.splice(n,1),this._zArray.splice(l,1),this.pool.push(o),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:o}}),!0},this._engine=t,this._container=i,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new UMe(t,i);const r=i.canvas.size;this.quadTree=new OA(PF(r),MF),this.movers=this._engine.plugins.getMovers(i,!0),this.updaters=this._engine.plugins.getUpdaters(i,!0)}get count(){return this._array.length}addManualParticles(){const t=this._container,i=t.actualOptions;for(const r of i.manualParticles)this.addParticle(r.position?Jee(r.position,t.canvas.size):void 0,r.options)}addParticle(t,i,r,n){const s=this._container,a=s.actualOptions,o=a.particles.number.limit;if(o>0){const l=this.count+1-o;l>0&&this.removeQuantity(l)}return this._pushParticle(t,i,r,n)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(t){const i=this._container;i.canvas.clear(),await this.update(t);for(const[,r]of i.plugins)i.canvas.drawPlugin(r,t);for(const r of this._zArray)r.draw(t)}filter(t){return this._array.filter(t)}find(t){return this._array.find(t)}handleClickMode(t){this._interactionManager.handleClickMode(t)}init(){var n;const t=this._container,i=t.actualOptions;this.lastZIndex=0,this.needsSort=!1;let r=!1;this.updaters=this._engine.plugins.getUpdaters(t,!0),this._interactionManager.init();for(const[,s]of t.plugins)if(s.particlesInitialization!==void 0&&(r=s.particlesInitialization()),r)break;this._interactionManager.init();for(const[,s]of t.pathGenerators)s.init(t);if(this.addManualParticles(),!r){for(const s in i.particles.groups){const a=i.particles.groups[s];for(let o=this.count,l=0;l<((n=a.number)==null?void 0:n.value)&&o<i.particles.number.value;o++,l++)this.addParticle(void 0,a,s)}for(let s=this.count;s<i.particles.number.value;s++)this.addParticle()}}push(t,i,r,n){this.pushing=!0;for(let s=0;s<t;s++)this.addParticle(i==null?void 0:i.position,r,n);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(t,i,r){this.removeAt(this._array.indexOf(t),void 0,i,r)}removeAt(t,i=1,r,n){if(t<0||t>this.count)return;let s=0;for(let a=t;s<i&&a<this.count;a++)this._removeParticle(a--,r,n)&&s++}removeQuantity(t,i){this.removeAt(0,t,i)}setDensity(){const t=this._container.actualOptions,i=t.particles.groups;for(const r in i)this._applyDensity(i[r],0,r);this._applyDensity(t.particles,t.manualParticles.length)}async update(t){const i=this._container,r=new Set;this.quadTree=new OA(PF(i.canvas.size),MF);for(const[,n]of i.pathGenerators)n.update();for(const[,n]of i.plugins)n.update&&n.update(t);for(const n of this._array){const s=i.canvas.resizeFactor;s&&!n.ignoresResizeRatio&&(n.position.x*=s.width,n.position.y*=s.height,n.initialPosition.x*=s.width,n.initialPosition.y*=s.height),n.ignoresResizeRatio=!1,await this._interactionManager.reset(n);for(const[,a]of this._container.plugins){if(n.destroyed)break;a.particleUpdate&&a.particleUpdate(n,t)}for(const a of this.movers)a.isEnabled(n)&&a.move(n,t);if(n.destroyed){r.add(n);continue}this.quadTree.insert(new HMe(n.getPosition(),n))}if(r.size){const n=s=>!r.has(s);this._array=this.filter(n),this._zArray=this._zArray.filter(n),this.pool.push(...r)}await this._interactionManager.externalInteract(t);for(const n of this._array){for(const s of this.updaters)s.update(n,t);!n.destroyed&&!n.spawning&&await this._interactionManager.particlesInteract(n,t)}if(delete i.canvas.resizeFactor,this.needsSort){const n=this._zArray;n.sort((s,a)=>a.position.z-s.position.z||s.id-a.id),this.lastZIndex=n[n.length-1].position.z,this.needsSort=!1}}};class WMe{constructor(t){this.container=t,this.pixelRatio=1,this.reduceFactor=1}init(){const t=this.container,i=t.actualOptions;this.pixelRatio=!i.detectRetina||Ev()?1:window.devicePixelRatio,this.reduceFactor=1;const r=this.pixelRatio;if(t.canvas.element){const a=t.canvas.element;t.canvas.size.width=a.offsetWidth*r,t.canvas.size.height=a.offsetHeight*r}const n=i.particles,s=n.move;this.attractDistance=ri(s.attract.distance)*r,this.maxSpeed=ri(s.gravity.maxSpeed)*r,this.sizeAnimationSpeed=ri(n.size.animation.speed)*r}initParticle(t){const i=t.options,r=this.pixelRatio,n=i.move,s=n.distance,a=t.retina;a.attractDistance=ri(n.attract.distance)*r,a.moveDrift=ri(n.drift)*r,a.moveSpeed=ri(n.speed)*r,a.sizeAnimationSpeed=ri(i.size.animation.speed)*r;const o=a.maxDistance;o.horizontal=s.horizontal!==void 0?s.horizontal*r:void 0,o.vertical=s.vertical!==void 0?s.vertical*r:void 0,a.maxSpeed=ri(n.gravity.maxSpeed)*r}}function rn(e){return e&&!e.destroyed}function qMe(e,t=60,i=!1){return{value:e,factor:i?60/t:60*e/1e3}}function Ng(e,t,...i){const r=new VMe(e,t);return cte(r,...i),r}const XMe="default",DF={generate:e=>e.velocity,init:()=>{},update:()=>{},reset:()=>{}};let YMe=class{constructor(t,i,r){this.id=i,this._intersectionManager=n=>{if(!(!rn(this)||!this.actualOptions.pauseOnOutsideViewport))for(const s of n)s.target===this.interactivity.element&&(s.isIntersecting?this.play:this.pause)()},this._nextFrame=async n=>{try{if(!this.smooth&&this.lastFrameTime!==void 0&&n<this.lastFrameTime+1e3/this.fpsLimit){this.draw(!1);return}this.lastFrameTime??(this.lastFrameTime=n);const s=qMe(n-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(s.value),this.lastFrameTime=n,s.value>1e3){this.draw(!1);return}if(await this.particles.draw(s),!this.alive()){this.destroy();return}this.getAnimationStatus()&&this.draw(!1)}catch(s){Tm().error(`${El} in animation loop`,s)}},this._engine=t,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=r,this._initialSourceOptions=r,this.retina=new WMe(this),this.canvas=new $5e(this),this.particles=new GMe(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=Ng(this._engine,this),this.actualOptions=Ng(this._engine,this),this._eventListeners=new J5e(this),typeof IntersectionObserver<"u"&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver(n=>this._intersectionManager(n))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(t){if(!rn(this))return;const i=this.interactivity.element;if(!i)return;const r=(h,f,m)=>{if(!rn(this))return;const g=this.retina.pixelRatio,v={x:f.x*g,y:f.y*g},x=this.particles.quadTree.queryCircle(v,m*g);t(h,x)},n=h=>{if(!rn(this))return;const f=h,m={x:f.offsetX||f.clientX,y:f.offsetY||f.clientY};r(h,m,1)},s=()=>{rn(this)&&(c=!0,u=!1)},a=()=>{rn(this)&&(u=!0)},o=h=>{if(rn(this)){if(c&&!u){const f=h;let m=f.touches[f.touches.length-1];if(!m&&(m=f.changedTouches[f.changedTouches.length-1],!m))return;const g=this.canvas.element,v=g?g.getBoundingClientRect():void 0,x={x:m.clientX-(v?v.left:0),y:m.clientY-(v?v.top:0)};r(h,x,Math.max(m.radiusX,m.radiusY))}c=!1,u=!1}},l=()=>{rn(this)&&(c=!1,u=!1)};let c=!1,u=!1;i.addEventListener("click",n),i.addEventListener("touchstart",s),i.addEventListener("touchmove",a),i.addEventListener("touchend",o),i.addEventListener("touchcancel",l)}addLifeTime(t){this._lifeTime+=t}addPath(t,i,r=!1){return!rn(this)||!r&&this.pathGenerators.has(t)?!1:(this.pathGenerators.set(t,i??DF),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!rn(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,r]of this.drawers)r.destroy&&r.destroy(this);for(const r of this.drawers.keys())this.drawers.delete(r);this._engine.plugins.destroy(this),this.destroyed=!0;const t=this._engine.dom(),i=t.findIndex(r=>r===this);i>=0&&t.splice(i,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(t){if(!rn(this))return;let i=t;this._drawAnimationFrame=requestAnimationFrame(async r=>{i&&(this.lastFrameTime=void 0,i=!1),await this._nextFrame(r)})}async export(t,i={}){for(const[,r]of this.plugins){if(!r.export)continue;const n=await r.export(t,i);if(n.supported)return n.blob}Tm().error(`${El} - Export plugin with type ${t} not found`)}getAnimationStatus(){return!this._paused&&!this.pageHidden&&rn(this)}handleClickMode(t){if(rn(this)){this.particles.handleClickMode(t);for(const[,i]of this.plugins)i.handleClickMode&&i.handleClickMode(t)}}async init(){if(!rn(this))return;const t=this._engine.plugins.getSupportedShapes();for(const r of t){const n=this._engine.plugins.getShapeDrawer(r);n&&this.drawers.set(r,n)}this._options=Ng(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=Ng(this._engine,this,this._options);const i=this._engine.plugins.getAvailablePlugins(this);for(const[r,n]of i)this.plugins.set(r,n);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=ri(this.actualOptions.duration)*1e3,this._delay=ri(this.actualOptions.delay)*1e3,this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,r]of this.drawers)r.init&&await r.init(this);for(const[,r]of this.plugins)r.init&&await r.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,r]of this.plugins)r.particlesSetup&&r.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(t){rn(this)&&(this._currentTheme=t,await this.refresh())}pause(){if(rn(this)&&(this._drawAnimationFrame!==void 0&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,t]of this.plugins)t.pause&&t.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(t){if(!rn(this))return;const i=this._paused||t;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),i)for(const[,r]of this.plugins)r.play&&r.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(i||!1)}async refresh(){if(rn(this))return this.stop(),this.start()}async reset(){if(rn(this))return this._initialSourceOptions=void 0,this._options=Ng(this._engine,this),this.actualOptions=Ng(this._engine,this,this._options),this.refresh()}setNoise(t,i,r){rn(this)&&this.setPath(t,i,r)}setPath(t,i,r){if(!t||!rn(this))return;const n={...DF};if(ete(t))n.generate=t,i&&(n.init=i),r&&(n.update=r);else{const s=n;n.generate=t.generate||s.generate,n.init=t.init||s.init,n.update=t.update||s.update}this.addPath(XMe,n,!0)}async start(){!rn(this)||this.started||(await this.init(),this.started=!0,await new Promise(t=>{this._delayTimeout=setTimeout(async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,i]of this.plugins)i.start&&await i.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),t()},this._delay)}))}stop(){if(!(!rn(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,t]of this.plugins)t.stop&&t.stop();for(const t of this.plugins.keys())this.plugins.delete(t);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const t=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth===t?!1:(this.responsiveMaxWidth=t,!0)}};class QMe{constructor(){this._listeners=new Map}addEventListener(t,i){this.removeEventListener(t,i);let r=this._listeners.get(t);r||(r=[],this._listeners.set(t,r)),r.push(i)}dispatchEvent(t,i){const r=this._listeners.get(t);r&&r.forEach(n=>n(i))}hasEventListener(t){return!!this._listeners.get(t)}removeAllEventListeners(t){t?this._listeners.delete(t):this._listeners=new Map}removeEventListener(t,i){const r=this._listeners.get(t);if(!r)return;const n=r.length,s=r.indexOf(i);s<0||(n===1?this._listeners.delete(t):r.splice(s,1))}}function AP(e,t,i,r=!1){let n=t.get(e);return(!n||r)&&(n=[...i.values()].map(s=>s(e)),t.set(e,n)),n}class KMe{constructor(t){this._engine=t,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(t,i){this._initializers.interactors.set(t,i)}addParticleMover(t,i){this._initializers.movers.set(t,i)}addParticleUpdater(t,i){this._initializers.updaters.set(t,i)}addPathGenerator(t,i){!this.getPathGenerator(t)&&this.pathGenerators.set(t,i)}addPlugin(t){!this.getPlugin(t.id)&&this.plugins.push(t)}addPreset(t,i,r=!1){(r||!this.getPreset(t))&&this.presets.set(t,i)}addShapeDrawer(t,i){ks(t,r=>{!this.getShapeDrawer(r)&&this.drawers.set(r,i)})}destroy(t){this.updaters.delete(t),this.movers.delete(t),this.interactors.delete(t)}getAvailablePlugins(t){const i=new Map;for(const r of this.plugins)r.needsPlugin(t.actualOptions)&&i.set(r.id,r.getPlugin(t));return i}getInteractors(t,i=!1){return AP(t,this.interactors,this._initializers.interactors,i)}getMovers(t,i=!1){return AP(t,this.movers,this._initializers.movers,i)}getPathGenerator(t){return this.pathGenerators.get(t)}getPlugin(t){return this.plugins.find(i=>i.id===t)}getPreset(t){return this.presets.get(t)}getShapeDrawer(t){return this.drawers.get(t)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(t,i=!1){return AP(t,this.updaters,this._initializers.updaters,i)}loadOptions(t,i){for(const r of this.plugins)r.loadOptions(t,i)}loadParticlesOptions(t,i,...r){const n=this.updaters.get(t);if(n)for(const s of n)s.loadOptions&&s.loadOptions(i,...r)}}async function ZMe(e){const t=Bh(e.url,e.index);if(!t)return e.fallback;const i=await fetch(t);return i.ok?i.json():(Tm().error(`${El} ${i.status} while retrieving config file`),e.fallback)}function $Me(e){return!e.id&&!e.element&&!e.url&&!e.options}function JMe(e){return!$Me(e)}class ePe{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new QMe,this._initialized=!1,this.plugins=new KMe(this)}get configs(){const t={};for(const[i,r]of this._configs)t[i]=r;return t}get version(){return"2.12.0"}addConfig(t,i){tc(t)?i&&(i.name=t,this._configs.set(t,i)):this._configs.set(t.name??"default",t)}addEventListener(t,i){this._eventDispatcher.addEventListener(t,i)}async addInteractor(t,i,r=!0){this.plugins.addInteractor(t,i),await this.refresh(r)}async addMover(t,i,r=!0){this.plugins.addParticleMover(t,i),await this.refresh(r)}async addParticleUpdater(t,i,r=!0){this.plugins.addParticleUpdater(t,i),await this.refresh(r)}async addPathGenerator(t,i,r=!0){this.plugins.addPathGenerator(t,i),await this.refresh(r)}async addPlugin(t,i=!0){this.plugins.addPlugin(t),await this.refresh(i)}async addPreset(t,i,r=!1,n=!0){this.plugins.addPreset(t,i,r),await this.refresh(n)}async addShape(t,i,r,n,s,a=!0){let o,l=a,c,u,h;xf(r)?(l=r,c=void 0):c=r,xf(n)?(l=n,u=void 0):u=n,xf(s)?(l=s,h=void 0):h=s,ete(i)?o={afterEffect:u,destroy:h,draw:i,init:c}:o=i,this.plugins.addShapeDrawer(t,o),await this.refresh(l)}dispatchEvent(t,i){this._eventDispatcher.dispatchEvent(t,i)}dom(){return this._domArray}domItem(t){const i=this.dom(),r=i[t];if(!r||r.destroyed){i.splice(t,1);return}return r}init(){this._initialized||(this._initialized=!0)}async load(t,i){return this.loadFromArray(t,i)}async loadFromArray(t,i,r){let n;return JMe(t)?n=t:(n={},tc(t)?n.id=t:n.options=t,ic(i)?n.index=i:n.options=i??n.options,n.index=r??n.index),this._loadParams(n)}async loadJSON(t,i,r){let n,s;return ic(i)||i===void 0?n=t:(s=t,n=i),this._loadParams({id:s,url:n,index:r})}async refresh(t=!0){t&&this.dom().forEach(i=>i.refresh())}removeEventListener(t,i){this._eventDispatcher.removeEventListener(t,i)}async set(t,i,r,n){const s={index:n};return tc(t)?s.id=t:s.element=t,i instanceof HTMLElement?s.element=i:s.options=i,ic(r)?s.index=r:s.options=r??s.options,this._loadParams(s)}async setJSON(t,i,r,n){const s={};return t instanceof HTMLElement?(s.element=t,s.url=i,s.index=r):(s.id=t,s.element=i,s.url=r,s.index=n),this._loadParams(s)}setOnClickHandler(t){const i=this.dom();if(!i.length)throw new Error(`${El} can only set click handlers after calling tsParticles.load()`);for(const r of i)r.addClickHandler(t)}async _loadParams(t){const i=t.id??`tsparticles${Math.floor(Xr()*1e4)}`,{index:r,url:n}=t,s=n?await ZMe({fallback:t.options,url:n,index:r}):t.options;let a=t.element??document.getElementById(i);a||(a=document.createElement("div"),a.id=i,document.body.append(a));const o=Bh(s,r),l=this.dom(),c=l.findIndex(f=>f.id===i);if(c>=0){const f=this.domItem(c);f&&!f.destroyed&&(f.destroy(),l.splice(c,1))}let u;if(a.tagName.toLowerCase()==="canvas")u=a,u.dataset[Bx]="false";else{const f=a.getElementsByTagName("canvas");f.length?(u=f[0],u.dataset[Bx]="false"):(u=document.createElement("canvas"),u.dataset[Bx]="true",a.appendChild(u))}u.style.width||(u.style.width="100%"),u.style.height||(u.style.height="100%");const h=new YMe(this,i,o);return c>=0?l.splice(c,0,h):l.push(h),h.canvas.loadCanvas(u),await h.start(),h}}class tPe{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(t){const i=t.value,r=i.hsl??t.value;if(r.h!==void 0&&r.s!==void 0&&r.l!==void 0)return Av(r)}handleRangeColor(t){const i=t.value,r=i.hsl??t.value;if(r.h!==void 0&&r.l!==void 0)return Av({h:ri(r.h),l:ri(r.l),s:ri(r.s)})}parseString(t){if(!t.startsWith("hsl"))return;const i=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,r=i.exec(t);return r?U5e({a:r.length>4?Xee(r[5]):1,h:parseInt(r[1],10),l:parseInt(r[3],10),s:parseInt(r[2],10)}):void 0}}class iPe{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(t){const i=t.value,r=i.rgb??t.value;if(r.r!==void 0)return r}handleRangeColor(t){const i=t.value,r=i.rgb??t.value;if(r.r!==void 0)return{r:ri(r.r),g:ri(r.g),b:ri(r.b)}}parseString(t){if(!t.startsWith(this.stringPrefix))return;const i=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,r=i.exec(t);return r?{a:r.length>4?Xee(r[5]):1,b:parseInt(r[3],10),g:parseInt(r[2],10),r:parseInt(r[1],10)}:void 0}}function rPe(){const e=new iPe,t=new tPe;SF(e),SF(t);const i=new ePe;return i.init(),i}class Ou{constructor(t){this.container=t,this.type="external"}}class rk{constructor(t){this.container=t,this.type="particles"}}const LA=rPe();Ev()||(window.tsParticles=LA);const V0=e=>typeof e=="object"&&e!==null;function kA(e,t,i=()=>!1){if(!V0(e)||!V0(t))return e===t;const r=Object.keys(e).filter(s=>!i(s)),n=Object.keys(t).filter(s=>!i(s));if(r.length!==n.length)return!1;for(const s of r){const a=e[s],o=t[s];if(V0(a)&&V0(o)){if(a===t&&o===e)continue;if(!kA(a,o,i))return!1}else if(Array.isArray(a)&&Array.isArray(o)){if(!dte(a,o,i))return!1}else if(a!==o)return!1}return!0}function dte(e,t,i){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const n=e[r],s=t[r];if(Array.isArray(n)&&Array.isArray(s)){if(!dte(n,s,i))return!1}else if(V0(n)&&V0(s)){if(!kA(n,s,i))return!1}else if(n!==s)return!1}return!0}const fte="tsparticles";let pte=class mte extends J.Component{constructor(t){super(t),this.state={init:!1,library:void 0}}destroy(){this.state.library&&(this.state.library.destroy(),this.setState({library:void 0}))}shouldComponentUpdate(t){const i=t.options??t.params,r=this.props.options??this.props.params;return t.url!==this.props.url||t.id!==this.props.id||t.canvasClassName!==this.props.canvasClassName||t.className!==this.props.className||t.height!==this.props.height||t.width!==this.props.width||!kA(t.style,this.props.style)||t.init!==this.props.init||t.loaded!==this.props.loaded||!kA(i,r,n=>n.startsWith("_"))}componentDidUpdate(){this.refresh()}forceUpdate(){this.refresh().then(()=>{super.forceUpdate()})}componentDidMount(){(async()=>(this.props.init&&await this.props.init(LA),this.setState({init:!0},async()=>{await this.loadParticles()})))()}componentWillUnmount(){this.destroy()}render(){const{width:t,height:i,className:r,canvasClassName:n,id:s}=this.props;return Bi.createElement("div",{className:r,id:s},Bi.createElement("canvas",{className:n,style:{...this.props.style,width:t,height:i}}))}async refresh(){this.destroy(),await this.loadParticles()}async loadParticles(){if(!this.state.init)return;const t=this.props.id??mte.defaultProps.id??fte,i=await LA.load({url:this.props.url,id:t,options:this.props.options??this.props.params});this.props.container&&(this.props.container.current=i),this.setState({library:i}),this.props.loaded&&await this.props.loaded(i)}};pte.defaultProps={width:"100%",height:"100%",options:{},style:{},url:void 0,id:fte};class zA{static init(t){var s;const i=new zA,r=t.selector;if(!r)throw new Error("No selector provided");const n=document.querySelector(r);if(!n)throw new Error("No element found for selector");return LA.set(r.replace(".","").replace("!",""),n,{fullScreen:{enable:!1},particles:{color:{value:t.color??"!000000"},links:{color:"random",distance:t.minDistance??120,enable:t.connectParticles??!1},move:{enable:!0,speed:t.speed??.5},number:{value:t.maxParticles??100},size:{value:{min:1,max:t.sizeVariations??3}}},responsive:(s=t.responsive)==null?void 0:s.map(a=>{var o,l,c,u,h;return{maxWidth:a.breakpoint,options:{particles:{color:{value:(o=a.options)==null?void 0:o.color},links:{distance:(l=a.options)==null?void 0:l.minDistance,enable:(c=a.options)==null?void 0:c.connectParticles},number:{value:t.maxParticles},move:{enable:!0,speed:(u=a.options)==null?void 0:u.speed},size:{value:(h=a.options)==null?void 0:h.sizeVariations}}}}})}).then(a=>{i._container=a}),i}destroy(){const t=this._container;t&&t.destroy()}pauseAnimation(){const t=this._container;t&&t.pause()}resumeAnimation(){const t=this._container;t&&t.play()}}const nPe=e=>{const t=(r,n)=>e.load(r,n);t.load=(r,n,s)=>{e.loadJSON(r,n).then(a=>{a&&s(a)}).catch(()=>{s(void 0)})},t.setOnClickHandler=r=>{e.setOnClickHandler(r)};const i=e.dom();return{particlesJS:t,pJSDom:i}},sPe=e=>{const{particlesJS:t,pJSDom:i}=nPe(e);return window.particlesJS=t,window.pJSDom=i,window.Particles=zA,{particlesJS:t,pJSDom:i,Particles:zA}};function aPe(e){const t=e.initialPosition,{dx:i,dy:r}=qa(t,e.position),n=Math.abs(i),s=Math.abs(r),{maxDistance:a}=e.retina,o=a.horizontal,l=a.vertical;if(!(!o&&!l)){if((o&&n>=o||l&&s>=l)&&!e.misplaced)e.misplaced=!!o&&n>o||!!l&&s>l,o&&(e.velocity.x=e.velocity.y/2-e.velocity.x),l&&(e.velocity.y=e.velocity.x/2-e.velocity.y);else if((!o||n<o)&&(!l||s<l)&&e.misplaced)e.misplaced=!1;else if(e.misplaced){const c=e.position,u=e.velocity;o&&(c.x<t.x&&u.x<0||c.x>t.x&&u.x>0)&&(u.x*=-Xr()),l&&(c.y<t.y&&u.y<0||c.y>t.y&&u.y>0)&&(u.y*=-Xr())}}}function oPe(e,t,i,r,n,s){cPe(e,s);const a=e.gravity,o=a!=null&&a.enable&&a.inverse?-1:1;n&&i&&(e.velocity.x+=n*s.factor/(60*i)),a!=null&&a.enable&&i&&(e.velocity.y+=o*(a.acceleration*s.factor)/(60*i));const l=e.moveDecay;e.velocity.multTo(l);const c=e.velocity.mult(i);a!=null&&a.enable&&r>0&&(!a.inverse&&c.y>=0&&c.y>=r||a.inverse&&c.y<=0&&c.y<=-r)&&(c.y=o*r,i&&(e.velocity.y=c.y/i));const u=e.options.zIndex,h=(1-e.zIndexFactor)**u.velocityRate;c.multTo(h);const{position:f}=e;f.addTo(c),t.vibrate&&(f.x+=Math.sin(f.x*Math.cos(f.y)),f.y+=Math.cos(f.y*Math.sin(f.x)))}function lPe(e,t){const i=e.container;if(!e.spin)return;const r={x:e.spin.direction==="clockwise"?Math.cos:Math.sin,y:e.spin.direction==="clockwise"?Math.sin:Math.cos};e.position.x=e.spin.center.x+e.spin.radius*r.x(e.spin.angle),e.position.y=e.spin.center.y+e.spin.radius*r.y(e.spin.angle),e.spin.radius+=e.spin.acceleration;const n=Math.max(i.canvas.size.width,i.canvas.size.height);e.spin.radius>n/2?(e.spin.radius=n/2,e.spin.acceleration*=-1):e.spin.radius<0&&(e.spin.radius=0,e.spin.acceleration*=-1),e.spin.angle+=t/100*(1-e.spin.radius/n)}function cPe(e,t){var a;const i=e.options,r=i.move.path;if(!r.enable)return;if(e.lastPathTime<=e.pathDelay){e.lastPathTime+=t.value;return}const s=(a=e.pathGenerator)==null?void 0:a.generate(e,t);s&&e.velocity.addTo(s),r.clamp&&(e.velocity.x=ac(e.velocity.x,-1,1),e.velocity.y=ac(e.velocity.y,-1,1)),e.lastPathTime-=e.pathDelay}function uPe(e){return e.slow.inRange?e.slow.factor:1}const hPe=2;class dPe{constructor(){this._initSpin=t=>{const i=t.container,r=t.options,n=r.move.spin;if(!n.enable)return;const s=n.position??{x:50,y:50},a={x:s.x/100*i.canvas.size.width,y:s.y/100*i.canvas.size.height},o=t.getPosition(),l=Vo(o,a),c=ri(n.acceleration);t.retina.spinAcceleration=c*i.retina.pixelRatio,t.spin={center:a,direction:t.velocity.x>=0?"clockwise":"counter-clockwise",angle:t.velocity.angle,radius:l,acceleration:t.retina.spinAcceleration}}}init(t){const i=t.options,r=i.move.gravity;t.gravity={enable:r.enable,acceleration:ri(r.acceleration),inverse:r.inverse},this._initSpin(t)}isEnabled(t){return!t.destroyed&&t.options.move.enable}move(t,i){var g,v;const r=t.options,n=r.move;if(!n.enable)return;const s=t.container,a=s.retina.pixelRatio,o=uPe(t),l=((g=t.retina).moveSpeed??(g.moveSpeed=ri(n.speed)*a))*s.retina.reduceFactor,c=(v=t.retina).moveDrift??(v.moveDrift=ri(t.options.move.drift)*a),u=rf(r.size.value)*a,h=n.size?t.getRadius()/u:1,f=l*h*o*(i.factor||1)/hPe,m=t.retina.maxSpeed??s.retina.maxSpeed;n.spin.enable?lPe(t,f):oPe(t,n,f,m,c,i),aPe(t)}}async function fPe(e,t=!0){await e.addMover("base",()=>new dPe,t)}class pPe{draw(t,i,r){i.circleRange||(i.circleRange={min:0,max:Math.PI*2});const n=i.circleRange;t.arc(0,0,r,n.min,n.max,!1)}getSidesCount(){return 12}particleInit(t,i){const r=i.shapeData,n=(r==null?void 0:r.angle)??{max:360,min:0};i.circleRange=N0(n)?{min:n.min*Math.PI/180,max:n.max*Math.PI/180}:{min:0,max:n*Math.PI/180}}}async function mPe(e,t=!0){await e.addShape("circle",new pPe,t)}function TP(e,t,i,r,n){if(!t||!i.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0)||(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),(t.delayTime??0)>0&&t.time<(t.delayTime??0)))return;const s=fo(i.offset),a=(t.velocity??0)*e.factor+s*3.6,o=t.decay??1;!n||t.status==="increasing"?(t.value+=a,t.value>r&&(t.loops||(t.loops=0),t.loops++,n&&(t.status="decreasing",t.value-=t.value%r))):(t.value-=a,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)),t.velocity&&o!==1&&(t.velocity*=o),t.value>r&&(t.value%=r)}function gPe(e,t){const{h:i,s:r,l:n}=e.options.color.animation,{color:s}=e;if(!s)return;const{h:a,s:o,l}=s;a&&TP(t,a,i,360,!1),o&&TP(t,o,r,100,!0),l&&TP(t,l,n,100,!0)}class vPe{constructor(t){this.container=t}init(t){const i=Cb(t.options.color,t.id,t.options.reduceDuplicates);i&&(t.color=ste(i,t.options.color.animation,this.container.retina.reduceFactor))}isEnabled(t){const{h:i,s:r,l:n}=t.options.color.animation,{color:s}=t;return!t.destroyed&&!t.spawning&&((s==null?void 0:s.h.value)!==void 0&&i.enable||(s==null?void 0:s.s.value)!==void 0&&r.enable||(s==null?void 0:s.l.value)!==void 0&&n.enable)}update(t,i){gPe(t,i)}}async function yPe(e,t=!0){await e.addParticleUpdater("color",i=>new vPe(i),t)}function xPe(e,t,i,r){switch(e.options.opacity.animation.destroy){case"max":t>=r&&e.destroy();break;case"min":t<=i&&e.destroy();break}}function bPe(e,t){const i=e.opacity;if(e.destroyed||!(i!=null&&i.enable)||(i.maxLoops??0)>0&&(i.loops??0)>(i.maxLoops??0))return;const r=i.min,n=i.max,s=i.decay??1;if(i.time||(i.time=0),(i.delayTime??0)>0&&i.time<(i.delayTime??0)&&(i.time+=t.value),!((i.delayTime??0)>0&&i.time<(i.delayTime??0))){switch(i.status){case"increasing":i.value>=n?(i.status="decreasing",i.loops||(i.loops=0),i.loops++):i.value+=(i.velocity??0)*t.factor;break;case"decreasing":i.value<=r?(i.status="increasing",i.loops||(i.loops=0),i.loops++):i.value-=(i.velocity??0)*t.factor;break}i.velocity&&i.decay!==1&&(i.velocity*=s),xPe(e,i.value,r,n),e.destroyed||(i.value=ac(i.value,r,n))}}class wPe{constructor(t){this.container=t}init(t){const i=t.options.opacity;t.opacity=$ee(i,1);const r=i.animation;r.enable&&(t.opacity.velocity=ri(r.speed)/100*this.container.retina.reduceFactor,r.sync||(t.opacity.velocity*=Xr()))}isEnabled(t){return!t.destroyed&&!t.spawning&&!!t.opacity&&t.opacity.enable&&((t.opacity.maxLoops??0)<=0||(t.opacity.maxLoops??0)>0&&(t.opacity.loops??0)<(t.opacity.maxLoops??0))}reset(t){t.opacity&&(t.opacity.time=0,t.opacity.loops=0)}update(t,i){this.isEnabled(t)&&bPe(t,i)}}async function SPe(e,t=!0){await e.addParticleUpdater("opacity",i=>new wPe(i),t)}function _Pe(e){if(e.outMode!=="bounce"&&e.outMode!=="bounce-horizontal"&&e.outMode!=="bounceHorizontal"&&e.outMode!=="split"||e.direction!=="left"&&e.direction!=="right")return;e.bounds.right<0&&e.direction==="left"?e.particle.position.x=e.size+e.offset.x:e.bounds.left>e.canvasSize.width&&e.direction==="right"&&(e.particle.position.x=e.canvasSize.width-e.size-e.offset.x);const t=e.particle.velocity.x;let i=!1;if(e.direction==="right"&&e.bounds.right>=e.canvasSize.width&&t>0||e.direction==="left"&&e.bounds.left<=0&&t<0){const n=Am(e.particle.options.bounce.horizontal);e.particle.velocity.x*=-n,i=!0}if(!i)return;const r=e.offset.x+e.size;e.bounds.right>=e.canvasSize.width&&e.direction==="right"?e.particle.position.x=e.canvasSize.width-r:e.bounds.left<=0&&e.direction==="left"&&(e.particle.position.x=r),e.outMode==="split"&&e.particle.destroy()}function EPe(e){if(e.outMode!=="bounce"&&e.outMode!=="bounce-vertical"&&e.outMode!=="bounceVertical"&&e.outMode!=="split"||e.direction!=="bottom"&&e.direction!=="top")return;e.bounds.bottom<0&&e.direction==="top"?e.particle.position.y=e.size+e.offset.y:e.bounds.top>e.canvasSize.height&&e.direction==="bottom"&&(e.particle.position.y=e.canvasSize.height-e.size-e.offset.y);const t=e.particle.velocity.y;let i=!1;if(e.direction==="bottom"&&e.bounds.bottom>=e.canvasSize.height&&t>0||e.direction==="top"&&e.bounds.top<=0&&t<0){const n=Am(e.particle.options.bounce.vertical);e.particle.velocity.y*=-n,i=!0}if(!i)return;const r=e.offset.y+e.size;e.bounds.bottom>=e.canvasSize.height&&e.direction==="bottom"?e.particle.position.y=e.canvasSize.height-r:e.bounds.top<=0&&e.direction==="top"&&(e.particle.position.y=r),e.outMode==="split"&&e.particle.destroy()}class APe{constructor(t){this.container=t,this.modes=["bounce","bounce-vertical","bounce-horizontal","bounceVertical","bounceHorizontal","split"]}update(t,i,r,n){if(!this.modes.includes(n))return;const s=this.container;let a=!1;for(const[,f]of s.plugins)if(f.particleBounce!==void 0&&(a=f.particleBounce(t,r,i)),a)break;if(a)return;const o=t.getPosition(),l=t.offset,c=t.getRadius(),u=yw(o,c),h=s.canvas.size;_Pe({particle:t,outMode:n,direction:i,bounds:u,canvasSize:h,offset:l,size:c}),EPe({particle:t,outMode:n,direction:i,bounds:u,canvasSize:h,offset:l,size:c})}}class TPe{constructor(t){this.container=t,this.modes=["destroy"]}update(t,i,r,n){if(!this.modes.includes(n))return;const s=this.container;switch(t.outType){case"normal":case"outside":if(JL(t.position,s.canvas.size,Rs.origin,t.getRadius(),i))return;break;case"inside":{const{dx:a,dy:o}=qa(t.position,t.moveCenter),{x:l,y:c}=t.velocity;if(l<0&&a>t.moveCenter.radius||c<0&&o>t.moveCenter.radius||l>=0&&a<-t.moveCenter.radius||c>=0&&o<-t.moveCenter.radius)return;break}}s.particles.remove(t,void 0,!0)}}class CPe{constructor(t){this.container=t,this.modes=["none"]}update(t,i,r,n){if(!this.modes.includes(n)||t.options.move.distance.horizontal&&(i==="left"||i==="right")||t.options.move.distance.vertical&&(i==="top"||i==="bottom"))return;const s=t.options.move.gravity,a=this.container,o=a.canvas.size,l=t.getRadius();if(s.enable){const c=t.position;(!s.inverse&&c.y>o.height+l&&i==="bottom"||s.inverse&&c.y<-l&&i==="top")&&a.particles.remove(t)}else{if(t.velocity.y>0&&t.position.y<=o.height+l||t.velocity.y<0&&t.position.y>=-l||t.velocity.x>0&&t.position.x<=o.width+l||t.velocity.x<0&&t.position.x>=-l)return;JL(t.position,a.canvas.size,Rs.origin,l,i)||a.particles.remove(t)}}}class MPe{constructor(t){this.container=t,this.modes=["out"]}update(t,i,r,n){if(!this.modes.includes(n))return;const s=this.container;switch(t.outType){case"inside":{const{x:a,y:o}=t.velocity,l=Rs.origin;l.length=t.moveCenter.radius,l.angle=t.velocity.angle+Math.PI,l.addTo(Rs.create(t.moveCenter));const{dx:c,dy:u}=qa(t.position,l);if(a<=0&&c>=0||o<=0&&u>=0||a>=0&&c<=0||o>=0&&u<=0)return;t.position.x=Math.floor(fo({min:0,max:s.canvas.size.width})),t.position.y=Math.floor(fo({min:0,max:s.canvas.size.height}));const{dx:h,dy:f}=qa(t.position,t.moveCenter);t.direction=Math.atan2(-f,-h),t.velocity.angle=t.direction;break}default:{if(JL(t.position,s.canvas.size,Rs.origin,t.getRadius(),i))return;switch(t.outType){case"outside":{t.position.x=Math.floor(fo({min:-t.moveCenter.radius,max:t.moveCenter.radius}))+t.moveCenter.x,t.position.y=Math.floor(fo({min:-t.moveCenter.radius,max:t.moveCenter.radius}))+t.moveCenter.y;const{dx:a,dy:o}=qa(t.position,t.moveCenter);t.moveCenter.radius&&(t.direction=Math.atan2(o,a),t.velocity.angle=t.direction);break}case"normal":{const a=t.options.move.warp,o=s.canvas.size,l={bottom:o.height+t.getRadius()+t.offset.y,left:-t.getRadius()-t.offset.x,right:o.width+t.getRadius()+t.offset.x,top:-t.getRadius()-t.offset.y},c=t.getRadius(),u=yw(t.position,c);i==="right"&&u.left>o.width+t.offset.x?(t.position.x=l.left,t.initialPosition.x=t.position.x,a||(t.position.y=Xr()*o.height,t.initialPosition.y=t.position.y)):i==="left"&&u.right<-t.offset.x&&(t.position.x=l.right,t.initialPosition.x=t.position.x,a||(t.position.y=Xr()*o.height,t.initialPosition.y=t.position.y)),i==="bottom"&&u.top>o.height+t.offset.y?(a||(t.position.x=Xr()*o.width,t.initialPosition.x=t.position.x),t.position.y=l.top,t.initialPosition.y=t.position.y):i==="top"&&u.bottom<-t.offset.y&&(a||(t.position.x=Xr()*o.width,t.initialPosition.x=t.position.x),t.position.y=l.bottom,t.initialPosition.y=t.position.y);break}}break}}}}class PPe{constructor(t){this.container=t,this._updateOutMode=(i,r,n,s)=>{for(const a of this.updaters)a.update(i,s,r,n)},this.updaters=[new APe(t),new TPe(t),new MPe(t),new CPe(t)]}init(){}isEnabled(t){return!t.destroyed&&!t.spawning}update(t,i){const r=t.options.move.outModes;this._updateOutMode(t,i,r.bottom??r.default,"bottom"),this._updateOutMode(t,i,r.left??r.default,"left"),this._updateOutMode(t,i,r.right??r.default,"right"),this._updateOutMode(t,i,r.top??r.default,"top")}}async function DPe(e,t=!0){await e.addParticleUpdater("outModes",i=>new PPe(i),t)}function IPe(e,t,i,r){switch(e.options.size.animation.destroy){case"max":t>=r&&e.destroy();break;case"min":t<=i&&e.destroy();break}}function RPe(e,t){const i=e.size;if(e.destroyed||!i||!i.enable||(i.maxLoops??0)>0&&(i.loops??0)>(i.maxLoops??0))return;const r=(i.velocity??0)*t.factor,n=i.min,s=i.max,a=i.decay??1;if(i.time||(i.time=0),(i.delayTime??0)>0&&i.time<(i.delayTime??0)&&(i.time+=t.value),!((i.delayTime??0)>0&&i.time<(i.delayTime??0))){switch(i.status){case"increasing":i.value>=s?(i.status="decreasing",i.loops||(i.loops=0),i.loops++):i.value+=r;break;case"decreasing":i.value<=n?(i.status="increasing",i.loops||(i.loops=0),i.loops++):i.value-=r}i.velocity&&a!==1&&(i.velocity*=a),IPe(e,i.value,n,s),e.destroyed||(i.value=ac(i.value,n,s))}}class OPe{init(t){const i=t.container,r=t.options.size,n=r.animation;n.enable&&(t.size.velocity=(t.retina.sizeAnimationSpeed??i.retina.sizeAnimationSpeed)/100*i.retina.reduceFactor,n.sync||(t.size.velocity*=Xr()))}isEnabled(t){return!t.destroyed&&!t.spawning&&t.size.enable&&((t.size.maxLoops??0)<=0||(t.size.maxLoops??0)>0&&(t.size.loops??0)<(t.size.maxLoops??0))}reset(t){t.size.loops=0}update(t,i){this.isEnabled(t)&&RPe(t,i)}}async function LPe(e,t=!0){await e.addParticleUpdater("size",()=>new OPe,t)}async function kPe(e,t=!0){await fPe(e,!1),await mPe(e,!1),await yPe(e,!1),await SPe(e,!1),await DPe(e,!1),await LPe(e,!1),await e.refresh(t)}async function zPe(){fP("ease-in-quad",e=>e**2),fP("ease-out-quad",e=>1-(1-e)**2),fP("ease-in-out-quad",e=>e<.5?2*e**2:1-(-2*e+2)**2/2)}class BPe{constructor(){this.distance=200,this.duration=.4,this.easing="ease-out-quad",this.factor=1,this.maxSpeed=50,this.speed=1}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.easing!==void 0&&(this.easing=t.easing),t.factor!==void 0&&(this.factor=t.factor),t.maxSpeed!==void 0&&(this.maxSpeed=t.maxSpeed),t.speed!==void 0&&(this.speed=t.speed))}}let jPe=class extends Ou{constructor(t,i){super(i),this._clickAttract=()=>{const r=this.container;r.attract||(r.attract={particles:[]});const{attract:n}=r;if(n.finish||(n.count||(n.count=0),n.count++,n.count===r.particles.count&&(n.finish=!0)),n.clicking){const s=r.interactivity.mouse.clickPosition,a=r.retina.attractModeDistance;if(!a||a<0||!s)return;this._processAttract(s,a,new _a(s.x,s.y,a))}else n.clicking===!1&&(n.particles=[])},this._hoverAttract=()=>{const r=this.container,n=r.interactivity.mouse.position,s=r.retina.attractModeDistance;!s||s<0||!n||this._processAttract(n,s,new _a(n.x,n.y,s))},this._processAttract=(r,n,s)=>{const a=this.container,o=a.actualOptions.interactivity.modes.attract;if(!o)return;const l=a.particles.quadTree.query(s,c=>this.isEnabled(c));for(const c of l){const{dx:u,dy:h,distance:f}=qa(c.position,r),m=o.speed*o.factor,g=ac(qee(o.easing)(1-f/n)*m,0,o.maxSpeed),v=Rs.create(f===0?m:u/f*g,f===0?m:h/f*g);c.position.subFrom(v)}},this._engine=t,i.attract||(i.attract={particles:[]}),this.handleClickMode=r=>{const n=this.container.actualOptions,s=n.interactivity.modes.attract;if(!(!s||r!=="attract")){i.attract||(i.attract={particles:[]}),i.attract.clicking=!0,i.attract.count=0;for(const a of i.attract.particles)this.isEnabled(a)&&a.velocity.setTo(a.initialVelocity);i.attract.particles=[],i.attract.finish=!1,setTimeout(()=>{i.destroyed||(i.attract||(i.attract={particles:[]}),i.attract.clicking=!1)},s.duration*1e3)}}}clear(){}init(){const t=this.container,i=t.actualOptions.interactivity.modes.attract;i&&(t.retina.attractModeDistance=i.distance*t.retina.pixelRatio)}async interact(){const t=this.container,i=t.actualOptions,r=t.interactivity.status===Em,n=i.interactivity.events,s=n.onHover.enable,a=n.onHover.mode,o=n.onClick.enable,l=n.onClick.mode;r&&s&&Tn("attract",a)?this._hoverAttract():o&&Tn("attract",l)&&this._clickAttract()}isEnabled(t){const i=this.container,r=i.actualOptions,n=i.interactivity.mouse,s=((t==null?void 0:t.interactivity)??r.interactivity).events;if((!n.position||!s.onHover.enable)&&(!n.clickPosition||!s.onClick.enable))return!1;const a=s.onHover.mode,o=s.onClick.mode;return Tn("attract",a)||Tn("attract",o)}loadModeOptions(t,...i){t.attract||(t.attract=new BPe);for(const r of i)t.attract.load(r==null?void 0:r.attract)}reset(){}};async function NPe(e,t=!0){await e.addInteractor("externalAttract",i=>new jPe(e,i),t)}class VPe{constructor(){this.distance=200}load(t){t&&t.distance!==void 0&&(this.distance=t.distance)}}class UPe extends Ou{constructor(t){super(t),this._processBounce=(i,r,n)=>{const s=this.container.particles.quadTree.query(n,a=>this.isEnabled(a));for(const a of s)n instanceof _a?Kee(eR(a),{position:i,mass:r**2*Math.PI/2,velocity:Rs.origin,factor:Rs.origin}):n instanceof oc&&B5e(a,yw(i,r))},this._processMouseBounce=()=>{const i=this.container,r=i.retina.pixelRatio,n=10*r,s=i.interactivity.mouse.position,a=i.retina.bounceModeDistance;!a||a<0||!s||this._processBounce(s,a,new _a(s.x,s.y,a+n))},this._singleSelectorBounce=(i,r)=>{const n=this.container,s=document.querySelectorAll(i);s.length&&s.forEach(a=>{const o=a,l=n.retina.pixelRatio,c={x:(o.offsetLeft+o.offsetWidth/2)*l,y:(o.offsetTop+o.offsetHeight/2)*l},u=o.offsetWidth/2*l,h=10*l,f=r.type==="circle"?new _a(c.x,c.y,u+h):new oc(o.offsetLeft*l-h,o.offsetTop*l-h,o.offsetWidth*l+h*2,o.offsetHeight*l+h*2);this._processBounce(c,u,f)})}}clear(){}init(){const t=this.container,i=t.actualOptions.interactivity.modes.bounce;i&&(t.retina.bounceModeDistance=i.distance*t.retina.pixelRatio)}async interact(){const t=this.container,i=t.actualOptions,r=i.interactivity.events,n=t.interactivity.status===Em,s=r.onHover.enable,a=r.onHover.mode,o=r.onDiv;n&&s&&Tn("bounce",a)?this._processMouseBounce():tk("bounce",o,(l,c)=>this._singleSelectorBounce(l,c))}isEnabled(t){const i=this.container,r=i.actualOptions,n=i.interactivity.mouse,s=((t==null?void 0:t.interactivity)??r.interactivity).events,a=s.onDiv;return n.position&&s.onHover.enable&&Tn("bounce",s.onHover.mode)||ek("bounce",a)}loadModeOptions(t,...i){t.bounce||(t.bounce=new VPe);for(const r of i)t.bounce.load(r==null?void 0:r.bounce)}reset(){}}async function FPe(e,t=!0){await e.addInteractor("externalBounce",i=>new UPe(i),t)}class gte{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(t){if(t){if(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.mix!==void 0&&(this.mix=t.mix),t.opacity!==void 0&&(this.opacity=t.opacity),t.color!==void 0){const i=Uo(this.color)?void 0:this.color;this.color=ks(t.color,r=>oa.create(i,r))}t.size!==void 0&&(this.size=t.size)}}}class HPe extends gte{constructor(){super(),this.selectors=[]}get ids(){return ks(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=ks(t,i=>`#${i}`)}load(t){super.load(t),t&&(t.ids!==void 0&&(this.ids=t.ids),t.selectors!==void 0&&(this.selectors=t.selectors))}}class GPe extends gte{load(t){super.load(t),t&&(this.divs=ks(t.divs,i=>{const r=new HPe;return r.load(i),r}))}}function IF(e,t,i,r){if(t>=i){const n=e+(t-i)*r;return ac(n,e,t)}else if(t<i){const n=e-(i-t)*r;return ac(n,t,e)}}class WPe extends Ou{constructor(t){super(t),this._clickBubble=()=>{var c;const i=this.container,r=i.actualOptions,n=i.interactivity.mouse.clickPosition,s=r.interactivity.modes.bubble;if(!s||!n)return;i.bubble||(i.bubble={});const a=i.retina.bubbleModeDistance;if(!a||a<0)return;const o=i.particles.quadTree.queryCircle(n,a,u=>this.isEnabled(u)),{bubble:l}=i;for(const u of o){if(!l.clicking)continue;u.bubble.inRange=!l.durationEnd;const h=u.getPosition(),f=Vo(h,n),m=(new Date().getTime()-(i.interactivity.mouse.clickTime||0))/1e3;m>s.duration&&(l.durationEnd=!0),m>s.duration*2&&(l.clicking=!1,l.durationEnd=!1);const g={bubbleObj:{optValue:i.retina.bubbleModeSize,value:u.bubble.radius},particlesObj:{optValue:rf(u.options.size.value)*i.retina.pixelRatio,value:u.size.value},type:"size"};this._process(u,f,m,g);const v={bubbleObj:{optValue:s.opacity,value:u.bubble.opacity},particlesObj:{optValue:rf(u.options.opacity.value),value:((c=u.opacity)==null?void 0:c.value)??1},type:"opacity"};this._process(u,f,m,v),!l.durationEnd&&f<=a?this._hoverBubbleColor(u,f):delete u.bubble.color}},this._hoverBubble=()=>{const i=this.container,r=i.interactivity.mouse.position,n=i.retina.bubbleModeDistance;if(!n||n<0||r===void 0)return;const s=i.particles.quadTree.queryCircle(r,n,a=>this.isEnabled(a));for(const a of s){a.bubble.inRange=!0;const o=a.getPosition(),l=Vo(o,r),c=1-l/n;l<=n?c>=0&&i.interactivity.status===Em&&(this._hoverBubbleSize(a,c),this._hoverBubbleOpacity(a,c),this._hoverBubbleColor(a,c)):this.reset(a),i.interactivity.status===$I&&this.reset(a)}},this._hoverBubbleColor=(i,r,n)=>{const s=this.container.actualOptions,a=n??s.interactivity.modes.bubble;if(a){if(!i.bubble.finalColor){const o=a.color;if(!o)return;const l=Bh(o);i.bubble.finalColor=Cb(l)}if(i.bubble.finalColor)if(a.mix){i.bubble.color=void 0;const o=i.getFillColor();i.bubble.color=o?ite(ik(o,i.bubble.finalColor,1-r,r)):i.bubble.finalColor}else i.bubble.color=i.bubble.finalColor}},this._hoverBubbleOpacity=(i,r,n)=>{var h,f;const s=this.container,a=s.actualOptions,o=(n==null?void 0:n.opacity)??((h=a.interactivity.modes.bubble)==null?void 0:h.opacity);if(!o)return;const l=i.options.opacity.value,c=((f=i.opacity)==null?void 0:f.value)??1,u=IF(c,o,rf(l),r);u!==void 0&&(i.bubble.opacity=u)},this._hoverBubbleSize=(i,r,n)=>{const s=this.container,a=n!=null&&n.size?n.size*s.retina.pixelRatio:s.retina.bubbleModeSize;if(a===void 0)return;const o=rf(i.options.size.value)*s.retina.pixelRatio,l=i.size.value,c=IF(l,a,o,r);c!==void 0&&(i.bubble.radius=c)},this._process=(i,r,n,s)=>{const a=this.container,o=s.bubbleObj.optValue,l=a.actualOptions,c=l.interactivity.modes.bubble;if(!c||o===void 0)return;const u=c.duration,h=a.retina.bubbleModeDistance,f=s.particlesObj.optValue,m=s.bubbleObj.value,g=s.particlesObj.value||0,v=s.type;if(!(!h||h<0||o===f))if(a.bubble||(a.bubble={}),a.bubble.durationEnd)m&&(v==="size"&&delete i.bubble.radius,v==="opacity"&&delete i.bubble.opacity);else if(r<=h){if((m??g)!==o){const b=g-n*(g-o)/u;v==="size"&&(i.bubble.radius=b),v==="opacity"&&(i.bubble.opacity=b)}}else v==="size"&&delete i.bubble.radius,v==="opacity"&&delete i.bubble.opacity},this._singleSelectorHover=(i,r,n)=>{const s=this.container,a=document.querySelectorAll(r),o=s.actualOptions.interactivity.modes.bubble;!o||!a.length||a.forEach(l=>{const c=l,u=s.retina.pixelRatio,h={x:(c.offsetLeft+c.offsetWidth/2)*u,y:(c.offsetTop+c.offsetHeight/2)*u},f=c.offsetWidth/2*u,m=n.type==="circle"?new _a(h.x,h.y,f):new oc(c.offsetLeft*u,c.offsetTop*u,c.offsetWidth*u,c.offsetHeight*u),g=s.particles.quadTree.query(m,v=>this.isEnabled(v));for(const v of g){if(!m.contains(v.getPosition()))continue;v.bubble.inRange=!0;const x=o.divs,b=Qee(x,c);(!v.bubble.div||v.bubble.div!==c)&&(this.clear(v,i,!0),v.bubble.div=c),this._hoverBubbleSize(v,1,b),this._hoverBubbleOpacity(v,1,b),this._hoverBubbleColor(v,1,b)}})},t.bubble||(t.bubble={}),this.handleClickMode=i=>{i==="bubble"&&(t.bubble||(t.bubble={}),t.bubble.clicking=!0)}}clear(t,i,r){t.bubble.inRange&&!r||(delete t.bubble.div,delete t.bubble.opacity,delete t.bubble.radius,delete t.bubble.color)}init(){const t=this.container,i=t.actualOptions.interactivity.modes.bubble;i&&(t.retina.bubbleModeDistance=i.distance*t.retina.pixelRatio,i.size!==void 0&&(t.retina.bubbleModeSize=i.size*t.retina.pixelRatio))}async interact(t){const i=this.container.actualOptions,r=i.interactivity.events,n=r.onHover,s=r.onClick,a=n.enable,o=n.mode,l=s.enable,c=s.mode,u=r.onDiv;a&&Tn("bubble",o)?this._hoverBubble():l&&Tn("bubble",c)?this._clickBubble():tk("bubble",u,(h,f)=>this._singleSelectorHover(t,h,f))}isEnabled(t){const i=this.container,r=i.actualOptions,n=i.interactivity.mouse,s=((t==null?void 0:t.interactivity)??r.interactivity).events,{onClick:a,onDiv:o,onHover:l}=s,c=ek("bubble",o);return c||l.enable&&n.position||a.enable&&n.clickPosition?Tn("bubble",l.mode)||Tn("bubble",a.mode)||c:!1}loadModeOptions(t,...i){t.bubble||(t.bubble=new GPe);for(const r of i)t.bubble.load(r==null?void 0:r.bubble)}reset(t){t.bubble.inRange=!1}}async function qPe(e,t=!0){await e.addInteractor("externalBubble",i=>new WPe(i),t)}class XPe{constructor(){this.opacity=.5}load(t){t&&t.opacity!==void 0&&(this.opacity=t.opacity)}}class YPe{constructor(){this.distance=80,this.links=new XPe,this.radius=60}get lineLinked(){return this.links}set lineLinked(t){this.links=t}get line_linked(){return this.links}set line_linked(t){this.links=t}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),this.links.load(t.links??t.lineLinked??t.line_linked),t.radius!==void 0&&(this.radius=t.radius))}}function QPe(e,t,i,r){const n=Math.floor(i.getRadius()/t.getRadius()),s=t.getFillColor(),a=i.getFillColor();if(!s||!a)return;const o=t.getPosition(),l=i.getPosition(),c=ik(s,a,t.getRadius(),i.getRadius()),u=e.createLinearGradient(o.x,o.y,l.x,l.y);return u.addColorStop(0,Mb(s,r)),u.addColorStop(n>1?1:n,jh(c,r)),u.addColorStop(1,Mb(a,r)),u}function KPe(e,t,i,r,n){jx(e,r,n),e.lineWidth=t,e.strokeStyle=i,e.stroke()}function ZPe(e,t,i,r){const n=e.actualOptions,s=n.interactivity.modes.connect;if(s)return QPe(t,i,r,s.links.opacity)}function $Pe(e,t,i){e.canvas.draw(r=>{const n=ZPe(e,r,t,i);if(!n)return;const s=t.getPosition(),a=i.getPosition();KPe(r,t.retina.linksWidth??0,n,s,a)})}let JPe=class extends Ou{constructor(t){super(t)}clear(){}init(){const t=this.container,i=t.actualOptions.interactivity.modes.connect;i&&(t.retina.connectModeDistance=i.distance*t.retina.pixelRatio,t.retina.connectModeRadius=i.radius*t.retina.pixelRatio)}async interact(){const t=this.container;if(t.actualOptions.interactivity.events.onHover.enable&&t.interactivity.status==="pointermove"){const r=t.interactivity.mouse.position;if(!t.retina.connectModeDistance||t.retina.connectModeDistance<0||!t.retina.connectModeRadius||t.retina.connectModeRadius<0||!r)return;const n=Math.abs(t.retina.connectModeRadius),s=t.particles.quadTree.queryCircle(r,n,o=>this.isEnabled(o));let a=0;for(const o of s){const l=o.getPosition();for(const c of s.slice(a+1)){const u=c.getPosition(),h=Math.abs(t.retina.connectModeDistance),f=Math.abs(l.x-u.x),m=Math.abs(l.y-u.y);f<h&&m<h&&$Pe(t,o,c)}++a}}}isEnabled(t){const i=this.container,r=i.interactivity.mouse,n=((t==null?void 0:t.interactivity)??i.actualOptions.interactivity).events;return n.onHover.enable&&r.position?Tn("connect",n.onHover.mode):!1}loadModeOptions(t,...i){t.connect||(t.connect=new YPe);for(const r of i)t.connect.load(r==null?void 0:r.connect)}reset(){}};async function e4e(e,t=!0){await e.addInteractor("externalConnect",i=>new JPe(i),t)}class t4e{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(t){t&&(t.blink!==void 0&&(this.blink=t.blink),t.color!==void 0&&(this.color=oa.create(this.color,t.color)),t.consent!==void 0&&(this.consent=t.consent),t.opacity!==void 0&&(this.opacity=t.opacity))}}class i4e{constructor(){this.distance=100,this.links=new t4e}get lineLinked(){return this.links}set lineLinked(t){this.links=t}get line_linked(){return this.links}set line_linked(t){this.links=t}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),this.links.load(t.links??t.lineLinked??t.line_linked))}}function r4e(e,t,i,r,n,s){jx(e,i,r),e.strokeStyle=jh(n,s),e.lineWidth=t,e.stroke()}function n4e(e,t,i,r,n){e.canvas.draw(s=>{const a=t.getPosition();r4e(s,t.retina.linksWidth??0,a,n,i,r)})}class s4e extends Ou{constructor(t){super(t)}clear(){}init(){const t=this.container,i=t.actualOptions.interactivity.modes.grab;i&&(t.retina.grabModeDistance=i.distance*t.retina.pixelRatio)}async interact(){var o;const t=this.container,i=t.actualOptions,r=i.interactivity;if(!r.modes.grab||!r.events.onHover.enable||t.interactivity.status!==Em)return;const n=t.interactivity.mouse.position;if(!n)return;const s=t.retina.grabModeDistance;if(!s||s<0)return;const a=t.particles.quadTree.queryCircle(n,s,l=>this.isEnabled(l));for(const l of a){const c=l.getPosition(),u=Vo(c,n);if(u>s)continue;const h=r.modes.grab.links,f=h.opacity,m=f-u*f/s;if(m<=0)continue;const g=h.color??((o=l.options.links)==null?void 0:o.color);if(!t.particles.grabLineColor&&g){const x=r.modes.grab.links;t.particles.grabLineColor=nte(g,x.blink,x.consent)}const v=tR(l,void 0,t.particles.grabLineColor);v&&n4e(t,l,v,m,n)}}isEnabled(t){const i=this.container,r=i.interactivity.mouse,n=((t==null?void 0:t.interactivity)??i.actualOptions.interactivity).events;return n.onHover.enable&&!!r.position&&Tn("grab",n.onHover.mode)}loadModeOptions(t,...i){t.grab||(t.grab=new i4e);for(const r of i)t.grab.load(r==null?void 0:r.grab)}reset(){}}async function a4e(e,t=!0){await e.addInteractor("externalGrab",i=>new s4e(i),t)}class o4e extends Ou{constructor(t){super(t),this.handleClickMode=i=>{if(i!=="pause")return;const r=this.container;r.getAnimationStatus()?r.pause():r.play()}}clear(){}init(){}async interact(){}isEnabled(){return!0}reset(){}}async function l4e(e,t=!0){await e.addInteractor("externalPause",i=>new o4e(i),t)}class c4e{constructor(){this.default=!0,this.groups=[],this.quantity=4}get particles_nb(){return this.quantity}set particles_nb(t){this.quantity=Ti(t)}load(t){if(!t)return;t.default!==void 0&&(this.default=t.default),t.groups!==void 0&&(this.groups=t.groups.map(r=>r)),this.groups.length||(this.default=!0);const i=t.quantity??t.particles_nb;i!==void 0&&(this.quantity=Ti(i))}}class u4e extends Ou{constructor(t){super(t),this.handleClickMode=i=>{if(i!=="push")return;const r=this.container,n=r.actualOptions,s=n.interactivity.modes.push;if(!s)return;const a=ri(s.quantity);if(a<=0)return;const o=C3([void 0,...s.groups]),l=o!==void 0?r.actualOptions.particles.groups[o]:void 0;r.particles.push(a,r.interactivity.mouse,l,o)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(t,...i){t.push||(t.push=new c4e);for(const r of i)t.push.load(r==null?void 0:r.push)}reset(){}}async function h4e(e,t=!0){await e.addInteractor("externalPush",i=>new u4e(i),t)}class d4e{constructor(){this.quantity=2}get particles_nb(){return this.quantity}set particles_nb(t){this.quantity=Ti(t)}load(t){if(!t)return;const i=t.quantity??t.particles_nb;i!==void 0&&(this.quantity=Ti(i))}}class f4e extends Ou{constructor(t){super(t),this.handleClickMode=i=>{const r=this.container,n=r.actualOptions;if(!n.interactivity.modes.remove||i!=="remove")return;const s=ri(n.interactivity.modes.remove.quantity);r.particles.removeQuantity(s)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(t,...i){t.remove||(t.remove=new d4e);for(const r of i)t.remove.load(r==null?void 0:r.remove)}reset(){}}async function p4e(e,t=!0){await e.addInteractor("externalRemove",i=>new f4e(i),t)}class vte{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing="ease-out-quad"}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.easing!==void 0&&(this.easing=t.easing),t.factor!==void 0&&(this.factor=t.factor),t.speed!==void 0&&(this.speed=t.speed),t.maxSpeed!==void 0&&(this.maxSpeed=t.maxSpeed))}}class m4e extends vte{constructor(){super(),this.selectors=[]}get ids(){return ks(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=ks(t,i=>`#${i}`)}load(t){super.load(t),t&&(t.ids!==void 0&&(this.ids=t.ids),t.selectors!==void 0&&(this.selectors=t.selectors))}}class g4e extends vte{load(t){super.load(t),t&&(this.divs=ks(t.divs,i=>{const r=new m4e;return r.load(i),r}))}}class v4e extends Ou{constructor(t,i){super(i),this._clickRepulse=()=>{const r=this.container,n=r.actualOptions.interactivity.modes.repulse;if(!n)return;const s=r.repulse||{particles:[]};if(s.finish||(s.count||(s.count=0),s.count++,s.count===r.particles.count&&(s.finish=!0)),s.clicking){const a=r.retina.repulseModeDistance;if(!a||a<0)return;const o=Math.pow(a/6,3),l=r.interactivity.mouse.clickPosition;if(l===void 0)return;const c=new _a(l.x,l.y,o),u=r.particles.quadTree.query(c,h=>this.isEnabled(h));for(const h of u){const{dx:f,dy:m,distance:g}=qa(l,h.position),v=g**2,x=n.speed,b=-o*x/v;if(v<=o){s.particles.push(h);const S=Rs.create(f,m);S.length=b,h.velocity.setTo(S)}}}else if(s.clicking===!1){for(const a of s.particles)a.velocity.setTo(a.initialVelocity);s.particles=[]}},this._hoverRepulse=()=>{const r=this.container,n=r.interactivity.mouse.position,s=r.retina.repulseModeDistance;!s||s<0||!n||this._processRepulse(n,s,new _a(n.x,n.y,s))},this._processRepulse=(r,n,s,a)=>{const o=this.container,l=o.particles.quadTree.query(s,u=>this.isEnabled(u)),c=o.actualOptions.interactivity.modes.repulse;if(c)for(const u of l){const{dx:h,dy:f,distance:m}=qa(u.position,r),g=((a==null?void 0:a.speed)??c.speed)*c.factor,v=ac(qee(c.easing)(1-m/n)*g,0,c.maxSpeed),x=Rs.create(m===0?g:h/m*v,m===0?g:f/m*v);u.position.addTo(x)}},this._singleSelectorRepulse=(r,n)=>{const s=this.container,a=s.actualOptions.interactivity.modes.repulse;if(!a)return;const o=document.querySelectorAll(r);o.length&&o.forEach(l=>{const c=l,u=s.retina.pixelRatio,h={x:(c.offsetLeft+c.offsetWidth/2)*u,y:(c.offsetTop+c.offsetHeight/2)*u},f=c.offsetWidth/2*u,m=n.type==="circle"?new _a(h.x,h.y,f):new oc(c.offsetLeft*u,c.offsetTop*u,c.offsetWidth*u,c.offsetHeight*u),g=a.divs,v=Qee(g,c);this._processRepulse(h,f,m,v)})},this._engine=t,i.repulse||(i.repulse={particles:[]}),this.handleClickMode=r=>{const n=this.container.actualOptions,s=n.interactivity.modes.repulse;if(!s||r!=="repulse")return;i.repulse||(i.repulse={particles:[]});const a=i.repulse;a.clicking=!0,a.count=0;for(const o of i.repulse.particles)this.isEnabled(o)&&o.velocity.setTo(o.initialVelocity);a.particles=[],a.finish=!1,setTimeout(()=>{i.destroyed||(a.clicking=!1)},s.duration*1e3)}}clear(){}init(){const t=this.container,i=t.actualOptions.interactivity.modes.repulse;i&&(t.retina.repulseModeDistance=i.distance*t.retina.pixelRatio)}async interact(){const t=this.container,i=t.actualOptions,r=t.interactivity.status===Em,n=i.interactivity.events,s=n.onHover,a=s.enable,o=s.mode,l=n.onClick,c=l.enable,u=l.mode,h=n.onDiv;r&&a&&Tn("repulse",o)?this._hoverRepulse():c&&Tn("repulse",u)?this._clickRepulse():tk("repulse",h,(f,m)=>this._singleSelectorRepulse(f,m))}isEnabled(t){const i=this.container,r=i.actualOptions,n=i.interactivity.mouse,s=((t==null?void 0:t.interactivity)??r.interactivity).events,a=s.onDiv,o=s.onHover,l=s.onClick,c=ek("repulse",a);if(!(c||o.enable&&n.position||l.enable&&n.clickPosition))return!1;const u=o.mode,h=l.mode;return Tn("repulse",u)||Tn("repulse",h)||c}loadModeOptions(t,...i){t.repulse||(t.repulse=new g4e);for(const r of i)t.repulse.load(r==null?void 0:r.repulse)}reset(){}}async function y4e(e,t=!0){await e.addInteractor("externalRepulse",i=>new v4e(e,i),t)}class x4e{constructor(){this.factor=3,this.radius=200}load(t){t&&(t.factor!==void 0&&(this.factor=t.factor),t.radius!==void 0&&(this.radius=t.radius))}}class b4e extends Ou{constructor(t){super(t)}clear(t,i,r){t.slow.inRange&&!r||(t.slow.factor=1)}init(){const t=this.container,i=t.actualOptions.interactivity.modes.slow;i&&(t.retina.slowModeRadius=i.radius*t.retina.pixelRatio)}async interact(){}isEnabled(t){const i=this.container,r=i.interactivity.mouse,n=((t==null?void 0:t.interactivity)??i.actualOptions.interactivity).events;return n.onHover.enable&&!!r.position&&Tn("slow",n.onHover.mode)}loadModeOptions(t,...i){t.slow||(t.slow=new x4e);for(const r of i)t.slow.load(r==null?void 0:r.slow)}reset(t){t.slow.inRange=!1;const i=this.container,r=i.actualOptions,n=i.interactivity.mouse.position,s=i.retina.slowModeRadius,a=r.interactivity.modes.slow;if(!a||!s||s<0||!n)return;const o=t.getPosition(),l=Vo(n,o),c=l/s,u=a.factor,{slow:h}=t;l>s||(h.inRange=!0,h.factor=c/u)}}async function w4e(e,t=!0){await e.addInteractor("externalSlow",i=>new b4e(i),t)}const CP=[0,4,2,1],RF=[8,8,4,2];class S4e{constructor(t){this.pos=0,this.data=new Uint8ClampedArray(t)}getString(t){const i=this.data.slice(this.pos,this.pos+t);return this.pos+=i.length,i.reduce((r,n)=>r+String.fromCharCode(n),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let t="",i=0;do{i=this.data[this.pos++];for(let r=i;--r>=0;t+=String.fromCharCode(this.data[this.pos++]));}while(i!==0);return t}readSubBlocksBin(){let t=0,i=0;for(let n=0;(t=this.data[this.pos+n])!==0;n+=t+1)i+=t;const r=new Uint8Array(i);for(let n=0;(t=this.data[this.pos++])!==0;)for(let s=t;--s>=0;r[n++]=this.data[this.pos++]);return r}skipSubBlocks(){for(;this.data[this.pos]!==0;this.pos+=this.data[this.pos]+1);this.pos++}}function yte(e,t){const i=[];for(let r=0;r<t;r++)i.push({r:e.data[e.pos],g:e.data[e.pos+1],b:e.data[e.pos+2]}),e.pos+=3;return i}async function _4e(e,t,i,r){switch(e.nextByte()){case 249:{const n=t.frames[i(!1)];e.pos++;const s=e.nextByte();n.GCreserved=(s&224)>>>5,n.disposalMethod=(s&28)>>>2,n.userInputDelayFlag=(s&2)===2;const a=(s&1)===1;n.delayTime=e.nextTwoBytes()*10;const o=e.nextByte();a&&r(o),e.pos++;break}case 255:{e.pos++;const n={identifier:e.getString(8),authenticationCode:e.getString(3),data:e.readSubBlocksBin()};t.applicationExtensions.push(n);break}case 254:{t.comments.push([i(!1),e.readSubBlocks()]);break}case 1:{if(t.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");e.pos++,t.frames[i(!1)].plainTextData={left:e.nextTwoBytes(),top:e.nextTwoBytes(),width:e.nextTwoBytes(),height:e.nextTwoBytes(),charSize:{width:e.nextTwoBytes(),height:e.nextTwoBytes()},foregroundColor:e.nextByte(),backgroundColor:e.nextByte(),text:e.readSubBlocks()};break}default:e.skipSubBlocks();break}}async function E4e(e,t,i,r,n,s){const a=t.frames[r(!0)];a.left=e.nextTwoBytes(),a.top=e.nextTwoBytes(),a.width=e.nextTwoBytes(),a.height=e.nextTwoBytes();const o=e.nextByte(),l=(o&128)===128,c=(o&64)===64;a.sortFlag=(o&32)===32,a.reserved=(o&24)>>>3;const u=1<<(o&7)+1;l&&(a.localColorTable=yte(e,u));const h=b=>{const{r:S,g:_,b:A}=(l?a.localColorTable:t.globalColorTable)[b];return{r:S,g:_,b:A,a:b===n(null)?i?~~((S+_+A)/3):0:255}},f=(()=>{try{return new ImageData(a.width,a.height,{colorSpace:"srgb"})}catch(b){if(b instanceof DOMException&&b.name==="IndexSizeError")return null;throw b}})();if(f==null)throw new EvalError("GIF frame size is to large");const m=e.nextByte(),g=e.readSubBlocksBin(),v=1<<m,x=(b,S)=>{const _=b>>>3,A=b&7;return(g[_]+(g[_+1]<<8)+(g[_+2]<<16)&(1<<S)-1<<A)>>>A};if(c){for(let b=0,S=m+1,_=0,A=[[0]],M=0;M<4;M++)if(CP[M]<a.height)for(let C=0,D=0;;){const T=b;if(b=x(_,S),_+=S+1,b===v){S=m+1,A.length=v+2;for(let R=0;R<A.length;R++)A[R]=R<v?[R]:[]}else{b>=A.length?A.push(A[T].concat(A[T][0])):T!==v&&A.push(A[T].concat(A[b][0]));for(let R=0;R<A[b].length;R++){const{r:O,g:L,b:k,a:B}=h(A[b][R]);f.data.set([O,L,k,B],CP[M]*a.width+RF[M]*D+C%(a.width*4)),C+=4}A.length===1<<S&&S<12&&S++}if(C===a.width*4*(D+1)&&(D++,CP[M]+RF[M]*D>=a.height))break}a.image=f,a.bitmap=await createImageBitmap(f)}else{for(let b=0,S=m+1,_=0,A=[[0]],M=-4;;){const C=b;if(b=x(_,S),_+=S,b===v){S=m+1,A.length=v+2;for(let D=0;D<A.length;D++)A[D]=D<v?[D]:[]}else{if(b===v+1)break;b>=A.length?A.push(A[C].concat(A[C][0])):C!==v&&A.push(A[C].concat(A[b][0]));for(let D=0;D<A[b].length;D++){const{r:T,g:R,b:O,a:L}=h(A[b][D]);f.data.set([T,R,O,L],M+=4)}A.length>=1<<S&&S<12&&S++}}a.image=f,a.bitmap=await createImageBitmap(f)}}async function A4e(e,t,i,r,n,s){switch(e.nextByte()){case 59:return!0;case 44:await E4e(e,t,i,r,n);break;case 33:await _4e(e,t,r,n);break;default:throw new EvalError("undefined block found")}return!1}function T4e(e){for(const t of e.applicationExtensions)if(t.identifier+t.authenticationCode==="NETSCAPE2.0")return t.data[1]+(t.data[2]<<8);return NaN}async function C4e(e,t,i){i||(i=!1);const r=await fetch(e);if(!r.ok&&r.status===404)throw new EvalError("file not found");const n=await r.arrayBuffer(),s={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},a=new S4e(new Uint8ClampedArray(n));if(a.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");s.width=a.nextTwoBytes(),s.height=a.nextTwoBytes();const o=a.nextByte(),l=(o&128)===128;s.colorRes=(o&112)>>>4,s.sortFlag=(o&8)===8;const c=1<<(o&7)+1,u=a.nextByte();s.pixelAspectRatio=a.nextByte(),s.pixelAspectRatio!==0&&(s.pixelAspectRatio=(s.pixelAspectRatio+15)/64),l&&(s.globalColorTable=yte(a,c));const h=(()=>{try{return new ImageData(s.width,s.height,{colorSpace:"srgb"})}catch(A){if(A instanceof DOMException&&A.name==="IndexSizeError")return null;throw A}})();if(h==null)throw new Error("GIF frame size is to large");const{r:f,g:m,b:g}=s.globalColorTable[u];h.data.set(l?[f,m,g,255]:[0,0,0,0]);for(let A=4;A<h.data.length;A*=2)h.data.copyWithin(A,0,A);s.backgroundImage=h;let v=-1,x=!0,b=-1;const S=A=>(A&&(x=!0),v),_=A=>(A!=null&&(b=A),b);try{do x&&(s.frames.push({left:0,top:0,width:0,height:0,disposalMethod:0,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),v++,b=-1,x=!1);while(!await A4e(a,s,i,S,_,t));s.frames.length--;for(const A of s.frames){if(A.userInputDelayFlag&&A.delayTime===0){s.totalTime=1/0;break}s.totalTime+=A.delayTime}return s}catch(A){throw A instanceof EvalError?new Error(`error while parsing frame ${v} "${A.message}"`):A}}const M4e=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function P4e(e,t,i){const{svgData:r}=e;if(!r)return"";const n=Mb(t,i);if(r.includes("fill"))return r.replace(M4e,()=>n);const s=r.indexOf(">");return`${r.substring(0,s)} fill="${n}"${r.substring(s)}`}async function P3(e){return new Promise(t=>{e.loading=!0;const i=new Image;e.element=i,i.addEventListener("load",()=>{e.loading=!1,t()}),i.addEventListener("error",()=>{e.element=void 0,e.error=!0,e.loading=!1,Tm().error(`${El} loading image: ${e.source}`),t()}),i.src=e.source})}async function D4e(e){if(e.type!=="gif"){await P3(e);return}e.loading=!0;try{e.gifData=await C4e(e.source),e.gifLoopCount=T4e(e.gifData)??0,e.gifLoopCount===0&&(e.gifLoopCount=1/0)}catch{e.error=!0}e.loading=!1}async function I4e(e){if(e.type!=="svg"){await P3(e);return}e.loading=!0;const t=await fetch(e.source);t.ok?e.svgData=await t.text():(Tm().error(`${El} Image not found`),e.error=!0),e.loading=!1}function R4e(e,t,i,r){var a;const n=P4e(e,i,((a=r.opacity)==null?void 0:a.value)??1),s={color:i,gif:t.gif,data:{...e,svgData:n},loaded:!1,ratio:t.width/t.height,replaceColor:t.replaceColor??t.replace_color,source:t.src};return new Promise(o=>{const l=new Blob([n],{type:"image/svg+xml"}),c=URL||window.URL||window.webkitURL||window,u=c.createObjectURL(l),h=new Image;h.addEventListener("load",()=>{s.loaded=!0,s.element=h,o(s),c.revokeObjectURL(u)}),h.addEventListener("error",async()=>{c.revokeObjectURL(u);const f={...e,error:!1,loading:!0};await P3(f),s.loaded=!0,s.element=f.element,o(s)}),h.src=u})}class O4e{constructor(t){this.loadImageShape=async i=>{if(!this._engine.loadImage)throw new Error(`${El} image shape not initialized`);await this._engine.loadImage({gif:i.gif,name:i.name,replaceColor:i.replaceColor??i.replace_color??!1,src:i.src})},this._engine=t}addImage(t){this._engine.images||(this._engine.images=[]),this._engine.images.push(t)}draw(t,i,r,n,s){const a=i.image,o=a==null?void 0:a.element;if(a){if(t.globalAlpha=n,a.gif&&a.gifData){const l=new OffscreenCanvas(a.gifData.width,a.gifData.height),c=l.getContext("2d");if(!c)throw new Error("could not create offscreen canvas context");c.imageSmoothingQuality="low",c.imageSmoothingEnabled=!1,c.clearRect(0,0,l.width,l.height),i.gifLoopCount===void 0&&(i.gifLoopCount=a.gifLoopCount??0);let u=i.gifFrame??0;const h={x:-a.gifData.width*.5,y:-a.gifData.height*.5},f=a.gifData.frames[u];if(i.gifTime===void 0&&(i.gifTime=0),!f.bitmap)return;switch(t.scale(r/a.gifData.width,r/a.gifData.height),f.disposalMethod){case 4:case 5:case 6:case 7:case 0:c.drawImage(f.bitmap,f.left,f.top),t.drawImage(l,h.x,h.y),c.clearRect(0,0,l.width,l.height);break;case 1:c.drawImage(f.bitmap,f.left,f.top),t.drawImage(l,h.x,h.y);break;case 2:c.drawImage(f.bitmap,f.left,f.top),t.drawImage(l,h.x,h.y),c.clearRect(0,0,l.width,l.height),a.gifData.globalColorTable.length===0?c.putImageData(a.gifData.frames[0].image,h.x+f.left,h.y+f.top):c.putImageData(a.gifData.backgroundImage,h.x,h.y);break;case 3:{const m=c.getImageData(0,0,l.width,l.height);c.drawImage(f.bitmap,f.left,f.top),t.drawImage(l,h.x,h.y),c.clearRect(0,0,l.width,l.height),c.putImageData(m,0,0)}break}if(i.gifTime+=s.value,i.gifTime>f.delayTime){if(i.gifTime-=f.delayTime,++u>=a.gifData.frames.length){if(--i.gifLoopCount<=0)return;u=0,c.clearRect(0,0,l.width,l.height)}i.gifFrame=u}t.scale(a.gifData.width/r,a.gifData.height/r)}else if(o){const l=a.ratio,c={x:-r,y:-r};t.drawImage(o,c.x,c.y,r*2,r*2/l)}t.globalAlpha=1}}getSidesCount(){return 12}async init(t){const i=t.actualOptions;if(!(!i.preload||!this._engine.loadImage))for(const r of i.preload)await this._engine.loadImage(r)}loadShape(t){if(t.shape!=="image"&&t.shape!=="images")return;this._engine.images||(this._engine.images=[]);const i=t.shapeData;this._engine.images.find(n=>n.name===i.name||n.source===i.src)||this.loadImageShape(i).then(()=>{this.loadShape(t)})}particleInit(t,i){if(i.shape!=="image"&&i.shape!=="images")return;this._engine.images||(this._engine.images=[]);const r=this._engine.images,n=i.shapeData,s=i.getFillColor(),a=r.find(l=>l.name===n.name||l.source===n.src);if(!a)return;const o=n.replaceColor??n.replace_color??a.replaceColor;if(a.loading){setTimeout(()=>{this.particleInit(t,i)});return}(async()=>{let l;a.svgData&&s?l=await R4e(a,n,s,i):l={color:s,data:a,element:a.element,gif:a.gif,gifData:a.gifData,gifLoopCount:a.gifLoopCount,loaded:!0,ratio:n.width&&n.height?n.width/n.height:a.ratio??1,replaceColor:o,source:n.src},l.ratio||(l.ratio=1);const c=n.fill??i.fill,u=n.close??i.close,h={image:l,fill:c,close:u};i.image=h.image,i.fill=h.fill,i.close=h.close})()}}class L4e{constructor(){this.src="",this.gif=!1}load(t){t&&(t.gif!==void 0&&(this.gif=t.gif),t.height!==void 0&&(this.height=t.height),t.name!==void 0&&(this.name=t.name),t.replaceColor!==void 0&&(this.replaceColor=t.replaceColor),t.src!==void 0&&(this.src=t.src),t.width!==void 0&&(this.width=t.width))}}class k4e{constructor(t){this.id="imagePreloader",this._engine=t}getPlugin(){return{}}loadOptions(t,i){if(!i||!i.preload)return;t.preload||(t.preload=[]);const r=t.preload;for(const n of i.preload){const s=r.find(a=>a.name===n.name||a.src===n.src);if(s)s.load(n);else{const a=new L4e;a.load(n),r.push(a)}}}needsPlugin(){return!0}}function z4e(e){e.loadImage||(e.loadImage=async t=>{if(!t.name&&!t.src)throw new Error(`${El} no image source provided`);if(e.images||(e.images=[]),!e.images.find(i=>i.name===t.name||i.source===t.src))try{const i={gif:t.gif??!1,name:t.name??t.src,source:t.src,type:t.src.substring(t.src.length-3),error:!1,loading:!0,replaceColor:t.replaceColor,ratio:t.width&&t.height?t.width/t.height:void 0};e.images.push(i),await(t.gif?D4e:t.replaceColor?I4e:P3)(i)}catch{throw new Error(`${El} ${t.name??t.src} not found`)}})}async function B4e(e,t=!0){z4e(e);const i=new k4e(e);await e.addPlugin(i,t),await e.addShape(["image","images"],new O4e(e),t)}class j4e extends Xf{constructor(){super(),this.sync=!1}load(t){t&&(super.load(t),t.sync!==void 0&&(this.sync=t.sync))}}class N4e extends Xf{constructor(){super(),this.random.minimumValue=1e-4,this.sync=!1}load(t){t&&(super.load(t),t.sync!==void 0&&(this.sync=t.sync))}}class V4e{constructor(){this.count=0,this.delay=new j4e,this.duration=new N4e}load(t){t&&(t.count!==void 0&&(this.count=t.count),this.delay.load(t.delay),this.duration.load(t.duration))}}class U4e{constructor(t){this.container=t}init(t){const i=this.container,r=t.options,n=r.life;n&&(t.life={delay:i.retina.reduceFactor?ri(n.delay.value)*(n.delay.sync?1:Xr())/i.retina.reduceFactor*1e3:0,delayTime:0,duration:i.retina.reduceFactor?ri(n.duration.value)*(n.duration.sync?1:Xr())/i.retina.reduceFactor*1e3:0,time:0,count:n.count},t.life.duration<=0&&(t.life.duration=-1),t.life.count<=0&&(t.life.count=-1),t.life&&(t.spawning=t.life.delay>0))}isEnabled(t){return!t.destroyed}loadOptions(t,...i){t.life||(t.life=new V4e);for(const r of i)t.life.load(r==null?void 0:r.life)}update(t,i){if(!this.isEnabled(t)||!t.life)return;const r=t.life;let n=!1;if(t.spawning)if(r.delayTime+=i.value,r.delayTime>=t.life.delay)n=!0,t.spawning=!1,r.delayTime=0,r.time=0;else return;if(r.duration===-1||t.spawning||(n?r.time=0:r.time+=i.value,r.time<r.duration))return;if(r.time=0,t.life.count>0&&t.life.count--,t.life.count===0){t.destroy();return}const s=this.container.canvas.size,a=Ti(0,s.width),o=Ti(0,s.width);t.position.x=fo(a),t.position.y=fo(o),t.spawning=!0,r.delayTime=0,r.time=0,t.reset();const l=t.options.life;l&&(r.delay=ri(l.delay.value)*1e3,r.duration=ri(l.duration.value)*1e3)}}async function F4e(e,t=!0){await e.addParticleUpdater("life",i=>new U4e(i),t)}class H4e{draw(t,i,r){const n=i.shapeData;t.moveTo(-r/2,0),t.lineTo(r/2,0),t.lineCap=(n==null?void 0:n.cap)??"butt"}getSidesCount(){return 1}}async function G4e(e,t=!0){await e.addShape("line",new H4e,t)}class W4e{init(){}isEnabled(t){return!Ev()&&!t.destroyed&&t.container.actualOptions.interactivity.events.onHover.parallax.enable}move(t){const i=t.container,r=i.actualOptions,n=r.interactivity.events.onHover.parallax;if(Ev()||!n.enable)return;const s=n.force,a=i.interactivity.mouse.position;if(!a)return;const o=i.canvas.size,l={x:o.width/2,y:o.height/2},c=n.smooth,u=t.getRadius()/s,h={x:(a.x-l.x)*u,y:(a.y-l.y)*u},{offset:f}=t;f.x+=(h.x-f.x)/c,f.y+=(h.y-f.y)/c}}async function q4e(e,t=!0){await e.addMover("parallax",()=>new W4e,t)}class X4e extends rk{constructor(t){super(t)}clear(){}init(){}async interact(t){const i=this.container,r=t.retina.attractDistance??i.retina.attractDistance,n=t.getPosition(),s=i.particles.quadTree.queryCircle(n,r);for(const a of s){if(t===a||!a.options.move.attract.enable||a.destroyed||a.spawning)continue;const o=a.getPosition(),{dx:l,dy:c}=qa(n,o),u=t.options.move.attract.rotate,h=l/(u.x*1e3),f=c/(u.y*1e3),m=a.size.value/t.size.value,g=1/m;t.velocity.x-=h*m,t.velocity.y-=f*m,a.velocity.x+=h*g,a.velocity.y+=f*g}}isEnabled(t){return t.options.move.attract.enable}reset(){}}async function Y4e(e,t=!0){await e.addInteractor("particlesAttract",i=>new X4e(i),t)}function OF(e,t,i,r,n,s){const a=ac(e.options.collisions.absorb.speed*n.factor/10,0,r);e.size.value+=a/2,i.size.value-=a,r<=s&&(i.size.value=0,i.destroy())}function Q4e(e,t,i,r){const n=e.getRadius(),s=t.getRadius();n===void 0&&s!==void 0?e.destroy():n!==void 0&&s===void 0?t.destroy():n!==void 0&&s!==void 0&&(n>=s?OF(e,n,t,s,i,r):OF(t,s,e,n,i,r))}const LF=e=>{e.collisionMaxSpeed===void 0&&(e.collisionMaxSpeed=ri(e.options.collisions.maxSpeed)),e.velocity.length>e.collisionMaxSpeed&&(e.velocity.length=e.collisionMaxSpeed)};function xte(e,t){Kee(eR(e),eR(t)),LF(e),LF(t)}function K4e(e,t){!e.unbreakable&&!t.unbreakable&&xte(e,t),e.getRadius()===void 0&&t.getRadius()!==void 0?e.destroy():e.getRadius()!==void 0&&t.getRadius()===void 0?t.destroy():e.getRadius()!==void 0&&t.getRadius()!==void 0&&(e.getRadius()>=t.getRadius()?t:e).destroy()}function Z4e(e,t,i,r){switch(e.options.collisions.mode){case"absorb":{Q4e(e,t,i,r);break}case"bounce":{xte(e,t);break}case"destroy":{K4e(e,t);break}}}class $4e extends rk{constructor(t){super(t)}clear(){}init(){}async interact(t,i){if(t.destroyed||t.spawning)return;const r=this.container,n=t.getPosition(),s=t.getRadius(),a=r.particles.quadTree.queryCircle(n,s*2);for(const o of a){if(t===o||!o.options.collisions.enable||t.options.collisions.mode!==o.options.collisions.mode||o.destroyed||o.spawning)continue;const l=o.getPosition(),c=o.getRadius();if(Math.abs(Math.round(n.z)-Math.round(l.z))>s+c)continue;const u=Vo(n,l),h=s+c;u>h||Z4e(t,o,i,r.retina.pixelRatio)}}isEnabled(t){return t.options.collisions.enable}reset(){}}async function J4e(e,t=!0){await e.addInteractor("particlesCollisions",i=>new $4e(i),t)}class eDe extends _a{constructor(t,i,r,n){super(t,i,r),this.canvasSize=n,this.canvasSize={...n}}contains(t){const{width:i,height:r}=this.canvasSize,{x:n,y:s}=t;return super.contains(t)||super.contains({x:n-i,y:s})||super.contains({x:n-i,y:s-r})||super.contains({x:n,y:s-r})}intersects(t){if(super.intersects(t))return!0;const i=t,r=t,n={x:t.position.x-this.canvasSize.width,y:t.position.y-this.canvasSize.height};if(r.radius!==void 0){const s=new _a(n.x,n.y,r.radius*2);return super.intersects(s)}else if(i.size!==void 0){const s=new oc(n.x,n.y,i.size.width*2,i.size.height*2);return super.intersects(s)}return!1}}class tDe{constructor(){this.blur=5,this.color=new oa,this.color.value="#000",this.enable=!1}load(t){t&&(t.blur!==void 0&&(this.blur=t.blur),this.color=oa.create(this.color,t.color),t.enable!==void 0&&(this.enable=t.enable))}}class iDe{constructor(){this.enable=!1,this.frequency=1}load(t){t&&(t.color!==void 0&&(this.color=oa.create(this.color,t.color)),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=t.opacity))}}class rDe{constructor(){this.blink=!1,this.color=new oa,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new tDe,this.triangles=new iDe,this.width=1,this.warp=!1}load(t){t&&(t.id!==void 0&&(this.id=t.id),t.blink!==void 0&&(this.blink=t.blink),this.color=oa.create(this.color,t.color),t.consent!==void 0&&(this.consent=t.consent),t.distance!==void 0&&(this.distance=t.distance),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=t.opacity),this.shadow.load(t.shadow),this.triangles.load(t.triangles),t.width!==void 0&&(this.width=t.width),t.warp!==void 0&&(this.warp=t.warp))}}function nDe(e,t,i,r,n){const{dx:s,dy:a,distance:o}=qa(e,t);if(!n||o<=i)return o;const l={x:Math.abs(s),y:Math.abs(a)},c={x:Math.min(l.x,r.width-l.x),y:Math.min(l.y,r.height-l.y)};return Math.sqrt(c.x**2+c.y**2)}class sDe extends rk{constructor(t){super(t),this._setColor=i=>{if(!i.options.links)return;const r=this.linkContainer,n=i.options.links;let s=n.id===void 0?r.particles.linksColor:r.particles.linksColors.get(n.id);if(s)return;const a=n.color;s=nte(a,n.blink,n.consent),n.id===void 0?r.particles.linksColor=s:r.particles.linksColors.set(n.id,s)},this.linkContainer=t}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(t){if(!t.options.links)return;t.links=[];const i=t.getPosition(),r=this.container,n=r.canvas.size;if(i.x<0||i.y<0||i.x>n.width||i.y>n.height)return;const s=t.options.links,a=s.opacity,o=t.retina.linksDistance??0,l=s.warp,c=l?new eDe(i.x,i.y,o,n):new _a(i.x,i.y,o),u=r.particles.quadTree.query(c);for(const h of u){const f=h.options.links;if(t===h||!(f!=null&&f.enable)||s.id!==f.id||h.spawning||h.destroyed||!h.links||t.links.some(x=>x.destination===h)||h.links.some(x=>x.destination===t))continue;const m=h.getPosition();if(m.x<0||m.y<0||m.x>n.width||m.y>n.height)continue;const g=nDe(i,m,o,n,l&&f.warp);if(g>o)continue;const v=(1-g/o)*a;this._setColor(t),t.links.push({destination:h,opacity:v})}}isEnabled(t){var i;return!!((i=t.options.links)!=null&&i.enable)}loadParticlesOptions(t,...i){t.links||(t.links=new rDe);for(const r of i)t.links.load((r==null?void 0:r.links)??(r==null?void 0:r.lineLinked)??(r==null?void 0:r.line_linked))}reset(){}}async function aDe(e,t=!0){await e.addInteractor("particlesLinks",i=>new sDe(i),t)}function oDe(e){let t=!1;const{begin:i,end:r,maxDistance:n,context:s,canvasSize:a,width:o,backgroundMask:l,colorLine:c,opacity:u,links:h}=e;if(Vo(i,r)<=n)jx(s,i,r),t=!0;else if(h.warp){let m,g;const v={x:r.x-a.width,y:r.y},x=qa(i,v);if(x.distance<=n){const b=i.y-x.dy/x.dx*i.x;m={x:0,y:b},g={x:a.width,y:b}}else{const b={x:r.x,y:r.y-a.height},S=qa(i,b);if(S.distance<=n){const A=-(i.y-S.dy/S.dx*i.x)/(S.dy/S.dx);m={x:A,y:0},g={x:A,y:a.height}}else{const _={x:r.x-a.width,y:r.y-a.height},A=qa(i,_);if(A.distance<=n){const M=i.y-A.dy/A.dx*i.x;m={x:-M/(A.dy/A.dx),y:M},g={x:m.x+a.width,y:m.y+a.height}}}}m&&g&&(jx(s,i,m),jx(s,r,g),t=!0)}if(!t)return;s.lineWidth=o,l.enable&&(s.globalCompositeOperation=l.composite),s.strokeStyle=jh(c,u);const{shadow:f}=h;if(f.enable){const m=rc(f.color);m&&(s.shadowBlur=f.blur,s.shadowColor=jh(m))}s.stroke()}function lDe(e){const{context:t,pos1:i,pos2:r,pos3:n,backgroundMask:s,colorTriangle:a,opacityTriangle:o}=e;F5e(t,i,r,n),s.enable&&(t.globalCompositeOperation=s.composite),t.fillStyle=jh(a,o),t.fill()}function cDe(e){return e.sort((t,i)=>t-i),e.join("_")}function kF(e,t){const i=cDe(e.map(n=>n.id));let r=t.get(i);return r===void 0&&(r=Xr(),t.set(i,r)),r}class uDe{constructor(t){this.container=t,this._drawLinkLine=(i,r)=>{const n=i.options.links;if(!(n!=null&&n.enable))return;const s=this.container,a=s.actualOptions,o=r.destination,l=i.getPosition(),c=o.getPosition();let u=r.opacity;s.canvas.draw(h=>{var b;let f;const m=(b=i.options.twinkle)==null?void 0:b.lines;if(m!=null&&m.enable){const S=m.frequency,_=rc(m.color);Xr()<S&&_&&(f=_,u=ri(m.opacity))}if(!f){const S=n.id!==void 0?s.particles.linksColors.get(n.id):s.particles.linksColor;f=tR(i,o,S)}if(!f)return;const g=i.retina.linksWidth??0,v=i.retina.linksDistance??0,{backgroundMask:x}=a;oDe({context:h,width:g,begin:l,end:c,maxDistance:v,canvasSize:s.canvas.size,links:n,backgroundMask:x,colorLine:f,opacity:u})})},this._drawLinkTriangle=(i,r,n)=>{const s=i.options.links;if(!(s!=null&&s.enable))return;const a=s.triangles;if(!a.enable)return;const o=this.container,l=o.actualOptions,c=r.destination,u=n.destination,h=a.opacity??(r.opacity+n.opacity)/2;h<=0||o.canvas.draw(f=>{const m=i.getPosition(),g=c.getPosition(),v=u.getPosition(),x=i.retina.linksDistance??0;if(Vo(m,g)>x||Vo(v,g)>x||Vo(v,m)>x)return;let b=rc(a.color);if(!b){const S=s.id!==void 0?o.particles.linksColors.get(s.id):o.particles.linksColor;b=tR(i,c,S)}b&&lDe({context:f,pos1:m,pos2:g,pos3:v,backgroundMask:l.backgroundMask,colorTriangle:b,opacityTriangle:h})})},this._drawTriangles=(i,r,n,s)=>{var l,c,u;const a=n.destination;if(!((l=i.links)!=null&&l.triangles.enable&&((c=a.options.links)!=null&&c.triangles.enable)))return;const o=(u=a.links)==null?void 0:u.filter(h=>{const f=this._getLinkFrequency(a,h.destination);return a.options.links&&f<=a.options.links.frequency&&s.findIndex(m=>m.destination===h.destination)>=0});if(o!=null&&o.length)for(const h of o){const f=h.destination;this._getTriangleFrequency(r,a,f)>i.links.triangles.frequency||this._drawLinkTriangle(r,n,h)}},this._getLinkFrequency=(i,r)=>kF([i,r],this._freqs.links),this._getTriangleFrequency=(i,r,n)=>kF([i,r,n],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(t,i){const{links:r,options:n}=i;if(!r||r.length<=0)return;const s=r.filter(a=>n.links&&this._getLinkFrequency(i,a.destination)<=n.links.frequency);for(const a of s)this._drawTriangles(n,i,a,s),a.opacity>0&&(i.retina.linksWidth??0)>0&&this._drawLinkLine(i,a)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(t){if(t.links=[],!t.options.links)return;const i=this.container.retina.pixelRatio,{retina:r}=t,{distance:n,width:s}=t.options.links;r.linksDistance=n*i,r.linksWidth=s*i}particleDestroyed(t){t.links=[]}}class hDe{constructor(){this.id="links"}getPlugin(t){return new uDe(t)}loadOptions(){}needsPlugin(){return!0}}async function dDe(e,t=!0){const i=new hDe;await e.addPlugin(i,t)}async function fDe(e,t=!0){await aDe(e,t),await dDe(e,t)}class bte{draw(t,i,r){const n=this.getCenter(i,r),s=this.getSidesData(i,r),a=s.count.numerator*s.count.denominator,o=s.count.numerator/s.count.denominator,l=180*(o-2)/o,c=Math.PI-Math.PI*l/180;if(t){t.beginPath(),t.translate(n.x,n.y),t.moveTo(0,0);for(let u=0;u<a;u++)t.lineTo(s.length,0),t.translate(s.length,0),t.rotate(c)}}getSidesCount(t){const i=t.shapeData;return Math.round(ri((i==null?void 0:i.sides)??(i==null?void 0:i.nb_sides)??5))}}class pDe extends bte{getCenter(t,i){return{x:-i/(t.sides/3.5),y:-i/(2.66/3.5)}}getSidesData(t,i){const r=t.sides;return{count:{denominator:1,numerator:r},length:i*2.66/(r/3)}}}class mDe extends bte{getCenter(t,i){return{x:-i,y:i/1.66}}getSidesCount(){return 3}getSidesData(t,i){return{count:{denominator:2,numerator:3},length:i*2}}}async function gDe(e,t=!0){await e.addShape("polygon",new pDe,t)}async function vDe(e,t=!0){await e.addShape("triangle",new mDe,t)}async function yDe(e,t=!0){await gDe(e,t),await vDe(e,t)}class xDe{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0&&(this.speed=Ti(t.speed)),t.decay!==void 0&&(this.decay=Ti(t.decay)),t.sync!==void 0&&(this.sync=t.sync))}}class bDe extends Xf{constructor(){super(),this.animation=new xDe,this.direction="clockwise",this.path=!1,this.value=0}load(t){t&&(super.load(t),t.direction!==void 0&&(this.direction=t.direction),this.animation.load(t.animation),t.path!==void 0&&(this.path=t.path))}}function wDe(e,t){const i=e.rotate,r=e.options.rotate;if(!i||!r)return;const n=r.animation,s=(i.velocity??0)*t.factor,a=2*Math.PI,o=i.decay??1;if(n.enable){switch(i.status){case"increasing":i.value+=s,i.value>a&&(i.value-=a);break;case"decreasing":default:i.value-=s,i.value<0&&(i.value+=a);break}i.velocity&&o!==1&&(i.velocity*=o)}}class SDe{constructor(t){this.container=t}init(t){const i=t.options.rotate;if(!i)return;t.rotate={enable:i.animation.enable,value:ri(i.value)*Math.PI/180},t.pathRotation=i.path;let r=i.direction;switch(r==="random"&&(r=Math.floor(Xr()*2)>0?"counter-clockwise":"clockwise"),r){case"counter-clockwise":case"counterClockwise":t.rotate.status="decreasing";break;case"clockwise":t.rotate.status="increasing";break}const n=i.animation;n.enable&&(t.rotate.decay=1-ri(n.decay),t.rotate.velocity=ri(n.speed)/360*this.container.retina.reduceFactor,n.sync||(t.rotate.velocity*=Xr())),t.rotation=t.rotate.value}isEnabled(t){const i=t.options.rotate;return i?!t.destroyed&&!t.spawning&&i.animation.enable&&!i.path:!1}loadOptions(t,...i){t.rotate||(t.rotate=new bDe);for(const r of i)t.rotate.load(r==null?void 0:r.rotate)}update(t,i){var r;this.isEnabled(t)&&(wDe(t,i),t.rotation=((r=t.rotate)==null?void 0:r.value)??0)}}async function _De(e,t=!0){await e.addParticleUpdater("rotate",i=>new SDe(i),t)}const EDe=Math.sqrt(2);class ADe{draw(t,i,r){const n=r/EDe,s=n*2;t.rect(-n,-n,s,s)}getSidesCount(){return 4}}async function TDe(e,t=!0){await e.addShape(["edge","square"],new ADe,t)}class CDe{draw(t,i,r){const n=i.sides,s=i.starInset??2;t.moveTo(0,0-r);for(let a=0;a<n;a++)t.rotate(Math.PI/n),t.lineTo(0,0-r*s),t.rotate(Math.PI/n),t.lineTo(0,0-r)}getSidesCount(t){const i=t.shapeData;return Math.round(ri((i==null?void 0:i.sides)??(i==null?void 0:i.nb_sides)??5))}particleInit(t,i){const r=i.shapeData,n=ri((r==null?void 0:r.inset)??2);i.starInset=n}}async function MDe(e,t=!0){await e.addShape("star",new CDe,t)}function MP(e,t,i,r,n){if(!t||!i.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0)||(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),(t.delayTime??0)>0&&t.time<(t.delayTime??0)))return;const s=fo(i.offset),a=(t.velocity??0)*e.factor+s*3.6,o=t.decay??1;!n||t.status==="increasing"?(t.value+=a,t.value>r&&(t.loops||(t.loops=0),t.loops++,n&&(t.status="decreasing",t.value-=t.value%r))):(t.value-=a,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)),t.velocity&&o!==1&&(t.velocity*=o),t.value>r&&(t.value%=r)}function PDe(e,t){if(!e.strokeColor||!e.strokeAnimation)return;const{h:i,s:r,l:n}=e.strokeColor,{h:s,s:a,l:o}=e.strokeAnimation;i&&MP(t,i,s,360,!1),r&&MP(t,r,a,100,!0),n&&MP(t,n,o,100,!0)}class DDe{constructor(t){this.container=t}init(t){var a;const i=this.container,r=t.options,n=Bh(r.stroke,t.id,r.reduceDuplicates);t.strokeWidth=ri(n.width)*i.retina.pixelRatio,t.strokeOpacity=ri(n.opacity??1),t.strokeAnimation=(a=n.color)==null?void 0:a.animation;const s=Cb(n.color)??t.getFillColor();s&&(t.strokeColor=ste(s,t.strokeAnimation,i.retina.reduceFactor))}isEnabled(t){const i=t.strokeAnimation,{strokeColor:r}=t;return!t.destroyed&&!t.spawning&&!!i&&((r==null?void 0:r.h.value)!==void 0&&r.h.enable||(r==null?void 0:r.s.value)!==void 0&&r.s.enable||(r==null?void 0:r.l.value)!==void 0&&r.l.enable)}update(t,i){this.isEnabled(t)&&PDe(t,i)}}async function IDe(e,t=!0){await e.addParticleUpdater("strokeColor",i=>new DDe(i),t)}const zE=["text","character","char"];class RDe{draw(t,i,r,n){const s=i.shapeData;if(s===void 0)return;const a=s.value;if(a===void 0)return;i.text===void 0&&(i.text=Bh(a,i.randomIndexData));const o=i.text,l=s.style??"",c=s.weight??"400",u=Math.round(r)*2,h=s.font??"Verdana",f=i.fill,m=o.length*r/2;t.font=`${l} ${c} ${u}px "${h}"`;const g={x:-m,y:r/2};t.globalAlpha=n,f?t.fillText(o,g.x,g.y):t.strokeText(o,g.x,g.y),t.globalAlpha=1}getSidesCount(){return 12}async init(t){const i=t.actualOptions;if(zE.find(r=>Tn(r,i.particles.shape.type))){const r=zE.map(s=>i.particles.shape.options[s]).find(s=>!!s),n=[];ks(r,s=>{n.push(O5e(s.font,s.weight))}),await Promise.all(n)}}particleInit(t,i){if(!i.shape||!zE.includes(i.shape))return;const r=i.shapeData;if(r===void 0)return;const n=r.value;n!==void 0&&(i.text=Bh(n,i.randomIndexData))}}async function ODe(e,t=!0){await e.addShape(zE,new RDe,t)}async function LDe(e,t=!0){sPe(e),await q4e(e,!1),await NPe(e,!1),await FPe(e,!1),await qPe(e,!1),await e4e(e,!1),await a4e(e,!1),await l4e(e,!1),await h4e(e,!1),await p4e(e,!1),await y4e(e,!1),await w4e(e,!1),await Y4e(e,!1),await J4e(e,!1),await fDe(e,!1),await zPe(),await B4e(e,!1),await G4e(e,!1),await yDe(e,!1),await TDe(e,!1),await MDe(e,!1),await ODe(e,!1),await F4e(e,!1),await _De(e,!1),await IDe(e,!1),await kPe(e,t)}const kDe=()=>{const e=J.useCallback(async t=>{await LDe(t),t.addShape("four-point-star",new zDe)},[]);return E.jsx(E.Fragment,{children:E.jsx(pte,{init:e,options:{background:{color:"#000"},particles:{number:{value:100},color:{value:"#1a1f37"},shape:{type:"four-point-star"},size:{value:{min:1,max:2},animation:{enable:!0,speed:2,minimumValue:2,sync:!1}},opacity:{value:{min:.3,max:1},animation:{enable:!0,speed:1.5,minimumValue:.3,sync:!1}},move:{enable:!0,speed:.05,direction:"none",random:!0,straight:!1,outModes:{default:"out"}}},detectRetina:!0}})})};class zDe{draw(t,i,r){t.beginPath(),t.moveTo(0,-r),t.lineTo(r/2,0),t.lineTo(0,r),t.lineTo(-r/2,0),t.closePath(),t.fill()}getSidesCount(){return 4}}const zF="/assets/costomer-CaPtNmD-.png";var BDe=Object.create,D3=Object.defineProperty,jDe=Object.getOwnPropertyDescriptor,NDe=Object.getOwnPropertyNames,VDe=Object.getPrototypeOf,UDe=Object.prototype.hasOwnProperty,FDe=(e,t,i)=>t in e?D3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Gm=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),HDe=(e,t)=>{for(var i in t)D3(e,i,{get:t[i],enumerable:!0})},GDe=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of NDe(t))!UDe.call(e,n)&&n!==i&&D3(e,n,{get:()=>t[n],enumerable:!(r=jDe(t,n))||r.enumerable});return e},Yf=(e,t,i)=>(i=e!=null?BDe(VDe(e)):{},GDe(t||!e||!e.__esModule?D3(i,"default",{value:e,enumerable:!0}):i,e)),hx=(e,t,i)=>(FDe(e,typeof t!="symbol"?t+"":t,i),i),WDe=Gm((e,t)=>{(function(i,r){typeof e=="object"?t.exports=r():typeof define=="function"&&define.amd?define(r):i.Alea=r()})(e,function(){return i.importState=function(n){var s=new i;return s.importState(n),s},i;function i(){return function(n){var s=0,a=0,o=0,l=1;n.length==0&&(n=[+new Date]);var c=r();s=c(" "),a=c(" "),o=c(" ");for(var u=0;u<n.length;u++)s-=c(n[u]),s<0&&(s+=1),a-=c(n[u]),a<0&&(a+=1),o-=c(n[u]),o<0&&(o+=1);c=null;var h=function(){var f=2091639*s+l*23283064365386963e-26;return s=a,a=o,o=f-(l=f|0)};return h.next=h,h.uint32=function(){return h()*4294967296},h.fract53=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.version="Alea 0.9",h.args=n,h.exportState=function(){return[s,a,o,l]},h.importState=function(f){s=+f[0]||0,a=+f[1]||0,o=+f[2]||0,l=+f[3]||0},h}(Array.prototype.slice.call(arguments))}function r(){var n=4022871197,s=function(a){a=a.toString();for(var o=0;o<a.length;o++){n+=a.charCodeAt(o);var l=.02519603282416938*n;n=l>>>0,l-=n,l*=n,n=l>>>0,l-=n,n+=l*4294967296}return(n>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})}),wte=Gm((e,t)=>{(function(i,r){typeof e=="object"&&typeof t<"u"?r(e):typeof define=="function"&&define.amd?define(["exports"],r):r((i=typeof globalThis<"u"?globalThis:i||self).SVDJS={})})(e,function(i){i.SVD=function(r,n,s,a,o){if(n=n===void 0||n,s=s===void 0||s,o=1e-64/(a=a||Math.pow(2,-52)),!r)throw new TypeError("Matrix a is not defined");var l,c,u,h,f,m,g,v,x,b,S,_,A=r[0].length,M=r.length;if(M<A)throw new TypeError("Invalid matrix: m < n");for(var C=[],D=[],T=[],R=n==="f"?M:A,O=b=g=0;O<M;O++)D[O]=new Array(R).fill(0);for(O=0;O<A;O++)T[O]=new Array(A).fill(0);var L,k=new Array(A).fill(0);for(O=0;O<M;O++)for(l=0;l<A;l++)D[O][l]=r[O][l];for(O=0;O<A;O++){for(C[O]=g,x=0,u=O+1,l=O;l<M;l++)x+=Math.pow(D[l][O],2);if(x<o)g=0;else for(v=(m=D[O][O])*(g=m<0?Math.sqrt(x):-Math.sqrt(x))-x,D[O][O]=m-g,l=u;l<A;l++){for(x=0,c=O;c<M;c++)x+=D[c][O]*D[c][l];for(m=x/v,c=O;c<M;c++)D[c][l]=D[c][l]+m*D[c][O]}for(k[O]=g,x=0,l=u;l<A;l++)x+=Math.pow(D[O][l],2);if(x<o)g=0;else{for(v=(m=D[O][O+1])*(g=m<0?Math.sqrt(x):-Math.sqrt(x))-x,D[O][O+1]=m-g,l=u;l<A;l++)C[l]=D[O][l]/v;for(l=u;l<M;l++){for(x=0,c=u;c<A;c++)x+=D[l][c]*D[O][c];for(c=u;c<A;c++)D[l][c]=D[l][c]+x*C[c]}}b<(S=Math.abs(k[O])+Math.abs(C[O]))&&(b=S)}if(s)for(O=A-1;0<=O;O--){if(g!==0){for(v=D[O][O+1]*g,l=u;l<A;l++)T[l][O]=D[O][l]/v;for(l=u;l<A;l++){for(x=0,c=u;c<A;c++)x+=D[O][c]*T[c][l];for(c=u;c<A;c++)T[c][l]=T[c][l]+x*T[c][O]}}for(l=u;l<A;l++)T[O][l]=0,T[l][O]=0;T[O][O]=1,g=C[O],u=O}if(n){if(n==="f")for(O=A;O<M;O++){for(l=A;l<M;l++)D[O][l]=0;D[O][O]=1}for(O=A-1;0<=O;O--){for(u=O+1,g=k[O],l=u;l<R;l++)D[O][l]=0;if(g!==0){for(v=D[O][O]*g,l=u;l<R;l++){for(x=0,c=u;c<M;c++)x+=D[c][O]*D[c][l];for(m=x/v,c=O;c<M;c++)D[c][l]=D[c][l]+m*D[c][O]}for(l=O;l<M;l++)D[l][O]=D[l][O]/g}else for(l=O;l<M;l++)D[l][O]=0;D[O][O]=D[O][O]+1}}for(a*=b,c=A-1;0<=c;c--)for(var B=0;B<50;B++){for(L=!1,u=c;0<=u;u--){if(Math.abs(C[u])<=a){L=!0;break}if(Math.abs(k[u-1])<=a)break}if(!L){for(f=0,h=u-(x=1),O=u;O<c+1&&(m=x*C[O],C[O]=f*C[O],!(Math.abs(m)<=a));O++)if(g=k[O],k[O]=Math.sqrt(m*m+g*g),f=g/(v=k[O]),x=-m/v,n)for(l=0;l<M;l++)S=D[l][h],_=D[l][O],D[l][h]=S*f+_*x,D[l][O]=-S*x+_*f}if(_=k[c],u===c){if(_<0&&(k[c]=-_,s))for(l=0;l<A;l++)T[l][c]=-T[l][c];break}for(b=k[u],m=(((S=k[c-1])-_)*(S+_)+((g=C[c-1])-(v=C[c]))*(g+v))/(2*v*S),g=Math.sqrt(m*m+1),m=((b-_)*(b+_)+v*(S/(m<0?m-g:m+g)-v))/b,O=u+(x=f=1);O<c+1;O++){if(g=C[O],S=k[O],v=x*g,g*=f,_=Math.sqrt(m*m+v*v),m=b*(f=m/(C[O-1]=_))+g*(x=v/_),g=-b*x+g*f,v=S*x,S*=f,s)for(l=0;l<A;l++)b=T[l][O-1],_=T[l][O],T[l][O-1]=b*f+_*x,T[l][O]=-b*x+_*f;if(_=Math.sqrt(m*m+v*v),m=(f=m/(k[O-1]=_))*g+(x=v/_)*S,b=-x*g+f*S,n)for(l=0;l<M;l++)S=D[l][O-1],_=D[l][O],D[l][O-1]=S*f+_*x,D[l][O]=-S*x+_*f}C[u]=0,C[c]=m,k[c]=b}for(O=0;O<A;O++)k[O]<a&&(k[O]=0);return{u:D,q:k,v:T}},i.VERSION="1.1.1",Object.defineProperty(i,"__esModule",{value:!0})})}),qDe=Gm((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;function i(r){if(r===null||r===!0||r===!1)return NaN;var n=Number(r);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}t.exports=e.default}),XDe=Gm((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;function i(r){var n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),r.getTime()-n.getTime()}t.exports=e.default}),YDe=Gm((e,t)=>{function i(s,a){function o(){this.constructor=s}o.prototype=a.prototype,s.prototype=new o}function r(s,a,o,l){this.message=s,this.expected=a,this.found=o,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,r)}i(r,Error),r.buildMessage=function(s,a){var o={literal:function(g){return'"'+c(g.text)+'"'},class:function(g){var v="",x;for(x=0;x<g.parts.length;x++)v+=g.parts[x]instanceof Array?u(g.parts[x][0])+"-"+u(g.parts[x][1]):u(g.parts[x]);return"["+(g.inverted?"^":"")+v+"]"},any:function(g){return"any character"},end:function(g){return"end of input"},other:function(g){return g.description}};function l(g){return g.charCodeAt(0).toString(16).toUpperCase()}function c(g){return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+l(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+l(v)})}function u(g){return g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+l(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+l(v)})}function h(g){return o[g.type](g)}function f(g){var v=new Array(g.length),x,b;for(x=0;x<g.length;x++)v[x]=h(g[x]);if(v.sort(),v.length>0){for(x=1,b=1;x<v.length;x++)v[x-1]!==v[x]&&(v[b]=v[x],b++);v.length=b}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function m(g){return g?'"'+c(g)+'"':"end of input"}return"Expected "+f(s)+" but "+m(a)+" found."};function n(s,a){a=a!==void 0?a:{};var o={},l={svg_path:er},c=er,u=function(Q){if(!Q)return[];for(var ee=[],ge=0;ge<Q.length;ge++)ee=ee.concat.apply(ee,Q[ge]);var le=ee[0];return le&&le.code=="m"&&(delete le.relative,le.code="M"),ee},h=function(Q,ee){return ir(Q,ee)},f=/^[Mm]/,m=ft(["M","m"],!1,!1),g=function(Q,ee,ge){var le=en(Q,[ee]);return ge&&(le=le.concat(en(Q=="M"?"L":"l",ge[1]))),le},v=/^[Zz]/,x=ft(["Z","z"],!1,!1),b=function(){return en("Z")},S=/^[Ll]/,_=ft(["L","l"],!1,!1),A=function(Q,ee){return en(Q,ee)},M=/^[Hh]/,C=ft(["H","h"],!1,!1),D=function(Q,ee){return en(Q,ee.map(function(ge){return{x:ge}}))},T=/^[Vv]/,R=ft(["V","v"],!1,!1),O=function(Q,ee){return en(Q,ee.map(function(ge){return{y:ge}}))},L=/^[Cc]/,k=ft(["C","c"],!1,!1),B=function(Q,ee,ge){return{x1:Q.x,y1:Q.y,x2:ee.x,y2:ee.y,x:ge.x,y:ge.y}},V=/^[Ss]/,$=ft(["S","s"],!1,!1),q=function(Q,ee){return{x2:Q.x,y2:Q.y,x:ee.x,y:ee.y}},Y=/^[Qq]/,X=ft(["Q","q"],!1,!1),ne=function(Q,ee){return{x1:Q.x,y1:Q.y,x:ee.x,y:ee.y}},F=/^[Tt]/,K=ft(["T","t"],!1,!1),re=/^[Aa]/,oe=ft(["A","a"],!1,!1),ce=function(Q,ee,ge,le,we,nt){return{rx:Q,ry:ee,xAxisRotation:ge,largeArc:le,sweep:we,x:nt.x,y:nt.y}},de=function(Q,ee){return{x:Q,y:ee}},se=function(Q){return Q*1},xe=function(Q){return Q.join("")*1},fe=/^[01]/,ye=ft(["0","1"],!1,!1),_e=function(Q){return Q=="1"},Te=function(){return""},Ce=",",Le=Tt(",",!1),Ke=function(Q){return Q.join("")},Xe=".",pt=Tt(".",!1),ct=/^[eE]/,ot=ft(["e","E"],!1,!1),rt=/^[+\-]/,Dt=ft(["+","-"],!1,!1),At=/^[0-9]/,he=ft([["0","9"]],!1,!1),ie=function(Q){return Q.join("")},Me=/^[ \t\n\r]/,$e=ft([" ","	",`
`,"\r"],!1,!1),Z=0,We=[{line:1,column:1}],dt=0,lt=[],Ve;if("startRule"in a){if(!(a.startRule in l))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');c=l[a.startRule]}function Tt(Q,ee){return{type:"literal",text:Q,ignoreCase:ee}}function ft(Q,ee,ge){return{type:"class",parts:Q,inverted:ee,ignoreCase:ge}}function St(){return{type:"end"}}function Ct(Q){var ee=We[Q],ge;if(ee)return ee;for(ge=Q-1;!We[ge];)ge--;for(ee=We[ge],ee={line:ee.line,column:ee.column};ge<Q;)s.charCodeAt(ge)===10?(ee.line++,ee.column=1):ee.column++,ge++;return We[Q]=ee,ee}function bt(Q,ee){var ge=Ct(Q),le=Ct(ee);return{start:{offset:Q,line:ge.line,column:ge.column},end:{offset:ee,line:le.line,column:le.column}}}function It(Q){Z<dt||(Z>dt&&(dt=Z,lt=[]),lt.push(Q))}function Ei(Q,ee,ge){return new r(r.buildMessage(Q,ee),Q,ee,ge)}function er(){var Q,ee,ge,le,we;for(Q=Z,ee=[],ge=Ut();ge!==o;)ee.push(ge),ge=Ut();if(ee!==o)if(ge=be(),ge===o&&(ge=null),ge!==o){for(le=[],we=Ut();we!==o;)le.push(we),we=Ut();le!==o?(ee=u(ge),Q=ee):(Z=Q,Q=o)}else Z=Q,Q=o;else Z=Q,Q=o;return Q}function be(){var Q,ee,ge,le,we,nt;if(Q=Z,ee=Ue(),ee!==o){for(ge=[],le=Z,we=[],nt=Ut();nt!==o;)we.push(nt),nt=Ut();for(we!==o?(nt=Ue(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);le!==o;){for(ge.push(le),le=Z,we=[],nt=Ut();nt!==o;)we.push(nt),nt=Ut();we!==o?(nt=Ue(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o)}ge!==o?(ee=h(ee,ge),Q=ee):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function Ue(){var Q,ee,ge,le,we,nt;if(Q=Z,ee=ut(),ee!==o){for(ge=[],le=Z,we=[],nt=Ut();nt!==o;)we.push(nt),nt=Ut();for(we!==o?(nt=qe(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);le!==o;){for(ge.push(le),le=Z,we=[],nt=Ut();nt!==o;)we.push(nt),nt=Ut();we!==o?(nt=qe(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o)}ge!==o?(ee=h(ee,ge),Q=ee):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function qe(){var Q;return Q=Bt(),Q===o&&(Q=si(),Q===o&&(Q=Hi(),Q===o&&(Q=Pi(),Q===o&&(Q=In(),Q===o&&(Q=zr(),Q===o&&(Q=ue(),Q===o&&(Q=Ae(),Q===o&&(Q=xt())))))))),Q}function ut(){var Q,ee,ge,le,we,nt,wo;if(Q=Z,f.test(s.charAt(Z))?(ee=s.charAt(Z),Z++):(ee=o,It(m)),ee!==o){for(ge=[],le=Ut();le!==o;)ge.push(le),le=Ut();ge!==o?(le=_t(),le!==o?(we=Z,nt=Be(),nt===o&&(nt=null),nt!==o?(wo=hi(),wo!==o?(nt=[nt,wo],we=nt):(Z=we,we=o)):(Z=we,we=o),we===o&&(we=null),we!==o?(ee=g(ee,le,we),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function Bt(){var Q,ee;return Q=Z,v.test(s.charAt(Z))?(ee=s.charAt(Z),Z++):(ee=o,It(x)),ee!==o&&(ee=b()),Q=ee,Q}function si(){var Q,ee,ge,le;if(Q=Z,S.test(s.charAt(Z))?(ee=s.charAt(Z),Z++):(ee=o,It(_)),ee!==o){for(ge=[],le=Ut();le!==o;)ge.push(le),le=Ut();ge!==o?(le=hi(),le!==o?(ee=A(ee,le),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function hi(){var Q,ee,ge,le,we,nt;if(Q=Z,ee=_t(),ee!==o){for(ge=[],le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=_t(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);le!==o;)ge.push(le),le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=_t(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);ge!==o?(ee=h(ee,ge),Q=ee):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function Hi(){var Q,ee,ge,le;if(Q=Z,M.test(s.charAt(Z))?(ee=s.charAt(Z),Z++):(ee=o,It(C)),ee!==o){for(ge=[],le=Ut();le!==o;)ge.push(le),le=Ut();ge!==o?(le=Yn(),le!==o?(ee=D(ee,le),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function Yn(){var Q,ee,ge,le,we,nt;if(Q=Z,ee=st(),ee!==o){for(ge=[],le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=st(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);le!==o;)ge.push(le),le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=st(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);ge!==o?(ee=h(ee,ge),Q=ee):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function Pi(){var Q,ee,ge,le;if(Q=Z,T.test(s.charAt(Z))?(ee=s.charAt(Z),Z++):(ee=o,It(R)),ee!==o){for(ge=[],le=Ut();le!==o;)ge.push(le),le=Ut();ge!==o?(le=Yn(),le!==o?(ee=O(ee,le),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function In(){var Q,ee,ge,le;if(Q=Z,L.test(s.charAt(Z))?(ee=s.charAt(Z),Z++):(ee=o,It(k)),ee!==o){for(ge=[],le=Ut();le!==o;)ge.push(le),le=Ut();ge!==o?(le=bi(),le!==o?(ee=A(ee,le),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function bi(){var Q,ee,ge,le,we,nt;if(Q=Z,ee=gr(),ee!==o){for(ge=[],le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=gr(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);le!==o;)ge.push(le),le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=gr(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);ge!==o?(ee=h(ee,ge),Q=ee):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function gr(){var Q,ee,ge,le,we,nt;return Q=Z,ee=_t(),ee!==o?(ge=Be(),ge===o&&(ge=null),ge!==o?(le=_t(),le!==o?(we=Be(),we===o&&(we=null),we!==o?(nt=_t(),nt!==o?(ee=B(ee,le,nt),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o),Q}function zr(){var Q,ee,ge,le;if(Q=Z,V.test(s.charAt(Z))?(ee=s.charAt(Z),Z++):(ee=o,It($)),ee!==o){for(ge=[],le=Ut();le!==o;)ge.push(le),le=Ut();ge!==o?(le=Rr(),le!==o?(ee=A(ee,le),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function Rr(){var Q,ee,ge,le,we,nt;if(Q=Z,ee=fs(),ee!==o){for(ge=[],le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=fs(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);le!==o;)ge.push(le),le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=fs(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);ge!==o?(ee=h(ee,ge),Q=ee):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function fs(){var Q,ee,ge,le;return Q=Z,ee=_t(),ee!==o?(ge=Be(),ge===o&&(ge=null),ge!==o?(le=_t(),le!==o?(ee=q(ee,le),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o),Q}function ue(){var Q,ee,ge,le;if(Q=Z,Y.test(s.charAt(Z))?(ee=s.charAt(Z),Z++):(ee=o,It(X)),ee!==o){for(ge=[],le=Ut();le!==o;)ge.push(le),le=Ut();ge!==o?(le=De(),le!==o?(ee=A(ee,le),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function De(){var Q,ee,ge,le,we,nt;if(Q=Z,ee=Fe(),ee!==o){for(ge=[],le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=Fe(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);le!==o;)ge.push(le),le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=Fe(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);ge!==o?(ee=h(ee,ge),Q=ee):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function Fe(){var Q,ee,ge,le;return Q=Z,ee=_t(),ee!==o?(ge=Be(),ge===o&&(ge=null),ge!==o?(le=_t(),le!==o?(ee=ne(ee,le),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o),Q}function Ae(){var Q,ee,ge,le;if(Q=Z,F.test(s.charAt(Z))?(ee=s.charAt(Z),Z++):(ee=o,It(K)),ee!==o){for(ge=[],le=Ut();le!==o;)ge.push(le),le=Ut();ge!==o?(le=Ne(),le!==o?(ee=A(ee,le),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function Ne(){var Q,ee,ge,le,we,nt;if(Q=Z,ee=_t(),ee!==o){for(ge=[],le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=_t(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);le!==o;)ge.push(le),le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=_t(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);ge!==o?(ee=h(ee,ge),Q=ee):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function xt(){var Q,ee,ge,le;if(Q=Z,re.test(s.charAt(Z))?(ee=s.charAt(Z),Z++):(ee=o,It(oe)),ee!==o){for(ge=[],le=Ut();le!==o;)ge.push(le),le=Ut();ge!==o?(le=kt(),le!==o?(ee=A(ee,le),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function kt(){var Q,ee,ge,le,we,nt;if(Q=Z,ee=zt(),ee!==o){for(ge=[],le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=zt(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);le!==o;)ge.push(le),le=Z,we=Be(),we===o&&(we=null),we!==o?(nt=zt(),nt!==o?(we=[we,nt],le=we):(Z=le,le=o)):(Z=le,le=o);ge!==o?(ee=h(ee,ge),Q=ee):(Z=Q,Q=o)}else Z=Q,Q=o;return Q}function zt(){var Q,ee,ge,le,we,nt,wo,xc,bc,Dl,rd,Qr;return Q=Z,ee=Ht(),ee!==o?(ge=Be(),ge===o&&(ge=null),ge!==o?(le=Ht(),le!==o?(we=Be(),we===o&&(we=null),we!==o?(nt=st(),nt!==o?(wo=Be(),wo!==o?(xc=me(),xc!==o?(bc=Be(),bc===o&&(bc=null),bc!==o?(Dl=me(),Dl!==o?(rd=Be(),rd===o&&(rd=null),rd!==o?(Qr=_t(),Qr!==o?(ee=ce(ee,le,nt,xc,Dl,Qr),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o),Q}function _t(){var Q,ee,ge,le;return Q=Z,ee=st(),ee!==o?(ge=Be(),ge===o&&(ge=null),ge!==o?(le=st(),le!==o?(ee=de(ee,le),Q=ee):(Z=Q,Q=o)):(Z=Q,Q=o)):(Z=Q,Q=o),Q}function Ht(){var Q,ee;return Q=Z,ee=wi(),ee===o&&(ee=cr()),ee!==o&&(ee=se(ee)),Q=ee,Q}function st(){var Q,ee,ge,le;return Q=Z,ee=Z,ge=Vt(),ge===o&&(ge=null),ge!==o?(le=wi(),le!==o?(ge=[ge,le],ee=ge):(Z=ee,ee=o)):(Z=ee,ee=o),ee===o&&(ee=Z,ge=Vt(),ge===o&&(ge=null),ge!==o?(le=cr(),le!==o?(ge=[ge,le],ee=ge):(Z=ee,ee=o)):(Z=ee,ee=o)),ee!==o&&(ee=xe(ee)),Q=ee,Q}function me(){var Q,ee;return Q=Z,fe.test(s.charAt(Z))?(ee=s.charAt(Z),Z++):(ee=o,It(ye)),ee!==o&&(ee=_e(ee)),Q=ee,Q}function Be(){var Q,ee,ge,le,we;if(Q=Z,ee=[],ge=Ut(),ge!==o)for(;ge!==o;)ee.push(ge),ge=Ut();else ee=o;if(ee!==o)if(ge=ht(),ge===o&&(ge=null),ge!==o){for(le=[],we=Ut();we!==o;)le.push(we),we=Ut();le!==o?(ee=[ee,ge,le],Q=ee):(Z=Q,Q=o)}else Z=Q,Q=o;else Z=Q,Q=o;if(Q===o){if(Q=Z,ee=Z,ge=ht(),ge!==o){for(le=[],we=Ut();we!==o;)le.push(we),we=Ut();le!==o?(ge=[ge,le],ee=ge):(Z=ee,ee=o)}else Z=ee,ee=o;ee!==o&&(ee=Te()),Q=ee}return Q}function ht(){var Q;return s.charCodeAt(Z)===44?(Q=Ce,Z++):(Q=o,It(Le)),Q}function wi(){var Q,ee,ge,le;return Q=Z,ee=Z,ge=tr(),ge!==o?(le=ti(),le===o&&(le=null),le!==o?(ge=[ge,le],ee=ge):(Z=ee,ee=o)):(Z=ee,ee=o),ee===o&&(ee=Z,ge=cr(),ge!==o?(le=ti(),le!==o?(ge=[ge,le],ee=ge):(Z=ee,ee=o)):(Z=ee,ee=o)),ee!==o&&(ee=Ke(ee)),Q=ee,Q}function tr(){var Q,ee,ge,le,we;return Q=Z,ee=Z,ge=cr(),ge===o&&(ge=null),ge!==o?(s.charCodeAt(Z)===46?(le=Xe,Z++):(le=o,It(pt)),le!==o?(we=cr(),we!==o?(ge=[ge,le,we],ee=ge):(Z=ee,ee=o)):(Z=ee,ee=o)):(Z=ee,ee=o),ee===o&&(ee=Z,ge=cr(),ge!==o?(s.charCodeAt(Z)===46?(le=Xe,Z++):(le=o,It(pt)),le!==o?(ge=[ge,le],ee=ge):(Z=ee,ee=o)):(Z=ee,ee=o)),ee!==o&&(ee=Ke(ee)),Q=ee,Q}function ti(){var Q,ee,ge,le,we;return Q=Z,ee=Z,ct.test(s.charAt(Z))?(ge=s.charAt(Z),Z++):(ge=o,It(ot)),ge!==o?(le=Vt(),le===o&&(le=null),le!==o?(we=cr(),we!==o?(ge=[ge,le,we],ee=ge):(Z=ee,ee=o)):(Z=ee,ee=o)):(Z=ee,ee=o),ee!==o&&(ee=Ke(ee)),Q=ee,Q}function Vt(){var Q;return rt.test(s.charAt(Z))?(Q=s.charAt(Z),Z++):(Q=o,It(Dt)),Q}function cr(){var Q,ee,ge;if(Q=Z,ee=[],At.test(s.charAt(Z))?(ge=s.charAt(Z),Z++):(ge=o,It(he)),ge!==o)for(;ge!==o;)ee.push(ge),At.test(s.charAt(Z))?(ge=s.charAt(Z),Z++):(ge=o,It(he));else ee=o;return ee!==o&&(ee=ie(ee)),Q=ee,Q}function Ut(){var Q,ee;return Q=Z,Me.test(s.charAt(Z))?(ee=s.charAt(Z),Z++):(ee=o,It($e)),ee!==o&&(ee=Te()),Q=ee,Q}function ir(Q,ee){if(!ee)return[Q];for(var ge=[Q],le=0,we=ee.length;le<we;le++)ge[le+1]=ee[le][1];return ge}var Zi={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var ca in Zi)Zi[ca.toUpperCase()]=Zi[ca];function en(Q,ee){ee||(ee=[{}]);for(var ge=ee.length;ge--;){var le={code:Q,command:Zi[Q]};Q==Q.toLowerCase()&&(le.relative=!0);for(var we in ee[ge])le[we]=ee[ge][we];ee[ge]=le}return ee}if(Ve=c(),Ve!==o&&Z===s.length)return Ve;throw Ve!==o&&Z<s.length&&It(St()),Ei(lt,dt<s.length?s.charAt(dt):null,dt<s.length?bt(dt,dt+1):bt(dt,dt))}t.exports={SyntaxError:r,parse:n}}),Ste=Gm((e,t)=>{var i=YDe().parse;i.parseSVG=i,i.makeAbsolute=r,t.exports=i;function r(n){var s,a={x:0,y:0},o={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return n.forEach(function(l){l.command==="moveto"&&(s=l),l.x0=a.x,l.y0=a.y;for(var c in o)c in l&&(l[c]+=l.relative?l[o[c]]:0);"x"in l||(l.x=a.x),"y"in l||(l.y=a.y),l.relative=!1,l.code=l.code.toUpperCase(),l.command=="closepath"&&(l.x=s.x,l.y=s.y),a=l}),n}}),QDe=Gm((e,t)=>{t.exports=function(i,r){for(var n=i.split("."),s=r.split("."),a=0;a<3;a++){var o=Number(n[a]),l=Number(s[a]);if(o>l)return 1;if(l>o)return-1;if(!isNaN(o)&&isNaN(l))return 1;if(isNaN(o)&&!isNaN(l))return-1}return 0}}),iy="149",il={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},KDe=0,BF=1,ZDe=2,nk=1,$De=2,dx=3,lc=0,Ds=1,wa=2,Wn=0,fm=1,jF=2,NF=3,VF=4,JDe=5,T0=100,eIe=101,tIe=102,UF=103,FF=104,iIe=200,rIe=201,nIe=202,sIe=203,_te=204,Ete=205,aIe=206,oIe=207,lIe=208,cIe=209,uIe=210,hIe=0,dIe=1,fIe=2,iR=3,pIe=4,mIe=5,gIe=6,vIe=7,Ate=0,yIe=1,xIe=2,xu=0,bIe=1,wIe=2,SIe=3,_Ie=4,EIe=5,Tte=300,Cm=301,Mm=302,rR=303,nR=304,xw=306,Ph=1e3,qr=1001,sR=1002,_i=1003,HF=1004,PP=1005,yi=1006,AIe=1007,Tv=1008,Ta=1009,TIe=1010,CIe=1011,Cte=1012,MIe=1013,Dh=1014,wr=1015,Xh=1016,PIe=1017,DIe=1018,pm=1020,IIe=1021,$r=1023,RIe=1024,OIe=1025,mm=1026,Pm=1027,BE=1028,LIe=1029,BA=1030,kIe=1031,Mte=1033,DP=33776,IP=33777,RP=33778,OP=33779,GF=35840,WF=35841,qF=35842,XF=35843,zIe=36196,YF=37492,QF=37496,KF=37808,ZF=37809,$F=37810,JF=37811,e9=37812,t9=37813,i9=37814,r9=37815,n9=37816,s9=37817,a9=37818,o9=37819,l9=37820,c9=37821,LP=36492,BIe=36283,u9=36284,h9=36285,d9=36286,Pte=2200,Dte=2201,sk=2202,jA=2300,NA=2301,kP=2302,U0=2400,F0=2401,VA=2402,ak=2500,jIe=2501,cc=3e3,pi=3001,td=3200,Ite=3201,NIe=0,VIe=1,Qc="srgb",UA="srgb-linear",zP=7680,UIe=519,aR=35044,FIe=35048,oR="300 es",lR=1035,la=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let i=this._listeners[e];if(i!==void 0){let r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let i=t.slice(0);for(let r=0,n=i.length;r<n;r++)i[r].call(this,e);e.target=null}}},fa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],f9=1234567,Nx=Math.PI/180,Db=180/Math.PI;function xl(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(fa[e&255]+fa[e>>8&255]+fa[e>>16&255]+fa[e>>24&255]+"-"+fa[t&255]+fa[t>>8&255]+"-"+fa[t>>16&15|64]+fa[t>>24&255]+"-"+fa[i&63|128]+fa[i>>8&255]+"-"+fa[i>>16&255]+fa[i>>24&255]+fa[r&255]+fa[r>>8&255]+fa[r>>16&255]+fa[r>>24&255]).toLowerCase()}function Vn(e,t,i){return Math.max(t,Math.min(i,e))}function ok(e,t){return(e%t+t)%t}function HIe(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)}function GIe(e,t,i){return e!==t?(i-e)/(t-e):0}function Vx(e,t,i){return(1-i)*e+i*t}function WIe(e,t,i,r){return Vx(e,t,1-Math.exp(-i*r))}function qIe(e,t=1){return t-Math.abs(ok(e,t*2)-t)}function XIe(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))}function YIe(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(e*6-15)+10))}function QIe(e,t){return e+Math.floor(Math.random()*(t-e+1))}function KIe(e,t){return e+Math.random()*(t-e)}function ZIe(e){return e*(.5-Math.random())}function $Ie(e){e!==void 0&&(f9=e);let t=f9+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function JIe(e){return e*Nx}function eRe(e){return e*Db}function cR(e){return(e&e-1)===0&&e!==0}function Rte(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function FA(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function tRe(e,t,i,r,n){let s=Math.cos,a=Math.sin,o=s(i/2),l=a(i/2),c=s((t+r)/2),u=a((t+r)/2),h=s((t-r)/2),f=a((t-r)/2),m=s((r-t)/2),g=a((r-t)/2);switch(n){case"XYX":e.set(o*u,l*h,l*f,o*c);break;case"YZY":e.set(l*f,o*u,l*h,o*c);break;case"ZXZ":e.set(l*h,l*f,o*u,o*c);break;case"XZX":e.set(o*u,l*g,l*m,o*c);break;case"YXY":e.set(l*m,o*u,l*g,o*c);break;case"ZYZ":e.set(l*g,l*m,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function Ih(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Lr(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var wt=Object.freeze({__proto__:null,DEG2RAD:Nx,RAD2DEG:Db,ceilPowerOfTwo:Rte,clamp:Vn,damp:WIe,degToRad:JIe,denormalize:Ih,euclideanModulo:ok,floorPowerOfTwo:FA,generateUUID:xl,inverseLerp:GIe,isPowerOfTwo:cR,lerp:Vx,mapLinear:HIe,normalize:Lr,pingpong:qIe,radToDeg:eRe,randFloat:KIe,randFloatSpread:ZIe,randInt:QIe,seededRandom:$Ie,setQuaternionFromProperEuler:tRe,smootherstep:YIe,smoothstep:XIe}),pe=class{constructor(e=0,t=0){pe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),n=this.x-e.x,s=this.y-e.y;return this.x=n*i-s*r+e.x,this.y=n*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Hn=class{constructor(){Hn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,n,s,a,o,l){let c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=n,c[5]=o,c[6]=i,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,n=this.elements,s=i[0],a=i[3],o=i[6],l=i[1],c=i[4],u=i[7],h=i[2],f=i[5],m=i[8],g=r[0],v=r[3],x=r[6],b=r[1],S=r[4],_=r[7],A=r[2],M=r[5],C=r[8];return n[0]=s*g+a*b+o*A,n[3]=s*v+a*S+o*M,n[6]=s*x+a*_+o*C,n[1]=l*g+c*b+u*A,n[4]=l*v+c*S+u*M,n[7]=l*x+c*_+u*C,n[2]=h*g+f*b+m*A,n[5]=h*v+f*S+m*M,n[8]=h*x+f*_+m*C,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*s*c-t*a*l-i*n*c+i*a*o+r*n*l-r*s*o}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=c*s-a*l,h=a*o-c*n,f=l*n-s*o,m=t*u+i*h+r*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);let g=1/m;return e[0]=u*g,e[1]=(r*l-c*i)*g,e[2]=(a*i-r*s)*g,e[3]=h*g,e[4]=(c*t-r*o)*g,e[5]=(r*n-a*t)*g,e[6]=f*g,e[7]=(i*o-l*t)*g,e[8]=(s*t-i*n)*g,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,n,s,a){let o=Math.cos(n),l=Math.sin(n);return this.set(i*o,i*l,-i*(o*s+l*a)+s+e,-r*l,r*o,-r*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(BP.makeScale(e,t)),this}rotate(e){return this.premultiply(BP.makeRotation(-e)),this}translate(e,t){return this.premultiply(BP.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},BP=new Hn;function Ote(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var iRe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function jS(e,t){return new iRe[e](t)}function Ib(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function rRe(e,t,i){return new Promise(function(r,n){function s(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:n();break;case e.TIMEOUT_EXPIRED:setTimeout(s,i);break;default:r()}}setTimeout(s,i)})}function gm(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function jE(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var jP={[Qc]:{[UA]:gm},[UA]:{[Qc]:jE}},La={legacyMode:!0,get workingColorSpace(){return UA},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,i){if(this.legacyMode||t===i||!t||!i)return e;if(jP[t]&&jP[t][i]!==void 0){let r=jP[t][i];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Lte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Jn={r:0,g:0,b:0},kl={h:0,s:0,l:0},NS={h:0,s:0,l:0};function NP(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*6*(2/3-i):e}function VS(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var qt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Qc){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,La.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=La.workingColorSpace){return this.r=e,this.g=t,this.b=i,La.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=La.workingColorSpace){if(e=ok(e,1),t=Vn(t,0,1),i=Vn(i,0,1),t===0)this.r=this.g=this.b=i;else{let n=i<=.5?i*(1+t):i+t-i*t,s=2*i-n;this.r=NP(s,n,e+1/3),this.g=NP(s,n,e),this.b=NP(s,n,e-1/3)}return La.toWorkingColorSpace(this,r),this}setStyle(e,t=Qc){function i(n){n!==void 0&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let n,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,La.toWorkingColorSpace(this,t),i(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,La.toWorkingColorSpace(this,t),i(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){let o=parseFloat(n[1])/360,l=parseFloat(n[2])/100,c=parseFloat(n[3])/100;return i(n[4]),this.setHSL(o,l,c,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let n=r[1],s=n.length;if(s===3)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,La.toWorkingColorSpace(this,t),this;if(s===6)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,La.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Qc){let i=Lte[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=gm(e.r),this.g=gm(e.g),this.b=gm(e.b),this}copyLinearToSRGB(e){return this.r=jE(e.r),this.g=jE(e.g),this.b=jE(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Qc){return La.fromWorkingColorSpace(VS(this,Jn),e),Vn(Jn.r*255,0,255)<<16^Vn(Jn.g*255,0,255)<<8^Vn(Jn.b*255,0,255)<<0}getHexString(e=Qc){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=La.workingColorSpace){La.fromWorkingColorSpace(VS(this,Jn),t);let i=Jn.r,r=Jn.g,n=Jn.b,s=Math.max(i,r,n),a=Math.min(i,r,n),o,l,c=(a+s)/2;if(a===s)o=0,l=0;else{let u=s-a;switch(l=c<=.5?u/(s+a):u/(2-s-a),s){case i:o=(r-n)/u+(r<n?6:0);break;case r:o=(n-i)/u+2;break;case n:o=(i-r)/u+4;break}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=La.workingColorSpace){return La.fromWorkingColorSpace(VS(this,Jn),t),e.r=Jn.r,e.g=Jn.g,e.b=Jn.b,e}getStyle(e=Qc){return La.fromWorkingColorSpace(VS(this,Jn),e),e!==Qc?`color(${e} ${Jn.r} ${Jn.g} ${Jn.b})`:`rgb(${Jn.r*255|0},${Jn.g*255|0},${Jn.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(kl),kl.h+=e,kl.s+=t,kl.l+=i,this.setHSL(kl.h,kl.s,kl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(kl),e.getHSL(NS);let i=Vx(kl.h,NS.h,t),r=Vx(kl.s,NS.s,t),n=Vx(kl.l,NS.l,t);return this.setHSL(i,r,n),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};qt.NAMES=Lte;var Vg,kte=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Vg===void 0&&(Vg=Ib("canvas")),Vg.width=e.width,Vg.height=e.height;let i=Vg.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Vg}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Ib("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),n=r.data;for(let s=0;s<n.length;s++)n[s]=gm(n[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(gm(t[i]/255)*255):t[i]=gm(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},zte=class{constructor(e=null){this.isSource=!0,this.uuid=xl(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let n;if(Array.isArray(r)){n=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?n.push(VP(r[s].image)):n.push(VP(r[s]))}else n=VP(r);i.url=n}return t||(e.images[this.uuid]=i),i}};function VP(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?kte.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var nRe=0,on=class extends la{constructor(e=on.DEFAULT_IMAGE,t=on.DEFAULT_MAPPING,i=qr,r=qr,n=yi,s=Tv,a=$r,o=Ta,l=on.DEFAULT_ANISOTROPY,c=cc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:nRe++}),this.uuid=xl(),this.name="",this.source=new zte(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=n,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new pe(0,0),this.repeat=new pe(1,1),this.center=new pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Hn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Tte)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ph:e.x=e.x-Math.floor(e.x);break;case qr:e.x=e.x<0?0:1;break;case sR:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ph:e.y=e.y-Math.floor(e.y);break;case qr:e.y=e.y<0?0:1;break;case sR:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};on.DEFAULT_IMAGE=null;on.DEFAULT_MAPPING=Tte;on.DEFAULT_ANISOTROPY=1;var ni=class{constructor(e=0,t=0,i=0,r=1){ni.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,n=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*n,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*n,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*n,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,n,s=e.elements,a=s[0],o=s[4],l=s[8],c=s[1],u=s[5],h=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(o-c)<.01&&Math.abs(l-f)<.01&&Math.abs(h-m)<.01){if(Math.abs(o+c)<.1&&Math.abs(l+f)<.1&&Math.abs(h+m)<.1&&Math.abs(a+u+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let x=(a+1)/2,b=(u+1)/2,S=(g+1)/2,_=(o+c)/4,A=(l+f)/4,M=(h+m)/4;return x>b&&x>S?x<.01?(i=0,r=.707106781,n=.707106781):(i=Math.sqrt(x),r=_/i,n=A/i):b>S?b<.01?(i=.707106781,r=0,n=.707106781):(r=Math.sqrt(b),i=_/r,n=M/r):S<.01?(i=.707106781,r=.707106781,n=0):(n=Math.sqrt(S),i=A/n,r=M/n),this.set(i,r,n,t),this}let v=Math.sqrt((m-h)*(m-h)+(l-f)*(l-f)+(c-o)*(c-o));return Math.abs(v)<.001&&(v=1),this.x=(m-h)/v,this.y=(l-f)/v,this.z=(c-o)/v,this.w=Math.acos((a+u+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Ni=class extends la{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ni(0,0,e,t),this.scissorTest=!1,this.viewport=new ni(0,0,e,t);let r={width:e,height:t,depth:1};this.texture=new on(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:yi,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new zte(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Bte=class extends on{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=_i,this.minFilter=_i,this.wrapR=qr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},sRe=class extends on{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=_i,this.minFilter=_i,this.wrapR=qr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},jte=class extends Ni{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;let n=this.texture;this.texture=[];for(let s=0;s<i;s++)this.texture[s]=n.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,n=this.texture.length;r<n;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},Jt=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,n,s,a){let o=i[r+0],l=i[r+1],c=i[r+2],u=i[r+3],h=n[s+0],f=n[s+1],m=n[s+2],g=n[s+3];if(a===0){e[t+0]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u;return}if(a===1){e[t+0]=h,e[t+1]=f,e[t+2]=m,e[t+3]=g;return}if(u!==g||o!==h||l!==f||c!==m){let v=1-a,x=o*h+l*f+c*m+u*g,b=x>=0?1:-1,S=1-x*x;if(S>Number.EPSILON){let A=Math.sqrt(S),M=Math.atan2(A,x*b);v=Math.sin(v*M)/A,a=Math.sin(a*M)/A}let _=a*b;if(o=o*v+h*_,l=l*v+f*_,c=c*v+m*_,u=u*v+g*_,v===1-a){let A=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=A,l*=A,c*=A,u*=A}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,r,n,s){let a=i[r],o=i[r+1],l=i[r+2],c=i[r+3],u=n[s],h=n[s+1],f=n[s+2],m=n[s+3];return e[t]=a*m+c*u+o*f-l*h,e[t+1]=o*m+c*h+l*u-a*f,e[t+2]=l*m+c*f+a*h-o*u,e[t+3]=c*m-a*u-o*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let i=e._x,r=e._y,n=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(i/2),c=a(r/2),u=a(n/2),h=o(i/2),f=o(r/2),m=o(n/2);switch(s){case"XYZ":this._x=h*c*u+l*f*m,this._y=l*f*u-h*c*m,this._z=l*c*m+h*f*u,this._w=l*c*u-h*f*m;break;case"YXZ":this._x=h*c*u+l*f*m,this._y=l*f*u-h*c*m,this._z=l*c*m-h*f*u,this._w=l*c*u+h*f*m;break;case"ZXY":this._x=h*c*u-l*f*m,this._y=l*f*u+h*c*m,this._z=l*c*m+h*f*u,this._w=l*c*u-h*f*m;break;case"ZYX":this._x=h*c*u-l*f*m,this._y=l*f*u+h*c*m,this._z=l*c*m-h*f*u,this._w=l*c*u+h*f*m;break;case"YZX":this._x=h*c*u+l*f*m,this._y=l*f*u+h*c*m,this._z=l*c*m-h*f*u,this._w=l*c*u-h*f*m;break;case"XZY":this._x=h*c*u-l*f*m,this._y=l*f*u-h*c*m,this._z=l*c*m+h*f*u,this._w=l*c*u+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],n=t[8],s=t[1],a=t[5],o=t[9],l=t[2],c=t[6],u=t[10],h=i+a+u;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(c-o)*f,this._y=(n-l)*f,this._z=(s-r)*f}else if(i>a&&i>u){let f=2*Math.sqrt(1+i-a-u);this._w=(c-o)/f,this._x=.25*f,this._y=(r+s)/f,this._z=(n+l)/f}else if(a>u){let f=2*Math.sqrt(1+a-i-u);this._w=(n-l)/f,this._x=(r+s)/f,this._y=.25*f,this._z=(o+c)/f}else{let f=2*Math.sqrt(1+u-i-a);this._w=(s-r)/f,this._x=(n+l)/f,this._y=(o+c)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vn(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,n=e._z,s=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=i*c+s*a+r*l-n*o,this._y=r*c+s*o+n*a-i*l,this._z=n*c+s*l+i*o-r*a,this._w=s*c-i*a-r*o-n*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,n=this._z,s=this._w,a=s*e._w+i*e._x+r*e._y+n*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=n,this;let o=1-a*a;if(o<=Number.EPSILON){let f=1-t;return this._w=f*s+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(o),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=s*u+this._w*h,this._x=i*u+this._x*h,this._y=r*u+this._y*h,this._z=n*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(n),i*Math.cos(n),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},j=class{constructor(e=0,t=0,i=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(p9.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(p9.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6]*r,this.y=n[1]*t+n[4]*i+n[7]*r,this.z=n[2]*t+n[5]*i+n[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,n=e.elements,s=1/(n[3]*t+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*t+n[4]*i+n[8]*r+n[12])*s,this.y=(n[1]*t+n[5]*i+n[9]*r+n[13])*s,this.z=(n[2]*t+n[6]*i+n[10]*r+n[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,n=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*r-a*i,c=o*i+a*t-n*r,u=o*r+n*i-s*t,h=-n*t-s*i-a*r;return this.x=l*o+h*-n+c*-a-u*-s,this.y=c*o+h*-s+u*-n-l*-a,this.z=u*o+h*-a+l*-s-c*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r,this.y=n[1]*t+n[5]*i+n[9]*r,this.z=n[2]*t+n[6]*i+n[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,n=e.z,s=t.x,a=t.y,o=t.z;return this.x=r*o-n*a,this.y=n*s-i*o,this.z=i*a-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return UP.copy(this).projectOnVector(e),this.sub(UP)}reflect(e){return this.sub(UP.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Vn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},UP=new j,p9=new Jt,Pn=class{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=3){let c=e[o],u=e[o+1],h=e[o+2];c<t&&(t=c),u<i&&(i=u),h<r&&(r=h),c>n&&(n=c),u>s&&(s=u),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(n,s,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.count;o<l;o++){let c=e.getX(o),u=e.getY(o),h=e.getZ(o);c<t&&(t=c),u<i&&(i=u),h<r&&(r=h),c>n&&(n=c),u>s&&(s=u),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(n,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=Tp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){let n=i.attributes.position;for(let s=0,a=n.count;s<a;s++)Tp.fromBufferAttribute(n,s).applyMatrix4(e.matrixWorld),this.expandByPoint(Tp)}else i.boundingBox===null&&i.computeBoundingBox(),FP.copy(i.boundingBox),FP.applyMatrix4(e.matrixWorld),this.union(FP);let r=e.children;for(let n=0,s=r.length;n<s;n++)this.expandByObject(r[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Tp),Tp.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(P1),US.subVectors(this.max,P1),Ug.subVectors(e.a,P1),Fg.subVectors(e.b,P1),Hg.subVectors(e.c,P1),Cd.subVectors(Fg,Ug),Md.subVectors(Hg,Fg),Cp.subVectors(Ug,Hg);let t=[0,-Cd.z,Cd.y,0,-Md.z,Md.y,0,-Cp.z,Cp.y,Cd.z,0,-Cd.x,Md.z,0,-Md.x,Cp.z,0,-Cp.x,-Cd.y,Cd.x,0,-Md.y,Md.x,0,-Cp.y,Cp.x,0];return!HP(t,Ug,Fg,Hg,US)||(t=[1,0,0,0,1,0,0,0,1],!HP(t,Ug,Fg,Hg,US))?!1:(FS.crossVectors(Cd,Md),t=[FS.x,FS.y,FS.z],HP(t,Ug,Fg,Hg,US))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Tp.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Tp).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(nh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),nh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),nh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),nh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),nh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),nh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),nh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),nh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(nh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},nh=[new j,new j,new j,new j,new j,new j,new j,new j],Tp=new j,FP=new Pn,Ug=new j,Fg=new j,Hg=new j,Cd=new j,Md=new j,Cp=new j,P1=new j,US=new j,FS=new j,Mp=new j;function HP(e,t,i,r,n){for(let s=0,a=e.length-3;s<=a;s+=3){Mp.fromArray(e,s);let o=n.x*Math.abs(Mp.x)+n.y*Math.abs(Mp.y)+n.z*Math.abs(Mp.z),l=t.dot(Mp),c=i.dot(Mp),u=r.dot(Mp);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}var aRe=new Pn,D1=new j,GP=new j,yo=class{constructor(e=new j,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):aRe.setFromPoints(e).getCenter(i);let r=0;for(let n=0,s=e.length;n<s;n++)r=Math.max(r,i.distanceToSquared(e[n]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;D1.subVectors(e,this.center);let t=D1.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(D1,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(GP.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(D1.copy(e.center).add(GP)),this.expandByPoint(D1.copy(e.center).sub(GP))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},sh=new j,WP=new j,HS=new j,Pd=new j,qP=new j,GS=new j,XP=new j,ry=class{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,sh)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=sh.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(sh.copy(this.direction).multiplyScalar(t).add(this.origin),sh.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){WP.copy(e).add(t).multiplyScalar(.5),HS.copy(t).sub(e).normalize(),Pd.copy(this.origin).sub(WP);let n=e.distanceTo(t)*.5,s=-this.direction.dot(HS),a=Pd.dot(this.direction),o=-Pd.dot(HS),l=Pd.lengthSq(),c=Math.abs(1-s*s),u,h,f,m;if(c>0)if(u=s*o-a,h=s*a-o,m=n*c,u>=0)if(h>=-m)if(h<=m){let g=1/c;u*=g,h*=g,f=u*(u+s*h+2*a)+h*(s*u+h+2*o)+l}else h=n,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*o)+l;else h=-n,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*o)+l;else h<=-m?(u=Math.max(0,-(-s*n+a)),h=u>0?-n:Math.min(Math.max(-n,-o),n),f=-u*u+h*(h+2*o)+l):h<=m?(u=0,h=Math.min(Math.max(-n,-o),n),f=h*(h+2*o)+l):(u=Math.max(0,-(s*n+a)),h=u>0?n:Math.min(Math.max(-n,-o),n),f=-u*u+h*(h+2*o)+l);else h=s>0?-n:n,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*o)+l;return i&&i.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(HS).multiplyScalar(h).add(WP),f}intersectSphere(e,t){sh.subVectors(e.center,this.origin);let i=sh.dot(this.direction),r=sh.dot(sh)-i*i,n=e.radius*e.radius;if(r>n)return null;let s=Math.sqrt(n-r),a=i-s,o=i+s;return a<0&&o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,n,s,a,o,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(n=(e.min.y-h.y)*c,s=(e.max.y-h.y)*c):(n=(e.max.y-h.y)*c,s=(e.min.y-h.y)*c),i>s||n>r||((n>i||isNaN(i))&&(i=n),(s<r||isNaN(r))&&(r=s),u>=0?(a=(e.min.z-h.z)*u,o=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,o=(e.min.z-h.z)*u),i>o||a>r)||((a>i||i!==i)&&(i=a),(o<r||r!==r)&&(r=o),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,sh)!==null}intersectTriangle(e,t,i,r,n){qP.subVectors(t,e),GS.subVectors(i,e),XP.crossVectors(qP,GS);let s=this.direction.dot(XP),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Pd.subVectors(this.origin,e);let o=a*this.direction.dot(GS.crossVectors(Pd,GS));if(o<0)return null;let l=a*this.direction.dot(qP.cross(Pd));if(l<0||o+l>s)return null;let c=-a*Pd.dot(XP);return c<0?null:this.at(c/s,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},tt=class{constructor(){tt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,n,s,a,o,l,c,u,h,f,m,g,v){let x=this.elements;return x[0]=e,x[4]=t,x[8]=i,x[12]=r,x[1]=n,x[5]=s,x[9]=a,x[13]=o,x[2]=l,x[6]=c,x[10]=u,x[14]=h,x[3]=f,x[7]=m,x[11]=g,x[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new tt().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/Gg.setFromMatrixColumn(e,0).length(),n=1/Gg.setFromMatrixColumn(e,1).length(),s=1/Gg.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*n,t[5]=i[5]*n,t[6]=i[6]*n,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,n=e.z,s=Math.cos(i),a=Math.sin(i),o=Math.cos(r),l=Math.sin(r),c=Math.cos(n),u=Math.sin(n);if(e.order==="XYZ"){let h=s*c,f=s*u,m=a*c,g=a*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=f+m*l,t[5]=h-g*l,t[9]=-a*o,t[2]=g-h*l,t[6]=m+f*l,t[10]=s*o}else if(e.order==="YXZ"){let h=o*c,f=o*u,m=l*c,g=l*u;t[0]=h+g*a,t[4]=m*a-f,t[8]=s*l,t[1]=s*u,t[5]=s*c,t[9]=-a,t[2]=f*a-m,t[6]=g+h*a,t[10]=s*o}else if(e.order==="ZXY"){let h=o*c,f=o*u,m=l*c,g=l*u;t[0]=h-g*a,t[4]=-s*u,t[8]=m+f*a,t[1]=f+m*a,t[5]=s*c,t[9]=g-h*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if(e.order==="ZYX"){let h=s*c,f=s*u,m=a*c,g=a*u;t[0]=o*c,t[4]=m*l-f,t[8]=h*l+g,t[1]=o*u,t[5]=g*l+h,t[9]=f*l-m,t[2]=-l,t[6]=a*o,t[10]=s*o}else if(e.order==="YZX"){let h=s*o,f=s*l,m=a*o,g=a*l;t[0]=o*c,t[4]=g-h*u,t[8]=m*u+f,t[1]=u,t[5]=s*c,t[9]=-a*c,t[2]=-l*c,t[6]=f*u+m,t[10]=h-g*u}else if(e.order==="XZY"){let h=s*o,f=s*l,m=a*o,g=a*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=h*u+g,t[5]=s*c,t[9]=f*u-m,t[2]=m*u-f,t[6]=a*c,t[10]=g*u+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(oRe,e,lRe)}lookAt(e,t,i){let r=this.elements;return Do.subVectors(e,t),Do.lengthSq()===0&&(Do.z=1),Do.normalize(),Dd.crossVectors(i,Do),Dd.lengthSq()===0&&(Math.abs(i.z)===1?Do.x+=1e-4:Do.z+=1e-4,Do.normalize(),Dd.crossVectors(i,Do)),Dd.normalize(),WS.crossVectors(Do,Dd),r[0]=Dd.x,r[4]=WS.x,r[8]=Do.x,r[1]=Dd.y,r[5]=WS.y,r[9]=Do.y,r[2]=Dd.z,r[6]=WS.z,r[10]=Do.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,n=this.elements,s=i[0],a=i[4],o=i[8],l=i[12],c=i[1],u=i[5],h=i[9],f=i[13],m=i[2],g=i[6],v=i[10],x=i[14],b=i[3],S=i[7],_=i[11],A=i[15],M=r[0],C=r[4],D=r[8],T=r[12],R=r[1],O=r[5],L=r[9],k=r[13],B=r[2],V=r[6],$=r[10],q=r[14],Y=r[3],X=r[7],ne=r[11],F=r[15];return n[0]=s*M+a*R+o*B+l*Y,n[4]=s*C+a*O+o*V+l*X,n[8]=s*D+a*L+o*$+l*ne,n[12]=s*T+a*k+o*q+l*F,n[1]=c*M+u*R+h*B+f*Y,n[5]=c*C+u*O+h*V+f*X,n[9]=c*D+u*L+h*$+f*ne,n[13]=c*T+u*k+h*q+f*F,n[2]=m*M+g*R+v*B+x*Y,n[6]=m*C+g*O+v*V+x*X,n[10]=m*D+g*L+v*$+x*ne,n[14]=m*T+g*k+v*q+x*F,n[3]=b*M+S*R+_*B+A*Y,n[7]=b*C+S*O+_*V+A*X,n[11]=b*D+S*L+_*$+A*ne,n[15]=b*T+S*k+_*q+A*F,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],n=e[12],s=e[1],a=e[5],o=e[9],l=e[13],c=e[2],u=e[6],h=e[10],f=e[14],m=e[3],g=e[7],v=e[11],x=e[15];return m*(+n*o*u-r*l*u-n*a*h+i*l*h+r*a*f-i*o*f)+g*(+t*o*f-t*l*h+n*s*h-r*s*f+r*l*c-n*o*c)+v*(+t*l*u-t*a*f-n*s*u+i*s*f+n*a*c-i*l*c)+x*(-r*a*c-t*o*u+t*a*h+r*s*u-i*s*h+i*o*c)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11],m=e[12],g=e[13],v=e[14],x=e[15],b=u*v*l-g*h*l+g*o*f-a*v*f-u*o*x+a*h*x,S=m*h*l-c*v*l-m*o*f+s*v*f+c*o*x-s*h*x,_=c*g*l-m*u*l+m*a*f-s*g*f-c*a*x+s*u*x,A=m*u*o-c*g*o-m*a*h+s*g*h+c*a*v-s*u*v,M=t*b+i*S+r*_+n*A;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let C=1/M;return e[0]=b*C,e[1]=(g*h*n-u*v*n-g*r*f+i*v*f+u*r*x-i*h*x)*C,e[2]=(a*v*n-g*o*n+g*r*l-i*v*l-a*r*x+i*o*x)*C,e[3]=(u*o*n-a*h*n-u*r*l+i*h*l+a*r*f-i*o*f)*C,e[4]=S*C,e[5]=(c*v*n-m*h*n+m*r*f-t*v*f-c*r*x+t*h*x)*C,e[6]=(m*o*n-s*v*n-m*r*l+t*v*l+s*r*x-t*o*x)*C,e[7]=(s*h*n-c*o*n+c*r*l-t*h*l-s*r*f+t*o*f)*C,e[8]=_*C,e[9]=(m*u*n-c*g*n-m*i*f+t*g*f+c*i*x-t*u*x)*C,e[10]=(s*g*n-m*a*n+m*i*l-t*g*l-s*i*x+t*a*x)*C,e[11]=(c*a*n-s*u*n-c*i*l+t*u*l+s*i*f-t*a*f)*C,e[12]=A*C,e[13]=(c*g*r-m*u*r+m*i*h-t*g*h-c*i*v+t*u*v)*C,e[14]=(m*a*r-s*g*r-m*i*o+t*g*o+s*i*v-t*a*v)*C,e[15]=(s*u*r-c*a*r+c*i*o-t*u*o-s*i*h+t*a*h)*C,this}scale(e){let t=this.elements,i=e.x,r=e.y,n=e.z;return t[0]*=i,t[4]*=r,t[8]*=n,t[1]*=i,t[5]*=r,t[9]*=n,t[2]*=i,t[6]*=r,t[10]*=n,t[3]*=i,t[7]*=r,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),n=1-i,s=e.x,a=e.y,o=e.z,l=n*s,c=n*a;return this.set(l*s+i,l*a-r*o,l*o+r*a,0,l*a+r*o,c*a+i,c*o-r*s,0,l*o-r*a,c*o+r*s,n*o*o+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,n,s){return this.set(1,i,n,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,n=t._x,s=t._y,a=t._z,o=t._w,l=n+n,c=s+s,u=a+a,h=n*l,f=n*c,m=n*u,g=s*c,v=s*u,x=a*u,b=o*l,S=o*c,_=o*u,A=i.x,M=i.y,C=i.z;return r[0]=(1-(g+x))*A,r[1]=(f+_)*A,r[2]=(m-S)*A,r[3]=0,r[4]=(f-_)*M,r[5]=(1-(h+x))*M,r[6]=(v+b)*M,r[7]=0,r[8]=(m+S)*C,r[9]=(v-b)*C,r[10]=(1-(h+g))*C,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,n=Gg.set(r[0],r[1],r[2]).length(),s=Gg.set(r[4],r[5],r[6]).length(),a=Gg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(n=-n),e.x=r[12],e.y=r[13],e.z=r[14],zl.copy(this);let o=1/n,l=1/s,c=1/a;return zl.elements[0]*=o,zl.elements[1]*=o,zl.elements[2]*=o,zl.elements[4]*=l,zl.elements[5]*=l,zl.elements[6]*=l,zl.elements[8]*=c,zl.elements[9]*=c,zl.elements[10]*=c,t.setFromRotationMatrix(zl),i.x=n,i.y=s,i.z=a,this}makePerspective(e,t,i,r,n,s){let a=this.elements,o=2*n/(t-e),l=2*n/(i-r),c=(t+e)/(t-e),u=(i+r)/(i-r),h=-(s+n)/(s-n),f=-2*s*n/(s-n);return a[0]=o,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,n,s){let a=this.elements,o=1/(t-e),l=1/(i-r),c=1/(s-n),u=(t+e)*o,h=(i+r)*l,f=(s+n)*c;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Gg=new j,zl=new tt,oRe=new j(0,0,0),lRe=new j(1,1,1),Dd=new j,WS=new j,Do=new j,m9=new tt,g9=new Jt,as=class{constructor(e=0,t=0,i=0,r=as.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){let r=e.elements,n=r[0],s=r[4],a=r[8],o=r[1],l=r[5],c=r[9],u=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(Vn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Vn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,n),this._z=0);break;case"ZXY":this._x=Math.asin(Vn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-Vn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Vn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,n)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Vn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return m9.makeRotationFromQuaternion(e),this.setFromRotationMatrix(m9,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return g9.setFromEuler(this),this.setFromQuaternion(g9,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};as.DEFAULT_ORDER="XYZ";var lk=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},cRe=0,v9=new j,Wg=new Jt,ah=new tt,qS=new j,I1=new j,uRe=new j,hRe=new Jt,y9=new j(1,0,0),x9=new j(0,1,0),b9=new j(0,0,1),dRe={type:"added"},w9={type:"removed"},mr=class extends la{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:cRe++}),this.uuid=xl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=mr.DEFAULT_UP.clone();let e=new j,t=new as,i=new Jt,r=new j(1,1,1);function n(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(n),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new tt},normalMatrix:{value:new Hn}}),this.matrix=new tt,this.matrixWorld=new tt,this.matrixAutoUpdate=mr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=mr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new lk,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Wg.setFromAxisAngle(e,t),this.quaternion.multiply(Wg),this}rotateOnWorldAxis(e,t){return Wg.setFromAxisAngle(e,t),this.quaternion.premultiply(Wg),this}rotateX(e){return this.rotateOnAxis(y9,e)}rotateY(e){return this.rotateOnAxis(x9,e)}rotateZ(e){return this.rotateOnAxis(b9,e)}translateOnAxis(e,t){return v9.copy(e).applyQuaternion(this.quaternion),this.position.add(v9.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(y9,e)}translateY(e){return this.translateOnAxis(x9,e)}translateZ(e){return this.translateOnAxis(b9,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ah.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?qS.copy(e):qS.set(e,t,i);let r=this.parent;this.updateWorldMatrix(!0,!1),I1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ah.lookAt(I1,qS,this.up):ah.lookAt(qS,I1,this.up),this.quaternion.setFromRotationMatrix(ah),r&&(ah.extractRotation(r.matrixWorld),Wg.setFromRotationMatrix(ah),this.quaternion.premultiply(Wg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(dRe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(w9)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(w9)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ah.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ah.multiply(e.parent.matrixWorld)),e.applyMatrix4(ah),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){let n=this.children[i].getObjectByProperty(e,t);if(n!==void 0)return n}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,n=this.children.length;r<n;r++){let s=this.children[r].getObjectsByProperty(e,t);s.length>0&&(i=i.concat(s))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(I1,e,uRe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(I1,hRe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let i=0,r=t.length;i<r;i++){let n=t[i];(n.matrixWorldAutoUpdate===!0||e===!0)&&n.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let r=this.children;for(let n=0,s=r.length;n<s;n++){let a=r[n];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function n(a,o){return a[o.uuid]===void 0&&(a[o.uuid]=o.toJSON(e)),o.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=n(e.geometries,this.geometry);let a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){let o=a.shapes;if(Array.isArray(o))for(let l=0,c=o.length;l<c;l++){let u=o[l];n(e.shapes,u)}else n(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let a=[];for(let o=0,l=this.material.length;o<l;o++)a.push(n(e.materials,this.material[o]));r.material=a}else r.material=n(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){let o=this.animations[a];r.animations.push(n(e.animations,o))}}if(t){let a=s(e.geometries),o=s(e.materials),l=s(e.textures),c=s(e.images),u=s(e.shapes),h=s(e.skeletons),f=s(e.animations),m=s(e.nodes);a.length>0&&(i.geometries=a),o.length>0&&(i.materials=o),l.length>0&&(i.textures=l),c.length>0&&(i.images=c),u.length>0&&(i.shapes=u),h.length>0&&(i.skeletons=h),f.length>0&&(i.animations=f),m.length>0&&(i.nodes=m)}return i.object=r,i;function s(a){let o=[];for(let l in a){let c=a[l];delete c.metadata,o.push(c)}return o}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){let r=e.children[i];this.add(r.clone())}return this}};mr.DEFAULT_UP=new j(0,1,0);mr.DEFAULT_MATRIX_AUTO_UPDATE=!0;mr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Bl=new j,oh=new j,YP=new j,lh=new j,qg=new j,Xg=new j,S9=new j,QP=new j,KP=new j,ZP=new j,Js=class{constructor(e=new j,t=new j,i=new j){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Bl.subVectors(e,t),r.cross(Bl);let n=r.lengthSq();return n>0?r.multiplyScalar(1/Math.sqrt(n)):r.set(0,0,0)}static getBarycoord(e,t,i,r,n){Bl.subVectors(r,t),oh.subVectors(i,t),YP.subVectors(e,t);let s=Bl.dot(Bl),a=Bl.dot(oh),o=Bl.dot(YP),l=oh.dot(oh),c=oh.dot(YP),u=s*l-a*a;if(u===0)return n.set(-2,-1,-1);let h=1/u,f=(l*o-a*c)*h,m=(s*c-a*o)*h;return n.set(1-f-m,m,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,lh),lh.x>=0&&lh.y>=0&&lh.x+lh.y<=1}static getUV(e,t,i,r,n,s,a,o){return this.getBarycoord(e,t,i,r,lh),o.set(0,0),o.addScaledVector(n,lh.x),o.addScaledVector(s,lh.y),o.addScaledVector(a,lh.z),o}static isFrontFacing(e,t,i,r){return Bl.subVectors(i,t),oh.subVectors(e,t),Bl.cross(oh).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Bl.subVectors(this.c,this.b),oh.subVectors(this.a,this.b),Bl.cross(oh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Js.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Js.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,n){return Js.getUV(e,this.a,this.b,this.c,t,i,r,n)}containsPoint(e){return Js.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Js.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,n=this.c,s,a;qg.subVectors(r,i),Xg.subVectors(n,i),QP.subVectors(e,i);let o=qg.dot(QP),l=Xg.dot(QP);if(o<=0&&l<=0)return t.copy(i);KP.subVectors(e,r);let c=qg.dot(KP),u=Xg.dot(KP);if(c>=0&&u<=c)return t.copy(r);let h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return s=o/(o-c),t.copy(i).addScaledVector(qg,s);ZP.subVectors(e,n);let f=qg.dot(ZP),m=Xg.dot(ZP);if(m>=0&&f<=m)return t.copy(n);let g=f*l-o*m;if(g<=0&&l>=0&&m<=0)return a=l/(l-m),t.copy(i).addScaledVector(Xg,a);let v=c*m-f*u;if(v<=0&&u-c>=0&&f-m>=0)return S9.subVectors(n,r),a=(u-c)/(u-c+(f-m)),t.copy(r).addScaledVector(S9,a);let x=1/(v+g+h);return s=g*x,a=h*x,t.copy(i).addScaledVector(qg,s).addScaledVector(Xg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},fRe=0,bw=class extends la{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:fRe++}),this.uuid=xl(),this.name="",this.type="Material",this.blending=fm,this.side=lc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=_te,this.blendDst=Ete,this.blendEquation=T0,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=iR,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=UIe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=zP,this.stencilZFail=zP,this.stencilZPass=zP,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==fm&&(i.blending=this.blending),this.side!==lc&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(n){let s=[];for(let a in n){let o=n[a];delete o.metadata,s.push(o)}return s}if(t){let n=r(e.textures),s=r(e.images);n.length>0&&(i.textures=n),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let n=0;n!==r;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Yh=class extends bw{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ate,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Ln=new j,XS=new pe,Xt=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=aR,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,n=this.itemSize;r<n;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)XS.fromBufferAttribute(this,t),XS.applyMatrix3(e),this.setXY(t,XS.x,XS.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.applyMatrix3(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.applyMatrix4(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.applyNormalMatrix(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.transformDirection(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ih(t,this.array)),t}setX(e,t){return this.normalized&&(t=Lr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ih(t,this.array)),t}setY(e,t){return this.normalized&&(t=Lr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ih(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Lr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ih(t,this.array)),t}setW(e,t){return this.normalized&&(t=Lr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Lr(t,this.array),i=Lr(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Lr(t,this.array),i=Lr(i,this.array),r=Lr(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,n){return e*=this.itemSize,this.normalized&&(t=Lr(t,this.array),i=Lr(i,this.array),r=Lr(r,this.array),n=Lr(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==aR&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},Nte=class extends Xt{constructor(e,t,i){super(new Uint16Array(e),t,i)}},Z0=class extends Xt{constructor(e,t,i){super(new Uint32Array(e),t,i)}},yt=class extends Xt{constructor(e,t,i){super(new Float32Array(e),t,i)}},pRe=0,rl=new tt,$P=new mr,Yg=new j,Io=new Pn,R1=new Pn,xs=new j,Rt=class extends la{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:pRe++}),this.uuid=xl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ote(e)?Z0:Nte)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let n=new Hn().getNormalMatrix(e);i.applyNormalMatrix(n),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return rl.makeRotationFromQuaternion(e),this.applyMatrix4(rl),this}rotateX(e){return rl.makeRotationX(e),this.applyMatrix4(rl),this}rotateY(e){return rl.makeRotationY(e),this.applyMatrix4(rl),this}rotateZ(e){return rl.makeRotationZ(e),this.applyMatrix4(rl),this}translate(e,t,i){return rl.makeTranslation(e,t,i),this.applyMatrix4(rl),this}scale(e,t,i){return rl.makeScale(e,t,i),this.applyMatrix4(rl),this}lookAt(e){return $P.lookAt(e),$P.updateMatrix(),this.applyMatrix4($P.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Yg).negate(),this.translate(Yg.x,Yg.y,Yg.z),this}setFromPoints(e){let t=[];for(let i=0,r=e.length;i<r;i++){let n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new yt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pn);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let n=t[i];Io.setFromBufferAttribute(n),this.morphTargetsRelative?(xs.addVectors(this.boundingBox.min,Io.min),this.boundingBox.expandByPoint(xs),xs.addVectors(this.boundingBox.max,Io.max),this.boundingBox.expandByPoint(xs)):(this.boundingBox.expandByPoint(Io.min),this.boundingBox.expandByPoint(Io.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new yo);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new j,1/0);return}if(e){let i=this.boundingSphere.center;if(Io.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){let a=t[n];R1.setFromBufferAttribute(a),this.morphTargetsRelative?(xs.addVectors(Io.min,R1.min),Io.expandByPoint(xs),xs.addVectors(Io.max,R1.max),Io.expandByPoint(xs)):(Io.expandByPoint(R1.min),Io.expandByPoint(R1.max))}Io.getCenter(i);let r=0;for(let n=0,s=e.count;n<s;n++)xs.fromBufferAttribute(e,n),r=Math.max(r,i.distanceToSquared(xs));if(t)for(let n=0,s=t.length;n<s;n++){let a=t[n],o=this.morphTargetsRelative;for(let l=0,c=a.count;l<c;l++)xs.fromBufferAttribute(a,l),o&&(Yg.fromBufferAttribute(e,l),xs.add(Yg)),r=Math.max(r,i.distanceToSquared(xs))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.array,r=t.position.array,n=t.normal.array,s=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xt(new Float32Array(4*a),4));let o=this.getAttribute("tangent").array,l=[],c=[];for(let R=0;R<a;R++)l[R]=new j,c[R]=new j;let u=new j,h=new j,f=new j,m=new pe,g=new pe,v=new pe,x=new j,b=new j;function S(R,O,L){u.fromArray(r,R*3),h.fromArray(r,O*3),f.fromArray(r,L*3),m.fromArray(s,R*2),g.fromArray(s,O*2),v.fromArray(s,L*2),h.sub(u),f.sub(u),g.sub(m),v.sub(m);let k=1/(g.x*v.y-v.x*g.y);!isFinite(k)||(x.copy(h).multiplyScalar(v.y).addScaledVector(f,-g.y).multiplyScalar(k),b.copy(f).multiplyScalar(g.x).addScaledVector(h,-v.x).multiplyScalar(k),l[R].add(x),l[O].add(x),l[L].add(x),c[R].add(b),c[O].add(b),c[L].add(b))}let _=this.groups;_.length===0&&(_=[{start:0,count:i.length}]);for(let R=0,O=_.length;R<O;++R){let L=_[R],k=L.start,B=L.count;for(let V=k,$=k+B;V<$;V+=3)S(i[V+0],i[V+1],i[V+2])}let A=new j,M=new j,C=new j,D=new j;function T(R){C.fromArray(n,R*3),D.copy(C);let O=l[R];A.copy(O),A.sub(C.multiplyScalar(C.dot(O))).normalize(),M.crossVectors(D,O);let L=M.dot(c[R])<0?-1:1;o[R*4]=A.x,o[R*4+1]=A.y,o[R*4+2]=A.z,o[R*4+3]=L}for(let R=0,O=_.length;R<O;++R){let L=_[R],k=L.start,B=L.count;for(let V=k,$=k+B;V<$;V+=3)T(i[V+0]),T(i[V+1]),T(i[V+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Xt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);let r=new j,n=new j,s=new j,a=new j,o=new j,l=new j,c=new j,u=new j;if(e)for(let h=0,f=e.count;h<f;h+=3){let m=e.getX(h+0),g=e.getX(h+1),v=e.getX(h+2);r.fromBufferAttribute(t,m),n.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),c.subVectors(s,n),u.subVectors(r,n),c.cross(u),a.fromBufferAttribute(i,m),o.fromBufferAttribute(i,g),l.fromBufferAttribute(i,v),a.add(c),o.add(c),l.add(c),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(g,o.x,o.y,o.z),i.setXYZ(v,l.x,l.y,l.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),n.fromBufferAttribute(t,h+1),s.fromBufferAttribute(t,h+2),c.subVectors(s,n),u.subVectors(r,n),c.cross(u),i.setXYZ(h+0,c.x,c.y,c.z),i.setXYZ(h+1,c.x,c.y,c.z),i.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)xs.fromBufferAttribute(e,t),xs.normalize(),e.setXYZ(t,xs.x,xs.y,xs.z)}toNonIndexed(){function e(a,o){let l=a.array,c=a.itemSize,u=a.normalized,h=new l.constructor(o.length*c),f=0,m=0;for(let g=0,v=o.length;g<v;g++){a.isInterleavedBufferAttribute?f=o[g]*a.data.stride+a.offset:f=o[g]*c;for(let x=0;x<c;x++)h[m++]=l[f++]}return new Xt(h,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new Rt,i=this.index.array,r=this.attributes;for(let a in r){let o=r[a],l=e(o,i);t.setAttribute(a,l)}let n=this.morphAttributes;for(let a in n){let o=[],l=n[a];for(let c=0,u=l.length;c<u;c++){let h=l[c],f=e(h,i);o.push(f)}t.morphAttributes[a]=o}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,o=s.length;a<o;a++){let l=s[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let o=this.parameters;for(let l in o)o[l]!==void 0&&(e[l]=o[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let o in i){let l=i[o];e.data.attributes[o]=l.toJSON(e.data)}let r={},n=!1;for(let o in this.morphAttributes){let l=this.morphAttributes[o],c=[];for(let u=0,h=l.length;u<h;u++){let f=l[u];c.push(f.toJSON(e.data))}c.length>0&&(r[o]=c,n=!0)}n&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(t));let r=e.attributes;for(let l in r){let c=r[l];this.setAttribute(l,c.clone(t))}let n=e.morphAttributes;for(let l in n){let c=[],u=n[l];for(let h=0,f=u.length;h<f;h++)c.push(u[h].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,c=s.length;l<c;l++){let u=s[l];this.addGroup(u.start,u.count,u.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let o=e.boundingSphere;return o!==null&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},_9=new tt,Qg=new ry,JP=new yo,O1=new j,L1=new j,k1=new j,e4=new j,YS=new j,QS=new pe,KS=new pe,ZS=new pe,t4=new j,$S=new j,kr=class extends mr{constructor(e=new Rt,t=new Yh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=i.length;r<n;r++){let s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,n=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(n&&a){YS.set(0,0,0);for(let o=0,l=n.length;o<l;o++){let c=a[o],u=n[o];c!==0&&(e4.fromBufferAttribute(u,e),s?YS.addScaledVector(e4,c):YS.addScaledVector(e4.sub(t),c))}t.add(YS)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let i=this.geometry,r=this.material,n=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),JP.copy(i.boundingSphere),JP.applyMatrix4(n),e.ray.intersectsSphere(JP)===!1)||(_9.copy(n).invert(),Qg.copy(e.ray).applyMatrix4(_9),i.boundingBox!==null&&Qg.intersectsBox(i.boundingBox)===!1))return;let s,a=i.index,o=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv2,u=i.groups,h=i.drawRange;if(a!==null)if(Array.isArray(r))for(let f=0,m=u.length;f<m;f++){let g=u[f],v=r[g.materialIndex],x=Math.max(g.start,h.start),b=Math.min(a.count,Math.min(g.start+g.count,h.start+h.count));for(let S=x,_=b;S<_;S+=3){let A=a.getX(S),M=a.getX(S+1),C=a.getX(S+2);s=JS(this,v,e,Qg,l,c,A,M,C),s&&(s.faceIndex=Math.floor(S/3),s.face.materialIndex=g.materialIndex,t.push(s))}}else{let f=Math.max(0,h.start),m=Math.min(a.count,h.start+h.count);for(let g=f,v=m;g<v;g+=3){let x=a.getX(g),b=a.getX(g+1),S=a.getX(g+2);s=JS(this,r,e,Qg,l,c,x,b,S),s&&(s.faceIndex=Math.floor(g/3),t.push(s))}}else if(o!==void 0)if(Array.isArray(r))for(let f=0,m=u.length;f<m;f++){let g=u[f],v=r[g.materialIndex],x=Math.max(g.start,h.start),b=Math.min(o.count,Math.min(g.start+g.count,h.start+h.count));for(let S=x,_=b;S<_;S+=3){let A=S,M=S+1,C=S+2;s=JS(this,v,e,Qg,l,c,A,M,C),s&&(s.faceIndex=Math.floor(S/3),s.face.materialIndex=g.materialIndex,t.push(s))}}else{let f=Math.max(0,h.start),m=Math.min(o.count,h.start+h.count);for(let g=f,v=m;g<v;g+=3){let x=g,b=g+1,S=g+2;s=JS(this,r,e,Qg,l,c,x,b,S),s&&(s.faceIndex=Math.floor(g/3),t.push(s))}}}};function mRe(e,t,i,r,n,s,a,o){let l;if(t.side===Ds?l=r.intersectTriangle(a,s,n,!0,o):l=r.intersectTriangle(n,s,a,t.side===lc,o),l===null)return null;$S.copy(o),$S.applyMatrix4(e.matrixWorld);let c=i.ray.origin.distanceTo($S);return c<i.near||c>i.far?null:{distance:c,point:$S.clone(),object:e}}function JS(e,t,i,r,n,s,a,o,l){e.getVertexPosition(a,O1),e.getVertexPosition(o,L1),e.getVertexPosition(l,k1);let c=mRe(e,t,i,r,O1,L1,k1,t4);if(c){n&&(QS.fromBufferAttribute(n,a),KS.fromBufferAttribute(n,o),ZS.fromBufferAttribute(n,l),c.uv=Js.getUV(t4,O1,L1,k1,QS,KS,ZS,new pe)),s&&(QS.fromBufferAttribute(s,a),KS.fromBufferAttribute(s,o),ZS.fromBufferAttribute(s,l),c.uv2=Js.getUV(t4,O1,L1,k1,QS,KS,ZS,new pe));let u={a,b:o,c:l,normal:new j,materialIndex:0};Js.getNormal(O1,L1,k1,u.normal),c.face=u}return c}var uc=class extends Rt{constructor(e=1,t=1,i=1,r=1,n=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:s};let a=this;r=Math.floor(r),n=Math.floor(n),s=Math.floor(s);let o=[],l=[],c=[],u=[],h=0,f=0;m("z","y","x",-1,-1,i,t,e,s,n,0),m("z","y","x",1,-1,i,t,-e,s,n,1),m("x","z","y",1,1,e,i,t,r,s,2),m("x","z","y",1,-1,e,i,-t,r,s,3),m("x","y","z",1,-1,e,t,i,r,n,4),m("x","y","z",-1,-1,e,t,-i,r,n,5),this.setIndex(o),this.setAttribute("position",new yt(l,3)),this.setAttribute("normal",new yt(c,3)),this.setAttribute("uv",new yt(u,2));function m(g,v,x,b,S,_,A,M,C,D,T){let R=_/C,O=A/D,L=_/2,k=A/2,B=M/2,V=C+1,$=D+1,q=0,Y=0,X=new j;for(let ne=0;ne<$;ne++){let F=ne*O-k;for(let K=0;K<V;K++){let re=K*R-L;X[g]=re*b,X[v]=F*S,X[x]=B,l.push(X.x,X.y,X.z),X[g]=0,X[v]=0,X[x]=M>0?1:-1,c.push(X.x,X.y,X.z),u.push(K/C),u.push(1-ne/D),q+=1}}for(let ne=0;ne<D;ne++)for(let F=0;F<C;F++){let K=h+F+V*ne,re=h+F+V*(ne+1),oe=h+(F+1)+V*(ne+1),ce=h+(F+1)+V*ne;o.push(K,re,ce),o.push(re,oe,ce),Y+=6}a.addGroup(f,Y,T),f+=Y,h+=q}}static fromJSON(e){return new uc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Cv(e){let t={};for(let i in e){t[i]={};for(let r in e[i]){let n=e[i][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[i][r]=n.clone():Array.isArray(n)?t[i][r]=n.slice():t[i][r]=n}}return t}function ja(e){let t={};for(let i=0;i<e.length;i++){let r=Cv(e[i]);for(let n in r)t[n]=r[n]}return t}function gRe(e){let t=[];for(let i=0;i<e.length;i++)t.push(e[i].clone());return t}function Vte(e){return e.getRenderTarget()===null&&e.outputEncoding===pi?Qc:UA}var ny={clone:Cv,merge:ja},vRe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,yRe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Vi=class extends bw{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=vRe,this.fragmentShader=yRe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Cv(e.uniforms),this.uniformsGroups=gRe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Qf=class extends mr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new tt,this.projectionMatrix=new tt,this.projectionMatrixInverse=new tt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ya=class extends Qf{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Db*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Nx*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Db*2*Math.atan(Math.tan(Nx*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,n,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Nx*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,n=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let o=s.fullWidth,l=s.fullHeight;n+=s.offsetX*r/o,t-=s.offsetY*i/l,r*=s.width/o,i*=s.height/l}let a=this.filmOffset;a!==0&&(n+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Kg=-90,Zg=1,xRe=class extends mr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;let r=new ya(Kg,Zg,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);let n=new ya(Kg,Zg,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(-1,0,0),this.add(n);let s=new ya(Kg,Zg,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);let a=new ya(Kg,Zg,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);let o=new ya(Kg,Zg,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);let l=new ya(Kg,Zg,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let i=this.renderTarget,[r,n,s,a,o,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=xu,e.xr.enabled=!1;let f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,n),e.setRenderTarget(i,2),e.render(t,s),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,o),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}},ck=class extends on{constructor(e,t,i,r,n,s,a,o,l,c){e=e!==void 0?e:[],t=t!==void 0?t:Cm,super(e,t,i,r,n,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},bRe=class extends Ni{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new ck(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:yi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new uc(5,5,5),n=new Vi({name:"CubemapFromEquirect",uniforms:Cv(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ds,blending:Wn});n.uniforms.tEquirect.value=t;let s=new kr(r,n),a=t.minFilter;return t.minFilter===Tv&&(t.minFilter=yi),new xRe(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,r){let n=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(n)}},i4=new j,wRe=new j,SRe=new Hn,ao=class{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=i4.subVectors(i,t).cross(wRe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let i=e.delta(i4),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/r;return n<0||n>1?null:t.copy(i).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||SRe.getNormalMatrix(e),r=this.coplanarPoint(i4).applyMatrix4(e),n=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},$g=new yo,e_=new j,uk=class{constructor(e=new ao,t=new ao,i=new ao,r=new ao,n=new ao,s=new ao){this.planes=[e,t,i,r,n,s]}set(e,t,i,r,n,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(n),a[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){let t=this.planes,i=e.elements,r=i[0],n=i[1],s=i[2],a=i[3],o=i[4],l=i[5],c=i[6],u=i[7],h=i[8],f=i[9],m=i[10],g=i[11],v=i[12],x=i[13],b=i[14],S=i[15];return t[0].setComponents(a-r,u-o,g-h,S-v).normalize(),t[1].setComponents(a+r,u+o,g+h,S+v).normalize(),t[2].setComponents(a+n,u+l,g+f,S+x).normalize(),t[3].setComponents(a-n,u-l,g-f,S-x).normalize(),t[4].setComponents(a-s,u-c,g-m,S-b).normalize(),t[5].setComponents(a+s,u+c,g+m,S+b).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),$g.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($g)}intersectsSprite(e){return $g.center.set(0,0,0),$g.radius=.7071067811865476,$g.applyMatrix4(e.matrixWorld),this.intersectsSphere($g)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(e_.x=r.normal.x>0?e.max.x:e.min.x,e_.y=r.normal.y>0?e.max.y:e.min.y,e_.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(e_)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function Ute(){let e=null,t=!1,i=null,r=null;function n(s,a){i(s,a),r=e.requestAnimationFrame(n)}return{start:function(){t!==!0&&i!==null&&(r=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(s){i=s},setContext:function(s){e=s}}}function _Re(e,t){let i=t.isWebGL2,r=new WeakMap;function n(c,u){let h=c.array,f=c.usage,m=e.createBuffer();e.bindBuffer(u,m),e.bufferData(u,h,f),c.onUploadCallback();let g;if(h instanceof Float32Array)g=5126;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(i)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(h instanceof Int16Array)g=5122;else if(h instanceof Uint32Array)g=5125;else if(h instanceof Int32Array)g=5124;else if(h instanceof Int8Array)g=5120;else if(h instanceof Uint8Array)g=5121;else if(h instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:m,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,h){let f=u.array,m=u.updateRange;e.bindBuffer(h,c),m.count===-1?e.bufferSubData(h,0,f):(i?e.bufferSubData(h,m.offset*f.BYTES_PER_ELEMENT,f,m.offset,m.count):e.bufferSubData(h,m.offset*f.BYTES_PER_ELEMENT,f.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);let u=r.get(c);u&&(e.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){let f=r.get(c);(!f||f.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);let h=r.get(c);h===void 0?r.set(c,n(c,u)):h.version<c.version&&(s(h.buffer,c,u),h.version=c.version)}return{get:a,remove:o,update:l}}var Au=class extends Rt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let n=e/2,s=t/2,a=Math.floor(i),o=Math.floor(r),l=a+1,c=o+1,u=e/a,h=t/o,f=[],m=[],g=[],v=[];for(let x=0;x<c;x++){let b=x*h-s;for(let S=0;S<l;S++){let _=S*u-n;m.push(_,-b,0),g.push(0,0,1),v.push(S/a),v.push(1-x/o)}}for(let x=0;x<o;x++)for(let b=0;b<a;b++){let S=b+l*x,_=b+l*(x+1),A=b+1+l*(x+1),M=b+1+l*x;f.push(S,_,M),f.push(_,A,M)}this.setIndex(f),this.setAttribute("position",new yt(m,3)),this.setAttribute("normal",new yt(g,3)),this.setAttribute("uv",new yt(v,2))}static fromJSON(e){return new Au(e.width,e.height,e.widthSegments,e.heightSegments)}},ERe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,ARe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,TRe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,CRe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,MRe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,PRe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,DRe="vec3 transformed = vec3( position );",IRe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,RRe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,ORe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,LRe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,kRe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,zRe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,BRe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,jRe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,NRe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,VRe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,URe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,FRe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,HRe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,GRe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,WRe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,qRe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,XRe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,YRe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,QRe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,KRe="gl_FragColor = linearToOutputTexel( gl_FragColor );",ZRe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,$Re=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,JRe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,eOe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,tOe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,iOe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,rOe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,nOe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,sOe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,aOe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,oOe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lOe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,cOe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,uOe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,hOe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,dOe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,fOe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,pOe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,mOe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,gOe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,vOe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,yOe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,xOe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,bOe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,wOe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,SOe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,_Oe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,EOe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,AOe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,TOe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,COe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,MOe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,POe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,DOe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,IOe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ROe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,OOe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,LOe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,kOe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,zOe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,BOe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,jOe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,NOe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,VOe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,UOe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,FOe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,HOe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,GOe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,WOe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,qOe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,XOe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,YOe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,QOe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,KOe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ZOe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,$Oe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,JOe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,e6e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,t6e=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,i6e=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,r6e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,n6e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,s6e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,a6e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,o6e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,l6e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,c6e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,u6e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,h6e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,d6e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,f6e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,p6e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,m6e=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,g6e=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,v6e=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,y6e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,x6e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,b6e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,w6e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,S6e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,_6e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,E6e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,A6e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,T6e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,C6e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,M6e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,P6e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,D6e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,I6e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,R6e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,O6e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,L6e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,k6e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,z6e=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,B6e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,j6e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,N6e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V6e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,U6e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,F6e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,H6e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,G6e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,W6e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q6e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,X6e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y6e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Q6e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K6e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Z6e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$6e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,J6e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,eLe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tLe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vi={alphamap_fragment:ERe,alphamap_pars_fragment:ARe,alphatest_fragment:TRe,alphatest_pars_fragment:CRe,aomap_fragment:MRe,aomap_pars_fragment:PRe,begin_vertex:DRe,beginnormal_vertex:IRe,bsdfs:RRe,iridescence_fragment:ORe,bumpmap_pars_fragment:LRe,clipping_planes_fragment:kRe,clipping_planes_pars_fragment:zRe,clipping_planes_pars_vertex:BRe,clipping_planes_vertex:jRe,color_fragment:NRe,color_pars_fragment:VRe,color_pars_vertex:URe,color_vertex:FRe,common:HRe,cube_uv_reflection_fragment:GRe,defaultnormal_vertex:WRe,displacementmap_pars_vertex:qRe,displacementmap_vertex:XRe,emissivemap_fragment:YRe,emissivemap_pars_fragment:QRe,encodings_fragment:KRe,encodings_pars_fragment:ZRe,envmap_fragment:$Re,envmap_common_pars_fragment:JRe,envmap_pars_fragment:eOe,envmap_pars_vertex:tOe,envmap_physical_pars_fragment:fOe,envmap_vertex:iOe,fog_vertex:rOe,fog_pars_vertex:nOe,fog_fragment:sOe,fog_pars_fragment:aOe,gradientmap_pars_fragment:oOe,lightmap_fragment:lOe,lightmap_pars_fragment:cOe,lights_lambert_fragment:uOe,lights_lambert_pars_fragment:hOe,lights_pars_begin:dOe,lights_toon_fragment:pOe,lights_toon_pars_fragment:mOe,lights_phong_fragment:gOe,lights_phong_pars_fragment:vOe,lights_physical_fragment:yOe,lights_physical_pars_fragment:xOe,lights_fragment_begin:bOe,lights_fragment_maps:wOe,lights_fragment_end:SOe,logdepthbuf_fragment:_Oe,logdepthbuf_pars_fragment:EOe,logdepthbuf_pars_vertex:AOe,logdepthbuf_vertex:TOe,map_fragment:COe,map_pars_fragment:MOe,map_particle_fragment:POe,map_particle_pars_fragment:DOe,metalnessmap_fragment:IOe,metalnessmap_pars_fragment:ROe,morphcolor_vertex:OOe,morphnormal_vertex:LOe,morphtarget_pars_vertex:kOe,morphtarget_vertex:zOe,normal_fragment_begin:BOe,normal_fragment_maps:jOe,normal_pars_fragment:NOe,normal_pars_vertex:VOe,normal_vertex:UOe,normalmap_pars_fragment:FOe,clearcoat_normal_fragment_begin:HOe,clearcoat_normal_fragment_maps:GOe,clearcoat_pars_fragment:WOe,iridescence_pars_fragment:qOe,output_fragment:XOe,packing:YOe,premultiplied_alpha_fragment:QOe,project_vertex:KOe,dithering_fragment:ZOe,dithering_pars_fragment:$Oe,roughnessmap_fragment:JOe,roughnessmap_pars_fragment:e6e,shadowmap_pars_fragment:t6e,shadowmap_pars_vertex:i6e,shadowmap_vertex:r6e,shadowmask_pars_fragment:n6e,skinbase_vertex:s6e,skinning_pars_vertex:a6e,skinning_vertex:o6e,skinnormal_vertex:l6e,specularmap_fragment:c6e,specularmap_pars_fragment:u6e,tonemapping_fragment:h6e,tonemapping_pars_fragment:d6e,transmission_fragment:f6e,transmission_pars_fragment:p6e,uv_pars_fragment:m6e,uv_pars_vertex:g6e,uv_vertex:v6e,uv2_pars_fragment:y6e,uv2_pars_vertex:x6e,uv2_vertex:b6e,worldpos_vertex:w6e,background_vert:S6e,background_frag:_6e,backgroundCube_vert:E6e,backgroundCube_frag:A6e,cube_vert:T6e,cube_frag:C6e,depth_vert:M6e,depth_frag:P6e,distanceRGBA_vert:D6e,distanceRGBA_frag:I6e,equirect_vert:R6e,equirect_frag:O6e,linedashed_vert:L6e,linedashed_frag:k6e,meshbasic_vert:z6e,meshbasic_frag:B6e,meshlambert_vert:j6e,meshlambert_frag:N6e,meshmatcap_vert:V6e,meshmatcap_frag:U6e,meshnormal_vert:F6e,meshnormal_frag:H6e,meshphong_vert:G6e,meshphong_frag:W6e,meshphysical_vert:q6e,meshphysical_frag:X6e,meshtoon_vert:Y6e,meshtoon_frag:Q6e,points_vert:K6e,points_frag:Z6e,shadow_vert:$6e,shadow_frag:J6e,sprite_vert:eLe,sprite_frag:tLe},mt={common:{diffuse:{value:new qt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Hn},uv2Transform:{value:new Hn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Hn}},sprite:{diffuse:{value:new qt(16777215)},opacity:{value:1},center:{value:new pe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Hn}}},eu={basic:{uniforms:ja([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.fog]),vertexShader:vi.meshbasic_vert,fragmentShader:vi.meshbasic_frag},lambert:{uniforms:ja([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,mt.lights,{emissive:{value:new qt(0)}}]),vertexShader:vi.meshlambert_vert,fragmentShader:vi.meshlambert_frag},phong:{uniforms:ja([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,mt.lights,{emissive:{value:new qt(0)},specular:{value:new qt(1118481)},shininess:{value:30}}]),vertexShader:vi.meshphong_vert,fragmentShader:vi.meshphong_frag},standard:{uniforms:ja([mt.common,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.roughnessmap,mt.metalnessmap,mt.fog,mt.lights,{emissive:{value:new qt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:vi.meshphysical_vert,fragmentShader:vi.meshphysical_frag},toon:{uniforms:ja([mt.common,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.gradientmap,mt.fog,mt.lights,{emissive:{value:new qt(0)}}]),vertexShader:vi.meshtoon_vert,fragmentShader:vi.meshtoon_frag},matcap:{uniforms:ja([mt.common,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,{matcap:{value:null}}]),vertexShader:vi.meshmatcap_vert,fragmentShader:vi.meshmatcap_frag},points:{uniforms:ja([mt.points,mt.fog]),vertexShader:vi.points_vert,fragmentShader:vi.points_frag},dashed:{uniforms:ja([mt.common,mt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vi.linedashed_vert,fragmentShader:vi.linedashed_frag},depth:{uniforms:ja([mt.common,mt.displacementmap]),vertexShader:vi.depth_vert,fragmentShader:vi.depth_frag},normal:{uniforms:ja([mt.common,mt.bumpmap,mt.normalmap,mt.displacementmap,{opacity:{value:1}}]),vertexShader:vi.meshnormal_vert,fragmentShader:vi.meshnormal_frag},sprite:{uniforms:ja([mt.sprite,mt.fog]),vertexShader:vi.sprite_vert,fragmentShader:vi.sprite_frag},background:{uniforms:{uvTransform:{value:new Hn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:vi.background_vert,fragmentShader:vi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:vi.backgroundCube_vert,fragmentShader:vi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:vi.cube_vert,fragmentShader:vi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:vi.equirect_vert,fragmentShader:vi.equirect_frag},distanceRGBA:{uniforms:ja([mt.common,mt.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:vi.distanceRGBA_vert,fragmentShader:vi.distanceRGBA_frag},shadow:{uniforms:ja([mt.lights,mt.fog,{color:{value:new qt(0)},opacity:{value:1}}]),vertexShader:vi.shadow_vert,fragmentShader:vi.shadow_frag}};eu.physical={uniforms:ja([eu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new pe(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new qt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new pe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new qt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new qt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:vi.meshphysical_vert,fragmentShader:vi.meshphysical_frag};var t_={r:0,b:0,g:0};function iLe(e,t,i,r,n,s,a){let o=new qt(0),l=s===!0?0:1,c,u,h=null,f=0,m=null;function g(x,b){let S=!1,_=b.isScene===!0?b.background:null;_&&_.isTexture&&(_=(b.backgroundBlurriness>0?i:t).get(_));let A=e.xr,M=A.getSession&&A.getSession();M&&M.environmentBlendMode==="additive"&&(_=null),_===null?v(o,l):_&&_.isColor&&(v(_,1),S=!0),(e.autoClear||S)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),_&&(_.isCubeTexture||_.mapping===xw)?(u===void 0&&(u=new kr(new uc(1,1,1),new Vi({name:"BackgroundCubeMaterial",uniforms:Cv(eu.backgroundCube.uniforms),vertexShader:eu.backgroundCube.vertexShader,fragmentShader:eu.backgroundCube.fragmentShader,side:Ds,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(C,D,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(u)),u.material.uniforms.envMap.value=_,u.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,u.material.toneMapped=_.encoding!==pi,(h!==_||f!==_.version||m!==e.toneMapping)&&(u.material.needsUpdate=!0,h=_,f=_.version,m=e.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null)):_&&_.isTexture&&(c===void 0&&(c=new kr(new Au(2,2),new Vi({name:"BackgroundMaterial",uniforms:Cv(eu.background.uniforms),vertexShader:eu.background.vertexShader,fragmentShader:eu.background.fragmentShader,side:lc,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(c)),c.material.uniforms.t2D.value=_,c.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,c.material.toneMapped=_.encoding!==pi,_.matrixAutoUpdate===!0&&_.updateMatrix(),c.material.uniforms.uvTransform.value.copy(_.matrix),(h!==_||f!==_.version||m!==e.toneMapping)&&(c.material.needsUpdate=!0,h=_,f=_.version,m=e.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null))}function v(x,b){x.getRGB(t_,Vte(e)),r.buffers.color.setClear(t_.r,t_.g,t_.b,b,a)}return{getClearColor:function(){return o},setClearColor:function(x,b=1){o.set(x),l=b,v(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,v(o,l)},render:g}}function rLe(e,t,i,r){let n=e.getParameter(34921),s=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||s!==null,o={},l=x(null),c=l,u=!1;function h(V,$,q,Y,X){let ne=!1;if(a){let F=v(Y,q,$);c!==F&&(c=F,m(c.object)),ne=b(V,Y,q,X),ne&&S(V,Y,q,X)}else{let F=$.wireframe===!0;(c.geometry!==Y.id||c.program!==q.id||c.wireframe!==F)&&(c.geometry=Y.id,c.program=q.id,c.wireframe=F,ne=!0)}X!==null&&i.update(X,34963),(ne||u)&&(u=!1,T(V,$,q,Y),X!==null&&e.bindBuffer(34963,i.get(X).buffer))}function f(){return r.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}function m(V){return r.isWebGL2?e.bindVertexArray(V):s.bindVertexArrayOES(V)}function g(V){return r.isWebGL2?e.deleteVertexArray(V):s.deleteVertexArrayOES(V)}function v(V,$,q){let Y=q.wireframe===!0,X=o[V.id];X===void 0&&(X={},o[V.id]=X);let ne=X[$.id];ne===void 0&&(ne={},X[$.id]=ne);let F=ne[Y];return F===void 0&&(F=x(f()),ne[Y]=F),F}function x(V){let $=[],q=[],Y=[];for(let X=0;X<n;X++)$[X]=0,q[X]=0,Y[X]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:q,attributeDivisors:Y,object:V,attributes:{},index:null}}function b(V,$,q,Y){let X=c.attributes,ne=$.attributes,F=0,K=q.getAttributes();for(let re in K)if(K[re].location>=0){let oe=X[re],ce=ne[re];if(ce===void 0&&(re==="instanceMatrix"&&V.instanceMatrix&&(ce=V.instanceMatrix),re==="instanceColor"&&V.instanceColor&&(ce=V.instanceColor)),oe===void 0||oe.attribute!==ce||ce&&oe.data!==ce.data)return!0;F++}return c.attributesNum!==F||c.index!==Y}function S(V,$,q,Y){let X={},ne=$.attributes,F=0,K=q.getAttributes();for(let re in K)if(K[re].location>=0){let oe=ne[re];oe===void 0&&(re==="instanceMatrix"&&V.instanceMatrix&&(oe=V.instanceMatrix),re==="instanceColor"&&V.instanceColor&&(oe=V.instanceColor));let ce={};ce.attribute=oe,oe&&oe.data&&(ce.data=oe.data),X[re]=ce,F++}c.attributes=X,c.attributesNum=F,c.index=Y}function _(){let V=c.newAttributes;for(let $=0,q=V.length;$<q;$++)V[$]=0}function A(V){M(V,0)}function M(V,$){let q=c.newAttributes,Y=c.enabledAttributes,X=c.attributeDivisors;q[V]=1,Y[V]===0&&(e.enableVertexAttribArray(V),Y[V]=1),X[V]!==$&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,$),X[V]=$)}function C(){let V=c.newAttributes,$=c.enabledAttributes;for(let q=0,Y=$.length;q<Y;q++)$[q]!==V[q]&&(e.disableVertexAttribArray(q),$[q]=0)}function D(V,$,q,Y,X,ne){r.isWebGL2===!0&&(q===5124||q===5125)?e.vertexAttribIPointer(V,$,q,X,ne):e.vertexAttribPointer(V,$,q,Y,X,ne)}function T(V,$,q,Y){if(r.isWebGL2===!1&&(V.isInstancedMesh||Y.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;_();let X=Y.attributes,ne=q.getAttributes(),F=$.defaultAttributeValues;for(let K in ne){let re=ne[K];if(re.location>=0){let oe=X[K];if(oe===void 0&&(K==="instanceMatrix"&&V.instanceMatrix&&(oe=V.instanceMatrix),K==="instanceColor"&&V.instanceColor&&(oe=V.instanceColor)),oe!==void 0){let ce=oe.normalized,de=oe.itemSize,se=i.get(oe);if(se===void 0)continue;let xe=se.buffer,fe=se.type,ye=se.bytesPerElement;if(oe.isInterleavedBufferAttribute){let _e=oe.data,Te=_e.stride,Ce=oe.offset;if(_e.isInstancedInterleavedBuffer){for(let Le=0;Le<re.locationSize;Le++)M(re.location+Le,_e.meshPerAttribute);V.isInstancedMesh!==!0&&Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let Le=0;Le<re.locationSize;Le++)A(re.location+Le);e.bindBuffer(34962,xe);for(let Le=0;Le<re.locationSize;Le++)D(re.location+Le,de/re.locationSize,fe,ce,Te*ye,(Ce+de/re.locationSize*Le)*ye)}else{if(oe.isInstancedBufferAttribute){for(let _e=0;_e<re.locationSize;_e++)M(re.location+_e,oe.meshPerAttribute);V.isInstancedMesh!==!0&&Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let _e=0;_e<re.locationSize;_e++)A(re.location+_e);e.bindBuffer(34962,xe);for(let _e=0;_e<re.locationSize;_e++)D(re.location+_e,de/re.locationSize,fe,ce,de*ye,de/re.locationSize*_e*ye)}}else if(F!==void 0){let ce=F[K];if(ce!==void 0)switch(ce.length){case 2:e.vertexAttrib2fv(re.location,ce);break;case 3:e.vertexAttrib3fv(re.location,ce);break;case 4:e.vertexAttrib4fv(re.location,ce);break;default:e.vertexAttrib1fv(re.location,ce)}}}}C()}function R(){k();for(let V in o){let $=o[V];for(let q in $){let Y=$[q];for(let X in Y)g(Y[X].object),delete Y[X];delete $[q]}delete o[V]}}function O(V){if(o[V.id]===void 0)return;let $=o[V.id];for(let q in $){let Y=$[q];for(let X in Y)g(Y[X].object),delete Y[X];delete $[q]}delete o[V.id]}function L(V){for(let $ in o){let q=o[$];if(q[V.id]===void 0)continue;let Y=q[V.id];for(let X in Y)g(Y[X].object),delete Y[X];delete q[V.id]}}function k(){B(),u=!0,c!==l&&(c=l,m(c.object))}function B(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:k,resetDefaultState:B,dispose:R,releaseStatesOfGeometry:O,releaseStatesOfProgram:L,initAttributes:_,enableAttribute:A,disableUnusedAttributes:C}}function nLe(e,t,i,r){let n=r.isWebGL2,s;function a(c){s=c}function o(c,u){e.drawArrays(s,c,u),i.update(u,s,1)}function l(c,u,h){if(h===0)return;let f,m;if(n)f=e,m="drawArraysInstanced";else if(f=t.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[m](s,c,u,h),i.update(u,s,h)}this.setMode=a,this.render=o,this.renderInstances=l}function sLe(e,t,i){let r;function n(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let D=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(D){if(D==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";D="mediump"}return D==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let a=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,o=i.precision!==void 0?i.precision:"highp",l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);let c=a||t.has("WEBGL_draw_buffers"),u=i.logarithmicDepthBuffer===!0,h=e.getParameter(34930),f=e.getParameter(35660),m=e.getParameter(3379),g=e.getParameter(34076),v=e.getParameter(34921),x=e.getParameter(36347),b=e.getParameter(36348),S=e.getParameter(36349),_=f>0,A=a||t.has("OES_texture_float"),M=_&&A,C=a?e.getParameter(36183):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:n,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:x,maxVaryings:b,maxFragmentUniforms:S,vertexTextures:_,floatFragmentTextures:A,floatVertexTextures:M,maxSamples:C}}function aLe(e){let t=this,i=null,r=0,n=!1,s=!1,a=new ao,o=new Hn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){let m=h.length!==0||f||r!==0||n;return n=f,r=h.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){i=u(h,f,0)},this.setState=function(h,f,m){let g=h.clippingPlanes,v=h.clipIntersection,x=h.clipShadows,b=e.get(h);if(!n||g===null||g.length===0||s&&!x)s?u(null):c();else{let S=s?0:r,_=S*4,A=b.clippingState||null;l.value=A,A=u(g,f,_,m);for(let M=0;M!==_;++M)A[M]=i[M];b.clippingState=A,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==i&&(l.value=i,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(h,f,m,g){let v=h!==null?h.length:0,x=null;if(v!==0){if(x=l.value,g!==!0||x===null){let b=m+v*4,S=f.matrixWorldInverse;o.getNormalMatrix(S),(x===null||x.length<b)&&(x=new Float32Array(b));for(let _=0,A=m;_!==v;++_,A+=4)a.copy(h[_]).applyMatrix4(S,o),a.normal.toArray(x,A),x[A+3]=a.constant}l.value=x,l.needsUpdate=!0}return t.numPlanes=v,t.numIntersection=0,x}}function oLe(e){let t=new WeakMap;function i(a,o){return o===rR?a.mapping=Cm:o===nR&&(a.mapping=Mm),a}function r(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){let o=a.mapping;if(o===rR||o===nR)if(t.has(a)){let l=t.get(a).texture;return i(l,a.mapping)}else{let l=a.image;if(l&&l.height>0){let c=new bRe(l.height/2);return c.fromEquirectangularTexture(e,a),t.set(a,c),a.addEventListener("dispose",n),i(c.texture,a.mapping)}else return null}}return a}function n(a){let o=a.target;o.removeEventListener("dispose",n);let l=t.get(o);l!==void 0&&(t.delete(o),l.dispose())}function s(){t=new WeakMap}return{get:r,dispose:s}}var I3=class extends Qf{constructor(e=-1,t=1,i=1,r=-1,n=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=n,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,n,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,n=i-e,s=i+e,a=r+t,o=r-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,s=n+l*this.view.width,a-=c*this.view.offsetY,o=a-c*this.view.height}this.projectionMatrix.makeOrthographic(n,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},H0=4,E9=[.125,.215,.35,.446,.526,.582],Fp=20,r4=new I3,A9=new qt,n4=null,Bp=(1+Math.sqrt(5))/2,Jg=1/Bp,T9=[new j(1,1,1),new j(-1,1,1),new j(1,1,-1),new j(-1,1,-1),new j(0,Bp,Jg),new j(0,Bp,-Jg),new j(Jg,0,Bp),new j(-Jg,0,Bp),new j(Bp,Jg,0),new j(-Bp,Jg,0)],C9=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){n4=this._renderer.getRenderTarget(),this._setSize(256);let n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(e,i,r,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=D9(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=P9(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(n4),e.scissorTest=!1,i_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Cm||e.mapping===Mm?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),n4=this._renderer.getRenderTarget();let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:yi,minFilter:yi,generateMipmaps:!1,type:Xh,format:$r,encoding:cc,depthBuffer:!1},r=M9(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=M9(e,t,i);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=lLe(n)),this._blurMaterial=cLe(n,e,t)}return r}_compileMaterial(e){let t=new kr(this._lodPlanes[0],e);this._renderer.compile(t,r4)}_sceneToCubeUV(e,t,i,r){let n=new ya(90,1,t,i),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(A9),o.toneMapping=xu,o.autoClear=!1;let u=new Yh({name:"PMREM.Background",side:Ds,depthWrite:!1,depthTest:!1}),h=new kr(new uc,u),f=!1,m=e.background;m?m.isColor&&(u.color.copy(m),e.background=null,f=!0):(u.color.copy(A9),f=!0);for(let g=0;g<6;g++){let v=g%3;v===0?(n.up.set(0,s[g],0),n.lookAt(a[g],0,0)):v===1?(n.up.set(0,0,s[g]),n.lookAt(0,a[g],0)):(n.up.set(0,s[g],0),n.lookAt(0,0,a[g]));let x=this._cubeSize;i_(r,v*x,g>2?x:0,x,x),o.setRenderTarget(r),f&&o.render(h,n),o.render(e,n)}h.geometry.dispose(),h.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=m}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Cm||e.mapping===Mm;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=D9()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=P9());let n=r?this._cubemapMaterial:this._equirectMaterial,s=new kr(this._lodPlanes[0],n),a=n.uniforms;a.envMap.value=e;let o=this._cubeSize;i_(t,0,0,3*o,2*o),i.setRenderTarget(t),i.render(s,r4)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){let n=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),s=T9[(r-1)%T9.length];this._blur(e,r-1,r,n,s)}t.autoClear=i}_blur(e,t,i,r,n){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",n),this._halfBlur(s,e,i,i,r,"longitudinal",n)}_halfBlur(e,t,i,r,n,s,a){let o=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let c=3,u=new kr(this._lodPlanes[r],l),h=l.uniforms,f=this._sizeLods[i]-1,m=isFinite(n)?Math.PI/(2*f):2*Math.PI/(2*Fp-1),g=n/m,v=isFinite(n)?1+Math.floor(c*g):Fp;v>Fp&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Fp}`);let x=[],b=0;for(let C=0;C<Fp;++C){let D=C/g,T=Math.exp(-D*D/2);x.push(T),C===0?b+=T:C<v&&(b+=2*T)}for(let C=0;C<x.length;C++)x[C]=x[C]/b;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=x,h.latitudinal.value=s==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:S}=this;h.dTheta.value=m,h.mipInt.value=S-i;let _=this._sizeLods[r],A=3*_*(r>S-H0?r-S+H0:0),M=4*(this._cubeSize-_);i_(t,A,M,3*_,2*_),o.setRenderTarget(t),o.render(u,r4)}};function lLe(e){let t=[],i=[],r=[],n=e,s=e-H0+1+E9.length;for(let a=0;a<s;a++){let o=Math.pow(2,n);i.push(o);let l=1/o;a>e-H0?l=E9[a-e+H0-1]:a===0&&(l=0),r.push(l);let c=1/(o-2),u=-c,h=1+c,f=[u,u,h,u,h,h,u,u,h,h,u,h],m=6,g=6,v=3,x=2,b=1,S=new Float32Array(v*g*m),_=new Float32Array(x*g*m),A=new Float32Array(b*g*m);for(let C=0;C<m;C++){let D=C%3*2/3-1,T=C>2?0:-1,R=[D,T,0,D+2/3,T,0,D+2/3,T+1,0,D,T,0,D+2/3,T+1,0,D,T+1,0];S.set(R,v*g*C),_.set(f,x*g*C);let O=[C,C,C,C,C,C];A.set(O,b*g*C)}let M=new Rt;M.setAttribute("position",new Xt(S,v)),M.setAttribute("uv",new Xt(_,x)),M.setAttribute("faceIndex",new Xt(A,b)),t.push(M),n>H0&&n--}return{lodPlanes:t,sizeLods:i,sigmas:r}}function M9(e,t,i){let r=new Ni(e,t,i);return r.texture.mapping=xw,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function i_(e,t,i,r,n){e.viewport.set(t,i,r,n),e.scissor.set(t,i,r,n)}function cLe(e,t,i){let r=new Float32Array(Fp),n=new j(0,1,0);return new Vi({name:"SphericalGaussianBlur",defines:{n:Fp,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:hk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Wn,depthTest:!1,depthWrite:!1})}function P9(){return new Vi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:hk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Wn,depthTest:!1,depthWrite:!1})}function D9(){return new Vi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:hk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Wn,depthTest:!1,depthWrite:!1})}function hk(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function uLe(e){let t=new WeakMap,i=null;function r(o){if(o&&o.isTexture){let l=o.mapping,c=l===rR||l===nR,u=l===Cm||l===Mm;if(c||u)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let h=t.get(o);return i===null&&(i=new C9(e)),h=c?i.fromEquirectangular(o,h):i.fromCubemap(o,h),t.set(o,h),h.texture}else{if(t.has(o))return t.get(o).texture;{let h=o.image;if(c&&h&&h.height>0||u&&h&&n(h)){i===null&&(i=new C9(e));let f=c?i.fromEquirectangular(o):i.fromCubemap(o);return t.set(o,f),o.addEventListener("dispose",s),f.texture}else return null}}}return o}function n(o){let l=0,c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){let l=o.target;l.removeEventListener("dispose",s);let c=t.get(l);c!==void 0&&(t.delete(l),c.dispose())}function a(){t=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:r,dispose:a}}function hLe(e){let t={};function i(r){if(t[r]!==void 0)return t[r];let n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r)}return t[r]=n,n}return{has:function(r){return i(r)!==null},init:function(r){r.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(r){let n=i(r);return n===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),n}}}function dLe(e,t,i,r){let n={},s=new WeakMap;function a(h){let f=h.target;f.index!==null&&t.remove(f.index);for(let g in f.attributes)t.remove(f.attributes[g]);f.removeEventListener("dispose",a),delete n[f.id];let m=s.get(f);m&&(t.remove(m),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,i.memory.geometries--}function o(h,f){return n[f.id]===!0||(f.addEventListener("dispose",a),n[f.id]=!0,i.memory.geometries++),f}function l(h){let f=h.attributes;for(let g in f)t.update(f[g],34962);let m=h.morphAttributes;for(let g in m){let v=m[g];for(let x=0,b=v.length;x<b;x++)t.update(v[x],34962)}}function c(h){let f=[],m=h.index,g=h.attributes.position,v=0;if(m!==null){let S=m.array;v=m.version;for(let _=0,A=S.length;_<A;_+=3){let M=S[_+0],C=S[_+1],D=S[_+2];f.push(M,C,C,D,D,M)}}else{let S=g.array;v=g.version;for(let _=0,A=S.length/3-1;_<A;_+=3){let M=_+0,C=_+1,D=_+2;f.push(M,C,C,D,D,M)}}let x=new(Ote(f)?Z0:Nte)(f,1);x.version=v;let b=s.get(h);b&&t.remove(b),s.set(h,x)}function u(h){let f=s.get(h);if(f){let m=h.index;m!==null&&f.version<m.version&&c(h)}else c(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:u}}function fLe(e,t,i,r){let n=r.isWebGL2,s;function a(f){s=f}let o,l;function c(f){o=f.type,l=f.bytesPerElement}function u(f,m){e.drawElements(s,m,o,f*l),i.update(m,s,1)}function h(f,m,g){if(g===0)return;let v,x;if(n)v=e,x="drawElementsInstanced";else if(v=t.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[x](s,m,o,f*l,g),i.update(m,s,g)}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=h}function pLe(e){let t={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(i.calls++,a){case 4:i.triangles+=o*(s/3);break;case 1:i.lines+=o*(s/2);break;case 3:i.lines+=o*(s-1);break;case 2:i.lines+=o*s;break;case 0:i.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function n(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:t,render:i,programs:null,autoReset:!0,reset:n,update:r}}function mLe(e,t){return e[0]-t[0]}function gLe(e,t){return Math.abs(t[1])-Math.abs(e[1])}function vLe(e,t,i){let r={},n=new Float32Array(8),s=new WeakMap,a=new ni,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,u,h,f){let m=c.morphTargetInfluences;if(t.isWebGL2===!0){let g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,v=g!==void 0?g.length:0,x=s.get(u);if(x===void 0||x.count!==v){let _=function(){V.dispose(),s.delete(u),u.removeEventListener("dispose",_)};x!==void 0&&x.texture.dispose();let A=u.morphAttributes.position!==void 0,M=u.morphAttributes.normal!==void 0,C=u.morphAttributes.color!==void 0,D=u.morphAttributes.position||[],T=u.morphAttributes.normal||[],R=u.morphAttributes.color||[],O=0;A===!0&&(O=1),M===!0&&(O=2),C===!0&&(O=3);let L=u.attributes.position.count*O,k=1;L>t.maxTextureSize&&(k=Math.ceil(L/t.maxTextureSize),L=t.maxTextureSize);let B=new Float32Array(L*k*4*v),V=new Bte(B,L,k,v);V.type=wr,V.needsUpdate=!0;let $=O*4;for(let q=0;q<v;q++){let Y=D[q],X=T[q],ne=R[q],F=L*k*4*q;for(let K=0;K<Y.count;K++){let re=K*$;A===!0&&(a.fromBufferAttribute(Y,K),B[F+re+0]=a.x,B[F+re+1]=a.y,B[F+re+2]=a.z,B[F+re+3]=0),M===!0&&(a.fromBufferAttribute(X,K),B[F+re+4]=a.x,B[F+re+5]=a.y,B[F+re+6]=a.z,B[F+re+7]=0),C===!0&&(a.fromBufferAttribute(ne,K),B[F+re+8]=a.x,B[F+re+9]=a.y,B[F+re+10]=a.z,B[F+re+11]=ne.itemSize===4?a.w:1)}}x={count:v,texture:V,size:new pe(L,k)},s.set(u,x),u.addEventListener("dispose",_)}let b=0;for(let _=0;_<m.length;_++)b+=m[_];let S=u.morphTargetsRelative?1:1-b;f.getUniforms().setValue(e,"morphTargetBaseInfluence",S),f.getUniforms().setValue(e,"morphTargetInfluences",m),f.getUniforms().setValue(e,"morphTargetsTexture",x.texture,i),f.getUniforms().setValue(e,"morphTargetsTextureSize",x.size)}else{let g=m===void 0?0:m.length,v=r[u.id];if(v===void 0||v.length!==g){v=[];for(let A=0;A<g;A++)v[A]=[A,0];r[u.id]=v}for(let A=0;A<g;A++){let M=v[A];M[0]=A,M[1]=m[A]}v.sort(gLe);for(let A=0;A<8;A++)A<g&&v[A][1]?(o[A][0]=v[A][0],o[A][1]=v[A][1]):(o[A][0]=Number.MAX_SAFE_INTEGER,o[A][1]=0);o.sort(mLe);let x=u.morphAttributes.position,b=u.morphAttributes.normal,S=0;for(let A=0;A<8;A++){let M=o[A],C=M[0],D=M[1];C!==Number.MAX_SAFE_INTEGER&&D?(x&&u.getAttribute("morphTarget"+A)!==x[C]&&u.setAttribute("morphTarget"+A,x[C]),b&&u.getAttribute("morphNormal"+A)!==b[C]&&u.setAttribute("morphNormal"+A,b[C]),n[A]=D,S+=D):(x&&u.hasAttribute("morphTarget"+A)===!0&&u.deleteAttribute("morphTarget"+A),b&&u.hasAttribute("morphNormal"+A)===!0&&u.deleteAttribute("morphNormal"+A),n[A]=0)}let _=u.morphTargetsRelative?1:1-S;f.getUniforms().setValue(e,"morphTargetBaseInfluence",_),f.getUniforms().setValue(e,"morphTargetInfluences",n)}}return{update:l}}function yLe(e,t,i,r){let n=new WeakMap;function s(l){let c=r.render.frame,u=l.geometry,h=t.get(l,u);return n.get(h)!==c&&(t.update(h),n.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.update(l.instanceMatrix,34962),l.instanceColor!==null&&i.update(l.instanceColor,34962)),h}function a(){n=new WeakMap}function o(l){let c=l.target;c.removeEventListener("dispose",o),i.remove(c.instanceMatrix),c.instanceColor!==null&&i.remove(c.instanceColor)}return{update:s,dispose:a}}var Fte=new on,Hte=new Bte,Gte=new sRe,Wte=new ck,I9=[],R9=[],O9=new Float32Array(16),L9=new Float32Array(9),k9=new Float32Array(4);function sy(e,t,i){let r=e[0];if(r==null||r<=0||r>0)return e;let n=t*i,s=I9[n];if(s===void 0&&(s=new Float32Array(n),I9[n]=s),t!==0){r.toArray(s,0);for(let a=1,o=0;a!==t;++a)o+=i,e[a].toArray(s,o)}return s}function us(e,t){if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(e[i]!==t[i])return!1;return!0}function hs(e,t){for(let i=0,r=t.length;i<r;i++)e[i]=t[i]}function R3(e,t){let i=R9[t];i===void 0&&(i=new Int32Array(t),R9[t]=i);for(let r=0;r!==t;++r)i[r]=e.allocateTextureUnit();return i}function xLe(e,t){let i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function bLe(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(us(i,t))return;e.uniform2fv(this.addr,t),hs(i,t)}}function wLe(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(us(i,t))return;e.uniform3fv(this.addr,t),hs(i,t)}}function SLe(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(us(i,t))return;e.uniform4fv(this.addr,t),hs(i,t)}}function _Le(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(us(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),hs(i,t)}else{if(us(i,r))return;k9.set(r),e.uniformMatrix2fv(this.addr,!1,k9),hs(i,r)}}function ELe(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(us(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),hs(i,t)}else{if(us(i,r))return;L9.set(r),e.uniformMatrix3fv(this.addr,!1,L9),hs(i,r)}}function ALe(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(us(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),hs(i,t)}else{if(us(i,r))return;O9.set(r),e.uniformMatrix4fv(this.addr,!1,O9),hs(i,r)}}function TLe(e,t){let i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function CLe(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(us(i,t))return;e.uniform2iv(this.addr,t),hs(i,t)}}function MLe(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(us(i,t))return;e.uniform3iv(this.addr,t),hs(i,t)}}function PLe(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(us(i,t))return;e.uniform4iv(this.addr,t),hs(i,t)}}function DLe(e,t){let i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function ILe(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(us(i,t))return;e.uniform2uiv(this.addr,t),hs(i,t)}}function RLe(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(us(i,t))return;e.uniform3uiv(this.addr,t),hs(i,t)}}function OLe(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(us(i,t))return;e.uniform4uiv(this.addr,t),hs(i,t)}}function LLe(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture2D(t||Fte,n)}function kLe(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture3D(t||Gte,n)}function zLe(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTextureCube(t||Wte,n)}function BLe(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture2DArray(t||Hte,n)}function jLe(e){switch(e){case 5126:return xLe;case 35664:return bLe;case 35665:return wLe;case 35666:return SLe;case 35674:return _Le;case 35675:return ELe;case 35676:return ALe;case 5124:case 35670:return TLe;case 35667:case 35671:return CLe;case 35668:case 35672:return MLe;case 35669:case 35673:return PLe;case 5125:return DLe;case 36294:return ILe;case 36295:return RLe;case 36296:return OLe;case 35678:case 36198:case 36298:case 36306:case 35682:return LLe;case 35679:case 36299:case 36307:return kLe;case 35680:case 36300:case 36308:case 36293:return zLe;case 36289:case 36303:case 36311:case 36292:return BLe}}function NLe(e,t){e.uniform1fv(this.addr,t)}function VLe(e,t){let i=sy(t,this.size,2);e.uniform2fv(this.addr,i)}function ULe(e,t){let i=sy(t,this.size,3);e.uniform3fv(this.addr,i)}function FLe(e,t){let i=sy(t,this.size,4);e.uniform4fv(this.addr,i)}function HLe(e,t){let i=sy(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function GLe(e,t){let i=sy(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function WLe(e,t){let i=sy(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function qLe(e,t){e.uniform1iv(this.addr,t)}function XLe(e,t){e.uniform2iv(this.addr,t)}function YLe(e,t){e.uniform3iv(this.addr,t)}function QLe(e,t){e.uniform4iv(this.addr,t)}function KLe(e,t){e.uniform1uiv(this.addr,t)}function ZLe(e,t){e.uniform2uiv(this.addr,t)}function $Le(e,t){e.uniform3uiv(this.addr,t)}function JLe(e,t){e.uniform4uiv(this.addr,t)}function eke(e,t,i){let r=this.cache,n=t.length,s=R3(i,n);us(r,s)||(e.uniform1iv(this.addr,s),hs(r,s));for(let a=0;a!==n;++a)i.setTexture2D(t[a]||Fte,s[a])}function tke(e,t,i){let r=this.cache,n=t.length,s=R3(i,n);us(r,s)||(e.uniform1iv(this.addr,s),hs(r,s));for(let a=0;a!==n;++a)i.setTexture3D(t[a]||Gte,s[a])}function ike(e,t,i){let r=this.cache,n=t.length,s=R3(i,n);us(r,s)||(e.uniform1iv(this.addr,s),hs(r,s));for(let a=0;a!==n;++a)i.setTextureCube(t[a]||Wte,s[a])}function rke(e,t,i){let r=this.cache,n=t.length,s=R3(i,n);us(r,s)||(e.uniform1iv(this.addr,s),hs(r,s));for(let a=0;a!==n;++a)i.setTexture2DArray(t[a]||Hte,s[a])}function nke(e){switch(e){case 5126:return NLe;case 35664:return VLe;case 35665:return ULe;case 35666:return FLe;case 35674:return HLe;case 35675:return GLe;case 35676:return WLe;case 5124:case 35670:return qLe;case 35667:case 35671:return XLe;case 35668:case 35672:return YLe;case 35669:case 35673:return QLe;case 5125:return KLe;case 36294:return ZLe;case 36295:return $Le;case 36296:return JLe;case 35678:case 36198:case 36298:case 36306:case 35682:return eke;case 35679:case 36299:case 36307:return tke;case 35680:case 36300:case 36308:case 36293:return ike;case 36289:case 36303:case 36311:case 36292:return rke}}var ske=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=jLe(t.type)}},ake=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=nke(t.type)}},oke=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){if(t===void 0)return;let r=this.seq;for(let n=0,s=r.length;n!==s;++n){let a=r[n];a.setValue(e,t[a.id],i)}}},s4=/(\w+)(\])?(\[|\.)?/g;function z9(e,t){e.seq.push(t),e.map[t.id]=t}function lke(e,t,i){let r=e.name,n=r.length;for(s4.lastIndex=0;;){let s=s4.exec(r),a=s4.lastIndex,o=s[1],l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===n){z9(i,c===void 0?new ske(o,e,t):new ake(o,e,t));break}else{let u=i.map[o];u===void 0&&(u=new oke(o),z9(i,u)),i=u}}}var NE=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){let n=e.getActiveUniform(t,r),s=e.getUniformLocation(t,n.name);lke(n,s,this)}}setValue(e,t,i,r){let n=this.map[t];n!==void 0&&n.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let n=0,s=t.length;n!==s;++n){let a=t[n],o=i[a.id];o.needsUpdate!==!1&&a.setValue(e,o.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,n=e.length;r!==n;++r){let s=e[r];s.id in t&&i.push(s)}return i}};function B9(e,t,i){let r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),r}var cke=0;function uke(e,t){let i=e.split(`
`),r=[],n=Math.max(t-6,0),s=Math.min(t+6,i.length);for(let a=n;a<s;a++){let o=a+1;r.push(`${o===t?">":" "} ${o}: ${i[a]}`)}return r.join(`
`)}function hke(e){switch(e){case cc:return["Linear","( value )"];case pi:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function j9(e,t,i){let r=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();if(r&&n==="")return"";let s=/ERROR: 0:(\d+)/.exec(n);if(s){let a=parseInt(s[1]);return i.toUpperCase()+`

`+n+`

`+uke(e.getShaderSource(t),a)}else return n}function dke(e,t){let i=hke(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function fke(e,t){let i;switch(t){case bIe:i="Linear";break;case wIe:i="Reinhard";break;case SIe:i="OptimizedCineon";break;case _Ie:i="ACESFilmic";break;case EIe:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function pke(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(fx).join(`
`)}function mke(e){let t=[];for(let i in e){let r=e[i];r!==!1&&t.push("#define "+i+" "+r)}return t.join(`
`)}function gke(e,t){let i={},r=e.getProgramParameter(t,35721);for(let n=0;n<r;n++){let s=e.getActiveAttrib(t,n),a=s.name,o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),i[a]={type:s.type,location:e.getAttribLocation(t,a),locationSize:o}}return i}function fx(e){return e!==""}function N9(e,t){let i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function V9(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var vke=/^[ \t]*#include +<([\w\d./]+)>/gm;function uR(e){return e.replace(vke,yke)}function yke(e,t){let i=vi[t];if(i===void 0)throw new Error("Can not resolve #include <"+t+">");return uR(i)}var xke=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function U9(e){return e.replace(xke,bke)}function bke(e,t,i,r){let n="";for(let s=parseInt(t);s<parseInt(i);s++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return n}function F9(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function wke(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===nk?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===$De?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===dx&&(t="SHADOWMAP_TYPE_VSM"),t}function Ske(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Cm:case Mm:t="ENVMAP_TYPE_CUBE";break;case xw:t="ENVMAP_TYPE_CUBE_UV";break}return t}function _ke(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Mm:t="ENVMAP_MODE_REFRACTION";break}return t}function Eke(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Ate:t="ENVMAP_BLENDING_MULTIPLY";break;case yIe:t="ENVMAP_BLENDING_MIX";break;case xIe:t="ENVMAP_BLENDING_ADD";break}return t}function Ake(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let i=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:r,maxMip:i}}function Tke(e,t,i,r){let n=e.getContext(),s=i.defines,a=i.vertexShader,o=i.fragmentShader,l=wke(i),c=Ske(i),u=_ke(i),h=Eke(i),f=Ake(i),m=i.isWebGL2?"":pke(i),g=mke(s),v=n.createProgram(),x,b,S=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(x=[g].filter(fx).join(`
`),x.length>0&&(x+=`
`),b=[m,g].filter(fx).join(`
`),b.length>0&&(b+=`
`)):(x=[F9(i),"#define SHADER_NAME "+i.shaderName,g,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(fx).join(`
`),b=[m,F9(i),"#define SHADER_NAME "+i.shaderName,g,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+u:"",i.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==xu?"#define TONE_MAPPING":"",i.toneMapping!==xu?vi.tonemapping_pars_fragment:"",i.toneMapping!==xu?fke("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",vi.encodings_pars_fragment,dke("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(fx).join(`
`)),a=uR(a),a=N9(a,i),a=V9(a,i),o=uR(o),o=N9(o,i),o=V9(o,i),a=U9(a),o=U9(o),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,b=["#define varying in",i.glslVersion===oR?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===oR?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);let _=S+x+a,A=S+b+o,M=B9(n,35633,_),C=B9(n,35632,A);if(n.attachShader(v,M),n.attachShader(v,C),i.index0AttributeName!==void 0?n.bindAttribLocation(v,0,i.index0AttributeName):i.morphTargets===!0&&n.bindAttribLocation(v,0,"position"),n.linkProgram(v),e.debug.checkShaderErrors){let R=n.getProgramInfoLog(v).trim(),O=n.getShaderInfoLog(M).trim(),L=n.getShaderInfoLog(C).trim(),k=!0,B=!0;if(n.getProgramParameter(v,35714)===!1){k=!1;let V=j9(n,M,"vertex"),$=j9(n,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(v,35715)+`

Program Info Log: `+R+`
`+V+`
`+$)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(O===""||L==="")&&(B=!1);B&&(this.diagnostics={runnable:k,programLog:R,vertexShader:{log:O,prefix:x},fragmentShader:{log:L,prefix:b}})}n.deleteShader(M),n.deleteShader(C);let D;this.getUniforms=function(){return D===void 0&&(D=new NE(n,v)),D};let T;return this.getAttributes=function(){return T===void 0&&(T=gke(n,v)),T},this.destroy=function(){r.releaseStatesOfProgram(this),n.deleteProgram(v),this.program=void 0},this.name=i.shaderName,this.id=cke++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=C,this}var Cke=0,Mke=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),n=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(n)===!1&&(s.add(n),n.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new Pke(e),t.set(e,i)),i}},Pke=class{constructor(e){this.id=Cke++,this.code=e,this.usedTimes=0}};function Dke(e,t,i,r,n,s,a){let o=new lk,l=new Mke,c=[],u=n.isWebGL2,h=n.logarithmicDepthBuffer,f=n.vertexTextures,m=n.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(T,R,O,L,k){let B=L.fog,V=k.geometry,$=T.isMeshStandardMaterial?L.environment:null,q=(T.isMeshStandardMaterial?i:t).get(T.envMap||$),Y=q&&q.mapping===xw?q.image.height:null,X=g[T.type];T.precision!==null&&(m=n.getMaxPrecision(T.precision),m!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",m,"instead."));let ne=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,F=ne!==void 0?ne.length:0,K=0;V.morphAttributes.position!==void 0&&(K=1),V.morphAttributes.normal!==void 0&&(K=2),V.morphAttributes.color!==void 0&&(K=3);let re,oe,ce,de;if(X){let _e=eu[X];re=_e.vertexShader,oe=_e.fragmentShader}else re=T.vertexShader,oe=T.fragmentShader,l.update(T),ce=l.getVertexShaderID(T),de=l.getFragmentShaderID(T);let se=e.getRenderTarget(),xe=T.alphaTest>0,fe=T.clearcoat>0,ye=T.iridescence>0;return{isWebGL2:u,shaderID:X,shaderName:T.type,vertexShader:re,fragmentShader:oe,defines:T.defines,customVertexShaderID:ce,customFragmentShaderID:de,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:m,instancing:k.isInstancedMesh===!0,instancingColor:k.isInstancedMesh===!0&&k.instanceColor!==null,supportsVertexTextures:f,outputEncoding:se===null?e.outputEncoding:se.isXRRenderTarget===!0?se.texture.encoding:cc,map:!!T.map,matcap:!!T.matcap,envMap:!!q,envMapMode:q&&q.mapping,envMapCubeUVHeight:Y,lightMap:!!T.lightMap,aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===VIe,tangentSpaceNormalMap:T.normalMapType===NIe,decodeVideoTexture:!!T.map&&T.map.isVideoTexture===!0&&T.map.encoding===pi,clearcoat:fe,clearcoatMap:fe&&!!T.clearcoatMap,clearcoatRoughnessMap:fe&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:fe&&!!T.clearcoatNormalMap,iridescence:ye,iridescenceMap:ye&&!!T.iridescenceMap,iridescenceThicknessMap:ye&&!!T.iridescenceThicknessMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,opaque:T.transparent===!1&&T.blending===fm,alphaMap:!!T.alphaMap,alphaTest:xe,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!V.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.iridescenceMap||!!T.iridescenceThicknessMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||!!T.sheenRoughnessMap,uvsVertexOnly:!(T.map||T.bumpMap||T.normalMap||T.specularMap||T.alphaMap||T.emissiveMap||T.roughnessMap||T.metalnessMap||T.clearcoatNormalMap||T.iridescenceMap||T.iridescenceThicknessMap||T.transmission>0||T.transmissionMap||T.thicknessMap||T.specularIntensityMap||T.specularColorMap||T.sheen>0||T.sheenColorMap||T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!B,useFog:T.fog===!0,fogExp2:B&&B.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:h,skinning:k.isSkinnedMesh===!0,morphTargets:V.morphAttributes.position!==void 0,morphNormals:V.morphAttributes.normal!==void 0,morphColors:V.morphAttributes.color!==void 0,morphTargetsCount:F,morphTextureStride:K,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:T.dithering,shadowMapEnabled:e.shadowMap.enabled&&O.length>0,shadowMapType:e.shadowMap.type,toneMapping:T.toneMapped?e.toneMapping:xu,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===wa,flipSided:T.side===Ds,useDepthPacking:!!T.depthPacking,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function x(T){let R=[];if(T.shaderID?R.push(T.shaderID):(R.push(T.customVertexShaderID),R.push(T.customFragmentShaderID)),T.defines!==void 0)for(let O in T.defines)R.push(O),R.push(T.defines[O]);return T.isRawShaderMaterial===!1&&(b(R,T),S(R,T),R.push(e.outputEncoding)),R.push(T.customProgramCacheKey),R.join()}function b(T,R){T.push(R.precision),T.push(R.outputEncoding),T.push(R.envMapMode),T.push(R.envMapCubeUVHeight),T.push(R.combine),T.push(R.vertexUvs),T.push(R.fogExp2),T.push(R.sizeAttenuation),T.push(R.morphTargetsCount),T.push(R.morphAttributeCount),T.push(R.numDirLights),T.push(R.numPointLights),T.push(R.numSpotLights),T.push(R.numSpotLightMaps),T.push(R.numHemiLights),T.push(R.numRectAreaLights),T.push(R.numDirLightShadows),T.push(R.numPointLightShadows),T.push(R.numSpotLightShadows),T.push(R.numSpotLightShadowsWithMaps),T.push(R.shadowMapType),T.push(R.toneMapping),T.push(R.numClippingPlanes),T.push(R.numClipIntersection),T.push(R.depthPacking)}function S(T,R){o.disableAll(),R.isWebGL2&&o.enable(0),R.supportsVertexTextures&&o.enable(1),R.instancing&&o.enable(2),R.instancingColor&&o.enable(3),R.map&&o.enable(4),R.matcap&&o.enable(5),R.envMap&&o.enable(6),R.lightMap&&o.enable(7),R.aoMap&&o.enable(8),R.emissiveMap&&o.enable(9),R.bumpMap&&o.enable(10),R.normalMap&&o.enable(11),R.objectSpaceNormalMap&&o.enable(12),R.tangentSpaceNormalMap&&o.enable(13),R.clearcoat&&o.enable(14),R.clearcoatMap&&o.enable(15),R.clearcoatRoughnessMap&&o.enable(16),R.clearcoatNormalMap&&o.enable(17),R.iridescence&&o.enable(18),R.iridescenceMap&&o.enable(19),R.iridescenceThicknessMap&&o.enable(20),R.displacementMap&&o.enable(21),R.specularMap&&o.enable(22),R.roughnessMap&&o.enable(23),R.metalnessMap&&o.enable(24),R.gradientMap&&o.enable(25),R.alphaMap&&o.enable(26),R.alphaTest&&o.enable(27),R.vertexColors&&o.enable(28),R.vertexAlphas&&o.enable(29),R.vertexUvs&&o.enable(30),R.vertexTangents&&o.enable(31),R.uvsVertexOnly&&o.enable(32),T.push(o.mask),o.disableAll(),R.fog&&o.enable(0),R.useFog&&o.enable(1),R.flatShading&&o.enable(2),R.logarithmicDepthBuffer&&o.enable(3),R.skinning&&o.enable(4),R.morphTargets&&o.enable(5),R.morphNormals&&o.enable(6),R.morphColors&&o.enable(7),R.premultipliedAlpha&&o.enable(8),R.shadowMapEnabled&&o.enable(9),R.physicallyCorrectLights&&o.enable(10),R.doubleSided&&o.enable(11),R.flipSided&&o.enable(12),R.useDepthPacking&&o.enable(13),R.dithering&&o.enable(14),R.specularIntensityMap&&o.enable(15),R.specularColorMap&&o.enable(16),R.transmission&&o.enable(17),R.transmissionMap&&o.enable(18),R.thicknessMap&&o.enable(19),R.sheen&&o.enable(20),R.sheenColorMap&&o.enable(21),R.sheenRoughnessMap&&o.enable(22),R.decodeVideoTexture&&o.enable(23),R.opaque&&o.enable(24),T.push(o.mask)}function _(T){let R=g[T.type],O;if(R){let L=eu[R];O=ny.clone(L.uniforms)}else O=T.uniforms;return O}function A(T,R){let O;for(let L=0,k=c.length;L<k;L++){let B=c[L];if(B.cacheKey===R){O=B,++O.usedTimes;break}}return O===void 0&&(O=new Tke(e,R,T,s),c.push(O)),O}function M(T){if(--T.usedTimes===0){let R=c.indexOf(T);c[R]=c[c.length-1],c.pop(),T.destroy()}}function C(T){l.remove(T)}function D(){l.dispose()}return{getParameters:v,getProgramCacheKey:x,getUniforms:_,acquireProgram:A,releaseProgram:M,releaseShaderCache:C,programs:c,dispose:D}}function Ike(){let e=new WeakMap;function t(s){let a=e.get(s);return a===void 0&&(a={},e.set(s,a)),a}function i(s){e.delete(s)}function r(s,a,o){e.get(s)[a]=o}function n(){e=new WeakMap}return{get:t,remove:i,update:r,dispose:n}}function Rke(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function H9(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function G9(){let e=[],t=0,i=[],r=[],n=[];function s(){t=0,i.length=0,r.length=0,n.length=0}function a(h,f,m,g,v,x){let b=e[t];return b===void 0?(b={id:h.id,object:h,geometry:f,material:m,groupOrder:g,renderOrder:h.renderOrder,z:v,group:x},e[t]=b):(b.id=h.id,b.object=h,b.geometry=f,b.material=m,b.groupOrder=g,b.renderOrder=h.renderOrder,b.z=v,b.group=x),t++,b}function o(h,f,m,g,v,x){let b=a(h,f,m,g,v,x);m.transmission>0?r.push(b):m.transparent===!0?n.push(b):i.push(b)}function l(h,f,m,g,v,x){let b=a(h,f,m,g,v,x);m.transmission>0?r.unshift(b):m.transparent===!0?n.unshift(b):i.unshift(b)}function c(h,f){i.length>1&&i.sort(h||Rke),r.length>1&&r.sort(f||H9),n.length>1&&n.sort(f||H9)}function u(){for(let h=t,f=e.length;h<f;h++){let m=e[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:i,transmissive:r,transparent:n,init:s,push:o,unshift:l,finish:u,sort:c}}function Oke(){let e=new WeakMap;function t(r,n){let s=e.get(r),a;return s===void 0?(a=new G9,e.set(r,[a])):n>=s.length?(a=new G9,s.push(a)):a=s[n],a}function i(){e=new WeakMap}return{get:t,dispose:i}}function Lke(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new j,color:new qt};break;case"SpotLight":i={position:new j,direction:new j,color:new qt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new j,color:new qt,distance:0,decay:0};break;case"HemisphereLight":i={direction:new j,skyColor:new qt,groundColor:new qt};break;case"RectAreaLight":i={color:new qt,position:new j,halfWidth:new j,halfHeight:new j};break}return e[t.id]=i,i}}}function kke(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let i;switch(t.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=i,i}}}var zke=0;function Bke(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function jke(e,t){let i=new Lke,r=kke(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)n.probe.push(new j);let s=new j,a=new tt,o=new tt;function l(u,h){let f=0,m=0,g=0;for(let L=0;L<9;L++)n.probe[L].set(0,0,0);let v=0,x=0,b=0,S=0,_=0,A=0,M=0,C=0,D=0,T=0;u.sort(Bke);let R=h!==!0?Math.PI:1;for(let L=0,k=u.length;L<k;L++){let B=u[L],V=B.color,$=B.intensity,q=B.distance,Y=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)f+=V.r*$*R,m+=V.g*$*R,g+=V.b*$*R;else if(B.isLightProbe)for(let X=0;X<9;X++)n.probe[X].addScaledVector(B.sh.coefficients[X],$);else if(B.isDirectionalLight){let X=i.get(B);if(X.color.copy(B.color).multiplyScalar(B.intensity*R),B.castShadow){let ne=B.shadow,F=r.get(B);F.shadowBias=ne.bias,F.shadowNormalBias=ne.normalBias,F.shadowRadius=ne.radius,F.shadowMapSize=ne.mapSize,n.directionalShadow[v]=F,n.directionalShadowMap[v]=Y,n.directionalShadowMatrix[v]=B.shadow.matrix,A++}n.directional[v]=X,v++}else if(B.isSpotLight){let X=i.get(B);X.position.setFromMatrixPosition(B.matrixWorld),X.color.copy(V).multiplyScalar($*R),X.distance=q,X.coneCos=Math.cos(B.angle),X.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),X.decay=B.decay,n.spot[b]=X;let ne=B.shadow;if(B.map&&(n.spotLightMap[D]=B.map,D++,ne.updateMatrices(B),B.castShadow&&T++),n.spotLightMatrix[b]=ne.matrix,B.castShadow){let F=r.get(B);F.shadowBias=ne.bias,F.shadowNormalBias=ne.normalBias,F.shadowRadius=ne.radius,F.shadowMapSize=ne.mapSize,n.spotShadow[b]=F,n.spotShadowMap[b]=Y,C++}b++}else if(B.isRectAreaLight){let X=i.get(B);X.color.copy(V).multiplyScalar($),X.halfWidth.set(B.width*.5,0,0),X.halfHeight.set(0,B.height*.5,0),n.rectArea[S]=X,S++}else if(B.isPointLight){let X=i.get(B);if(X.color.copy(B.color).multiplyScalar(B.intensity*R),X.distance=B.distance,X.decay=B.decay,B.castShadow){let ne=B.shadow,F=r.get(B);F.shadowBias=ne.bias,F.shadowNormalBias=ne.normalBias,F.shadowRadius=ne.radius,F.shadowMapSize=ne.mapSize,F.shadowCameraNear=ne.camera.near,F.shadowCameraFar=ne.camera.far,n.pointShadow[x]=F,n.pointShadowMap[x]=Y,n.pointShadowMatrix[x]=B.shadow.matrix,M++}n.point[x]=X,x++}else if(B.isHemisphereLight){let X=i.get(B);X.skyColor.copy(B.color).multiplyScalar($*R),X.groundColor.copy(B.groundColor).multiplyScalar($*R),n.hemi[_]=X,_++}}S>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=mt.LTC_FLOAT_1,n.rectAreaLTC2=mt.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=mt.LTC_HALF_1,n.rectAreaLTC2=mt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=f,n.ambient[1]=m,n.ambient[2]=g;let O=n.hash;(O.directionalLength!==v||O.pointLength!==x||O.spotLength!==b||O.rectAreaLength!==S||O.hemiLength!==_||O.numDirectionalShadows!==A||O.numPointShadows!==M||O.numSpotShadows!==C||O.numSpotMaps!==D)&&(n.directional.length=v,n.spot.length=b,n.rectArea.length=S,n.point.length=x,n.hemi.length=_,n.directionalShadow.length=A,n.directionalShadowMap.length=A,n.pointShadow.length=M,n.pointShadowMap.length=M,n.spotShadow.length=C,n.spotShadowMap.length=C,n.directionalShadowMatrix.length=A,n.pointShadowMatrix.length=M,n.spotLightMatrix.length=C+D-T,n.spotLightMap.length=D,n.numSpotLightShadowsWithMaps=T,O.directionalLength=v,O.pointLength=x,O.spotLength=b,O.rectAreaLength=S,O.hemiLength=_,O.numDirectionalShadows=A,O.numPointShadows=M,O.numSpotShadows=C,O.numSpotMaps=D,n.version=zke++)}function c(u,h){let f=0,m=0,g=0,v=0,x=0,b=h.matrixWorldInverse;for(let S=0,_=u.length;S<_;S++){let A=u[S];if(A.isDirectionalLight){let M=n.directional[f];M.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(b),f++}else if(A.isSpotLight){let M=n.spot[g];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(b),M.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(b),g++}else if(A.isRectAreaLight){let M=n.rectArea[v];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(b),o.identity(),a.copy(A.matrixWorld),a.premultiply(b),o.extractRotation(a),M.halfWidth.set(A.width*.5,0,0),M.halfHeight.set(0,A.height*.5,0),M.halfWidth.applyMatrix4(o),M.halfHeight.applyMatrix4(o),v++}else if(A.isPointLight){let M=n.point[m];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(b),m++}else if(A.isHemisphereLight){let M=n.hemi[x];M.direction.setFromMatrixPosition(A.matrixWorld),M.direction.transformDirection(b),x++}}}return{setup:l,setupView:c,state:n}}function W9(e,t){let i=new jke(e,t),r=[],n=[];function s(){r.length=0,n.length=0}function a(u){r.push(u)}function o(u){n.push(u)}function l(u){i.setup(r,u)}function c(u){i.setupView(r,u)}return{init:s,state:{lightsArray:r,shadowsArray:n,lights:i},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:o}}function Nke(e,t){let i=new WeakMap;function r(s,a=0){let o=i.get(s),l;return o===void 0?(l=new W9(e,t),i.set(s,[l])):a>=o.length?(l=new W9(e,t),o.push(l)):l=o[a],l}function n(){i=new WeakMap}return{get:r,dispose:n}}var qte=class extends bw{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=td,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Vke=class extends bw{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new j,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},Uke=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Fke=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Hke(e,t,i){let r=new uk,n=new pe,s=new pe,a=new ni,o=new qte({depthPacking:Ite}),l=new Vke,c={},u=i.maxTextureSize,h={[lc]:Ds,[Ds]:lc,[wa]:wa},f=new Vi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pe},radius:{value:4}},vertexShader:Uke,fragmentShader:Fke}),m=f.clone();m.defines.HORIZONTAL_PASS=1;let g=new Rt;g.setAttribute("position",new Xt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let v=new kr(g,f),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=nk,this.render=function(A,M,C){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||A.length===0)return;let D=e.getRenderTarget(),T=e.getActiveCubeFace(),R=e.getActiveMipmapLevel(),O=e.state;O.setBlending(Wn),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);for(let L=0,k=A.length;L<k;L++){let B=A[L],V=B.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;n.copy(V.mapSize);let $=V.getFrameExtents();if(n.multiply($),s.copy(V.mapSize),(n.x>u||n.y>u)&&(n.x>u&&(s.x=Math.floor(u/$.x),n.x=s.x*$.x,V.mapSize.x=s.x),n.y>u&&(s.y=Math.floor(u/$.y),n.y=s.y*$.y,V.mapSize.y=s.y)),V.map===null){let Y=this.type!==dx?{minFilter:_i,magFilter:_i}:{};V.map=new Ni(n.x,n.y,Y),V.map.texture.name=B.name+".shadowMap",V.camera.updateProjectionMatrix()}e.setRenderTarget(V.map),e.clear();let q=V.getViewportCount();for(let Y=0;Y<q;Y++){let X=V.getViewport(Y);a.set(s.x*X.x,s.y*X.y,s.x*X.z,s.y*X.w),O.viewport(a),V.updateMatrices(B,Y),r=V.getFrustum(),_(M,C,V.camera,B,this.type)}V.isPointLightShadow!==!0&&this.type===dx&&b(V,C),V.needsUpdate=!1}x.needsUpdate=!1,e.setRenderTarget(D,T,R)};function b(A,M){let C=t.update(v);f.defines.VSM_SAMPLES!==A.blurSamples&&(f.defines.VSM_SAMPLES=A.blurSamples,m.defines.VSM_SAMPLES=A.blurSamples,f.needsUpdate=!0,m.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new Ni(n.x,n.y)),f.uniforms.shadow_pass.value=A.map.texture,f.uniforms.resolution.value=A.mapSize,f.uniforms.radius.value=A.radius,e.setRenderTarget(A.mapPass),e.clear(),e.renderBufferDirect(M,null,C,f,v,null),m.uniforms.shadow_pass.value=A.mapPass.texture,m.uniforms.resolution.value=A.mapSize,m.uniforms.radius.value=A.radius,e.setRenderTarget(A.map),e.clear(),e.renderBufferDirect(M,null,C,m,v,null)}function S(A,M,C,D,T,R){let O=null,L=C.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(L!==void 0)O=L;else if(O=C.isPointLight===!0?l:o,e.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){let k=O.uuid,B=M.uuid,V=c[k];V===void 0&&(V={},c[k]=V);let $=V[B];$===void 0&&($=O.clone(),V[B]=$),O=$}return O.visible=M.visible,O.wireframe=M.wireframe,R===dx?O.side=M.shadowSide!==null?M.shadowSide:M.side:O.side=M.shadowSide!==null?M.shadowSide:h[M.side],O.alphaMap=M.alphaMap,O.alphaTest=M.alphaTest,O.map=M.map,O.clipShadows=M.clipShadows,O.clippingPlanes=M.clippingPlanes,O.clipIntersection=M.clipIntersection,O.displacementMap=M.displacementMap,O.displacementScale=M.displacementScale,O.displacementBias=M.displacementBias,O.wireframeLinewidth=M.wireframeLinewidth,O.linewidth=M.linewidth,C.isPointLight===!0&&O.isMeshDistanceMaterial===!0&&(O.referencePosition.setFromMatrixPosition(C.matrixWorld),O.nearDistance=D,O.farDistance=T),O}function _(A,M,C,D,T){if(A.visible===!1)return;if(A.layers.test(M.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&T===dx)&&(!A.frustumCulled||r.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,A.matrixWorld);let O=t.update(A),L=A.material;if(Array.isArray(L)){let k=O.groups;for(let B=0,V=k.length;B<V;B++){let $=k[B],q=L[$.materialIndex];if(q&&q.visible){let Y=S(A,q,D,C.near,C.far,T);e.renderBufferDirect(C,null,O,Y,A,$)}}}else if(L.visible){let k=S(A,L,D,C.near,C.far,T);e.renderBufferDirect(C,null,O,k,A,null)}}let R=A.children;for(let O=0,L=R.length;O<L;O++)_(R[O],M,C,D,T)}}function Gke(e,t,i){let r=i.isWebGL2;function n(){let be=!1,Ue=new ni,qe=null,ut=new ni(0,0,0,0);return{setMask:function(Bt){qe!==Bt&&!be&&(e.colorMask(Bt,Bt,Bt,Bt),qe=Bt)},setLocked:function(Bt){be=Bt},setClear:function(Bt,si,hi,Hi,Yn){Yn===!0&&(Bt*=Hi,si*=Hi,hi*=Hi),Ue.set(Bt,si,hi,Hi),ut.equals(Ue)===!1&&(e.clearColor(Bt,si,hi,Hi),ut.copy(Ue))},reset:function(){be=!1,qe=null,ut.set(-1,0,0,0)}}}function s(){let be=!1,Ue=null,qe=null,ut=null;return{setTest:function(Bt){Bt?xe(2929):fe(2929)},setMask:function(Bt){Ue!==Bt&&!be&&(e.depthMask(Bt),Ue=Bt)},setFunc:function(Bt){if(qe!==Bt){switch(Bt){case hIe:e.depthFunc(512);break;case dIe:e.depthFunc(519);break;case fIe:e.depthFunc(513);break;case iR:e.depthFunc(515);break;case pIe:e.depthFunc(514);break;case mIe:e.depthFunc(518);break;case gIe:e.depthFunc(516);break;case vIe:e.depthFunc(517);break;default:e.depthFunc(515)}qe=Bt}},setLocked:function(Bt){be=Bt},setClear:function(Bt){ut!==Bt&&(e.clearDepth(Bt),ut=Bt)},reset:function(){be=!1,Ue=null,qe=null,ut=null}}}function a(){let be=!1,Ue=null,qe=null,ut=null,Bt=null,si=null,hi=null,Hi=null,Yn=null;return{setTest:function(Pi){be||(Pi?xe(2960):fe(2960))},setMask:function(Pi){Ue!==Pi&&!be&&(e.stencilMask(Pi),Ue=Pi)},setFunc:function(Pi,In,bi){(qe!==Pi||ut!==In||Bt!==bi)&&(e.stencilFunc(Pi,In,bi),qe=Pi,ut=In,Bt=bi)},setOp:function(Pi,In,bi){(si!==Pi||hi!==In||Hi!==bi)&&(e.stencilOp(Pi,In,bi),si=Pi,hi=In,Hi=bi)},setLocked:function(Pi){be=Pi},setClear:function(Pi){Yn!==Pi&&(e.clearStencil(Pi),Yn=Pi)},reset:function(){be=!1,Ue=null,qe=null,ut=null,Bt=null,si=null,hi=null,Hi=null,Yn=null}}}let o=new n,l=new s,c=new a,u=new WeakMap,h=new WeakMap,f={},m={},g=new WeakMap,v=[],x=null,b=!1,S=null,_=null,A=null,M=null,C=null,D=null,T=null,R=!1,O=null,L=null,k=null,B=null,V=null,$=e.getParameter(35661),q=!1,Y=0,X=e.getParameter(7938);X.indexOf("WebGL")!==-1?(Y=parseFloat(/^WebGL (\d)/.exec(X)[1]),q=Y>=1):X.indexOf("OpenGL ES")!==-1&&(Y=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),q=Y>=2);let ne=null,F={},K=e.getParameter(3088),re=e.getParameter(2978),oe=new ni().fromArray(K),ce=new ni().fromArray(re);function de(be,Ue,qe){let ut=new Uint8Array(4),Bt=e.createTexture();e.bindTexture(be,Bt),e.texParameteri(be,10241,9728),e.texParameteri(be,10240,9728);for(let si=0;si<qe;si++)e.texImage2D(Ue+si,0,6408,1,1,0,6408,5121,ut);return Bt}let se={};se[3553]=de(3553,3553,1),se[34067]=de(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),xe(2929),l.setFunc(iR),pt(!1),ct(BF),xe(2884),Ke(Wn);function xe(be){f[be]!==!0&&(e.enable(be),f[be]=!0)}function fe(be){f[be]!==!1&&(e.disable(be),f[be]=!1)}function ye(be,Ue){return m[be]!==Ue?(e.bindFramebuffer(be,Ue),m[be]=Ue,r&&(be===36009&&(m[36160]=Ue),be===36160&&(m[36009]=Ue)),!0):!1}function _e(be,Ue){let qe=v,ut=!1;if(be)if(qe=g.get(Ue),qe===void 0&&(qe=[],g.set(Ue,qe)),be.isWebGLMultipleRenderTargets){let Bt=be.texture;if(qe.length!==Bt.length||qe[0]!==36064){for(let si=0,hi=Bt.length;si<hi;si++)qe[si]=36064+si;qe.length=Bt.length,ut=!0}}else qe[0]!==36064&&(qe[0]=36064,ut=!0);else qe[0]!==1029&&(qe[0]=1029,ut=!0);ut&&(i.isWebGL2?e.drawBuffers(qe):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(qe))}function Te(be){return x!==be?(e.useProgram(be),x=be,!0):!1}let Ce={[T0]:32774,[eIe]:32778,[tIe]:32779};if(r)Ce[UF]=32775,Ce[FF]=32776;else{let be=t.get("EXT_blend_minmax");be!==null&&(Ce[UF]=be.MIN_EXT,Ce[FF]=be.MAX_EXT)}let Le={[iIe]:0,[rIe]:1,[nIe]:768,[_te]:770,[uIe]:776,[lIe]:774,[aIe]:772,[sIe]:769,[Ete]:771,[cIe]:775,[oIe]:773};function Ke(be,Ue,qe,ut,Bt,si,hi,Hi){if(be===Wn){b===!0&&(fe(3042),b=!1);return}if(b===!1&&(xe(3042),b=!0),be!==JDe){if(be!==S||Hi!==R){if((_!==T0||C!==T0)&&(e.blendEquation(32774),_=T0,C=T0),Hi)switch(be){case fm:e.blendFuncSeparate(1,771,1,771);break;case jF:e.blendFunc(1,1);break;case NF:e.blendFuncSeparate(0,769,0,1);break;case VF:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",be);break}else switch(be){case fm:e.blendFuncSeparate(770,771,1,771);break;case jF:e.blendFunc(770,1);break;case NF:e.blendFuncSeparate(0,769,0,1);break;case VF:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",be);break}A=null,M=null,D=null,T=null,S=be,R=Hi}return}Bt=Bt||Ue,si=si||qe,hi=hi||ut,(Ue!==_||Bt!==C)&&(e.blendEquationSeparate(Ce[Ue],Ce[Bt]),_=Ue,C=Bt),(qe!==A||ut!==M||si!==D||hi!==T)&&(e.blendFuncSeparate(Le[qe],Le[ut],Le[si],Le[hi]),A=qe,M=ut,D=si,T=hi),S=be,R=!1}function Xe(be,Ue){be.side===wa?fe(2884):xe(2884);let qe=be.side===Ds;Ue&&(qe=!qe),pt(qe),be.blending===fm&&be.transparent===!1?Ke(Wn):Ke(be.blending,be.blendEquation,be.blendSrc,be.blendDst,be.blendEquationAlpha,be.blendSrcAlpha,be.blendDstAlpha,be.premultipliedAlpha),l.setFunc(be.depthFunc),l.setTest(be.depthTest),l.setMask(be.depthWrite),o.setMask(be.colorWrite);let ut=be.stencilWrite;c.setTest(ut),ut&&(c.setMask(be.stencilWriteMask),c.setFunc(be.stencilFunc,be.stencilRef,be.stencilFuncMask),c.setOp(be.stencilFail,be.stencilZFail,be.stencilZPass)),rt(be.polygonOffset,be.polygonOffsetFactor,be.polygonOffsetUnits),be.alphaToCoverage===!0?xe(32926):fe(32926)}function pt(be){O!==be&&(be?e.frontFace(2304):e.frontFace(2305),O=be)}function ct(be){be!==KDe?(xe(2884),be!==L&&(be===BF?e.cullFace(1029):be===ZDe?e.cullFace(1028):e.cullFace(1032))):fe(2884),L=be}function ot(be){be!==k&&(q&&e.lineWidth(be),k=be)}function rt(be,Ue,qe){be?(xe(32823),(B!==Ue||V!==qe)&&(e.polygonOffset(Ue,qe),B=Ue,V=qe)):fe(32823)}function Dt(be){be?xe(3089):fe(3089)}function At(be){be===void 0&&(be=33984+$-1),ne!==be&&(e.activeTexture(be),ne=be)}function he(be,Ue,qe){qe===void 0&&(ne===null?qe=33984+$-1:qe=ne);let ut=F[qe];ut===void 0&&(ut={type:void 0,texture:void 0},F[qe]=ut),(ut.type!==be||ut.texture!==Ue)&&(ne!==qe&&(e.activeTexture(qe),ne=qe),e.bindTexture(be,Ue||se[be]),ut.type=be,ut.texture=Ue)}function ie(){let be=F[ne];be!==void 0&&be.type!==void 0&&(e.bindTexture(be.type,null),be.type=void 0,be.texture=void 0)}function Me(){try{e.compressedTexImage2D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function $e(){try{e.compressedTexImage3D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Z(){try{e.texSubImage2D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function We(){try{e.texSubImage3D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function dt(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function lt(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Ve(){try{e.texStorage2D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Tt(){try{e.texStorage3D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function ft(){try{e.texImage2D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function St(){try{e.texImage3D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Ct(be){oe.equals(be)===!1&&(e.scissor(be.x,be.y,be.z,be.w),oe.copy(be))}function bt(be){ce.equals(be)===!1&&(e.viewport(be.x,be.y,be.z,be.w),ce.copy(be))}function It(be,Ue){let qe=h.get(Ue);qe===void 0&&(qe=new WeakMap,h.set(Ue,qe));let ut=qe.get(be);ut===void 0&&(ut=e.getUniformBlockIndex(Ue,be.name),qe.set(be,ut))}function Ei(be,Ue){let qe=h.get(Ue).get(be);u.get(Ue)!==qe&&(e.uniformBlockBinding(Ue,qe,be.__bindingPointIndex),u.set(Ue,qe))}function er(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),r===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),f={},ne=null,F={},m={},g=new WeakMap,v=[],x=null,b=!1,S=null,_=null,A=null,M=null,C=null,D=null,T=null,R=!1,O=null,L=null,k=null,B=null,V=null,oe.set(0,0,e.canvas.width,e.canvas.height),ce.set(0,0,e.canvas.width,e.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:xe,disable:fe,bindFramebuffer:ye,drawBuffers:_e,useProgram:Te,setBlending:Ke,setMaterial:Xe,setFlipSided:pt,setCullFace:ct,setLineWidth:ot,setPolygonOffset:rt,setScissorTest:Dt,activeTexture:At,bindTexture:he,unbindTexture:ie,compressedTexImage2D:Me,compressedTexImage3D:$e,texImage2D:ft,texImage3D:St,updateUBOMapping:It,uniformBlockBinding:Ei,texStorage2D:Ve,texStorage3D:Tt,texSubImage2D:Z,texSubImage3D:We,compressedTexSubImage2D:dt,compressedTexSubImage3D:lt,scissor:Ct,viewport:bt,reset:er}}function Wke(e,t,i,r,n,s,a){let o=n.isWebGL2,l=n.maxTextures,c=n.maxCubemapSize,u=n.maxTextureSize,h=n.maxSamples,f=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap,v,x=new WeakMap,b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(he,ie){return b?new OffscreenCanvas(he,ie):Ib("canvas")}function _(he,ie,Me,$e){let Z=1;if((he.width>$e||he.height>$e)&&(Z=$e/Math.max(he.width,he.height)),Z<1||ie===!0)if(typeof HTMLImageElement<"u"&&he instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&he instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&he instanceof ImageBitmap){let We=ie?FA:Math.floor,dt=We(Z*he.width),lt=We(Z*he.height);v===void 0&&(v=S(dt,lt));let Ve=Me?S(dt,lt):v;return Ve.width=dt,Ve.height=lt,Ve.getContext("2d").drawImage(he,0,0,dt,lt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+he.width+"x"+he.height+") to ("+dt+"x"+lt+")."),Ve}else return"data"in he&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+he.width+"x"+he.height+")."),he;return he}function A(he){return cR(he.width)&&cR(he.height)}function M(he){return o?!1:he.wrapS!==qr||he.wrapT!==qr||he.minFilter!==_i&&he.minFilter!==yi}function C(he,ie){return he.generateMipmaps&&ie&&he.minFilter!==_i&&he.minFilter!==yi}function D(he){e.generateMipmap(he)}function T(he,ie,Me,$e,Z=!1){if(o===!1)return ie;if(he!==null){if(e[he]!==void 0)return e[he];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+he+"'")}let We=ie;return ie===6403&&(Me===5126&&(We=33326),Me===5131&&(We=33325),Me===5121&&(We=33321)),ie===33319&&(Me===5126&&(We=33328),Me===5131&&(We=33327),Me===5121&&(We=33323)),ie===6408&&(Me===5126&&(We=34836),Me===5131&&(We=34842),Me===5121&&(We=$e===pi&&Z===!1?35907:32856),Me===32819&&(We=32854),Me===32820&&(We=32855)),(We===33325||We===33326||We===33327||We===33328||We===34842||We===34836)&&t.get("EXT_color_buffer_float"),We}function R(he,ie,Me){return C(he,Me)===!0||he.isFramebufferTexture&&he.minFilter!==_i&&he.minFilter!==yi?Math.log2(Math.max(ie.width,ie.height))+1:he.mipmaps!==void 0&&he.mipmaps.length>0?he.mipmaps.length:he.isCompressedTexture&&Array.isArray(he.image)?ie.mipmaps.length:1}function O(he){return he===_i||he===HF||he===PP?9728:9729}function L(he){let ie=he.target;ie.removeEventListener("dispose",L),B(ie),ie.isVideoTexture&&g.delete(ie)}function k(he){let ie=he.target;ie.removeEventListener("dispose",k),$(ie)}function B(he){let ie=r.get(he);if(ie.__webglInit===void 0)return;let Me=he.source,$e=x.get(Me);if($e){let Z=$e[ie.__cacheKey];Z.usedTimes--,Z.usedTimes===0&&V(he),Object.keys($e).length===0&&x.delete(Me)}r.remove(he)}function V(he){let ie=r.get(he);e.deleteTexture(ie.__webglTexture);let Me=he.source,$e=x.get(Me);delete $e[ie.__cacheKey],a.memory.textures--}function $(he){let ie=he.texture,Me=r.get(he),$e=r.get(ie);if($e.__webglTexture!==void 0&&(e.deleteTexture($e.__webglTexture),a.memory.textures--),he.depthTexture&&he.depthTexture.dispose(),he.isWebGLCubeRenderTarget)for(let Z=0;Z<6;Z++)e.deleteFramebuffer(Me.__webglFramebuffer[Z]),Me.__webglDepthbuffer&&e.deleteRenderbuffer(Me.__webglDepthbuffer[Z]);else{if(e.deleteFramebuffer(Me.__webglFramebuffer),Me.__webglDepthbuffer&&e.deleteRenderbuffer(Me.__webglDepthbuffer),Me.__webglMultisampledFramebuffer&&e.deleteFramebuffer(Me.__webglMultisampledFramebuffer),Me.__webglColorRenderbuffer)for(let Z=0;Z<Me.__webglColorRenderbuffer.length;Z++)Me.__webglColorRenderbuffer[Z]&&e.deleteRenderbuffer(Me.__webglColorRenderbuffer[Z]);Me.__webglDepthRenderbuffer&&e.deleteRenderbuffer(Me.__webglDepthRenderbuffer)}if(he.isWebGLMultipleRenderTargets)for(let Z=0,We=ie.length;Z<We;Z++){let dt=r.get(ie[Z]);dt.__webglTexture&&(e.deleteTexture(dt.__webglTexture),a.memory.textures--),r.remove(ie[Z])}r.remove(ie),r.remove(he)}let q=0;function Y(){q=0}function X(){let he=q;return he>=l&&console.warn("THREE.WebGLTextures: Trying to use "+he+" texture units while this GPU supports only "+l),q+=1,he}function ne(he){let ie=[];return ie.push(he.wrapS),ie.push(he.wrapT),ie.push(he.wrapR||0),ie.push(he.magFilter),ie.push(he.minFilter),ie.push(he.anisotropy),ie.push(he.internalFormat),ie.push(he.format),ie.push(he.type),ie.push(he.generateMipmaps),ie.push(he.premultiplyAlpha),ie.push(he.flipY),ie.push(he.unpackAlignment),ie.push(he.encoding),ie.join()}function F(he,ie){let Me=r.get(he);if(he.isVideoTexture&&Dt(he),he.isRenderTargetTexture===!1&&he.version>0&&Me.__version!==he.version){let $e=he.image;if($e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if($e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{fe(Me,he,ie);return}}i.bindTexture(3553,Me.__webglTexture,33984+ie)}function K(he,ie){let Me=r.get(he);if(he.version>0&&Me.__version!==he.version){fe(Me,he,ie);return}i.bindTexture(35866,Me.__webglTexture,33984+ie)}function re(he,ie){let Me=r.get(he);if(he.version>0&&Me.__version!==he.version){fe(Me,he,ie);return}i.bindTexture(32879,Me.__webglTexture,33984+ie)}function oe(he,ie){let Me=r.get(he);if(he.version>0&&Me.__version!==he.version){ye(Me,he,ie);return}i.bindTexture(34067,Me.__webglTexture,33984+ie)}let ce={[Ph]:10497,[qr]:33071,[sR]:33648},de={[_i]:9728,[HF]:9984,[PP]:9986,[yi]:9729,[AIe]:9985,[Tv]:9987};function se(he,ie,Me){if(Me?(e.texParameteri(he,10242,ce[ie.wrapS]),e.texParameteri(he,10243,ce[ie.wrapT]),(he===32879||he===35866)&&e.texParameteri(he,32882,ce[ie.wrapR]),e.texParameteri(he,10240,de[ie.magFilter]),e.texParameteri(he,10241,de[ie.minFilter])):(e.texParameteri(he,10242,33071),e.texParameteri(he,10243,33071),(he===32879||he===35866)&&e.texParameteri(he,32882,33071),(ie.wrapS!==qr||ie.wrapT!==qr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(he,10240,O(ie.magFilter)),e.texParameteri(he,10241,O(ie.minFilter)),ie.minFilter!==_i&&ie.minFilter!==yi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let $e=t.get("EXT_texture_filter_anisotropic");if(ie.magFilter===_i||ie.minFilter!==PP&&ie.minFilter!==Tv||ie.type===wr&&t.has("OES_texture_float_linear")===!1||o===!1&&ie.type===Xh&&t.has("OES_texture_half_float_linear")===!1)return;(ie.anisotropy>1||r.get(ie).__currentAnisotropy)&&(e.texParameterf(he,$e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ie.anisotropy,n.getMaxAnisotropy())),r.get(ie).__currentAnisotropy=ie.anisotropy)}}function xe(he,ie){let Me=!1;he.__webglInit===void 0&&(he.__webglInit=!0,ie.addEventListener("dispose",L));let $e=ie.source,Z=x.get($e);Z===void 0&&(Z={},x.set($e,Z));let We=ne(ie);if(We!==he.__cacheKey){Z[We]===void 0&&(Z[We]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,Me=!0),Z[We].usedTimes++;let dt=Z[he.__cacheKey];dt!==void 0&&(Z[he.__cacheKey].usedTimes--,dt.usedTimes===0&&V(ie)),he.__cacheKey=We,he.__webglTexture=Z[We].texture}return Me}function fe(he,ie,Me){let $e=3553;(ie.isDataArrayTexture||ie.isCompressedArrayTexture)&&($e=35866),ie.isData3DTexture&&($e=32879);let Z=xe(he,ie),We=ie.source;i.bindTexture($e,he.__webglTexture,33984+Me);let dt=r.get(We);if(We.version!==dt.__version||Z===!0){i.activeTexture(33984+Me),e.pixelStorei(37440,ie.flipY),e.pixelStorei(37441,ie.premultiplyAlpha),e.pixelStorei(3317,ie.unpackAlignment),e.pixelStorei(37443,0);let lt=M(ie)&&A(ie.image)===!1,Ve=_(ie.image,lt,!1,u);Ve=At(ie,Ve);let Tt=A(Ve)||o,ft=s.convert(ie.format,ie.encoding),St=s.convert(ie.type),Ct=T(ie.internalFormat,ft,St,ie.encoding,ie.isVideoTexture);se($e,ie,Tt);let bt,It=ie.mipmaps,Ei=o&&ie.isVideoTexture!==!0,er=dt.__version===void 0||Z===!0,be=R(ie,Ve,Tt);if(ie.isDepthTexture)Ct=6402,o?ie.type===wr?Ct=36012:ie.type===Dh?Ct=33190:ie.type===pm?Ct=35056:Ct=33189:ie.type===wr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ie.format===mm&&Ct===6402&&ie.type!==Cte&&ie.type!==Dh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ie.type=Dh,St=s.convert(ie.type)),ie.format===Pm&&Ct===6402&&(Ct=34041,ie.type!==pm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ie.type=pm,St=s.convert(ie.type))),er&&(Ei?i.texStorage2D(3553,1,Ct,Ve.width,Ve.height):i.texImage2D(3553,0,Ct,Ve.width,Ve.height,0,ft,St,null));else if(ie.isDataTexture)if(It.length>0&&Tt){Ei&&er&&i.texStorage2D(3553,be,Ct,It[0].width,It[0].height);for(let Ue=0,qe=It.length;Ue<qe;Ue++)bt=It[Ue],Ei?i.texSubImage2D(3553,Ue,0,0,bt.width,bt.height,ft,St,bt.data):i.texImage2D(3553,Ue,Ct,bt.width,bt.height,0,ft,St,bt.data);ie.generateMipmaps=!1}else Ei?(er&&i.texStorage2D(3553,be,Ct,Ve.width,Ve.height),i.texSubImage2D(3553,0,0,0,Ve.width,Ve.height,ft,St,Ve.data)):i.texImage2D(3553,0,Ct,Ve.width,Ve.height,0,ft,St,Ve.data);else if(ie.isCompressedTexture)if(ie.isCompressedArrayTexture){Ei&&er&&i.texStorage3D(35866,be,Ct,It[0].width,It[0].height,Ve.depth);for(let Ue=0,qe=It.length;Ue<qe;Ue++)bt=It[Ue],ie.format!==$r?ft!==null?Ei?i.compressedTexSubImage3D(35866,Ue,0,0,0,bt.width,bt.height,Ve.depth,ft,bt.data,0,0):i.compressedTexImage3D(35866,Ue,Ct,bt.width,bt.height,Ve.depth,0,bt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ei?i.texSubImage3D(35866,Ue,0,0,0,bt.width,bt.height,Ve.depth,ft,St,bt.data):i.texImage3D(35866,Ue,Ct,bt.width,bt.height,Ve.depth,0,ft,St,bt.data)}else{Ei&&er&&i.texStorage2D(3553,be,Ct,It[0].width,It[0].height);for(let Ue=0,qe=It.length;Ue<qe;Ue++)bt=It[Ue],ie.format!==$r?ft!==null?Ei?i.compressedTexSubImage2D(3553,Ue,0,0,bt.width,bt.height,ft,bt.data):i.compressedTexImage2D(3553,Ue,Ct,bt.width,bt.height,0,bt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ei?i.texSubImage2D(3553,Ue,0,0,bt.width,bt.height,ft,St,bt.data):i.texImage2D(3553,Ue,Ct,bt.width,bt.height,0,ft,St,bt.data)}else if(ie.isDataArrayTexture)Ei?(er&&i.texStorage3D(35866,be,Ct,Ve.width,Ve.height,Ve.depth),i.texSubImage3D(35866,0,0,0,0,Ve.width,Ve.height,Ve.depth,ft,St,Ve.data)):i.texImage3D(35866,0,Ct,Ve.width,Ve.height,Ve.depth,0,ft,St,Ve.data);else if(ie.isData3DTexture)Ei?(er&&i.texStorage3D(32879,be,Ct,Ve.width,Ve.height,Ve.depth),i.texSubImage3D(32879,0,0,0,0,Ve.width,Ve.height,Ve.depth,ft,St,Ve.data)):i.texImage3D(32879,0,Ct,Ve.width,Ve.height,Ve.depth,0,ft,St,Ve.data);else if(ie.isFramebufferTexture){if(er)if(Ei)i.texStorage2D(3553,be,Ct,Ve.width,Ve.height);else{let Ue=Ve.width,qe=Ve.height;for(let ut=0;ut<be;ut++)i.texImage2D(3553,ut,Ct,Ue,qe,0,ft,St,null),Ue>>=1,qe>>=1}}else if(It.length>0&&Tt){Ei&&er&&i.texStorage2D(3553,be,Ct,It[0].width,It[0].height);for(let Ue=0,qe=It.length;Ue<qe;Ue++)bt=It[Ue],Ei?i.texSubImage2D(3553,Ue,0,0,ft,St,bt):i.texImage2D(3553,Ue,Ct,ft,St,bt);ie.generateMipmaps=!1}else Ei?(er&&i.texStorage2D(3553,be,Ct,Ve.width,Ve.height),i.texSubImage2D(3553,0,0,0,ft,St,Ve)):i.texImage2D(3553,0,Ct,ft,St,Ve);C(ie,Tt)&&D($e),dt.__version=We.version,ie.onUpdate&&ie.onUpdate(ie)}he.__version=ie.version}function ye(he,ie,Me){if(ie.image.length!==6)return;let $e=xe(he,ie),Z=ie.source;i.bindTexture(34067,he.__webglTexture,33984+Me);let We=r.get(Z);if(Z.version!==We.__version||$e===!0){i.activeTexture(33984+Me),e.pixelStorei(37440,ie.flipY),e.pixelStorei(37441,ie.premultiplyAlpha),e.pixelStorei(3317,ie.unpackAlignment),e.pixelStorei(37443,0);let dt=ie.isCompressedTexture||ie.image[0].isCompressedTexture,lt=ie.image[0]&&ie.image[0].isDataTexture,Ve=[];for(let Ue=0;Ue<6;Ue++)!dt&&!lt?Ve[Ue]=_(ie.image[Ue],!1,!0,c):Ve[Ue]=lt?ie.image[Ue].image:ie.image[Ue],Ve[Ue]=At(ie,Ve[Ue]);let Tt=Ve[0],ft=A(Tt)||o,St=s.convert(ie.format,ie.encoding),Ct=s.convert(ie.type),bt=T(ie.internalFormat,St,Ct,ie.encoding),It=o&&ie.isVideoTexture!==!0,Ei=We.__version===void 0||$e===!0,er=R(ie,Tt,ft);se(34067,ie,ft);let be;if(dt){It&&Ei&&i.texStorage2D(34067,er,bt,Tt.width,Tt.height);for(let Ue=0;Ue<6;Ue++){be=Ve[Ue].mipmaps;for(let qe=0;qe<be.length;qe++){let ut=be[qe];ie.format!==$r?St!==null?It?i.compressedTexSubImage2D(34069+Ue,qe,0,0,ut.width,ut.height,St,ut.data):i.compressedTexImage2D(34069+Ue,qe,bt,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):It?i.texSubImage2D(34069+Ue,qe,0,0,ut.width,ut.height,St,Ct,ut.data):i.texImage2D(34069+Ue,qe,bt,ut.width,ut.height,0,St,Ct,ut.data)}}}else{be=ie.mipmaps,It&&Ei&&(be.length>0&&er++,i.texStorage2D(34067,er,bt,Ve[0].width,Ve[0].height));for(let Ue=0;Ue<6;Ue++)if(lt){It?i.texSubImage2D(34069+Ue,0,0,0,Ve[Ue].width,Ve[Ue].height,St,Ct,Ve[Ue].data):i.texImage2D(34069+Ue,0,bt,Ve[Ue].width,Ve[Ue].height,0,St,Ct,Ve[Ue].data);for(let qe=0;qe<be.length;qe++){let ut=be[qe].image[Ue].image;It?i.texSubImage2D(34069+Ue,qe+1,0,0,ut.width,ut.height,St,Ct,ut.data):i.texImage2D(34069+Ue,qe+1,bt,ut.width,ut.height,0,St,Ct,ut.data)}}else{It?i.texSubImage2D(34069+Ue,0,0,0,St,Ct,Ve[Ue]):i.texImage2D(34069+Ue,0,bt,St,Ct,Ve[Ue]);for(let qe=0;qe<be.length;qe++){let ut=be[qe];It?i.texSubImage2D(34069+Ue,qe+1,0,0,St,Ct,ut.image[Ue]):i.texImage2D(34069+Ue,qe+1,bt,St,Ct,ut.image[Ue])}}}C(ie,ft)&&D(34067),We.__version=Z.version,ie.onUpdate&&ie.onUpdate(ie)}he.__version=ie.version}function _e(he,ie,Me,$e,Z){let We=s.convert(Me.format,Me.encoding),dt=s.convert(Me.type),lt=T(Me.internalFormat,We,dt,Me.encoding);r.get(ie).__hasExternalTextures||(Z===32879||Z===35866?i.texImage3D(Z,0,lt,ie.width,ie.height,ie.depth,0,We,dt,null):i.texImage2D(Z,0,lt,ie.width,ie.height,0,We,dt,null)),i.bindFramebuffer(36160,he),rt(ie)?f.framebufferTexture2DMultisampleEXT(36160,$e,Z,r.get(Me).__webglTexture,0,ot(ie)):(Z===3553||Z>=34069&&Z<=34074)&&e.framebufferTexture2D(36160,$e,Z,r.get(Me).__webglTexture,0),i.bindFramebuffer(36160,null)}function Te(he,ie,Me){if(e.bindRenderbuffer(36161,he),ie.depthBuffer&&!ie.stencilBuffer){let $e=33189;if(Me||rt(ie)){let Z=ie.depthTexture;Z&&Z.isDepthTexture&&(Z.type===wr?$e=36012:Z.type===Dh&&($e=33190));let We=ot(ie);rt(ie)?f.renderbufferStorageMultisampleEXT(36161,We,$e,ie.width,ie.height):e.renderbufferStorageMultisample(36161,We,$e,ie.width,ie.height)}else e.renderbufferStorage(36161,$e,ie.width,ie.height);e.framebufferRenderbuffer(36160,36096,36161,he)}else if(ie.depthBuffer&&ie.stencilBuffer){let $e=ot(ie);Me&&rt(ie)===!1?e.renderbufferStorageMultisample(36161,$e,35056,ie.width,ie.height):rt(ie)?f.renderbufferStorageMultisampleEXT(36161,$e,35056,ie.width,ie.height):e.renderbufferStorage(36161,34041,ie.width,ie.height),e.framebufferRenderbuffer(36160,33306,36161,he)}else{let $e=ie.isWebGLMultipleRenderTargets===!0?ie.texture:[ie.texture];for(let Z=0;Z<$e.length;Z++){let We=$e[Z],dt=s.convert(We.format,We.encoding),lt=s.convert(We.type),Ve=T(We.internalFormat,dt,lt,We.encoding),Tt=ot(ie);Me&&rt(ie)===!1?e.renderbufferStorageMultisample(36161,Tt,Ve,ie.width,ie.height):rt(ie)?f.renderbufferStorageMultisampleEXT(36161,Tt,Ve,ie.width,ie.height):e.renderbufferStorage(36161,Ve,ie.width,ie.height)}}e.bindRenderbuffer(36161,null)}function Ce(he,ie){if(ie&&ie.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,he),!(ie.depthTexture&&ie.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ie.depthTexture).__webglTexture||ie.depthTexture.image.width!==ie.width||ie.depthTexture.image.height!==ie.height)&&(ie.depthTexture.image.width=ie.width,ie.depthTexture.image.height=ie.height,ie.depthTexture.needsUpdate=!0),F(ie.depthTexture,0);let Me=r.get(ie.depthTexture).__webglTexture,$e=ot(ie);if(ie.depthTexture.format===mm)rt(ie)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,Me,0,$e):e.framebufferTexture2D(36160,36096,3553,Me,0);else if(ie.depthTexture.format===Pm)rt(ie)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,Me,0,$e):e.framebufferTexture2D(36160,33306,3553,Me,0);else throw new Error("Unknown depthTexture format")}function Le(he){let ie=r.get(he),Me=he.isWebGLCubeRenderTarget===!0;if(he.depthTexture&&!ie.__autoAllocateDepthBuffer){if(Me)throw new Error("target.depthTexture not supported in Cube render targets");Ce(ie.__webglFramebuffer,he)}else if(Me){ie.__webglDepthbuffer=[];for(let $e=0;$e<6;$e++)i.bindFramebuffer(36160,ie.__webglFramebuffer[$e]),ie.__webglDepthbuffer[$e]=e.createRenderbuffer(),Te(ie.__webglDepthbuffer[$e],he,!1)}else i.bindFramebuffer(36160,ie.__webglFramebuffer),ie.__webglDepthbuffer=e.createRenderbuffer(),Te(ie.__webglDepthbuffer,he,!1);i.bindFramebuffer(36160,null)}function Ke(he,ie,Me){let $e=r.get(he);ie!==void 0&&_e($e.__webglFramebuffer,he,he.texture,36064,3553),Me!==void 0&&Le(he)}function Xe(he){let ie=he.texture,Me=r.get(he),$e=r.get(ie);he.addEventListener("dispose",k),he.isWebGLMultipleRenderTargets!==!0&&($e.__webglTexture===void 0&&($e.__webglTexture=e.createTexture()),$e.__version=ie.version,a.memory.textures++);let Z=he.isWebGLCubeRenderTarget===!0,We=he.isWebGLMultipleRenderTargets===!0,dt=A(he)||o;if(Z){Me.__webglFramebuffer=[];for(let lt=0;lt<6;lt++)Me.__webglFramebuffer[lt]=e.createFramebuffer()}else{if(Me.__webglFramebuffer=e.createFramebuffer(),We)if(n.drawBuffers){let lt=he.texture;for(let Ve=0,Tt=lt.length;Ve<Tt;Ve++){let ft=r.get(lt[Ve]);ft.__webglTexture===void 0&&(ft.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&he.samples>0&&rt(he)===!1){let lt=We?ie:[ie];Me.__webglMultisampledFramebuffer=e.createFramebuffer(),Me.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,Me.__webglMultisampledFramebuffer);for(let Ve=0;Ve<lt.length;Ve++){let Tt=lt[Ve];Me.__webglColorRenderbuffer[Ve]=e.createRenderbuffer(),e.bindRenderbuffer(36161,Me.__webglColorRenderbuffer[Ve]);let ft=s.convert(Tt.format,Tt.encoding),St=s.convert(Tt.type),Ct=T(Tt.internalFormat,ft,St,Tt.encoding,he.isXRRenderTarget===!0),bt=ot(he);e.renderbufferStorageMultisample(36161,bt,Ct,he.width,he.height),e.framebufferRenderbuffer(36160,36064+Ve,36161,Me.__webglColorRenderbuffer[Ve])}e.bindRenderbuffer(36161,null),he.depthBuffer&&(Me.__webglDepthRenderbuffer=e.createRenderbuffer(),Te(Me.__webglDepthRenderbuffer,he,!0)),i.bindFramebuffer(36160,null)}}if(Z){i.bindTexture(34067,$e.__webglTexture),se(34067,ie,dt);for(let lt=0;lt<6;lt++)_e(Me.__webglFramebuffer[lt],he,ie,36064,34069+lt);C(ie,dt)&&D(34067),i.unbindTexture()}else if(We){let lt=he.texture;for(let Ve=0,Tt=lt.length;Ve<Tt;Ve++){let ft=lt[Ve],St=r.get(ft);i.bindTexture(3553,St.__webglTexture),se(3553,ft,dt),_e(Me.__webglFramebuffer,he,ft,36064+Ve,3553),C(ft,dt)&&D(3553)}i.unbindTexture()}else{let lt=3553;(he.isWebGL3DRenderTarget||he.isWebGLArrayRenderTarget)&&(o?lt=he.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(lt,$e.__webglTexture),se(lt,ie,dt),_e(Me.__webglFramebuffer,he,ie,36064,lt),C(ie,dt)&&D(lt),i.unbindTexture()}he.depthBuffer&&Le(he)}function pt(he){let ie=A(he)||o,Me=he.isWebGLMultipleRenderTargets===!0?he.texture:[he.texture];for(let $e=0,Z=Me.length;$e<Z;$e++){let We=Me[$e];if(C(We,ie)){let dt=he.isWebGLCubeRenderTarget?34067:3553,lt=r.get(We).__webglTexture;i.bindTexture(dt,lt),D(dt),i.unbindTexture()}}}function ct(he){if(o&&he.samples>0&&rt(he)===!1){let ie=he.isWebGLMultipleRenderTargets?he.texture:[he.texture],Me=he.width,$e=he.height,Z=16384,We=[],dt=he.stencilBuffer?33306:36096,lt=r.get(he),Ve=he.isWebGLMultipleRenderTargets===!0;if(Ve)for(let Tt=0;Tt<ie.length;Tt++)i.bindFramebuffer(36160,lt.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Tt,36161,null),i.bindFramebuffer(36160,lt.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Tt,3553,null,0);i.bindFramebuffer(36008,lt.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,lt.__webglFramebuffer);for(let Tt=0;Tt<ie.length;Tt++){We.push(36064+Tt),he.depthBuffer&&We.push(dt);let ft=lt.__ignoreDepthValues!==void 0?lt.__ignoreDepthValues:!1;if(ft===!1&&(he.depthBuffer&&(Z|=256),he.stencilBuffer&&(Z|=1024)),Ve&&e.framebufferRenderbuffer(36008,36064,36161,lt.__webglColorRenderbuffer[Tt]),ft===!0&&(e.invalidateFramebuffer(36008,[dt]),e.invalidateFramebuffer(36009,[dt])),Ve){let St=r.get(ie[Tt]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,St,0)}e.blitFramebuffer(0,0,Me,$e,0,0,Me,$e,Z,9728),m&&e.invalidateFramebuffer(36008,We)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),Ve)for(let Tt=0;Tt<ie.length;Tt++){i.bindFramebuffer(36160,lt.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Tt,36161,lt.__webglColorRenderbuffer[Tt]);let ft=r.get(ie[Tt]).__webglTexture;i.bindFramebuffer(36160,lt.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Tt,3553,ft,0)}i.bindFramebuffer(36009,lt.__webglMultisampledFramebuffer)}}function ot(he){return Math.min(h,he.samples)}function rt(he){let ie=r.get(he);return o&&he.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&ie.__useRenderToTexture!==!1}function Dt(he){let ie=a.render.frame;g.get(he)!==ie&&(g.set(he,ie),he.update())}function At(he,ie){let Me=he.encoding,$e=he.format,Z=he.type;return he.isCompressedTexture===!0||he.isVideoTexture===!0||he.format===lR||Me!==cc&&(Me===pi?o===!1?t.has("EXT_sRGB")===!0&&$e===$r?(he.format=lR,he.minFilter=yi,he.generateMipmaps=!1):ie=kte.sRGBToLinear(ie):($e!==$r||Z!==Ta)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Me)),ie}this.allocateTextureUnit=X,this.resetTextureUnits=Y,this.setTexture2D=F,this.setTexture2DArray=K,this.setTexture3D=re,this.setTextureCube=oe,this.rebindTextures=Ke,this.setupRenderTarget=Xe,this.updateRenderTargetMipmap=pt,this.updateMultisampleRenderTarget=ct,this.setupDepthRenderbuffer=Le,this.setupFrameBufferTexture=_e,this.useMultisampledRTT=rt}function qke(e,t,i){let r=i.isWebGL2;function n(s,a=null){let o;if(s===Ta)return 5121;if(s===PIe)return 32819;if(s===DIe)return 32820;if(s===TIe)return 5120;if(s===CIe)return 5122;if(s===Cte)return 5123;if(s===MIe)return 5124;if(s===Dh)return 5125;if(s===wr)return 5126;if(s===Xh)return r?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===IIe)return 6406;if(s===$r)return 6408;if(s===RIe)return 6409;if(s===OIe)return 6410;if(s===mm)return 6402;if(s===Pm)return 34041;if(s===lR)return o=t.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===BE)return 6403;if(s===LIe)return 36244;if(s===BA)return 33319;if(s===kIe)return 33320;if(s===Mte)return 36249;if(s===DP||s===IP||s===RP||s===OP)if(a===pi)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===DP)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===IP)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===RP)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===OP)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===DP)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===IP)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===RP)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===OP)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===GF||s===WF||s===qF||s===XF)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===GF)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===WF)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===qF)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===XF)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===zIe)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===YF||s===QF)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(s===YF)return a===pi?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===QF)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===KF||s===ZF||s===$F||s===JF||s===e9||s===t9||s===i9||s===r9||s===n9||s===s9||s===a9||s===o9||s===l9||s===c9)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(s===KF)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===ZF)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===$F)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===JF)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===e9)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===t9)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===i9)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===r9)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===n9)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===s9)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===a9)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===o9)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===l9)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===c9)return a===pi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===LP)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(s===LP)return a===pi?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===BIe||s===u9||s===h9||s===d9)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(s===LP)return o.COMPRESSED_RED_RGTC1_EXT;if(s===u9)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===h9)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===d9)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===pm?r?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):e[s]!==void 0?e[s]:null}return{convert:n}}var Xke=class extends ya{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Rh=class extends mr{constructor(){super(),this.isGroup=!0,this.type="Group"}},Yke={type:"move"},a4=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Rh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Rh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Rh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,n=null,s=null,a=this._targetRay,o=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){s=!0;for(let g of e.hand.values()){let v=t.getJointPose(g,i),x=this._getHandJoint(l,g);v!==null&&(x.matrix.fromArray(v.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.jointRadius=v.radius),x.visible=v!==null}let c=l.joints["index-finger-tip"],u=l.joints["thumb-tip"],h=c.position.distanceTo(u.position),f=.02,m=.005;l.inputState.pinching&&h>f+m?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=f-m&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else o!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,i),n!==null&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&n!==null&&(r=n),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Yke)))}return a!==null&&(a.visible=r!==null),o!==null&&(o.visible=n!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new Rh;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}},Mv=class extends on{constructor(e,t,i,r,n,s,a,o,l,c){if(c=c!==void 0?c:mm,c!==mm&&c!==Pm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&c===mm&&(i=Dh),i===void 0&&c===Pm&&(i=pm),super(null,r,n,s,a,o,c,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:_i,this.minFilter=o!==void 0?o:_i,this.flipY=!1,this.generateMipmaps=!1}},Qke=class extends la{constructor(e,t){super();let i=this,r=null,n=1,s=null,a="local-floor",o=1,l=null,c=null,u=null,h=null,f=null,m=null,g=t.getContextAttributes(),v=null,x=null,b=[],S=[],_=new Set,A=new Map,M=new ya;M.layers.enable(1),M.viewport=new ni;let C=new ya;C.layers.enable(2),C.viewport=new ni;let D=[M,C],T=new Xke;T.layers.enable(1),T.layers.enable(2);let R=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let re=b[K];return re===void 0&&(re=new a4,b[K]=re),re.getTargetRaySpace()},this.getControllerGrip=function(K){let re=b[K];return re===void 0&&(re=new a4,b[K]=re),re.getGripSpace()},this.getHand=function(K){let re=b[K];return re===void 0&&(re=new a4,b[K]=re),re.getHandSpace()};function L(K){let re=S.indexOf(K.inputSource);if(re===-1)return;let oe=b[re];oe!==void 0&&oe.dispatchEvent({type:K.type,data:K.inputSource})}function k(){r.removeEventListener("select",L),r.removeEventListener("selectstart",L),r.removeEventListener("selectend",L),r.removeEventListener("squeeze",L),r.removeEventListener("squeezestart",L),r.removeEventListener("squeezeend",L),r.removeEventListener("end",k),r.removeEventListener("inputsourceschange",B);for(let K=0;K<b.length;K++){let re=S[K];re!==null&&(S[K]=null,b[K].disconnect(re))}R=null,O=null,e.setRenderTarget(v),f=null,h=null,u=null,r=null,x=null,F.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){n=K,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){a=K,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(K){l=K},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return u},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(K){if(r=K,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",L),r.addEventListener("selectstart",L),r.addEventListener("selectend",L),r.addEventListener("squeeze",L),r.addEventListener("squeezestart",L),r.addEventListener("squeezeend",L),r.addEventListener("end",k),r.addEventListener("inputsourceschange",B),g.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let re={antialias:r.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:n};f=new XRWebGLLayer(r,t,re),r.updateRenderState({baseLayer:f}),x=new Ni(f.framebufferWidth,f.framebufferHeight,{format:$r,type:Ta,encoding:e.outputEncoding,stencilBuffer:g.stencil})}else{let re=null,oe=null,ce=null;g.depth&&(ce=g.stencil?35056:33190,re=g.stencil?Pm:mm,oe=g.stencil?pm:Dh);let de={colorFormat:32856,depthFormat:ce,scaleFactor:n};u=new XRWebGLBinding(r,t),h=u.createProjectionLayer(de),r.updateRenderState({layers:[h]}),x=new Ni(h.textureWidth,h.textureHeight,{format:$r,type:Ta,depthTexture:new Mv(h.textureWidth,h.textureHeight,oe,void 0,void 0,void 0,void 0,void 0,void 0,re),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});let se=e.properties.get(x);se.__ignoreDepthValues=h.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await r.requestReferenceSpace(a),F.setContext(r),F.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function B(K){for(let re=0;re<K.removed.length;re++){let oe=K.removed[re],ce=S.indexOf(oe);ce>=0&&(S[ce]=null,b[ce].disconnect(oe))}for(let re=0;re<K.added.length;re++){let oe=K.added[re],ce=S.indexOf(oe);if(ce===-1){for(let se=0;se<b.length;se++)if(se>=S.length){S.push(oe),ce=se;break}else if(S[se]===null){S[se]=oe,ce=se;break}if(ce===-1)break}let de=b[ce];de&&de.connect(oe)}}let V=new j,$=new j;function q(K,re,oe){V.setFromMatrixPosition(re.matrixWorld),$.setFromMatrixPosition(oe.matrixWorld);let ce=V.distanceTo($),de=re.projectionMatrix.elements,se=oe.projectionMatrix.elements,xe=de[14]/(de[10]-1),fe=de[14]/(de[10]+1),ye=(de[9]+1)/de[5],_e=(de[9]-1)/de[5],Te=(de[8]-1)/de[0],Ce=(se[8]+1)/se[0],Le=xe*Te,Ke=xe*Ce,Xe=ce/(-Te+Ce),pt=Xe*-Te;re.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(pt),K.translateZ(Xe),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert();let ct=xe+Xe,ot=fe+Xe,rt=Le-pt,Dt=Ke+(ce-pt),At=ye*fe/ot*ct,he=_e*fe/ot*ct;K.projectionMatrix.makePerspective(rt,Dt,At,he,ct,ot)}function Y(K,re){re===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(re.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(r===null)return;T.near=C.near=M.near=K.near,T.far=C.far=M.far=K.far,(R!==T.near||O!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),R=T.near,O=T.far);let re=K.parent,oe=T.cameras;Y(T,re);for(let de=0;de<oe.length;de++)Y(oe[de],re);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),K.matrix.copy(T.matrix),K.matrix.decompose(K.position,K.quaternion,K.scale);let ce=K.children;for(let de=0,se=ce.length;de<se;de++)ce[de].updateMatrixWorld(!0);oe.length===2?q(T,M,C):T.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){if(!(h===null&&f===null))return o},this.setFoveation=function(K){o=K,h!==null&&(h.fixedFoveation=K),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=K)},this.getPlanes=function(){return _};let X=null;function ne(K,re){if(c=re.getViewerPose(l||s),m=re,c!==null){let oe=c.views;f!==null&&(e.setRenderTargetFramebuffer(x,f.framebuffer),e.setRenderTarget(x));let ce=!1;oe.length!==T.cameras.length&&(T.cameras.length=0,ce=!0);for(let de=0;de<oe.length;de++){let se=oe[de],xe=null;if(f!==null)xe=f.getViewport(se);else{let ye=u.getViewSubImage(h,se);xe=ye.viewport,de===0&&(e.setRenderTargetTextures(x,ye.colorTexture,h.ignoreDepthValues?void 0:ye.depthStencilTexture),e.setRenderTarget(x))}let fe=D[de];fe===void 0&&(fe=new ya,fe.layers.enable(de),fe.viewport=new ni,D[de]=fe),fe.matrix.fromArray(se.transform.matrix),fe.projectionMatrix.fromArray(se.projectionMatrix),fe.viewport.set(xe.x,xe.y,xe.width,xe.height),de===0&&T.matrix.copy(fe.matrix),ce===!0&&T.cameras.push(fe)}}for(let oe=0;oe<b.length;oe++){let ce=S[oe],de=b[oe];ce!==null&&de!==void 0&&de.update(ce,re,l||s)}if(X&&X(K,re),re.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:re.detectedPlanes});let oe=null;for(let ce of _)re.detectedPlanes.has(ce)||(oe===null&&(oe=[]),oe.push(ce));if(oe!==null)for(let ce of oe)_.delete(ce),A.delete(ce),i.dispatchEvent({type:"planeremoved",data:ce});for(let ce of re.detectedPlanes)if(!_.has(ce))_.add(ce),A.set(ce,re.lastChangedTime),i.dispatchEvent({type:"planeadded",data:ce});else{let de=A.get(ce);ce.lastChangedTime>de&&(A.set(ce,ce.lastChangedTime),i.dispatchEvent({type:"planechanged",data:ce}))}}m=null}let F=new Ute;F.setAnimationLoop(ne),this.setAnimationLoop=function(K){X=K},this.dispose=function(){}}};function Kke(e,t){function i(v,x){x.color.getRGB(v.fogColor.value,Vte(e)),x.isFog?(v.fogNear.value=x.near,v.fogFar.value=x.far):x.isFogExp2&&(v.fogDensity.value=x.density)}function r(v,x,b,S,_){x.isMeshBasicMaterial||x.isMeshLambertMaterial?n(v,x):x.isMeshToonMaterial?(n(v,x),u(v,x)):x.isMeshPhongMaterial?(n(v,x),c(v,x)):x.isMeshStandardMaterial?(n(v,x),h(v,x),x.isMeshPhysicalMaterial&&f(v,x,_)):x.isMeshMatcapMaterial?(n(v,x),m(v,x)):x.isMeshDepthMaterial?n(v,x):x.isMeshDistanceMaterial?(n(v,x),g(v,x)):x.isMeshNormalMaterial?n(v,x):x.isLineBasicMaterial?(s(v,x),x.isLineDashedMaterial&&a(v,x)):x.isPointsMaterial?o(v,x,b,S):x.isSpriteMaterial?l(v,x):x.isShadowMaterial?(v.color.value.copy(x.color),v.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function n(v,x){v.opacity.value=x.opacity,x.color&&v.diffuse.value.copy(x.color),x.emissive&&v.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(v.map.value=x.map),x.alphaMap&&(v.alphaMap.value=x.alphaMap),x.bumpMap&&(v.bumpMap.value=x.bumpMap,v.bumpScale.value=x.bumpScale,x.side===Ds&&(v.bumpScale.value*=-1)),x.displacementMap&&(v.displacementMap.value=x.displacementMap,v.displacementScale.value=x.displacementScale,v.displacementBias.value=x.displacementBias),x.emissiveMap&&(v.emissiveMap.value=x.emissiveMap),x.normalMap&&(v.normalMap.value=x.normalMap,v.normalScale.value.copy(x.normalScale),x.side===Ds&&v.normalScale.value.negate()),x.specularMap&&(v.specularMap.value=x.specularMap),x.alphaTest>0&&(v.alphaTest.value=x.alphaTest);let b=t.get(x).envMap;if(b&&(v.envMap.value=b,v.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=x.reflectivity,v.ior.value=x.ior,v.refractionRatio.value=x.refractionRatio),x.lightMap){v.lightMap.value=x.lightMap;let A=e.physicallyCorrectLights!==!0?Math.PI:1;v.lightMapIntensity.value=x.lightMapIntensity*A}x.aoMap&&(v.aoMap.value=x.aoMap,v.aoMapIntensity.value=x.aoMapIntensity);let S;x.map?S=x.map:x.specularMap?S=x.specularMap:x.displacementMap?S=x.displacementMap:x.normalMap?S=x.normalMap:x.bumpMap?S=x.bumpMap:x.roughnessMap?S=x.roughnessMap:x.metalnessMap?S=x.metalnessMap:x.alphaMap?S=x.alphaMap:x.emissiveMap?S=x.emissiveMap:x.clearcoatMap?S=x.clearcoatMap:x.clearcoatNormalMap?S=x.clearcoatNormalMap:x.clearcoatRoughnessMap?S=x.clearcoatRoughnessMap:x.iridescenceMap?S=x.iridescenceMap:x.iridescenceThicknessMap?S=x.iridescenceThicknessMap:x.specularIntensityMap?S=x.specularIntensityMap:x.specularColorMap?S=x.specularColorMap:x.transmissionMap?S=x.transmissionMap:x.thicknessMap?S=x.thicknessMap:x.sheenColorMap?S=x.sheenColorMap:x.sheenRoughnessMap&&(S=x.sheenRoughnessMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),v.uvTransform.value.copy(S.matrix));let _;x.aoMap?_=x.aoMap:x.lightMap&&(_=x.lightMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),v.uv2Transform.value.copy(_.matrix))}function s(v,x){v.diffuse.value.copy(x.color),v.opacity.value=x.opacity}function a(v,x){v.dashSize.value=x.dashSize,v.totalSize.value=x.dashSize+x.gapSize,v.scale.value=x.scale}function o(v,x,b,S){v.diffuse.value.copy(x.color),v.opacity.value=x.opacity,v.size.value=x.size*b,v.scale.value=S*.5,x.map&&(v.map.value=x.map),x.alphaMap&&(v.alphaMap.value=x.alphaMap),x.alphaTest>0&&(v.alphaTest.value=x.alphaTest);let _;x.map?_=x.map:x.alphaMap&&(_=x.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),v.uvTransform.value.copy(_.matrix))}function l(v,x){v.diffuse.value.copy(x.color),v.opacity.value=x.opacity,v.rotation.value=x.rotation,x.map&&(v.map.value=x.map),x.alphaMap&&(v.alphaMap.value=x.alphaMap),x.alphaTest>0&&(v.alphaTest.value=x.alphaTest);let b;x.map?b=x.map:x.alphaMap&&(b=x.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uvTransform.value.copy(b.matrix))}function c(v,x){v.specular.value.copy(x.specular),v.shininess.value=Math.max(x.shininess,1e-4)}function u(v,x){x.gradientMap&&(v.gradientMap.value=x.gradientMap)}function h(v,x){v.roughness.value=x.roughness,v.metalness.value=x.metalness,x.roughnessMap&&(v.roughnessMap.value=x.roughnessMap),x.metalnessMap&&(v.metalnessMap.value=x.metalnessMap),t.get(x).envMap&&(v.envMapIntensity.value=x.envMapIntensity)}function f(v,x,b){v.ior.value=x.ior,x.sheen>0&&(v.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),v.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(v.sheenColorMap.value=x.sheenColorMap),x.sheenRoughnessMap&&(v.sheenRoughnessMap.value=x.sheenRoughnessMap)),x.clearcoat>0&&(v.clearcoat.value=x.clearcoat,v.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(v.clearcoatMap.value=x.clearcoatMap),x.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap),x.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),v.clearcoatNormalMap.value=x.clearcoatNormalMap,x.side===Ds&&v.clearcoatNormalScale.value.negate())),x.iridescence>0&&(v.iridescence.value=x.iridescence,v.iridescenceIOR.value=x.iridescenceIOR,v.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(v.iridescenceMap.value=x.iridescenceMap),x.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=x.iridescenceThicknessMap)),x.transmission>0&&(v.transmission.value=x.transmission,v.transmissionSamplerMap.value=b.texture,v.transmissionSamplerSize.value.set(b.width,b.height),x.transmissionMap&&(v.transmissionMap.value=x.transmissionMap),v.thickness.value=x.thickness,x.thicknessMap&&(v.thicknessMap.value=x.thicknessMap),v.attenuationDistance.value=x.attenuationDistance,v.attenuationColor.value.copy(x.attenuationColor)),v.specularIntensity.value=x.specularIntensity,v.specularColor.value.copy(x.specularColor),x.specularIntensityMap&&(v.specularIntensityMap.value=x.specularIntensityMap),x.specularColorMap&&(v.specularColorMap.value=x.specularColorMap)}function m(v,x){x.matcap&&(v.matcap.value=x.matcap)}function g(v,x){v.referencePosition.value.copy(x.referencePosition),v.nearDistance.value=x.nearDistance,v.farDistance.value=x.farDistance}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Zke(e,t,i,r){let n={},s={},a=[],o=i.isWebGL2?e.getParameter(35375):0;function l(S,_){let A=_.program;r.uniformBlockBinding(S,A)}function c(S,_){let A=n[S.id];A===void 0&&(g(S),A=u(S),n[S.id]=A,S.addEventListener("dispose",x));let M=_.program;r.updateUBOMapping(S,M);let C=t.render.frame;s[S.id]!==C&&(f(S),s[S.id]=C)}function u(S){let _=h();S.__bindingPointIndex=_;let A=e.createBuffer(),M=S.__size,C=S.usage;return e.bindBuffer(35345,A),e.bufferData(35345,M,C),e.bindBuffer(35345,null),e.bindBufferBase(35345,_,A),A}function h(){for(let S=0;S<o;S++)if(a.indexOf(S)===-1)return a.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(S){let _=n[S.id],A=S.uniforms,M=S.__cache;e.bindBuffer(35345,_);for(let C=0,D=A.length;C<D;C++){let T=A[C];if(m(T,C,M)===!0){let R=T.__offset,O=Array.isArray(T.value)?T.value:[T.value],L=0;for(let k=0;k<O.length;k++){let B=O[k],V=v(B);typeof B=="number"?(T.__data[0]=B,e.bufferSubData(35345,R+L,T.__data)):B.isMatrix3?(T.__data[0]=B.elements[0],T.__data[1]=B.elements[1],T.__data[2]=B.elements[2],T.__data[3]=B.elements[0],T.__data[4]=B.elements[3],T.__data[5]=B.elements[4],T.__data[6]=B.elements[5],T.__data[7]=B.elements[0],T.__data[8]=B.elements[6],T.__data[9]=B.elements[7],T.__data[10]=B.elements[8],T.__data[11]=B.elements[0]):(B.toArray(T.__data,L),L+=V.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,R,T.__data)}}e.bindBuffer(35345,null)}function m(S,_,A){let M=S.value;if(A[_]===void 0){if(typeof M=="number")A[_]=M;else{let C=Array.isArray(M)?M:[M],D=[];for(let T=0;T<C.length;T++)D.push(C[T].clone());A[_]=D}return!0}else if(typeof M=="number"){if(A[_]!==M)return A[_]=M,!0}else{let C=Array.isArray(A[_])?A[_]:[A[_]],D=Array.isArray(M)?M:[M];for(let T=0;T<C.length;T++){let R=C[T];if(R.equals(D[T])===!1)return R.copy(D[T]),!0}}return!1}function g(S){let _=S.uniforms,A=0,M=16,C=0;for(let D=0,T=_.length;D<T;D++){let R=_[D],O={boundary:0,storage:0},L=Array.isArray(R.value)?R.value:[R.value];for(let k=0,B=L.length;k<B;k++){let V=L[k],$=v(V);O.boundary+=$.boundary,O.storage+=$.storage}if(R.__data=new Float32Array(O.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=A,D>0){C=A%M;let k=M-C;C!==0&&k-O.boundary<0&&(A+=M-C,R.__offset=A)}A+=O.storage}return C=A%M,C>0&&(A+=M-C),S.__size=A,S.__cache={},this}function v(S){let _={boundary:0,storage:0};return typeof S=="number"?(_.boundary=4,_.storage=4):S.isVector2?(_.boundary=8,_.storage=8):S.isVector3||S.isColor?(_.boundary=16,_.storage=12):S.isVector4?(_.boundary=16,_.storage=16):S.isMatrix3?(_.boundary=48,_.storage=48):S.isMatrix4?(_.boundary=64,_.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),_}function x(S){let _=S.target;_.removeEventListener("dispose",x);let A=a.indexOf(_.__bindingPointIndex);a.splice(A,1),e.deleteBuffer(n[_.id]),delete n[_.id],delete s[_.id]}function b(){for(let S in n)e.deleteBuffer(n[S]);a=[],n={},s={}}return{bind:l,update:c,dispose:b}}function $ke(){let e=Ib("canvas");return e.style.display="block",e}function Xte(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:$ke(),i=e.context!==void 0?e.context:null,r=e.depth!==void 0?e.depth:!0,n=e.stencil!==void 0?e.stencil:!0,s=e.antialias!==void 0?e.antialias:!1,a=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,o=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",c=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,u;i!==null?u=i.getContextAttributes().alpha:u=e.alpha!==void 0?e.alpha:!1;let h=null,f=null,m=[],g=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=cc,this.physicallyCorrectLights=!1,this.toneMapping=xu,this.toneMappingExposure=1;let v=this,x=!1,b=0,S=0,_=null,A=-1,M=null,C=new ni,D=new ni,T=null,R=t.width,O=t.height,L=1,k=null,B=null,V=new ni(0,0,R,O),$=new ni(0,0,R,O),q=!1,Y=new uk,X=!1,ne=!1,F=null,K=new tt,re=new pe,oe=new j,ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function de(){return _===null?L:1}let se=i;function xe(ue,De){for(let Fe=0;Fe<ue.length;Fe++){let Ae=ue[Fe],Ne=t.getContext(Ae,De);if(Ne!==null)return Ne}return null}try{let ue={alpha:!0,depth:r,stencil:n,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${iy}`),t.addEventListener("webglcontextlost",Ct,!1),t.addEventListener("webglcontextrestored",bt,!1),t.addEventListener("webglcontextcreationerror",It,!1),se===null){let De=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&De.shift(),se=xe(De,ue),se===null)throw xe(De)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}se.getShaderPrecisionFormat===void 0&&(se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ue){throw console.error("THREE.WebGLRenderer: "+ue.message),ue}let fe,ye,_e,Te,Ce,Le,Ke,Xe,pt,ct,ot,rt,Dt,At,he,ie,Me,$e,Z,We,dt,lt,Ve,Tt;function ft(){fe=new hLe(se),ye=new sLe(se,fe,e),fe.init(ye),lt=new qke(se,fe,ye),_e=new Gke(se,fe,ye),Te=new pLe,Ce=new Ike,Le=new Wke(se,fe,_e,Ce,ye,lt,Te),Ke=new oLe(v),Xe=new uLe(v),pt=new _Re(se,ye),Ve=new rLe(se,fe,pt,ye),ct=new dLe(se,pt,Te,Ve),ot=new yLe(se,ct,pt,Te),Z=new vLe(se,ye,Le),ie=new aLe(Ce),rt=new Dke(v,Ke,Xe,fe,ye,Ve,ie),Dt=new Kke(v,Ce),At=new Oke,he=new Nke(fe,ye),$e=new iLe(v,Ke,Xe,_e,ot,u,a),Me=new Hke(v,ot,ye),Tt=new Zke(se,Te,ye,_e),We=new nLe(se,fe,Te,ye),dt=new fLe(se,fe,Te,ye),Te.programs=rt.programs,v.capabilities=ye,v.extensions=fe,v.properties=Ce,v.renderLists=At,v.shadowMap=Me,v.state=_e,v.info=Te}ft();let St=new Qke(v,se);this.xr=St,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){let ue=fe.get("WEBGL_lose_context");ue&&ue.loseContext()},this.forceContextRestore=function(){let ue=fe.get("WEBGL_lose_context");ue&&ue.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(ue){ue!==void 0&&(L=ue,this.setSize(R,O,!1))},this.getSize=function(ue){return ue.set(R,O)},this.setSize=function(ue,De,Fe){if(St.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=ue,O=De,t.width=Math.floor(ue*L),t.height=Math.floor(De*L),Fe!==!1&&(t.style.width=ue+"px",t.style.height=De+"px"),this.setViewport(0,0,ue,De)},this.getDrawingBufferSize=function(ue){return ue.set(R*L,O*L).floor()},this.setDrawingBufferSize=function(ue,De,Fe){R=ue,O=De,L=Fe,t.width=Math.floor(ue*Fe),t.height=Math.floor(De*Fe),this.setViewport(0,0,ue,De)},this.getCurrentViewport=function(ue){return ue.copy(C)},this.getViewport=function(ue){return ue.copy(V)},this.setViewport=function(ue,De,Fe,Ae){ue.isVector4?V.set(ue.x,ue.y,ue.z,ue.w):V.set(ue,De,Fe,Ae),_e.viewport(C.copy(V).multiplyScalar(L).floor())},this.getScissor=function(ue){return ue.copy($)},this.setScissor=function(ue,De,Fe,Ae){ue.isVector4?$.set(ue.x,ue.y,ue.z,ue.w):$.set(ue,De,Fe,Ae),_e.scissor(D.copy($).multiplyScalar(L).floor())},this.getScissorTest=function(){return q},this.setScissorTest=function(ue){_e.setScissorTest(q=ue)},this.setOpaqueSort=function(ue){k=ue},this.setTransparentSort=function(ue){B=ue},this.getClearColor=function(ue){return ue.copy($e.getClearColor())},this.setClearColor=function(){$e.setClearColor.apply($e,arguments)},this.getClearAlpha=function(){return $e.getClearAlpha()},this.setClearAlpha=function(){$e.setClearAlpha.apply($e,arguments)},this.clear=function(ue=!0,De=!0,Fe=!0){let Ae=0;ue&&(Ae|=16384),De&&(Ae|=256),Fe&&(Ae|=1024),se.clear(Ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ct,!1),t.removeEventListener("webglcontextrestored",bt,!1),t.removeEventListener("webglcontextcreationerror",It,!1),At.dispose(),he.dispose(),Ce.dispose(),Ke.dispose(),Xe.dispose(),ot.dispose(),Ve.dispose(),Tt.dispose(),rt.dispose(),St.dispose(),St.removeEventListener("sessionstart",ut),St.removeEventListener("sessionend",Bt),F&&(F.dispose(),F=null),si.stop()};function Ct(ue){ue.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function bt(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;let ue=Te.autoReset,De=Me.enabled,Fe=Me.autoUpdate,Ae=Me.needsUpdate,Ne=Me.type;ft(),Te.autoReset=ue,Me.enabled=De,Me.autoUpdate=Fe,Me.needsUpdate=Ae,Me.type=Ne}function It(ue){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ue.statusMessage)}function Ei(ue){let De=ue.target;De.removeEventListener("dispose",Ei),er(De)}function er(ue){be(ue),Ce.remove(ue)}function be(ue){let De=Ce.get(ue).programs;De!==void 0&&(De.forEach(function(Fe){rt.releaseProgram(Fe)}),ue.isShaderMaterial&&rt.releaseShaderCache(ue))}this.renderBufferDirect=function(ue,De,Fe,Ae,Ne,xt){De===null&&(De=ce);let kt=Ne.isMesh&&Ne.matrixWorld.determinant()<0,zt=zr(ue,De,Fe,Ae,Ne);_e.setMaterial(Ae,kt);let _t=Fe.index,Ht=1;Ae.wireframe===!0&&(_t=ct.getWireframeAttribute(Fe),Ht=2);let st=Fe.drawRange,me=Fe.attributes.position,Be=st.start*Ht,ht=(st.start+st.count)*Ht;xt!==null&&(Be=Math.max(Be,xt.start*Ht),ht=Math.min(ht,(xt.start+xt.count)*Ht)),_t!==null?(Be=Math.max(Be,0),ht=Math.min(ht,_t.count)):me!=null&&(Be=Math.max(Be,0),ht=Math.min(ht,me.count));let wi=ht-Be;if(wi<0||wi===1/0)return;Ve.setup(Ne,Ae,zt,Fe,_t);let tr,ti=We;if(_t!==null&&(tr=pt.get(_t),ti=dt,ti.setIndex(tr)),Ne.isMesh)Ae.wireframe===!0?(_e.setLineWidth(Ae.wireframeLinewidth*de()),ti.setMode(1)):ti.setMode(4);else if(Ne.isLine){let Vt=Ae.linewidth;Vt===void 0&&(Vt=1),_e.setLineWidth(Vt*de()),Ne.isLineSegments?ti.setMode(1):Ne.isLineLoop?ti.setMode(2):ti.setMode(3)}else Ne.isPoints?ti.setMode(0):Ne.isSprite&&ti.setMode(4);if(Ne.isInstancedMesh)ti.renderInstances(Be,wi,Ne.count);else if(Fe.isInstancedBufferGeometry){let Vt=Fe._maxInstanceCount!==void 0?Fe._maxInstanceCount:1/0,cr=Math.min(Fe.instanceCount,Vt);ti.renderInstances(Be,wi,cr)}else ti.render(Be,wi)},this.compile=function(ue,De){function Fe(Ae,Ne,xt){Ae.transparent===!0&&Ae.side===wa&&Ae.forceSinglePass===!1?(Ae.side=Ds,Ae.needsUpdate=!0,bi(Ae,Ne,xt),Ae.side=lc,Ae.needsUpdate=!0,bi(Ae,Ne,xt),Ae.side=wa):bi(Ae,Ne,xt)}f=he.get(ue),f.init(),g.push(f),ue.traverseVisible(function(Ae){Ae.isLight&&Ae.layers.test(De.layers)&&(f.pushLight(Ae),Ae.castShadow&&f.pushShadow(Ae))}),f.setupLights(v.physicallyCorrectLights),ue.traverse(function(Ae){let Ne=Ae.material;if(Ne)if(Array.isArray(Ne))for(let xt=0;xt<Ne.length;xt++){let kt=Ne[xt];Fe(kt,ue,Ae)}else Fe(Ne,ue,Ae)}),g.pop(),f=null};let Ue=null;function qe(ue){Ue&&Ue(ue)}function ut(){si.stop()}function Bt(){si.start()}let si=new Ute;si.setAnimationLoop(qe),typeof self<"u"&&si.setContext(self),this.setAnimationLoop=function(ue){Ue=ue,St.setAnimationLoop(ue),ue===null?si.stop():si.start()},St.addEventListener("sessionstart",ut),St.addEventListener("sessionend",Bt),this.render=function(ue,De){if(De!==void 0&&De.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),De.parent===null&&De.matrixWorldAutoUpdate===!0&&De.updateMatrixWorld(),St.enabled===!0&&St.isPresenting===!0&&(St.cameraAutoUpdate===!0&&St.updateCamera(De),De=St.getCamera()),ue.isScene===!0&&ue.onBeforeRender(v,ue,De,_),f=he.get(ue,g.length),f.init(),g.push(f),K.multiplyMatrices(De.projectionMatrix,De.matrixWorldInverse),Y.setFromProjectionMatrix(K),ne=this.localClippingEnabled,X=ie.init(this.clippingPlanes,ne),h=At.get(ue,m.length),h.init(),m.push(h),hi(ue,De,0,v.sortObjects),h.finish(),v.sortObjects===!0&&h.sort(k,B),X===!0&&ie.beginShadows();let Fe=f.state.shadowsArray;if(Me.render(Fe,ue,De),X===!0&&ie.endShadows(),this.info.autoReset===!0&&this.info.reset(),$e.render(h,ue),f.setupLights(v.physicallyCorrectLights),De.isArrayCamera){let Ae=De.cameras;for(let Ne=0,xt=Ae.length;Ne<xt;Ne++){let kt=Ae[Ne];Hi(h,ue,kt,kt.viewport)}}else Hi(h,ue,De);_!==null&&(Le.updateMultisampleRenderTarget(_),Le.updateRenderTargetMipmap(_)),ue.isScene===!0&&ue.onAfterRender(v,ue,De),Ve.resetDefaultState(),A=-1,M=null,g.pop(),g.length>0?f=g[g.length-1]:f=null,m.pop(),m.length>0?h=m[m.length-1]:h=null};function hi(ue,De,Fe,Ae){if(ue.visible===!1)return;if(ue.layers.test(De.layers)){if(ue.isGroup)Fe=ue.renderOrder;else if(ue.isLOD)ue.autoUpdate===!0&&ue.update(De);else if(ue.isLight)f.pushLight(ue),ue.castShadow&&f.pushShadow(ue);else if(ue.isSprite){if(!ue.frustumCulled||Y.intersectsSprite(ue)){Ae&&oe.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(K);let xt=ot.update(ue),kt=ue.material;kt.visible&&h.push(ue,xt,kt,Fe,oe.z,null)}}else if((ue.isMesh||ue.isLine||ue.isPoints)&&(ue.isSkinnedMesh&&ue.skeleton.frame!==Te.render.frame&&(ue.skeleton.update(),ue.skeleton.frame=Te.render.frame),!ue.frustumCulled||Y.intersectsObject(ue))){Ae&&oe.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(K);let xt=ot.update(ue),kt=ue.material;if(Array.isArray(kt)){let zt=xt.groups;for(let _t=0,Ht=zt.length;_t<Ht;_t++){let st=zt[_t],me=kt[st.materialIndex];me&&me.visible&&h.push(ue,xt,me,Fe,oe.z,st)}}else kt.visible&&h.push(ue,xt,kt,Fe,oe.z,null)}}let Ne=ue.children;for(let xt=0,kt=Ne.length;xt<kt;xt++)hi(Ne[xt],De,Fe,Ae)}function Hi(ue,De,Fe,Ae){let Ne=ue.opaque,xt=ue.transmissive,kt=ue.transparent;f.setupLightsView(Fe),X===!0&&ie.setGlobalState(v.clippingPlanes,Fe),xt.length>0&&Yn(Ne,De,Fe),Ae&&_e.viewport(C.copy(Ae)),Ne.length>0&&Pi(Ne,De,Fe),xt.length>0&&Pi(xt,De,Fe),kt.length>0&&Pi(kt,De,Fe),_e.buffers.depth.setTest(!0),_e.buffers.depth.setMask(!0),_e.buffers.color.setMask(!0),_e.setPolygonOffset(!1)}function Yn(ue,De,Fe){let Ae=ye.isWebGL2;F===null&&(F=new Ni(1,1,{generateMipmaps:!0,type:fe.has("EXT_color_buffer_half_float")?Xh:Ta,minFilter:Tv,samples:Ae&&s===!0?4:0})),v.getDrawingBufferSize(re),Ae?F.setSize(re.x,re.y):F.setSize(FA(re.x),FA(re.y));let Ne=v.getRenderTarget();v.setRenderTarget(F),v.clear();let xt=v.toneMapping;v.toneMapping=xu,Pi(ue,De,Fe),v.toneMapping=xt,Le.updateMultisampleRenderTarget(F),Le.updateRenderTargetMipmap(F),v.setRenderTarget(Ne)}function Pi(ue,De,Fe){let Ae=De.isScene===!0?De.overrideMaterial:null;for(let Ne=0,xt=ue.length;Ne<xt;Ne++){let kt=ue[Ne],zt=kt.object,_t=kt.geometry,Ht=Ae===null?kt.material:Ae,st=kt.group;zt.layers.test(Fe.layers)&&In(zt,De,Fe,_t,Ht,st)}}function In(ue,De,Fe,Ae,Ne,xt){ue.onBeforeRender(v,De,Fe,Ae,Ne,xt),ue.modelViewMatrix.multiplyMatrices(Fe.matrixWorldInverse,ue.matrixWorld),ue.normalMatrix.getNormalMatrix(ue.modelViewMatrix),Ne.onBeforeRender(v,De,Fe,Ae,ue,xt),Ne.transparent===!0&&Ne.side===wa&&Ne.forceSinglePass===!1?(Ne.side=Ds,Ne.needsUpdate=!0,v.renderBufferDirect(Fe,De,Ae,Ne,ue,xt),Ne.side=lc,Ne.needsUpdate=!0,v.renderBufferDirect(Fe,De,Ae,Ne,ue,xt),Ne.side=wa):v.renderBufferDirect(Fe,De,Ae,Ne,ue,xt),ue.onAfterRender(v,De,Fe,Ae,Ne,xt)}function bi(ue,De,Fe){De.isScene!==!0&&(De=ce);let Ae=Ce.get(ue),Ne=f.state.lights,xt=f.state.shadowsArray,kt=Ne.state.version,zt=rt.getParameters(ue,Ne.state,xt,De,Fe),_t=rt.getProgramCacheKey(zt),Ht=Ae.programs;Ae.environment=ue.isMeshStandardMaterial?De.environment:null,Ae.fog=De.fog,Ae.envMap=(ue.isMeshStandardMaterial?Xe:Ke).get(ue.envMap||Ae.environment),Ht===void 0&&(ue.addEventListener("dispose",Ei),Ht=new Map,Ae.programs=Ht);let st=Ht.get(_t);if(st!==void 0){if(Ae.currentProgram===st&&Ae.lightsStateVersion===kt)return gr(ue,zt),st}else zt.uniforms=rt.getUniforms(ue),ue.onBuild(Fe,zt,v),ue.onBeforeCompile(zt,v),st=rt.acquireProgram(zt,_t),Ht.set(_t,st),Ae.uniforms=zt.uniforms;let me=Ae.uniforms;(!ue.isShaderMaterial&&!ue.isRawShaderMaterial||ue.clipping===!0)&&(me.clippingPlanes=ie.uniform),gr(ue,zt),Ae.needsLights=fs(ue),Ae.lightsStateVersion=kt,Ae.needsLights&&(me.ambientLightColor.value=Ne.state.ambient,me.lightProbe.value=Ne.state.probe,me.directionalLights.value=Ne.state.directional,me.directionalLightShadows.value=Ne.state.directionalShadow,me.spotLights.value=Ne.state.spot,me.spotLightShadows.value=Ne.state.spotShadow,me.rectAreaLights.value=Ne.state.rectArea,me.ltc_1.value=Ne.state.rectAreaLTC1,me.ltc_2.value=Ne.state.rectAreaLTC2,me.pointLights.value=Ne.state.point,me.pointLightShadows.value=Ne.state.pointShadow,me.hemisphereLights.value=Ne.state.hemi,me.directionalShadowMap.value=Ne.state.directionalShadowMap,me.directionalShadowMatrix.value=Ne.state.directionalShadowMatrix,me.spotShadowMap.value=Ne.state.spotShadowMap,me.spotLightMatrix.value=Ne.state.spotLightMatrix,me.spotLightMap.value=Ne.state.spotLightMap,me.pointShadowMap.value=Ne.state.pointShadowMap,me.pointShadowMatrix.value=Ne.state.pointShadowMatrix);let Be=st.getUniforms(),ht=NE.seqWithValue(Be.seq,me);return Ae.currentProgram=st,Ae.uniformsList=ht,st}function gr(ue,De){let Fe=Ce.get(ue);Fe.outputEncoding=De.outputEncoding,Fe.instancing=De.instancing,Fe.skinning=De.skinning,Fe.morphTargets=De.morphTargets,Fe.morphNormals=De.morphNormals,Fe.morphColors=De.morphColors,Fe.morphTargetsCount=De.morphTargetsCount,Fe.numClippingPlanes=De.numClippingPlanes,Fe.numIntersection=De.numClipIntersection,Fe.vertexAlphas=De.vertexAlphas,Fe.vertexTangents=De.vertexTangents,Fe.toneMapping=De.toneMapping}function zr(ue,De,Fe,Ae,Ne){De.isScene!==!0&&(De=ce),Le.resetTextureUnits();let xt=De.fog,kt=Ae.isMeshStandardMaterial?De.environment:null,zt=_===null?v.outputEncoding:_.isXRRenderTarget===!0?_.texture.encoding:cc,_t=(Ae.isMeshStandardMaterial?Xe:Ke).get(Ae.envMap||kt),Ht=Ae.vertexColors===!0&&!!Fe.attributes.color&&Fe.attributes.color.itemSize===4,st=!!Ae.normalMap&&!!Fe.attributes.tangent,me=!!Fe.morphAttributes.position,Be=!!Fe.morphAttributes.normal,ht=!!Fe.morphAttributes.color,wi=Ae.toneMapped?v.toneMapping:xu,tr=Fe.morphAttributes.position||Fe.morphAttributes.normal||Fe.morphAttributes.color,ti=tr!==void 0?tr.length:0,Vt=Ce.get(Ae),cr=f.state.lights;if(X===!0&&(ne===!0||ue!==M)){let le=ue===M&&Ae.id===A;ie.setState(Ae,ue,le)}let Ut=!1;Ae.version===Vt.__version?(Vt.needsLights&&Vt.lightsStateVersion!==cr.state.version||Vt.outputEncoding!==zt||Ne.isInstancedMesh&&Vt.instancing===!1||!Ne.isInstancedMesh&&Vt.instancing===!0||Ne.isSkinnedMesh&&Vt.skinning===!1||!Ne.isSkinnedMesh&&Vt.skinning===!0||Vt.envMap!==_t||Ae.fog===!0&&Vt.fog!==xt||Vt.numClippingPlanes!==void 0&&(Vt.numClippingPlanes!==ie.numPlanes||Vt.numIntersection!==ie.numIntersection)||Vt.vertexAlphas!==Ht||Vt.vertexTangents!==st||Vt.morphTargets!==me||Vt.morphNormals!==Be||Vt.morphColors!==ht||Vt.toneMapping!==wi||ye.isWebGL2===!0&&Vt.morphTargetsCount!==ti)&&(Ut=!0):(Ut=!0,Vt.__version=Ae.version);let ir=Vt.currentProgram;Ut===!0&&(ir=bi(Ae,De,Ne));let Zi=!1,ca=!1,en=!1,Q=ir.getUniforms(),ee=Vt.uniforms;if(_e.useProgram(ir.program)&&(Zi=!0,ca=!0,en=!0),Ae.id!==A&&(A=Ae.id,ca=!0),Zi||M!==ue){if(Q.setValue(se,"projectionMatrix",ue.projectionMatrix),ye.logarithmicDepthBuffer&&Q.setValue(se,"logDepthBufFC",2/(Math.log(ue.far+1)/Math.LN2)),M!==ue&&(M=ue,ca=!0,en=!0),Ae.isShaderMaterial||Ae.isMeshPhongMaterial||Ae.isMeshToonMaterial||Ae.isMeshStandardMaterial||Ae.envMap){let le=Q.map.cameraPosition;le!==void 0&&le.setValue(se,oe.setFromMatrixPosition(ue.matrixWorld))}(Ae.isMeshPhongMaterial||Ae.isMeshToonMaterial||Ae.isMeshLambertMaterial||Ae.isMeshBasicMaterial||Ae.isMeshStandardMaterial||Ae.isShaderMaterial)&&Q.setValue(se,"isOrthographic",ue.isOrthographicCamera===!0),(Ae.isMeshPhongMaterial||Ae.isMeshToonMaterial||Ae.isMeshLambertMaterial||Ae.isMeshBasicMaterial||Ae.isMeshStandardMaterial||Ae.isShaderMaterial||Ae.isShadowMaterial||Ne.isSkinnedMesh)&&Q.setValue(se,"viewMatrix",ue.matrixWorldInverse)}if(Ne.isSkinnedMesh){Q.setOptional(se,Ne,"bindMatrix"),Q.setOptional(se,Ne,"bindMatrixInverse");let le=Ne.skeleton;le&&(ye.floatVertexTextures?(le.boneTexture===null&&le.computeBoneTexture(),Q.setValue(se,"boneTexture",le.boneTexture,Le),Q.setValue(se,"boneTextureSize",le.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let ge=Fe.morphAttributes;if((ge.position!==void 0||ge.normal!==void 0||ge.color!==void 0&&ye.isWebGL2===!0)&&Z.update(Ne,Fe,Ae,ir),(ca||Vt.receiveShadow!==Ne.receiveShadow)&&(Vt.receiveShadow=Ne.receiveShadow,Q.setValue(se,"receiveShadow",Ne.receiveShadow)),Ae.isMeshGouraudMaterial&&Ae.envMap!==null&&(ee.envMap.value=_t,ee.flipEnvMap.value=_t.isCubeTexture&&_t.isRenderTargetTexture===!1?-1:1),ca&&(Q.setValue(se,"toneMappingExposure",v.toneMappingExposure),Vt.needsLights&&Rr(ee,en),xt&&Ae.fog===!0&&Dt.refreshFogUniforms(ee,xt),Dt.refreshMaterialUniforms(ee,Ae,L,O,F),NE.upload(se,Vt.uniformsList,ee,Le)),Ae.isShaderMaterial&&Ae.uniformsNeedUpdate===!0&&(NE.upload(se,Vt.uniformsList,ee,Le),Ae.uniformsNeedUpdate=!1),Ae.isSpriteMaterial&&Q.setValue(se,"center",Ne.center),Q.setValue(se,"modelViewMatrix",Ne.modelViewMatrix),Q.setValue(se,"normalMatrix",Ne.normalMatrix),Q.setValue(se,"modelMatrix",Ne.matrixWorld),Ne.previousModelViewMatrix&&Q.setValue(se,"previousModelViewMatrix",Ne.previousModelViewMatrix),ue.previousProjectionMatrix&&Q.setValue(se,"previousProjectionMatrix",ue.previousProjectionMatrix),Ae.isShaderMaterial||Ae.isRawShaderMaterial){let le=Ae.uniformsGroups;for(let we=0,nt=le.length;we<nt;we++)if(ye.isWebGL2){let wo=le[we];Tt.update(wo,ir),Tt.bind(wo,ir)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ir}function Rr(ue,De){ue.ambientLightColor.needsUpdate=De,ue.lightProbe.needsUpdate=De,ue.directionalLights.needsUpdate=De,ue.directionalLightShadows.needsUpdate=De,ue.pointLights.needsUpdate=De,ue.pointLightShadows.needsUpdate=De,ue.spotLights.needsUpdate=De,ue.spotLightShadows.needsUpdate=De,ue.rectAreaLights.needsUpdate=De,ue.hemisphereLights.needsUpdate=De}function fs(ue){return ue.isMeshLambertMaterial||ue.isMeshToonMaterial||ue.isMeshPhongMaterial||ue.isMeshStandardMaterial||ue.isShadowMaterial||ue.isShaderMaterial&&ue.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(ue,De,Fe){Ce.get(ue.texture).__webglTexture=De,Ce.get(ue.depthTexture).__webglTexture=Fe;let Ae=Ce.get(ue);Ae.__hasExternalTextures=!0,Ae.__hasExternalTextures&&(Ae.__autoAllocateDepthBuffer=Fe===void 0,Ae.__autoAllocateDepthBuffer||fe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ae.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ue,De){let Fe=Ce.get(ue);Fe.__webglFramebuffer=De,Fe.__useDefaultFramebuffer=De===void 0},this.setRenderTarget=function(ue,De=0,Fe=0){_=ue,b=De,S=Fe;let Ae=!0,Ne=null,xt=!1,kt=!1;if(ue){let zt=Ce.get(ue);zt.__useDefaultFramebuffer!==void 0?(_e.bindFramebuffer(36160,null),Ae=!1):zt.__webglFramebuffer===void 0?Le.setupRenderTarget(ue):zt.__hasExternalTextures&&Le.rebindTextures(ue,Ce.get(ue.texture).__webglTexture,Ce.get(ue.depthTexture).__webglTexture);let _t=ue.texture;(_t.isData3DTexture||_t.isDataArrayTexture||_t.isCompressedArrayTexture)&&(kt=!0);let Ht=Ce.get(ue).__webglFramebuffer;ue.isWebGLCubeRenderTarget?(Ne=Ht[De],xt=!0):ye.isWebGL2&&ue.samples>0&&Le.useMultisampledRTT(ue)===!1?Ne=Ce.get(ue).__webglMultisampledFramebuffer:Ne=Ht,C.copy(ue.viewport),D.copy(ue.scissor),T=ue.scissorTest}else C.copy(V).multiplyScalar(L).floor(),D.copy($).multiplyScalar(L).floor(),T=q;if(_e.bindFramebuffer(36160,Ne)&&ye.drawBuffers&&Ae&&_e.drawBuffers(ue,Ne),_e.viewport(C),_e.scissor(D),_e.setScissorTest(T),xt){let zt=Ce.get(ue.texture);se.framebufferTexture2D(36160,36064,34069+De,zt.__webglTexture,Fe)}else if(kt){let zt=Ce.get(ue.texture),_t=De||0;se.framebufferTextureLayer(36160,36064,zt.__webglTexture,Fe||0,_t)}A=-1},this.readRenderTargetPixels=function(ue,De,Fe,Ae,Ne,xt,kt){if(!(ue&&ue.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let zt=Ce.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&kt!==void 0&&(zt=zt[kt]),zt){_e.bindFramebuffer(36160,zt);try{let _t=ue.texture,Ht=_t.format,st=_t.type;if(Ht!==$r&&lt.convert(Ht)!==se.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let me=st===Xh&&(fe.has("EXT_color_buffer_half_float")||ye.isWebGL2&&fe.has("EXT_color_buffer_float"));if(st!==Ta&&lt.convert(st)!==se.getParameter(35738)&&!(st===wr&&(ye.isWebGL2||fe.has("OES_texture_float")||fe.has("WEBGL_color_buffer_float")))&&!me){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}De>=0&&De<=ue.width-Ae&&Fe>=0&&Fe<=ue.height-Ne&&se.readPixels(De,Fe,Ae,Ne,lt.convert(Ht),lt.convert(st),xt)}finally{let _t=_!==null?Ce.get(_).__webglFramebuffer:null;_e.bindFramebuffer(36160,_t)}}},this.readRenderTargetPixelsAsync=async function(ue,De,Fe,Ae,Ne,xt,kt){if(!(ue&&ue.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let zt=Ce.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&kt!==void 0&&(zt=zt[kt]),zt){let _t=ue.texture,Ht=_t.format,st=_t.type;if(De>=0&&De<=ue.width-Ae&&Fe>=0&&Fe<=ue.height-Ne){_e.bindFramebuffer(se.FRAMEBUFFER,zt);let me=se.createBuffer();se.bindBuffer(se.PIXEL_PACK_BUFFER,me),se.bufferData(se.PIXEL_PACK_BUFFER,xt.byteLength,se.STREAM_READ),se.readPixels(De,Fe,Ae,Ne,lt.convert(Ht),lt.convert(st),0);let Be=_!==null?Ce.get(_).__webglFramebuffer:null;_e.bindFramebuffer(se.FRAMEBUFFER,Be);let ht=se.fenceSync(se.SYNC_GPU_COMMANDS_COMPLETE,0);return se.flush(),await rRe(se,ht,4),se.bindBuffer(se.PIXEL_PACK_BUFFER,me),se.getBufferSubData(se.PIXEL_PACK_BUFFER,0,xt),se.deleteBuffer(me),se.deleteSync(ht),xt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(ue,De,Fe=0){let Ae=Math.pow(2,-Fe),Ne=Math.floor(De.image.width*Ae),xt=Math.floor(De.image.height*Ae);Le.setTexture2D(De,0),se.copyTexSubImage2D(3553,Fe,0,0,ue.x,ue.y,Ne,xt),_e.unbindTexture()},this.copyTextureToTexture=function(ue,De,Fe,Ae=0){let Ne=De.image.width,xt=De.image.height,kt=lt.convert(Fe.format),zt=lt.convert(Fe.type);Le.setTexture2D(Fe,0),se.pixelStorei(37440,Fe.flipY),se.pixelStorei(37441,Fe.premultiplyAlpha),se.pixelStorei(3317,Fe.unpackAlignment),De.isDataTexture?se.texSubImage2D(3553,Ae,ue.x,ue.y,Ne,xt,kt,zt,De.image.data):De.isCompressedTexture?se.compressedTexSubImage2D(3553,Ae,ue.x,ue.y,De.mipmaps[0].width,De.mipmaps[0].height,kt,De.mipmaps[0].data):se.texSubImage2D(3553,Ae,ue.x,ue.y,kt,zt,De.image),Ae===0&&Fe.generateMipmaps&&se.generateMipmap(3553),_e.unbindTexture()},this.copyTextureToTexture3D=function(ue,De,Fe,Ae,Ne=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let xt=ue.max.x-ue.min.x+1,kt=ue.max.y-ue.min.y+1,zt=ue.max.z-ue.min.z+1,_t=lt.convert(Ae.format),Ht=lt.convert(Ae.type),st;if(Ae.isData3DTexture)Le.setTexture3D(Ae,0),st=32879;else if(Ae.isDataArrayTexture)Le.setTexture2DArray(Ae,0),st=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}se.pixelStorei(37440,Ae.flipY),se.pixelStorei(37441,Ae.premultiplyAlpha),se.pixelStorei(3317,Ae.unpackAlignment);let me=se.getParameter(3314),Be=se.getParameter(32878),ht=se.getParameter(3316),wi=se.getParameter(3315),tr=se.getParameter(32877),ti=Fe.isCompressedTexture?Fe.mipmaps[0]:Fe.image;se.pixelStorei(3314,ti.width),se.pixelStorei(32878,ti.height),se.pixelStorei(3316,ue.min.x),se.pixelStorei(3315,ue.min.y),se.pixelStorei(32877,ue.min.z),Fe.isDataTexture||Fe.isData3DTexture?se.texSubImage3D(st,Ne,De.x,De.y,De.z,xt,kt,zt,_t,Ht,ti.data):Fe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),se.compressedTexSubImage3D(st,Ne,De.x,De.y,De.z,xt,kt,zt,_t,ti.data)):se.texSubImage3D(st,Ne,De.x,De.y,De.z,xt,kt,zt,_t,Ht,ti),se.pixelStorei(3314,me),se.pixelStorei(32878,Be),se.pixelStorei(3316,ht),se.pixelStorei(3315,wi),se.pixelStorei(32877,tr),Ne===0&&Ae.generateMipmaps&&se.generateMipmap(st),_e.unbindTexture()},this.initRenderTarget=function(ue){Ce.get(ue).__webglFramebuffer===void 0&&Le.setupRenderTarget(ue)},this.initTexture=function(ue){ue.isCubeTexture?Le.setTextureCube(ue,0):ue.isData3DTexture?Le.setTexture3D(ue,0):ue.isDataArrayTexture||ue.isCompressedArrayTexture?Le.setTexture2DArray(ue,0):Le.setTexture2D(ue,0),_e.unbindTexture()},this.resetState=function(){b=0,S=0,_=null,_e.reset(),Ve.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var Jke=class extends Xte{};Jke.prototype.isWebGL1Renderer=!0;var Yte=class{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new qt(e),this.near=t,this.far=i}clone(){return new Yte(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},go=class extends mr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},eze=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=aR,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=xl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,n=this.stride;r<n;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},ka=new j,hR=class{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ka.fromBufferAttribute(this,t),ka.applyMatrix4(e),this.setXYZ(t,ka.x,ka.y,ka.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ka.fromBufferAttribute(this,t),ka.applyNormalMatrix(e),this.setXYZ(t,ka.x,ka.y,ka.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ka.fromBufferAttribute(this,t),ka.transformDirection(e),this.setXYZ(t,ka.x,ka.y,ka.z);return this}setX(e,t){return this.normalized&&(t=Lr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Lr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Lr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Lr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ih(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ih(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ih(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ih(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Lr(t,this.array),i=Lr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Lr(t,this.array),i=Lr(i,this.array),r=Lr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Lr(t,this.array),i=Lr(i,this.array),r=Lr(r,this.array),n=Lr(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[r+n])}return new Xt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new hR(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[r+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Qte=class extends mr{constructor(){super(),this.isBone=!0,this.type="Bone"}},Ga=class extends on{constructor(e=null,t=1,i=1,r,n,s,a,o,l=_i,c=_i,u,h){super(null,s,a,o,l,c,r,n,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},q9=new tt,tze=new tt,dk=class{constructor(e=[],t=[]){this.uuid=xl(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new tt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new tt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let n=0,s=e.length;n<s;n++){let a=e[n]?e[n].matrixWorld:tze;q9.multiplyMatrices(a,t[n]),q9.toArray(i,n*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new dk(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Rte(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new Ga(t,e,e,$r,wr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let n=e.bones[i],s=t[n];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),s=new Qte),this.bones.push(s),this.boneInverses.push(new tt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let r=0,n=t.length;r<n;r++){let s=t[r];e.bones.push(s.uuid);let a=i[r];e.boneInverses.push(a.toArray())}return e}},Rb=class extends Xt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},X9=new tt,Y9=new tt,r_=[],ize=new tt,z1=new kr,rze=class extends kr{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Rb(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,ize)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){let i=this.matrixWorld,r=this.count;if(z1.geometry=this.geometry,z1.material=this.material,z1.material!==void 0)for(let n=0;n<r;n++){this.getMatrixAt(n,X9),Y9.multiplyMatrices(i,X9),z1.matrixWorld=Y9,z1.raycast(e,r_);for(let s=0,a=r_.length;s<a;s++){let o=r_[s];o.instanceId=n,o.object=this,t.push(o)}r_.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Rb(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},Kf=class extends bw{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new qt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},Q9=new j,K9=new j,Z9=new tt,o4=new ry,n_=new yo,HA=class extends mr{constructor(e=new Rt,t=new Kf){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,n=t.count;r<n;r++)Q9.fromBufferAttribute(t,r-1),K9.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Q9.distanceTo(K9);e.setAttribute("lineDistance",new yt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,n=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),n_.copy(i.boundingSphere),n_.applyMatrix4(r),n_.radius+=n,e.ray.intersectsSphere(n_)===!1)return;Z9.copy(r).invert(),o4.copy(e.ray).applyMatrix4(Z9);let a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new j,c=new j,u=new j,h=new j,f=this.isLineSegments?2:1,m=i.index,g=i.attributes.position;if(m!==null){let v=Math.max(0,s.start),x=Math.min(m.count,s.start+s.count);for(let b=v,S=x-1;b<S;b+=f){let _=m.getX(b),A=m.getX(b+1);if(l.fromBufferAttribute(g,_),c.fromBufferAttribute(g,A),o4.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);let M=e.ray.origin.distanceTo(h);M<e.near||M>e.far||t.push({distance:M,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{let v=Math.max(0,s.start),x=Math.min(g.count,s.start+s.count);for(let b=v,S=x-1;b<S;b+=f){if(l.fromBufferAttribute(g,b),c.fromBufferAttribute(g,b+1),o4.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(h);_<e.near||_>e.far||t.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=i.length;r<n;r++){let s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}},$9=new j,J9=new j,ww=class extends HA{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,n=t.count;r<n;r+=2)$9.fromBufferAttribute(t,r),J9.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+$9.distanceTo(J9);e.setAttribute("lineDistance",new yt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},nze=class extends on{constructor(e,t,i,r,n,s,a,o,l){super(e,t,i,r,n,s,a,o,l),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:yi,this.magFilter=n!==void 0?n:yi,this.generateMipmaps=!1;let c=this;function u(){c.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},sze=class extends on{constructor(e,t,i,r,n,s,a,o,l){super(e,t,i,r,n,s,a,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},Lu=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),n=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),n+=i.distanceTo(r),t.push(n),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let i=this.getLengths(),r=0,n=i.length,s;t?s=t:s=e*i[n-1];let a=0,o=n-1,l;for(;a<=o;)if(r=Math.floor(a+(o-a)/2),l=i[r]-s,l<0)a=r+1;else if(l>0)o=r-1;else{o=r;break}if(r=o,i[r]===s)return r/(n-1);let c=i[r],u=i[r+1]-c,h=(s-c)/u;return(r+h)/(n-1)}getTangent(e,t){let i=e-1e-4,r=e+1e-4;i<0&&(i=0),r>1&&(r=1);let n=this.getPoint(i),s=this.getPoint(r),a=t||(n.isVector2?new pe:new j);return a.copy(s).sub(n).normalize(),a}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){let i=new j,r=[],n=[],s=[],a=new j,o=new tt;for(let f=0;f<=e;f++){let m=f/e;r[f]=this.getTangentAt(m,new j)}n[0]=new j,s[0]=new j;let l=Number.MAX_VALUE,c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,i.set(1,0,0)),u<=l&&(l=u,i.set(0,1,0)),h<=l&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),n[0].crossVectors(r[0],a),s[0].crossVectors(r[0],n[0]);for(let f=1;f<=e;f++){if(n[f]=n[f-1].clone(),s[f]=s[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();let m=Math.acos(Vn(r[f-1].dot(r[f]),-1,1));n[f].applyMatrix4(o.makeRotationAxis(a,m))}s[f].crossVectors(r[f],n[f])}if(t===!0){let f=Math.acos(Vn(n[0].dot(n[e]),-1,1));f/=e,r[0].dot(a.crossVectors(n[0],n[e]))>0&&(f=-f);for(let m=1;m<=e;m++)n[m].applyMatrix4(o.makeRotationAxis(r[m],f*m)),s[m].crossVectors(r[m],n[m])}return{tangents:r,normals:n,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},O3=class extends Lu{constructor(e=0,t=0,i=1,r=1,n=0,s=Math.PI*2,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=n,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){let i=t||new pe,r=Math.PI*2,n=this.aEndAngle-this.aStartAngle,s=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=r;for(;n>r;)n-=r;n<Number.EPSILON&&(s?n=0:n=r),this.aClockwise===!0&&!s&&(n===r?n=-r:n=n-r);let a=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=o-this.aX,f=l-this.aY;o=h*c-f*u+this.aX,l=h*u+f*c+this.aY}return i.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},aze=class extends O3{constructor(e,t,i,r,n,s){super(e,t,i,i,r,n,s),this.isArcCurve=!0,this.type="ArcCurve"}};function fk(){let e=0,t=0,i=0,r=0;function n(s,a,o,l){e=s,t=o,i=-3*s+3*a-2*o-l,r=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){n(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,h){let f=(a-s)/c-(o-s)/(c+u)+(o-a)/u,m=(o-a)/u-(l-a)/(u+h)+(l-o)/h;f*=u,m*=u,n(a,o,f,m)},calc:function(s){let a=s*s,o=a*s;return e+t*s+i*a+r*o}}}var s_=new j,l4=new fk,c4=new fk,u4=new fk,oze=class extends Lu{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new j){let i=t,r=this.points,n=r.length,s=(n-(this.closed?0:1))*e,a=Math.floor(s),o=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/n)+1)*n:o===0&&a===n-1&&(a=n-2,o=1);let l,c;this.closed||a>0?l=r[(a-1)%n]:(s_.subVectors(r[0],r[1]).add(r[0]),l=s_);let u=r[a%n],h=r[(a+1)%n];if(this.closed||a+2<n?c=r[(a+2)%n]:(s_.subVectors(r[n-1],r[n-2]).add(r[n-1]),c=s_),this.curveType==="centripetal"||this.curveType==="chordal"){let f=this.curveType==="chordal"?.5:.25,m=Math.pow(l.distanceToSquared(u),f),g=Math.pow(u.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(c),f);g<1e-4&&(g=1),m<1e-4&&(m=g),v<1e-4&&(v=g),l4.initNonuniformCatmullRom(l.x,u.x,h.x,c.x,m,g,v),c4.initNonuniformCatmullRom(l.y,u.y,h.y,c.y,m,g,v),u4.initNonuniformCatmullRom(l.z,u.z,h.z,c.z,m,g,v)}else this.curveType==="catmullrom"&&(l4.initCatmullRom(l.x,u.x,h.x,c.x,this.tension),c4.initCatmullRom(l.y,u.y,h.y,c.y,this.tension),u4.initCatmullRom(l.z,u.z,h.z,c.z,this.tension));return i.set(l4.calc(o),c4.calc(o),u4.calc(o)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new j().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function eH(e,t,i,r,n){let s=(r-t)*.5,a=(n-i)*.5,o=e*e,l=e*o;return(2*i-2*r+s+a)*l+(-3*i+3*r-2*s-a)*o+s*e+i}function lze(e,t){let i=1-e;return i*i*t}function cze(e,t){return 2*(1-e)*e*t}function uze(e,t){return e*e*t}function Ux(e,t,i,r){return lze(e,t)+cze(e,i)+uze(e,r)}function hze(e,t){let i=1-e;return i*i*i*t}function dze(e,t){let i=1-e;return 3*i*i*e*t}function fze(e,t){return 3*(1-e)*e*e*t}function pze(e,t){return e*e*e*t}function Fx(e,t,i,r,n){return hze(e,t)+dze(e,i)+fze(e,r)+pze(e,n)}var Zl=class extends Lu{constructor(e=new pe,t=new pe,i=new pe,r=new pe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new pe){let i=t,r=this.v0,n=this.v1,s=this.v2,a=this.v3;return i.set(Fx(e,r.x,n.x,s.x,a.x),Fx(e,r.y,n.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},VE=class extends Lu{constructor(e=new j,t=new j,i=new j,r=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new j){let i=t,r=this.v0,n=this.v1,s=this.v2,a=this.v3;return i.set(Fx(e,r.x,n.x,s.x,a.x),Fx(e,r.y,n.y,s.y,a.y),Fx(e,r.z,n.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},nc=class extends Lu{constructor(e=new pe,t=new pe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new pe){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let i=t||new pe;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Kte=class extends Lu{constructor(e=new j,t=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new j){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},zf=class extends Lu{constructor(e=new pe,t=new pe,i=new pe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new pe){let i=t,r=this.v0,n=this.v1,s=this.v2;return i.set(Ux(e,r.x,n.x,s.x),Ux(e,r.y,n.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},mze=class extends Lu{constructor(e=new j,t=new j,i=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new j){let i=t,r=this.v0,n=this.v1,s=this.v2;return i.set(Ux(e,r.x,n.x,s.x),Ux(e,r.y,n.y,s.y),Ux(e,r.z,n.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},pk=class extends Lu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new pe){let i=t,r=this.points,n=(r.length-1)*e,s=Math.floor(n),a=n-s,o=r[s===0?s:s-1],l=r[s],c=r[s>r.length-2?r.length-1:s+1],u=r[s>r.length-3?r.length-1:s+2];return i.set(eH(a,o.x,l.x,c.x,u.x),eH(a,o.y,l.y,c.y,u.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new pe().fromArray(r))}return this}},gze=Object.freeze({__proto__:null,ArcCurve:aze,CatmullRomCurve3:oze,CubicBezierCurve:Zl,CubicBezierCurve3:VE,EllipseCurve:O3,LineCurve:nc,LineCurve3:Kte,QuadraticBezierCurve:zf,QuadraticBezierCurve3:mze,SplineCurve:pk}),Zte=class extends Lu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new nc(t,e))}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),n=0;for(;n<r.length;){if(r[n]>=i){let s=r[n]-i,a=this.curves[n],o=a.getLength(),l=o===0?0:1-s/o;return a.getPointAt(l,t)}n++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,n=this.curves;r<n.length;r++){let s=n[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let l=0;l<o.length;l++){let c=o[l];i&&i.equals(c)||(t.push(c),i=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new gze[r.type]().fromJSON(r))}return this}},GA=class extends Zte{constructor(e){super(),this.type="Path",this.currentPoint=new pe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new nc(this.currentPoint.clone(),new pe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let n=new zf(this.currentPoint.clone(),new pe(e,t),new pe(i,r));return this.curves.push(n),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,n,s){let a=new Zl(this.currentPoint.clone(),new pe(e,t),new pe(i,r),new pe(n,s));return this.curves.push(a),this.currentPoint.set(n,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new pk(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,n,s){let a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,i,r,n,s),this}absarc(e,t,i,r,n,s){return this.absellipse(e,t,i,i,r,n,s),this}ellipse(e,t,i,r,n,s,a,o){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,i,r,n,s,a,o),this}absellipse(e,t,i,r,n,s,a,o){let l=new O3(e,t,i,r,n,s,a,o);if(this.curves.length>0){let u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},$te=class extends Rt{constructor(e=[new pe(0,-.5),new pe(.5,0),new pe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Vn(r,0,Math.PI*2);let n=[],s=[],a=[],o=[],l=[],c=1/t,u=new j,h=new pe,f=new j,m=new j,g=new j,v=0,x=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:v=e[b+1].x-e[b].x,x=e[b+1].y-e[b].y,f.x=x*1,f.y=-v,f.z=x*0,g.copy(f),f.normalize(),o.push(f.x,f.y,f.z);break;case e.length-1:o.push(g.x,g.y,g.z);break;default:v=e[b+1].x-e[b].x,x=e[b+1].y-e[b].y,f.x=x*1,f.y=-v,f.z=x*0,m.copy(f),f.x+=g.x,f.y+=g.y,f.z+=g.z,f.normalize(),o.push(f.x,f.y,f.z),g.copy(m)}for(let b=0;b<=t;b++){let S=i+b*c*r,_=Math.sin(S),A=Math.cos(S);for(let M=0;M<=e.length-1;M++){u.x=e[M].x*_,u.y=e[M].y,u.z=e[M].x*A,s.push(u.x,u.y,u.z),h.x=b/t,h.y=M/(e.length-1),a.push(h.x,h.y);let C=o[3*M+0]*_,D=o[3*M+1],T=o[3*M+0]*A;l.push(C,D,T)}}for(let b=0;b<t;b++)for(let S=0;S<e.length-1;S++){let _=S+b*e.length,A=_,M=_+e.length,C=_+e.length+1,D=_+1;n.push(A,M,D),n.push(C,D,M)}this.setIndex(n),this.setAttribute("position",new yt(s,3)),this.setAttribute("uv",new yt(a,2)),this.setAttribute("normal",new yt(l,3))}static fromJSON(e){return new $te(e.points,e.segments,e.phiStart,e.phiLength)}},mk=class extends Rt{constructor(e=1,t=1,i=1,r=32,n=1,s=!1,a=0,o=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:s,thetaStart:a,thetaLength:o};let l=this;r=Math.floor(r),n=Math.floor(n);let c=[],u=[],h=[],f=[],m=0,g=[],v=i/2,x=0;b(),s===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(c),this.setAttribute("position",new yt(u,3)),this.setAttribute("normal",new yt(h,3)),this.setAttribute("uv",new yt(f,2));function b(){let _=new j,A=new j,M=0,C=(t-e)/i;for(let D=0;D<=n;D++){let T=[],R=D/n,O=R*(t-e)+e;for(let L=0;L<=r;L++){let k=L/r,B=k*o+a,V=Math.sin(B),$=Math.cos(B);A.x=O*V,A.y=-R*i+v,A.z=O*$,u.push(A.x,A.y,A.z),_.set(V,C,$).normalize(),h.push(_.x,_.y,_.z),f.push(k,1-R),T.push(m++)}g.push(T)}for(let D=0;D<r;D++)for(let T=0;T<n;T++){let R=g[T][D],O=g[T+1][D],L=g[T+1][D+1],k=g[T][D+1];c.push(R,O,k),c.push(O,L,k),M+=6}l.addGroup(x,M,0),x+=M}function S(_){let A=m,M=new pe,C=new j,D=0,T=_===!0?e:t,R=_===!0?1:-1;for(let L=1;L<=r;L++)u.push(0,v*R,0),h.push(0,R,0),f.push(.5,.5),m++;let O=m;for(let L=0;L<=r;L++){let k=L/r*o+a,B=Math.cos(k),V=Math.sin(k);C.x=T*V,C.y=v*R,C.z=T*B,u.push(C.x,C.y,C.z),h.push(0,R,0),M.x=B*.5+.5,M.y=V*.5*R+.5,f.push(M.x,M.y),m++}for(let L=0;L<r;L++){let k=A+L,B=O+L;_===!0?c.push(B,B+1,k):c.push(B+1,B,k),D+=3}l.addGroup(x,D,_===!0?1:2),x+=D}}static fromJSON(e){return new mk(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},gk=class extends mk{constructor(e=1,t=1,i=32,r=1,n=!1,s=0,a=Math.PI*2){super(0,e,t,i,r,n,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:s,thetaLength:a}}static fromJSON(e){return new gk(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},vk=class extends Rt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};let n=[],s=[];a(r),l(i),c(),this.setAttribute("position",new yt(n,3)),this.setAttribute("normal",new yt(n.slice(),3)),this.setAttribute("uv",new yt(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(b){let S=new j,_=new j,A=new j;for(let M=0;M<t.length;M+=3)f(t[M+0],S),f(t[M+1],_),f(t[M+2],A),o(S,_,A,b)}function o(b,S,_,A){let M=A+1,C=[];for(let D=0;D<=M;D++){C[D]=[];let T=b.clone().lerp(_,D/M),R=S.clone().lerp(_,D/M),O=M-D;for(let L=0;L<=O;L++)L===0&&D===M?C[D][L]=T:C[D][L]=T.clone().lerp(R,L/O)}for(let D=0;D<M;D++)for(let T=0;T<2*(M-D)-1;T++){let R=Math.floor(T/2);T%2===0?(h(C[D][R+1]),h(C[D+1][R]),h(C[D][R])):(h(C[D][R+1]),h(C[D+1][R+1]),h(C[D+1][R]))}}function l(b){let S=new j;for(let _=0;_<n.length;_+=3)S.x=n[_+0],S.y=n[_+1],S.z=n[_+2],S.normalize().multiplyScalar(b),n[_+0]=S.x,n[_+1]=S.y,n[_+2]=S.z}function c(){let b=new j;for(let S=0;S<n.length;S+=3){b.x=n[S+0],b.y=n[S+1],b.z=n[S+2];let _=v(b)/2/Math.PI+.5,A=x(b)/Math.PI+.5;s.push(_,1-A)}m(),u()}function u(){for(let b=0;b<s.length;b+=6){let S=s[b+0],_=s[b+2],A=s[b+4],M=Math.max(S,_,A),C=Math.min(S,_,A);M>.9&&C<.1&&(S<.2&&(s[b+0]+=1),_<.2&&(s[b+2]+=1),A<.2&&(s[b+4]+=1))}}function h(b){n.push(b.x,b.y,b.z)}function f(b,S){let _=b*3;S.x=e[_+0],S.y=e[_+1],S.z=e[_+2]}function m(){let b=new j,S=new j,_=new j,A=new j,M=new pe,C=new pe,D=new pe;for(let T=0,R=0;T<n.length;T+=9,R+=6){b.set(n[T+0],n[T+1],n[T+2]),S.set(n[T+3],n[T+4],n[T+5]),_.set(n[T+6],n[T+7],n[T+8]),M.set(s[R+0],s[R+1]),C.set(s[R+2],s[R+3]),D.set(s[R+4],s[R+5]),A.copy(b).add(S).add(_).divideScalar(3);let O=v(A);g(M,R+0,b,O),g(C,R+2,S,O),g(D,R+4,_,O)}}function g(b,S,_,A){A<0&&b.x===1&&(s[S]=b.x-1),_.x===0&&_.z===0&&(s[S]=A/2/Math.PI+.5)}function v(b){return Math.atan2(b.z,-b.x)}function x(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}static fromJSON(e){return new vk(e.vertices,e.indices,e.radius,e.details)}},Jte=class extends vk{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=1/i,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Jte(e.radius,e.detail)}},WA=class extends GA{constructor(e){super(e),this.uuid=xl(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new GA().fromJSON(r))}return this}},vze={triangulate:function(e,t,i=2){let r=t&&t.length,n=r?t[0]*i:e.length,s=eie(e,0,n,i,!0),a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,h,f,m;if(r&&(s=Sze(e,t,s,i)),e.length>80*i){o=c=e[0],l=u=e[1];for(let g=i;g<n;g+=i)h=e[g],f=e[g+1],h<o&&(o=h),f<l&&(l=f),h>c&&(c=h),f>u&&(u=f);m=Math.max(c-o,u-l),m=m!==0?32767/m:0}return Ob(s,a,i,o,l,m,0),a}};function eie(e,t,i,r,n){let s,a;if(n===Oze(e,t,i,r)>0)for(s=t;s<i;s+=r)a=tH(s,e[s],e[s+1],a);else for(s=i-r;s>=t;s-=r)a=tH(s,e[s],e[s+1],a);return a&&L3(a,a.next)&&(kb(a),a=a.next),a}function Dm(e,t){if(!e)return e;t||(t=e);let i=e,r;do if(r=!1,!i.steiner&&(L3(i,i.next)||sn(i.prev,i,i.next)===0)){if(kb(i),i=t=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function Ob(e,t,i,r,n,s,a){if(!e)return;!a&&s&&Cze(e,r,n,s);let o=e,l,c;for(;e.prev!==e.next;){if(l=e.prev,c=e.next,s?xze(e,r,n,s):yze(e)){t.push(l.i/i|0),t.push(e.i/i|0),t.push(c.i/i|0),kb(e),e=c.next,o=c.next;continue}if(e=c,e===o){a?a===1?(e=bze(Dm(e),t,i),Ob(e,t,i,r,n,s,2)):a===2&&wze(e,t,i,r,n,s):Ob(Dm(e),t,i,r,n,s,1);break}}}function yze(e){let t=e.prev,i=e,r=e.next;if(sn(t,i,r)>=0)return!1;let n=t.x,s=i.x,a=r.x,o=t.y,l=i.y,c=r.y,u=n<s?n<a?n:a:s<a?s:a,h=o<l?o<c?o:c:l<c?l:c,f=n>s?n>a?n:a:s>a?s:a,m=o>l?o>c?o:c:l>c?l:c,g=r.next;for(;g!==t;){if(g.x>=u&&g.x<=f&&g.y>=h&&g.y<=m&&G0(n,o,s,l,a,c,g.x,g.y)&&sn(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function xze(e,t,i,r){let n=e.prev,s=e,a=e.next;if(sn(n,s,a)>=0)return!1;let o=n.x,l=s.x,c=a.x,u=n.y,h=s.y,f=a.y,m=o<l?o<c?o:c:l<c?l:c,g=u<h?u<f?u:f:h<f?h:f,v=o>l?o>c?o:c:l>c?l:c,x=u>h?u>f?u:f:h>f?h:f,b=dR(m,g,t,i,r),S=dR(v,x,t,i,r),_=e.prevZ,A=e.nextZ;for(;_&&_.z>=b&&A&&A.z<=S;){if(_.x>=m&&_.x<=v&&_.y>=g&&_.y<=x&&_!==n&&_!==a&&G0(o,u,l,h,c,f,_.x,_.y)&&sn(_.prev,_,_.next)>=0||(_=_.prevZ,A.x>=m&&A.x<=v&&A.y>=g&&A.y<=x&&A!==n&&A!==a&&G0(o,u,l,h,c,f,A.x,A.y)&&sn(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;_&&_.z>=b;){if(_.x>=m&&_.x<=v&&_.y>=g&&_.y<=x&&_!==n&&_!==a&&G0(o,u,l,h,c,f,_.x,_.y)&&sn(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;A&&A.z<=S;){if(A.x>=m&&A.x<=v&&A.y>=g&&A.y<=x&&A!==n&&A!==a&&G0(o,u,l,h,c,f,A.x,A.y)&&sn(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function bze(e,t,i){let r=e;do{let n=r.prev,s=r.next.next;!L3(n,s)&&tie(n,r,r.next,s)&&Lb(n,s)&&Lb(s,n)&&(t.push(n.i/i|0),t.push(r.i/i|0),t.push(s.i/i|0),kb(r),kb(r.next),r=e=s),r=r.next}while(r!==e);return Dm(r)}function wze(e,t,i,r,n,s){let a=e;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Dze(a,o)){let l=iie(a,o);a=Dm(a,a.next),l=Dm(l,l.next),Ob(a,t,i,r,n,s,0),Ob(l,t,i,r,n,s,0);return}o=o.next}a=a.next}while(a!==e)}function Sze(e,t,i,r){let n=[],s,a,o,l,c;for(s=0,a=t.length;s<a;s++)o=t[s]*r,l=s<a-1?t[s+1]*r:e.length,c=eie(e,o,l,r,!1),c===c.next&&(c.steiner=!0),n.push(Pze(c));for(n.sort(_ze),s=0;s<n.length;s++)i=Eze(n[s],i);return i}function _ze(e,t){return e.x-t.x}function Eze(e,t){let i=Aze(e,t);if(!i)return t;let r=iie(i,e);return Dm(r,r.next),Dm(i,i.next)}function Aze(e,t){let i=t,r=-1/0,n,s=e.x,a=e.y;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){let f=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(f<=s&&f>r&&(r=f,n=i.x<i.next.x?i:i.next,f===s))return n}i=i.next}while(i!==t);if(!n)return null;let o=n,l=n.x,c=n.y,u=1/0,h;i=n;do s>=i.x&&i.x>=l&&s!==i.x&&G0(a<c?s:r,a,l,c,a<c?r:s,a,i.x,i.y)&&(h=Math.abs(a-i.y)/(s-i.x),Lb(i,e)&&(h<u||h===u&&(i.x>n.x||i.x===n.x&&Tze(n,i)))&&(n=i,u=h)),i=i.next;while(i!==o);return n}function Tze(e,t){return sn(e.prev,e,t.prev)<0&&sn(t.next,e,e.next)<0}function Cze(e,t,i,r){let n=e;do n.z===0&&(n.z=dR(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,Mze(n)}function Mze(e){let t,i,r,n,s,a,o,l,c=1;do{for(i=e,e=null,s=null,a=0;i;){for(a++,r=i,o=0,t=0;t<c&&(o++,r=r.nextZ,!!r);t++);for(l=c;o>0||l>0&&r;)o!==0&&(l===0||!r||i.z<=r.z)?(n=i,i=i.nextZ,o--):(n=r,r=r.nextZ,l--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;i=r}s.nextZ=null,c*=2}while(a>1);return e}function dR(e,t,i,r,n){return e=(e-i)*n|0,t=(t-r)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Pze(e){let t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function G0(e,t,i,r,n,s,a,o){return(n-a)*(t-o)>=(e-a)*(s-o)&&(e-a)*(r-o)>=(i-a)*(t-o)&&(i-a)*(s-o)>=(n-a)*(r-o)}function Dze(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Ize(e,t)&&(Lb(e,t)&&Lb(t,e)&&Rze(e,t)&&(sn(e.prev,e,t.prev)||sn(e,t.prev,t))||L3(e,t)&&sn(e.prev,e,e.next)>0&&sn(t.prev,t,t.next)>0)}function sn(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function L3(e,t){return e.x===t.x&&e.y===t.y}function tie(e,t,i,r){let n=o_(sn(e,t,i)),s=o_(sn(e,t,r)),a=o_(sn(i,r,e)),o=o_(sn(i,r,t));return!!(n!==s&&a!==o||n===0&&a_(e,i,t)||s===0&&a_(e,r,t)||a===0&&a_(i,e,r)||o===0&&a_(i,t,r))}function a_(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function o_(e){return e>0?1:e<0?-1:0}function Ize(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&tie(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function Lb(e,t){return sn(e.prev,e,e.next)<0?sn(e,t,e.next)>=0&&sn(e,e.prev,t)>=0:sn(e,t,e.prev)<0||sn(e,e.next,t)<0}function Rze(e,t){let i=e,r=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==e);return r}function iie(e,t){let i=new fR(e.i,e.x,e.y),r=new fR(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function tH(e,t,i,r){let n=new fR(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function kb(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function fR(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Oze(e,t,i,r){let n=0;for(let s=t,a=i-r;s<i;s+=r)n+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return n}var rie=class{static area(e){let t=e.length,i=0;for(let r=t-1,n=0;n<t;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return i*.5}static isClockWise(e){return rie.area(e)<0}static triangulateShape(e,t){let i=[],r=[],n=[];iH(e),rH(i,e);let s=e.length;t.forEach(iH);for(let o=0;o<t.length;o++)r.push(s),s+=t[o].length,rH(i,t[o]);let a=vze.triangulate(i,r);for(let o=0;o<a.length;o+=3)n.push(a.slice(o,o+3));return n}};function iH(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function rH(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}var nie=class extends vk{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new nie(e.radius,e.detail)}},$0=class extends Rt{constructor(e=1,t=32,i=16,r=0,n=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let o=Math.min(s+a,Math.PI),l=0,c=[],u=new j,h=new j,f=[],m=[],g=[],v=[];for(let x=0;x<=i;x++){let b=[],S=x/i,_=0;x==0&&s==0?_=.5/t:x==i&&o==Math.PI&&(_=-.5/t);for(let A=0;A<=t;A++){let M=A/t;u.x=-e*Math.cos(r+M*n)*Math.sin(s+S*a),u.y=e*Math.cos(s+S*a),u.z=e*Math.sin(r+M*n)*Math.sin(s+S*a),m.push(u.x,u.y,u.z),h.copy(u).normalize(),g.push(h.x,h.y,h.z),v.push(M+_,1-S),b.push(l++)}c.push(b)}for(let x=0;x<i;x++)for(let b=0;b<t;b++){let S=c[x][b+1],_=c[x][b],A=c[x+1][b],M=c[x+1][b+1];(x!==0||s>0)&&f.push(S,_,M),(x!==i-1||o<Math.PI)&&f.push(_,A,M)}this.setIndex(f),this.setAttribute("position",new yt(m,3)),this.setAttribute("normal",new yt(g,3)),this.setAttribute("uv",new yt(v,2))}static fromJSON(e){return new $0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},sie=class extends Rt{constructor(e=1,t=.4,i=12,r=48,n=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n},i=Math.floor(i),r=Math.floor(r);let s=[],a=[],o=[],l=[],c=new j,u=new j,h=new j;for(let f=0;f<=i;f++)for(let m=0;m<=r;m++){let g=m/r*n,v=f/i*Math.PI*2;u.x=(e+t*Math.cos(v))*Math.cos(g),u.y=(e+t*Math.cos(v))*Math.sin(g),u.z=t*Math.sin(v),a.push(u.x,u.y,u.z),c.x=e*Math.cos(g),c.y=e*Math.sin(g),h.subVectors(u,c).normalize(),o.push(h.x,h.y,h.z),l.push(m/r),l.push(f/i)}for(let f=1;f<=i;f++)for(let m=1;m<=r;m++){let g=(r+1)*f+m-1,v=(r+1)*(f-1)+m-1,x=(r+1)*(f-1)+m,b=(r+1)*f+m;s.push(g,v,b),s.push(v,x,b)}this.setIndex(s),this.setAttribute("position",new yt(a,3)),this.setAttribute("normal",new yt(o,3)),this.setAttribute("uv",new yt(l,2))}static fromJSON(e){return new sie(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},aie=class extends Rt{constructor(e=1,t=.4,i=64,r=8,n=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:s},i=Math.floor(i),r=Math.floor(r);let a=[],o=[],l=[],c=[],u=new j,h=new j,f=new j,m=new j,g=new j,v=new j,x=new j;for(let S=0;S<=i;++S){let _=S/i*n*Math.PI*2;b(_,n,s,e,f),b(_+.01,n,s,e,m),v.subVectors(m,f),x.addVectors(m,f),g.crossVectors(v,x),x.crossVectors(g,v),g.normalize(),x.normalize();for(let A=0;A<=r;++A){let M=A/r*Math.PI*2,C=-t*Math.cos(M),D=t*Math.sin(M);u.x=f.x+(C*x.x+D*g.x),u.y=f.y+(C*x.y+D*g.y),u.z=f.z+(C*x.z+D*g.z),o.push(u.x,u.y,u.z),h.subVectors(u,f).normalize(),l.push(h.x,h.y,h.z),c.push(S/i),c.push(A/r)}}for(let S=1;S<=i;S++)for(let _=1;_<=r;_++){let A=(r+1)*(S-1)+(_-1),M=(r+1)*S+(_-1),C=(r+1)*S+_,D=(r+1)*(S-1)+_;a.push(A,M,D),a.push(M,C,D)}this.setIndex(a),this.setAttribute("position",new yt(o,3)),this.setAttribute("normal",new yt(l,3)),this.setAttribute("uv",new yt(c,2));function b(S,_,A,M,C){let D=Math.cos(S),T=Math.sin(S),R=A/_*S,O=Math.cos(R);C.x=M*(2+O)*.5*D,C.y=M*(2+O)*T*.5,C.z=M*Math.sin(R)*.5}}static fromJSON(e){return new aie(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},Lze=class extends Vi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}};function Id(e,t,i){return oie(e)?new e.constructor(e.subarray(t,i!==void 0?i:e.length)):e.slice(t,i)}function l_(e,t,i){return!e||e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function oie(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kze(e){function t(n,s){return e[n]-e[s]}let i=e.length,r=new Array(i);for(let n=0;n!==i;++n)r[n]=n;return r.sort(t),r}function nH(e,t,i){let r=e.length,n=new e.constructor(r);for(let s=0,a=0;a!==r;++s){let o=i[s]*t;for(let l=0;l!==t;++l)n[a++]=e[o+l]}return n}function lie(e,t,i,r){let n=1,s=e[0];for(;s!==void 0&&s[r]===void 0;)s=e[n++];if(s===void 0)return;let a=s[r];if(a!==void 0)if(Array.isArray(a))do a=s[r],a!==void 0&&(t.push(s.time),i.push.apply(i,a)),s=e[n++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[r],a!==void 0&&(t.push(s.time),a.toArray(i,i.length)),s=e[n++];while(s!==void 0);else do a=s[r],a!==void 0&&(t.push(s.time),i.push(a)),s=e[n++];while(s!==void 0)}var k3=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],n=t[i-1];e:{t:{let s;i:{r:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<n)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(n=r,r=t[++i],e<r)break t}s=t.length;break i}if(!(e>=n)){let a=t[1];e<a&&(i=2,n=a);for(let o=i-2;;){if(n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===o)break;if(r=n,n=t[--i-1],e>=n)break t}s=i,i=0;break i}break e}for(;i<s;){let a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],n=t[i-1],n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,n,r)}return this.interpolate_(i,n,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=e*r;for(let s=0;s!==r;++s)t[s]=i[n+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},zze=class extends k3{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:U0,endingEnd:U0}}intervalChanged_(e,t,i){let r=this.parameterPositions,n=e-2,s=e+1,a=r[n],o=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case F0:n=e,a=2*t-i;break;case VA:n=r.length-2,a=t+r[n]-r[n+1];break;default:n=e,a=i}if(o===void 0)switch(this.getSettings_().endingEnd){case F0:s=e,o=2*i-t;break;case VA:s=1,o=i+r[1]-r[0];break;default:s=e-1,o=t}let l=(i-t)*.5,c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-i),this._offsetPrev=n*c,this._offsetNext=s*c}interpolate_(e,t,i,r){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(i-t)/(r-t),g=m*m,v=g*m,x=-h*v+2*h*g-h*m,b=(1+h)*v+(-1.5-2*h)*g+(-.5+h)*m+1,S=(-1-f)*v+(1.5+f)*g+.5*m,_=f*v-f*g;for(let A=0;A!==a;++A)n[A]=x*s[c+A]+b*s[l+A]+S*s[o+A]+_*s[u+A];return n}},cie=class extends k3{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(i-t)/(r-t),u=1-c;for(let h=0;h!==a;++h)n[h]=s[l+h]*u+s[o+h]*c;return n}},Bze=class extends k3{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},ku=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=l_(t,this.TimeBufferType),this.values=l_(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:l_(e.times,Array),values:l_(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Bze(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cie(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new zze(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case jA:t=this.InterpolantFactoryMethodDiscrete;break;case NA:t=this.InterpolantFactoryMethodLinear;break;case kP:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return jA;case this.InterpolantFactoryMethodLinear:return NA;case this.InterpolantFactoryMethodSmooth:return kP}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,n=0,s=r-1;for(;n!==r&&i[n]<e;)++n;for(;s!==-1&&i[s]>t;)--s;if(++s,n!==0||s!==r){n>=s&&(s=Math.max(s,1),n=s-1);let a=this.getValueSize();this.times=Id(i,n,s),this.values=Id(this.values,n*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,n=i.length;n===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==n;a++){let o=i[a];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),e=!1;break}if(s!==null&&s>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,s),e=!1;break}s=o}if(r!==void 0&&oie(r))for(let a=0,o=r.length;a!==o;++a){let l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=Id(this.times),t=Id(this.values),i=this.getValueSize(),r=this.getInterpolation()===kP,n=e.length-1,s=1;for(let a=1;a<n;++a){let o=!1,l=e[a],c=e[a+1];if(l!==c&&(a!==1||l!==e[0]))if(r)o=!0;else{let u=a*i,h=u-i,f=u+i;for(let m=0;m!==i;++m){let g=t[u+m];if(g!==t[h+m]||g!==t[f+m]){o=!0;break}}}if(o){if(a!==s){e[s]=e[a];let u=a*i,h=s*i;for(let f=0;f!==i;++f)t[h+f]=t[u+f]}++s}}if(n>0){e[s]=e[n];for(let a=n*i,o=s*i,l=0;l!==i;++l)t[o+l]=t[a+l];++s}return s!==e.length?(this.times=Id(e,0,s),this.values=Id(t,0,s*i)):(this.times=e,this.values=t),this}clone(){let e=Id(this.times,0),t=Id(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};ku.prototype.TimeBufferType=Float32Array;ku.prototype.ValueBufferType=Float32Array;ku.prototype.DefaultInterpolation=NA;var ay=class extends ku{};ay.prototype.ValueTypeName="bool";ay.prototype.ValueBufferType=Array;ay.prototype.DefaultInterpolation=jA;ay.prototype.InterpolantFactoryMethodLinear=void 0;ay.prototype.InterpolantFactoryMethodSmooth=void 0;var uie=class extends ku{};uie.prototype.ValueTypeName="color";var qA=class extends ku{};qA.prototype.ValueTypeName="number";var jze=class extends k3{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(i-t)/(r-t),l=e*a;for(let c=l+a;l!==c;l+=4)Jt.slerpFlat(n,0,s,l-a,s,l,o);return n}},Sw=class extends ku{InterpolantFactoryMethodLinear(e){return new jze(this.times,this.values,this.getValueSize(),e)}};Sw.prototype.ValueTypeName="quaternion";Sw.prototype.DefaultInterpolation=NA;Sw.prototype.InterpolantFactoryMethodSmooth=void 0;var oy=class extends ku{};oy.prototype.ValueTypeName="string";oy.prototype.ValueBufferType=Array;oy.prototype.DefaultInterpolation=jA;oy.prototype.InterpolantFactoryMethodLinear=void 0;oy.prototype.InterpolantFactoryMethodSmooth=void 0;var XA=class extends ku{};XA.prototype.ValueTypeName="vector";var pR=class{constructor(e,t=-1,i,r=ak){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=xl(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)t.push(Vze(i[s]).scale(r));let n=new this(e.name,e.duration,t,e.blendMode);return n.uuid=e.uuid,n}static toJSON(e){let t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let n=0,s=i.length;n!==s;++n)t.push(ku.toJSON(i[n]));return r}static CreateFromMorphTargetSequence(e,t,i,r){let n=t.length,s=[];for(let a=0;a<n;a++){let o=[],l=[];o.push((a+n-1)%n,a,(a+1)%n),l.push(0,1,0);let c=kze(o);o=nH(o,1,c),l=nH(l,1,c),!r&&o[0]===0&&(o.push(n),l.push(l[0])),s.push(new qA(".morphTargetInfluences["+t[a].name+"]",o,l).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let r={},n=/^([\w-]*?)([\d]+)$/;for(let a=0,o=e.length;a<o;a++){let l=e[a],c=l.name.match(n);if(c&&c.length>1){let u=c[1],h=r[u];h||(r[u]=h=[]),h.push(l)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(c,u,h,f,m){if(h.length!==0){let g=[],v=[];lie(h,g,v,f),g.length!==0&&m.push(new c(u,g,v))}},r=[],n=e.name||"default",s=e.fps||30,a=e.blendMode,o=e.length||-1,l=e.hierarchy||[];for(let c=0;c<l.length;c++){let u=l[c].keys;if(!(!u||u.length===0))if(u[0].morphTargets){let h={},f;for(f=0;f<u.length;f++)if(u[f].morphTargets)for(let m=0;m<u[f].morphTargets.length;m++)h[u[f].morphTargets[m]]=-1;for(let m in h){let g=[],v=[];for(let x=0;x!==u[f].morphTargets.length;++x){let b=u[f];g.push(b.time),v.push(b.morphTarget===m?1:0)}r.push(new qA(".morphTargetInfluence["+m+"]",g,v))}o=h.length*s}else{let h=".bones["+t[c].name+"]";i(XA,h+".position",u,"pos",r),i(Sw,h+".quaternion",u,"rot",r),i(XA,h+".scale",u,"scl",r)}}return r.length===0?null:new this(n,o,r,a)}resetDuration(){let e=this.tracks,t=0;for(let i=0,r=e.length;i!==r;++i){let n=this.tracks[i];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Nze(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qA;case"vector":case"vector2":case"vector3":case"vector4":return XA;case"color":return uie;case"quaternion":return Sw;case"bool":case"boolean":return ay;case"string":return oy}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Vze(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=Nze(e.type);if(e.times===void 0){let i=[],r=[];lie(e.keys,i,r,"value"),e.times=i,e.values=r}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var YA={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},hie=class{constructor(e,t,i){let r=this,n=!1,s=0,a=0,o,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(c){a++,n===!1&&r.onStart!==void 0&&r.onStart(c,s,a),n=!0},this.itemEnd=function(c){s++,r.onProgress!==void 0&&r.onProgress(c,s,a),s===a&&(n=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return o?o(c):c},this.setURLModifier=function(c){return o=c,this},this.addHandler=function(c,u){return l.push(c,u),this},this.removeHandler=function(c){let u=l.indexOf(c);return u!==-1&&l.splice(u,2),this},this.getHandler=function(c){for(let u=0,h=l.length;u<h;u+=2){let f=l[u],m=l[u+1];if(f.global&&(f.lastIndex=0),f.test(c))return m}return null}}},Uze=new hie,_w=class{constructor(e){this.manager=e!==void 0?e:Uze,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let i=this;return new Promise(function(r,n){i.load(e,r,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},ch={},Fze=class extends Error{constructor(e,t){super(e),this.response=t}},mR=class extends _w{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=YA.get(e);if(n!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(ch[e]!==void 0){ch[e].push({onLoad:t,onProgress:i,onError:r});return}ch[e]=[],ch[e].push({onLoad:t,onProgress:i,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let c=ch[e],u=l.body.getReader(),h=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),f=h?parseInt(h):0,m=f!==0,g=0,v=new ReadableStream({start(x){b();function b(){u.read().then(({done:S,value:_})=>{if(S)x.close();else{g+=_.byteLength;let A=new ProgressEvent("progress",{lengthComputable:m,loaded:g,total:f});for(let M=0,C=c.length;M<C;M++){let D=c[M];D.onProgress&&D.onProgress(A)}x.enqueue(_),b()}})}}});return new Response(v)}else throw new Fze(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(o){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return l.json();default:if(a===void 0)return l.text();{let c=/charset="?([^;"\s]*)"?/i.exec(a),u=c&&c[1]?c[1].toLowerCase():void 0,h=new TextDecoder(u);return l.arrayBuffer().then(f=>h.decode(f))}}}).then(l=>{YA.add(e,l);let c=ch[e];delete ch[e];for(let u=0,h=c.length;u<h;u++){let f=c[u];f.onLoad&&f.onLoad(l)}}).catch(l=>{let c=ch[e];if(c===void 0)throw this.manager.itemError(e),l;delete ch[e];for(let u=0,h=c.length;u<h;u++){let f=c[u];f.onError&&f.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},Hze=class extends _w{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=this,s=YA.get(e);if(s!==void 0)return n.manager.itemStart(e),setTimeout(function(){t&&t(s),n.manager.itemEnd(e)},0),s;let a=Ib("img");function o(){c(),YA.add(e,this),t&&t(this),n.manager.itemEnd(e)}function l(u){c(),r&&r(u),n.manager.itemError(e),n.manager.itemEnd(e)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),n.manager.itemStart(e),a.src=e,a}},Gze=class extends _w{constructor(e){super(e)}load(e,t,i,r){let n=new on,s=new Hze(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){n.image=a,n.needsUpdate=!0,t!==void 0&&t(n)},i,r),n}},Ew=class extends mr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new qt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},Wze=class extends Ew{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(mr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new qt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},h4=new tt,sH=new j,aH=new j,yk=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pe(512,512),this.map=null,this.mapPass=null,this.matrix=new tt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new uk,this._frameExtents=new pe(1,1),this._viewportCount=1,this._viewports=[new ni(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;sH.setFromMatrixPosition(e.matrixWorld),t.position.copy(sH),aH.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(aH),t.updateMatrixWorld(),h4.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(h4),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(h4)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},qze=class extends yk{constructor(){super(new ya(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=Db*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(i!==t.fov||r!==t.aspect||n!==t.far)&&(t.fov=i,t.aspect=r,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Xze=class extends Ew{constructor(e,t,i=0,r=Math.PI/3,n=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(mr.DEFAULT_UP),this.updateMatrix(),this.target=new mr,this.distance=i,this.angle=r,this.penumbra=n,this.decay=s,this.map=null,this.shadow=new qze}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},oH=new tt,B1=new j,d4=new j,Yze=class extends yk{constructor(){super(new ya(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pe(4,2),this._viewportCount=6,this._viewports=[new ni(2,1,1,1),new ni(0,1,1,1),new ni(3,1,1,1),new ni(1,1,1,1),new ni(3,0,1,1),new ni(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,n=e.distance||i.far;n!==i.far&&(i.far=n,i.updateProjectionMatrix()),B1.setFromMatrixPosition(e.matrixWorld),i.position.copy(B1),d4.copy(i.position),d4.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(d4),i.updateMatrixWorld(),r.makeTranslation(-B1.x,-B1.y,-B1.z),oH.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oH)}},Qze=class extends Ew{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Yze}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},Kze=class extends yk{constructor(){super(new I3(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Zze=class extends Ew{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(mr.DEFAULT_UP),this.updateMatrix(),this.target=new mr,this.shadow=new Kze}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},die=class extends Rt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},fie=class extends _w{constructor(e){super(e)}load(e,t,i,r){let n=this,s=new mR(n.manager);s.setPath(n.path),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(a){try{t(n.parse(JSON.parse(a)))}catch(o){r?r(o):console.error(o),n.manager.itemError(e)}},i,r)}parse(e){let t={},i={};function r(h,f){if(t[f]!==void 0)return t[f];let m=h.interleavedBuffers[f],g=n(h,m.buffer),v=jS(m.type,g),x=new eze(v,m.stride);return x.uuid=m.uuid,t[f]=x,x}function n(h,f){if(i[f]!==void 0)return i[f];let m=h.arrayBuffers[f],g=new Uint32Array(m).buffer;return i[f]=g,g}let s=e.isInstancedBufferGeometry?new die:new Rt,a=e.data.index;if(a!==void 0){let h=jS(a.type,a.array);s.setIndex(new Xt(h,1))}let o=e.data.attributes;for(let h in o){let f=o[h],m;if(f.isInterleavedBufferAttribute){let g=r(e.data,f.data);m=new hR(g,f.itemSize,f.offset,f.normalized)}else{let g=jS(f.type,f.array),v=f.isInstancedBufferAttribute?Rb:Xt;m=new v(g,f.itemSize,f.normalized)}f.name!==void 0&&(m.name=f.name),f.usage!==void 0&&m.setUsage(f.usage),f.updateRange!==void 0&&(m.updateRange.offset=f.updateRange.offset,m.updateRange.count=f.updateRange.count),s.setAttribute(h,m)}let l=e.data.morphAttributes;if(l)for(let h in l){let f=l[h],m=[];for(let g=0,v=f.length;g<v;g++){let x=f[g],b;if(x.isInterleavedBufferAttribute){let S=r(e.data,x.data);b=new hR(S,x.itemSize,x.offset,x.normalized)}else{let S=jS(x.type,x.array);b=new Xt(S,x.itemSize,x.normalized)}x.name!==void 0&&(b.name=x.name),m.push(b)}s.morphAttributes[h]=m}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let c=e.data.groups||e.data.drawcalls||e.data.offsets;if(c!==void 0)for(let h=0,f=c.length;h!==f;++h){let m=c[h];s.addGroup(m.start,m.count,m.materialIndex)}let u=e.data.boundingSphere;if(u!==void 0){let h=new j;u.center!==void 0&&h.fromArray(u.center),s.boundingSphere=new yo(h,u.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}},$ze=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=lH(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=lH();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function lH(){return(typeof performance>"u"?Date:performance).now()}var Jze=class{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,n,s;switch(t){case"quaternion":r=this._slerp,n=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,n=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,n=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=n,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let i=this.buffer,r=this.valueSize,n=e*r+r,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==r;++a)i[n+a]=i[a];s=t}else{s+=t;let a=t/s;this._mixBufferRegion(i,n,0,a,r)}this.cumulativeWeight=s}accumulateAdditive(e){let t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,i=this.buffer,r=e*t+t,n=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){let o=t*this._origIndex;this._mixBufferRegion(i,r,o,1-n,t)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(i[o]!==i[o+t]){a.setValue(i,r);break}}saveOriginalState(){let e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let n=i,s=r;n!==s;++n)t[n]=t[r+n%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,n){if(r>=.5)for(let s=0;s!==n;++s)e[t+s]=e[i+s]}_slerp(e,t,i,r){Jt.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,n){let s=this._workIndex*n;Jt.multiplyQuaternionsFlat(e,s,e,t,e,i),Jt.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,i,r,n){let s=1-r;for(let a=0;a!==n;++a){let o=t+a;e[o]=e[o]*s+e[i+a]*r}}_lerpAdditive(e,t,i,r,n){for(let s=0;s!==n;++s){let a=t+s;e[a]=e[a]+e[i+s]*r}}},xk="\\[\\]\\.:\\/",eBe=new RegExp("["+xk+"]","g"),bk="[^"+xk+"]",tBe="[^"+xk.replace("\\.","")+"]",iBe=/((?:WC+[\/:])*)/.source.replace("WC",bk),rBe=/(WCOD+)?/.source.replace("WCOD",tBe),nBe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bk),sBe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bk),aBe=new RegExp("^"+iBe+rBe+nBe+sBe+"$"),oBe=["material","materials","bones","map"],lBe=class{constructor(e,t,i){let r=i||Pr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=i.length;r!==n;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},Pr=class{constructor(e,t,i){this.path=t,this.parsedPath=i||Pr.parseTrackName(t),this.node=Pr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Pr.Composite(e,t,i):new Pr(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(eBe,"")}static parseTrackName(e){let t=aBe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){let n=i.nodeName.substring(r+1);oBe.indexOf(n)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=n)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){let i=function(n){for(let s=0;s<n.length;s++){let a=n[s];if(a.name===t||a.uuid===t)return a;let o=i(a.children);if(o)return o}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let i=this.resolvedProperty;for(let r=0,n=i.length;r!==n;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let i=this.resolvedProperty;for(let r=0,n=i.length;r!==n;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let i=this.resolvedProperty;for(let r=0,n=i.length;r!==n;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let i=this.resolvedProperty;for(let r=0,n=i.length;r!==n;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,i=t.objectName,r=t.propertyName,n=t.propertyIndex;if(e||(e=Pr.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let l=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===l){l=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let s=e[r];if(s===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(n!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[n]!==void 0&&(n=e.morphTargetDictionary[n])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else s.fromArray!==void 0&&s.toArray!==void 0?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Pr.Composite=lBe;Pr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Pr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Pr.prototype.GetterByBindingType=[Pr.prototype._getValue_direct,Pr.prototype._getValue_array,Pr.prototype._getValue_arrayElement,Pr.prototype._getValue_toArray];Pr.prototype.SetterByBindingTypeAndVersioning=[[Pr.prototype._setValue_direct,Pr.prototype._setValue_direct_setNeedsUpdate,Pr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Pr.prototype._setValue_array,Pr.prototype._setValue_array_setNeedsUpdate,Pr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Pr.prototype._setValue_arrayElement,Pr.prototype._setValue_arrayElement_setNeedsUpdate,Pr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Pr.prototype._setValue_fromArray,Pr.prototype._setValue_fromArray_setNeedsUpdate,Pr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var cBe=class{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;let n=t.tracks,s=n.length,a=new Array(s),o={endingStart:U0,endingEnd:U0};for(let l=0;l!==s;++l){let c=n[l].createInterpolant(null);a[l]=c,c.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Dte,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){let r=this._clip.duration,n=e._clip.duration,s=n/r,a=r/n;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){let r=this._mixer,n=r.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);let o=a.parameterPositions,l=a.sampleValues;return o[0]=n,o[1]=n+i,l[0]=e/s,l[1]=t/s,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}let n=this._startTime;if(n!==null){let o=(e-n)*i;o<0||i===0?t=0:(this._startTime=null,t=i*o)}t*=this._updateTimeScale(e);let s=this._updateTime(t),a=this._updateWeight(e);if(a>0){let o=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case jIe:for(let c=0,u=o.length;c!==u;++c)o[c].evaluate(s),l[c].accumulateAdditive(a);break;case ak:default:for(let c=0,u=o.length;c!==u;++c)o[c].evaluate(s),l[c].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let i=this._weightInterpolant;if(i!==null){let r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,i=this.loop,r=this.time+e,n=this._loopCount,s=i===sk;if(e===0)return n===-1?r:s&&(n&1)===1?t-r:r;if(i===Pte){n===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(n===-1&&(e>=0?(n=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){let a=Math.floor(r/t);r-=t*a,n+=Math.abs(a);let o=this.repetitions-n;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(o===1){let l=e<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=n,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(n&1)===1)return t-r}return r}_setEndings(e,t,i){let r=this._interpolantSettings;i?(r.endingStart=F0,r.endingEnd=F0):(e?r.endingStart=this.zeroSlopeAtStart?F0:U0:r.endingStart=VA,t?r.endingEnd=this.zeroSlopeAtEnd?F0:U0:r.endingEnd=VA)}_scheduleFading(e,t,i){let r=this._mixer,n=r.time,s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,o=s.sampleValues;return a[0]=n,o[0]=t,a[1]=n+e,o[1]=i,this}},uBe=new Float32Array(1),hBe=class extends la{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let i=e._localRoot||this._root,r=e._clip.tracks,n=r.length,s=e._propertyBindings,a=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName,c=l[o];c===void 0&&(c={},l[o]=c);for(let u=0;u!==n;++u){let h=r[u],f=h.name,m=c[f];if(m!==void 0)++m.referenceCount,s[u]=m;else{if(m=s[u],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,o,f));continue}let g=t&&t._propertyBindings[u].binding.parsedPath;m=new Jze(Pr.create(i,f,g),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,o,f),s[u]=m}a[u].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let i=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,i)}let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let n=t[i];n.useCount++===0&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let n=t[i];--n.useCount===0&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){let r=this._actions,n=this._actionsByClip,s=n[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=s;else{let a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){let t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;let n=e._clip.uuid,s=this._actionsByClip,a=s[n],o=a.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;let u=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],o.length===0&&delete s[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let n=t[i];--n.referenceCount===0&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n}_takeBackAction(e){let t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n}_addInactiveBinding(e,t,i){let r=this._bindingsByRootAndName,n=this._bindings,s=r[t];s===void 0&&(s={},r[t]=s),s[i]=e,e._cacheIndex=n.length,n.push(e)}_removeInactiveBinding(e){let t=this._bindings,i=e.binding,r=i.rootNode.uuid,n=i.path,s=this._bindingsByRootAndName,a=s[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[n],Object.keys(a).length===0&&delete s[r]}_lendBinding(e){let t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n}_takeBackBinding(e){let t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return i===void 0&&(i=new cie(new Float32Array(2),new Float32Array(2),1,uBe),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){let t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,n=t[r];e.__cacheIndex=r,t[r]=e,n.__cacheIndex=i,t[i]=n}clipAction(e,t,i){let r=t||this._root,n=r.uuid,s=typeof e=="string"?pR.findByName(r,e):e,a=s!==null?s.uuid:e,o=this._actionsByClip[a],l=null;if(i===void 0&&(s!==null?i=s.blendMode:i=ak),o!==void 0){let u=o.actionByRoot[n];if(u!==void 0&&u.blendMode===i)return u;l=o.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;let c=new cBe(this,s,t,i);return this._bindAction(c,l),this._addInactiveAction(c,a,n),c}existingAction(e,t){let i=t||this._root,r=i.uuid,n=typeof e=="string"?pR.findByName(i,e):e,s=n?n.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;let t=this._actions,i=this._nActiveActions,r=this.time+=e,n=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==i;++l)t[l]._update(r,e,n,s);let a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,i=e.uuid,r=this._actionsByClip,n=r[i];if(n!==void 0){let s=n.knownActions;for(let a=0,o=s.length;a!==o;++a){let l=s[a];this._deactivateAction(l);let c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[i]}}uncacheRoot(e){let t=e.uuid,i=this._actionsByClip;for(let s in i){let a=i[s].actionByRoot,o=a[t];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}let r=this._bindingsByRootAndName,n=r[t];if(n!==void 0)for(let s in n){let a=n[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){let i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}},Qe=class{constructor(e){this.value=e}clone(){return new Qe(this.value.clone===void 0?this.value:this.value.clone())}},pie=class{constructor(e,t,i=0,r=1/0){this.ray=new ry(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new lk,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return gR(e,this,i,t),i.sort(cH),i}intersectObjects(e,t=!0,i=[]){for(let r=0,n=e.length;r<n;r++)gR(e[r],this,i,t);return i.sort(cH),i}};function cH(e,t){return e.distance-t.distance}function gR(e,t,i,r){if(e.layers.test(t.layers)&&e.raycast(t,i),r===!0){let n=e.children;for(let s=0,a=n.length;s<a;s++)gR(n[s],t,i,!0)}}var uH=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Vn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},hH=new pe,wk=class{constructor(e=new pe(1/0,1/0),t=new pe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=hH.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return hH.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},dH=new j,c_=new j,bl=class{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){dH.subVectors(e,this.start),c_.subVectors(this.end,this.start);let i=c_.dot(c_),r=c_.dot(dH)/i;return t&&(r=Vn(r,0,1)),r}closestPointToPoint(e,t,i){let r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},fH=new j,dBe=class extends mr{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let i=new Rt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,o=32;s<o;s++,a++){let l=s/o*Math.PI*2,c=a/o*Math.PI*2;r.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}i.setAttribute("position",new yt(r,3));let n=new Kf({fog:!1,toneMapped:!1});this.cone=new ww(i,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),fH.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(fH),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},fBe=class extends kr{constructor(e,t,i){let r=new $0(t,4,2),n=new Yh({wireframe:!0,fog:!1,toneMapped:!1});super(r,n),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},pH=new j,u_=new j,mH=new j,pBe=class extends mr{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Rt;r.setAttribute("position",new yt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new Kf({fog:!1,toneMapped:!1});this.lightPlane=new HA(r,n),this.add(this.lightPlane),r=new Rt,r.setAttribute("position",new yt([0,0,0,0,0,1],3)),this.targetLine=new HA(r,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),pH.setFromMatrixPosition(this.light.matrixWorld),u_.setFromMatrixPosition(this.light.target.matrixWorld),mH.subVectors(u_,pH),this.lightPlane.lookAt(u_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(u_),this.targetLine.scale.z=mH.length()}},h_=new j,dn=new Qf,QA=class extends ww{constructor(e){let t=new Rt,i=new Kf({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],n=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(m,g){o(m),o(g)}function o(m){r.push(0,0,0),n.push(0,0,0),s[m]===void 0&&(s[m]=[]),s[m].push(r.length/3-1)}t.setAttribute("position",new yt(r,3)),t.setAttribute("color",new yt(n,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new qt(16755200),c=new qt(16711680),u=new qt(43775),h=new qt(16777215),f=new qt(3355443);this.setColors(l,c,u,h,f)}setColors(e,t,i,r,n){let s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,i.r,i.g,i.b),s.setXYZ(33,i.r,i.g,i.b),s.setXYZ(34,i.r,i.g,i.b),s.setXYZ(35,i.r,i.g,i.b),s.setXYZ(36,i.r,i.g,i.b),s.setXYZ(37,i.r,i.g,i.b),s.setXYZ(38,r.r,r.g,r.b),s.setXYZ(39,r.r,r.g,r.b),s.setXYZ(40,n.r,n.g,n.b),s.setXYZ(41,n.r,n.g,n.b),s.setXYZ(42,n.r,n.g,n.b),s.setXYZ(43,n.r,n.g,n.b),s.setXYZ(44,n.r,n.g,n.b),s.setXYZ(45,n.r,n.g,n.b),s.setXYZ(46,n.r,n.g,n.b),s.setXYZ(47,n.r,n.g,n.b),s.setXYZ(48,n.r,n.g,n.b),s.setXYZ(49,n.r,n.g,n.b),s.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,i=1,r=1;dn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),wn("c",t,e,dn,0,0,-1),wn("t",t,e,dn,0,0,1),wn("n1",t,e,dn,-i,-r,-1),wn("n2",t,e,dn,i,-r,-1),wn("n3",t,e,dn,-i,r,-1),wn("n4",t,e,dn,i,r,-1),wn("f1",t,e,dn,-i,-r,1),wn("f2",t,e,dn,i,-r,1),wn("f3",t,e,dn,-i,r,1),wn("f4",t,e,dn,i,r,1),wn("u1",t,e,dn,i*.7,r*1.1,-1),wn("u2",t,e,dn,-i*.7,r*1.1,-1),wn("u3",t,e,dn,0,r*2,-1),wn("cf1",t,e,dn,-i,0,1),wn("cf2",t,e,dn,i,0,1),wn("cf3",t,e,dn,0,-r,1),wn("cf4",t,e,dn,0,r,1),wn("cn1",t,e,dn,-i,0,-1),wn("cn2",t,e,dn,i,0,-1),wn("cn3",t,e,dn,0,-r,-1),wn("cn4",t,e,dn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function wn(e,t,i,r,n,s,a){h_.set(n,s,a).unproject(r);let o=t[e];if(o!==void 0){let l=i.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],h_.x,h_.y,h_.z)}}var KA=class extends ww{constructor(e,t=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new Rt;n.setIndex(new Xt(i,1)),n.setAttribute("position",new yt(r,3)),super(n,new Kf({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},mBe=class extends ww{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Rt;r.setAttribute("position",new yt(t,3)),r.setAttribute("color",new yt(i,3));let n=new Kf({vertexColors:!0,toneMapped:!1});super(r,n),this.type="AxesHelper"}setColors(e,t,i){let r=new qt,n=this.geometry.attributes.color.array;return r.set(e),r.toArray(n,0),r.toArray(n,3),r.set(t),r.toArray(n,6),r.toArray(n,9),r.set(i),r.toArray(n,12),r.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Ch=gBe();function gBe(){let e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),r=new Uint32Array(512),n=new Uint32Array(512);for(let l=0;l<256;++l){let c=l-127;c<-27?(r[l]=0,r[l|256]=32768,n[l]=24,n[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,n[l]=-c-1,n[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,n[l]=13,n[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,n[l]=24,n[l|256]=24):(r[l]=31744,r[l|256]=64512,n[l]=13,n[l|256]=13)}let s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;(c&8388608)===0;)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:t,uint32View:i,baseTable:r,shiftTable:n,mantissaTable:s,exponentTable:a,offsetTable:o}}function vBe(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Vn(e,-65504,65504),Ch.floatView[0]=e;let t=Ch.uint32View[0],i=t>>23&511;return Ch.baseTable[i]+((t&8388607)>>Ch.shiftTable[i])}function yBe(e){let t=e>>10;return Ch.uint32View[0]=Ch.mantissaTable[Ch.offsetTable[t]+(e&1023)]+Ch.exponentTable[t],Ch.floatView[0]}var xBe=Object.freeze({__proto__:null,fromHalfFloat:yBe,toHalfFloat:vBe});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:iy}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=iy);var j1=".",Sk=Symbol("target"),mie=Symbol("unsubscribe");function vR(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function bBe(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var iu=Array.isArray;function _k(e){return typeof e=="symbol"}var wBe={after:(e,t)=>iu(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>iu(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=j1),_k(t)?e+t.toString():e+t):e,initial:e=>{if(iu(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(j1);return t===-1?"":e.slice(0,t)},last:e=>{if(iu(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(j1);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(iu(e))for(let i of e)t(i);else if(e!==""){let i=0,r=e.indexOf(j1);if(r===-1)t(e);else for(;i<e.length;)r===-1&&(r=e.length),t(e.slice(i,r)),i=r+1,r=e.indexOf(j1,i)}},get(e,t){return this.walk(t,i=>{e&&(e=e[i])}),e}},ul=wBe;function SBe(e){return typeof e=="object"&&typeof e.next=="function"}function _Be(e,t,i,r,n){let s=e.next;if(t.name==="entries")e.next=function(){let a=s.call(this);return a.done===!1&&(a.value[0]=n(a.value[0],t,a.value[0],r),a.value[1]=n(a.value[1],t,a.value[0],r)),a};else if(t.name==="values"){let a=i[Sk].keys();e.next=function(){let o=s.call(this);return o.done===!1&&(o.value=n(o.value,t,a.next().value,r)),o}}else e.next=function(){let a=s.call(this);return a.done===!1&&(a.value=n(a.value,t,a.value,r)),a};return e}function gH(e,t,i){return e.isUnsubscribed||t.ignoreSymbols&&_k(i)||t.ignoreUnderscores&&i.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(i)}var EBe=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),i=t.get(e);return i===void 0&&(i={},t.set(e,i)),i}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let i=this._getProperties(e),r=i[t];return r===void 0&&(r=Reflect.getOwnPropertyDescriptor(e,t),i[t]=r),r}getProxy(e,t,i,r){if(this.isUnsubscribed)return e;let n=e[r],s=n||e;this._pathCache.set(s,t);let a=this._proxyCache.get(s);return a===void 0&&(a=n===void 0?new Proxy(e,i):e,this._proxyCache.set(s,a)),a}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,ul.get(t,this.getPath(e)))}defineProperty(e,t,i){return Reflect.defineProperty(e,t,i)?(this.isUnsubscribed||(this._getProperties(e)[t]=i),!0):!1}setProperty(e,t,i,r,n){if(!this._equals(n,i)||!(t in e)){let s=this._getOwnPropertyDescriptor(e,t);return s!==void 0&&"set"in s?Reflect.set(e,t,i,r):Reflect.set(e,t,i)}return!0}deleteProperty(e,t,i){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let r=this._getDescriptorCache().get(e);r&&(delete r[t],this._pathCache.delete(i))}return!0}return!1}isSameDescriptor(e,t,i){let r=this._getOwnPropertyDescriptor(t,i);return e!==void 0&&r!==void 0&&Object.is(e.value,r.value)&&(e.writable||!1)===(r.writable||!1)&&(e.enumerable||!1)===(r.enumerable||!1)&&(e.configurable||!1)===(r.configurable||!1)&&e.get===r.get&&e.set===r.set}isGetInvariant(e,t){let i=this._getOwnPropertyDescriptor(e,t);return i!==void 0&&i.configurable!==!0&&i.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function yR(e){return toString.call(e)==="[object Object]"}function d_(){return!0}function e0(e,t){return e.length!==t.length||e.some((i,r)=>t[r]!==i)}var gie=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),ABe=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),vie={push:d_,pop:d_,shift:d_,unshift:d_,copyWithin:e0,reverse:e0,sort:e0,splice:e0,flat:e0,fill:e0},TBe=new Set([...gie,...ABe,...Object.keys(vie)]);function f_(e,t){if(e.size!==t.size)return!0;for(let i of e)if(!t.has(i))return!0;return!1}var yie=["keys","values","entries"],xie=new Set(["has","toString"]),bie={add:f_,clear:f_,delete:f_,forEach:f_},CBe=new Set([...xie,...Object.keys(bie),...yie]);function p_(e,t){if(e.size!==t.size)return!0;let i;for(let[r,n]of e)if(i=t.get(r),i!==n||i===void 0&&!t.has(r))return!0;return!1}var MBe=new Set([...xie,"get"]),wie={set:p_,clear:p_,delete:p_,forEach:p_},PBe=new Set([...MBe,...Object.keys(wie),...yie]),Bf=class{constructor(e,t,i,r){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=r,this._changes=r?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return gie.has(e)}_shallowClone(e){let t=e;if(yR(e))t={...e};else if(iu(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(i=>this._shallowClone(i)));else if(e instanceof Map){t=new Map;for(let[i,r]of e.entries())t.set(i,this._shallowClone(r))}return this._clonedCache.add(t),t}preferredThisArg(e,t,i,r){return e?(iu(r)?this._onIsChanged=vie[t]:r instanceof Set?this._onIsChanged=bie[t]:r instanceof Map&&(this._onIsChanged=wie[t]),r):i}update(e,t,i){let r=ul.after(e,this._path);if(t!=="length"){let n=this.clone;ul.walk(r,s=>{n&&n[s]&&(this._clonedCache.has(n[s])||(n[s]=this._shallowClone(n[s])),n=n[s])}),this._hasOnValidate&&this._changes.push({path:r,property:t,previous:i}),n&&n[t]&&(n[t]=i)}this._isChanged=!0}undo(e){let t;for(let i=this._changes.length-1;i!==-1;i--)t=this._changes[i],ul.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},vH=class extends Bf{static isHandledMethod(e){return TBe.has(e)}},DBe=class extends Bf{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},yH=class extends Bf{static isHandledMethod(e){return CBe.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},xH=class extends Bf{static isHandledMethod(e){return PBe.has(e)}undo(e){for(let[t,i]of this.clone.entries())e.set(t,i);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},IBe=class extends Bf{constructor(e,t,i,r){super(void 0,t,i,r),this._arg1=i[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},RBe=class extends Bf{constructor(e,t,i,r){super(void 0,t,i,r),this._weakKey=i[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},C0=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return yR(e)||iu(e)||vR(e)}static isHandledMethod(e,t){return yR(e)?Bf.isHandledMethod(t):iu(e)?vH.isHandledMethod(t):e instanceof Set?yH.isHandledMethod(t):e instanceof Map?xH.isHandledMethod(t):vR(e)}get isCloning(){return this._stack.length>0}start(e,t,i){let r=Bf;iu(e)?r=vH:e instanceof Date?r=DBe:e instanceof Set?r=yH:e instanceof Map?r=xH:e instanceof WeakSet?r=IBe:e instanceof WeakMap&&(r=RBe),this._stack.push(new r(e,t,i,this._hasOnValidate))}update(e,t,i){this._stack[this._stack.length-1].update(e,t,i)}preferredThisArg(e,t,i){let{name:r}=e,n=C0.isHandledMethod(i,r);return this._stack[this._stack.length-1].preferredThisArg(n,r,t,i)}isChanged(e,t,i){return this._stack[this._stack.length-1].isChanged(e,t,i)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},OBe={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},Ek=(e,t,i={})=>{i={...OBe,...i};let r=Symbol("ProxyTarget"),{equals:n,isShallow:s,ignoreDetached:a,details:o}=i,l=new EBe(n),c=typeof i.onValidate=="function",u=new C0(c),h=(S,_,A,M,C)=>!c||u.isCloning||i.onValidate(ul.concat(l.getPath(S),_),A,M,C)===!0,f=(S,_,A,M)=>{!gH(l,i,_)&&!(a&&l.isDetached(S,e))&&m(l.getPath(S),_,A,M)},m=(S,_,A,M,C)=>{u.isCloning?u.update(S,_,M):t(ul.concat(S,_),A,M,C)},g=S=>S&&(S[r]||S),v=(S,_,A,M)=>bBe(S)||A==="constructor"||s&&!C0.isHandledMethod(_,A)||gH(l,i,A)||l.isGetInvariant(_,A)||a&&l.isDetached(_,e)?S:(M===void 0&&(M=l.getPath(_)),l.getProxy(S,ul.concat(M,A),x,r)),x={get(S,_,A){if(_k(_)){if(_===r||_===Sk)return S;if(_===mie&&!l.isUnsubscribed&&l.getPath(S).length===0)return l.unsubscribe(),S}let M=vR(S)?Reflect.get(S,_):Reflect.get(S,_,A);return v(M,S,_)},set(S,_,A,M){A=g(A);let C=S[r]||S,D=C[_];if(n(D,A)&&_ in S)return!0;let T=h(S,_,A,D);return T&&l.setProperty(C,_,A,M,D)?(f(S,_,S[_],D),!0):!T},defineProperty(S,_,A){if(!l.isSameDescriptor(A,S,_)){let M=S[_];h(S,_,A.value,M)&&l.defineProperty(S,_,A,M)&&f(S,_,A.value,M)}return!0},deleteProperty(S,_){if(!Reflect.has(S,_))return!0;let A=Reflect.get(S,_),M=h(S,_,void 0,A);return M&&l.deleteProperty(S,_,A)?(f(S,_,void 0,A),!0):!M},apply(S,_,A){let M=_[r]||_;if(l.isUnsubscribed)return Reflect.apply(S,M,A);if((o===!1||o!==!0&&!o.includes(S.name))&&C0.isHandledType(M)){let C=ul.initial(l.getPath(S)),D=C0.isHandledMethod(M,S.name);u.start(M,C,A);let T=Reflect.apply(S,u.preferredThisArg(S,_,M),D?A.map(L=>g(L)):A),R=u.isChanged(M,n),O=u.stop();if(C0.isHandledType(T)&&D&&(_ instanceof Map&&S.name==="get"&&(C=ul.concat(C,A[0])),T=l.getProxy(T,C,x)),R){let L={name:S.name,args:A,result:T},k=u.isCloning?ul.initial(C):C,B=u.isCloning?ul.last(C):"";h(ul.get(e,k),B,M,O,L)?m(k,B,M,O,L):u.undo(M)}return(_ instanceof Map||_ instanceof Set)&&SBe(T)?_Be(T,S,_,C,v):T}return Reflect.apply(S,_,A)}},b=l.getProxy(e,i.pathAsArray?[]:"",x);return t=t.bind(b),c&&(i.onValidate=i.onValidate.bind(b)),b};Ek.target=e=>e&&e[Sk]||e;Ek.unsubscribe=e=>e[mie]||e;var bH=Ek,LBe=typeof global=="object"&&global&&global.Object===Object&&global,Sie=LBe,kBe=typeof self=="object"&&self&&self.Object===Object&&self,zBe=Sie||kBe||Function("return this")(),vc=zBe,BBe=vc.Symbol,Al=BBe,_ie=Object.prototype,jBe=_ie.hasOwnProperty,NBe=_ie.toString,N1=Al?Al.toStringTag:void 0;function VBe(e){var t=jBe.call(e,N1),i=e[N1];try{e[N1]=void 0;var r=!0}catch{}var n=NBe.call(e);return r&&(t?e[N1]=i:delete e[N1]),n}var UBe=VBe,FBe=Object.prototype,HBe=FBe.toString;function GBe(e){return HBe.call(e)}var WBe=GBe,qBe="[object Null]",XBe="[object Undefined]",wH=Al?Al.toStringTag:void 0;function YBe(e){return e==null?e===void 0?XBe:qBe:wH&&wH in Object(e)?UBe(e):WBe(e)}var Wm=YBe;function QBe(e){return e!=null&&typeof e=="object"}var Qh=QBe,KBe="[object Symbol]";function ZBe(e){return typeof e=="symbol"||Qh(e)&&Wm(e)==KBe}var Aw=ZBe;function $Be(e,t){for(var i=-1,r=e==null?0:e.length,n=Array(r);++i<r;)n[i]=t(e[i],i,e);return n}var Eie=$Be,JBe=Array.isArray,Tu=JBe,SH=Al?Al.prototype:void 0,_H=SH?SH.toString:void 0;function Aie(e){if(typeof e=="string")return e;if(Tu(e))return Eie(e,Aie)+"";if(Aw(e))return _H?_H.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var eje=Aie,tje=/\s/;function ije(e){for(var t=e.length;t--&&tje.test(e.charAt(t)););return t}var rje=ije,nje=/^\s+/;function sje(e){return e&&e.slice(0,rje(e)+1).replace(nje,"")}var aje=sje;function oje(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var hc=oje,EH=NaN,lje=/^[-+]0x[0-9a-f]+$/i,cje=/^0b[01]+$/i,uje=/^0o[0-7]+$/i,hje=parseInt;function dje(e){if(typeof e=="number")return e;if(Aw(e))return EH;if(hc(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=hc(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=aje(e);var i=cje.test(e);return i||uje.test(e)?hje(e.slice(2),i?2:8):lje.test(e)?EH:+e}var AH=dje;function fje(e){return e}var Tie=fje,pje="[object AsyncFunction]",mje="[object Function]",gje="[object GeneratorFunction]",vje="[object Proxy]";function yje(e){if(!hc(e))return!1;var t=Wm(e);return t==mje||t==gje||t==pje||t==vje}var Cie=yje,xje=vc["__core-js_shared__"],f4=xje,TH=function(){var e=/[^.]+$/.exec(f4&&f4.keys&&f4.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function bje(e){return!!TH&&TH in e}var wje=bje,Sje=Function.prototype,_je=Sje.toString;function Eje(e){if(e!=null){try{return _je.call(e)}catch{}try{return e+""}catch{}}return""}var qm=Eje,Aje=/[\\^$.*+?()[\]{}|]/g,Tje=/^\[object .+?Constructor\]$/,Cje=Function.prototype,Mje=Object.prototype,Pje=Cje.toString,Dje=Mje.hasOwnProperty,Ije=RegExp("^"+Pje.call(Dje).replace(Aje,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rje(e){if(!hc(e)||wje(e))return!1;var t=Cie(e)?Ije:Tje;return t.test(qm(e))}var Oje=Rje;function Lje(e,t){return e==null?void 0:e[t]}var kje=Lje;function zje(e,t){var i=kje(e,t);return Oje(i)?i:void 0}var Xm=zje,Bje=Xm(vc,"WeakMap"),xR=Bje,CH=Object.create,jje=function(){function e(){}return function(t){if(!hc(t))return{};if(CH)return CH(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}(),Nje=jje;function Vje(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var Uje=Vje;function Fje(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}var Hje=Fje,Gje=800,Wje=16,qje=Date.now;function Xje(e){var t=0,i=0;return function(){var r=qje(),n=Wje-(r-i);if(i=r,n>0){if(++t>=Gje)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Yje=Xje;function Qje(e){return function(){return e}}var Kje=Qje,Zje=function(){try{var e=Xm(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ZA=Zje,$je=ZA?function(e,t){return ZA(e,"toString",{configurable:!0,enumerable:!1,value:Kje(t),writable:!0})}:Tie,Jje=$je,e8e=Yje(Jje),t8e=e8e;function i8e(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}var r8e=i8e,n8e=9007199254740991,s8e=/^(?:0|[1-9]\d*)$/;function a8e(e,t){var i=typeof e;return t=t??n8e,!!t&&(i=="number"||i!="symbol"&&s8e.test(e))&&e>-1&&e%1==0&&e<t}var Ak=a8e;function o8e(e,t,i){t=="__proto__"&&ZA?ZA(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}var Mie=o8e;function l8e(e,t){return e===t||e!==e&&t!==t}var Tk=l8e,c8e=Object.prototype,u8e=c8e.hasOwnProperty;function h8e(e,t,i){var r=e[t];(!(u8e.call(e,t)&&Tk(r,i))||i===void 0&&!(t in e))&&Mie(e,t,i)}var Ck=h8e;function d8e(e,t,i,r){var n=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var o=t[s],l=r?r(i[o],e[o],o,i,e):void 0;l===void 0&&(l=e[o]),n?Mie(i,o,l):Ck(i,o,l)}return i}var Tw=d8e,MH=Math.max;function f8e(e,t,i){return t=MH(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,s=MH(r.length-t,0),a=Array(s);++n<s;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=i(a),Uje(e,this,o)}}var p8e=f8e,m8e=9007199254740991;function g8e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=m8e}var Mk=g8e;function v8e(e){return e!=null&&Mk(e.length)&&!Cie(e)}var Pie=v8e,y8e=Object.prototype;function x8e(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||y8e;return e===i}var Pk=x8e;function b8e(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var w8e=b8e,S8e="[object Arguments]";function _8e(e){return Qh(e)&&Wm(e)==S8e}var PH=_8e,Die=Object.prototype,E8e=Die.hasOwnProperty,A8e=Die.propertyIsEnumerable,T8e=PH(function(){return arguments}())?PH:function(e){return Qh(e)&&E8e.call(e,"callee")&&!A8e.call(e,"callee")},Dk=T8e;function C8e(){return!1}var M8e=C8e,Iie=typeof exports=="object"&&exports&&!exports.nodeType&&exports,DH=Iie&&typeof module=="object"&&module&&!module.nodeType&&module,P8e=DH&&DH.exports===Iie,IH=P8e?vc.Buffer:void 0,D8e=IH?IH.isBuffer:void 0,I8e=D8e||M8e,$A=I8e,R8e="[object Arguments]",O8e="[object Array]",L8e="[object Boolean]",k8e="[object Date]",z8e="[object Error]",B8e="[object Function]",j8e="[object Map]",N8e="[object Number]",V8e="[object Object]",U8e="[object RegExp]",F8e="[object Set]",H8e="[object String]",G8e="[object WeakMap]",W8e="[object ArrayBuffer]",q8e="[object DataView]",X8e="[object Float32Array]",Y8e="[object Float64Array]",Q8e="[object Int8Array]",K8e="[object Int16Array]",Z8e="[object Int32Array]",$8e="[object Uint8Array]",J8e="[object Uint8ClampedArray]",eNe="[object Uint16Array]",tNe="[object Uint32Array]",Hr={};Hr[X8e]=Hr[Y8e]=Hr[Q8e]=Hr[K8e]=Hr[Z8e]=Hr[$8e]=Hr[J8e]=Hr[eNe]=Hr[tNe]=!0;Hr[R8e]=Hr[O8e]=Hr[W8e]=Hr[L8e]=Hr[q8e]=Hr[k8e]=Hr[z8e]=Hr[B8e]=Hr[j8e]=Hr[N8e]=Hr[V8e]=Hr[U8e]=Hr[F8e]=Hr[H8e]=Hr[G8e]=!1;function iNe(e){return Qh(e)&&Mk(e.length)&&!!Hr[Wm(e)]}var rNe=iNe;function nNe(e){return function(t){return e(t)}}var Ik=nNe,Rie=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Hx=Rie&&typeof module=="object"&&module&&!module.nodeType&&module,sNe=Hx&&Hx.exports===Rie,p4=sNe&&Sie.process,aNe=function(){try{var e=Hx&&Hx.require&&Hx.require("util").types;return e||p4&&p4.binding&&p4.binding("util")}catch{}}(),Pv=aNe,RH=Pv&&Pv.isTypedArray,oNe=RH?Ik(RH):rNe,Oie=oNe,lNe=Object.prototype,cNe=lNe.hasOwnProperty;function uNe(e,t){var i=Tu(e),r=!i&&Dk(e),n=!i&&!r&&$A(e),s=!i&&!r&&!n&&Oie(e),a=i||r||n||s,o=a?w8e(e.length,String):[],l=o.length;for(var c in e)(t||cNe.call(e,c))&&!(a&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Ak(c,l)))&&o.push(c);return o}var Lie=uNe;function hNe(e,t){return function(i){return e(t(i))}}var kie=hNe,dNe=kie(Object.keys,Object),fNe=dNe,pNe=Object.prototype,mNe=pNe.hasOwnProperty;function gNe(e){if(!Pk(e))return fNe(e);var t=[];for(var i in Object(e))mNe.call(e,i)&&i!="constructor"&&t.push(i);return t}var vNe=gNe;function yNe(e){return Pie(e)?Lie(e):vNe(e)}var Rk=yNe;function xNe(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var bNe=xNe,wNe=Object.prototype,SNe=wNe.hasOwnProperty;function _Ne(e){if(!hc(e))return bNe(e);var t=Pk(e),i=[];for(var r in e)r=="constructor"&&(t||!SNe.call(e,r))||i.push(r);return i}var ENe=_Ne;function ANe(e){return Pie(e)?Lie(e,!0):ENe(e)}var $p=ANe,TNe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,CNe=/^\w*$/;function MNe(e,t){if(Tu(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||Aw(e)?!0:CNe.test(e)||!TNe.test(e)||t!=null&&e in Object(t)}var PNe=MNe,DNe=Xm(Object,"create"),zb=DNe;function INe(){this.__data__=zb?zb(null):{},this.size=0}var RNe=INe;function ONe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var LNe=ONe,kNe="__lodash_hash_undefined__",zNe=Object.prototype,BNe=zNe.hasOwnProperty;function jNe(e){var t=this.__data__;if(zb){var i=t[e];return i===kNe?void 0:i}return BNe.call(t,e)?t[e]:void 0}var NNe=jNe,VNe=Object.prototype,UNe=VNe.hasOwnProperty;function FNe(e){var t=this.__data__;return zb?t[e]!==void 0:UNe.call(t,e)}var HNe=FNe,GNe="__lodash_hash_undefined__";function WNe(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=zb&&t===void 0?GNe:t,this}var qNe=WNe;function ly(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}ly.prototype.clear=RNe;ly.prototype.delete=LNe;ly.prototype.get=NNe;ly.prototype.has=HNe;ly.prototype.set=qNe;var OH=ly;function XNe(){this.__data__=[],this.size=0}var YNe=XNe;function QNe(e,t){for(var i=e.length;i--;)if(Tk(e[i][0],t))return i;return-1}var z3=QNe,KNe=Array.prototype,ZNe=KNe.splice;function $Ne(e){var t=this.__data__,i=z3(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():ZNe.call(t,i,1),--this.size,!0}var JNe=$Ne;function eVe(e){var t=this.__data__,i=z3(t,e);return i<0?void 0:t[i][1]}var tVe=eVe;function iVe(e){return z3(this.__data__,e)>-1}var rVe=iVe;function nVe(e,t){var i=this.__data__,r=z3(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}var sVe=nVe;function cy(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}cy.prototype.clear=YNe;cy.prototype.delete=JNe;cy.prototype.get=tVe;cy.prototype.has=rVe;cy.prototype.set=sVe;var B3=cy,aVe=Xm(vc,"Map"),Bb=aVe;function oVe(){this.size=0,this.__data__={hash:new OH,map:new(Bb||B3),string:new OH}}var lVe=oVe;function cVe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var uVe=cVe;function hVe(e,t){var i=e.__data__;return uVe(t)?i[typeof t=="string"?"string":"hash"]:i.map}var j3=hVe;function dVe(e){var t=j3(this,e).delete(e);return this.size-=t?1:0,t}var fVe=dVe;function pVe(e){return j3(this,e).get(e)}var mVe=pVe;function gVe(e){return j3(this,e).has(e)}var vVe=gVe;function yVe(e,t){var i=j3(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}var xVe=yVe;function uy(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}uy.prototype.clear=lVe;uy.prototype.delete=fVe;uy.prototype.get=mVe;uy.prototype.has=vVe;uy.prototype.set=xVe;var N3=uy,bVe="Expected a function";function Ok(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(bVe);var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var a=e.apply(this,r);return i.cache=s.set(n,a)||s,a};return i.cache=new(Ok.Cache||N3),i}Ok.Cache=N3;var wVe=Ok,SVe=500;function _Ve(e){var t=wVe(e,function(r){return i.size===SVe&&i.clear(),r}),i=t.cache;return t}var EVe=_Ve,AVe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,TVe=/\\(\\)?/g,CVe=EVe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(AVe,function(i,r,n,s){t.push(n?s.replace(TVe,"$1"):r||i)}),t}),MVe=CVe;function PVe(e){return e==null?"":eje(e)}var DVe=PVe;function IVe(e,t){return Tu(e)?e:PNe(e,t)?[e]:MVe(DVe(e))}var hy=IVe;function RVe(e){if(typeof e=="string"||Aw(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var V3=RVe;function OVe(e,t){t=hy(t,e);for(var i=0,r=t.length;e!=null&&i<r;)e=e[V3(t[i++])];return i&&i==r?e:void 0}var zie=OVe;function LVe(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}var Lk=LVe,LH=Al?Al.isConcatSpreadable:void 0;function kVe(e){return Tu(e)||Dk(e)||!!(LH&&e&&e[LH])}var zVe=kVe;function Bie(e,t,i,r,n){var s=-1,a=e.length;for(i||(i=zVe),n||(n=[]);++s<a;){var o=e[s];t>0&&i(o)?t>1?Bie(o,t-1,i,r,n):Lk(n,o):r||(n[n.length]=o)}return n}var BVe=Bie;function jVe(e){var t=e==null?0:e.length;return t?BVe(e,1):[]}var NVe=jVe;function VVe(e){return t8e(p8e(e,void 0,NVe),e+"")}var jie=VVe,UVe=kie(Object.getPrototypeOf,Object),kk=UVe,FVe="[object Object]",HVe=Function.prototype,GVe=Object.prototype,Nie=HVe.toString,WVe=GVe.hasOwnProperty,qVe=Nie.call(Object);function XVe(e){if(!Qh(e)||Wm(e)!=FVe)return!1;var t=kk(e);if(t===null)return!0;var i=WVe.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&Nie.call(i)==qVe}var YVe=XVe;function QVe(e,t,i){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t),i=i>n?n:i,i<0&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0;for(var s=Array(n);++r<n;)s[r]=e[r+t];return s}var KVe=QVe;function ZVe(){this.__data__=new B3,this.size=0}var $Ve=ZVe;function JVe(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}var e7e=JVe;function t7e(e){return this.__data__.get(e)}var i7e=t7e;function r7e(e){return this.__data__.has(e)}var n7e=r7e,s7e=200;function a7e(e,t){var i=this.__data__;if(i instanceof B3){var r=i.__data__;if(!Bb||r.length<s7e-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new N3(r)}return i.set(e,t),this.size=i.size,this}var o7e=a7e;function dy(e){var t=this.__data__=new B3(e);this.size=t.size}dy.prototype.clear=$Ve;dy.prototype.delete=e7e;dy.prototype.get=i7e;dy.prototype.has=n7e;dy.prototype.set=o7e;var UE=dy;function l7e(e,t){return e&&Tw(t,Rk(t),e)}var c7e=l7e;function u7e(e,t){return e&&Tw(t,$p(t),e)}var h7e=u7e,Vie=typeof exports=="object"&&exports&&!exports.nodeType&&exports,kH=Vie&&typeof module=="object"&&module&&!module.nodeType&&module,d7e=kH&&kH.exports===Vie,zH=d7e?vc.Buffer:void 0,BH=zH?zH.allocUnsafe:void 0;function f7e(e,t){if(t)return e.slice();var i=e.length,r=BH?BH(i):new e.constructor(i);return e.copy(r),r}var p7e=f7e;function m7e(e,t){for(var i=-1,r=e==null?0:e.length,n=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[n++]=a)}return s}var g7e=m7e;function v7e(){return[]}var Uie=v7e,y7e=Object.prototype,x7e=y7e.propertyIsEnumerable,jH=Object.getOwnPropertySymbols,b7e=jH?function(e){return e==null?[]:(e=Object(e),g7e(jH(e),function(t){return x7e.call(e,t)}))}:Uie,zk=b7e;function w7e(e,t){return Tw(e,zk(e),t)}var S7e=w7e,_7e=Object.getOwnPropertySymbols,E7e=_7e?function(e){for(var t=[];e;)Lk(t,zk(e)),e=kk(e);return t}:Uie,Fie=E7e;function A7e(e,t){return Tw(e,Fie(e),t)}var T7e=A7e;function C7e(e,t,i){var r=t(e);return Tu(e)?r:Lk(r,i(e))}var Hie=C7e;function M7e(e){return Hie(e,Rk,zk)}var bR=M7e;function P7e(e){return Hie(e,$p,Fie)}var Gie=P7e,D7e=Xm(vc,"DataView"),wR=D7e,I7e=Xm(vc,"Promise"),SR=I7e,R7e=Xm(vc,"Set"),_R=R7e,NH="[object Map]",O7e="[object Object]",VH="[object Promise]",UH="[object Set]",FH="[object WeakMap]",HH="[object DataView]",L7e=qm(wR),k7e=qm(Bb),z7e=qm(SR),B7e=qm(_R),j7e=qm(xR),jp=Wm;(wR&&jp(new wR(new ArrayBuffer(1)))!=HH||Bb&&jp(new Bb)!=NH||SR&&jp(SR.resolve())!=VH||_R&&jp(new _R)!=UH||xR&&jp(new xR)!=FH)&&(jp=function(e){var t=Wm(e),i=t==O7e?e.constructor:void 0,r=i?qm(i):"";if(r)switch(r){case L7e:return HH;case k7e:return NH;case z7e:return VH;case B7e:return UH;case j7e:return FH}return t});var jb=jp,N7e=Object.prototype,V7e=N7e.hasOwnProperty;function U7e(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&V7e.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var F7e=U7e,H7e=vc.Uint8Array,JA=H7e;function G7e(e){var t=new e.constructor(e.byteLength);return new JA(t).set(new JA(e)),t}var Bk=G7e;function W7e(e,t){var i=t?Bk(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var q7e=W7e,X7e=/\w*$/;function Y7e(e){var t=new e.constructor(e.source,X7e.exec(e));return t.lastIndex=e.lastIndex,t}var Q7e=Y7e,GH=Al?Al.prototype:void 0,WH=GH?GH.valueOf:void 0;function K7e(e){return WH?Object(WH.call(e)):{}}var Z7e=K7e;function $7e(e,t){var i=t?Bk(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var J7e=$7e,eUe="[object Boolean]",tUe="[object Date]",iUe="[object Map]",rUe="[object Number]",nUe="[object RegExp]",sUe="[object Set]",aUe="[object String]",oUe="[object Symbol]",lUe="[object ArrayBuffer]",cUe="[object DataView]",uUe="[object Float32Array]",hUe="[object Float64Array]",dUe="[object Int8Array]",fUe="[object Int16Array]",pUe="[object Int32Array]",mUe="[object Uint8Array]",gUe="[object Uint8ClampedArray]",vUe="[object Uint16Array]",yUe="[object Uint32Array]";function xUe(e,t,i){var r=e.constructor;switch(t){case lUe:return Bk(e);case eUe:case tUe:return new r(+e);case cUe:return q7e(e,i);case uUe:case hUe:case dUe:case fUe:case pUe:case mUe:case gUe:case vUe:case yUe:return J7e(e,i);case iUe:return new r;case rUe:case aUe:return new r(e);case nUe:return Q7e(e);case sUe:return new r;case oUe:return Z7e(e)}}var bUe=xUe;function wUe(e){return typeof e.constructor=="function"&&!Pk(e)?Nje(kk(e)):{}}var SUe=wUe,_Ue="[object Map]";function EUe(e){return Qh(e)&&jb(e)==_Ue}var AUe=EUe,qH=Pv&&Pv.isMap,TUe=qH?Ik(qH):AUe,CUe=TUe,MUe="[object Set]";function PUe(e){return Qh(e)&&jb(e)==MUe}var DUe=PUe,XH=Pv&&Pv.isSet,IUe=XH?Ik(XH):DUe,RUe=IUe,OUe=1,LUe=2,kUe=4,Wie="[object Arguments]",zUe="[object Array]",BUe="[object Boolean]",jUe="[object Date]",NUe="[object Error]",qie="[object Function]",VUe="[object GeneratorFunction]",UUe="[object Map]",FUe="[object Number]",Xie="[object Object]",HUe="[object RegExp]",GUe="[object Set]",WUe="[object String]",qUe="[object Symbol]",XUe="[object WeakMap]",YUe="[object ArrayBuffer]",QUe="[object DataView]",KUe="[object Float32Array]",ZUe="[object Float64Array]",$Ue="[object Int8Array]",JUe="[object Int16Array]",eFe="[object Int32Array]",tFe="[object Uint8Array]",iFe="[object Uint8ClampedArray]",rFe="[object Uint16Array]",nFe="[object Uint32Array]",jr={};jr[Wie]=jr[zUe]=jr[YUe]=jr[QUe]=jr[BUe]=jr[jUe]=jr[KUe]=jr[ZUe]=jr[$Ue]=jr[JUe]=jr[eFe]=jr[UUe]=jr[FUe]=jr[Xie]=jr[HUe]=jr[GUe]=jr[WUe]=jr[qUe]=jr[tFe]=jr[iFe]=jr[rFe]=jr[nFe]=!0;jr[NUe]=jr[qie]=jr[XUe]=!1;function FE(e,t,i,r,n,s){var a,o=t&OUe,l=t&LUe,c=t&kUe;if(i&&(a=n?i(e,r,n,s):i(e)),a!==void 0)return a;if(!hc(e))return e;var u=Tu(e);if(u){if(a=F7e(e),!o)return Hje(e,a)}else{var h=jb(e),f=h==qie||h==VUe;if($A(e))return p7e(e,o);if(h==Xie||h==Wie||f&&!n){if(a=l||f?{}:SUe(e),!o)return l?T7e(e,h7e(a,e)):S7e(e,c7e(a,e))}else{if(!jr[h])return n?e:{};a=bUe(e,h,o)}}s||(s=new UE);var m=s.get(e);if(m)return m;s.set(e,a),RUe(e)?e.forEach(function(x){a.add(FE(x,t,i,x,e,s))}):CUe(e)&&e.forEach(function(x,b){a.set(b,FE(x,t,i,b,e,s))});var g=c?l?Gie:bR:l?$p:Rk,v=u?void 0:g(e);return r8e(v||e,function(x,b){v&&(b=x,x=e[b]),Ck(a,b,FE(x,t,i,b,e,s))}),a}var Yie=FE,sFe=1,aFe=4;function oFe(e){return Yie(e,sFe|aFe)}var U3=oFe,lFe="__lodash_hash_undefined__";function cFe(e){return this.__data__.set(e,lFe),this}var uFe=cFe;function hFe(e){return this.__data__.has(e)}var dFe=hFe;function eT(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new N3;++t<i;)this.add(e[t])}eT.prototype.add=eT.prototype.push=uFe;eT.prototype.has=dFe;var fFe=eT;function pFe(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}var mFe=pFe;function gFe(e,t){return e.has(t)}var vFe=gFe,yFe=1,xFe=2;function bFe(e,t,i,r,n,s){var a=i&yFe,o=e.length,l=t.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(e),u=s.get(t);if(c&&u)return c==t&&u==e;var h=-1,f=!0,m=i&xFe?new fFe:void 0;for(s.set(e,t),s.set(t,e);++h<o;){var g=e[h],v=t[h];if(r)var x=a?r(v,g,h,t,e,s):r(g,v,h,e,t,s);if(x!==void 0){if(x)continue;f=!1;break}if(m){if(!mFe(t,function(b,S){if(!vFe(m,S)&&(g===b||n(g,b,i,r,s)))return m.push(S)})){f=!1;break}}else if(!(g===v||n(g,v,i,r,s))){f=!1;break}}return s.delete(e),s.delete(t),f}var Qie=bFe;function wFe(e){var t=-1,i=Array(e.size);return e.forEach(function(r,n){i[++t]=[n,r]}),i}var SFe=wFe;function _Fe(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}var EFe=_Fe,AFe=1,TFe=2,CFe="[object Boolean]",MFe="[object Date]",PFe="[object Error]",DFe="[object Map]",IFe="[object Number]",RFe="[object RegExp]",OFe="[object Set]",LFe="[object String]",kFe="[object Symbol]",zFe="[object ArrayBuffer]",BFe="[object DataView]",YH=Al?Al.prototype:void 0,m4=YH?YH.valueOf:void 0;function jFe(e,t,i,r,n,s,a){switch(i){case BFe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case zFe:return!(e.byteLength!=t.byteLength||!s(new JA(e),new JA(t)));case CFe:case MFe:case IFe:return Tk(+e,+t);case PFe:return e.name==t.name&&e.message==t.message;case RFe:case LFe:return e==t+"";case DFe:var o=SFe;case OFe:var l=r&AFe;if(o||(o=EFe),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=TFe,a.set(e,t);var u=Qie(o(e),o(t),r,n,s,a);return a.delete(e),u;case kFe:if(m4)return m4.call(e)==m4.call(t)}return!1}var NFe=jFe,VFe=1,UFe=Object.prototype,FFe=UFe.hasOwnProperty;function HFe(e,t,i,r,n,s){var a=i&VFe,o=bR(e),l=o.length,c=bR(t),u=c.length;if(l!=u&&!a)return!1;for(var h=l;h--;){var f=o[h];if(!(a?f in t:FFe.call(t,f)))return!1}var m=s.get(e),g=s.get(t);if(m&&g)return m==t&&g==e;var v=!0;s.set(e,t),s.set(t,e);for(var x=a;++h<l;){f=o[h];var b=e[f],S=t[f];if(r)var _=a?r(S,b,f,t,e,s):r(b,S,f,e,t,s);if(!(_===void 0?b===S||n(b,S,i,r,s):_)){v=!1;break}x||(x=f=="constructor")}if(v&&!x){var A=e.constructor,M=t.constructor;A!=M&&"constructor"in e&&"constructor"in t&&!(typeof A=="function"&&A instanceof A&&typeof M=="function"&&M instanceof M)&&(v=!1)}return s.delete(e),s.delete(t),v}var GFe=HFe,WFe=1,QH="[object Arguments]",KH="[object Array]",m_="[object Object]",qFe=Object.prototype,ZH=qFe.hasOwnProperty;function XFe(e,t,i,r,n,s){var a=Tu(e),o=Tu(t),l=a?KH:jb(e),c=o?KH:jb(t);l=l==QH?m_:l,c=c==QH?m_:c;var u=l==m_,h=c==m_,f=l==c;if(f&&$A(e)){if(!$A(t))return!1;a=!0,u=!1}if(f&&!u)return s||(s=new UE),a||Oie(e)?Qie(e,t,i,r,n,s):NFe(e,t,l,i,r,n,s);if(!(i&WFe)){var m=u&&ZH.call(e,"__wrapped__"),g=h&&ZH.call(t,"__wrapped__");if(m||g){var v=m?e.value():e,x=g?t.value():t;return s||(s=new UE),n(v,x,i,r,s)}}return f?(s||(s=new UE),GFe(e,t,i,r,n,s)):!1}var YFe=XFe;function Kie(e,t,i,r,n){return e===t?!0:e==null||t==null||!Qh(e)&&!Qh(t)?e!==e&&t!==t:YFe(e,t,i,r,Kie,n)}var QFe=Kie;function KFe(e,t){return e!=null&&t in Object(e)}var ZFe=KFe;function $Fe(e,t,i){t=hy(t,e);for(var r=-1,n=t.length,s=!1;++r<n;){var a=V3(t[r]);if(!(s=e!=null&&i(e,a)))break;e=e[a]}return s||++r!=n?s:(n=e==null?0:e.length,!!n&&Mk(n)&&Ak(a,n)&&(Tu(e)||Dk(e)))}var JFe=$Fe;function e9e(e,t){return e!=null&&JFe(e,t,ZFe)}var t9e=e9e,i9e=function(){return vc.Date.now()},g4=i9e,r9e="Expected a function",n9e=Math.max,s9e=Math.min;function a9e(e,t,i){var r,n,s,a,o,l,c=0,u=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(r9e);t=AH(t)||0,hc(i)&&(u=!!i.leading,h="maxWait"in i,s=h?n9e(AH(i.maxWait)||0,t):s,f="trailing"in i?!!i.trailing:f);function m(C){var D=r,T=n;return r=n=void 0,c=C,a=e.apply(T,D),a}function g(C){return c=C,o=setTimeout(b,t),u?m(C):a}function v(C){var D=C-l,T=C-c,R=t-D;return h?s9e(R,s-T):R}function x(C){var D=C-l,T=C-c;return l===void 0||D>=t||D<0||h&&T>=s}function b(){var C=g4();if(x(C))return S(C);o=setTimeout(b,v(C))}function S(C){return o=void 0,f&&r?m(C):(r=n=void 0,a)}function _(){o!==void 0&&clearTimeout(o),c=0,r=l=n=o=void 0}function A(){return o===void 0?a:S(g4())}function M(){var C=g4(),D=x(C);if(r=arguments,n=this,l=C,D){if(o===void 0)return g(l);if(h)return clearTimeout(o),o=setTimeout(b,t),m(l)}return o===void 0&&(o=setTimeout(b,t)),a}return M.cancel=_,M.flush=A,M}var Nb=a9e;function o9e(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var l9e=o9e;function c9e(e,t){return e>t}var u9e=c9e;function h9e(e,t){return t.length<2?e:zie(e,KVe(t,0,-1))}var d9e=h9e;function f9e(e,t){return QFe(e,t)}var jk=f9e;function p9e(e,t,i){for(var r=-1,n=e.length;++r<n;){var s=e[r],a=t(s);if(a!=null&&(o===void 0?a===a&&!Aw(a):i(a,o)))var o=a,l=s}return l}var m9e=p9e;function g9e(e){return e&&e.length?m9e(e,Tie,u9e):void 0}var v9e=g9e;function y9e(e,t){return t=hy(t,e),e=d9e(e,t),e==null||delete e[V3(l9e(t))]}var x9e=y9e;function b9e(e){return YVe(e)?void 0:e}var w9e=b9e,S9e=1,_9e=2,E9e=4,A9e=jie(function(e,t){var i={};if(e==null)return i;var r=!1;t=Eie(t,function(s){return s=hy(s,e),r||(r=s.length>1),s}),Tw(e,Gie(e),i),r&&(i=Yie(i,S9e|_9e|E9e,w9e));for(var n=t.length;n--;)x9e(i,t[n]);return i}),ER=A9e;function T9e(e,t,i,r){if(!hc(e))return e;t=hy(t,e);for(var n=-1,s=t.length,a=s-1,o=e;o!=null&&++n<s;){var l=V3(t[n]),c=i;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=a){var u=o[l];c=r?r(u,l,o):void 0,c===void 0&&(c=hc(u)?u:Ak(t[n+1])?[]:{})}Ck(o,l,c),o=o[l]}return e}var C9e=T9e;function M9e(e,t,i){for(var r=-1,n=t.length,s={};++r<n;){var a=t[r],o=zie(e,a);i(o,a)&&C9e(s,hy(a,e),o)}return s}var P9e=M9e;function D9e(e,t){return P9e(e,t,function(i,r){return t9e(e,r)})}var I9e=D9e,R9e=jie(function(e,t){return e==null?{}:I9e(e,t)}),bu=R9e,O9e="Expected a function";function L9e(e,t,i){var r=!0,n=!0;if(typeof e!="function")throw new TypeError(O9e);return hc(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),Nb(e,t,{leading:r,maxWait:t,trailing:n})}var k9e=L9e;function Zie(e){for(let t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function Tl(e,t){return Object.setPrototypeOf(e,t),e}var z9e=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),B9e=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),j9e=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||F3&&"ontouchend"in document,N9e=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,V9e=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,U9e=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},F9e=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},H9e=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},$ie=z9e();$ie&&H9e();var F3=B9e(),Cw=j9e(),G9e=N9e(),jo=V9e(),$H=U9e(),W9e=Number(F9e());function Jie(e){return Array.isArray(e)?e:[e]}function ere(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}function g_(e){return F3?e.metaKey:e.ctrlKey}function q9e(e){return e.wheelDeltaY===0||e.deltaY===0?F3&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:e.deltaMode===0}var Kt=[],tT={},px={},HE={};function tre(e){Kt.includes(e)||Kt.push(e)}function J0(e){delete tT[e.pointerId];for(let t=0;t<Kt.length;t++)if(Kt[t].pointerId===e.pointerId){Kt.splice(t,1);break}}function X9e(){Kt.splice(0,Kt.length)}function iT(e){if(e.pointerType!=="touch")return;let t=tT[e.pointerId];t===void 0&&(t={x:0,y:0},tT[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function v4(e){let t=e.pointerId===Kt[0].pointerId?Kt[1]:Kt[0];return tT[t.pointerId]}function ire(e){px[e.key]=!0,HE[e.key]=HE[e.key]===void 0?1:HE[e.key]+1}function rre(e){if(F3&&px.Meta)for(let t in px)px[t]=!1;else px[e.key]=!1;HE={}}function Y9e(e){e.addEventListener("pointerdown",tre,!0),e.addEventListener("pointerdown",iT,!0),e.addEventListener("pointermove",iT,!0),e.addEventListener("pointerup",J0,!0),e.addEventListener("pointercancel",J0,!0),e.addEventListener("pointerleave",J0,!0),window.addEventListener("keydown",ire,!0),window.addEventListener("keyup",rre,!0)}function Q9e(e){e.removeEventListener("pointerdown",tre,!0),e.removeEventListener("pointerdown",iT,!0),e.removeEventListener("pointermove",iT,!0),e.removeEventListener("pointerup",J0,!0),e.removeEventListener("pointercancel",J0,!0),e.removeEventListener("pointerleave",J0,!0),window.removeEventListener("keydown",ire,!0),window.removeEventListener("keyup",rre,!0)}var nre,K9e=new Promise(e=>{nre=e}),v_;function Z9e(){if(v_)return v_;async function e(){let t="https://unpkg.com/@splinetool/navmesh-wasm@1.10.17/build",i=gc(()=>import("./navmesh-BFd9Mv4x.js"),[]),[r,n]=await Promise.all([i,fetch(`${t}/navmesh.wasm`).then(o=>o.arrayBuffer())]),s=r.default,a=await s({wasmBinary:n});nre(a)}return v_=e(),v_}var sre,$9e=new Promise(e=>{sre=e}),y_;function J9e(){if(y_)return y_;async function e(){let t=await gc(()=>import("./physics-BM4kW-A5.js"),[]);await t.init(),sre(t)}return y_=e(),y_}var Wt=class{modifyById(e,t){let i=this;if(i[e]===void 0)throw new Error("not expected");{let r={...i,[e]:t};return Object.setPrototypeOf(r,Wt.prototype),r}}add(e,t){var i;return((i=this.runOp({type:1,id:e,data:t}))==null?void 0:i.data)??this}runOp(e){let t=this;if(e.type===1){let i=t[e.id],r;i===void 0?r={type:2,id:e.id}:r={type:1,id:e.id,data:i};let{id:n,data:s}=e,a={...t,[n]:s};return Object.setPrototypeOf(a,Wt.prototype),{data:a,actual:e,reverse:r}}else if(e.type===2){let{id:i}=e,r=t[i];if(r===void 0)return null;{let n={...t};return Object.setPrototypeOf(n,Wt.prototype),delete n[i],{data:n,actual:e,reverse:{type:1,id:i,data:r}}}}return null}};function Nk(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let i of t){let r=e[i];r&&typeof r=="object"&&Nk(r)}return Object.freeze(e)}function eHe(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}var are=class extends Error{};function y4(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function nf(e,t,i){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let s=e;e=t,t=s}let r=[],n=1/(i+1);for(let s=0;s<i;s++){let a=e+(t-e)*(s+.75+Math.random()*.5)*n;r.push(a)}return r}function Vk(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function tHe(){return typeof process<"u"}function ore(e,t){for(let i of e)t(i.id,i.data)!==!0&&ore(i.children,t)}function lre(e,t){if(t(e.id,e.data)!==!0)for(let i of e.children)lre(i,t)}var ea=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,ea.prototype)}deepFreeze(){let e=0;for(;e<this.length;)Nk(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let i of e.children)this.fillCaches0(i,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(t)e=t;else return e}return e}isDescendantOf(e,t){for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let i=this.get(e);i&&lre(i,t)}}traverse(e){ore(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let i=this.parent(e),r=this.childrenArray(i),n=r.findIndex(a=>a.id===e);if(n<0)throw new Error("not expected");let s=r[n];return r=[...r],r[n]={...s,data:t},this.modifyArrayBy(i,r)}}modifyArrayBy(e,t){let i=e,r=t;for(;i!==null;){let s=r,a=i;if(i=this.parent(i),i===void 0)throw new Error;r=this.childrenArray(i);let o=r.findIndex(l=>l.id===a);if(o<0)throw new Error;r=[...r],r[o]={...r[o],children:s}}Object.setPrototypeOf(r,ea.prototype);let n=r;return n.fillCaches(),n}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let i of t)if(this.checkDuplicatedIdRec(i))return!0;return!1}addOp(e){let{parent:t,fi:i,id:r,data:n,children:s}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let a=t,o=this.childrenArray(a),l={fi:i,id:r,data:n,children:s};return o=[...o,l],o.sort((c,u)=>c.fi-u.fi),e.localIndex=o.indexOf(l),{data:this.modifyArrayBy(a,o),actual:e,reverse:{type:8,id:r}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let i=this.parent(t);if(i===void 0)return null;let r=this.childrenArray(i),n=r.findIndex(a=>a.id===t);e.localIndex=n,r=[...r];let s=r.splice(n,1)[0];return{data:this.modifyArrayBy(i,r),actual:e,reverse:{type:7,...s,parent:i}}}}moveOp(e){let{parent:t,fi:i,id:r}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:r});if(t!==null){let h=t;for(;h!==null;){if(h===void 0)throw new Error;if(h===r)throw new are("cyclic tree");h=this.parent(h)}}let n=this.parent(r);if(n===void 0)return null;let s=n,a=this.childrenArray(n),o=a.findIndex(h=>h.id===r);a=[...a];let l=a.splice(o,1)[0],c=this.modifyArrayBy(n,a);n=t,a=c.childrenArray(n);let u=l.fi;return l={...l,fi:i},a=[...a,l],a.sort((h,f)=>h.fi-f.fi),e.localIndex=a.indexOf(l),c=c.modifyArrayBy(n,a),{data:c,actual:e,reverse:{type:9,parent:s,fi:u,id:r}}}previous(e,t){if(t===null){let r=this.childrenArray(e);return r.length===0?null:r[r.length-1].id}let i=null;for(let r of this.childrenArray(e)){if(r.id===t)return i;i=r.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let i=this.childrenArray(t),r=i.findIndex(n=>n.id===e)+1;if(r<i.length)return i[r].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let i=this.childrenArray(t),r=i.findIndex(n=>n.id===e)-1;return r>=0?this.traverseSortPrevious(i[r].id):t}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push({...i,...r})}t.sort((i,r)=>eHe(i.sortKey,r.sortKey));for(let i of t)delete i.sortKey;return t}getWithSortKey(e){var t=e;let i=[],r=this.get(t),n=r;if(r!==void 0){for(;t;)i.splice(0,0,r.fi),t=this.parent(t),t!==null&&(r=this.get(t));return{...n,sortKey:i}}}insertBeforeHelper(e,t,i){return this.insertAfterHelper(e,this.previous(e,t),i)}insertAfterHelper(e,t,i){let r=this.childrenArray(e);if(t===null){if(r.length===0)return nf(0,i,i);{let n=r[0].fi;return nf(n-i,n,i)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let s=r.find(a=>a.fi>n.fi);if(s===void 0){let a=r[r.length-1].fi;return nf(a,a+i,i)}else return nf(n.fi,s.fi,i)}}},rT;(e=>{function t(i,r){if(r.type!==0)return null;if(Array.isArray(i)){let n=r.props,s={},a=[...i],o=!1;if(n)for(let l of Object.keys(n)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");s[l]=a[c],a[c]=n[l],o=!0}return o?{data:a,actual:r,reverse:{type:0,props:s}}:null}else{let n=r.props,s={},a={...i},o=!1;if(n)for(let l of Object.keys(n)){s[l]=a[l];let c=n[l];c===void 0?delete a[l]:a[l]=c,o=!0}return o?{data:a,actual:r,reverse:{type:0,props:s}}:null}}e.runOp=t})(rT||(rT={}));var Lt=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Lt.prototype)}deepFreeze(){let e=0;for(;e<this.length;)Nk(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let i=this,r=i.findIndex(s=>s.id===e);if(r<0)throw new Error("not expected");let n=i[r];return i=[...i],i[r]={...n,data:t},this.modifyArrayBy(i)}}modifyArrayBy(e){Object.setPrototypeOf(e,Lt.prototype);let t=e;return tHe()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:i,data:r}=e,n=this,s={fi:t,id:i,data:r};return n=[...n,s],n.sort((a,o)=>a.fi-o.fi),e.localIndex=n.indexOf(s),{data:this.modifyArrayBy(n),actual:e,reverse:{type:5,id:i}}}deleteOp(e){let{id:t}=e,i=this,r=i.findIndex(s=>s.id===t);if(r===-1)return null;e.localIndex=r,i=[...i];let n=i.splice(r,1)[0];return{data:this.modifyArrayBy(i),actual:e,reverse:{type:4,...n}}}moveOp(e){let{fi:t,id:i}=e,r=this;r=[...r];let n=r.findIndex(o=>o.id===i);if(n===-1)return null;let s=r[n].fi,a={...r[n],fi:t};return r[n]=a,r.sort((o,l)=>o.fi-l.fi),e.localIndex=r.indexOf(a),{data:this.modifyArrayBy(r),actual:e,reverse:{type:6,fi:s,id:i}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let i of this){if(i.id===e)return t;t=i.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let i=this;if(e===null){if(i.length===0)return nf(0,t,t);{let r=i[0].fi;return nf(r-t,r,t)}}else{let r=this.get(e);if(r===void 0)throw new Error("illegal args");let n=i.find(s=>s.fi>r.fi);if(n===void 0){let s=i[i.length-1].fi;return nf(s,s+t,t)}else return nf(r.fi,n.fi,t)}}};function Dv(e){return e&&typeof e=="object"&&e instanceof qn}var qn=class{unusedFunOverridesTable(e){}runOp(e){let t=[],i=this,r=0,n={};for(;r<e.path.length;){if(t.push(i),i=i===void 0?void 0:i[e.path[r]],i!==void 0&&!Dv(i))return null;r+=1}i=i?y4(i):new qn;for(let[o,l]of Object.entries(e.props)){let c=i[o];n[o]=c,l===void 0?delete i[o]:i[o]=l}for(;r>0;){if(Object.keys(i).length===0){let o=t[r-1];o&&(i=y4(o),delete i[e.path[r-1]])}else{let o=t[r-1];if(o){let l=y4(o);l[e.path[r-1]]=i,i=l}else{let l=new qn;l[e.path[r-1]]=i,i=l}}r-=1}let s=Object.setPrototypeOf(i,qn.prototype),a={...e,props:n};return{data:s,actual:e,reverse:a}}},bf;(e=>{function t(n,s){return Vb(n,s)??n}e.apply=t;function i(n,s){return Fk(n,s)}e.merge=i;function r(n,s){let a=0,o=s.path,l=n;for(;a<o.length&&l!==void 0;){if(l=os.zoomOnce(l,o[a]),l===void 0)return s;if(!Dv(l))return;a+=1}if(l===void 0)return s;if(Dv(l))if(s.type===0){let c={...s.props};for(let u of Object.keys(l))delete c[u];return{...s,props:c}}else if(s.type===1||s.type===4||s.type===7){let c=Uk([s],l);return c?(console.log(c),c):s}else return s}e.filterOp=r})(bf||(bf={}));function Uk(e,t){if(t===void 0)return;let i=!1,r=e.map(n=>{let s=n.id,a=Vb(n.data,t[s]);if(i=i||a!==void 0,a===void 0&&(a=n.data),n.children){let o=Uk(n.children,t);return o!==void 0?i=!0:o=n.children,{...n,id:s,data:a,children:o}}else return{...n,id:s,data:a}});if(i)return r}function iHe(e,t){if(t===void 0)return;let i=!1,r=e.map(n=>{let s=n.id,a=Vb(n.data,t[s]);return i=i||a!==void 0,a===void 0&&(a=n.data),{...n,id:s,data:a}});if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}function Vb(e,t){if(!Dv(t))return t;if(e instanceof ea){let i=Uk(e,t);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof Lt)return iHe(e,t);if(Array.isArray(e)){let i=!1,r=e.map((n,s)=>{let a=Vb(n,t[s]);return i=i||a!==void 0,a===void 0&&(a=n),a});return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}else{if(e instanceof qn)return Fk(e,t);if(e&&typeof e=="object"){let i={},r=!1;for(let[n,s]of Object.entries(e)){let a=Vb(s,t[n]);r=r||a!==void 0,a===void 0&&(a=s),i[n]=a}return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}}}}function Fk(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!Dv(t))return t;if(!Dv(e))return bf.apply(e,t);let i=new Set;for(let n of Object.keys(e))i.add(n);for(let n of Object.keys(t))i.add(n);let r=new qn;for(let n of i){let s=Fk(e===void 0?void 0:e[n],t===void 0?void 0:t[n]);r[n]=s}return r}function rHe(e,t){let i={cur:[],result:[],len:0};return e=Ub(e,t,i)??e,[e,i.result]}function nT(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function sT(e){e&&(e.len-=1)}function nHe(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function cre(e,t,i){let r=!1,n=e.map(s=>{let a=s.id,o=t[a];if(o!==void 0&&typeof o=="string"&&(r=!0,a=o,i!==null))throw new Error("not supported");let l=Ub(s.data,t,nT(i,a));sT(i),r=r||l!==void 0,l===void 0&&(l=s.data);let c=cre(s.children,t,i);return c!==void 0?r=!0:c=s.children,{...s,id:a,data:l,children:c}});if(r)return n}function sHe(e,t,i){let r=!1,n=e.map(s=>{let a=s.id,o=t[a];if(o!==void 0&&typeof o=="string"&&(r=!0,a=o,i!==null))throw new Error("not supported");let l=Ub(s.data,t,nT(i,a));return sT(i),r=r||l!==void 0,l===void 0&&(l=s.data),{...s,id:a,data:l}});if(r)return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}function Ub(e,t,i){if(e instanceof ea){let r=cre(e,t,i);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof Lt)return sHe(e,t,i);if(Array.isArray(e)){let r=!1,n=e.map((s,a)=>{let o=Ub(s,t,nT(i,a));return sT(i),r=r||o!==void 0,o===void 0&&(o=s),o});return r?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else if(e&&typeof e=="object"&&!Vk(e)){let r={},n=!1;for(let[s,a]of Object.entries(e))if(s!=="name"&&s!=="variableId"){let o=t[s];if(typeof o=="string"){if(i!==null)throw new Error("not supported");n=!0,s=o}let l=Ub(a,t,nT(i,s));sT(i),n=n||l!==void 0,l===void 0&&(l=a),r[s]=l}else r[s]=a;return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}else if(typeof e=="string"){let r=t[e];return r!==void 0&&nHe(i),r}else return}}var aT;(e=>{function t(i,r){let n=os.zoom(r,i.path);if(typeof n=="object"){let s={};for(let a of Object.keys(i.props))s[a]=n[a];return{...i,props:s}}else return{...i,props:{}}}e.replaceProps=t})(aT||(aT={}));var Cs;(e=>{function t(l,c){return{...l,path:l.path.slice(c)}}e.drop=t;function i(l,c){var u;return((u=r(l,c))==null?void 0:u.data)??l}e.applySimple=i;function r(l,c){var f,m;let u=c.path;for(var h=[];;){let g;if(l instanceof qn&&c.type===0&&(g=l.runOp({...c,path:u.slice(h.length)}),g===null&&(g=void 0)),g===void 0&&h.length===u.length&&(l instanceof ea||l instanceof Lt||l instanceof Wt?g=l.runOp(c):g=rT.runOp(l,c)),g!==void 0)if(g!==null){let b=g.data;for(let S=h.length-1;S>=0;S--){let _=u[S],A=h[S];if(A instanceof ea){if(typeof _=="number")throw new Error("illegal arg");b=A.modifyById(_,b)}else if(A instanceof Lt){if(typeof _=="number")throw new Error("illegal arg");b=A.modifyById(_,b)}else if(A instanceof Wt){if(typeof _=="number")throw new Error("illegal arg");b=A.modifyById(_,b)}else if(A instanceof qn){let M={...A,[_]:b};b=Object.setPrototypeOf(M,qn.prototype)}else if(typeof A=="object")if(Array.isArray(A)){if(typeof _=="string"&&(_=parseInt(_),isNaN(_)))throw new Error("Invalid path");let M=b;b=[...A],b[_]=M}else b={...A,[_]:b};else return null}return{data:b,actual:{...g.actual,path:u},reverse:{...g.reverse,path:u}}}else return null;let v=u[h.length],x;if(l instanceof ea){if(typeof v=="number")throw new Error("");x=(f=l.get(v))==null?void 0:f.data}else if(l instanceof Lt){if(typeof v=="number")throw new Error("");x=(m=l.get(v))==null?void 0:m.data}else l!==null&&(x=l[v]);if(x!==void 0)h.push(l),l=x;else return null}}e.apply=r;function n(l,c){for(let u=0;u<l.length&&u<c.length;u++)if(l[u]!==c[u])return!0;return!1}e.pathDisjoint=n;function s(l,c){if(l.length!==c.length)return!1;for(let u=0;u<l.length;u++)if(l[u]!==c[u])return!1;return!0}e.pathEq=s;function a(l,c){return n(l.path,c.path)}e.commutative=a;function o(l,c){return l.type===0&&c.type===0&&s(l.path,c.path)?Object.keys(l.props).every(u=>c.props[u]!==void 0):!1}e.subsumed=o})(Cs||(Cs={}));var AR;(e=>{function t(){return[]}e.empty=t;function i(c,u){let h=[];for(let f of c){let[m,...g]=f.path;m===u&&h.push({...f,path:g})}return h}e.removePrefix=i;function r(c,u){return c.map(h=>({...h,path:[u,...h.path]}))}e.addPrefix=r;function n(c,u){return[...c,...u]}e.concat=n;function s(c,u){return[...c.filter(h=>!u.some(f=>Cs.subsumed(h,f))),...u]}e.compress=s;function a(c,u){return c.every(h=>u.every(f=>Cs.commutative(h,f)))}e.commutative=a;function o(c,u){for(let h of u){let f=l(c,h);f!==null&&(c=f.data)}return c}e.applyAll=o;function l(c,u){var h=c;let f=[],m=[];for(let g of u)try{if(g.type===3||g.type===5&&g.path[g.path.length-1]==="variables"){let v,x,b;if(g.type===3?(v=os.zoom(h,[...g.path,g.id]),b=Cs.apply(h,{...g,type:2})):(v=os.zoom(h,[...g.path,g.id,"value"]),b=Cs.apply(h,g)),b!==null){h=b.data;let[S,_]=rHe(h,{[g.id]:v});h=S;for(let A=0;A<_.length;A++){let M=_[A],C=M.pop();if(typeof C=="number"){let D=[C];for(let R=A+1;R<_.length;R++){let O=_[R],L=O[O.length-1];if(typeof L=="number"&&os.equal(M,O.slice(0,O.length-1)))D.push(L),_.splice(R,1);else break}let T=os.zoom(h,M);x=T.map((R,O)=>D.includes(O)?g.id:R),v=T,C=M.pop()}else{if(C==="alphaOverride"||C==="alpha"){v/=100;let D=v,T=os.zoom(h,M.slice(0,M.length-2)),R=T.layers.map(O=>O.id===M[M.length-1]?{...O,data:{...O.data,[C]:D}}:O);Object.setPrototypeOf(R,Object.getPrototypeOf(T.layers)),T.layers=R}x=g.id}f.push({type:0,path:M,props:{[C]:v}}),m.push({type:0,path:M,props:{[C]:x}})}m.push(b.reverse),f.push(b.actual)}}else{let v=Cs.apply(h,g);v!==null&&(f.push(v.actual),h=v.data,m.push(v.reverse))}}catch(v){if(v instanceof are)return null;throw v}return{data:h,actual:f,reverse:m.reverse()}}e.apply=l})(AR||(AR={}));var ure=Symbol(),aHe=Symbol(),H3=Symbol(),Mw=class{reportOp(e,t,i=[]){let r=this;if(t===null)return;r._current=t.data;let n=i;for(;!(r instanceof dre);){let s=r._path,a=r._current;if(s!==""&&n.splice(0,0,s),r=r._parent,r===null)return;r.update(s,a)}r.push(n,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let i=t[H3];i&&i(),delete this._children[e]}}}},oHe=class extends Mw{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,rT.runOp(this._current,e),e.path)}},lHe=class extends Mw{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,Wt.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},hre={get(e,t){if(t===H3)return()=>{e._parent=null};if(t===ure)return e._current;if(t===aHe)return e;let{_current:i,_children:r}=e;if(t==="push"&&Array.isArray(i))throw new Error("not supported to expand array");let n=r===void 0?void 0:r[t];if(n!==void 0)return n;let s=i[t],a=G3(e,t,s);return a!==s?(r===void 0&&(r={},e._children=r),r[t]=a,a):s},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let i=e._current,r=Reflect.getOwnPropertyDescriptor(i,t);return r&&{writable:!0,configurable:!0,enumerable:r.enumerable,value:i[t]}}},cHe={...hre,set(e,t,i){let r={type:0,props:{[t]:Cn(i)??i}};return e.deleteChildren(t),e.runOp(r),!0},deleteProperty(e,t){let i={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(i),!0}},uHe={...hre,set(e,t,i){return i===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:i})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},Hk=class extends Mw{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[H3]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,i)=>{e(t,this.data(t))})}data(e){var a;let{_current:t,_children:i}=this,r=i===void 0?void 0:i[e];if(r!==void 0)return r;let n=(a=t.get(e))==null?void 0:a.data,s=G3(this,e,n);return s!==n?(i===void 0&&(i={},this._children=i),i[e]=s,s):n}add(e,t,i,r,n){this.runOp({type:7,parent:e,fi:t,id:i,data:r,children:n})}move(e,t,i){this.runOp({type:9,parent:e,fi:t,id:i})}insertAfter(e,t,i){let r=this._current.insertAfterHelper(e,t,i.length);for(let n=0;n<i.length;n++){let s=i[n];this.add(e,r[n],s.id,s.data,s.children)}}insertBefore(e,t,i){let r=this._current.insertBeforeHelper(e,t,i.length);for(let n=0;n<i.length;n++){let s=i[n];this.add(e,r[n],s.id,s.data,s.children)}}moveAfter(e,t,i){let r=this._current.insertAfterHelper(e,t,i.length);for(let n=0;n<i.length;n++){let s=i[n];this.move(e,r[n],s)}}moveBefore(e,t,i){let r=this._current.insertBeforeHelper(e,t,i.length);for(let n=0;n<i.length;n++){let s=i[n];this.move(e,r[n],s)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},Gk=class extends Mw{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[H3]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let i=0;i<t;i++){let r=this._current[i].id,n=this._current[i].fi;e(this.data(this._current[i].id),r,n)}}find(e){let t=this.length;for(let i=0;i<t;i++){let r=this._current[i].id;if(e(this.data(r),r))return this.get(r)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var a;let{_current:t,_children:i}=this,r=i===void 0?void 0:i[e];if(r!==void 0)return r;let n=(a=t.get(e))==null?void 0:a.data,s=G3(this,e,n);return s!==n?(i===void 0&&(i={},this._children=i),i[e]=s,s):n}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,i){this.runOp({type:4,fi:e,id:t,data:i})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.add(i[r],n.id,n.data)}}insertBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.add(i[r],n.id,n.data)}}moveAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.move(i[r],n)}}moveBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.move(i[r],n)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function x4(e,t,i){if(e.length>0){let r=e[e.length-1];if(r.type===0&&t.type===0&&os.equal(r.path,i)){Object.assign(r.props,t.props);return}}e.push({...t,path:i})}var dre=class extends Mw{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,i,r){x4(this.ts,t,e),x4(this.actual,i,e),x4(this.reverse,r,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function G3(e,t,i){return i instanceof ea?new Hk(e,t,i):i instanceof Lt?new Gk(e,t,i):i instanceof Wt?new Proxy(new lHe(e,t,i),uHe):i!==null&&typeof i=="object"?Vk(i)?i:new Proxy(new oHe(e,t,i),cHe):i}function fre(e){let t=new dre(e);return[G3(t,"",e),t]}function Fb(e,t){let[i,r]=fre(e);return t(i),r.result()}function Cn(e){return e instanceof Hk||e instanceof Gk?e._current:e!==null&&typeof e=="object"?e[ure]:e}var os;(e=>{function t(s,a){if(a.length===s.length)for(var o=0;o<s.length;){if(s[o]!==a[o])return!1;o+=1}else return!1;return!0}e.equal=t;function i(s,a,o){let l=n(o,s);if(l!==void 0&&typeof l=="object"&&l!==null){let c={...a};return Object.keys(l).forEach(u=>{delete c[u]}),c}else return a}e.removeOverridden=i;function r(s,a){if((s instanceof ea||s instanceof Hk)&&typeof a=="string"||(s instanceof Lt||s instanceof Gk)&&typeof a=="string")return s.data(a);if(typeof a=="number"&&Array.isArray(s)||typeof a=="string"&&typeof s=="object"&&s!==null)return s[a]}e.zoomOnce=r;function n(s,a,o=0){for(;o<a.length&&s!==void 0;)s=r(s,a[o]),o+=1;return s}e.zoom=n})(os||(os={}));function hHe(e,t){let i=[];if(t.length===e.length)for(var r=0;r<e.length;){if(t[r]==="*")i.push(e[r]);else if(e[r]!==t[r])return null;r+=1}else return null;return i}function Ir(e,t){let i=[];if(t.length<=e.length)for(var r=0;r<t.length;){if(t[r]==="*")i.push(e[r]);else if(e[r]!==t[r])return null;r+=1}else return null;return i}var pre=class{},JH=class extends pre{constructor(e){super(),this.id=e}},eG=class extends pre{constructor(e){super(),this.data=e}},TR;try{TR=new TextDecoder}catch{}var Mt,wf,Re=0,lo={},Ji,sf,hl=0,ru=0,zo,Nh,Qa=[],fr,tG={useRecords:!1,mapsAsObjects:!0},mre=class{},gre=new mre;gre.name="MessagePack 0xC1";var Iv=!1,oT=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(Mt)return Sre(()=>(MR(),this?this.unpack(e,t):oT.prototype.unpack.call(tG,e,t)));wf=t>-1?t:e.length,Re=0,ru=0,sf=null,zo=null,Mt=e;try{fr=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(i){throw Mt=null,e instanceof Uint8Array?i:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof oT){if(lo=this,this.structures)return Ji=this.structures,x_();(!Ji||Ji.length>0)&&(Ji=[])}else lo=tG,(!Ji||Ji.length>0)&&(Ji=[]);return x_()}unpackMultiple(e,t){let i,r=0;try{Iv=!0;let n=e.length,s=this?this.unpack(e,n):q3.unpack(e,n);if(t){for(t(s);Re<n;)if(r=Re,t(x_())===!1)return}else{for(i=[s];Re<n;)r=Re,i.push(x_());return i}}catch(n){throw n.lastPosition=r,n.values=i,n}finally{Iv=!1,MR()}}_mergeStructures(e,t){e=e||[];for(let i=0,r=e.length;i<r;i++){let n=e[i];n&&(n.isShared=!0,i>=32&&(n.highByte=i-32>>5))}e.sharedLength=e.length;for(let i in t||[])if(i>=0){let r=e[i],n=t[i];n&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[i]=r),e[i]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function x_(){try{if(!lo.trusted&&!Iv){let t=Ji.sharedLength||0;t<Ji.length&&(Ji.length=t)}let e=mn();if(Re==wf)Ji.restoreStructures&&iG(),Ji=null,Mt=null,Nh&&(Nh=null);else if(Re>wf){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!Iv)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Ji.restoreStructures&&iG(),MR(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function iG(){for(let e in Ji.restoreStructures)Ji[e]=Ji.restoreStructures[e];Ji.restoreStructures=null}function mn(){let e=Mt[Re++];if(e<160)if(e<128){if(e<64)return e;{let t=Ji[e&63]||lo.getStructures&&vre()[e&63];return t?(t.read||(t.read=Wk(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,lo.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[xre()]=mn();return t}else{let t=new Map;for(let i=0;i<e;i++)t.set(mn(),mn());return t}else{e-=144;let t=new Array(e);for(let i=0;i<e;i++)t[i]=mn();return t}else if(e<192){let t=e-160;if(ru>=Re)return sf.slice(Re-hl,(Re+=t)-hl);if(ru==0&&wf<140){let i=t<16?qk(t):yre(t);if(i!=null)return i}return CR(t)}else{let t;switch(e){case 192:return null;case 193:return zo?(t=mn(),t>0?zo[1].slice(zo.position1,zo.position1+=t):zo[0].slice(zo.position0,zo.position0-=t)):gre;case 194:return!1;case 195:return!0;case 196:return b4(Mt[Re++]);case 197:return t=fr.getUint16(Re),Re+=2,b4(t);case 198:return t=fr.getUint32(Re),Re+=4,b4(t);case 199:return Pp(Mt[Re++]);case 200:return t=fr.getUint16(Re),Re+=2,Pp(t);case 201:return t=fr.getUint32(Re),Re+=4,Pp(t);case 202:if(t=fr.getFloat32(Re),lo.useFloat32>2){let i=Xk[(Mt[Re]&127)<<1|Mt[Re+1]>>7];return Re+=4,(i*t+(t>0?.5:-.5)>>0)/i}return Re+=4,t;case 203:return t=fr.getFloat64(Re),Re+=8,t;case 204:return Mt[Re++];case 205:return t=fr.getUint16(Re),Re+=2,t;case 206:return t=fr.getUint32(Re),Re+=4,t;case 207:return lo.int64AsNumber?(t=fr.getUint32(Re)*4294967296,t+=fr.getUint32(Re+4)):t=fr.getBigUint64(Re),Re+=8,t;case 208:return fr.getInt8(Re++);case 209:return t=fr.getInt16(Re),Re+=2,t;case 210:return t=fr.getInt32(Re),Re+=4,t;case 211:return lo.int64AsNumber?(t=fr.getInt32(Re)*4294967296,t+=fr.getUint32(Re+4)):t=fr.getBigInt64(Re),Re+=8,t;case 212:if(t=Mt[Re++],t==114)return oG(Mt[Re++]&63);{let i=Qa[t];if(i)return i.read?(Re++,i.read(mn())):i.noBuffer?(Re++,i()):i(Mt.subarray(Re,++Re));throw new Error("Unknown extension "+t)}case 213:return t=Mt[Re],t==114?(Re++,oG(Mt[Re++]&63,Mt[Re++])):Pp(2);case 214:return Pp(4);case 215:return Pp(8);case 216:return Pp(16);case 217:return t=Mt[Re++],ru>=Re?sf.slice(Re-hl,(Re+=t)-hl):fHe(t);case 218:return t=fr.getUint16(Re),Re+=2,ru>=Re?sf.slice(Re-hl,(Re+=t)-hl):pHe(t);case 219:return t=fr.getUint32(Re),Re+=4,ru>=Re?sf.slice(Re-hl,(Re+=t)-hl):mHe(t);case 220:return t=fr.getUint16(Re),Re+=2,nG(t);case 221:return t=fr.getUint32(Re),Re+=4,nG(t);case 222:return t=fr.getUint16(Re),Re+=2,sG(t);case 223:return t=fr.getUint32(Re),Re+=4,sG(t);default:if(e>=224)return e-256;if(e===void 0){let i=new Error("Unexpected end of MessagePack data");throw i.incomplete=!0,i}throw new Error("Unknown MessagePack token "+e)}}}var dHe=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Wk(e,t){function i(){if(i.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(s=>dHe.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(mn);return e.highByte===0&&(e.read=rG(t,e.read)),n()}let r={};for(let n=0,s=e.length;n<s;n++){let a=e[n];r[a]=mn()}return r}return i.count=0,e.highByte===0?rG(t,i):i}var rG=(e,t)=>function(){let i=Mt[Re++];if(i===0)return t();let r=e<32?-(e+(i<<5)):e+(i<<5),n=Ji[r]||vre()[r];if(!n)throw new Error("Record id is not defined for "+r);return n.read||(n.read=Wk(n,e)),n.read()};function vre(){let e=Sre(()=>(Mt=null,lo.getStructures()));return Ji=lo._mergeStructures(e,Ji)}var CR=W3,fHe=W3,pHe=W3,mHe=W3;function W3(e){let t;if(e<16&&(t=qk(e)))return t;if(e>64&&TR)return TR.decode(Mt.subarray(Re,Re+=e));let i=Re+e,r=[];for(t="";Re<i;){let n=Mt[Re++];if((n&128)===0)r.push(n);else if((n&224)===192){let s=Mt[Re++]&63;r.push((n&31)<<6|s)}else if((n&240)===224){let s=Mt[Re++]&63,a=Mt[Re++]&63;r.push((n&31)<<12|s<<6|a)}else if((n&248)===240){let s=Mt[Re++]&63,a=Mt[Re++]&63,o=Mt[Re++]&63,l=(n&7)<<18|s<<12|a<<6|o;l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|l&1023),r.push(l)}else r.push(n);r.length>=4096&&(t+=ws.apply(String,r),r.length=0)}return r.length>0&&(t+=ws.apply(String,r)),t}function nG(e){let t=new Array(e);for(let i=0;i<e;i++)t[i]=mn();return t}function sG(e){if(lo.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[xre()]=mn();return t}else{let t=new Map;for(let i=0;i<e;i++)t.set(mn(),mn());return t}}var ws=String.fromCharCode;function yre(e){let t=Re,i=new Array(e);for(let r=0;r<e;r++){let n=Mt[Re++];if((n&128)>0){Re=t;return}i[r]=n}return ws.apply(String,i)}function qk(e){if(e<4)if(e<2){if(e===0)return"";{let t=Mt[Re++];if((t&128)>1){Re-=1;return}return ws(t)}}else{let t=Mt[Re++],i=Mt[Re++];if((t&128)>0||(i&128)>0){Re-=2;return}if(e<3)return ws(t,i);let r=Mt[Re++];if((r&128)>0){Re-=3;return}return ws(t,i,r)}else{let t=Mt[Re++],i=Mt[Re++],r=Mt[Re++],n=Mt[Re++];if((t&128)>0||(i&128)>0||(r&128)>0||(n&128)>0){Re-=4;return}if(e<6){if(e===4)return ws(t,i,r,n);{let s=Mt[Re++];if((s&128)>0){Re-=5;return}return ws(t,i,r,n,s)}}else if(e<8){let s=Mt[Re++],a=Mt[Re++];if((s&128)>0||(a&128)>0){Re-=6;return}if(e<7)return ws(t,i,r,n,s,a);let o=Mt[Re++];if((o&128)>0){Re-=7;return}return ws(t,i,r,n,s,a,o)}else{let s=Mt[Re++],a=Mt[Re++],o=Mt[Re++],l=Mt[Re++];if((s&128)>0||(a&128)>0||(o&128)>0||(l&128)>0){Re-=8;return}if(e<10){if(e===8)return ws(t,i,r,n,s,a,o,l);{let c=Mt[Re++];if((c&128)>0){Re-=9;return}return ws(t,i,r,n,s,a,o,l,c)}}else if(e<12){let c=Mt[Re++],u=Mt[Re++];if((c&128)>0||(u&128)>0){Re-=10;return}if(e<11)return ws(t,i,r,n,s,a,o,l,c,u);let h=Mt[Re++];if((h&128)>0){Re-=11;return}return ws(t,i,r,n,s,a,o,l,c,u,h)}else{let c=Mt[Re++],u=Mt[Re++],h=Mt[Re++],f=Mt[Re++];if((c&128)>0||(u&128)>0||(h&128)>0||(f&128)>0){Re-=12;return}if(e<14){if(e===12)return ws(t,i,r,n,s,a,o,l,c,u,h,f);{let m=Mt[Re++];if((m&128)>0){Re-=13;return}return ws(t,i,r,n,s,a,o,l,c,u,h,f,m)}}else{let m=Mt[Re++],g=Mt[Re++];if((m&128)>0||(g&128)>0){Re-=14;return}if(e<15)return ws(t,i,r,n,s,a,o,l,c,u,h,f,m,g);let v=Mt[Re++];if((v&128)>0){Re-=15;return}return ws(t,i,r,n,s,a,o,l,c,u,h,f,m,g,v)}}}}}function b4(e){return lo.copyBuffers?Uint8Array.prototype.slice.call(Mt,Re,Re+=e):Mt.subarray(Re,Re+=e)}function Pp(e){let t=Mt[Re++];if(Qa[t])return Qa[t](Mt.subarray(Re,Re+=e));throw new Error("Unknown extension type "+t)}var aG=new Array(4096);function xre(){let e=Mt[Re++];if(e>=160&&e<192){if(e=e-160,ru>=Re)return sf.slice(Re-hl,(Re+=e)-hl);if(!(ru==0&&wf<180))return CR(e)}else return Re--,mn();let t=(e<<5^(e>1?fr.getUint16(Re):e>0?Mt[Re]:0))&4095,i=aG[t],r=Re,n=Re+e-3,s,a=0;if(i&&i.bytes==e){for(;r<n;){if(s=fr.getUint32(r),s!=i[a++]){r=1879048192;break}r+=4}for(n+=3;r<n;)if(s=Mt[r++],s!=i[a++]){r=1879048192;break}if(r===n)return Re=r,i.string;n-=3,r=Re}for(i=[],aG[t]=i,i.bytes=e;r<n;)s=fr.getUint32(r),i.push(s),r+=4;for(n+=3;r<n;)s=Mt[r++],i.push(s);let o=e<16?qk(e):yre(e);return o!=null?i.string=o:i.string=CR(e)}var oG=(e,t)=>{var i=mn();let r=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,i.highByte=t);let n=Ji[e];return n&&n.isShared&&((Ji.restoreStructures||(Ji.restoreStructures=[]))[e]=n),Ji[e]=i,i.read=Wk(i,r),i.read()},bre=typeof self=="object"?self:global;Qa[0]=()=>{};Qa[0].noBuffer=!0;Qa[101]=()=>{let e=mn();return(bre[e[0]]||Error)(e[1])};Qa[105]=e=>{let t=fr.getUint32(Re-4);Nh||(Nh=new Map);let i=Mt[Re],r;i>=144&&i<160||i==220||i==221?r=[]:r={};let n={target:r};Nh.set(t,n);let s=mn();return n.used?Object.assign(r,s):(n.target=s,s)};Qa[112]=e=>{let t=fr.getUint32(Re-4),i=Nh.get(t);return i.used=!0,i.target};Qa[115]=()=>new Set(mn());var wre=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");Qa[116]=e=>{let t=e[0],i=wre[t];if(!i)throw new Error("Could not find typed array for code "+t);return new bre[i](Uint8Array.prototype.slice.call(e,1).buffer)};Qa[120]=()=>{let e=mn();return new RegExp(e[0],e[1])};Qa[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],i=Re;Re+=t-4,zo=[mn(),mn()],zo.position0=0,zo.position1=0;let r=Re;Re=i;try{return mn()}finally{Re=r}};Qa[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function Sre(e){let t=wf,i=Re,r=hl,n=ru,s=sf,a=Nh,o=zo,l=new Uint8Array(Mt.slice(0,wf)),c=Ji,u=Ji.slice(0,Ji.length),h=lo,f=Iv,m=e();return wf=t,Re=i,hl=r,ru=n,sf=s,Nh=a,zo=o,Mt=l,Iv=f,Ji=c,Ji.splice(0,Ji.length,...u),lo=h,fr=new DataView(Mt.buffer,Mt.byteOffset,Mt.byteLength),m}function MR(){Mt=null,Nh=null,Ji=null}function gHe(e){e.unpack?Qa[e.type]=e.unpack:Qa[e.type]=e}var Xk=new Array(147);for(let e=0;e<256;e++)Xk[e]=+("1e"+Math.floor(45.15-e*.30103));var q3=new oT({useRecords:!1});q3.unpack;q3.unpackMultiple;q3.unpack;var vHe=new Float32Array(1);new Uint8Array(vHe.buffer,0,4);var GE;try{GE=new TextEncoder}catch{}var lT,Yk,X3=typeof Buffer<"u",w4=X3?Buffer.allocUnsafeSlow:Uint8Array,_re=X3?Buffer:Uint8Array,lG=X3?4294967296:2144337920,Ze,Sn,je=0,Oc,Lc=null,yHe=/[\u0080-\uFFFF]/,V1=Symbol("record-id"),Ere=class extends oT{constructor(e){super(e),this.offset=0;let t,i,r,n,s,a=0,o=_re.prototype.utf8Write?function(C,D,T){return Ze.utf8Write(C,D,T)}:GE&&GE.encodeInto?function(C,D){return GE.encodeInto(C,Ze.subarray(D)).written}:!1,l=this;e||(e={});let c=e&&e.sequential,u=e.structures||e.saveStructures,h=e.maxSharedStructures;if(h==null&&(h=u?32:0),h>8160)throw new Error("Maximum maxSharedStructure is 8160");let f=e.maxOwnStructures;f==null&&(f=u?32:64),c&&!e.saveStructures&&(this.structures=[]);let m=h>32||f+h>64,g=h+64,v=h+f+64;if(v>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let x=[],b=0,S=0;this.pack=this.encode=function(C,D){if(Ze||(Ze=new w4(8192),Sn=new DataView(Ze.buffer,0,8192),je=0),Oc=Ze.length-10,Oc-je<2048?(Ze=new w4(Ze.length),Sn=new DataView(Ze.buffer,0,Ze.length),Oc=Ze.length-10,je=0):je=je+7&2147483640,t=je,s=l.structuredClone?new Map:null,l.bundleStrings?(Lc=["",""],Ze[je++]=214,Ze[je++]=98,Lc.position=je-t,je+=4):Lc=null,i=l.structures,i){i.uninitialized&&(i=l._mergeStructures(l.getStructures()));let T=i.sharedLength||0;if(T>h)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let R=0;R<T;R++){let O=i[R];if(!O)continue;let L,k=i.transitions;for(let B=0,V=O.length;B<V;B++){let $=O[B];L=k[$],L||(L=k[$]=Object.create(null)),k=L}k[V1]=R+64}a=T}c||(i.nextId=T+64)}r&&(r=!1),n=i||[];try{if(_(C),Lc){Sn.setUint32(Lc.position+t,je-Lc.position-t);let T=Lc;Lc=null,_(T[0]),_(T[1])}if(l.offset=je,s&&s.idsToInsert){je+=s.idsToInsert.length*6,je>Oc&&M(je),l.offset=je;let T=bHe(Ze.subarray(t,je),s.idsToInsert);return s=null,T}return D&wHe?(Ze.start=t,Ze.end=je,Ze):Ze.subarray(t,je)}finally{if(i){if(S<10&&S++,b>1e4)i.transitions=null,S=0,b=0,x.length>0&&(x=[]);else if(x.length>0&&!c){for(let T=0,R=x.length;T<R;T++)x[T][V1]=0;x=[]}if(r&&l.saveStructures){let T=i.sharedLength||h;i.length>T&&(i=i.slice(0,T));let R=Ze.subarray(t,je);return l.saveStructures(i,a)===!1?(l._mergeStructures(l.getStructures()),l.pack(C)):(a=T,R)}}D&SHe&&(je=t)}};let _=C=>{je>Oc&&(Ze=M(je));var D=typeof C,T;if(D==="string"){let R=C.length;if(Lc&&R>=8&&R<4096){let k=yHe.test(C);Lc[k?0:1]+=C,Ze[je++]=193,_(k?-R:R);return}let O;R<32?O=1:R<256?O=2:R<65536?O=3:O=5;let L=R*3;if(je+L>Oc&&(Ze=M(je+L)),R<64||!o){let k,B,V,$=je+O;for(k=0;k<R;k++)B=C.charCodeAt(k),B<128?Ze[$++]=B:B<2048?(Ze[$++]=B>>6|192,Ze[$++]=B&63|128):(B&64512)===55296&&((V=C.charCodeAt(k+1))&64512)===56320?(B=65536+((B&1023)<<10)+(V&1023),k++,Ze[$++]=B>>18|240,Ze[$++]=B>>12&63|128,Ze[$++]=B>>6&63|128,Ze[$++]=B&63|128):(Ze[$++]=B>>12|224,Ze[$++]=B>>6&63|128,Ze[$++]=B&63|128);T=$-je-O}else T=o(C,je+O,L);T<32?Ze[je++]=160|T:T<256?(O<2&&Ze.copyWithin(je+2,je+1,je+1+T),Ze[je++]=217,Ze[je++]=T):T<65536?(O<3&&Ze.copyWithin(je+3,je+2,je+2+T),Ze[je++]=218,Ze[je++]=T>>8,Ze[je++]=T&255):(O<5&&Ze.copyWithin(je+5,je+3,je+3+T),Ze[je++]=219,Sn.setUint32(je,T),je+=4),je+=T}else if(D==="number")if(C>>>0===C)C<64?Ze[je++]=C:C<256?(Ze[je++]=204,Ze[je++]=C):C<65536?(Ze[je++]=205,Ze[je++]=C>>8,Ze[je++]=C&255):(Ze[je++]=206,Sn.setUint32(je,C),je+=4);else if(C>>0===C)C>=-32?Ze[je++]=256+C:C>=-128?(Ze[je++]=208,Ze[je++]=C+256):C>=-32768?(Ze[je++]=209,Sn.setInt16(je,C),je+=2):(Ze[je++]=210,Sn.setInt32(je,C),je+=4);else{let R;if((R=this.useFloat32)>0&&C<4294967296&&C>=-2147483648){Ze[je++]=202,Sn.setFloat32(je,C);let O;if(R<4||(O=C*Xk[(Ze[je]&127)<<1|Ze[je+1]>>7])>>0===O){je+=4;return}else je--}Ze[je++]=203,Sn.setFloat64(je,C),je+=8}else if(D==="object")if(!C)Ze[je++]=192;else{if(s){let O=s.get(C);if(O){if(!O.id){let L=s.idsToInsert||(s.idsToInsert=[]);O.id=L.push(O)}Ze[je++]=214,Ze[je++]=112,Sn.setUint32(je,O.id),je+=4;return}else s.set(C,{offset:je-t})}let R=C.constructor;if(R===Object)A(C,!0);else if(R===Array){T=C.length,T<16?Ze[je++]=144|T:T<65536?(Ze[je++]=220,Ze[je++]=T>>8,Ze[je++]=T&255):(Ze[je++]=221,Sn.setUint32(je,T),je+=4);for(let O=0;O<T;O++)_(C[O])}else if(R===Map){T=C.size,T<16?Ze[je++]=128|T:T<65536?(Ze[je++]=222,Ze[je++]=T>>8,Ze[je++]=T&255):(Ze[je++]=223,Sn.setUint32(je,T),je+=4);for(let[O,L]of C)_(O),_(L)}else{for(let O=0,L=lT.length;O<L;O++){let k=Yk[O];if(C instanceof k){let B=lT[O];if(B.write){B.type&&(Ze[je++]=212,Ze[je++]=B.type,Ze[je++]=0),_(B.write.call(this,C));return}let V=Ze,$=Sn,q=je;Ze=null;let Y;try{Y=B.pack.call(this,C,X=>(Ze=V,V=null,je+=X,je>Oc&&M(je),{target:Ze,targetView:Sn,position:je-X}),_)}finally{V&&(Ze=V,Sn=$,je=q,Oc=Ze.length-10)}Y&&(Y.length+je>Oc&&M(Y.length+je),je=xHe(Y,Ze,je,B.type));return}}A(C,!C.hasOwnProperty)}}else if(D==="boolean")Ze[je++]=C?195:194;else if(D==="bigint"){if(C<BigInt(1)<<BigInt(63)&&C>=-(BigInt(1)<<BigInt(63)))Ze[je++]=211,Sn.setBigInt64(je,C);else if(C<BigInt(1)<<BigInt(64)&&C>0)Ze[je++]=207,Sn.setBigUint64(je,C);else if(this.largeBigIntToFloat)Ze[je++]=203,Sn.setFloat64(je,Number(C));else throw new RangeError(C+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");je+=8}else if(D==="undefined")this.encodeUndefinedAsNil?Ze[je++]=192:(Ze[je++]=212,Ze[je++]=0,Ze[je++]=0);else if(D==="function")_(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+D)},A=this.useRecords===!1?this.variableMapSize?C=>{let D=Object.keys(C),T=D.length;T<16?Ze[je++]=128|T:T<65536?(Ze[je++]=222,Ze[je++]=T>>8,Ze[je++]=T&255):(Ze[je++]=223,Sn.setUint32(je,T),je+=4);let R;for(let O=0;O<T;O++)_(R=D[O]),_(C[R])}:(C,D)=>{Ze[je++]=222;let T=je-t;je+=2;let R=0;for(let O in C)(D||C.hasOwnProperty(O))&&(_(O),_(C[O]),R++);Ze[T+++t]=R>>8,Ze[T+t]=R&255}:C=>{let D=Object.keys(C),T,R=n.transitions||(n.transitions=Object.create(null)),O=0;for(let k=0,B=D.length;k<B;k++){let V=D[k];T=R[V],T||(T=R[V]=Object.create(null),O++),R=T}let L=R[V1];if(L)L>=96&&m?(Ze[je++]=((L-=96)&31)+96,Ze[je++]=L>>5):Ze[je++]=L;else{L=n.nextId,L||(L=64),L<g&&this.shouldShareStructure&&!this.shouldShareStructure(D)?(L=n.nextOwnId,L<v||(L=g),n.nextOwnId=L+1):(L>=v&&(L=g),n.nextId=L+1);let k=D.highByte=L>=96&&m?L-96>>5:-1;R[V1]=L,n[L-64]=D,L<g?(D.isShared=!0,n.sharedLength=L-63,r=!0,k>=0?(Ze[je++]=(L&31)+96,Ze[je++]=k):Ze[je++]=L):(k>=0?(Ze[je++]=213,Ze[je++]=114,Ze[je++]=(L&31)+96,Ze[je++]=k):(Ze[je++]=212,Ze[je++]=114,Ze[je++]=L),O&&(b+=S*O),x.length>=f&&(x.shift()[V1]=0),x.push(R),_(D))}for(let k=0,B=D.length;k<B;k++)_(C[D[k]])},M=C=>{let D;if(C>16777216){if(C-t>lG)throw new Error("Packed buffer would be larger than maximum buffer size");D=Math.min(lG,Math.round(Math.max((C-t)*(C>67108864?1.25:2),4194304)/4096)*4096)}else D=(Math.max(C-t<<2,Ze.length-1)>>12)+1<<12;let T=new w4(D);return Sn=new DataView(T.buffer,0,D),Ze.copy?Ze.copy(T,0,t,C):T.set(Ze.slice(t,C)),je-=t,t=0,Oc=T.length-10,Ze=T}}useBuffer(e){Ze=e,Sn=new DataView(Ze.buffer,Ze.byteOffset,Ze.byteLength),je=0}};Yk=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,mre];lT=[{pack(e,t,i){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){let{target:n,targetView:s,position:a}=t(6);n[a++]=214,n[a++]=255,s.setUint32(a,r)}else if(r>0&&r<17179869184){let{target:n,targetView:s,position:a}=t(10);n[a++]=215,n[a++]=255,s.setUint32(a,e.getMilliseconds()*4e6+(r/1e3/4294967296>>0)),s.setUint32(a+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return t(0),i(this.onInvalidDate());let{target:n,targetView:s,position:a}=t(3);n[a++]=212,n[a++]=255,n[a++]=255}else{let{target:n,targetView:s,position:a}=t(15);n[a++]=199,n[a++]=12,n[a++]=255,s.setUint32(a,e.getMilliseconds()*1e6),s.setBigInt64(a+4,BigInt(Math.floor(r)))}}},{pack(e,t,i){let r=Array.from(e),{target:n,position:s}=t(this.structuredClone?3:0);this.structuredClone&&(n[s++]=212,n[s++]=115,n[s++]=0),i(r)}},{pack(e,t,i){let{target:r,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(r[n++]=212,r[n++]=101,r[n++]=0),i([e.name,e.message])}},{pack(e,t,i){let{target:r,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(r[n++]=212,r[n++]=120,r[n++]=0),i([e.source,e.flags])}},{pack(e,t){this.structuredClone?cG(e,16,t):uG(X3?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let i=e.constructor;i!==_re&&this.structuredClone?cG(e,wre.indexOf(i.name),t):uG(e,t)}},{pack(e,t){let{target:i,position:r}=t(1);i[r]=193}}];function cG(e,t,i,r){let n=e.byteLength;if(n+1<256){var{target:s,position:a}=i(4+n);s[a++]=199,s[a++]=n+1}else if(n+1<65536){var{target:s,position:a}=i(5+n);s[a++]=200,s[a++]=n+1>>8,s[a++]=n+1&255}else{var{target:s,position:a,targetView:o}=i(7+n);s[a++]=201,o.setUint32(a,n+1),a+=4}s[a++]=116,s[a++]=t,s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a)}function uG(e,t){let i=e.byteLength;var r,n;if(i<256){var{target:r,position:n}=t(i+2);r[n++]=196,r[n++]=i}else if(i<65536){var{target:r,position:n}=t(i+3);r[n++]=197,r[n++]=i>>8,r[n++]=i&255}else{var{target:r,position:n,targetView:s}=t(i+5);r[n++]=198,s.setUint32(n,i),n+=4}r.set(e,n)}function xHe(e,t,i,r){let n=e.length;switch(n){case 1:t[i++]=212;break;case 2:t[i++]=213;break;case 4:t[i++]=214;break;case 8:t[i++]=215;break;case 16:t[i++]=216;break;default:n<256?(t[i++]=199,t[i++]=n):n<65536?(t[i++]=200,t[i++]=n>>8,t[i++]=n&255):(t[i++]=201,t[i++]=n>>24,t[i++]=n>>16&255,t[i++]=n>>8&255,t[i++]=n&255)}return t[i++]=r,t.set(e,i),i+=n,i}function bHe(e,t){let i,r=t.length*6,n=e.length-r;for(t.sort((s,a)=>s.offset>a.offset?1:-1);i=t.pop();){let s=i.offset,a=i.id;e.copyWithin(s+r,s,n),r-=6;let o=s+r;e[o++]=214,e[o++]=105,e[o++]=a>>24,e[o++]=a>>16&255,e[o++]=a>>8&255,e[o++]=a&255,n=s}return e}function fy(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");Yk.unshift(e.Class),lT.unshift(e)}gHe(e)}var Are=new Ere({useRecords:!1});Are.pack;Are.pack;var wHe=512,SHe=1024,hG=new Ere({structuredClone:!0});fy({Class:Wt.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Wt.prototype),e}});fy({Class:Lt.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Lt.prototype),e}});fy({Class:ea.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,ea.prototype),e}});fy({Class:JH.prototype.constructor,type:4,write(e){return e.id},read(e){return new JH(e)}});fy({Class:eG.prototype.constructor,type:5,write(e){return e.data},read(e){return new eG(e)}});fy({Class:qn.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,qn.prototype),e}});function _He(e){var t=0;if(e.length===0)return t;for(let i=0;i<e.length;i++){let r=e[i];t=(t<<5)-t+r,t=t&t}return t}function PR(e){if(Vk(e))return e;if(Array.isArray(e))return e.map(PR);if(typeof e=="object"&&e!==null){let t={};for(let i of Object.keys(e).sort())t[i]=PR(e[i]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var DR;(e=>{function t(n){return hG.pack(n)}e.serialize=t;function i(n){return hG.unpack(n)}e.deserialize=i;function r(n){return _He(t(PR(n))).toString()}e.checksum=r})(DR||(DR={}));var dG;(e=>{function t(r){return r.type==="Conditional"?r.condition.type==="Distance"?"Distance":"StateChange":r.type}e.toEventUIType=t;function i(r){return r==="Distance"||r==="StateChange"?"Conditional":r}e.fromEventUIType=i})(dG||(dG={}));function fG(e){return e==="MouseDown"||e==="MouseUp"||e==="KeyDown"||e==="KeyUp"||e==="Collision"||e==="Trigger"}var pa={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Particles","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseHover:["Transition","Animation","Particles","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Start:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Conditional:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MousePress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyPress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],GameControl:["Transition","Animation","Audio","Particles","Create","Conditional"],Collision:["Transition","Animation","Audio","Particles","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Trigger:["Transition","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Resize:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],VariableChange:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],API:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],WEBHOOK:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],AIAssistantListener:["SetVariable"],AIAssistantTrigger:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"]},pG;(e=>{function t(r){return r.type==="MouseDown"||r.type==="MouseUp"||r.type==="MousePress"||r.type==="KeyDown"||r.type==="KeyUp"||r.type==="KeyPress"}e.is=t;function i(r){return r==="MouseDown"||r==="MouseUp"||r==="MousePress"?{type:r,mode:"Object",disabled:!1,actions:new Lt}:{type:r,disabled:!1,key:void 0,actions:new Lt}}e.defaultData=i})(pG||(pG={}));var cT;(e=>{function t(i){return{type:"Property",value:[i??null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(cT||(cT={}));var IR;(e=>{function t(n){return{type:"Comparison",operator:"==",lOperand:cT.propertyDefaultData(n),rOperand:{...cT.valueDefaultData}}}e.comparisonDefaultData=t;function i(n){return{type:"Distance",toObject:n??null,fromObject:n??null,distance:200}}e.distanceDefaultData=i;function r(n,s){return{type:"State",object:n??null,state:s??null}}e.stateDefaultData=r})(IR||(IR={}));var mG;(e=>{function t(i){return i.find(r=>r==="ifActions"||r==="elseActions")!==void 0}e.isConditionalSubActions=t})(mG||(mG={}));var gG;(e=>{function t(r){return r.type==="Conditional"}e.is=t;function i(r){return{type:"Conditional",disabled:!1,inActions:new Lt,outActions:new Lt,condition:IR.distanceDefaultData(r)}}e.defaultData=i})(gG||(gG={}));var vG;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new Lt,drop:new Lt}})(vG||(vG={}));var RR;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new Lt})(RR||(RR={}));var OR;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(OR||(OR={}));var yG;(e=>{function t(r){return r.type==="MouseHover"}e.is=t;function i(){return{type:"MouseHover",disabled:!1,actions:new Lt}}e.defaultData=i})(yG||(yG={}));var xG;(e=>{function t(r){return r.type==="Scroll"}e.is=t;function i(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Lt}}e.defaultData=i})(xG||(xG={}));var bG;(e=>{function t(r){return r.type==="Start"}e.is=t;function i(){return{type:"Start",disabled:!1,actions:new Lt}}e.defaultData=i})(bG||(bG={}));var wG;(e=>{function t(r){return r.type==="Collision"}e.is=t;function i(){return{type:"Collision",disabled:!1,target:"character",actions:new Lt}}e.defaultData=i})(wG||(wG={}));var SG;(e=>{function t(r){return r.type==="Trigger"}e.is=t;function i(r,n){return{type:"Trigger",disabled:!1,target:"all",triggeringObjects:[],actions:new Lt,triggerZone:"box",position:n.toArray(),rotation:[0,0,0],size:r.toArray(),radius:r.length()/2,helperVisible:!0}}e.defaultData=i})(SG||(SG={}));var LR;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function t(a){return a.type==="Resize"}e.is=t;function i(a){return typeof a=="string"?a:"custom"}e.sizeToDevice=i;function r(a){return typeof a=="string"?[...e.defaultSizes[a]]:[...a]}e.deviceToSize=r;function n(){let a={size:"mobile",operator:"<",actions:new Lt},o={size:"tablet",operator:"<",actions:new Lt},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new Lt},c=new Lt;return c.push({id:wt.generateUUID(),fi:0,data:a},{id:wt.generateUUID(),fi:1,data:o},{id:wt.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:c}}e.defaultData=n;function s(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new Lt}}e.defaultBreakpointData=s})(LR||(LR={}));var kR;(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function t(r){return r.type==="VariableChange"}e.is=t;function i(){return{disabled:!1,type:"VariableChange",actions:new Lt,variableId:"",objectId:null,property:"Position X"}}e.defaultData=i})(kR||(kR={}));var _G;(e=>{function t(r){return r.type==="API"}e.is=t;function i(){return{disabled:!1,type:"API",successActions:new Lt,errorActions:new Lt,userAPIId:""}}e.defaultData=i})(_G||(_G={}));var EG;(e=>{function t(r){return r.type==="WEBHOOK"}e.is=t;function i(){return{disabled:!1,type:"WEBHOOK",actions:new Lt,userWebhookId:""}}e.defaultData=i})(EG||(EG={}));var AG;(e=>{function t(r){return r.type==="AIAssistantListener"}e.is=t;function i(){return{disabled:!1,type:"AIAssistantListener",actions:new Lt,analysis:"average",analysisRange:[0,71],analysisSingle:0}}e.defaultData=i})(AG||(AG={}));var TG;(e=>{function t(r){return r.type==="AIAssistantTrigger"}e.is=t;function i(){return{disabled:!1,description:"",type:"AIAssistantTrigger",actions:new Lt}}e.defaultData=i})(TG||(TG={}));var py="personal camera",Gx="a218fcc3-276b-49b9-b485-49037fd14f5f",EHe=2960946,Fo=5526619,Oh;(e=>{function t(g,v){return g[0]===v[0]&&g[1]===v[1]}e.isEqual=t;function i(g,v,x){return[g[0]+(v[0]-g[0])*x,g[1]+(v[1]-g[1])*x]}e.lerp=i;function r(g,v){return[g[0]+v[0],g[1]+v[1]]}e.add=r;function n(g,v){return[g[0]-v[0],g[1]-v[1]]}e.sub=n;function s(g,v){return[g[0]*v[0],g[1]*v[1]]}e.multiply=s;function a(g,v){return[g[0]/v[0],g[1]/v[1]]}e.divide=a;function o(g,v){return Math.pow(v[0]-g[0],2)+Math.pow(v[1]-g[1],2)}e.distanceSquared=o;function l(g,v){return Math.sqrt(o(g,v))}e.distance=l;function c(g,v){return g[0]*v[0]+g[1]*v[1]}e.dot=c;function u(g,v){return[g[0]*v,g[1]*v]}e.scalarMultiply=u;function h(g,v,x){let b=e.sub(v,g),S=e.sub(x,g),_=e.dot(b,S)/e.dot(b,b),A=e.scalarMultiply(b,_);return e.add(g,A)}e.projectionOnto=h;function f(g,v,x){return l(g,h(g,v,x))}e.projectionOntoDistance=f;function m(g,v){return[(g[0]+v[0])*.5,(g[1]+v[1])*.5]}e.center=m})(Oh||(Oh={}));var vm;(e=>{function t(l,c){return l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]}e.isEqual=t;function i(l,c){return[l[0]+c[0],l[1]+c[1],l[2]+c[2]]}e.add=i;function r(l,c){return[l[0]-c[0],l[1]-c[1],l[2]-c[2]]}e.sub=r;function n(l,c){return[l[0]/c[0],l[1]/c[1],l[2]/c[2]]}e.div=n;function s(l,c){return[l[0]*c[0],l[1]*c[1],l[2]*c[2]]}e.mul=s;function a(l,c){return Math.hypot(l[0]-c[0],l[1]-c[1],l[2]-c[2])}e.dist=a;function o(l,c,u){return[l[0]+(c[0]-l[0])*u,l[1]+(c[1]-l[1])*u,l[2]+(c[2]-l[2])*u]}e.lerp=o})(vm||(vm={}));var uT;(e=>{function t(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]}e.isEqual=t;function i(r,n,s){return[r[0]+(n[0]-r[0])*s,r[1]+(n[1]-r[1])*s,r[2]+(n[2]-r[2])*s,r[3]+(n[3]-r[3])*s]}e.lerp=i})(uT||(uT={}));var CG;(e=>{let t=180/Math.PI,i=Math.PI/180;function r(o){return typeof o=="number"?o*t:o}function n(o){return typeof o=="number"?o*i:o}function s(o){return[r(o[0]),r(o[1]),r(o[2])]}e.radToDeg=s;function a(o){return[n(o[0]),n(o[1]),n(o[2])]}e.degToRad=a})(CG||(CG={}));var Rv;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(n,s){for(let a=0;a<16;a++)if(n[a]!==s[a])return!1;return!0}e.isEqual=t;function i(n){return n??e.identity}e.simplify=i;function r(n,s){let a=s.slice(0);for(var o=0,l=s.length;o<l;o+=3){let c=n[3]*s[o]+n[7]*s[o+1]+n[11]*s[o+2]+n[15];a[o]=(n[0]*s[o]+n[4]*s[o+1]+n[8]*s[o+2]+n[12])/c,a[o+1]=(n[1]*s[o]+n[5]*s[o+1]+n[9]*s[o+2]+n[13])/c,a[o+2]=(n[2]*s[o]+n[6]*s[o+1]+n[10]*s[o+2]+n[14])/c}return a}e.applyMatrix4=r})(Rv||(Rv={}));var Zs;(e=>{function t(c){return typeof c=="object"&&typeof c.r=="number"&&typeof c.g=="number"&&typeof c.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function i(c){return{r:Math.round(c.r*255),g:Math.round(c.g*255),b:Math.round(c.b*255),a:1}}e.toRgb255a1=i;function r(c){return{r:c.r,g:c.g,b:c.b}}e.clone=r;function n(c){return c=Math.floor(c),{r:(c>>16&255)/255,g:(c>>8&255)/255,b:(c&255)/255}}e.fromHex=n;function s(c){return Math.round(c.r*255)*65536+Math.round(c.g*255)*256+Math.round(c.b*255)}e.toHex=s;function a(c,u){return c.r===u.r&&c.g===u.g&&c.b===u.b}e.equals=a;function o(c,u){return c.r.toFixed(2)===u.r.toFixed(2)&&c.g.toFixed(2)===u.g.toFixed(2)&&c.b.toFixed(2)===u.b.toFixed(2)}e.equalsFixed=o;function l(c,u,h){return{r:c.r+(u.r-c.r)*h,g:c.g+(u.g-c.g)*h,b:c.b+(u.b-c.b)*h}}e.lerp=l})(Zs||(Zs={}));var _r;(e=>{e.white={...Zs.white,a:1},e.transparent={...Zs.white,a:0};function t(l){return{r:l[0],g:l[1],b:l[2],a:l[3]}}e.from0to1=t;function i(l,c){return{...Zs.fromHex(l),a:c}}e.fromHexAndA=i;function r(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:l.a}}e.toRgb255a1=r;function n(l,c){return Zs.equals(l,c)&&l.a===c.a}e.equals=n;function s(l,c){return Zs.equalsFixed(l,c)&&l.a.toFixed(2)===c.a.toFixed(2)}e.equalsFixed=s;function a(l,c,u){return{r:l.r+(c.r-l.r)*u,g:l.g+(c.g-l.g)*u,b:l.b+(c.b-l.b)*u,a:l.a+(c.a-l.a)*u}}e.lerp=a;function o({r:l,g:c,b:u,a:h}=e.white){return`rgba(${l*255}, ${c*255}, ${u*255}, ${h})`}e.toStyle=o})(_r||(_r={}));var zR;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(zR||(zR={}));var AHe=(e=>(e[e.LINEAR=0]="LINEAR",e[e.EASE=1]="EASE",e[e.EASE_IN=2]="EASE_IN",e[e.EASE_OUT=3]="EASE_OUT",e[e.EASE_IN_OUT=4]="EASE_IN_OUT",e[e.CUBIC=5]="CUBIC",e[e.SPRING=6]="SPRING",e))(AHe||{}),BR;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(BR||(BR={}));var jR;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(jR||(jR={}));var Wd;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(Wd||(Wd={}));function MG(e){return typeof e=="string"&&e.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1}var Im;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(i){return e.all.includes(i)}e.is=t})(Im||(Im={}));var Ov;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(i){var r,n;return i.type==="PerspectiveCamera"?((r=i.perspective)==null?void 0:r.zoom)??1:((n=i.orthographic)==null?void 0:n.zoom)??1}e.getZoom=t})(Ov||(Ov={}));var af;(e=>{function t(r,n=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(r[0],r[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[r[0]+r[0]*n,0,0]},grid:{count:[2,2,2],size:r.map(s=>s*(1+n)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function i(r,n){let s={...r};if(Tre.forEach(a=>{Object.assign(s,{[a]:n[a]??r[a]})}),s.radial={...r.radial},n.radial){let a=r.radial,o=n.radial;Cre.forEach(l=>{Object.assign(s.radial,{[l]:o[l]??a[l]})})}if(s.linear={...r.linear},n.linear){let a=r.linear,o=n.linear;Mre.forEach(l=>{Object.assign(s.linear,{[l]:o[l]??a[l]})})}if(s.grid={...r.grid},n.grid){let a=r.grid,o=n.grid;Pre.forEach(l=>{Object.assign(s.grid,{[l]:o[l]??a[l]})})}if(s.toObject={...r.toObject},n.toObject){let a=r.toObject,o=n.toObject;Dre.forEach(l=>{Object.assign(s.toObject,{[l]:o[l]??a[l]})})}if(s.randomnessObject={...r.randomnessObject},n.randomnessObject){let a=r.randomnessObject,o=n.randomnessObject;Ire.forEach(l=>{Object.assign(s.randomnessObject,{[l]:o[l]??a[l]})})}return s}e.merge=i})(af||(af={}));var NR;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function i(r,n){let s=[];r.count!==void 0&&s.push({type:0,path:n,props:{count:r.count}});for(let a of t){let o=r[a];o&&Object.keys(o).length>0&&s.push({type:0,path:[...n,a],props:o})}return s}e.toOps=i})(NR||(NR={}));var Tre=["count"],Cre=["radius","start","end","position","scale","rotation"],Mre=["position","scale","rotation"],Pre=["count","size"],Dre=["count","position","scale","rotation"],Ire=["strength","scale","rotation","position","movement","seed","freqScale"],VR;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(i){return e.all.includes(i)}e.is=t})(VR||(VR={}));var UR;(e=>{function t(r){return i(r)}e.defaultData=t;function i(r){if(r==="PointLight")return{type:r,color:_r.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(r==="SpotLight")return{type:r,color:_r.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(r==="DirectionalLight")return{type:r,color:_r.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(UR||(UR={}));var hT;(e=>(e.defaultShapeData={type:"PlaneEmitterShape",size:[100,100,100]},e.defaultCollisionData={colliderEntityId:null,collisionBounce:.75},e.defaultData={renderMaterial:{type:"particleMaterial",color:{r:1,g:.2,b:.545,a:1},color2:{r:.945,g:.714,b:.184,a:1},coloring:"gradient",ease:"linearFadeOut",easeSize:"linearFadeOut",transparent:!0,size:[40,40],texture:"pt_default_particle",spriteRotation:[0,0]},birthRatePerSec:50,gravity:1,noiseStrength:0,noiseScale:0,noiseSeed:1,noiseType:"curl",randomRotation:0,randomScale:.2,randomMass:.5,rootObjectType:"instancedMesh",life:1,direction:[0,0,0],directionMode:"axis",speed:10,shape:e.defaultShapeData,autoPlay:!0,emitTimeDelay:0,emitTimeCycle:"infinity",emitTimeDuration:1,...e.defaultCollisionData}))(hT||(hT={}));var Lv;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(Lv||(Lv={}));var FR;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(i,r){return i.castShadow===r.castShadow&&i.receiveShadow===r.receiveShadow}e.equals=t})(FR||(FR={}));var HR;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(i,r){return i.flatShading===r.flatShading&&i.side===r.side&&i.wireframe===r.wireframe}e.equals=t})(HR||(HR={}));var GR;(e=>e.defaultData={...HR.defaultData,...FR.defaultData})(GR||(GR={}));var PG;(e=>{function t(i,r){var s,a;let n=[];if("material"in i){let o=typeof i.material=="string"?r.materials[i.material]??((s=r.lib.materials[i.material])==null?void 0:s.asset):i.material;o&&n.push(o)}else if("materials"in i)for(let o of i.materials){let l=typeof o=="string"?r.materials[o]??((a=r.lib.materials[o])==null?void 0:a.asset):o;l&&n.push(l)}return n}e.getMaterialData=t})(PG||(PG={}));var dT;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(dT||(dT={}));var DG;(e=>{function t(i){return i==="texture"||i==="video"||i==="color"||i==="depth"||i==="normal"||i==="gradient"||i==="noise"||i==="fresnel"||i==="rainbow"||i==="toon"||i==="outline"||i==="particle"||i==="transmission"||i==="matcap"||i==="displace"||i==="pattern"||i==="light"}e.is=t})(DG||(DG={}));function THe(e){return e.type!=="displace"}var IG;(e=>{function t(i){return i==="phong"||i==="toon"||i==="lambert"||i==="physical"}e.is=t})(IG||(IG={}));var Rre=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],CHe=["wrapping","image","video","name","minFilter","magFilter"],_s;(e=>{function t(s,a){let{texture:o,...l}=a;if(Object.assign(s,l),o){let c=s.texture;c&&Object.assign(c,o)}}e.patch=t;function i(s,a){return s==="light"&&a?r(a):n(s)}e.defaultData=i;function r(s){let a={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(s){case"phong":return{...a,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...a,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...a,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...a,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function n(s){let a={alpha:1,mode:0,isMask:!1,visible:!0};switch(s){case"texture":return{...a,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"video":return{...a,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:dT.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"color":return{...a,type:"color",color:Zs.fromHex(Fo)};case"depth":return{...a,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...a,type:"normal",cnormal:[1,1,1]};case"gradient":return{...a,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...a,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Zs.fromHex(6710886),a:1},colorB:{...Zs.fromHex(6710886),a:1},colorC:{...Zs.fromHex(16777215),a:1},colorD:{...Zs.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...a,type:"fresnel",color:_r.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...a,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...a,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:_r.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...a,type:"outline",outlineColor:_r.fromHexAndA(0,1),contourColor:_r.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...a,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006}};case"transmission":return{...a,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...a,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Zs.fromHex(0),a:1},colorB:{...Zs.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(_s||(_s={}));var Ms;(e=>{function t(u){return!u.layers.some(h=>h.data.type==="texture"&&h.data.projection!==0||h.data.type==="depth"&&!h.data.isWorldSpace||h.data.type==="noise"||h.data.type==="displace")}e.isMergable=t;function i(u){let h="";return u.layers.forEach(f=>{Object.entries(f.data).forEach(([m,g])=>{h+=`${m}${g}`,Array.isArray(g)?g.forEach(v=>h+=`${v}`):typeof g=="object"?Object.values(g).forEach(v=>{typeof v=="number"?h+=`${v.toFixed(4)}`:h+=`${v}`}):h+=`${g}`})}),h}e.getHash=i;function r(){return{layers:new Lt}}e.defaultEmptyData=r;function n(u="layer1",h="layer2"){return a("phong",u,h)}e.defaultData=n;function s(u,h){return{...u,name:h}}e.withName=s;function a(u,h="layer1",f="layer2"){let m=new Lt;return m.push({fi:0,data:_s.defaultData("light",u),id:h}),m.push({fi:1,data:_s.defaultData("color"),id:f}),{layers:m}}e.defaultTwoLayerData=a;function o(u){let h=_s.defaultData("texture");u&&Object.assign(h.texture,{image:u});let f=new Lt;return f.push({fi:0,data:h,id:"layer1"}),f.push({fi:1,data:{..._s.defaultData("transmission"),alpha:1},id:"layer2"}),f.push({fi:2,data:{..._s.defaultData("light","lambert"),alpha:0},id:"layer3"}),{layers:f}}e.defaultUIObjectMaterial=o;function l(u,h="phong",f="layer1",m="layer2"){let g=_s.defaultData("texture");Object.assign(g.texture,{image:u});let v=new Lt;return v.push({fi:0,data:g,id:f}),v.push({fi:1,data:_s.defaultData("light",h),id:m}),{layers:v}}e.defaultTwoLayerTextureData=l;function c(u,h="phong",f="layer1",m="layer2"){let g=_s.defaultData("video");Object.assign(g.texture,{video:u});let v=new Lt;return v.push({fi:0,data:g,id:f}),v.push({fi:1,data:_s.defaultData("light",h),id:m}),{layers:v}}e.defaultTwoLayerVideoTextureData=c})(Ms||(Ms={}));var fT;(e=>{function t(){return{points:new Lt,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(fT||(fT={}));var pT;(e=>{function t(){return{points:new Lt,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=t})(pT||(pT={}));var Ore={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},WR;(e=>{function t(i,r){let n={...i};return kre.forEach(s=>{Object.assign(n,{[s]:r[s]??i[s]})}),n}e.merge=t})(WR||(WR={}));var Lre={shape:Ore,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},kre=["depth","offset","angle","twist","startScale","endScale"],mT;(e=>{function t(r){return r==="PolygonGeometry"||r==="RectangleGeometry"||r==="StarGeometry"||r==="TriangleGeometry"||r==="EllipseGeometry"||r==="UIGeometry"}e.is2DParametricMesh=t;function i(r){return r==="PolygonGeometry"||r==="PolygonGeometry"||r==="RectangleGeometry"||r==="StarGeometry"||r==="TriangleGeometry"||r==="EllipseGeometry"||r==="PathGeometry"||r==="VectorGeometry"||r==="ConeGeometry"||r==="CubeGeometry"||r==="CylinderGeometry"||r==="DodecahedronGeometry"||r==="HelixGeometry"||r==="IcosahedronGeometry"||r==="LatheGeometry"||r==="PyramidGeometry"||r==="SphereGeometry"||r==="PlaneGeometry"||r==="BackdropGeometry"||r==="TorusGeometry"||r==="TorusKnotGeometry"||r==="BooleanGeometry"||r==="TextGeometry"||r==="InputGeometry"}e.isParametricMesh=i})(mT||(mT={}));var qR;(e=>{function t(i,r){let n={...i};return Object.assign(n,r),n.type==="PathGeometry"&&"extrusion"in r&&r.extrusion&&(n.extrusion={...i.extrusion},Object.assign(n.extrusion,WR.merge(n.extrusion,r.extrusion))),n}e.merge=t})(qR||(qR={}));var Xd;(e=>{function t(i){if(i==="RectangleGeometry")return{width:320,height:320,type:i,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="UIGeometry")return{type:i,frame:"",cornerRadius:[0,0,0,0],cornerType:0,width:1,height:1};if(i==="PathGeometry")return{type:i,width:1,height:1,depth:1,path:pT.defaultData(),extrusion:Lre};if(i==="VectorGeometry")return{width:1,height:1,type:i,subdivisions:12,shape:fT.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="BooleanGeometry")return{type:i,operation:2,width:0,height:0,depth:0,phongAngle:35};if(i==="ShapeBlendGeometry")return{type:i,width:0,height:0,depth:0,resolutionLevel:6,blendRange:100,useChildrenColors:!1};if(i==="TextGeometry")return{type:i,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",editable:!1,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="InputGeometry")return{...e.defaultData("TextGeometry"),type:i,editable:!0};if(i==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}e.defaultData=t})(Xd||(Xd={}));var S4=["width","height","depth"],XR;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:Zs.white,near:.1,far:2e3})(XR||(XR={}));var gT;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focusDistance:100,focalLength:20,bokehScale:5},noise:{...t,blendFunction:16}}})(gT||(gT={}));var YR;(e=>e.defaultData={softShadowQuality:"low"})(YR||(YR={}));var QR;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(QR||(QR={}));var KR;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(KR||(KR={}));var kv;(e=>e.defaultData={usePhysics:!1,gravity:-10})(kv||(kv={}));var ZR;(e=>e.defaultData={playCamera:py,gameControlObject:null})(ZR||(ZR={}));var $R;(e=>e.defaultData={backgroundColor:_r.fromHexAndA(EHe,1),postprocessing:gT.defaultData,fog:XR.defaultData,globalPhysics:kv.defaultData,ambient:QR.defaultData,ao:KR.defaultData,shadow:YR.defaultData,publish:ZR.defaultData})($R||($R={}));var JR;(e=>e.defaultData={colliderType:"box",size:[100,100,100],colliderHelperVisible:!0,forceType:"collider",forceRange:"global",forceIntensity:.5,forceDambing:.95})(JR||(JR={}));var RG;(e=>{function t(r){return r==="Component"||r==="Instance"}e.isComponentRelated=t;function i(r){return r==="Empty"||r==="Instance"}e.isEmptyOrComponent=i})(RG||(RG={}));var zv;(e=>{e.identity={...zR.identity,hiddenMatrix:Rv.identity};function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function i(n,s){return{position:(s==null?void 0:s.position)||n.position,rotation:(s==null?void 0:s.rotation)||n.rotation,scale:(s==null?void 0:s.scale)||n.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||n.hiddenMatrix}}e.merge=i;function r(n,s){return Zie({position:vm.isEqual(n.position,s.position)?void 0:s.position,rotation:vm.isEqual(n.rotation,s.rotation)?void 0:s.rotation,scale:vm.isEqual(n.scale,s.scale)?null:s.scale,hiddenMatrix:Rv.isEqual(n.hiddenMatrix,s.hiddenMatrix)?void 0:s.hiddenMatrix})}e.diff=r})(zv||(zv={}));var ls;(e=>e.defaultData={states:new Lt,events:new Lt,visible:!0,raycastLock:!1,physics:Lv.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...zv.identity,cloner:null})(ls||(ls={}));var eO;(e=>e.defaultData={type:"Empty",...ls.defaultData})(eO||(eO={}));var OG;(e=>e.defaultData={type:"ParticleCollider",...JR.defaultData,...ls.defaultData})(OG||(OG={}));var LG;(e=>e.defaultData={type:"Component",...ls.defaultData})(LG||(LG={}));var kG;(e=>e.defaultData={type:"Particle",...ls.defaultData,...hT.defaultData})(kG||(kG={}));var Yd;(e=>e.defaultData={type:"Mesh",...ls.defaultData,...GR.defaultData})(Yd||(Yd={}));var Hb;(e=>e.defaultData={...ls.defaultData,...zv.identity,position:[0,0,Ov.DefaultTargetOffset],...Ov.defaultData})(Hb||(Hb={}));var tO;(e=>{function t(i){return{...ls.defaultData,...UR.defaultData(i)}}e.defaultData=t,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(tO||(tO={}));var vT;(e=>{function t(r,n,s=0){for(;s<n.length;){let a=r?r[n[s]]:void 0;if(n.length===s+1)return a;if(a)r=a.descendants,s+=1;else return}}e.resolveWithDes=t;function i(r,n,s=0){let a=t(r,n,s);if(a){let o=Object.keys(a);if(o.length===1&&o[0]==="descendants")return}return a}e.resolve=i})(vT||(vT={}));var of;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(r,n){return{...ls.defaultData,...n,component:r,overrides:new qn,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=t;function i(r){let n=zv.fromObject(r.data);return t(r.id,n)}e.fromComponentData=i})(of||(of={}));var Bv;(e=>{e.defaultData={type:"Page",...ls.defaultData,physics:{...Lv.defaultData,fusedBody:!1},...$R.defaultData,camera:Hb.defaultData};function t(i){return i.uiScene!==void 0}e.isUIPage=t})(Bv||(Bv={}));var iO;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Rv.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:Lv.defaultData,states:new Lt,events:new Lt,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...Ov.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...ls.defaultData,...Yd.defaultData,geometry:Xd.defaultData("RectangleGeometry"),material:Ms.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...ls.defaultData,...Yd.defaultData,geometry:Xd.defaultData("BooleanGeometry"),material:Ms.defaultTwoLayerData("phong","layer1","layer2")},e.defaultShapeBlendObject={name:"Shape Blend",...ls.defaultData,...Yd.defaultData,geometry:Xd.defaultData("ShapeBlendGeometry"),material:Ms.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...ls.defaultData,...Yd.defaultData,geometry:Xd.defaultData("TextGeometry"),material:Ms.defaultTwoLayerData("phong","layer1","layer2")},e.defaultInputObject={name:"Input",...ls.defaultData,...Yd.defaultData,geometry:Xd.defaultData("InputGeometry"),material:Ms.defaultTwoLayerData("phong","layer1","layer2")}))(iO||(iO={}));var Jp;(e=>{function t(s,a){let o={name:a};return s.type==="Mesh"?(o.geometry={},"material"in s&&(o.material={layers:new qn}),"materials"in s&&(o.materials=s.materials.map(l=>({layers:new qn})))):Im.is(s.type)&&(o.perspective={},o.orthographic={}),o}e.newEmpty=t;function i(s,a){if(a===void 0)return s;let o={...s};return"material"in o&&"material"in a&&a.material&&(o.material=Fb(o.material,l=>{if(typeof l!="string")for(let[c,u]of Object.entries(a.material.layers)){let h=l.layers.data(c);h&&_s.patch(h,u)}}).data),o.materials&&a.materials&&(o.materials=Fb(o.materials,l=>{var c,u;for(let h=0;h<o.materials.length;h++){let f=a.materials[h];if(typeof f!="string")for(let[m,g]of Object.entries(f.layers)){let v=(u=(c=l[h])==null?void 0:c.layers)==null?void 0:u.data(m);v&&_s.patch(v,g)}}}).data),o}function r(s,a){let o,l=[],c={orthographic:0,perspective:0,geometry:0};function u(h,f){for(let[m,g]of Object.entries(f.layers)){let{texture:v,...x}=g;if(v!==void 0&&Object.keys(v).length>0){let b={path:[...h,"layers",m,"texture"],props:v,type:0};l.push(b)}if(Object.keys(x).length>0){let b={path:[...h,"layers",m],props:x,type:0};l.push(b)}}}for(let[h,f]of Object.entries(a))if(h!=="name")if(h==="cloner")l.push(...NR.toOps(f,["cloner"]));else if(h==="pathSnapping")l.push({path:[h],props:{slide:f.slide,offset:f.offset},type:0});else if(h==="material")u(["material"],f);else if(h==="materials")for(let[m,g]of Object.entries(f))u(["materials",m],g);else if(c[h]===0){if(h==="geometry"&&f.extrusion!==void 0){let m={path:[h,"extrusion"],props:f.extrusion,type:0};l.push(m),f={...f},delete f.extrusion}if(Object.keys(f).length>0){let m={path:[h],props:f,type:0};l.push(m)}}else o===void 0&&(o={path:[],props:{},type:0},l.push(o)),o.props[h]=f;return l}e.toOps=r;function n(s,a){var l,c,u,h,f,m;if(a===void 0)return s;let o={...s};if(Object.assign(o,zv.merge(o,a)),Object.assign(o,{pathSnapping:Object.assign({},o.pathSnapping,{slide:((l=a.pathSnapping)==null?void 0:l.slide)??((c=o.pathSnapping)==null?void 0:c.slide)??0,offset:((u=a.pathSnapping)==null?void 0:u.offset)??((h=o.pathSnapping)==null?void 0:h.offset)??0})}),Im.is(s.type)){o.orthographic={...o.orthographic},o.perspective={...o.perspective};let g=a;((f=g.orthographic)==null?void 0:f.zoom)!==void 0&&(o.orthographic.zoom=g.orthographic.zoom),((m=g.perspective)==null?void 0:m.zoom)!==void 0&&(o.perspective.zoom=g.perspective.zoom),g.isUpVectorFlipped!==void 0&&(o.isUpVectorFlipped=g.isUpVectorFlipped),g.targetOffset!==void 0&&(o.targetOffset=g.targetOffset)}else if(s.type==="Mesh")"geometry"in a&&Object.assign(o,{geometry:qR.merge(o.geometry,a.geometry)}),(a.material||a.materials)&&(o=i(o,a)),o.cloner&&"cloner"in a&&Object.assign(o,{cloner:af.merge(o.cloner,a.cloner)});else if(s.type==="Empty")o.cloner&&"cloner"in a&&Object.assign(o,{cloner:af.merge(o.cloner,a.cloner)});else if(VR.is(s.type)){let g=a;g.intensity!==void 0&&(o.intensity=g.intensity),g.color!==void 0&&(typeof g.color=="string"?o.color=g.color:o.color=Zs.clone(g.color))}return o}e.patch=n})(Jp||(Jp={}));var yT;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(yT||(yT={}));var lf;(e=>e.defaultData={orbitControls:yT.defaultData,playPage:Gx,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,i)=>{let r=0,n=0;return i<5?n=-30:i<10&&(n=30),i===0||i===10||i===5?r=30:(i===4||i===11||i===9)&&(r=-30),[120,[r,n],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1,imageQuality:70}},stopRaycast:!0,hdTransmission:!1})(lf||(lf={}));var rO;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(rO||(rO={}));var nO;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(nO||(nO={}));var em;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...rO.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:nO.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(em||(em={}));var Gb;(e=>{function t(r){return r.find(n=>n.data.type==="Page"&&n.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=t;function i(r,n,s){r.scene.objects.traverseFrom(n,(a,o)=>{var l;if(o.type==="Instance"){let c=(l=wT.getComponentData(r,o.component))==null?void 0:l.data;c&&s(a,o,c.events)}else s(a,o,o.events)})}e.traverseModuleInstances=i})(Gb||(Gb={}));var tm;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222",e.defaultLight={fi:-1,data:tO.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]};function t(n=!0,s=[]){let a=[],o=iO.defaultMeshObject;n&&(a.push({...e.defaultLight}),a.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:o,children:[]})),a.push(...s);let l=new ea;return l.push({fi:1,id:Gx,data:{...Bv.defaultData,name:"Scene 1"},children:a}),l}e.createDefaultObjectTreeWithPage=t,e.defaultData={objects:t(),publish:lf.defaultData,styles:em.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new ea,publish:lf.defaultData,styles:em.defaultData()}},e.emptyDataWithPage=function(n=!0){return{objects:t(n),publish:lf.defaultData,styles:em.defaultData()}},e.emptyData=function(){return{objects:new ea,publish:{...lf.defaultData},styles:em.defaultData()}};function i(n){return{...e.defaultData,objects:Tl(n,ea.prototype)}}e.withObjs=i;function r(n,s){return i([{id:n,data:s,children:[],fi:0}])}e.withObj=r})(tm||(tm={}));var Wx;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(Wx||(Wx={}));var sO;(e=>(e.defaultData=t=>({url:t,name:"New Webhook",parametersSchemas:new Lt}),e.defaultParameterValueByType=t=>t==="number"?0:t==="boolean"?!1:""))(sO||(sO={}));var zG;(e=>e.defaultData=(t,i="GET")=>({url:t,method:i,name:"New API",headers:new Lt,queries:new Lt,autoStart:!0}))(zG||(zG={}));var ta;(e=>{function t(a){return a.textValue!==void 0}e.isTextValue=t;function i(a){return typeof a=="number"}e.isNumber=i;function r(a){return typeof a=="boolean"}e.isBoolean=r;function n(a){return t(a)?"string":r(a)?"boolean":"number"}e.typeOfVariable=n;function s(a){return e.isTextValue(a)?Array.isArray(a.textValue)?a.textValue.map(o=>o.toString().padStart(a.padding??2,"0")).join(a.deliminator??":")+(a.suffix!==void 0?" "+a.suffix:""):a.textValue.toString():e.isBoolean(a)?a?"True":"False":e.isNumber(a)?parseFloat(a.toFixed(3)).toString():a.toString()}e.getDisplayedValue=s})(ta||(ta={}));var aO;(e=>e.all=["images","videos","colors","audios","particles","fonts","materials","variables"])(aO||(aO={}));var BG;(e=>e.all=[...aO.all,"components"])(BG||(BG={}));var jG;(e=>{function t(){return{images:new Wt,videos:new Wt,colors:new Wt,audios:new Wt,particles:new Wt,fonts:new Wt,materials:new Wt,components:new Wt,variables:new Wt,userAPIs:new Wt,userWebhooks:new Wt}}e.defaultData=t})(jG||(jG={}));var Kh;(e=>{function t(){return{images:new Wt,videos:new Wt,colors:new Wt,audios:new Wt,particles:new Wt,fonts:new Wt,materials:new Wt,components:new Wt,variables:new Wt,userAPIs:new Wt,userWebhooks:new Wt}}e.defaultData=t})(Kh||(Kh={}));var dl;(e=>{function t(){let a={};return a["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},Tl(a,Wt.prototype)}e.defaultColors=t;function i(){return Tl({},Wt.prototype)}e.defaultImages=i;function r(){return{catelogs:new Wt,materials:new Wt,images:new Wt,videos:new Wt,colors:new Wt,audios:new Wt,particles:new Wt,fonts:new Wt,variables:new Lt,userAPIs:new Wt,userWebhooks:new Wt,lib:Kh.defaultData()}}e.emptyData=r;function n(a){switch(a){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let o=[0,0,0];return{name:"Time",value:{textValue:o,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:o,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",a)}}e.defaultVariables=n;function s(a,o){if(o.format==="HH:mm:ss"){let l=Math.floor(a/3600),c=Math.floor((a-l*3600)/60),u=Math.round(a-l*3600-c*60);return{textValue:[l,c,u]}}else if(o.format==="mm:ss"){let l=Math.floor(a/60),c=Math.round(a-l*60);return{textValue:[l,c]}}else return o.format==="number"?a=Math.round(a):a=Math.round(a*1e3)/1e3,a}e.getFormattedTimerTime=s})(dl||(dl={}));var xT;(e=>e.list=["idle","move","jump","run"])(xT||(xT={}));var bT;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"],["run","⇧"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Lt,move:new Lt,jump:new Lt,run:new Lt},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:_r.fromHexAndA(3728051,1)}}))(bT||(bT={}));function NG(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let i=t.colorA,r=t.colorB,n=[[i.r,i.g,i.b,i.a],[r.r,r.g,r.b,r.a]],s=[0,1];for(let o=2;o<10;o++)n.push(n[1]),s.push(1);let a={...bu(Cn(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:n,steps:s,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,a)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let i={...Cn(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,i)}})}function Qd(e,t){Object.values(e.shared.materials).forEach(i=>t(i))}function Kd(e,t){e.scene.objects.traverse((i,r)=>{"materials"in r?r.materials.forEach((n,s)=>{n===void 0&&(r.materials[s]=Ms.defaultData(),n=r.materials[s]),typeof n!="string"&&t(n)}):"material"in r?typeof r.material!="string"&&(r.material===void 0&&(r.material=Ms.defaultData()),t(r.material)):r.type==="Mesh"&&(r.material===void 0&&(r.material=Ms.defaultData()),t(r.material)),"overrides"in r&&Object.values(r.overrides).forEach(n=>{n.material&&typeof n.material!="string"&&Object.getPrototypeOf(n.material)!==qn.prototype&&t(n.material)})})}function MHe(e){Object.assign(e.scene.publish,{orbitControls:{...yT.defaultData,...Cn(e.scene.publish.orbitControls)}})}function PHe(e){Object.assign(e.scene.publish.settings,{video:{...lf.defaultData.settings.video,...Cn(e.scene.publish.settings.video)}})}function DHe(e){function t(i){if(i.layers){for(let r of Object.values(i.layers))if(r){for(let[n,s]of Object.entries(r))if((Rre.includes(n)||typeof s=="boolean")&&delete r[n],n==="texture")for(let[a,o]of Object.entries(s))(CHe.includes(a)||typeof o=="boolean")&&delete s[a]}}}e.scene.objects.traverse((i,r)=>{r.states.forEach(n=>{let s=n;s.material?t(s.material):s.materials&&s.materials.forEach(a=>{t(a)})})})}function IHe(e){e.scene.publish.withBackground=!0}function RHe(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function OHe(e){e.scene.objects.traverse((t,i)=>{let r=i.cloner;r&&(r.radial.scale=r.radial.scale.map(n=>n+1),r.linear.scale=r.linear.scale.map(n=>n+1))})}function LHe(e){e.scene.objects.traverse((t,i)=>{let r=i.geometry;r&&(r.type==="DodecahedronGeometry"||r.type==="IcosahedronGeometry")&&(r.detail=Math.round(r.detail))})}function kHe(e){e.scene.objects.traverse((t,i)=>{let r=e.scene.objects.unproxy().parent(t);if(r){let n=Cn(e.scene.objects.data(r));n&&n.type==="Mesh"&&n.geometry.type==="BooleanGeometry"&&i.type==="Mesh"&&(i.visible=Cn(i).booleanExclude!==!0)}})}function zHe(e){e.scene.objects.traverse((t,i)=>{if(i.type==="Mesh"){let r=i;i.geometry.type==="NonParametricGeometry"?r.material!==void 0&&delete r.material:r.materials!==void 0&&delete r.materials}})}function BHe(e){function t(r){Object.setPrototypeOf(r,qn.prototype),r.texture&&Object.setPrototypeOf(r.texture,qn.prototype)}function i(r){Object.setPrototypeOf(r,qn.prototype);for(let n in r)t(r[n])}e.scene.objects.traverse((r,n)=>{n.states.forEach(s=>{let a=s;if(a.material){let o=Cn(a.material).layers;i(o),a.material.layers=o}if(a.materials)for(let o=0;o<a.materials.length;o++){let l=a.materials[o],c=Cn(l).layers;i(c),l.layers=c}})})}function VG(e){e.layers===void 0&&Object.assign(e,Ms.defaultTwoLayerData("lambert"))}function _4(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let i=[...t.colors];i.push(t.colors[9]);let r=[...t.steps];r.push(t.steps[9]);let n={...Cn(t),colors:i,steps:r};Object.assign(t,n)}})}function jHe(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&(i.geometry.type==="BooleanGeometry"||i.geometry.type==="SubdivGeometry")&&(i.geometry.phongAngle=35)})}function UG(e){e.scene.objects.traverse((t,i)=>{"materials"in i?i.materials.forEach(r=>{typeof r!="string"&&_4(r)}):"material"in i&&typeof i.material!="string"&&_4(i.material)}),Object.values(e.shared.materials).forEach(t=>_4(t))}function NHe(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,i)=>{(i.type==="DirectionalLight"||i.type==="SpotLight")&&(i.shadowResolution=1024,i.shadowRadius=1,i.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function VHe(e){e.shared.audios=Tl({},Wt.prototype)}function UHe(e){e.shared.videos=Tl({},Wt.prototype)}function FHe(e){let t=e.shared.materials;Object.entries(t).forEach(([i,r])=>{if(!r.layers){let n={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[i]:n})}})}function HHe(e){Object.entries(Cn(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(Cn(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function GHe(e){e.scene.publish.settings.web.preload=!1}function FG(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function HG(e){e.layers&&e.layers.forEach(t=>{THe(t)&&t.isMask===void 0&&(t.isMask=!1),(t.type==="texture"||t.type==="video")&&t.blending===void 0&&(t.blending=0),(t.type==="noise"||t.type==="displace"&&t.displacementType==="noise")&&(t.voronoiStyle===void 0&&(t.voronoiStyle=0),t.highCut===void 0&&(t.highCut=1),t.lowCut===void 0&&(t.lowCut=0),t.smoothness===void 0&&(t.smoothness=.3),t.seed===void 0&&(t.seed=0),t.quality===void 0&&(t.quality=1))})}function WHe(e){e.shared.fonts=Tl({},Wt.prototype)}function qHe(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function XHe(e){let t=[];e.scene.objects.traverse((i,r)=>{let n=r;if(n.type==="TextFrame"){let s=Ms.defaultTwoLayerData("phong"),a=typeof n.color=="string"?e.shared.colors[n.color]:n.color;s.layers[1].data.color={r:a.r,g:a.g,b:a.b},s.layers[1].data.alpha=n.alpha;let o=qHe(n.font);e.shared.fonts[o]===void 0&&(e.shared.fonts[o]={name:o});let l={name:n.name,...ls.defaultData,...Yd.defaultData,flatShading:!1,wireframe:!1,geometry:{...Xd.defaultData("TextGeometry"),width:n.width,height:n.height,font:o,depth:0,horizontalAlign:n.horizontalAlign,verticalAlign:n.verticalAlign,fontSize:n.fontSize*1.40625,lineHeight:n.lineHeight/1.40625,letterSpacing:n.letterSpacing-1,text:n.text,textTransform:n.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:s,states:Cn(n.states),events:Cn(n.events),visible:n.visible,raycastLock:n.raycastLock,position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix},c=Cn(e.scene.objects).parent(i);e.scene.objects.insertAfter(c??null,i,[{id:i+"new",data:l,children:[]}]),t.push(i)}}),t.forEach(i=>{e.scene.objects.delete(i)})}function YHe(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((i,r)=>{r.events.forEach(n=>{if(t[Number(n.type)])if(Object.assign(n,{type:t[Number(n.type)]}),n.type==="Audio"&&"audioEvent"in n&&(Object.assign(n,{playAudio:n.audioEvent}),delete n.audioEvent),n.type==="GameControl")Object.assign(n,{gameActions:{idle:new Lt,move:new Lt,jump:new Lt}});else{let s=new Lt;Object.assign(n,{actions:s}),(n.type==="MouseDown"||n.type==="MouseUp"||n.type==="KeyDown"||n.type==="KeyUp")&&"url"in n&&s.push({fi:0,id:wt.generateUUID(),data:{type:"Link",url:n.url,delay:0}}),"targets"in n&&(n.targets.forEach((a,o,l)=>{let c={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},u={easing:a.easing,duration:a.duration};a.easing===6?Object.assign(u,bu(a,"mass","stiffness","damping","velocity")):a.easing===5&&Object.assign(u,{control1:{...a.control1},control2:{...a.control2}});let h={repeat:a.repeat?-1:0,delay:a.delay,delayDirection:a.delayDirection,direction:a.cycle&&a.rewind?"pingpong-rewind":a.cycle?"pingpong":"normal"},f={state:a.state,...h,...u},m={allowSlerp:!0,type:"Transition",object:a.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Lt({fi:0,id:wt.generateUUID(),data:c},{fi:1,id:wt.generateUUID(),data:f})};s.push({fi:l,id:o,data:m})}),delete n.targets)}})})}function QHe(e){e.scene.objects.traverse((t,i)=>{function r(n,s){var l;let a=new Lt,o=[];if(i.events.forEach((c,u,h)=>{if(c.type==="Audio"&&c.trigger===s){let f;o.push(u),c.interaction==="play"?f={...bu(c,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in c?c.after:void 0,toggle:"after"in c?c.toggle:void 0,type:"Audio"}:(c.interaction==="pause"||c.interaction==="stop")&&(f={...bu(c,"interaction","delay","object","playAudio"),type:"Audio"}),f&&a.push({fi:h,id:u,data:f})}}),o.forEach(c=>i.events.delete(c)),a.length){let c=(l=i.events.find(u=>u.type===n))==null?void 0:l.data;c?"actions"in c&&c.actions.insertBefore(null,a):i.events.insertBefore(null,[{id:wt.generateUUID(),data:{type:n,actions:a}}])}}r("Start","start"),r("MouseDown","mouseDown"),r("MouseUp","mouseUp"),r("KeyDown","keyDown"),r("KeyUp","keyUp")})}function GG(e){var i;let t=(i=e.layers.find(r=>r.type==="light"))==null?void 0:i.data;if((t==null?void 0:t.category)==="basic"){let r=_s.defaultData("light","phong"),n=t;Object.assign(n,r),n.visible=!1}}function WG(e){Qd(e,GG),Kd(e,GG)}function KHe(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(i.geometry.scaleBaked||(i.geometry.scaleBaked=[1,1,1]))})}function ZHe(e){e.scene.objects.traverse((t,i)=>{(i.type==="Empty"||i.type==="Mesh")&&i.cloner&&!i.cloner.randomnessObject&&!i.cloner.toObject&&!i.cloner.randomness&&(i.cloner={...i.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function $He(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&i.geometry.type==="NonParametricGeometry"&&!("material"in i)&&!("materials"in i)&&(i.material=Ms.defaultTwoLayerData("phong"))})}function JHe(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,i)=>{(i.type==="OrthographicCamera"||i.type==="PerspectiveCamera")&&(i.orthographic.autoZoom===void 0&&(i.orthographic.autoZoom=!1),i.orthographic.autoZoomFrustumSize===void 0&&(i.orthographic.autoZoomFrustumSize=790))})}function eGe(e){e.scene.objects.traverse((t,i)=>{i.pathSnapping===void 0&&(i.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),i.pathSnapping.offset===void 0&&(i.pathSnapping.offset=0)})}function tGe(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function iGe(e){let{video:t}=e.scene.publish.settings;t.format==="gif"&&t.fps>48&&(t.fps=15)}function rGe(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&(r.resetYPosition=Math.abs(r.resetYPosition-i.position[1]))})})}function nGe(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((i,r)=>{t&&r.physics===null?r.collision=!1:r.collision="visibility"})}function sGe(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&(r.navmesh=bT.defaultDataThirdPerson.navmesh)})})}function aGe(e){e.scene.styles||(e.scene.styles=em.defaultData())}function qG(e){e.layers.forEach(t=>{t.type==="light"&&t.category!=="toon"&&t.occlusion===void 0&&(t.occlusion=!0)})}function oGe(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),Kd(e,qG),Qd(e,qG)}function lGe(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&Object.assign(r.gameActions,{run:new Lt})})})}function cGe(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&(r.keyAssignments=[...r.keyAssignments,["run","⇧"],["none","Ctrl"]])})})}function XG(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.bumpMapIntensity===void 0&&(t.bumpMapIntensity=5)})}function uGe(e,t){if(t<1&&(Kd(e,NG),Qd(e,NG),e.schema=1),t<2&&(MHe(e),e.schema=2),t<3&&(DHe(e),e.schema=3),t<4&&(IHe(e),e.schema=4),t<5&&(RHe(e),e.schema=5),t<6&&(OHe(e),e.schema=6),t<7&&(LHe(e),e.schema=7),t<8&&(e.schema=8),t<9&&(UG(e),e.schema=9),t<10&&(jHe(e),e.schema=10),t<11&&(NHe(e),e.schema=11),t<12&&(UG(e),e.schema=12),t<13&&(VHe(e),e.schema=13),t<14&&(FHe(e),e.schema=14),t<15&&(HHe(e),e.schema=15),t<16&&(GHe(e),e.schema=16),t<17&&(Kd(e,FG),Qd(e,FG),e.schema=17),t<18&&(Kd(e,VG),Qd(e,VG),e.schema=18),t<19&&(PHe(e),e.schema=19),t<20&&(WHe(e),XHe(e),e.schema=20),t<21&&(YHe(e),QHe(e),e.schema=21),t<22&&(WG(e),e.schema=22),t<23&&(KHe(e),e.schema=23),t<24&&(ZHe(e),e.schema=24),(t<25||e.shared.videos===void 0)&&(UHe(e),t<25&&(e.schema=25)),t<26&&(kHe(e),e.schema=26),t<27&&(zHe(e),e.schema=27),t<28&&(WG(e),e.schema=28),t<29&&(BHe(e),e.schema=29),t<30&&($He(e),e.schema=30),t<31&&(JHe(e),e.schema=31),t<33&&(eGe(e),e.schema=33),t<34&&(tGe(e),e.schema=34),t<35&&(iGe(e),e.schema=35),t<36&&(rGe(e),e.schema=36),t<37&&(nGe(e),e.schema=37),t<38&&(Kd(e,HG),Qd(e,HG),e.schema=38),t<39&&(sGe(e),e.schema=39),t<40&&(aGe(e),e.schema=40),t<41&&(oGe(e),e.schema=41),t<42&&(lGe(e),e.schema=42),t<43&&(cGe(e),e.schema=43),t<99){Kd(e,XG),Qd(e,XG),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=py);let i=Cn(e.scene.objects),r=e.scene.objects;e.scene.publish.playPage=Gx,r.insertBefore(null,null,[{id:Gx,data:{...Bv.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:bu(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:bu(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...kv.defaultData,...bu(e.scene.environment,"usePhysics","gravity")},camera:Cn(e.scene.ownerCamera)??Bv.defaultData.camera,name:"Scene"},children:[]}]);for(let a of i)a.id!==tm.TRASH_CAN_ID&&r.move(Gx,a.fi,a.id);let n=0,s=0;e.shared.penumbraSize&&e.scene.objects.traverse((a,o)=>{o.type==="DirectionalLight"?(o.penumbraSize=e.shared.penumbraSize[Math.min(n,2)],n+=1):o.type==="SpotLight"&&(o.penumbraSize=e.shared.penumbraSize[3+Math.min(s,1)],s+=1),(o.physics===void 0||o.physics===null)&&o.type!=="Instance"&&(o.physics={},Object.assign(o.physics,Lv.defaultData)),o.physics!==void 0&&o.physics!==null&&(o.physics.enabled=o.collision??"visibility",delete o.collision)}),e.schema=99}}function YG(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.alphaOverride===void 0&&(t.alphaOverride=1)})}function hGe(e){e.scene.objects.traverse((t,i)=>{let r=i.geometry;r&&r.type==="PathGeometry"&&(r.extrusion.capType="flat",r.extrusion.bevel=50,r.extrusion.bevelSides=6,r.extrusion.shape.type==="Custom"&&(r.extrusion.shape.shapeQuality="low"))})}function dGe(e){var t;Array.isArray(Cn(e.events))&&((t=e.events)==null||t.forEach(i=>{"disabled"in i||(i.disabled=!1),(i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress")&&(i.mode=i.mode||"Object")}))}var M0=180/Math.PI;function QG(e){e.rotation=e.rotation.slice(0,3).map(t=>t*M0)}function zre(e){var i,r;QG(e),e.type==="Page"&&QG(e.camera),(i=e.states)==null||i.forEach(n=>{n.rotation===void 0||n.rotation===null||(n.rotation=n.rotation.slice(0,3).map(s=>s*M0))});let t=e.geometry;t&&t.type==="SphereGeometry"&&(t.thetaLength=(t.thetaLength??180)*M0),t&&t.type==="TorusGeometry"&&(t.arc=t.arc*M0),t&&t.type==="PathGeometry"&&(t.extrusion.angle*=M0,t.extrusion.twist*=M0),e.type==="Mesh"&&e.geometry.type==="TextGeometry"&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(Cn(e.events))&&((r=e.events)==null||r.forEach(n=>{(n.type==="MouseDown"||n.type==="MouseUp"||n.type==="MousePress"||n.type==="KeyDown"||n.type==="KeyUp"||n.type==="KeyPress"||n.type==="Collision"||n.type==="Trigger")&&(n.runMode=n.toggle?"Toggle":"Repeat")}))}function fGe(e){e.shared.variables=Tl({},Wt.prototype)}function pGe(e){let t=Cn(e.shared.variables);e.shared.variables=Tl(Object.entries(t??{}).map(([i,r],n)=>({fi:n,id:i,data:r})),Lt.prototype)}var _h=115;function Bre(e,t){t(e.data);for(let i of e.children)Bre(i,t)}function mGe(e){let t=e.schema??104;t!==_h&&t<105&&(Bre(e.asset,zre),e.schema=105)}function gGe(e){e.shared.particles=Tl({},Wt.prototype),e.shared.lib&&(e.shared.lib.particles=Kh.defaultData().particles)}function vGe(e){e.scene.objects.traverse((t,i)=>{i.type==="Particle"&&typeof i.renderMaterial.size=="number"&&Object.assign(i.renderMaterial,{size:[i.renderMaterial.size,i.renderMaterial.size]})})}function yGe(e){e.scene.objects.traverse((t,i)=>{i.type==="Page"&&(i.postprocessing.depthOfField.focusDistance=100,i.postprocessing.depthOfField.focalLength=20,i.postprocessing.depthOfField.bokehScale=5)})}function xGe(e){e.scene.objects.traverse((t,i)=>{var r;Array.isArray(Cn(i.events))!==!1&&((r=i.events)==null||r.forEach(n=>{var a,o,l,c,u,h,f,m,g,v,x;let s=n.runMode;n.type==="MouseDown"||n.type==="MouseUp"||n.type==="KeyDown"||n.type==="KeyUp"||n.type==="Collision"||n.type==="Trigger"?(a=n.actions)==null||a.forEach(b=>{b.type==="Transition"&&(b.runMode=s??"Repeat"),(b.type==="Animation"||b.type==="SwitchCamera")&&(b.runMode=s==="Toggle"?"Toggle":"Normal")}):n.type==="MouseHover"||n.type==="MousePress"||n.type==="KeyPress"?(o=n.actions)==null||o.forEach(b=>{(b.type==="Transition"||b.type==="Animation"||b.type==="SwitchCamera")&&(b.runMode="Toggle")}):n.type==="GameControl"?(delete n.actions,Object.keys(n.gameActions).forEach(b=>{var S;(S=n.gameActions[b])==null||S.forEach(_=>{_.type==="Transition"&&(_.runMode="Repeat"),_.type==="Animation"&&(_.runMode="Normal")})})):n.type==="DragDrop"?(delete n.actions,(c=(l=n.dragDropActions)==null?void 0:l.drag)==null||c.forEach(b=>{(b.type==="Transition"||b.type==="Animation"||b.type==="SwitchCamera")&&(b.runMode="Toggle")}),(h=(u=n.dragDropActions)==null?void 0:u.drop)==null||h.forEach(b=>{(b.type==="Transition"||b.type==="Animation"||b.type==="SwitchCamera")&&(b.runMode="Toggle")})):n.type==="Resize"?(delete n.actions,(f=n.breakpoints)==null||f.forEach(b=>{var S;(S=b.actions)==null||S.forEach(_=>{(_.type==="Transition"||_.type==="Animation"||_.type==="SwitchCamera")&&(_.runMode="Toggle")})})):n.type==="Start"?(m=n.actions)==null||m.forEach(b=>{b.type==="Transition"&&(b.runMode="Once"),(b.type==="Animation"||b.type==="SwitchCamera")&&(b.runMode="Normal")}):n.type==="VariableChange"||n.type==="Scroll"?(g=n.actions)==null||g.forEach(b=>{b.type==="Transition"&&(b.runMode="Repeat"),(b.type==="Animation"||b.type==="SwitchCamera")&&(b.runMode="Normal")}):n.type==="Conditional"&&(delete n.actions,(v=n.inActions)==null||v.forEach(b=>{b.type==="Transition"&&(b.runMode="Repeat"),(b.type==="Animation"||b.type==="SwitchCamera")&&(b.runMode="Normal")}),(x=n.outActions)==null||x.forEach(b=>{b.type==="Transition"&&(b.runMode="Repeat"),(b.type==="Animation"||b.type==="SwitchCamera")&&(b.runMode="Normal")}))}))})}function bGe(e){e.shared.userAPIs=Tl({},Wt.prototype),e.shared.userWebhooks=Tl({},Wt.prototype),e.shared.lib&&(e.shared.lib.userAPIs=Kh.defaultData().userAPIs,e.shared.lib.userWebhooks=Kh.defaultData().userWebhooks)}function jre(e){let t=e.schema??0;if(t!==_h){console.warn("updating from ",t,"to ",_h),uGe(e,t),t<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=lf.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(Kd(e,YG),Qd(e,YG),e.schema=101),t<102&&(hGe(e),e.schema=102),t<104&&(e.shared.catelogs=new Wt,e.shared.lib=Kh.defaultData(),e.schema=104),t<105&&(fGe(e),e.scene.objects.traverse((i,r)=>{zre(r)}),e.schema=105);for(let i of Object.values(e.shared.lib.components))mGe(i);t<106&&(pGe(e),e.schema=106),t<107&&(e.shared.lib.variables=Kh.defaultData().variables,e.schema=107),t<109&&(gGe(e),e.schema=109),t<110&&(vGe(e),e.schema=110),t<111&&(e.scene.objects.traverse((i,r)=>{dGe(r)}),e.schema=111),t<112&&(yGe(e),e.schema=112),t<113&&(xGe(e),e.schema=113),t<114&&(e.scene.publish.settings.web.imageQuality===void 0&&(e.scene.publish.settings.web.imageQuality=70),e.schema=114),t<115&&(bGe(e),e.schema=115)}}var wT;(e=>{e.defaultData={schema:_h,scene:tm.defaultData,frames:new Wt().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",Wx.defaultData),shared:{...dl.emptyData(),colors:dl.defaultColors()}},e.emptyDataForImports=function(){let s=tm.emptyDataWithPage();return{schema:_h,scene:s,frames:new Wt().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",Wx.defaultData),shared:{...dl.emptyData(),colors:dl.defaultColors(),images:dl.defaultImages()}}},e.emptyData=function(){return{schema:_h,scene:tm.emptyDataWithPage(),frames:new Wt().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",Wx.defaultData),shared:dl.emptyData()}},e.clipboard2dData=function(){return{schema:_h,scene:tm.emptyData(),frames:new Wt,shared:dl.emptyData()}},e.collabHelper={...AR,updateSchema(s){return(s.schema??0)<_h?Fb(s,jre):(s.schema??0)-_h}};function t(s){let a=e.collabHelper.updateSchema(s);return typeof a=="number"?a===0?s:null:a.data}e.updateSchemaDirectly=t;function i(s){return{...s,shared:{...s.shared,lib:Kh.defaultData()}}}e.withoutLib=i;function r(s,a){let o=s.scene.objects.get(a);if(o&&o.data.type==="Component")return o;{let l=s.shared.lib.components[a];if(l)return l.asset}}e.getComponentData=r;function n(s){let a=Object.values(s.shared.userAPIs);for(let o of a){let l=o.headers;for(let c of l)if(c.data.key.toLowerCase()==="authorization"&&c.data.value!=="")return!0}return!1}e.hasSensitiveData=n})(wT||(wT={}));var oO;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(oO||(oO={}));var KG;(e=>{function t(i){return!0}e.is=t})(KG||(KG={}));var ST;(e=>{e.defaultData={position:[0,0],scale:[1,1],rotation:0,shear:[0,0]};function t(r,n){return{position:(n==null?void 0:n.position)??r.position,rotation:(n==null?void 0:n.rotation)??r.rotation,scale:(n==null?void 0:n.scale)??r.scale,shear:(n==null?void 0:n.shear)??r.shear}}e.merge=t;function i(r,n){return Zie({position:Oh.isEqual(r.position,n.position)?void 0:n.position,rotation:r.rotation===n.rotation?void 0:n.rotation,scale:Oh.isEqual(r.scale,n.scale)?void 0:n.scale,shear:r.shear&&n.shear&&Oh.isEqual(r.shear,n.shear)?void 0:n.shear})}e.diff=i})(ST||(ST={}));var lO;(e=>e.defaultData={horizontalConstraint:0,verticalConstraint:0})(lO||(lO={}));var ZG;(e=>e.defaultData={direction:"row",wrap:"unwrap",align:"top-left",gap:10,rowGap:10,autoGap:!1,autoRowGap:!1,leftPadding:8,rightPadding:8,topPadding:8,bottomPadding:8})(ZG||(ZG={}));var _T;(e=>e.defaultData={opacity:1,fill:{color:_r.fromHexAndA(Fo,1),enabled:!0},stroke:{color:_r.from0to1([0,0,0,1]),thickness:1,enabled:!1,mode:"inside"},layerBlur:{radius:2,enabled:!1},backgroundBlur:{radius:2,enabled:!1},dropShadow:{offset:[10,10],blurRadius:10,color:_r.from0to1([0,0,0,1]),enabled:!1,spread:0},innerShadow:{offset:[10,10],blurRadius:10,color:_r.from0to1([0,0,0,1]),enabled:!1,spread:0}})(_T||(_T={}));var im;(e=>{function t(a,o){return{name:o}}e.newEmpty=t;function i(a,o){if(o===void 0)return a;let l={...a},c=["width","height","cornerRadius"];for(let u of c)u in l&&u in o&&o[u]!==void 0&&Object.assign(l,{[u]:o[u]});return l}function r(a,o){if(o===void 0)return a;let l={...a};return"fill"in l&&"fill"in o&&o.fill!==void 0&&Object.assign(l,{fill:{...l.fill,...o.fill}}),"stroke"in l&&"stroke"in o&&o.stroke!==void 0&&Object.assign(l,{stroke:{...l.stroke,...o.stroke}}),"layerBlur"in l&&"layerBlur"in o&&o.layerBlur!==void 0&&Object.assign(l,{layerBlur:{...l.layerBlur,...o.layerBlur}}),"backgroundBlur"in l&&"backgroundBlur"in o&&o.backgroundBlur!==void 0&&Object.assign(l,{backgroundBlur:{...l.backgroundBlur,...o.backgroundBlur}}),"dropShadow"in l&&"dropShadow"in o&&o.dropShadow!==void 0&&Object.assign(l,{dropShadow:{...l.dropShadow,...o.dropShadow}}),"innerShadow"in l&&"innerShadow"in o&&o.innerShadow!==void 0&&Object.assign(l,{innerShadow:{...l.innerShadow,...o.innerShadow}}),l}function n(a,o){if(o===void 0)return a;let l={...a};return Object.assign(l,ST.merge(l,o)),l=i(l,o),l=r(l,o),l}e.patch=n;function s(a,o){let l,c=[];for(let[u,h]of Object.entries(o))u!=="name"&&(l===void 0&&(l={path:[],props:{},type:0},c.push(l)),l.props[u]=h);return c}e.toOps=s})(im||(im={}));var Wb;(e=>e.defaultData={...ST.defaultData,...lO.defaultData,states:new Lt,events:new Lt,visible:!0,raycastLock:!1})(Wb||(Wb={}));var jv;(e=>e.defaultData={...Wb.defaultData,..._T.defaultData})(jv||(jv={}));var ET;(e=>e.defaultData={cornerRadius:[0,0,0,0]})(ET||(ET={}));var cO;(e=>e.defaultData={...jv.defaultData,type:"ellipse2d",width:100,height:100,name:"Ellipse"})(cO||(cO={}));var qb;(e=>e.defaultData={...jv.defaultData,...ET.defaultData,type:"rectangle2d",width:100,height:100,name:"Rectangle"})(qb||(qb={}));var uO;(e=>e.defaultData={...jv.defaultData,type:"text2d",width:100,height:100,fontSize:12,lineHeight:1.2,letterSpacing:0,text:{textValue:"Hello world"},horizontalAlign:1,verticalAlign:1,textTransform:1,font:"Roboto_regular",name:"Text"})(uO||(uO={}));var hO;(e=>e.defaultData={...jv.defaultData,type:"path2d",path:"",name:"Path"})(hO||(hO={}));var $G;(e=>{function t(i){return i.type==="ellipse2d"||i.type==="rectangle2d"||i.type==="text2d"||i.type==="vector2d"||i.type==="path2d"}e.is=t})($G||($G={}));var AT;(e=>e.defaultData={...Wb.defaultData,name:"Group",type:"group2d"})(AT||(AT={}));var dO;(e=>e.defaultData=()=>({...Wb.defaultData,...ET.defaultData,..._T.defaultData,name:"Frame",type:"frame2d",clipped:!0,width:200,height:200,fill:{color:_r.fromHexAndA(4737101,1),enabled:!0},stroke:{color:_r.fromHexAndA(0,1),thickness:1,enabled:!1,mode:"inside"},backgroundBlur:{radius:2,enabled:!1},layerBlur:{radius:2,enabled:!1}}))(dO||(dO={}));var ym;(e=>{function t(a){switch(a){case"rectangle2d":return{...qb.defaultData};case"ellipse2d":return{...cO.defaultData};case"text2d":return{...uO.defaultData};case"vector2d":return{...qb.defaultData};case"path2d":return{...hO.defaultData};case"frame2d":return{...dO.defaultData()};case"group2d":return{...AT.defaultData}}}e.defaultData=t;function i(a){return"width"in a&&"height"in a?[typeof a.width=="number"?a.width*.5:0,typeof a.height=="number"?a.height*.5:0]:[0,0]}e.getPivot=i;function r(a){return a.type==="rectangle2d"||a.type==="ellipse2d"||a.type==="text2d"||a.type==="frame2d"}e.isResizeable=r;function n(a){return a.type==="frame2d"&&a.autoLayout!==void 0}e.isAutoLayoutable=n;function s(a){return a.type==="rectangle2d"||a.type==="frame2d"}e.hasCorners=s})(ym||(ym={}));var fO;(e=>(e.defaultData={name:"UI",type:"scene2d",objects:new ea},e.emptyData=function(){return{type:"scene2d",objects:new ea}}))(fO||(fO={}));function rm(e,t=!1){let i=e[0].index!==null,r=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),s={},a={},o=e[0].morphTargetsRelative,l=new Rt,c=0;for(let u=0;u<e.length;++u){let h=e[u],f=0;if(i!==(h.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let m in h.attributes){if(!r.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+m+'" attribute exists among all geometries, or in none of them.'),null;s[m]===void 0&&(s[m]=[]),s[m].push(h.attributes[m]),f++}if(f!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(o!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let m in h.morphAttributes){if(!n.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;a[m]===void 0&&(a[m]=[]),a[m].push(h.morphAttributes[m])}if(t){let m;if(i)m=h.index.count;else if(h.attributes.position!==void 0)m=h.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,m,u),c+=m}}if(i){let u=0,h=[];for(let f=0;f<e.length;++f){let m=e[f].index;for(let g=0;g<m.count;++g)h.push(m.getX(g)+u);u+=e[f].attributes.position.count}l.setIndex(h)}for(let u in s){let h=JG(s[u]);if(!h)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,h)}for(let u in a){let h=a[u][0].length;if(h===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let f=0;f<h;++f){let m=[];for(let v=0;v<a[u].length;++v)m.push(a[u][v][f]);let g=JG(m);if(!g)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(g)}}return l}function JG(e){let t,i,r,n=0;for(let o=0;o<e.length;++o){let l=e[o];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(i===void 0&&(i=l.itemSize),i!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=l.normalized),r!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let s=new t(n),a=0;for(let o=0;o<e.length;++o)s.set(e[o].array,a),a+=e[o].array.length;return new Xt(s,i,r)}var wGe=Math.pow(2,-24),b_=class{constructor(){}};function nu(e,t,i){return i.min.x=t[e],i.min.y=t[e+1],i.min.z=t[e+2],i.max.x=t[e+3],i.max.y=t[e+4],i.max.z=t[e+5],i}function eW(e){let t=-1,i=-1/0;for(let r=0;r<3;r++){let n=e[r+3]-e[r];n>i&&(i=n,t=r)}return t}function tW(e,t){t.set(e)}function iW(e,t,i){let r,n;for(let s=0;s<3;s++){let a=s+3;r=e[s],n=t[s],i[s]=r<n?r:n,r=e[a],n=t[a],i[a]=r>n?r:n}}function w_(e,t,i){for(let r=0;r<3;r++){let n=t[e+2*r],s=t[e+2*r+1],a=n-s,o=n+s;a<i[r]&&(i[r]=a),o>i[r+3]&&(i[r+3]=o)}}function U1(e){let t=e[3]-e[0],i=e[4]-e[1],r=e[5]-e[2];return 2*(t*i+i*r+r*t)}function SGe(e,t){if(!e.index){let i=e.attributes.position.count,r=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,n;i>65535?n=new Uint32Array(new r(4*i)):n=new Uint16Array(new r(2*i)),e.setIndex(new Xt(n,1));for(let s=0;s<i;s++)n[s]=s}}function _Ge(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],i=new Set;for(let n of e.groups)i.add(n.start),i.add(n.start+n.count);let r=Array.from(i.values()).sort((n,s)=>n-s);for(let n=0;n<r.length-1;n++){let s=r[n],a=r[n+1];t.push({offset:s/3,count:(a-s)/3})}return t}function E4(e,t,i,r,n=null){let s=1/0,a=1/0,o=1/0,l=-1/0,c=-1/0,u=-1/0,h=1/0,f=1/0,m=1/0,g=-1/0,v=-1/0,x=-1/0,b=n!==null;for(let S=t*6,_=(t+i)*6;S<_;S+=6){let A=e[S+0],M=e[S+1],C=A-M,D=A+M;C<s&&(s=C),D>l&&(l=D),b&&A<h&&(h=A),b&&A>g&&(g=A);let T=e[S+2],R=e[S+3],O=T-R,L=T+R;O<a&&(a=O),L>c&&(c=L),b&&T<f&&(f=T),b&&T>v&&(v=T);let k=e[S+4],B=e[S+5],V=k-B,$=k+B;V<o&&(o=V),$>u&&(u=$),b&&k<m&&(m=k),b&&k>x&&(x=k)}r[0]=s,r[1]=a,r[2]=o,r[3]=l,r[4]=c,r[5]=u,b&&(n[0]=h,n[1]=f,n[2]=m,n[3]=g,n[4]=v,n[5]=x)}function EGe(e,t,i,r){let n=1/0,s=1/0,a=1/0,o=-1/0,l=-1/0,c=-1/0;for(let u=t*6,h=(t+i)*6;u<h;u+=6){let f=e[u+0];f<n&&(n=f),f>o&&(o=f);let m=e[u+2];m<s&&(s=m),m>l&&(l=m);let g=e[u+4];g<a&&(a=g),g>c&&(c=g)}r[0]=n,r[1]=s,r[2]=a,r[3]=o,r[4]=l,r[5]=c}function AGe(e,t,i,r,n){let s=i,a=i+r-1,o=n.pos,l=n.axis*2;for(;;){for(;s<=a&&t[s*6+l]<o;)s++;for(;s<=a&&t[a*6+l]>=o;)a--;if(s<a){for(let c=0;c<3;c++){let u=e[s*3+c];e[s*3+c]=e[a*3+c],e[a*3+c]=u;let h=t[s*6+c*2+0];t[s*6+c*2+0]=t[a*6+c*2+0],t[a*6+c*2+0]=h;let f=t[s*6+c*2+1];t[s*6+c*2+1]=t[a*6+c*2+1],t[a*6+c*2+1]=f}s++,a--}else return s}}var vh=32,TGe=(e,t)=>e.candidate-t.candidate,Rd=new Array(vh).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),S_=new Float32Array(6);function CGe(e,t,i,r,n,s){let a=-1,o=0;if(s===0)a=eW(t),a!==-1&&(o=(t[a]+t[a+3])/2);else if(s===1)a=eW(e),a!==-1&&(o=MGe(i,r,n,a));else if(s===2){let l=U1(e),c=1.25*n,u=r*6,h=(r+n)*6;for(let f=0;f<3;f++){let m=t[f],g=(t[f+3]-m)/vh;if(n<vh/4){let v=[...Rd];v.length=n;let x=0;for(let S=u;S<h;S+=6,x++){let _=v[x];_.candidate=i[S+2*f],_.count=0;let{bounds:A,leftCacheBounds:M,rightCacheBounds:C}=_;for(let D=0;D<3;D++)C[D]=1/0,C[D+3]=-1/0,M[D]=1/0,M[D+3]=-1/0,A[D]=1/0,A[D+3]=-1/0;w_(S,i,A)}v.sort(TGe);let b=n;for(let S=0;S<b;S++){let _=v[S];for(;S+1<b&&v[S+1].candidate===_.candidate;)v.splice(S+1,1),b--}for(let S=u;S<h;S+=6){let _=i[S+2*f];for(let A=0;A<b;A++){let M=v[A];_>=M.candidate?w_(S,i,M.rightCacheBounds):(w_(S,i,M.leftCacheBounds),M.count++)}}for(let S=0;S<b;S++){let _=v[S],A=_.count,M=n-_.count,C=_.leftCacheBounds,D=_.rightCacheBounds,T=0;A!==0&&(T=U1(C)/l);let R=0;M!==0&&(R=U1(D)/l);let O=1+1.25*(T*A+R*M);O<c&&(a=f,c=O,o=_.candidate)}}else{for(let b=0;b<vh;b++){let S=Rd[b];S.count=0,S.candidate=m+g+b*g;let _=S.bounds;for(let A=0;A<3;A++)_[A]=1/0,_[A+3]=-1/0}for(let b=u;b<h;b+=6){let S=~~((i[b+2*f]-m)/g);S>=vh&&(S=vh-1);let _=Rd[S];_.count++,w_(b,i,_.bounds)}let v=Rd[vh-1];tW(v.bounds,v.rightCacheBounds);for(let b=vh-2;b>=0;b--){let S=Rd[b],_=Rd[b+1];iW(S.bounds,_.rightCacheBounds,S.rightCacheBounds)}let x=0;for(let b=0;b<vh-1;b++){let S=Rd[b],_=S.count,A=S.bounds,M=Rd[b+1].rightCacheBounds;_!==0&&(x===0?tW(A,S_):iW(A,S_,S_)),x+=_;let C=0,D=0;x!==0&&(C=U1(S_)/l);let T=n-x;T!==0&&(D=U1(M)/l);let R=1+1.25*(C*x+D*T);R<c&&(a=f,c=R,o=S.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:a,pos:o}}function MGe(e,t,i,r){let n=0;for(let s=t,a=t+i;s<a;s++)n+=e[s*6+r*2];return n/i}function PGe(e,t){let i=e.attributes.position,r=e.index.array,n=r.length/3,s=new Float32Array(n*6),a=i.normalized,o=i.array,l=i.offset||0,c=3;i.isInterleavedBufferAttribute&&(c=i.data.stride);let u=["getX","getY","getZ"];for(let h=0;h<n;h++){let f=h*3,m=h*6,g,v,x;a?(g=r[f+0],v=r[f+1],x=r[f+2]):(g=r[f+0]*c+l,v=r[f+1]*c+l,x=r[f+2]*c+l);for(let b=0;b<3;b++){let S,_,A;a?(S=i[u[b]](g),_=i[u[b]](v),A=i[u[b]](x)):(S=o[g+b],_=o[v+b],A=o[x+b]);let M=S;_<M&&(M=_),A<M&&(M=A);let C=S;_>C&&(C=_),A>C&&(C=A);let D=(C-M)/2,T=b*2;s[m+T+0]=M+D,s[m+T+1]=D+(Math.abs(M)+D)*wGe,M<t[b]&&(t[b]=M),C>t[b+3]&&(t[b+3]=C)}}return s}function DGe(e,t){function i(b){f&&f(b/m)}function r(b,S,_,A=null,M=0){if(!g&&M>=l&&(g=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),_<=u||M>=l)return i(S+_),b.offset=S,b.count=_,b;let C=CGe(b.boundingData,A,a,S,_,h);if(C.axis===-1)return i(S+_),b.offset=S,b.count=_,b;let D=AGe(o,a,S,_,C);if(D===S||D===S+_)i(S+_),b.offset=S,b.count=_;else{b.splitAxis=C.axis;let T=new b_,R=S,O=D-S;b.left=T,T.boundingData=new Float32Array(6),E4(a,R,O,T.boundingData,s),r(T,R,O,s,M+1);let L=new b_,k=D,B=_-O;b.right=L,L.boundingData=new Float32Array(6),E4(a,k,B,L.boundingData,s),r(L,k,B,s,M+1)}return b}SGe(e,t);let n=new Float32Array(6),s=new Float32Array(6),a=PGe(e,n),o=e.index.array,l=t.maxDepth,c=t.verbose,u=t.maxLeafTris,h=t.strategy,f=t.onProgress,m=e.index.count/3,g=!1,v=[],x=_Ge(e);if(x.length===1){let b=x[0],S=new b_;S.boundingData=n,EGe(a,b.offset,b.count,s),r(S,b.offset,b.count,s),v.push(S)}else for(let b of x){let S=new b_;S.boundingData=new Float32Array(6),E4(a,b.offset,b.count,S.boundingData,s),r(S,b.offset,b.count,s),v.push(S)}return v}function IGe(e,t){let i=DGe(e,t),r,n,s,a=[],o=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let u=0;u<i.length;u++){let h=i[u],f=l(h),m=new o(32*f);r=new Float32Array(m),n=new Uint32Array(m),s=new Uint16Array(m),c(0,h),a.push(m)}return a;function l(u){return u.count?1:1+l(u.left)+l(u.right)}function c(u,h){let f=u/4,m=u/2,g=!!h.count,v=h.boundingData;for(let x=0;x<6;x++)r[f+x]=v[x];if(g){let x=h.offset,b=h.count;return n[f+6]=x,s[m+14]=b,s[m+15]=65535,u+32}else{let x=h.left,b=h.right,S=h.splitAxis,_;if(_=c(u+32,x),_/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n[f+6]=_/4,_=c(_,b),n[f+7]=S,_}}}var Zh=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let i=1/0,r=-1/0;for(let n=0,s=e.length;n<s;n++){let a=e[n][t];i=a<i?a:i,r=a>r?a:r}this.min=i,this.max=r}setFromPoints(e,t){let i=1/0,r=-1/0;for(let n=0,s=t.length;n<s;n++){let a=t[n],o=e.dot(a);i=o<i?o:i,r=o>r?o:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}};Zh.prototype.setFromBox=function(){let e=new j;return function(t,i){let r=i.min,n=i.max,s=1/0,a=-1/0;for(let o=0;o<=1;o++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){e.x=r.x*o+n.x*(1-o),e.y=r.y*l+n.y*(1-l),e.z=r.z*c+n.z*(1-c);let u=t.dot(e);s=Math.min(u,s),a=Math.max(u,a)}this.min=s,this.max=a}}();var RGe=function(){let e=new j,t=new j,i=new j;return function(r,n,s){let a=r.start,o=e,l=n.start,c=t;i.subVectors(a,l),e.subVectors(r.end,r.start),t.subVectors(n.end,n.start);let u=i.dot(c),h=c.dot(o),f=c.dot(c),m=i.dot(o),g=o.dot(o)*f-h*h,v,x;g!==0?v=(u*h-m*f)/g:v=0,x=(u+v*h)/f,s.x=v,s.y=x}}(),Qk=function(){let e=new pe,t=new j,i=new j;return function(r,n,s,a){RGe(r,n,e);let o=e.x,l=e.y;if(o>=0&&o<=1&&l>=0&&l<=1){r.at(o,s),n.at(l,a);return}else if(o>=0&&o<=1){l<0?n.at(0,a):n.at(1,a),r.closestPointToPoint(a,!0,s);return}else if(l>=0&&l<=1){o<0?r.at(0,s):r.at(1,s),n.closestPointToPoint(s,!0,a);return}else{let c;o<0?c=r.start:c=r.end;let u;l<0?u=n.start:u=n.end;let h=t,f=i;if(r.closestPointToPoint(u,!0,t),n.closestPointToPoint(c,!0,i),h.distanceToSquared(u)<=f.distanceToSquared(c)){s.copy(h),a.copy(u);return}else{s.copy(c),a.copy(f);return}}}}(),OGe=function(){let e=new j,t=new j,i=new ao,r=new bl;return function(n,s){let{radius:a,center:o}=n,{a:l,b:c,c:u}=s;if(r.start=l,r.end=c,r.closestPointToPoint(o,!0,e).distanceTo(o)<=a||(r.start=l,r.end=u,r.closestPointToPoint(o,!0,e).distanceTo(o)<=a)||(r.start=c,r.end=u,r.closestPointToPoint(o,!0,e).distanceTo(o)<=a))return!0;let h=s.getPlane(i);if(Math.abs(h.distanceToPoint(o))<=a){let f=h.projectPoint(o,t);if(s.containsPoint(f))return!0}return!1}}(),LGe=1e-15;function t0(e){return Math.abs(e)<LGe}var $h=class extends Js{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new j),this.satBounds=new Array(4).fill().map(()=>new Zh),this.points=[this.a,this.b,this.c],this.sphere=new yo,this.plane=new ao,this.needsUpdate=!0}intersectsSphere(e){return OGe(e,this)}update(){let e=this.a,t=this.b,i=this.c,r=this.points,n=this.satAxes,s=this.satBounds,a=n[0],o=s[0];this.getNormal(a),o.setFromPoints(a,r);let l=n[1],c=s[1];l.subVectors(e,t),c.setFromPoints(l,r);let u=n[2],h=s[2];u.subVectors(t,i),h.setFromPoints(u,r);let f=n[3],m=s[3];f.subVectors(i,e),m.setFromPoints(f,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};$h.prototype.closestPointToSegment=function(){let e=new j,t=new j,i=new bl;return function(r,n=null,s=null){let{start:a,end:o}=r,l=this.points,c,u=1/0;for(let h=0;h<3;h++){let f=(h+1)%3;i.start.copy(l[h]),i.end.copy(l[f]),Qk(i,r,e,t),c=e.distanceToSquared(t),c<u&&(u=c,n&&n.copy(e),s&&s.copy(t))}return this.closestPointToPoint(a,e),c=a.distanceToSquared(e),c<u&&(u=c,n&&n.copy(e),s&&s.copy(a)),this.closestPointToPoint(o,e),c=o.distanceToSquared(e),c<u&&(u=c,n&&n.copy(e),s&&s.copy(o)),Math.sqrt(u)}}();$h.prototype.intersectsTriangle=function(){let e=new $h,t=new Array(3),i=new Array(3),r=new Zh,n=new Zh,s=new j,a=new j,o=new j,l=new j,c=new bl,u=new bl,h=new bl;return function(f,m=null,g=!1){this.needsUpdate&&this.update(),f.isExtendedTriangle?f.needsUpdate&&f.update():(e.copy(f),e.update(),f=e);let v=this.plane,x=f.plane;if(Math.abs(v.normal.dot(x.normal))>1-1e-10){let b=this.satBounds,S=this.satAxes;i[0]=f.a,i[1]=f.b,i[2]=f.c;for(let M=0;M<4;M++){let C=b[M],D=S[M];if(r.setFromPoints(D,i),C.isSeparated(r))return!1}let _=f.satBounds,A=f.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let M=0;M<4;M++){let C=_[M],D=A[M];if(r.setFromPoints(D,t),C.isSeparated(r))return!1}for(let M=0;M<4;M++){let C=S[M];for(let D=0;D<4;D++){let T=A[D];if(s.crossVectors(C,T),r.setFromPoints(s,t),n.setFromPoints(s,i),r.isSeparated(n))return!1}}return m&&(g||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),m.start.set(0,0,0),m.end.set(0,0,0)),!0}else{let b=this.points,S=!1,_=0;for(let B=0;B<3;B++){let V=b[B],$=b[(B+1)%3];c.start.copy(V),c.end.copy($),c.delta(a);let q=S?u.start:u.end,Y=t0(x.distanceToPoint(V));if(t0(x.normal.dot(a))&&Y){u.copy(c),_=2;break}if((x.intersectLine(c,q)||Y)&&!t0(q.distanceTo($))){if(_++,S)break;S=!0}}if(_===1&&f.containsPoint(u.end))return m&&(m.start.copy(u.end),m.end.copy(u.end)),!0;if(_!==2)return!1;let A=f.points,M=!1,C=0;for(let B=0;B<3;B++){let V=A[B],$=A[(B+1)%3];c.start.copy(V),c.end.copy($),c.delta(o);let q=M?h.start:h.end,Y=t0(v.distanceToPoint(V));if(t0(v.normal.dot(o))&&Y){h.copy(c),C=2;break}if((v.intersectLine(c,q)||Y)&&!t0(q.distanceTo($))){if(C++,M)break;M=!0}}if(C===1&&this.containsPoint(h.end))return m&&(m.start.copy(h.end),m.end.copy(h.end)),!0;if(C!==2)return!1;if(u.delta(a),h.delta(o),a.dot(o)<0){let B=h.start;h.start=h.end,h.end=B}let D=u.start.dot(a),T=u.end.dot(a),R=h.start.dot(a),O=h.end.dot(a),L=T<R,k=D<O;return D!==O&&R!==T&&L===k?!1:(m&&(l.subVectors(u.start,h.start),l.dot(a)>0?m.start.copy(u.start):m.start.copy(h.start),l.subVectors(u.end,h.end),l.dot(a)<0?m.end.copy(u.end):m.end.copy(h.end)),!0)}}}();$h.prototype.distanceToPoint=function(){let e=new j;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();$h.prototype.distanceToTriangle=function(){let e=new j,t=new j,i=["a","b","c"],r=new bl,n=new bl;return function(s,a=null,o=null){let l=a||o?r:null;if(this.intersectsTriangle(s,l))return(a||o)&&(a&&l.getCenter(a),o&&l.getCenter(o)),0;let c=1/0;for(let u=0;u<3;u++){let h,f=i[u],m=s[f];this.closestPointToPoint(m,e),h=m.distanceToSquared(e),h<c&&(c=h,a&&a.copy(e),o&&o.copy(m));let g=this[f];s.closestPointToPoint(g,e),h=g.distanceToSquared(e),h<c&&(c=h,a&&a.copy(g),o&&o.copy(e))}for(let u=0;u<3;u++){let h=i[u],f=i[(u+1)%3];r.set(this[h],this[f]);for(let m=0;m<3;m++){let g=i[m],v=i[(m+1)%3];n.set(s[g],s[v]),Qk(r,n,e,t);let x=e.distanceToSquared(t);x<c&&(c=x,a&&a.copy(e),o&&o.copy(t))}}return Math.sqrt(c)}}();var Cu=class{constructor(e,t,i){this.isOrientedBox=!0,this.min=new j,this.max=new j,this.matrix=new tt,this.invMatrix=new tt,this.points=new Array(8).fill().map(()=>new j),this.satAxes=new Array(3).fill().map(()=>new j),this.satBounds=new Array(3).fill().map(()=>new Zh),this.alignedSatBounds=new Array(3).fill().map(()=>new Zh),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),i&&this.matrix.copy(i)}set(e,t,i){this.min.copy(e),this.max.copy(t),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Cu.prototype.update=function(){return function(){let e=this.matrix,t=this.min,i=this.max,r=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){let h=1*l|2*c|4*u,f=r[h];f.x=l?i.x:t.x,f.y=c?i.y:t.y,f.z=u?i.z:t.z,f.applyMatrix4(e)}let n=this.satBounds,s=this.satAxes,a=r[0];for(let l=0;l<3;l++){let c=s[l],u=n[l],h=1<<l,f=r[h];c.subVectors(a,f),u.setFromPoints(c,r)}let o=this.alignedSatBounds;o[0].setFromPointsField(r,"x"),o[1].setFromPointsField(r,"y"),o[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Cu.prototype.intersectsBox=function(){let e=new Zh;return function(t){this.needsUpdate&&this.update();let i=t.min,r=t.max,n=this.satBounds,s=this.satAxes,a=this.alignedSatBounds;if(e.min=i.x,e.max=r.x,a[0].isSeparated(e)||(e.min=i.y,e.max=r.y,a[1].isSeparated(e))||(e.min=i.z,e.max=r.z,a[2].isSeparated(e)))return!1;for(let o=0;o<3;o++){let l=s[o],c=n[o];if(e.setFromBox(l,t),c.isSeparated(e))return!1}return!0}}();Cu.prototype.intersectsTriangle=function(){let e=new $h,t=new Array(3),i=new Zh,r=new Zh,n=new j;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(e.copy(s),e.update(),s=e);let a=this.satBounds,o=this.satAxes;t[0]=s.a,t[1]=s.b,t[2]=s.c;for(let h=0;h<3;h++){let f=a[h],m=o[h];if(i.setFromPoints(m,t),f.isSeparated(i))return!1}let l=s.satBounds,c=s.satAxes,u=this.points;for(let h=0;h<3;h++){let f=l[h],m=c[h];if(i.setFromPoints(m,u),f.isSeparated(i))return!1}for(let h=0;h<3;h++){let f=o[h];for(let m=0;m<4;m++){let g=c[m];if(n.crossVectors(f,g),i.setFromPoints(n,t),r.setFromPoints(n,u),i.isSeparated(r))return!1}}return!0}}();Cu.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Cu.prototype.distanceToPoint=function(){let e=new j;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Cu.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new bl),i=new Array(12).fill().map(()=>new bl),r=new j,n=new j;return function(s,a=0,o=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(o||l)&&(s.getCenter(n),this.closestPointToPoint(n,r),s.closestPointToPoint(r,n),o&&o.copy(r),l&&l.copy(n)),0;let c=a*a,u=s.min,h=s.max,f=this.points,m=1/0;for(let v=0;v<8;v++){let x=f[v];n.copy(x).clamp(u,h);let b=x.distanceToSquared(n);if(b<m&&(m=b,o&&o.copy(x),l&&l.copy(n),b<c))return Math.sqrt(b)}let g=0;for(let v=0;v<3;v++)for(let x=0;x<=1;x++)for(let b=0;b<=1;b++){let S=(v+1)%3,_=(v+2)%3,A=x<<S|b<<_,M=1<<v|x<<S|b<<_,C=f[A],D=f[M];t[g].set(C,D);let T=e[v],R=e[S],O=e[_],L=i[g],k=L.start,B=L.end;k[T]=u[T],k[R]=x?u[R]:h[R],k[O]=b?u[O]:h[R],B[T]=h[T],B[R]=x?u[R]:h[R],B[O]=b?u[O]:h[R],g++}for(let v=0;v<=1;v++)for(let x=0;x<=1;x++)for(let b=0;b<=1;b++){n.x=v?h.x:u.x,n.y=x?h.y:u.y,n.z=b?h.z:u.z,this.closestPointToPoint(n,r);let S=n.distanceToSquared(r);if(S<m&&(m=S,o&&o.copy(r),l&&l.copy(n),S<c))return Math.sqrt(S)}for(let v=0;v<12;v++){let x=t[v];for(let b=0;b<12;b++){let S=i[b];Qk(x,S,r,n);let _=r.distanceToSquared(n);if(_<m&&(m=_,o&&o.copy(r),l&&l.copy(n),_<c))return Math.sqrt(_)}}return Math.sqrt(m)}}();var i0=new j,r0=new j,n0=new j,__=new pe,E_=new pe,A_=new pe,rW=new j,nW=new j,sW=new j,T_=new j;function kGe(e,t,i,r,n,s){let a;return s===Ds?a=e.intersectTriangle(r,i,t,!0,n):a=e.intersectTriangle(t,i,r,s!==wa,n),a===null?null:{distance:e.origin.distanceTo(n),point:n.clone()}}function zGe(e,t,i,r,n,s,a,o,l){i0.fromBufferAttribute(t,s),r0.fromBufferAttribute(t,a),n0.fromBufferAttribute(t,o);let c=kGe(e,i0,r0,n0,T_,l);if(c){r&&(__.fromBufferAttribute(r,s),E_.fromBufferAttribute(r,a),A_.fromBufferAttribute(r,o),c.uv=Js.getInterpolation(T_,i0,r0,n0,__,E_,A_,new pe)),n&&(__.fromBufferAttribute(n,s),E_.fromBufferAttribute(n,a),A_.fromBufferAttribute(n,o),c.uv1=Js.getInterpolation(T_,i0,r0,n0,__,E_,A_,new pe)),i&&(rW.fromBufferAttribute(i,s),nW.fromBufferAttribute(i,a),sW.fromBufferAttribute(i,o),c.normal=Js.getInterpolation(T_,i0,r0,n0,rW,nW,sW,new j),c.normal.dot(e.direction)>0&&c.normal.multiplyScalar(-1));let u={a:s,b:a,c:o,normal:new j,materialIndex:0};Js.getNormal(i0,r0,n0,u.normal),c.face=u,c.faceIndex=s}return c}function Nre(e,t,i,r,n){let s=r*3,a=e.index.getX(s),o=e.index.getX(s+1),l=e.index.getX(s+2),{position:c,normal:u,uv:h,uv1:f}=e.attributes,m=zGe(i,c,u,h,f,a,o,l,t);return m?(m.faceIndex=r,n&&n.push(m),m):null}function BGe(e,t,i,r,n,s){for(let a=r,o=r+n;a<o;a++)Nre(e,t,i,a,s)}function jGe(e,t,i,r,n){let s=1/0,a=null;for(let o=r,l=r+n;o<l;o++){let c=Nre(e,t,i,o);c&&c.distance<s&&(a=c,s=c.distance)}return a}function tu(e,t,i,r){let n=e.a,s=e.b,a=e.c,o=t,l=t+1,c=t+2;i&&(o=i.getX(t),l=i.getX(t+1),c=i.getX(t+2)),n.x=r.getX(o),n.y=r.getY(o),n.z=r.getZ(o),s.x=r.getX(l),s.y=r.getY(l),s.z=r.getZ(l),a.x=r.getX(c),a.y=r.getY(c),a.z=r.getZ(c)}function aW(e,t,i,r,n,s,a){let o=i.index,l=i.attributes.position;for(let c=e,u=t+e;c<u;c++)if(tu(a,c*3,o,l),a.needsUpdate=!0,r(a,c,n,s))return!0;return!1}var Vre=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function Zd(e,t){return t[e+15]===65535}function ev(e,t){return t[e+6]}function Xb(e,t){return t[e+14]}function Yb(e){return e+8}function Qb(e,t){return t[e+6]}function NGe(e,t){return t[e+7]}var W0=new Pn,TT=new j,VGe=["x","y","z"];function pO(e,t,i,r,n){let s=e*2,a=my,o=Sf,l=_f;if(Zd(s,o)){let c=ev(e,l),u=Xb(s,o);BGe(t,i,r,c,u,n)}else{let c=Yb(e);CT(c,a,r,TT)&&pO(c,t,i,r,n);let u=Qb(e,l);CT(u,a,r,TT)&&pO(u,t,i,r,n)}}function mO(e,t,i,r){let n=e*2,s=my,a=Sf,o=_f;if(Zd(n,a)){let l=ev(e,o),c=Xb(n,a);return jGe(t,i,r,l,c)}else{let l=NGe(e,o),c=VGe[l],u=r.direction[c]>=0,h,f;u?(h=Yb(e),f=Qb(e,o)):(h=Qb(e,o),f=Yb(e));let m=CT(h,s,r,TT)?mO(h,t,i,r):null;if(m){let v=m.point[c];if(u?v<=s[f+l]:v>=s[f+l+3])return m}let g=CT(f,s,r,TT)?mO(f,t,i,r):null;return m&&g?m.distance<=g.distance?m:g:m||g||null}}var UGe=function(){let e,t,i=[],r=new Vre(()=>new Pn);return function(...s){e=r.getPrimitive(),t=r.getPrimitive(),i.push(e,t);let a=n(...s);r.releasePrimitive(e),r.releasePrimitive(t),i.pop(),i.pop();let o=i.length;return o>0&&(t=i[o-1],e=i[o-2]),a};function n(s,a,o,l,c=null,u=0,h=0){function f(S){let _=S*2,A=Sf,M=_f;for(;!Zd(_,A);)S=Yb(S),_=S*2;return ev(S,M)}function m(S){let _=S*2,A=Sf,M=_f;for(;!Zd(_,A);)S=Qb(S,M),_=S*2;return ev(S,M)+Xb(_,A)}let g=s*2,v=my,x=Sf,b=_f;if(Zd(g,x)){let S=ev(s,b),_=Xb(g,x);return nu(s,v,e),l(S,_,!1,h,u+s,e)}else{let S=Yb(s),_=Qb(s,b),A=S,M=_,C,D,T,R;if(c&&(T=e,R=t,nu(A,v,T),nu(M,v,R),C=c(T),D=c(R),D<C)){A=_,M=S;let q=C;C=D,D=q,T=R}T||(T=e,nu(A,v,T));let O=Zd(A*2,x),L=o(T,O,C,h+1,u+A),k;if(L===2){let q=f(A),Y=m(A)-q;k=l(q,Y,!0,h+1,u+A,T)}else k=L&&n(A,a,o,l,c,u,h+1);if(k)return!0;R=t,nu(M,v,R);let B=Zd(M*2,x),V=o(R,B,D,h+1,u+M),$;if(V===2){let q=f(M),Y=m(M)-q;$=l(q,Y,!0,h+1,u+M,R)}else $=V&&n(M,a,o,l,c,u,h+1);return!!$}}}(),FGe=function(){let e=new $h,t=new $h,i=new tt,r=new Cu,n=new Cu;return function s(a,o,l,c,u=null){let h=a*2,f=my,m=Sf,g=_f;if(u===null&&(l.boundingBox||l.computeBoundingBox(),r.set(l.boundingBox.min,l.boundingBox.max,c),u=r),Zd(h,m)){let v=o,x=v.index,b=v.attributes.position,S=l.index,_=l.attributes.position,A=ev(a,g),M=Xb(h,m);if(i.copy(c).invert(),l.boundsTree)return nu(a,f,n),n.matrix.copy(i),n.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:C=>n.intersectsBox(C),intersectsTriangle:C=>{C.a.applyMatrix4(c),C.b.applyMatrix4(c),C.c.applyMatrix4(c),C.needsUpdate=!0;for(let D=A*3,T=(M+A)*3;D<T;D+=3)if(tu(t,D,x,b),t.needsUpdate=!0,C.intersectsTriangle(t))return!0;return!1}});for(let C=A*3,D=M+A*3;C<D;C+=3){tu(e,C,x,b),e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let T=0,R=S.count;T<R;T+=3)if(tu(t,T,S,_),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let v=a+8,x=g[a+6];return nu(v,f,W0),!!(u.intersectsBox(W0)&&s(v,o,l,c,u)||(nu(x,f,W0),u.intersectsBox(W0)&&s(x,o,l,c,u)))}}}();function CT(e,t,i,r){return nu(e,t,W0),i.intersectBox(W0,r)}var gO=[],WE,my,Sf,_f;function mx(e){WE&&gO.push(WE),WE=e,my=new Float32Array(e),Sf=new Uint16Array(e),_f=new Uint32Array(e)}function C_(){WE=null,my=null,Sf=null,_f=null,gO.length&&mx(gO.pop())}var A4=Symbol("skip tree generation"),T4=new Pn,C4=new Pn,s0=new tt,Dp=new Cu,F1=new Cu,H1=new j,M_=new j,HGe=new j,GGe=new j,WGe=new j,oW=new Pn,kc=new Vre(()=>new $h),qx=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),qx.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let i=e.geometry,r=e._roots,n=i.getIndex(),s;return t.cloneBuffers?s={roots:r.map(a=>a.slice()),index:n.array.slice()}:s={roots:r,index:n.array},s}static deserialize(e,t,i={}){if(typeof i=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),qx.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});i={setIndex:!0,...i};let{index:r,roots:n}=e,s=new qx(t,{...i,[A4]:!0});if(s._roots=n,i.setIndex){let a=t.getIndex();if(a===null){let o=new Xt(e.index,1,!1);t.setIndex(o)}else a.array!==r&&(a.array.set(r),a.needsUpdate=!0)}return s}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[A4]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[A4]||(this._roots=IGe(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Pn))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,i=t.index.array,r=t.attributes.position,n,s,a,o,l=0,c=this._roots;for(let h=0,f=c.length;h<f;h++)n=c[h],s=new Uint32Array(n),a=new Uint16Array(n),o=new Float32Array(n),u(0,l),l+=n.byteLength;function u(h,f,m=!1){let g=h*2;if(a[g+15]===65535){let v=s[h+6],x=a[g+14],b=1/0,S=1/0,_=1/0,A=-1/0,M=-1/0,C=-1/0;for(let D=3*v,T=3*(v+x);D<T;D++){let R=i[D],O=r.getX(R),L=r.getY(R),k=r.getZ(R);O<b&&(b=O),O>A&&(A=O),L<S&&(S=L),L>M&&(M=L),k<_&&(_=k),k>C&&(C=k)}return o[h+0]!==b||o[h+1]!==S||o[h+2]!==_||o[h+3]!==A||o[h+4]!==M||o[h+5]!==C?(o[h+0]=b,o[h+1]=S,o[h+2]=_,o[h+3]=A,o[h+4]=M,o[h+5]=C,!0):!1}else{let v=h+8,x=s[h+6],b=v+f,S=x+f,_=m,A=!1,M=!1;e?_||(A=e.has(b),M=e.has(S),_=!A&&!M):(A=!0,M=!0);let C=_||A,D=_||M,T=!1;C&&(T=u(v,f,_));let R=!1;D&&(R=u(x,f,_));let O=T||R;if(O)for(let L=0;L<3;L++){let k=v+L,B=x+L,V=o[k],$=o[k+3],q=o[B],Y=o[B+3];o[h+L]=V<q?V:q,o[h+L+3]=$>Y?$:Y}return O}}}traverse(e,t=0){let i=this._roots[t],r=new Uint32Array(i),n=new Uint16Array(i);s(0);function s(a,o=0){let l=a*2,c=n[l+15]===65535;if(c){let u=r[a+6],h=n[l+14];e(o,c,new Float32Array(i,a*4,6),u,h)}else{let u=a+8,h=r[a+6],f=r[a+7];e(o,c,new Float32Array(i,a*4,6),f)||(s(u,o+1),s(h,o+1))}}}raycast(e,t=lc){let i=this._roots,r=this.geometry,n=[],s=t.isMaterial,a=Array.isArray(t),o=r.groups,l=s?t.side:t;for(let c=0,u=i.length;c<u;c++){let h=a?t[o[c].materialIndex].side:l,f=n.length;if(mx(i[c]),pO(0,r,h,e,n),C_(),a){let m=o[c].materialIndex;for(let g=f,v=n.length;g<v;g++)n[g].face.materialIndex=m}}return n}raycastFirst(e,t=lc){let i=this._roots,r=this.geometry,n=t.isMaterial,s=Array.isArray(t),a=null,o=r.groups,l=n?t.side:t;for(let c=0,u=i.length;c<u;c++){let h=s?t[o[c].materialIndex].side:l;mx(i[c]);let f=mO(0,r,h,e);C_(),f!=null&&(a==null||f.distance<a.distance)&&(a=f,s&&(f.face.materialIndex=o[c].materialIndex))}return a}intersectsGeometry(e,t){let i=this.geometry,r=!1;for(let n of this._roots)if(mx(n),r=FGe(0,i,e,t),C_(),r)break;return r}shapecast(e,t,i){let r=this.geometry;if(e instanceof Function){if(t){let h=t;t=(f,m,g,v)=>{let x=m*3;return h(f,x,x+1,x+2,g,v)}}e={boundsTraverseOrder:i,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let n=kc.getPrimitive(),{boundsTraverseOrder:s,intersectsBounds:a,intersectsRange:o,intersectsTriangle:l}=e;if(o&&l){let h=o;o=(f,m,g,v,x)=>h(f,m,g,v,x)?!0:aW(f,m,r,l,g,v,n)}else o||(l?o=(h,f,m,g)=>aW(h,f,r,l,m,g,n):o=(h,f,m)=>m);let c=!1,u=0;for(let h of this._roots){if(mx(h),c=UGe(0,r,a,o,s,u),C_(),c)break;u+=h.byteLength}return kc.releasePrimitive(n),c}bvhcast(e,t,i){let{intersectsRanges:r,intersectsTriangles:n}=i,s=this.geometry.index,a=this.geometry.attributes.position,o=e.geometry.index,l=e.geometry.attributes.position;s0.copy(t).invert();let c=kc.getPrimitive(),u=kc.getPrimitive();if(n){let f=function(m,g,v,x,b,S,_,A){for(let M=v,C=v+x;M<C;M++){tu(u,M*3,o,l),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let D=m,T=m+g;D<T;D++)if(tu(c,D*3,s,a),c.needsUpdate=!0,n(c,u,D,M,b,S,_,A))return!0}return!1};if(r){let m=r;r=function(g,v,x,b,S,_,A,M){return m(g,v,x,b,S,_,A,M)?!0:f(g,v,x,b,S,_,A,M)}}else r=f}e.getBoundingBox(C4),C4.applyMatrix4(t);let h=this.shapecast({intersectsBounds:f=>C4.intersectsBox(f),intersectsRange:(f,m,g,v,x,b)=>(T4.copy(b),T4.applyMatrix4(s0),e.shapecast({intersectsBounds:S=>T4.intersectsBox(S),intersectsRange:(S,_,A,M,C)=>r(f,m,S,_,v,x,M,C)}))});return kc.releasePrimitive(c),kc.releasePrimitive(u),h}intersectsBox(e,t){return Dp.set(e.min,e.max,t),Dp.needsUpdate=!0,this.shapecast({intersectsBounds:i=>Dp.intersectsBox(i),intersectsTriangle:i=>Dp.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,i={},r={},n=0,s=1/0){e.boundingBox||e.computeBoundingBox(),Dp.set(e.boundingBox.min,e.boundingBox.max,t),Dp.needsUpdate=!0;let a=this.geometry,o=a.attributes.position,l=a.index,c=e.attributes.position,u=e.index,h=kc.getPrimitive(),f=kc.getPrimitive(),m=M_,g=HGe,v=null,x=null;r&&(v=GGe,x=WGe);let b=1/0,S=null,_=null;return s0.copy(t).invert(),F1.matrix.copy(s0),this.shapecast({boundsTraverseOrder:A=>Dp.distanceToBox(A),intersectsBounds:(A,M,C)=>C<b&&C<s?(M&&(F1.min.copy(A.min),F1.max.copy(A.max),F1.needsUpdate=!0),!0):!1,intersectsRange:(A,M)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:C=>F1.distanceToBox(C),intersectsBounds:(C,D,T)=>T<b&&T<s,intersectsRange:(C,D)=>{for(let T=C*3,R=(C+D)*3;T<R;T+=3){tu(f,T,u,c),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let O=A*3,L=(A+M)*3;O<L;O+=3){tu(h,O,l,o),h.needsUpdate=!0;let k=h.distanceToTriangle(f,m,v);if(k<b&&(g.copy(m),x&&x.copy(v),b=k,S=O/3,_=T/3),k<n)return!0}}}});{let C=u?u.count:c.count;for(let D=0,T=C;D<T;D+=3){tu(f,D,u,c),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let R=A*3,O=(A+M)*3;R<O;R+=3){tu(h,R,l,o),h.needsUpdate=!0;let L=h.distanceToTriangle(f,m,v);if(L<b&&(g.copy(m),x&&x.copy(v),b=L,S=R/3,_=D/3),L<n)return!0}}}}}),kc.releasePrimitive(h),kc.releasePrimitive(f),b===1/0?null:(i.point?i.point.copy(g):i.point=g.clone(),i.distance=b,i.faceIndex=S,r&&(r.point?r.point.copy(x):r.point=x.clone(),r.point.applyMatrix4(s0),g.applyMatrix4(s0),r.distance=g.sub(r.point).length(),r.faceIndex=_),i)}closestPointToPoint(e,t={},i=0,r=1/0){let n=i*i,s=r*r,a=1/0,o=null;if(this.shapecast({boundsTraverseOrder:c=>(H1.copy(e).clamp(c.min,c.max),H1.distanceToSquared(e)),intersectsBounds:(c,u,h)=>h<a&&h<s,intersectsTriangle:(c,u)=>{c.closestPointToPoint(e,H1);let h=e.distanceToSquared(H1);return h<a&&(M_.copy(H1),a=h,o=u),h<n}}),a===1/0)return null;let l=Math.sqrt(a);return t.point?t.point.copy(M_):t.point=M_.clone(),t.distance=l,t.faceIndex=o,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{nu(0,new Float32Array(t),oW),e.union(oW)}),e}},vO=Yf(WDe()),qGe=.5*(Math.sqrt(3)-1),G1=(3-Math.sqrt(3))/6,XGe=1/3,zc=1/6,Xx=e=>Math.floor(e)|0,lW=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),M4=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function YGe(e=Math.random){let t=Ure(e),i=new Float64Array(t).map(n=>lW[n%12*2]),r=new Float64Array(t).map(n=>lW[n%12*2+1]);return function(n,s){let a=0,o=0,l=0,c=(n+s)*qGe,u=Xx(n+c),h=Xx(s+c),f=(u+h)*G1,m=u-f,g=h-f,v=n-m,x=s-g,b,S;v>x?(b=1,S=0):(b=0,S=1);let _=v-b+G1,A=x-S+G1,M=v-1+2*G1,C=x-1+2*G1,D=u&255,T=h&255,R=.5-v*v-x*x;if(R>=0){let k=D+t[T],B=i[k],V=r[k];R*=R,a=R*R*(B*v+V*x)}let O=.5-_*_-A*A;if(O>=0){let k=D+b+t[T+S],B=i[k],V=r[k];O*=O,o=O*O*(B*_+V*A)}let L=.5-M*M-C*C;if(L>=0){let k=D+1+t[T+1],B=i[k],V=r[k];L*=L,l=L*L*(B*M+V*C)}return 70*(a+o+l)}}function QGe(e=Math.random){let t=Ure(e),i=new Float64Array(t).map(s=>M4[s%12*3]),r=new Float64Array(t).map(s=>M4[s%12*3+1]),n=new Float64Array(t).map(s=>M4[s%12*3+2]);return function(s,a,o){let l,c,u,h,f=(s+a+o)*XGe,m=Xx(s+f),g=Xx(a+f),v=Xx(o+f),x=(m+g+v)*zc,b=m-x,S=g-x,_=v-x,A=s-b,M=a-S,C=o-_,D,T,R,O,L,k;A>=M?M>=C?(D=1,T=0,R=0,O=1,L=1,k=0):A>=C?(D=1,T=0,R=0,O=1,L=0,k=1):(D=0,T=0,R=1,O=1,L=0,k=1):M<C?(D=0,T=0,R=1,O=0,L=1,k=1):A<C?(D=0,T=1,R=0,O=0,L=1,k=1):(D=0,T=1,R=0,O=1,L=1,k=0);let B=A-D+zc,V=M-T+zc,$=C-R+zc,q=A-O+2*zc,Y=M-L+2*zc,X=C-k+2*zc,ne=A-1+3*zc,F=M-1+3*zc,K=C-1+3*zc,re=m&255,oe=g&255,ce=v&255,de=.6-A*A-M*M-C*C;if(de<0)l=0;else{let ye=re+t[oe+t[ce]];de*=de,l=de*de*(i[ye]*A+r[ye]*M+n[ye]*C)}let se=.6-B*B-V*V-$*$;if(se<0)c=0;else{let ye=re+D+t[oe+T+t[ce+R]];se*=se,c=se*se*(i[ye]*B+r[ye]*V+n[ye]*$)}let xe=.6-q*q-Y*Y-X*X;if(xe<0)u=0;else{let ye=re+O+t[oe+L+t[ce+k]];xe*=xe,u=xe*xe*(i[ye]*q+r[ye]*Y+n[ye]*X)}let fe=.6-ne*ne-F*F-K*K;if(fe<0)h=0;else{let ye=re+1+t[oe+1+t[ce+1]];fe*=fe,h=fe*fe*(i[ye]*ne+r[ye]*F+n[ye]*K)}return 32*(l+c+u+h)}}function Ure(e){let t=new Uint8Array(512);for(let i=0;i<512/2;i++)t[i]=i;for(let i=0;i<512/2-1;i++){let r=i+~~(e()*(256-i)),n=t[i];t[i]=t[r],t[r]=n}for(let i=256;i<512;i++)t[i]=t[i-256];return t}var jl=new Js,KGe=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let r=0;r<e.count;r+=3){let n=1;jl.a.fromBufferAttribute(e,r),jl.b.fromBufferAttribute(e,r+1),jl.c.fromBufferAttribute(e,r+2),n*=jl.getArea(),t[r/3]=n}this.distribution=new Float32Array(e.count/3);let i=0;for(let r=0;r<t.length;r++)i+=t[r],this.distribution[r]=i;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let i=this.distribution[this.distribution.length-1],r=this.binarySearch(this.randomFunction()*i);return this.sampleFace(r,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,i=0,r=t.length-1,n=-1;for(;i<=r;){let s=Math.ceil((i+r)/2);if(s===0||t[s-1]<=e&&t[s]>e){n=s;break}else e<t[s]?r=s-1:i=s+1}return n}sampleFace(e,t,i){let r=this.randomFunction(),n=this.randomFunction();return r+n>1&&(r=1-r,n=1-n),jl.a.fromBufferAttribute(this.positionAttribute,e*3),jl.b.fromBufferAttribute(this.positionAttribute,e*3+1),jl.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(jl.a,r).addScaledVector(jl.b,n).addScaledVector(jl.c,1-(r+n)),jl.getNormal(i),this}},ZGe=Yf(wte()),$Ge=new tt,JGe=new tt,eWe=new tt,Rm;(e=>{function t(i){return i&&i.__isSPEObject}e.is=t})(Rm||(Rm={}));var Kk=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new tt,this.copyPreviousMatrix=!0,this.hiddenMatrix=new tt,this.matrixWorldRigid=new tt,this.shearScale=new tt,this.shearScaleInv=new tt}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof mr&&(t=t.uuid);let i=this;for(;i.parent;){if(i.parent.uuid===t)return!0;i=i.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let i of this.children)i.updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),i)for(let n of this.children)n.updateWorldMatrix(!1,!0)}traverseChildren(t,i=0){for(let r of this.children)Rm.is(r)&&r.traverseObject(t,i+1)}traverseObject(t,i=0){if(t(this,i)!==!0)for(let r of this.children)Rm.is(r)&&r.traverseObject(t,i+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,i=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:r,v:n,q:s}=(0,ZGe.SVD)(i),a=$Ge.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),o=JGe.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),l=eWe.copy(o).transpose();this.shearScale.makeScale(s[0],s[1],s[2]).multiply(l).premultiply(o),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(a,l).copyPosition(this.matrixWorld),s.every(c=>Math.abs(s[0]-c)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,i){this.updateWorldMatrix(!0,!1);let r=new tt().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),r.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof tt?t.hiddenMatrix.premultiply(r):t.applyMatrix4(r),t.updateWorldMatrix(!1,!1),this.add(t),i!==void 0&&(this.children.pop(),this.children.splice(i,0,t)),this}copy(t,i=!1){return super.copy(t,i),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,i,r,n,s,a){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},tWe=class extends Kk(mr){},iWe=e=>e.type==="Mesh",ia=class extends tWe{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let i=this.children[e];(i==null?void 0:i.object)!==t&&(i&&this.remove(i),i=new ia(t),this.add(i),this.children.splice(e,0,this.children.pop()),i.matrixWorldNeedsUpdate=!0,i.matrixAutoUpdate=!1,i.matrix=t.matrix,i.hiddenMatrix=t.hiddenMatrix),i.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return iWe(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},Hp=new j,Gp=new j,tv=new tt,Fre=[new j(-1,1,1),new j(-1,-1,1),new j(1,-1,1),new j(1,1,1),new j(-1,1,-1),new j(-1,-1,-1),new j(1,-1,-1),new j(1,1,-1)],rWe=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],nWe=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],cW=(e,t,i)=>{e.updateEntityBoxSize(Hp,Gp),tv.copy(t).multiply(e.matrixWorld),Gp.x===0&&Gp.y===0&&Gp.z===0?i.push(new j(Hp.x,Hp.y,Hp.z).applyMatrix4(tv)):Fre.forEach(r=>{i.push(r.clone().multiply(Gp).add(Hp).applyMatrix4(tv))})},uW=class extends Pn{constructor(){super(...arguments),this.matrix=new tt,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let i=new tt().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,i,t)}expandByObjectSize(e,t,i=!1){let r=[];return i===!0?e.traverseEntity(n=>{if(n.visible||n.cloner&&n.data.visible){if(!("geometry"in n)){r.push(new j);return}cW(n,t,r)}}):cW(e,t,r),this.setFromPoints(r)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(tv.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Gp).multiplyScalar(.5),this.getCenter(Hp),tv.copy(this.matrix).setPosition(Hp),this.vertices=Fre.map(e=>e.clone().multiply(Gp).applyMatrix4(tv))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=rWe.map(([e,t])=>new bl(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new j))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=nWe.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},cf={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},sWe=class extends Zte{constructor(){super()}getPoints(e=12){let t=[],i,r=this.getCurveLengths(),n=r[r.length-1]/r.length;for(let s=0,a=this.curves;s<a.length;s++){let o=a[s],l=s===0?r[s]:r[s]-r[s-1],c=Math.ceil(e*l/n),u=o.getPoints(c);for(let h=0;h<u.length;h++){let f=u[h];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},yO=.001;function xO(e,t,i){return t.clone().sub(e).cross(t.clone().sub(i)).length()<=yO}function P4(e,t){let i=new j(...e.position),r=new j(...e.controlNext.position),n=new j(...t.controlPrevious.position),s=new j(...t.position);return xO(i,r,s)&&xO(i,n,s)}function Hre(e){let t=e.points.map(u=>new j(...u.data.position)),i=[e.points[0]],r=new j(...i[0].data.position);for(let u=0;u<e.points.length-1;u++)xO(r,t[u],t[u+1])||(i.push(e.points[u]),r=t[u]);i.push(e.points[e.points.length-1]);let n=e.isClosed,s=i.length-(n?0:1),a=i.length,o=[];for(let u=0;u<a;u++){let h=i[u].data,f=new j(...h.position),m=new j(...h.controlPrevious.position),g=new j(...h.controlNext.position),v={position:f,baseRoundness:h.roundness,controlPrevious:m,controlNext:g};if(h.roundness===0||!e.isClosed&&(u===0||u===a-1)){o[u]={...v,removedLength:0};continue}let x=n&&u==0?a-1:u-1,b=n&&u==a-1?0:u+1,S=i[x].data,_=i[b].data,A=new j(...S.position),M=new j(..._.position),C=A.clone().sub(f).normalize(),D=M.clone().sub(f).normalize();Object.assign(v,{prevDir:C,nextDir:D});let T=P4(S,h),R=P4(h,_);if(!T||!R)o[u]={...v,removedLength:0};else{let O=C.clone().add(D).normalize(),L=O.clone().cross(C).length()/C.dot(O);o[u]={...v,tan:L,removedLength:h.roundness/L}}}for(let u=0;u<s;u++){let h=u,f=n&&u===a-1?0:u+1,m=o[h],g=o[f];if(m.removedLength!==0||g.removedLength!==0){let v=m.position.distanceTo(g.position);m.removedLength=Math.min(m.removedLength,v/2),g.removedLength=Math.min(g.removedLength,v/2)}}let l=[];for(let u=0;u<s;u++){let h=u,f=n&&u===a-1?0:u+1,m=o[h],g=o[f],v=null;if(!P4(i[h].data,i[f].data))m.position.distanceTo(g.position)>yO&&(v=new VE(m.position,m.controlNext,g.controlPrevious,g.position));else{let x=m.position.clone(),b=g.position.clone();(m.removedLength!==0||g.removedLength!==0)&&(m.nextDir&&x.add(m.nextDir.clone().setLength(m.removedLength)),g.prevDir&&b.add(g.prevDir.clone().setLength(g.removedLength))),x.distanceTo(b)>yO&&(v=new VE(x,x.clone().lerp(b,.3),b.clone().lerp(x,.3),b))}l[2*u+1]=v}for(let u=0;u<a;u++){let h=o[u];if(h.removedLength===0){l[2*u]=null;continue}let f=h.position,m=h.prevDir.clone().multiplyScalar(h.removedLength).add(f),g=h.nextDir.clone().multiplyScalar(h.removedLength).add(f),v=h.tan*h.removedLength,x=h.prevDir.clone().add(h.nextDir).normalize(),b=m.clone().lerp(g,.5),S=m.distanceTo(g)/2,_=x.clone().multiplyScalar(Math.sqrt(Math.pow(v,2)-Math.pow(S,2))).add(b),A=x.clone().multiplyScalar(-v).add(_),M=f.distanceTo(A)/f.distanceTo(b),C=h.prevDir.clone().multiplyScalar(M*f.distanceTo(m)).add(f),D=C.clone().lerp(A,2),T=m.clone().lerp(C,4/3),R=g.clone().lerp(D,4/3);l[2*u]=new VE(m,T,R,g)}let c=new sWe;return l.forEach(u=>{u&&c.add(u)}),c}var zi;(e=>{function t(i){return i&&i.__isEntity}e.is=t})(zi||(zi={}));var Eh=e=>zi.is(e),aWe={type:"completeState",isfromEntity:!0},oWe=["x","y","z"],D4=new j,lWe=new j().set(0,1,0),Zk=e=>class extends Kk(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new uW,this._recursiveBBox=new uW,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let i=this.children[t];if(zi.is(i))return i}entityChildrenCount(){let t=this.children.length;for(;t--;)if(zi.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let i=t.parent;if(zi.is(i))t=i;else return}return t}forInstancesRec(t){this.instances.forEach(i=>{i.disposed||t(i),i.forInstancesRec(t)})}super_Entity(t,i){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=i,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,i,r=!1){if(!(this.data.states.length===0&&!r)){for(let n of this.data.states)Jp.toOps(this.data,n.data).forEach(s=>{let a=aT.replaceProps(s,this.data);this.dataPatched=this.data,this.updateByPatchedOp(a,this.data,i)});if(t!==null){let n=this.data.states.data(t);n&&(this.dataPatched=Jp.patch(this.data,n),Jp.toOps(this.data,n).forEach(s=>{this.updateByPatchedOp(s,this.dataPatched,i)}))}r&&this.updateTransformState(this.dataPatched,i),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,i){t.setScalar(0),i.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{Eh(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let i;return this.traverseEntity(r=>{r.uuid===t&&(i=r)}),i}traverseSortNextHelper(){let t=this.parent;if(t){let i=t.children,r=i.indexOf(this)+1;if(zi.is(i[r]))return i[r];if(zi.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&zi.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let i=this;for(;t>0&&i!==null;)i=i.parent,t-=1;return i}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let i=this.parent;for(;i;){if(t===i)return!0;i=i.parent}return!1}countToAccestor(t){let i=0,r=this;for(;r!==t;){if(r===null)return-1;r=r.parent,i+=1}return i}forEachEntity(t){for(let i of this.children)Eh(i)&&t(i)}traverseEntityAncestors(t){this.traverseAncestors(i=>{zi.is(i)&&t(i)})}traverseConcreteEntity(t,i=0){if(t(this,i)!==!0)for(let r of this.children)Eh(r)&&r.isConcreteEntity&&r.traverseEntity(t,i+1)}traverseEntity(t,i=0){if(t(this,i)!==!0)for(let r of this.children)Eh(r)&&r.traverseEntity(t,i+1)}traverseVisibleEntity(t){t(this);for(let i of this.children)Eh(i)&&i.visible&&i.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(t){super.updateMatrixWorld(t),this.dispatchEvent({type:"updateMatrixWorld"})}copy(t,i=!1){return super.copy(t,i),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>Eh(t))}isAncestorOf(t){if(this.uuid===t)return!1;let i=!1;return this.traverseEntity(r=>{r.uuid===t&&(i=!0)}),i}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let i={position:this.position.toArray(),rotation:[this.rotation.x*wt.RAD2DEG,this.rotation.y*wt.RAD2DEG,this.rotation.z*wt.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return ER(i,t)}getTransformValues(t,i,r){return i[t].map((n,s)=>(r==null?void 0:r.shared.getVariable(n,[this.uuid,t,oWe[s]]))??n)}updateTransformState(t,i){let r=!1;return t.position&&(this.position.fromArray(this.getTransformValues("position",t,i)),r=!0),t.rotation&&(D4.fromArray(this.getTransformValues("rotation",t,i)).multiplyScalar(wt.DEG2RAD),this.rotation.setFromVector3(D4),r=!0),t.scale&&(this.scale.fromArray(this.getTransformValues("scale",t,i)),r=!0),t.hiddenMatrix!==void 0&&(r=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??Rv.identity)),r&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(n=>{n.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),r}onVariableUpdate(t=!1){if(t){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)zi.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{zi.is(t)&&t.disposeRecursively()})}toState(t=[]){let i={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return ER(i,t)}updateByObjUpdateOp(t,i){t!==void 0&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},i,!1)}updateByOp(t,i,r,n){let s=this.data;this.data=i;let a=t,o=Ir(t.path,["states","*"]);if(o!==null){if(t.type===0){let[l]=o;if((this==null?void 0:this.stateSelection)===l){let c={...t.props};if(delete c.name,Object.values(t.props).some(u=>u===void 0)){let u=this.data;if(u!==void 0){let h=os.zoom(u,t.path.slice(2));if(h)for(let f in t.props)t.props[f]===void 0&&f in h&&(c[f]=h[f])}}a={...t,props:c,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:u,...h}=l;l=h}if(t.props.material!==void 0&&"material"in l){let{material:u,...h}=l;l=h}let c=os.removeOverridden(t.path,t.props,l);a={...t,props:c}}}if(this.updateByPatchedOpBase(a,Jp.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),r),Ir(t.path,["overrides"])){let l=[],c=[...t.path];for(l.push(c[1]),c.splice(0,2);c.length>0&&c[0]==="descendants";)l.push(c[1]),c.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let u of Object.keys(t.props)){l[l.length-1]=u;let h=r.scene.findInstance([this.uuid,...l]);h&&(h.overrideData=t.props[u],h.updateState(bf.apply(h.component.data,h.overrideData),r))}}else{let u=r.scene.findInstance([this.uuid,...l]);if(u){let h=os.zoom(u.component.data,c);if(t={...t,path:c},t.type===0){let f=t.props;if(h)for(let[m,g]of Object.entries(t.props))g===void 0&&(f===t.props&&(f={...t.props}),f[m]=h[m]);t={...t,props:f}}u.overrideData=vT.resolve(i.overrides,l),u.updateByOp(t,Cs.applySimple(u.data,t),r,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let c;for(let u of of.rootOverrideProps)u in t.props&&(c===void 0&&(c={}),c[u]=t.props[u]);c&&(l={...t,props:c})}else for(let c of of.rootOverrideProps)if(Ir(t.path,[c])){l=t;break}l!==void 0&&this.instances.forEach(c=>{if(c.isInstanceRoot){let u=bf.filterOp(c.overrideData,l);u&&c.updateByOp(u,Cs.applySimple(c.data,u),r,!0)}}),this.instances.forEach(c=>{if(!c.isInstanceRoot){let u=bf.filterOp(c.overrideData,t);if(u){let h;s===c.data&&t===u?h=i:h=Cs.applySimple(c.data,u),c.updateByOp(u,h,r,!0)}}})}}updateByPatchedOpBase(t,i,r){if(this.dataPatched=i,t.path.length===0&&t.type===0)t.props.type!==void 0&&!Im.is(t.props.type)&&cf.changeEntityProptotype(this,i,r);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){cf.changeEntityProptotype(this,i,r);for(let n of this.children)zi.is(n)&&n.updateVisible(r.scene)}this.updateByPatchedOp(t,i,r)}updateByPatchedOp(t,i,r){var n;if(t.path.length===0&&t.type===0?this.updateState(t.props,r):t.type===0&&("resolutionLevel"in t.props||"useChildrenColors"in t.props)&&this.updateState(i,r),t.path[0]==="morphTargetInfluences"&&t.type===0){let s=(n=i.morphTargetInfluences.get(t.path[1]))==null?void 0:n.data.name;s&&this.updateMorphInfluences(s,r.shared.getVariable(t.props.value,[this.uuid,"morphTargetInfluences",s]))}if(Ir(t.path,["pathSnapping"])!==null&&this.updatePathSnapping(i.pathSnapping),Ir(t.path,["cloner"])!==null){let s=Cs.drop(t,1);s.path.length===0&&s.type===0&&s.props.disabled===!0?this.setFromClonerState(null,r):this.cloner?this.cloner.updateState(i.cloner,r.scene):(this.setFromClonerState(i.cloner,r),this.expandCloner(r.scene)),this.updateVisible(r.scene)}}updatePathSnapping(t=this.dataPatched.pathSnapping){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){var g,v,x,b,S;let i=((g=this._updatedPathSnapping)==null?void 0:g.pathId)??this.dataPatched.pathSnapping.pathId,r=((v=this._updatedPathSnapping)==null?void 0:v.slide)??this.dataPatched.pathSnapping.slide??0,n=((x=this._updatedPathSnapping)==null?void 0:x.offset)??this.dataPatched.pathSnapping.offset??0,s=((b=this._updatedPathSnapping)==null?void 0:b.orientation)??this.dataPatched.pathSnapping.orientation;if(i===null)return;let a=t.find(i);if(!a||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let o=a.data;if(o.geometry.path.points.length<=1)return;let l=Hre(o.geometry.path),c=(r+n)%1;r+n===1&&c===0&&(c=1);let u=null;try{u=l.curves.length?l.getPointAt(c):null}catch{}if(u===null)return;let h=this.parent?(S=this.parent)==null?void 0:S.matrixWorld:new tt;a.updateMatrixWorld();let f=new tt().multiplyMatrices(h.clone().invert(),a.matrixWorld);u.applyMatrix4(f);let m={position:u.toArray(),rotation:o.rotation};if(s==="tangential"){let _=new tt().extractRotation(a.matrixWorld),A=l.getTangentAt(c).applyMatrix4(_).add(u),M=new tt().lookAt(u,A,lWe),C=D4.setFromEuler(new as().setFromRotationMatrix(M)).multiplyScalar(wt.RAD2DEG);m={...m,rotation:C.toArray()}}this.updateTransformState(m),this.traverseEntity(_=>{_._cameraType&&_.dispatchEvent(aWe)})}updateVisible(t){var r;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((r=this.dataPatched.cloner)==null?void 0:r.hideBase)!==!0),!t)return;let i=!1;this.traverseEntity(n=>{if(n.data.type==="Splat")return i=!0,!0}),i&&t.reloadSplats()}updateState_Entity(t,i){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(i==null?void 0:i.scene),this.resetBBoxNeedsUpdate()),i&&"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,i),this.updateVisible(i.scene)),this.updateTransformState(t,i)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof cf.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,i){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new cf.Cloner(this,t),i.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,i.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}requestRender(){this.dispatchEvent({type:"requestRender"})}},Gre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var l,c;let i=(l=e.parameters)==null?void 0:l.radiusTop,r=(c=e.parameters)==null?void 0:c.radiusBottom,n=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);n.thetaLength=wt.clamp(n.thetaLength,0,360);let s=n.width/2,a=n.radiusTop??s,o=n.radiusBottom??s;if(a===o?(a=s,o=s):a>o?(a=s,o=o*s/a):(a=a*s/o,o=s),n.shapeBlendNode){a=i??s,o=r??s;let u=Math.max(a,o)*2;n.width=u,n.depth=u}return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),radiusTop:a,radiusBottom:o})}}static build(e){let{width:t,depth:i,height:r,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l,radiusTop:c,radiusBottom:u,cornerRadius:h,cornerSegments:f,hollow:m}=e.parameters,g;return l===0?(g=new Rt,g.setAttribute("position",new yt([],3))):h||m?g=new Wre(c,u,r,n,s,a,o,l*Math.PI/180,h,h,f,m):g=new mk(c,u,r,n,s,a,o,l*Math.PI/180),g.scale(1,1,i/t),Object.assign(g,{userData:{...e,type:"CylinderGeometry"}})}};function Od(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function hW(e){return new pe(e.y,-e.x)}var Wre=class extends Rt{constructor(e,t,i,r,n,s,a,o,l,c,u,h,f=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,i=i||1,r=Math.floor(r)||8,n=Math.floor(n)||1,s=s!==void 0?s:!1,a=a!==void 0?a:0,o=o!==void 0?o:Math.PI*2,s&&(l=0,c=0);let m=[],g=[],v=[],x=[],b=0,S=i/2,_=new j,A=new j;f&&e==0&&(e=l),f&&t==0&&(t=c);let M=new pe(e,S),C=new pe(t,-S),D=null,T=null,R=null,O=null,L=M.clone().sub(C),k=0,B=0,V=0;h>0&&(k=Math.min(e,t)*(1-h),B=e-k,V=t-k);let $=M.clone();$.x-=k;let q=Math.PI-L.angle(),Y=L.angle(),X=Math.tan(Y/2),ne=Math.tan(q/2),F=X+ne,K=h?F:ne,re=h?F:X;if(l=Math.min(l,(e-B)/K,L.length()/F),c=Math.min(c,(t-V)/re,L.length()/F),l>0){let fe=l/X;D=M.clone().sub(new pe(fe,l)),h&&(R=D.clone(),R.x-=k-F*l),M.sub(L.clone().setLength(fe))}if(c>0){let fe=c/ne;T=C.clone().sub(new pe(fe,-c)),C.add(L.clone().setLength(fe)),h&&(O=T.clone(),O.x-=k-F*c,$.sub(L.clone().setLength(fe)))}L=M.clone().sub(C);let oe=L.length()<.5,ce=[];for(let fe=0;fe<=r;fe++){let ye=[],_e=fe/r,Te=_e*o+a,Ce=new pe(Math.sin(Te),Math.cos(Te));O&&T?(de(ye,_e,Ce,q,c,O,-1,!0),de(ye,_e,Ce,Y,c,T,-1,!1)):T?(se(ye,Ce,T.x,0,-1),de(ye,_e,Ce,Y,c,T,-1,!1)):s||se(ye,Ce,t,V,-1);let Le=hW(L).normalize();if(Od(Le,Ce,_),!oe)for(let Ke=0;Ke<=n;Ke++){let Xe=Ke/n,pt=L.clone().multiplyScalar(Xe).add(C);Od(pt,Ce,A),g.push(A.x,A.y,A.z),v.push(_.x,_.y,_.z),x.push(_e,.5+A.y/i),ye.push(b++)}if(R&&D?(de(ye,_e,Ce,q,l,D,1,!1),de(ye,_e,Ce,Y,l,R,1,!0)):D?(de(ye,_e,Ce,q,l,D,1,!1),se(ye,Ce,D.x,0,1)):s||se(ye,Ce,e,B,1),h&&!oe){let Ke=hW(L).multiplyScalar(-1).normalize();Od(Ke,Ce,_);for(let Xe=0;Xe<=n;Xe++){let pt=Xe/n,ct=L.clone().multiplyScalar(-pt).add($);Od(ct,Ce,A),g.push(A.x,A.y,A.z),v.push(_.x,_.y,_.z),x.push(_e,.5+A.y/i),ye.push(b++)}}h&&!s&&ye.push(ye[0]),ce.push(ye)}for(let fe=0;fe<ce.length-1;fe++)for(let ye=0;ye<ce[0].length-1;ye++){if(s&&h&&ye==n)continue;let _e=ce[fe][ye],Te=ce[fe+1][ye],Ce=ce[fe+1][ye+1],Le=ce[fe][ye+1],Ke=g[Ce*3+0],Xe=g[Ce*3+2];m.push(_e,Te,Le),(Ke!=0||Xe!=0)&&m.push(Te,Ce,Le)}o<Math.PI*2&&(xe(-1,ce[0],a),xe(1,ce[ce.length-1],a+o)),this.setIndex(m),this.setAttribute("position",new yt(g,3)),this.setAttribute("normal",new yt(v,3)),this.setAttribute("uv",new yt(x,2));function de(fe,ye,_e,Te,Ce,Le,Ke,Xe){for(let pt=0;pt<u+1;pt++){let ct=pt/u,ot=Ke<0?ct:1-ct;Xe&&(ot-=1),ot*=Te;let rt=new pe(Math.sin(ot),Math.cos(ot)*Ke),Dt=rt.clone().multiplyScalar(Ce).add(Le);Od(Dt,_e,A),g.push(A.x,A.y,A.z),Od(rt,_e,_),v.push(_.x,_.y,_.z),x.push(ye,.5+A.y/i),fe.push(b++)}}function se(fe,ye,_e,Te,Ce){let Le=new j,Ke=new pe,Xe=[_e,Te];Ce<0&&Xe.reverse();for(let pt of Xe)Ke.set(pt,S*Ce),Od(Ke,ye,Le),g.push(Le.x,Le.y,Le.z),v.push(0,Ce,0),x.push(.5,.5),fe.push(b++)}function xe(fe,ye,_e){let Te=new pe(Math.sin(_e),Math.cos(_e)),Ce=new pe(-Math.cos(_e),Math.sin(_e)),Le=new j,Ke=fe<0?(ct,ot,rt)=>m.push(ct,ot,rt):(ct,ot,rt)=>m.push(ct,rt,ot),Xe=new pe((e+t+B+V)/4,0);Od(Xe,Te,Le),g.push(Le.x,Le.y,Le.z),v.push(Ce.x,0,Ce.y),x.push(.5,.5);let pt=b++;for(let ct of ye){let ot=g.slice(ct*3,ct*3+3);g.push(...ot),v.push(Ce.x,0,Ce.y);let rt=x.slice(ct*2,ct*2+2);x.push(...rt),b++}for(let ct=pt+1;ct<b-1;ct++)Ke(pt,ct,ct+1);Ke(pt,b-1,pt+1)}}},cWe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return i.thetaLength=wt.clamp(i.thetaLength,0,360),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,depth:i,height:r,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:u,cornerSegments:h}=e.parameters,f;return l===0?(f=new Rt,f.setAttribute("position",new yt([],3))):c>0||u>0||l<360?f=new Wre(0,t/2,r,n,s,a,o,l*Math.PI/180,c,u,h,0,!0):f=new gk(t/2,r,n,s,a),f.scale(1,1,i/t),Object.assign(f,{userData:{...e,type:"ConeGeometry"}})}},uWe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,widthSegments:n,heightSegments:s,depthSegments:a,cornerRadius:o,cornerSegments:l}=e.parameters,c;return o===0?c=new uc(t,i,r,n,s,a):c=new hWe(t,i,r,n,s,a,o,l),Object.assign(c,{userData:{...e,type:"CubeGeometry"}})}},I4=Math.PI/2,hWe=class extends Rt{constructor(e=1,t=1,i=1,r=1,n=1,s=1,a=0,o=4){super(),this.type="BoxGeometry",r=Math.floor(r),n=Math.floor(n),s=Math.floor(s),o=Math.floor(o),a=Math.min(a,e/2,t/2,i/2);let l=[],c=[],u=[],h=[],f=0;m("z","y","x",-1,-1,i,t,e,s,n),m("z","y","x",1,-1,i,t,-e,s,n),m("x","z","y",1,1,e,i,t,r,s),m("x","z","y",1,-1,e,i,-t,r,s),m("x","y","z",1,-1,e,t,i,r,n),m("x","y","z",-1,-1,e,t,-i,r,n),a>0&&(g("z","y","x",-1,-1,1,i,t,e,s),g("z","y","x",1,-1,-1,i,t,e,s),g("z","y","x",-1,1,-1,i,t,e,s),g("z","y","x",1,1,1,i,t,e,s),g("x","y","z",-1,-1,-1,e,t,i,r),g("x","y","z",1,-1,1,e,t,i,r),g("x","y","z",-1,1,1,e,t,i,r),g("x","y","z",1,1,-1,e,t,i,r),g("y","x","z",-1,-1,1,t,e,i,n),g("y","x","z",1,-1,-1,t,e,i,n),g("y","x","z",1,1,1,t,e,i,n),g("y","x","z",-1,1,-1,t,e,i,n),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(l),this.setAttribute("position",new yt(c,3)),this.setAttribute("normal",new yt(u,3)),this.setAttribute("uv",new yt(h,2));function m(x,b,S,_,A,M,C,D,T,R){let O=(M-2*a)/T,L=(C-2*a)/R,k=M/2-a,B=C/2-a,V=D/2,$=T+1,q=R+1,Y=0,X=new j;for(let ne=0;ne<q;ne++){let F=ne*L-B;for(let K=0;K<$;K++){let re=K*O-k;X[x]=re*_,X[b]=F*A,X[S]=V,c.push(X.x,X.y,X.z),X[x]=0,X[b]=0,X[S]=D>0?1:-1,u.push(X.x,X.y,X.z),h.push(K/T),h.push(1-ne/R),Y+=1}}for(let ne=0;ne<R;ne++)for(let F=0;F<T;F++){let K=f+F+$*ne,re=f+F+$*(ne+1),oe=f+(F+1)+$*(ne+1),ce=f+(F+1)+$*ne;l.push(K,re,ce),l.push(re,oe,ce)}f+=Y}function g(x,b,S,_,A,M,C,D,T,R){let O=(C-2*a)/R,L=C/2-a,k=D/2-a,B=T/2,V=R+1,$=0,q=new j,Y=new j;for(let X=0;X<o+1;X++){let ne=X/o*I4,F=Math.sin(ne)*a,K=(1-Math.cos(ne))*a,re=Math.sin(ne),oe=Math.cos(ne);q[b]=(k+F)*A,q[S]=(B-K)*M,Y[x]=0,Y[b]=re*Math.sign(q[b]),Y[S]=oe*Math.sign(q[S]);for(let ce=0;ce<V;ce++){let de=ce*O-L;q[x]=de*_,c.push(q.x,q.y,q.z),u.push(Y.x,Y.y,Y.z),h.push(ce/R),h.push(0),$+=1}}for(let X=0;X<o;X++)for(let ne=0;ne<R;ne++){let F=f+ne+V*X,K=f+ne+V*(X+1),re=f+(ne+1)+V*(X+1),oe=f+(ne+1)+V*X;l.push(F,K,oe),l.push(K,re,oe)}f+=$}function v(x,b,S){let _=new j,A=new j(e/2,t/2,i/2);A.subScalar(a);let M=[],C=x*b*S>0?(T,R,O)=>l.push(T,R,O):(T,R,O)=>l.push(T,O,R);for(let T=0;T<=o;T++){let R=[],O=I4*(1-T/o),L=Math.cos(O),k=Math.sin(O),B=0;for(let V=0;V<=T;V++){let $=Math.cos(B),q=Math.sin(B);_.x=L*$,_.y=k,_.z=L*q;let Y=A.clone().addScaledVector(_,a);c.push(x*Y.x,b*Y.y,S*Y.z),u.push(x*_.x,b*_.y,S*_.z),h.push(0,0),R.push(f++),B+=I4/T}M.push(R)}let D=M.length-1;for(let T=0;T<D;T++){let R=M[T],O=M[T+1],L=R.length-1;C(R[0],O[1],O[0]);for(let k=1;k<=L;k++)C(R[k-1],R[k],O[k]),C(R[k],O[k+1],O[k])}}}},$k=class extends Rt{constructor(e=[],t=[],i="",r=1,n=.2,s=4){super(),this.type="PolyhedronGeometryRound";let a=[],o=[],l=[];c(),u(),this.setAttribute("position",new yt(a,3)),this.setAttribute("normal",new yt(l,3)),this.setAttribute("uv",new yt(o,2));return;function c(){var Y;n=Math.min(1-1e-5,n),n==0&&(s=0);let h={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[i],f=new j,m=f.clone(),g=new Js,v=n*r,x=r-v,b=s+1,S=new j,_=(X,ne)=>S.subVectors(X,ne).normalize(),A=(X,ne)=>Array(X).fill(void 0).map(ne),M=A(e.length/3,(X,ne)=>new j().fromArray(e,ne*3).setLength(r)),C=[],D=1e6;for(let X=0;X<M.length;X++){let ne=M[X],F=[],K,re,oe,ce=1e10,de=-1;for(;(de=t.indexOf(X,de+1))!=-1;){let ye=de-de%3;K=t[ye+(de+1)%3],re=t[ye+(de+2)%3],oe=ne.distanceToSquared(M[K]),ce=Math.min(ce,oe),F.push([K,re,oe])}ce+=1e-6;let se=[],xe=0,fe=F.length;for(let ye=0;ye<fe;ye++){[K,re,oe]=F[xe];let _e=((Y=C[K])==null?void 0:Y.includes(X))==!0;oe<=ce&&se.push(K+ +_e*D),xe=F.findIndex(Te=>Te[0]==re)}C.push(se)}let T=[];{let X=0,ne=0,F,K,re=h==3;for(let oe=0;oe<=s;oe++){F=oe*(oe+1)/2,K=(oe+1)*(oe+2)/2;for(let ce=0;ce<s-oe;ce++)[X,ne]=[F+ce+oe+2,K+ce+oe+3],T.push(F,K,...re?[ne,F]:[X,K],ne,X),[F,K]=[X,ne];T.push(F,K,F+s+2)}}let R=f.clone(),O=f.clone(),L=f.clone(),k=f.clone(),B=f.clone(),V=[],$=A(M.length,()=>A(h,()=>f.clone()));for(let X=0;X<M.length;X++){f.copy(M[X]).normalize(),R.copy(f).multiplyScalar(x);let ne=C[X];for(let se=0;se<ne.length;se++){let xe=ne[se],fe=ne[(se+1)%h];g.setFromPointsAndIndices(M,X,xe%D,fe%D),g.b.sub(g.a).setLength(1e10).add(g.a),g.c.sub(g.a).setLength(1e10).add(g.a),g.closestPointToPoint(R,$[X][se])}let F=[],K=[],re=[],oe=new j;s==0&&[...$[X]].reduce((se,xe)=>se.add(xe),oe).multiplyScalar(1/h);for(let se=0;se<h;se++){let xe=[],fe=(se-1+h)%h,ye=$[X][fe],_e=$[X][se];f.copy(ye).sub(R),m.copy(_e).sub(R);let Te=R.angleTo(f),Ce=f.angleTo(m),Le=Math.cos(Te)*v;s==0?O.copy(oe):O.copy(R).setLength(x+Le),K.push(Le);let Ke=[O,ye,_e];for(let Xe=0;Xe<2;Xe++){let pt=Ke[Xe],ct=Ke[Xe+1];k.subVectors(pt,R),B.subVectors(ct,R),L.crossVectors(k,B).normalize();for(let ot=0;ot<b;ot++){let rt=[Te,Ce][Xe]*ot/b;f.copy(k).applyAxisAngle(L,rt).add(R),F.push(f.clone()),Xe&&(_(f,R),xe.push([ot==0?pt:f.clone(),S.clone()]))}Xe&&(_(ct,R),xe.push([ct,S.clone()]))}re.push(xe)}V.push(re);let ce=2*b,de=2;for(let se=0;se<h;se++){let xe=ce*se,fe=ce*((se+1)%h),ye=[F[xe]];for(let Te=1;Te<b;Te++){k=F[xe+Te],B=F[fe+Te],ye.push(k);for(let Ce=1,Le=Te-de+1;Ce<=Le;Ce++)f.lerpVectors(k,B,Ce/(Le+1)),f.sub(R).setLength(K[se]).add(R),ye.push(f.clone());ye.push(B)}for(let Te=0;Te<b;Te++)ye.push(F[Te+b+xe]);ye.push(F[fe+b]);let _e=T.map(Te=>ye[Te]);a.push(..._e.map(Te=>[Te.x,Te.y,Te.z]).flat()),l.push(..._e.map(Te=>(_(Te,R),[S.x,S.y,S.z])).flat())}}let q=[];for(let X=0;X<C.length;X++)for(let ne=0;ne<h;ne++){let F=C[X][ne];if(F<D){let K=C[F].findIndex(ce=>ce%D==X),re=V[X][ne],oe=V[F][K];for(let ce=0;ce<b;ce++){let de=re[ce],se=oe[b-ce],xe=re[ce+1],fe=oe[b-(ce+1)];[de,se,xe,xe,se,fe].forEach(ye=>{a.push(ye[0].x,ye[0].y,ye[0].z),l.push(ye[1].x,ye[1].y,ye[1].z)})}q.push(re[0][0],oe[b][0],re[b][0],oe[0][0])}}for(;q.length;){let X,ne,F,K;[X,ne]=q.splice(0,2);let re=[X];for(;X!=ne;)re.push(ne),F=q.indexOf(ne),K=F%2,ne=q.splice(F-K,2)[1-K];S.subVectors(re[0],re[1]).cross(f.subVectors(re[0],re[2])).normalize();let oe=S.dot(re[0])<0;oe&&S.negate();for(let ce=1;ce<=re.length-2;ce++)[re[ce+ +oe],re[ce+1-+oe],re[0]].forEach(de=>{a.push(de.x,de.y,de.z),l.push(S.x,S.y,S.z)})}}function u(){let h=new j;for(let C=0;C<a.length;C+=3){h.x=a[C+0],h.y=a[C+1],h.z=a[C+2];let D=A(h)/2/Math.PI+.5,T=M(h)/Math.PI+.5;o.push(D,1-T)}let f=new j,m=new j,g=new j,v=new j,x=new pe,b=new pe,S=new pe,_=(C,D,T,R)=>{R<0&&C.x===1&&(o[D]=C.x-1),T.x===0&&T.z===0&&(o[D]=R/2/Math.PI+.5)};for(let C=0,D=0;C<a.length;C+=9,D+=6){f.set(a[C+0],a[C+1],a[C+2]),m.set(a[C+3],a[C+4],a[C+5]),g.set(a[C+6],a[C+7],a[C+8]),x.set(o[D+0],o[D+1]),b.set(o[D+2],o[D+3]),S.set(o[D+4],o[D+5]),v.copy(f).add(m).add(g).divideScalar(3);let T=A(v);_(x,D+0,f,T),_(b,D+2,m,T),_(S,D+4,g,T)}for(let C=0;C<o.length;C+=6){let D=o[C+0],T=o[C+2],R=o[C+4],O=Math.max(D,T,R),L=Math.min(D,T,R);O>.9&&L<.1&&(D<.2&&(o[C+0]+=1),T<.2&&(o[C+2]+=1),R<.2&&(o[C+4]+=1))}function A(C){return Math.atan2(C.z,-C.x)}function M(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}}static fromJSON(e){return new $k(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},dWe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,detail:n,corner:s,cornerSides:a}=e.parameters,o=n===0&&s!==0?new qre(t*.5,s,a):new Jte(t*.5,n);return o.scale(1,i/t,r/t),Object.assign(o,{userData:{...e,type:"DodecahedronGeometry"}})}},qre=class extends $k{constructor(e=1,t=.2,i=4){let r=(1+Math.sqrt(5))/2,n=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o="DodecahedronGeometry";super(s,a,o,e,t,i),this.type=o}static fromJSON(e){return new qre(e.radius,e.corner,e.cornerSides)}},W1=1e-12,Jk=class{constructor(e){this.position=new pe,this.startPosition=new pe,this.uuid=wt.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new Jk(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},bO=class extends Jk{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new bO(this.parent).copy(this)}},iv=class extends Jk{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new bO(this),new bO(this))}static create(e,t){let i=new iv(e,new pe(...t.position));return i.controls[0].position.set(...t.controlPrevious.position),i.controls[1].position.set(...t.controlNext.position),i.roundness=t.roundness,i.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,i}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let i=0,r=this.controls.length;i<r;i++){let n=this.controls[i];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new iv(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var i,r;let e=(i=this.curveBefore)==null?void 0:i.getTangentAt(1),t=(r=this.curveAfter)==null?void 0:r.getTangentAt(0);return[e,t]}computeNormals(e=new pe,t=new pe){let[i,r]=this.computeTangents();return i&&r&&(dW(i,e),dW(r,t)),[e,t]}computeTangent(e=new pe){let[t,i]=this.computeTangents();return t&&i&&e.copy(t).add(i).normalize(),e}computeNormal(e=new pe){let[t,i]=this.computeNormals();return e.copy(t).add(i).normalize(),e}};function dW(e,t=new pe){let i=e.length();return t.set(-e.y/i,e.x/i)}var ez=e=>e,gy=new pe,Y3=new pe,fWe=new pe,pWe=new pe,mWe=new pe,gWe=new pe,Xre=new j,Yre=new j;function vWe(e){let t=new pe;t.addVectors(e.v0,gy.subVectors(e.v1,e.v0).multiplyScalar(2/3));let i=new pe;return i.addVectors(e.v2,Y3.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new Zl(e.v0,t,i,e.v2)}function gx(e,t,i=Number.EPSILON){return Math.abs(e-t)<i}function yWe(e,t,i=Number.EPSILON){return e.distanceTo(t)<i}function xWe(e,t,i=Number.EPSILON){return e.distanceTo(t)<i}function Qre(e,t,i){let r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)),s=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));return Math.acos((n*n+r*r-s*s)/(2*n*r))}function bWe(e,t,i){return pW(e,t)&&pW(t,i)&&wO(e.position,t.position,i.position)}function wO(e,t,i){return gy.copy(t).sub(e).cross(Y3.copy(i).sub(e))===0}function wWe(e,t,i,r,n){let s=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=(e.y+t.y)/2,o=(e.x+t.x)/2,l=Math.sqrt(Math.pow(i,2)-Math.pow(s/2,2))*(e.y-t.y)/s,c=Math.sqrt(Math.pow(i,2)-Math.pow(s/2,2))*(t.x-e.x)/s;return r.set(o+l,a+c),n.set(o-l,a-c),[r,n]}function SWe(e,t,i){let r=e.distanceTo(i),n=t.distanceTo(i);return r<n?t:e}function _We(e,t,i,r,n,s){let a=t.x-e.x,o=t.y-e.y,l=i.x-e.x,c=i.y-e.y,u=Math.sqrt((a+l)*(a+l)+(o+c)*(o+c)),h;return Qre(t,e,i)>Math.PI&&(u*=-1),gx(c,o)?h=(o+c)*(r/u-.5)*8/3/(a-l):h=(a+l)*(r/u-.5)*8/3/(c-o),n.set(t.x-h*o,t.y+h*a),s.set(i.x+h*c,i.y-h*l),[n,s]}function fW(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function pW(e,t){return wO(e.position,e.controls[1].position,t.position)&&wO(e.position,t.controls[0].position,t.position)}function EWe(e,t,i,r,n=.5){let s=gy.subVectors(t,e).multiplyScalar(n).add(e),a=Y3.subVectors(i,t).multiplyScalar(n).add(t),o=fWe.subVectors(r,i).multiplyScalar(n).add(i),l=s,c=pWe.subVectors(a,s).multiplyScalar(n).add(s),u=mWe.subVectors(o,a).multiplyScalar(n).add(a),h=o,f=gWe.subVectors(u,c).multiplyScalar(n).add(c);return[e.x,e.y,l.x,l.y,c.x,c.y,f.x,f.y,u.x,u.y,h.x,h.y,r.x,r.y]}function AWe(e,t,i=12,r=!0){let n=Yre.set(0,0,0),s,a=0;for(let o=0;o<t.length;o++){let l=ez(t[o]),c=gy,u=xm(l,i);for(let h=0;h<=u;h++)if(l instanceof Zl||l instanceof zf||l instanceof nc){if(l.getPoint(h/u,c),n.set(c.x,c.y,0),s!==void 0&&xWe(s,n))continue;s===void 0&&(s=Xre),s.copy(n),e.setXYZ(a,n.x,n.y,n.z),a++}}return r&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),e}function TWe(e,t,i,r=12,n=!0){let s=Yre.set(0,0,0),a=0,o=[];for(let l=0;l<t.length;l++){if(i[l]===!1)continue;let c,u=ez(t[l]),h=gy,f=xm(u,r);o.push(f);for(let m=0;m<=f;m++)if(u instanceof Zl||u instanceof zf||u instanceof nc){if(u.getPoint(m/f,h),s.set(h.x,h.y,0),c==null?void 0:c.equals(s))continue;c===void 0?c=Xre:(e.setXYZ(a,c.x,c.y,c.z),a++,e.setXYZ(a,s.x,s.y,s.z),a++),c.copy(s)}}return n&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),o}function mW(e,t=12,i=!1){let r=[];for(let n=0,s=e.length;n<s;n++){let a=e[n],o=0;if(i&&a.roundedCurveCorner!==void 0){let l=xm(a.roundedCurveCorner,t)*.5;n>0&&(r[n-1]+=l),o+=l}a.curveAfter!==void 0&&(o+=xm(a.curveAfter,t)),r.push(o)}return e.length>0&&i&&e[0].roundedCurveCorner!==void 0&&(r[e.length-1]+=xm(e[0].roundedCurveCorner,t)*.5),r}function xm(e,t=12){return e&&e instanceof O3?t*2:e&&(e instanceof nc||e instanceof Kte)?1:e&&e instanceof pk?t*e.points.length:t}function CWe(e,t,i=12,r=!0){let n,s=0;for(let a=0;a<t.length;a++){let o=ez(t[a]),l=xm(o,i),c=gy;for(let u=0;u<=l;u++)if(o instanceof Zl||o instanceof zf||o instanceof nc){if(o.getPoint(u/l,c),n!==void 0&&yWe(n,c,W1))continue;n===void 0&&(n=Y3),n.copy(c),e.push(c.x,c.y),s++}}return gx(e[0],e[e.length-2],W1)&&gx(e[1],e[e.length-1],W1)&&(e.pop(),e.pop()),r&&s>1&&!(gx(e[s-1],e[1],W1)&&gx(e[s-2],e[0],W1))&&(e.push(e[0],e[1]),s++),e}var R4=new pe,MWe=new pe,PWe=new pe,DWe=new pe,IWe=new pe,RWe=new pe,gn=class extends WA{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new ao(new j(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=wt.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,i){let r=new gn;return r.isClosed=e.isClosed,r.points=e.points.map(n=>iv.create(n.id,n.data)),typeof e.roundness=="number"&&(r.roundness=e.roundness),r.shapeHoles=e.shapeHoles.map(n=>gn.createFromState(n)),t!==void 0&&i!==void 0&&r.applySize(t,i),r.update(),r}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,i=this.points.length;t<i;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,i=this.points.findIndex(r=>r.uuid===e);if(i<0){let r=t;for(let n=0,s=this.shapeHoles.length;n<s;n++){let a=this.shapeHoles[n],o=a.points.length,l=a.getPointIndexById(e);if(l<0)r+=o;else return l+r}}return i}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let i=0,r=this.shapeHoles.length;i<r;i++){let n=this.shapeHoles[i],s=e-t;if(s<=n.points.length-1)return n.points[s];t+=n.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let i=0,r=this.shapeHoles.length;i<r;i++){let n=this.shapeHoles[i],s=n.points.indexOf(e);if(s>=0)return t+s;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let i=R4.set(e,t);for(let r=0,n=this.points.length;r<n;r++){let s=this.points[r];s.position.multiply(i),s.controls[0].position.multiply(i),s.controls[1].position.multiply(i)}for(let r=0,n=this.shapeHoles.length;r<n;r++)this.shapeHoles[r].applyScale(e,t);this._update()}createPoint(e,t=0,i=wt.generateUUID()){let r;e instanceof pe?r=e:r=new pe(e,t);let n=new iv(i,r);return n.roundness=this.roundness,n}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];if(r.uuid===e)return r}for(let t=0,i=this.shapeHoles.length;t<i;t++){let r=this.shapeHoles[t].getPointByUuid(e);if(r)return r}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(i=>i.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,i=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let r=i?this.roundedCurveDivisions:this.curveDivisions;return AWe(e,i?this.roundedCurves:this.curves,t,this.autoClose),r.reduce((n,s)=>n+s,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=mW(this.points,e,!1),this.roundedCurveDivisions=mW(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,i=12){return TWe(e,this.curves,t,i,this.autoClose).reduce((r,n)=>r+n,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),CWe(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let i=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let r=t?this.roundedCurveDivisions:this.curveDivisions,n=0;t&&this.points[0].roundedCurveCorner!==void 0&&(n=xm(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=e-n;s<0&&(s+=r.reduce((a,o)=>a+o,0));for(let a=0,o=r.length;a<o;a++){let l=r[a];if(s<i+l)return[a,(s-i+1)/l];i+=l}return[0,1]}getCurveT(e,t,i){let r=this.points[e],n=this.points[e>=this.points.length-1?0:e+1],s=this.curveDivisions,a=s[e];if(fW(r,n)){let l=r.position.distanceTo(n.position);return r.position.distanceTo(R4.set(i.x,i.y))/l}let o=0;for(let l=0;l<e;l++)o+=s[l];return(t-o)/a}dispose(){}_applyCurveForPoint(e,t){fW(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let i=this.curves[this.curves.length-1];e.curveBefore=i,t.curveAfter=i;let r=i.clone();e.roundedCurveBefore=r,t.roundedCurveAfter=r,e.roundedCurveCorner=void 0,this.roundedCurves.push(r)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];if(t===0)this.moveTo(r.position.x,r.position.y);else{let n=this.points[t-1];this._applyCurveForPoint(r,n)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let t=this.points[0],i=this.points[this.points.length-1];this._applyCurveForPoint(t,i)}if(this.points.length>2){let t=0;for(let i=0,r=this.points.length;i<r;i++){let n=this.points[i],s=this.points[i-1]??this.points[this.points.length-1],a=this.points[i+1]??this.points[0],o=n.roundness,l=s&&a&&bWe(s,n,a);if(!n.controlsMoved()&&o>0&&!l){let c=n.curveBefore,u=n.curveAfter;if(c===void 0||u===void 0)continue;let h=n.roundedCurveBefore,f=n.roundedCurveAfter,m=c.getLength(),g=u.getLength(),v=Math.min(o,m*.499),x=Math.min(o,g*.499),b=Math.min(v,x),S=1-b/m,_=b/g,A=c.getPointAt(S,R4),M=u.getPointAt(_,MWe);this._subSplitCurve(c,h,S,A,void 0),this._subSplitCurve(u,f,_,void 0,M);let C;if(this.useCubicForRoundedCorners){let D=Qre(A,n.position,M)/2,T=Math.tan(D)*A.distanceTo(n.position),[R,O]=wWe(A,M,T,PWe,DWe),L=SWe(R,O,n.position),[k,B]=_We(L,A,M,T,IWe,RWe);C=new Zl(A.clone(),k.clone(),B.clone(),M.clone())}else C=new zf(A.clone(),n.position.clone(),M.clone());n.roundedCurveCorner=C,this.roundedCurves.splice(i+t,0,C),t++}}}}_subSplitCurve(e,t,i,r,n){if(e instanceof nc)r!==void 0&&t.v2.copy(r),n!==void 0&&t.v1.copy(n);else{let s=e,a=t,o=s.getUtoTmapping(i,0),l=EWe(s.v0,s.v1,s.v2,s.v3,o);return r!==void 0&&(a.v0.set(l[0],l[1]),a.v1.set(l[2],l[3]),a.v2.set(l[4],l[5]),a.v3.set(l[6],l[7])),n!==void 0&&(a.v0.set(l[6],l[7]),a.v1.set(l[8],l[9]),a.v2.set(l[10],l[11]),a.v3.set(l[12],l[13])),a}return t}clone(){let e=new gn(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var i;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let r=0;r<t;r++){let n=r*7,s=e.points[n+0],a=e.points[n+1],o=e.points[n+2],l=e.points[n+3],c=e.points[n+4],u=e.points[n+5],h=e.points[n+6],f=new iv(wt.generateUUID(),new pe(s,a));f.controls[0].position.set(o,l),f.controls[1].position.set(c,u),f.roundness=h,this.points.push(f)}return this.shapeHoles=(i=e.shapeHoles)!=null&&i.length?e.shapeHoles.map(r=>{let n=new gn;return n.fromJSON(r),n}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,t=!1){this.isText=t;let i=(n,s)=>{s instanceof Zl&&s.v3.equals(n.position)&&n.controls[0].position.copy(s.v2)},r=n=>{let s=[],a,o;for(a=0,o=n.length;a<o;a++)n[a]instanceof zf&&(n[a]=vWe(n[a]));for(a=0,o=n.length;a<o;a++){let u=n[a],h=a>0?n[a-1]:null,f;u instanceof Zl?(f=this.createPoint(u.v0),f.controls[1].position.copy(u.v1)):u instanceof nc&&(f=this.createPoint(u.v1)),f!==void 0&&(h!==null&&i(f,h),s.push(f))}let l=n[n.length-1],c=!1;return l instanceof Zl?l.v3.equals(s[0].position)&&(s[0].controls[0].position.copy(l.v2),c=!0):l instanceof nc&&l.v2.equals(s[0].position)&&(c=!0),this.isClosed=c,s};return this.points=r(e.curves),e instanceof WA&&(this.shapeHoles=e.holes.map(n=>{let s=new gn;return s.fromShape(n),s})),this.update(),this}updatePoint(e,t){let i=this.getPointByUuid(e);i&&(t.position!==void 0&&i.position.fromArray(t.position),t.roundness!==void 0&&(i.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(i.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var r;let i=(r=this.getPointByUuid(e))==null?void 0:r.controls[0];i&&(t.position&&i.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var r;let i=(r=this.getPointByUuid(e))==null?void 0:r.controls[1];i&&(t.position&&i.position.fromArray(t.position),this.needsUpdate=!0)}},Kre=Math.PI*2;function O4({x:e,y:t},i,r,n,s){return{x:e*i+n,y:t*r+s}}function OWe(e,t){let i=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=Math.cos(e),n=Math.sin(e),s=Math.cos(e+t),a=Math.sin(e+t);return[{x:r-n*i,y:n+r*i},{x:s+a*i,y:a-s*i},{x:s,y:a}]}function gW(e,t,i,r){let n=e*r-t*i<0?-1:1,s=Math.min(1,Math.max(-1,e*i+t*r));return n*Math.acos(s)}function LWe(e,t,i,r,n,s,a,o,l,c){let u=Math.pow(n,2),h=Math.pow(s,2),f=Math.pow(a,2),m=Math.pow(o,2),g=u*h-u*m-h*f;g<0&&(g=0),g/=u*m+h*f,g=Math.sqrt(g)*(l===c?-1:1);let v=g*n/s*o,x=g*-s/n*a,b=v+(e+i)/2,S=x+(t+r)/2,_=(a-v)/n,A=(o-x)/s,M=(-a-v)/n,C=(-o-x)/s,D=gW(1,0,_,A),T=gW(_,A,M,C);return T<0&&(T+=Kre),{centerx:b,centery:S,ang1:D,ang2:T}}function kWe({px:e,py:t,cx:i,cy:r,rx:n,ry:s,largeArcFlag:a,sweepFlag:o}){let l=[];if(n===0||s===0)return[];let c=(e-i)/2,u=(t-r)/2;if(c===0&&u===0)return[];n=Math.abs(n),s=Math.abs(s);let h=Math.pow(c,2)/Math.pow(n,2)+Math.pow(u,2)/Math.pow(s,2);h>1&&(n*=Math.sqrt(h),s*=Math.sqrt(h));let f=LWe(e,t,i,r,n,s,c,u,a,o),{ang1:m,ang2:g}=f,{centerx:v,centery:x}=f,b=Math.abs(g)/(Kre/4);Math.abs(1-b)<1e-7&&(b=1);let S=Math.max(Math.ceil(b),1);g/=S;for(let _=0;_<S;_++)l.push(OWe(m,g)),m+=g;return l.map(_=>{let{x:A,y:M}=O4(_[0],n,s,v,x),{x:C,y:D}=O4(_[1],n,s,v,x),{x:T,y:R}=O4(_[2],n,s,v,x);return{x1:A,y1:M,x2:C,y2:D,x:T,y:R}})}var Sr;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(Sr||(Sr={}));var Un;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Un||(Un={}));function $t(e,t){if(!e)throw t||"Assertion Failed!"}var Gt=function(){function e(){}return e.vertEq=function(t,i){return t.s===i.s&&t.t===i.t},e.vertLeq=function(t,i){return t.s<i.s||t.s===i.s&&t.t<=i.t},e.transLeq=function(t,i){return t.t<i.t||t.t===i.t&&t.s<=i.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,i){return Math.abs(t.s-i.s)+Math.abs(t.t-i.t)},e.edgeEval=function(t,i,r){$t(e.vertLeq(t,i)&&e.vertLeq(i,r));var n=i.s-t.s,s=r.s-i.s;return n+s>0?n<s?i.t-t.t+(t.t-r.t)*(n/(n+s)):i.t-r.t+(r.t-t.t)*(s/(n+s)):0},e.edgeSign=function(t,i,r){$t(e.vertLeq(t,i)&&e.vertLeq(i,r));var n=i.s-t.s,s=r.s-i.s;return n+s>0?(i.t-r.t)*n+(i.t-t.t)*s:0},e.transEval=function(t,i,r){$t(e.transLeq(t,i)&&e.transLeq(i,r));var n=i.t-t.t,s=r.t-i.t;return n+s>0?n<s?i.s-t.s+(t.s-r.s)*(n/(n+s)):i.s-r.s+(r.s-t.s)*(s/(n+s)):0},e.transSign=function(t,i,r){$t(e.transLeq(t,i)&&e.transLeq(i,r));var n=i.t-t.t,s=r.t-i.t;return n+s>0?(i.s-r.s)*n+(i.s-t.s)*s:0},e.vertCCW=function(t,i,r){return t.s*(i.t-r.t)+i.s*(r.t-t.t)+r.s*(t.t-i.t)>=0},e.interpolate=function(t,i,r,n){return t=t<0?0:t,r=r<0?0:r,t<=r?r===0?(i+n)/2:i+(n-i)*(t/(t+r)):n+(i-n)*(r/(t+r))},e.intersect=function(t,i,r,n,s){var a,o,l;e.vertLeq(t,i)||(l=t,t=i,i=l),e.vertLeq(r,n)||(l=r,r=n,n=l),e.vertLeq(t,r)||(l=t,t=r,r=l,l=i,i=n,n=l),e.vertLeq(r,i)?e.vertLeq(i,n)?(a=e.edgeEval(t,r,i),o=e.edgeEval(r,i,n),a+o<0&&(a=-a,o=-o),s.s=e.interpolate(a,r.s,o,i.s)):(a=e.edgeSign(t,r,i),o=-e.edgeSign(t,n,i),a+o<0&&(a=-a,o=-o),s.s=e.interpolate(a,r.s,o,n.s)):s.s=(r.s+i.s)/2,e.transLeq(t,i)||(l=t,t=i,i=l),e.transLeq(r,n)||(l=r,r=n,n=l),e.transLeq(t,r)||(l=t,t=r,r=l,l=i,i=n,n=l),e.transLeq(r,i)?e.transLeq(i,n)?(a=e.transEval(t,r,i),o=e.transEval(r,i,n),a+o<0&&(a=-a,o=-o),s.t=e.interpolate(a,r.t,o,i.t)):(a=e.transSign(t,r,i),o=-e.transSign(t,n,i),a+o<0&&(a=-a,o=-o),s.t=e.interpolate(a,r.t,o,n.t)):s.t=(r.t+i.t)/2},e}(),q1=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),P_=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),P0=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),vW=function(){function e(){var t=new P0,i=new q1,r=new P_(0),n=new P_(1);t.next=t.prev=t,t.anEdge=null,i.next=i.prev=i,r.next=r,r.Sym=n,n.next=n,n.Sym=r,this.vHead=t,this.fHead=i,this.eHead=r,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var i=new P_(0),r=new P_(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return r.next=n,n.Sym.next=i,i.next=t,t.Sym.next=r,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i},e.prototype.splice_=function(t,i){var r=t.Onext,n=i.Onext;r.Sym.Lnext=i,n.Sym.Lnext=t,t.Onext=n,i.Onext=r},e.prototype.makeVertex_=function(t,i,r){var n=t;$t(n,"Vertex can't be null!");var s=r.prev;n.prev=s,s.next=n,n.next=r,r.prev=n,n.anEdge=i;var a=i;do a.Org=n,a=a.Onext;while(a!==i)},e.prototype.makeFace_=function(t,i,r){var n=t;$t(n,"Face can't be null");var s=r.prev;n.prev=s,s.next=n,n.next=r,r.prev=n,n.anEdge=i,n.trail=null,n.marked=!1,n.inside=r.inside;var a=i;do a.Lface=n,a=a.Lnext;while(a!==i)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var i=t.next,r=t.Sym.next;i.Sym.next=r,r.Sym.next=i},e.prototype.killVertex_=function(t,i){var r=t.anEdge,n=r;do n.Org=i,n=n.Onext;while(n!==r);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.prototype.killFace_=function(t,i){var r=t.anEdge,n=r;do n.Lface=i,n=n.Lnext;while(n!==r);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.prototype.makeEdge=function(){var t=new P0,i=new P0,r=new q1,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(i,n.Sym,this.vHead),this.makeFace_(r,n,this.fHead),n},e.prototype.splice=function(t,i){var r=!1,n=!1;if(t!==i){if(i.Org!==t.Org&&(n=!0,this.killVertex_(i.Org,t.Org)),i.Lface!==t.Lface&&(r=!0,this.killFace_(i.Lface,t.Lface)),this.splice_(i,t),!n){var s=new P0;this.makeVertex_(s,i,t.Org),t.Org.anEdge=t}if(!r){var a=new q1;this.makeFace_(a,i,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var i=t.Sym,r=!1;if(t.Lface!==t.Rface&&(r=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!r){var n=new q1;this.makeFace_(n,t,t.Lface)}i.Onext===i?(this.killVertex_(i.Org,null),this.killFace_(i.Lface,null)):(t.Lface.anEdge=i.Oprev,i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var i=this.makeEdge_(t),r=i.Sym;this.splice_(i,t.Lnext),i.Org=t.Dst;var n=new P0;return this.makeVertex_(n,r,i.Org),i.Lface=r.Lface=t.Lface,i},e.prototype.splitEdge=function(t){var i=this.addEdgeVertex(t),r=i.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,r),t.Dst=r.Org,r.Dst.anEdge=r.Sym,r.Rface=t.Rface,r.winding=t.winding,r.Sym.winding=t.Sym.winding,r.idx=t.idx,r.Sym.idx=t.Sym.idx,r},e.prototype.connect=function(t,i){var r=!1,n=this.makeEdge_(t),s=n.Sym;if(i.Lface!==t.Lface&&(r=!0,this.killFace_(i.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(s,i),n.Org=t.Dst,s.Org=i.Org,n.Lface=s.Lface=t.Lface,t.Lface.anEdge=s,!r){var a=new q1;this.makeFace_(a,n,t.Lface)}return n},e.prototype.zapFace=function(t){var i=t.anEdge,r,n,s,a,o;n=i.Lnext;do r=n,n=r.Lnext,r.Lface=null,r.Rface===null&&(r.Onext===r?this.killVertex_(r.Org,null):(r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),s=r.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(r));while(r!=i);a=t.prev,o=t.next,o.prev=a,a.next=o},e.prototype.countFaceVerts_=function(t){var i=t.anEdge,r=0;do r++,i=i.Lnext;while(i!==t.anEdge);return r},e.prototype.mergeConvexFaces=function(t){var i,r,n,s,a,o,l;for(i=this.fHead.next;i!==this.fHead;i=i.next)if(i.inside)for(r=i.anEdge,a=r.Org;n=r.Lnext,s=r.Sym,s&&s.Lface&&s.Lface.inside&&(o=this.countFaceVerts_(i),l=this.countFaceVerts_(s.Lface),o+l-2<=t&&Gt.vertCCW(r.Lprev.Org,r.Org,s.Lnext.Lnext.Org)&&Gt.vertCCW(s.Lprev.Org,s.Org,r.Lnext.Lnext.Org)&&(n=s.Lnext,this.delete(s),r=null,s=null)),!(r&&r.Lnext.Org===a);)r=n;return!0},e.prototype.check=function(){var t=this.fHead,i=this.vHead,r=this.eHead,n,s,a,o,l,c;for(s=t,s=t;(n=s.next)!==t;s=n){$t(n.prev===s),l=n.anEdge;do $t(l.Sym!==l),$t(l.Sym.Sym===l),$t(l.Lnext.Onext.Sym===l),$t(l.Onext.Sym.Lnext===l),$t(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for($t(n.prev===s&&n.anEdge===null),o=i,o=i;(a=o.next)!==i;o=a){$t(a.prev===o),l=a.anEdge;do $t(l.Sym!==l),$t(l.Sym.Sym===l),$t(l.Lnext.Onext.Sym===l),$t(l.Onext.Sym.Lnext===l),$t(l.Org===a),l=l.Onext;while(l!==a.anEdge)}for($t(a.prev===o&&a.anEdge===null),c=r,c=r;(l=c.next)!==r;c=l)$t(l.Sym.next===c.Sym),$t(l.Sym!==l),$t(l.Sym.Sym===l),$t(l.Org!==null),$t(l.Dst!==null),$t(l.Lnext.Onext.Sym===l),$t(l.Onext.Sym.Lnext===l);$t(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),yW=function(){function e(){this.handle=null}return e}(),xW=function(){function e(){this.key=null,this.node=0}return e}(),zWe=function(){function e(t,i){this.leq=i,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var r=0;r<t+1;r++)this.nodes[r]=new yW,this.handles[r]=new xW;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var i=this.nodes,r=this.handles,n,s,a;for(n=i[t].handle;;){if(a=t<<1,a<this.size&&this.leq(r[i[a+1].handle].key,r[i[a].handle].key)&&++a,$t(a<=this.max),s=i[a].handle,a>this.size||this.leq(r[n].key,r[s].key)){i[t].handle=n,r[n].node=t;break}i[t].handle=s,r[s].node=t,t=a}},e.prototype.floatUp_=function(t){var i=this.nodes,r=this.handles,n,s,a;for(n=i[t].handle;;){if(a=t>>1,s=i[a].handle,a===0||this.leq(r[s].key,r[n].key)){i[t].handle=n,r[n].node=t;break}i[t].handle=s,r[s].node=t,t=a}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var i,r;if(i=++this.size,i*2>this.max){this.max*=2;var n,s;for(s=this.nodes.length,this.nodes.length=this.max+1,n=s;n<this.nodes.length;n++)this.nodes[n]=new yW;for(s=this.handles.length,this.handles.length=this.max+1,n=s;n<this.handles.length;n++)this.handles[n]=new xW}return this.freeList===0?r=i:(r=this.freeList,this.freeList=this.handles[r].node),this.nodes[i].handle=r,this.handles[r].node=i,this.handles[r].key=t,this.initialized&&this.floatUp_(i),r},e.prototype.extractMin=function(){var t=this.nodes,i=this.handles,r=t[1].handle,n=i[r].key;return this.size>0&&(t[1].handle=t[this.size].handle,i[t[1].handle].node=1,i[r].key=null,i[r].node=this.freeList,this.freeList=r,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var i=this.nodes,r=this.handles,n;$t(t>=1&&t<=this.max&&r[t].key!==null),n=r[t].node,i[n].handle=i[this.size].handle,r[i[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(r[i[n>>1].handle].key,r[i[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),r[t].key=null,r[t].node=this.freeList,this.freeList=t},e}(),L4=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),bW=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),BWe=function(){function e(t,i){this.frame=t,this.leq=i,this.head=new bW,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var i=this.head;do i=i.next;while(i.key!==null&&!this.leq(this.frame,t,i.key));return i},e.prototype.insertBefore=function(t,i){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,i));var r=new bW;return r.key=i,r.next=t.next,t.next.prev=r,r.prev=t,t.next=r,r},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),jWe=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,i){t.winding+=i.winding,t.Sym.winding+=i.Sym.winding},e.edgeLeq=function(t,i,r){var n=t.event,s=i.eUp,a=r.eUp;if(s.Dst===n)return a.Dst===n?Gt.vertLeq(s.Org,a.Org)?Gt.edgeSign(a.Dst,s.Org,a.Org)<=0:Gt.edgeSign(s.Dst,a.Org,s.Org)>=0:Gt.edgeSign(a.Dst,n,a.Org)<=0;if(a.Dst===n)return Gt.edgeSign(s.Dst,n,s.Org)>=0;var o=Gt.edgeEval(s.Dst,n,s.Org),l=Gt.edgeEval(a.Dst,n,a.Org);return o>=l},e.deleteRegion=function(t,i){i.fixUpperEdge&&$t(i.eUp.winding===0),i.eUp.activeRegion=null,t.dict.delete(i.nodeUp)},e.fixUpperEdge=function(t,i,r){$t(i.fixUpperEdge),t.mesh.delete(i.eUp),i.fixUpperEdge=!1,i.eUp=r,r.activeRegion=i},e.topLeftRegion=function(t,i){var r=i.eUp.Org,n;do i=e.regionAbove(i);while(i.eUp.Org===r);if(i.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(i).eUp.Sym,i.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,i,n),i=e.regionAbove(i)}return i},e.topRightRegion=function(t){var i=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===i);return t},e.addRegionBelow=function(t,i,r){var n=new L4;return n.eUp=r,n.nodeUp=t.dict.insertBefore(i.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,r.activeRegion=n,n},e.isWindingInside=function(t,i){switch(t.windingRule){case Sr.ODD:return(i&1)!==0;case Sr.NONZERO:return i!==0;case Sr.POSITIVE:return i>0;case Sr.NEGATIVE:return i<0;case Sr.ABS_GEQ_TWO:return i>=2||i<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,i){i.windingNumber=e.regionAbove(i).windingNumber+i.eUp.winding,i.inside=e.isWindingInside(t,i.windingNumber)},e.finishRegion=function(t,i){var r=i.eUp,n=r.Lface;n.inside=i.inside,n.anEdge=r,e.deleteRegion(t,i)},e.finishLeftRegions=function(t,i,r){for(var n,s=null,a=i,o=i.eUp;a!==r;){if(a.fixUpperEdge=!1,s=e.regionBelow(a),n=s.eUp,n.Org!=o.Org){if(!s.fixUpperEdge){e.finishRegion(t,a);break}n=t.mesh.connect(o.Lprev,n.Sym),e.fixUpperEdge(t,s,n)}o.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(o,n)),e.finishRegion(t,a),o=s.eUp,a=s}return o},e.addRightEdges=function(t,i,r,n,s,a){var o,l,c,u,h=!0;c=r;do $t(Gt.vertLeq(c.Org,c.Dst)),e.addRegionBelow(t,i,c.Sym),c=c.Onext;while(c!==n);for(s===null&&(s=e.regionBelow(i).eUp.Rprev),l=i,u=s;o=e.regionBelow(l),c=o.eUp.Sym,c.Org===u.Org;)c.Onext!==u&&(t.mesh.splice(c.Oprev,c),t.mesh.splice(u.Oprev,c)),o.windingNumber=l.windingNumber-c.winding,o.inside=e.isWindingInside(t,o.windingNumber),l.dirty=!0,!h&&e.checkForRightSplice(t,l)&&(e.addWinding(c,u),e.deleteRegion(t,l),t.mesh.delete(u)),h=!1,l=o,u=c;l.dirty=!0,$t(l.windingNumber-c.winding===o.windingNumber),a&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,i,r){t.mesh.splice(i,r)},e.vertexWeights=function(t,i,r){var n=Gt.vertL1dist(i,t),s=Gt.vertL1dist(r,t),a=.5*s/(n+s),o=.5*n/(n+s);t.coords[0]+=a*i.coords[0]+o*r.coords[0],t.coords[1]+=a*i.coords[1]+o*r.coords[1],t.coords[2]+=a*i.coords[2]+o*r.coords[2]},e.getIntersectData=function(t,i,r,n,s,a){i.coords[0]=i.coords[1]=i.coords[2]=0,i.idx=-1,e.vertexWeights(i,r,n),e.vertexWeights(i,s,a)},e.checkForRightSplice=function(t,i){var r=e.regionBelow(i),n=i.eUp,s=r.eUp;if(Gt.vertLeq(n.Org,s.Org)){if(Gt.edgeSign(s.Dst,n.Org,s.Org)>0)return!1;Gt.vertEq(n.Org,s.Org)?n.Org!==s.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,s.Oprev,n)):(t.mesh.splitEdge(s.Sym),t.mesh.splice(n,s.Oprev),i.dirty=r.dirty=!0)}else{if(Gt.edgeSign(n.Dst,s.Org,n.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Oprev,n)}return!0},e.checkForLeftSplice=function(t,i){var r=e.regionBelow(i),n=i.eUp,s=r.eUp,a;if($t(!Gt.vertEq(n.Dst,s.Dst)),Gt.vertLeq(n.Dst,s.Dst)){if(Gt.edgeSign(n.Dst,s.Dst,n.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,a=t.mesh.splitEdge(n),t.mesh.splice(s.Sym,a),a.Lface.inside=i.inside}else{if(Gt.edgeSign(s.Dst,n.Dst,s.Org)>0)return!1;i.dirty=r.dirty=!0,a=t.mesh.splitEdge(s),t.mesh.splice(n.Lnext,s.Sym),a.Rface.inside=i.inside}return!0},e.checkForIntersect=function(t,i){var r=e.regionBelow(i),n=i.eUp,s=r.eUp,a=n.Org,o=s.Org,l=n.Dst,c=s.Dst,u,h,f=new P0,m,g;if($t(!Gt.vertEq(c,l)),$t(Gt.edgeSign(l,t.event,a)<=0),$t(Gt.edgeSign(c,t.event,o)>=0),$t(a!==t.event&&o!==t.event),$t(!i.fixUpperEdge&&!r.fixUpperEdge),a===o||(u=Math.min(a.t,l.t),h=Math.max(o.t,c.t),u>h))return!1;if(Gt.vertLeq(a,o)){if(Gt.edgeSign(c,a,o)>0)return!1}else if(Gt.edgeSign(l,o,a)<0)return!1;return e.debugEvent(t),Gt.intersect(l,a,c,o,f),$t(Math.min(a.t,l.t)<=f.t),$t(f.t<=Math.max(o.t,c.t)),$t(Math.min(c.s,l.s)<=f.s),$t(f.s<=Math.max(o.s,a.s)),Gt.vertLeq(f,t.event)&&(f.s=t.event.s,f.t=t.event.t),m=Gt.vertLeq(a,o)?a:o,Gt.vertLeq(m,f)&&(f.s=m.s,f.t=m.t),Gt.vertEq(f,a)||Gt.vertEq(f,o)?(e.checkForRightSplice(t,i),!1):!Gt.vertEq(l,t.event)&&Gt.edgeSign(l,t.event,f)>=0||!Gt.vertEq(c,t.event)&&Gt.edgeSign(c,t.event,f)<=0?c===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Sym,n),i=e.topLeftRegion(t,i),n=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),r),e.addRightEdges(t,i,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(n.Lnext,s.Oprev),r=i,i=e.topRightRegion(i),g=e.regionBelow(i).eUp.Rprev,r.eUp=s.Oprev,s=e.finishLeftRegions(t,r,null),e.addRightEdges(t,i,s.Onext,n.Rprev,g,!0),!0):(Gt.edgeSign(l,t.event,f)>=0&&(e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),Gt.edgeSign(c,t.event,f)<=0&&(i.dirty=r.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,n),n.Org.s=f.s,n.Org.t=f.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,a,l,o,c),e.regionAbove(i).dirty=i.dirty=r.dirty=!0,!1)},e.walkDirtyRegions=function(t,i){for(var r=e.regionBelow(i),n,s;;){for(;r.dirty;)i=r,r=e.regionBelow(r);if(!i.dirty&&(r=i,i=e.regionAbove(i),i===null||!i.dirty))return;if(i.dirty=!1,n=i.eUp,s=r.eUp,n.Dst!==s.Dst&&e.checkForLeftSplice(t,i)&&(r.fixUpperEdge?(e.deleteRegion(t,r),t.mesh.delete(s),r=e.regionBelow(i),s=r.eUp):i.fixUpperEdge&&(e.deleteRegion(t,i),t.mesh.delete(n),i=e.regionAbove(r),n=i.eUp)),n.Org!==s.Org)if(n.Dst!==s.Dst&&!i.fixUpperEdge&&!r.fixUpperEdge&&(n.Dst===t.event||s.Dst===t.event)){if(e.checkForIntersect(t,i))return}else e.checkForRightSplice(t,i);n.Org===s.Org&&n.Dst===s.Dst&&(e.addWinding(s,n),e.deleteRegion(t,i),t.mesh.delete(n),i=e.regionAbove(r))}},e.connectRightVertex=function(t,i,r){var n,s=r.Onext,a=e.regionBelow(i),o=i.eUp,l=a.eUp,c=!1;if(o.Dst!==l.Dst&&e.checkForIntersect(t,i),Gt.vertEq(o.Org,t.event)&&(t.mesh.splice(s.Oprev,o),i=e.topLeftRegion(t,i),s=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),a),c=!0),Gt.vertEq(l.Org,t.event)&&(t.mesh.splice(r,l.Oprev),r=e.finishLeftRegions(t,a,null),c=!0),c){e.addRightEdges(t,i,r.Onext,s,s,!0);return}Gt.vertLeq(l.Org,o.Org)?n=l.Oprev:n=o,n=t.mesh.connect(r.Lprev,n),e.addRightEdges(t,i,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,i)},e.connectLeftDegenerate=function(t,i,r){var n,s,a,o,l;if(n=i.eUp,Gt.vertEq(n.Org,r)){$t(!1),e.spliceMergeVertices(t,n,r.anEdge);return}if(!Gt.vertEq(n.Dst,r)){t.mesh.splitEdge(n.Sym),i.fixUpperEdge&&(t.mesh.delete(n.Onext),i.fixUpperEdge=!1),t.mesh.splice(r.anEdge,n),e.sweepEvent(t,r);return}$t(!1),i=e.topRightRegion(i),l=e.regionBelow(i),a=l.eUp.Sym,s=o=a.Onext,l.fixUpperEdge&&($t(s!==a),e.deleteRegion(t,l),t.mesh.delete(a),a=s.Oprev),t.mesh.splice(r.anEdge,a),Gt.edgeGoesLeft(s)||(s=null),e.addRightEdges(t,i,a.Onext,o,s,!0)},e.connectLeftVertex=function(t,i){var r,n,s,a,o,l,c=new L4;if(c.eUp=i.anEdge.Sym,r=t.dict.search(c).key,n=e.regionBelow(r),!!n){if(a=r.eUp,o=n.eUp,Gt.edgeSign(a.Dst,i,a.Org)===0){e.connectLeftDegenerate(t,r,i);return}if(s=Gt.vertLeq(o.Dst,a.Dst)?r:n,r.inside||s.fixUpperEdge){if(s===r)l=t.mesh.connect(i.anEdge.Sym,a.Lnext);else{var u=t.mesh.connect(o.Dnext,i.anEdge);l=u.Sym}s.fixUpperEdge?e.fixUpperEdge(t,s,l):e.computeWinding(t,e.addRegionBelow(t,r,l)),e.sweepEvent(t,i)}else e.addRightEdges(t,r,i.anEdge,i.anEdge,null,!0)}},e.sweepEvent=function(t,i){t.event=i,e.debugEvent(t);for(var r=i.anEdge;r.activeRegion===null;)if(r=r.Onext,r===i.anEdge){e.connectLeftVertex(t,i);return}var n=e.topLeftRegion(t,r.activeRegion);$t(n!==null);var s=e.regionBelow(n),a=s.eUp,o=e.finishLeftRegions(t,s,null);o.Onext===a?e.connectRightVertex(t,n,o):e.addRightEdges(t,n,o.Onext,a,a,!0)},e.addSentinel=function(t,i,r,n){var s=new L4,a=t.mesh.makeEdge();a.Org.s=r,a.Org.t=n,a.Dst.s=i,a.Dst.t=n,t.event=a.Dst,s.eUp=a,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=t.dict.insert(s)},e.initEdgeDict=function(t){t.dict=new BWe(t,e.edgeLeq);var i=t.bmax[0]-t.bmin[0],r=t.bmax[1]-t.bmin[1],n=t.bmin[0]-i,s=t.bmax[0]+i,a=t.bmin[1]-r,o=t.bmax[1]+r;e.addSentinel(t,n,s,a),e.addSentinel(t,n,s,o)},e.doneEdgeDict=function(t){for(var i,r=0;(i=t.dict.min().key)!==null;)i.sentinel||($t(i.fixUpperEdge),$t(++r===1)),$t(i.windingNumber===0),e.deleteRegion(t,i)},e.removeDegenerateEdges=function(t){var i,r,n,s=t.mesh.eHead;for(i=s.next;i!==s;i=r)r=i.next,n=i.Lnext,Gt.vertEq(i.Org,i.Dst)&&i.Lnext.Lnext!==i&&(e.spliceMergeVertices(t,n,i),t.mesh.delete(i),i=n,n=i.Lnext),n.Lnext===i&&(n!==i&&((n===r||n===r.Sym)&&(r=r.next),t.mesh.delete(n)),(i===r||i===r.Sym)&&(r=r.next),t.mesh.delete(i))},e.initPriorityQ=function(t){var i,r,n,s=0;for(n=t.mesh.vHead,r=n.next;r!==n;r=r.next)s++;for(s+=8,i=t.pq=new zWe(s,Gt.vertLeq),n=t.mesh.vHead,r=n.next;r!==n;r=r.next)r.pqHandle=i.insert(r);return r!==n?!1:(i.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,i){var r,n,s;for(r=i.fHead.next;r!==i.fHead;r=n)n=r.next,s=r.anEdge,$t(s.Lnext!==s),s.Lnext.Lnext===s&&(e.addWinding(s.Onext,s),t.mesh.delete(s));return!0},e.computeInterior=function(t,i){i===void 0&&(i=!0);var r,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(r=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!Gt.vertEq(n,r));)n=t.pq.extractMin(),e.spliceMergeVertices(t,r.anEdge,n.anEdge);e.sweepEvent(t,r)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(i&&t.mesh.check(),!0):!1},e}(),NWe=function(){function e(){this.mesh=new vW,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Sr.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]},e.prototype.normalize_=function(t){var i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!i)throw"Zero-size vector!";i=Math.sqrt(i),t[0]/=i,t[1]/=i,t[2]/=i},e.prototype.longAxis_=function(t){var i=0;return Math.abs(t[1])>Math.abs(t[0])&&(i=1),Math.abs(t[2])>Math.abs(t[i])&&(i=2),i},e.prototype.computeNormal_=function(t){var i,r,n,s,a,o,l=[0,0,0],c=[0,0,0],u=[0,0,0],h=[0,0,0],f=[0,0,0],m=[null,null,null],g=[null,null,null],v=this.mesh.vHead;i=v.next;for(var x=0;x<3;++x)s=i.coords[x],c[x]=s,g[x]=i,l[x]=s,m[x]=i;for(i=v.next;i!==v;i=i.next)for(var b=0;b<3;++b)s=i.coords[b],s<c[b]&&(c[b]=s,g[b]=i),s>l[b]&&(l[b]=s,m[b]=i);var S=0;if(l[1]-c[1]>l[0]-c[0]&&(S=1),l[2]-c[2]>l[S]-c[S]&&(S=2),c[S]>=l[S]){t[0]=0,t[1]=0,t[2]=1;return}for(o=0,r=g[S],n=m[S],u[0]=r.coords[0]-n.coords[0],u[1]=r.coords[1]-n.coords[1],u[2]=r.coords[2]-n.coords[2],i=v.next;i!==v;i=i.next)h[0]=i.coords[0]-n.coords[0],h[1]=i.coords[1]-n.coords[1],h[2]=i.coords[2]-n.coords[2],f[0]=u[1]*h[2]-u[2]*h[1],f[1]=u[2]*h[0]-u[0]*h[2],f[2]=u[0]*h[1]-u[1]*h[0],a=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],a>o&&(o=a,t[0]=f[0],t[1]=f[1],t[2]=f[2]);o<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(u)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,i,r=this.mesh.vHead,n,s=0,a=t.next;a!==t;a=a.next)if(n=a.anEdge,!(n.winding<=0))do s+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==a.anEdge);if(s<0){for(i=r.next;i!==r;i=i.next)i.t=-i.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,i=[0,0,0],r,n,s=!1;i[0]=this.normal[0],i[1]=this.normal[1],i[2]=this.normal[2],!i[0]&&!i[1]&&!i[2]&&(this.computeNormal_(i),s=!0),r=this.sUnit,n=this.tUnit;var a=this.longAxis_(i);r[a]=0,r[(a+1)%3]=1,r[(a+2)%3]=0,n[a]=0,n[(a+1)%3]=0,n[(a+2)%3]=i[a]>0?1:-1;for(var o=t.next;o!==t;o=o.next)o.s=this.dot_(o.coords,r),o.t=this.dot_(o.coords,n);s&&this.checkOrientation_();for(var l=!0,c=t.next;c!==t;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},e.prototype.addWinding_=function(t,i){t.winding+=i.winding,t.Sym.winding+=i.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,i){var r,n;if(r=i.anEdge,!(r.Lnext!==r&&r.Lnext.Lnext!==r))throw"Mono region invalid";for(;Gt.vertLeq(r.Dst,r.Org);r=r.Lprev);for(;Gt.vertLeq(r.Org,r.Dst);r=r.Lnext);n=r.Lprev;for(var s=void 0;r.Lnext!==n;)if(Gt.vertLeq(r.Dst,n.Org)){for(;n.Lnext!==r&&(Gt.edgeGoesLeft(n.Lnext)||Gt.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)s=t.connect(n.Lnext,n),n=s.Sym;n=n.Lprev}else{for(;n.Lnext!==r&&(Gt.edgeGoesRight(r.Lprev)||Gt.edgeSign(r.Dst,r.Org,r.Lprev.Org)>=0);)s=t.connect(r,r.Lprev),r=s.Sym;r=r.Lnext}if(n.Lnext===r)throw"Mono region invalid";for(;n.Lnext.Lnext!==r;)s=t.connect(n.Lnext,n),n=s.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)if(i=r.next,r.inside&&!this.tessellateMonoRegion_(t,r))return!1;return!0},e.prototype.discardExterior_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)i=r.next,r.inside||t.zapFace(r)},e.prototype.setWindingNumber_=function(t,i,r){for(var n,s=t.eHead.next;s!==t.eHead;s=n)n=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?i:-i:r?t.delete(s):s.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,i,r,n){var s,a=0,o=0,l;r>3&&t.mergeConvexFaces(r);for(var c=t.vHead.next;c!==t.vHead;c=c.next)c.n=-1;for(var u=t.fHead.next;u!==t.fHead;u=u.next)if(u.n=-1,!!u.inside){s=u.anEdge,l=0;do{var c=s.Org;c.n===-1&&(c.n=o,o++),l++,s=s.Lnext}while(s!==u.anEdge);if(l>r)throw"Face vertex greater that support polygon";u.n=a,++a}this.elementCount=a,i===Un.CONNECTED_POLYGONS&&(a*=2),this.elements=[],this.elements.length=a*r,this.vertexCount=o,this.vertices=[],this.vertices.length=o*n,this.vertexIndices=[],this.vertexIndices.length=o;for(var c=t.vHead.next;c!==t.vHead;c=c.next)if(c.n!==-1){var h=c.n*n;this.vertices[h+0]=c.coords[0],this.vertices[h+1]=c.coords[1],n>2&&(this.vertices[h+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}for(var f=0,u=t.fHead.next;u!==t.fHead;u=u.next)if(u.inside){s=u.anEdge,l=0;do{var c=s.Org;this.elements[f++]=c.n,l++,s=s.Lnext}while(s!==u.anEdge);for(var m=l;m<r;++m)this.elements[f++]=-1;if(i===Un.CONNECTED_POLYGONS){s=u.anEdge;do this.elements[f++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==u.anEdge);for(var g=l;g<r;++g)this.elements[f++]=-1}}},e.prototype.outputContours_=function(t,i){var r,n,s=0,a=0;this.vertexCount=0,this.elementCount=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){n=r=o.anEdge;do this.vertexCount++,r=r.Lnext;while(r!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*i,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,u=0;s=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){a=0,n=r=o.anEdge;do this.vertices[l++]=r.Org.coords[0],this.vertices[l++]=r.Org.coords[1],i>2&&(this.vertices[l++]=r.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(r):r.Org.idx,a++,r=r.Lnext;while(r!==n);this.elements[u++]=s,this.elements[u++]=a,s+=a}},e.prototype.addContour=function(t,i){this.mesh===null&&(this.mesh=new vW),t<2&&(t=2),t>3&&(t=3);for(var r=null,n=0;n<i.length;n+=t)r===null?(r=this.mesh.makeEdge(),this.mesh.splice(r,r.Sym)):(this.mesh.splitEdge(r),r=r.Lnext),r.Org.coords[0]=i[n+0],r.Org.coords[1]=i[n+1],t>2?r.Org.coords[2]=i[n+2]:r.Org.coords[2]=0,r.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(r),r.winding=1,r.Sym.winding=-1},e.prototype.tesselate=function(t,i,r,n,s,a){if(t===void 0&&(t=Sr.ODD),i===void 0&&(i=Un.POLYGONS),a===void 0&&(a=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),jWe.computeInterior(this,a);var o=this.mesh;return i===Un.BOUNDARY_CONTOURS?this.setWindingNumber_(o,1,!0):this.tessellateInterior_(o),a&&o.check(),i===Un.BOUNDARY_CONTOURS?this.outputContours_(o,n):this.outputPolymesh_(o,i,r,n),!0},e}();function uf(e){var t=e.windingRule,i=t===void 0?Sr.ODD:t,r=e.elementType,n=r===void 0?Un.POLYGONS:r,s=e.polySize,a=s===void 0?3:s,o=e.vertexSize,l=o===void 0?2:o,c=e.normal,u=c===void 0?[0,0,1]:c,h=e.contours,f=h===void 0?[]:h,m=e.strict,g=m===void 0?!0:m,v=e.debug,x=v===void 0?!1:v;if(!f&&g)throw new Error("Contours can't be empty");if(f){var b=new NWe;e.edgeCreateCallback&&(b.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(b.vertexIdCallback=e.vertexIdCallback);for(var S=0;S<f.length;S++)b.addContour(l||2,f[S]);return b.tesselate(i,n,a,l,u,g),{vertices:b.vertices,vertexIndices:b.vertexIndices,vertexCount:b.vertexCount,elements:b.elements,elementCount:b.elementCount,mesh:x?b.mesh:void 0}}}Sr.ODD;Sr.NONZERO;Sr.POSITIVE;Sr.NEGATIVE;Sr.ABS_GEQ_TWO;Un.POLYGONS;Un.CONNECTED_POLYGONS;Un.BOUNDARY_CONTOURS;var SO=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let i=e*SO.eSize;this.buffer=new ArrayBuffer(i);let r=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*r,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*r,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*r,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let i=e*SO.eSize,r=new ArrayBuffer(i),n=Float32Array.BYTES_PER_ELEMENT,s=0,a=new Float32Array(r,s*n,3*e);s+=3*e;let o=new Float32Array(r,s*n,3*e);s+=3*e;let l=new Float32Array(r,s*n,2*e);t?(a.set(this.positions.subarray(0,this.size*3)),o.set(this.normals.subarray(0,this.size*3)),l.set(this.uvs.subarray(0,this.size*2))):(a.set(this.positions),o.set(this.normals),l.set(this.uvs)),this.buffer=r,this.positions=a,this.normals=o,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let r=this.capacity;for(;t>r;)r*=2;this.realloc(r)}let i=this.size;return this.size=t,i}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},Zre=SO;Zre.eSize=8*Float32Array.BYTES_PER_ELEMENT;var VWe=class{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;let e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:t,compare:i}=this,r=t[e];for(;e>0;){let n=e-1>>1,s=t[n];if(i(r,s)>=0)break;t[e]=s,e=n}t[e]=r}_down(e){let{data:t,compare:i}=this,r=this.length>>1,n=t[e];for(;e<r;){let s=(e<<1)+1,a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],n)>=0)break;t[e]=t[s],e=s}t[e]=n}};function UWe(e,t,i=1,r=!1){let n=1/0,s=1/0,a=-1/0,o=-1/0;for(let[S,_]of e[0])S<n&&(n=S),_<s&&(s=_),S>a&&(a=S),_>o&&(o=_);let l=a-n,c=o-s,u=Math.max(i,Math.min(l,c));if(u===i){let S=[n,s];return S.distance=0,S.distance}let h=new VWe([],(S,_)=>_.max-S.max),f=HWe(e),m=new MT(n+l/2,s+c/2,0,e);m.d>f.d&&(f=m);let g=2;function v(S,_,A){let M=new MT(S,_,A,e);if(g++,M.max>f.d+i&&h.push(M),M.d>f.d&&(f=M,r&&console.log(`found best ${Math.round(1e4*M.d)/1e4} after ${g} probes`),f.d>t))return t}let x=u/2;for(let S=n;S<a;S+=u)for(let _=s;_<o;_+=u)v(S+x,_+x,x);for(;h.length;){let{max:S,x:_,y:A,h:M}=h.pop();if(S-f.d<=i)break;x=M/2,v(_-x,A-x,x),v(_+x,A-x,x),v(_-x,A+x,x),v(_+x,A+x,x)}r&&console.log(`num probes: ${g}
best distance: ${f.d}`);let b=[f.x,f.y];return b.distance=f.d,b.distance}function MT(e,t,i,r){this.x=e,this.y=t,this.h=i,this.d=FWe(e,t,r),this.max=this.d+this.h*Math.SQRT2}function FWe(e,t,i){let r=!1,n=1/0;for(let s of i)for(let a=0,o=s.length,l=o-1;a<o;l=a++){let c=s[a],u=s[l];c[1]>t!=u[1]>t&&e<(u[0]-c[0])*(t-c[1])/(u[1]-c[1])+c[0]&&(r=!r),n=Math.min(n,GWe(e,t,c,u))}return n===0?0:(r?1:-1)*Math.sqrt(n)}function HWe(e){let t=0,i=0,r=0,n=e[0];for(let a=0,o=n.length,l=o-1;a<o;l=a++){let c=n[a],u=n[l],h=c[0]*u[1]-u[0]*c[1];i+=(c[0]+u[0])*h,r+=(c[1]+u[1])*h,t+=h*3}let s=new MT(i/t,r/t,0,e);return t===0||s.d<0?new MT(n[0][0],n[0][1],0,e):s}function GWe(e,t,i,r){let n=i[0],s=i[1],a=r[0]-n,o=r[1]-s;if(a!==0||o!==0){let l=((e-n)*a+(t-s)*o)/(a*a+o*o);l>1?(n=r[0],s=r[1]):l>0&&(n+=a*l,s+=o*l)}return a=e-n,o=t-s,a*a+o*o}var tz={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},$re={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},Jre={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},k4=(e,t)=>([i,r])=>(r<i&&(r+=t),(e>=i?e:e+t)<=r),iz=class extends Rt{constructor(e,t,i=0,r=12,n=3,s=Sr.ODD,a=!1){super(),this.forPathBevel=a,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=r,this._bevelSegmentsInput=n;let o=this._shape.extractShapePointsToFlatArray([],r),l=this._shape.shapeHoles.map(R=>{let O=R.extractShapePointsToFlatArray([],r),L=[];for(let k=O.length-1;k>=1;k-=2){let B=O[k-1],V=O[k-0];L.push(B,V)}return L}),c=[],u=[];for(let R=0;R<o.length;R+=2)u.push([o[R],o[R+1]]);c.push(u);for(let R=0;R<l.length;R++){let O=l[R],L=[];for(let k=0;k<O.length;k+=2)L.push([O[k],O[k+1]]);c.push(L)}let h;e.isText?h=new wk().setFromPoints(e.points.map(R=>R.position)).getSize(new pe).length()*.1:c[0].length===0?h=i:i>0?h=UWe(c,i):h=1e-5,i<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(i,h,t/2),this._bevelSegments=Math.floor(n));let f;try{f=uf({windingRule:s,elementType:Un.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{f=tz}let m;try{m=uf({windingRule:Sr.ODD,elementType:Un.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{m=$re}if(!f)throw new Error("error generating geometry");let g=f.elementCount;if(m){f.elementCount+=m.elementCount;for(let R=0;R<m.elements.length;R++){let O=m.elements[R],L=R%2===0?f.vertexCount:0;f.elements.push(O+L)}for(let R=0;R<m.vertexIndices.length;R++){let O=m.vertexIndices[R],L=f.vertexCount;f.vertexIndices.push(O+L)}for(let R=0;R<m.vertices.length;R++){let O=m.vertices[R];f.vertices.push(O)}}let v=1/0,x=-1/0,b=1/0,S=-1/0;for(let R=0,O=f.vertexCount;R<O;R++){let L=R*2,k=f.vertices[L+0],B=f.vertices[L+1];k<v&&(v=k),k>x&&(x=k),B<b&&(b=B),B>S&&(S=B)}this._minX=v,this._minY=b,this._width=x-v,this._height=S-b,this._buffer=new Zre(this._computeBufferEstimatedSize(f));let _=[],A=[];for(let R=f.elementCount-1;R>=0;R--){let O=R>=g,L=R*2,k=f.elements[L+0],B=f.elements[L+1],V=k+B,$={start:k,count:B,normals:[],continuous:[],concave:[]},q=k,Y=V-1,X=k+1,ne=this._shape.roundedCurves.length;do{let ce=q-k,de=f.vertices[Y*2+0],se=f.vertices[Y*2+1],xe=f.vertices[q*2+0],fe=f.vertices[q*2+1],ye=f.vertices[X*2+0],_e=f.vertices[X*2+1],Te=xe-de,Ce=fe-se,Le=Math.sqrt(Te*Te+Ce*Ce);Te/=Le,Ce/=Le;let Ke=xe-ye,Xe=fe-_e,pt=Math.sqrt(Ke*Ke+Xe*Xe);Ke/=pt,Xe/=pt,$.normals[ce*2+0]=-Xe,$.normals[ce*2+1]=Ke,$.concave[ce]=Te*Xe-Ce*Ke>0;let ct=f.vertexIndices[q];if(Array.isArray(ct))$.continuous[ce]=!1;else{let[ot,rt]=this._shape.getCurveIndexFromVertexId(ct-1,!0);if(rt>0&&rt<1)$.continuous[ce]=!0;else{let Dt=rt===1?ot+1:ot-1;Dt=(Dt+ne)%ne;let At=rt===1?0:1,he=this._shape.roundedCurves[ot].getTangent(rt),ie=this._shape.roundedCurves[Dt].getTangent(At);$.continuous[ce]=he.dot(ie)>.95}}O&&($.normals[ce*2+0]*=-1,$.normals[ce*2+1]*=-1),[Y,q,X]=[q,X,X+1],X>=V&&(X-=B)}while(X!==k+1);let F=[];F.push({bevelI:0,angle:0,size:0,boundary:{vertices:f.vertices.slice(k*2,V*2),vertexCount:B,vertexIndices:new Array(B).fill(!0).map((ce,de)=>[de,de]),elements:[0,B],elementCount:1,mesh:null},reverseMap:[],insetPoints:f.vertices.slice(k*2,V*2)});let K=0;for(let ce=1;ce<=this._bevelSegments;ce++){let de=ce/this._bevelSegments*Math.PI/2,se=(1-Math.cos(de))*this._bevel,xe=[],fe=[],ye=0;for(let Te=0;Te<B;Te++){let Ce=Te*2,Le=(Te-1+B)%B*2,Ke=f.vertices[$.start*2+Ce+0],Xe=f.vertices[$.start*2+Ce+1],pt=-$.normals[Le+0]*se,ct=-$.normals[Le+1]*se,ot=-$.normals[Ce+0]*se,rt=-$.normals[Ce+1]*se;if($.concave[Te]||!$.concave[Te]&&O){let Dt=Math.atan2(ct,pt),At=Math.atan2(rt,ot);At>Dt&&(At-=Math.PI*2);let he=At-Dt;if($.continuous[Te]||O){let ie=Dt+he/2,Me=Math.cos(ie)*se,$e=Math.sin(ie)*se;xe[2*ye+0]=Ke+Me*(O?-1:1),xe[2*ye+1]=Xe+$e*(O?-1:1),fe[ye]=Te,ye++}else{let ie=Math.max(1,Math.floor(r/4*Math.abs(he)/Math.PI));for(let Me=0;Me<=ie;Me++){let $e=Dt+he*(Me/ie),Z=Math.cos($e)*se,We=Math.sin($e)*se;xe[2*ye+0]=Ke+Z,xe[2*ye+1]=Xe+We,fe[ye]=Te,ye++}}}else xe[2*ye+0]=Ke+pt,xe[2*ye+1]=Xe+ct,fe[ye]=Te,ye++,xe[2*ye+0]=Ke,xe[2*ye+1]=Xe,fe[ye]=Te,ye++,xe[2*ye+0]=Ke+ot,xe[2*ye+1]=Xe+rt,fe[ye]=Te,ye++}let _e=uf({windingRule:Sr.POSITIVE,elementType:Un.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[xe],edgeCreateCallback:Te=>{let Ce=Te.Org.idx,Le=fe[Ce],Ke=fe[(Ce+1)%fe.length];Te.idx=[Le,Ke],Te.Sym.idx=[Ke,Le]},vertexIdCallback:Te=>{let Ce=Te.Lprev.idx;return[Ce?Ce[1]:0,Te.idx?Te.idx[0]:0]}});if(!_e)throw console.log("Error"),new Error(`error generating bevel geometry for ${ce}'th loop`);if(!_e.vertexCount){let Te=(ce-1)/this._bevelSegments*Math.PI/2;K=(1-Math.sin(Te))*this._bevel;break}for(let Te=0;Te<_e.vertexIndices.length;Te++){let[Ce,Le]=_e.vertexIndices[Te];if(Ce===Le)continue;let Ke=Le;Le<Ce&&(Ke+=B);for(let Xe=Ce;Xe<Ke;Xe++){let pt=Xe%B,ct=(Xe+1)%B;if(!$.continuous[pt]||!$.continuous[ct]){_e.vertexIndices[Te]=[Ce,pt],_e.vertexIndices.splice(Te+1,0,[ct,Le]),_e.vertices.splice((Te+1)*2,0,_e.vertices[Te*2],_e.vertices[Te*2+1]);break}}}F.push({bevelI:ce,angle:de,size:se,boundary:_e,reverseMap:fe,insetPoints:xe})}let re=(ce,de,se)=>{let xe=0,fe=ce.boundary.vertexIndices.length;for(;xe<fe&&se(ce.boundary.vertexIndices[de]);)de=(de+1)%fe,xe++;return xe},oe=_.length;for(let ce=1;ce<F.length;ce++){let de=F[ce-1],se=F[ce],xe=de.boundary.vertexIndices.length,fe=se.boundary.vertexIndices.length;if(!xe||!fe)break;let ye=$.concave.length,_e=0,Te=k4(_e,B);for(;!de.boundary.vertexIndices.filter(Te).length||!se.boundary.vertexIndices.filter(Te).length;)_e++,Te=k4(_e,B);let Ce=de.boundary.vertexIndices.findIndex(Te),Le=se.boundary.vertexIndices.findIndex(Te);do Ce=(Ce+1)%xe;while(Te(de.boundary.vertexIndices[Ce]));do Le=(Le+1)%fe;while(Te(se.boundary.vertexIndices[Le]));_e=(_e+1)%B;let Ke=_e,Xe=0,pt=this._buildBevelVert($,de,(Ce-1+xe)%xe,void 0,Xe),ct=this._buildBevelVert($,se,(Le-1+fe)%fe,void 0,Xe),ot=pt,rt=ct,Dt,At,he=!1;do{Xe=(_e||ye)/ye,Te=k4(_e,B);let ie=re(de,Ce,Te),Me=re(se,Le,Te),$e=he;if(he=!1,ie&&!Me){for(let Z=0;Z<ie;Z++)Dt=this._buildBevelVert($,de,(Ce+Z)%xe,Z/(ie-1),Xe),_.push(ot.topN,Dt.topP,rt.topN),a===!1&&_.push(Dt.bottomP,ot.bottomN,rt.bottomN),ot=Dt;he=!0}else if(!ie&&Me)for(let Z=0;Z<Me;Z++)At=this._buildBevelVert($,se,(Le+Z)%fe,Z/(Me-1),Xe),_.push(rt.topN,ot.topP,At.topP),a===!1&&_.push(ot.bottomP,rt.bottomN,At.bottomP),rt=At;else if(ie&&Me)if(Dt=this._buildBevelVert($,de,Ce,0,Xe),At=this._buildBevelVert($,se,Le,0,Xe),$e?(_.push(ot.topN,At.topP,rt.topN),_.push(ot.topN,Dt.topP,At.topP),a===!1&&(_.push(At.bottomP,ot.bottomN,rt.bottomN),_.push(At.bottomP,Dt.bottomP,ot.bottomN))):(_.push(rt.topN,ot.topN,Dt.topP),_.push(rt.topN,Dt.topP,At.topP),a===!1&&(_.push(Dt.bottomP,ot.bottomN,rt.bottomN),_.push(Dt.bottomP,rt.bottomN,At.bottomP))),ot=Dt,rt=At,ie===Me)for(let Z=1;Z<ie;Z++)Dt=this._buildBevelVert($,de,(Ce+Z)%xe,Z/(ie-1),Xe),At=this._buildBevelVert($,se,(Le+Z)%fe,Z/(Me-1),Xe),_.push(ot.topN,Dt.topP,rt.topN),_.push(rt.topN,Dt.topP,At.topP),a===!1&&(_.push(Dt.bottomP,ot.bottomN,rt.bottomN),_.push(Dt.bottomP,rt.bottomN,At.bottomP)),ot=Dt,rt=At;else if(ie>Me){let Z=ie/Me,We=0;for(let dt=1;dt<ie;dt++)Dt=this._buildBevelVert($,de,(Ce+dt)%xe,dt/(ie-1),Xe),_.push(ot.topN,Dt.topP,rt.topN),a===!1&&_.push(Dt.bottomP,ot.bottomN,rt.bottomN),ot=Dt,dt>(We+1)*Z&&(We++,At=this._buildBevelVert($,se,(Le+We)%fe,We/(Me-1),Xe),_.push(rt.topN,Dt.topP,At.topP),a===!1&&_.push(Dt.bottomP,rt.bottomN,At.bottomP),rt=At)}else{let Z=Me/ie,We=0;for(let dt=1;dt<Me;dt++)At=this._buildBevelVert($,se,(Le+dt)%fe,dt/(Me-1),Xe),_.push(rt.topN,Dt.topP,At.topP),a===!1&&_.push(Dt.bottomP,rt.bottomN,At.bottomP),rt=At,dt>(We+1)*Z&&(We++,Dt=this._buildBevelVert($,de,(Ce+We)%xe,We/(ie-1),Xe),_.push(ot.topN,Dt.topP,rt.topN),a===!1&&_.push(Dt.bottomP,ot.bottomN,rt.bottomN),ot=Dt)}Ce=(Ce+ie)%xe,Le=(Le+Me)%fe,_e=(_e+1)%ye}while(_e!==Ke)}if(a===!1&&this._depth>this._bevel*2&&this._buildWall(F,$,_),O){let ce=[];for(let de=_.length-1;de>=oe+2;de-=3){let se=_[de-2],xe=_[de-1],fe=_[de-0];ce.push(fe,xe,se)}_.splice(oe,_.length-oe,...ce)}if(O){let ce=[];for(let de=F[F.length-1].boundary.vertices.length-1;de>=1;de-=2){let se=F[F.length-1].boundary.vertices[de-1],xe=F[F.length-1].boundary.vertices[de-0];ce.push(se,xe)}A.push(ce)}if(!O){let ce=F[F.length-1],de;try{de=uf({windingRule:F.length>1?Sr.POSITIVE:Sr.ODD,elementType:Un.POLYGONS,vertexSize:2,strict:!0,contours:[ce.insetPoints,...A]})}catch{de=Jre}if(!de)throw new Error("Error generating geometry for surface");l.length===0&&this._bevel<h&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let se=0;se<de.elementCount*3;se+=3){let xe=this._buildSurfaceVert(de,de.elements[se+0],K),fe=this._buildSurfaceVert(de,de.elements[se+1],K),ye=this._buildSurfaceVert(de,de.elements[se+2],K);_.push(xe.top,fe.top,ye.top),a===!1&&_.push(ye.bottom,fe.bottom,xe.bottom)}}this.vertexCache={}}this._buffer.shrink();let M=new Xt(Uint32Array.from(_),1),C=new Xt(this._buffer.positions,3),D=new Xt(this._buffer.normals,3),T=new Xt(this._buffer.uvs,2);C.needsUpdate=!0,D.needsUpdate=!0,T.needsUpdate=!0,M.needsUpdate=!0,this.setAttribute("position",C),this.setAttribute("normal",D),this.setAttribute("uv",T),this.setIndex(M)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,i){let r=e[0];for(let n=0,s=r.boundary.vertexCount;n<s;n++){let a=this._buildBevelVert(t,r,n),o=this._buildBevelVert(t,r,(n+1)%s);i.push(o.topP,a.topN,a.bottomN),i.push(o.topP,a.bottomN,o.bottomP)}}_buildSurfaceVert(e,t,i){let r=t.toString();if(r in this.vertexCache)return this.vertexCache[r];let n=e.vertices[t*2+0],s=e.vertices[t*2+1],a=(n-this._minX)/this._width,o=(s-this._minY)/this._height;this.forPathBevel&&(o=1);let l=this._buffer.get(this.forPathBevel?1:2),c=l*3,u=l*2,h={top:l+0,bottom:l+1};return this._buffer.positions[c+0]=n,this._buffer.positions[c+1]=s,this._buffer.positions[c+2]=this.forPathBevel?this._bevel:this._depth-i,this._buffer.normals[c+0]=0,this._buffer.normals[c+1]=0,this._buffer.normals[c+2]=1,this._buffer.uvs[u+0]=a,this._buffer.uvs[u+1]=o,this.forPathBevel===!1&&(this._buffer.positions[c+3]=n,this._buffer.positions[c+4]=s,this._buffer.positions[c+5]=i,this._buffer.normals[c+3]=0,this._buffer.normals[c+4]=0,this._buffer.normals[c+5]=-1,this._buffer.uvs[u+2]=a,this._buffer.uvs[u+3]=o),this.vertexCache[r]=h,h}_buildBevelVert(e,t,i,r=1,n){let s=`${t.bevelI}:${i}`;if(s in this.vertexCache&&n!==0&&n!==1&&(!n||n===this.vertexCache[s].pathBevelUCoord))return this.vertexCache[s];let[a,o]=t.boundary.vertexIndices[i],l,c,u,h;a!==o?(c=a,l=o,h=!1,u=e.continuous[c]&&e.continuous[l]):(l=a,c=(l-1+e.count)%e.count,h=e.concave[l]&&t.bevelI>0,u=e.continuous[l]||h);let f=Math.cos(t.angle),m=Math.sin(t.angle),g=i*2,v=l*2,x=c*2,b=t.boundary.vertices[g+0],S=t.boundary.vertices[g+1],_=(1-m)*this._bevel,A=(b-this._minX)/this._width,M=(S-this._minY)/this._height;this.forPathBevel&&(n!==void 0&&(A=n),M=1);let C=e.normals[v+0],D=e.normals[v+1],T=e.normals[x+0],R=e.normals[x+1];if(h){let V=T-C,$=R-D;C=C+V*(1-r),D=D+$*(1-r);let q=Math.sqrt(C*C+D*D);C/=q,D/=q}let O=this.forPathBevel?this._buffer.get(u?1:2):this._buffer.get(u?2:4),L=O*3,k=O*2,B={i,fi:l,topP:O+0,topN:O+0,bottomP:O+1,bottomN:O+1,pathBevelUCoord:n};return this._buffer.positions[L+0]=b,this._buffer.positions[L+1]=S,this._buffer.positions[L+2]=(this.forPathBevel?this._bevel:this._depth)-_,this._buffer.normals[L+0]=C*f,this._buffer.normals[L+1]=D*f,this._buffer.normals[L+2]=m,this._buffer.uvs[k+0]=A,this._buffer.uvs[k+1]=M,this.forPathBevel===!1&&(this._buffer.positions[L+3]=b,this._buffer.positions[L+4]=S,this._buffer.positions[L+5]=_,this._buffer.normals[L+3]=C*f,this._buffer.normals[L+4]=D*f,this._buffer.normals[L+5]=-m,this._buffer.uvs[k+2]=M,this._buffer.uvs[k+3]=A),u||(this.forPathBevel?(O+=1,L+=3,k+=2):(O+=2,L+=6,k+=4),B.topP=O+0,B.bottomP=O+1,this._buffer.positions[L+0]=b,this._buffer.positions[L+1]=S,this._buffer.positions[L+2]=(this.forPathBevel?this._bevel:this._depth)-_,this._buffer.normals[L+0]=T*f,this._buffer.normals[L+1]=R*f,this._buffer.normals[L+2]=m,this._buffer.uvs[k+0]=A,this._buffer.uvs[k+1]=M,this.forPathBevel===!1&&(this._buffer.positions[L+3]=b,this._buffer.positions[L+4]=S,this._buffer.positions[L+5]=_,this._buffer.normals[L+3]=T*f,this._buffer.normals[L+4]=R*f,this._buffer.normals[L+5]=-m,this._buffer.uvs[k+2]=M,this._buffer.uvs[k+3]=A)),this.vertexCache[s]=B,B}clone(){let e=new iz(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=U3(this.userData),e}},ene=class extends Rt{constructor(e,t=12,i={}){super(),this.type="ShapeGeometry",this.windingRule=Sr.ODD,this.elementType=Un.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:Sr.ODD,elementType:Un.POLYGONS,polySize:3,vertexSize:2,strict:!0},i);let r=this._shape.extractShapePointsToFlatArray([],this._curveSegments),n=this._shape.shapeHoles.map(f=>f.extractShapePointsToFlatArray([],this._curveSegments)),s,a=!0,o=!0,l,c;for(let f=0,m=r.length/2;f<m;f++){let g=f*2,v=r[g+0],x=r[g+1];if(l!==void 0&&v!==l&&(a=!1),c!==void 0&&x!==c&&(o=!1),l=v,c=x,!a&&!o)break}if(!a&&!o)try{s=uf({contours:[r,...n],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{s=tz}let u=(s==null?void 0:s.vertexCount)??1,h=(s==null?void 0:s.elementCount)??1;if(this._positionAttribute=new Xt(new Float32Array(u*3),3),this._normalAttribute=new Xt(new Float32Array(u*3),3),this._uvAttribute=new Xt(new Float32Array(u*2),2),this._indexAttribute=new Xt(new Uint32Array(h*3),1),s){let f=1/0,m=-1/0,g=1/0,v=-1/0;for(let S=0,_=u;S<_;S++){let A=S*2,M=s.vertices[A+0],C=s.vertices[A+1];M<f&&(f=M),M>m&&(m=M),C<g&&(g=C),C>v&&(v=C)}let x=m-f,b=v-g;for(let S=0,_=u;S<_;S++){let A=S*2,M=s.vertices[A+0],C=s.vertices[A+1],D=(M-f)/x,T=(C-g)/b;this._positionAttribute.setXYZ(S,M,C,0),this._normalAttribute.setXYZ(S,0,0,1),this._uvAttribute.setXY(S,D,T)}for(let S=0,_=h;S<_;S++){let A=S*3,M=s.elements[A+0],C=s.elements[A+1],D=s.elements[A+2];this._indexAttribute.setX(A+0,M),this._indexAttribute.setX(A+1,C),this._indexAttribute.setX(A+2,D)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((s==null?void 0:s.elementCount)??1)*3)}clone(){let e=new ene(this._shape,this._curveSegments);return e.userData=U3(this.userData),e}},tne=class extends iz{constructor(e,t,i=0,r=12,n=3,s=Sr.ODD){super(e,t,i,r,n,s),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,i){let r=e[0];for(let n=0,s=r.boundary.vertexCount;n<s;n++){let a=this._buildBevelVert(t,r,n),o=this._buildBevelVert(t,r,(n+1)%s);i.push(o.topP,a.topN,a.bottomN),i.push(o.topP,a.bottomN,o.bottomP)}}clone(){let e=new tne(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=U3(this.userData),e}},Ym=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var c,u;let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:Sr.ODD},e.parameters),r=Math.abs(i.width),n=Math.abs(i.height??i.width),s=Math.abs(i.depth??0),a=e.shape??(t==null?void 0:t.shape),o=(a==null?void 0:a.roundness)??i.roundness;a!==void 0&&(a instanceof gn?(a.width!==r||a.height!==n)&&a.applySize(r,n):a=new gn(r,n).fromJSON(a),((c=e.parameters)==null?void 0:c.roundness)!==void 0&&((u=e.parameters)==null?void 0:u.roundness)>0&&a.update());let l=a??new gn(r,n);return{parameters:Object.assign(i,{width:r,height:n,depth:s,roundness:o}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:i,extrudeBevelSegments:r,subdivisions:n,roundness:s,windingRule:a}=e.parameters;e.shape.roundness=s;let o;return t<=0?o=new ene(e.shape,n,{windingRule:a}):o=new tne(e.shape,t,i,n,r,a),Object.assign(o,{userData:{...e,type:"VectorGeometry"}})}},ine=Math.PI*2,rz=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return i.angle=wt.clamp(i.angle,0,360),{shape:e.shape&&e.shape instanceof gn?e.shape:new gn,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,spikes:r,angle:n,innerRadius:s,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,c=e.shape,u=t*.5,h=i*.5,f=WWe(c,u,h,n*Math.PI/180,r,s);c.isClosed=!0,c.update();let m;return n===0?(m=new Rt,m.setAttribute("position",new yt([],3))):m=Ym.create({shape:c,parameters:{subdivisions:f,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}}),Object.assign(m,{userData:{...e,type:"EllipseGeometry"}})}};function WWe(e,t,i,r,n,s){if(r>=ine)return n>30||n%4===0?(XWe(e,t,i,s),Math.round(n/4)):wW(e,r,n,t,i,s);r=Math.max(r,.001);let a={x:0,y:i},o=r+Math.PI*.5,l={x:Math.cos(o)*t,y:Math.sin(o)*i},c=kWe({px:a.x,py:a.y,cx:l.x,cy:l.y,rx:t,ry:i,largeArcFlag:r>Math.PI,sweepFlag:!0});return n>30||n%c.length===0?qWe(e,a.x,a.y,c,n,t,i,s):wW(e,r,n,t,i,s)}function qWe(e,t,i,r,n,s,a,o){let l=Math.round(n/r.length);e.addPoint(rv(t,i));for(let c=0,u=r.length;c<u;c++){let h=r[c],f=e.points[c],m=rv(h.x,h.y);f.controls[1].position.set(h.x1,h.y1),m.controls[0].position.set(h.x2,h.y2),e.addPoint(m)}return o>0?rne(e,s,a,o):e.addPoint(rv(0,0)),l}function wW(e,t,i,r,n,s){let a=-t/i;for(let o=0;o<=i;o++){let l=a*o,c=Math.sin(l)*r,u=Math.cos(l)*n;e.addPoint(rv(c,u))}return t<ine?s>0?rne(e,r,n,s):e.addPoint(rv(0,0)):(e.removePoint(e.points[e.points.length-1]),s>0&&nne(e,r,n,s)),1}function XWe(e,t,i,r=0,n=0,s=0){let a=.5522847498,o=t*a,l=i*a;e.addPoint(D_(n-t,s,n-t,s-l,n-t,s+l)),e.addPoint(D_(n,s+i,n-o,s+i,n+o,s+i)),e.addPoint(D_(n+t,s,n+t,s+l,n+t,s-l)),e.addPoint(D_(n,s-i,n+o,s-i,n-o,s-i)),r>0&&nne(e,t,i,r)}function rv(e,t){return new iv(wt.generateUUID(),new pe(e,t))}function D_(e,t,i,r,n,s){let a=rv(e,t);return a.controls[0].position.set(i,r),a.controls[1].position.set(n,s),a}function rne(e,t,i,r){sne(e,t,i,r).forEach(n=>e.addPoint(n))}function nne(e,t,i,r){let n=sne(e,t,i,r),s=new gn;n.forEach(a=>s.addPoint(a)),s.isClosed=!0,e.shapeHoles.push(s)}function sne(e,t,i,r){let n=r*t/100,s=n*(Math.abs(i)/Math.abs(t)),a=new pe(n/t,s/i),o=e.points.map(l=>{let c=l.clone();return c.uuid=wt.generateUUID(),c}).reverse();return o.forEach(l=>{l.position.multiply(a);let c=l.controls[0].position.clone().multiply(a),u=l.controls[1].position.clone().multiply(a);l.controls[0].position.copy(u),l.controls[1].position.copy(c)}),o}var YWe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),r=Math.abs(i.width),n=Math.abs(i.height??r),s=Math.abs(i.depth??r),a=Math.abs(Math.min(r,s))/2;return{parameters:Object.assign(i,{width:r,height:n,depth:s,radius:a,segments:Math.round(i.segments),pathSegments:Math.round(i.pathSegments),cornerSegments:Math.round(i.cornerSegments)})}}static build(e){let{width:t,height:i,depth:r,radius:n,revolutions:s,segments:a,pathRadius:o,pathType:l,pathSegments:c,cornerRadius:u,cornerSegments:h}=e.parameters,f=new ane(!1,t,i,r,n,s,a,o,l,c,u,h);return Object.assign(f,{userData:{...e,type:"HelixGeometry"}})}},z4=new Z0([0,0,0],1),ane=class extends Rt{constructor(e=!0,t=1,i=1,r=1,n=1,s=1,a=1,o=1,l=1,c=1,u=1,h=1){if(super(),s===0)return;let f=e&&s===1;f&&(h=0),u>100&&(u=100),u===0&&(h=0);let m=()=>new j,g=new j,v=m(),x=m(),b=m(),S,_,A,M,C,D,T,R,O=m(),L=m(),k=m(),B=m(),V=m(),$=m(),q=m(),Y=m(),X=i-2*o+.001,ne=X/s,F=Math.ceil(a*s),K=F+1,re=X/F,oe=-X/2,ce=c+1,de=2*Math.PI/c,se=Math.PI/2/h,xe=.01,fe=Math.min((1-u/100)*o,o-xe),ye=o-fe,_e=0,Te=2,Ce=h*Te+Te,Le=ce*Ce/Te,Ke=Le+ce*K,Xe=Math.max(0,ce*(K+Ce)),[pt,ct,ot]=[3,3,2].map(Ve=>Array(Xe*Ve).fill(0)),rt=[],Dt=n-o;function At(Ve,Tt){let ft=Math.PI/2;D=Tt*re,R=2*Math.PI*(D%ne)/ne+ft,D+=oe,T=Math.sin(R)*Dt,C=Math.cos(R)*Dt,e?Ve.set(C,T,D):Ve.set(C,D,T)}At(g,-1e-10),At(v,0),O.copy(g),At(g,1);let he=g.distanceTo(v),ie=f?0:ye+fe,Me=he*F+2*ie,$e=fe,Z=Me-ie;for(let Ve=0;Ve<=F;Ve++){At(x,Ve),Y.subVectors(x,O).normalize(),O.copy(x),$.copy(x).setComponent(+e+1,0).normalize(),q.crossVectors(Y,$).normalize();let Tt=Ve===0,ft=Ve===F,St=Tt?3*Math.PI/2:se,Ct=Tt?$e:Z,bt=Tt?ce:Ke,It=Tt?0:Xe-ce,Ei=Y.clone().multiplyScalar(Tt?-ye:ye).add(x),er=Y.clone().multiplyScalar(Tt?-1:1).normalize();for(let be=0;be<ce;be++){let Ue=be*de;if(L.addVectors(g.copy($).multiplyScalar(o*Math.cos(Ue)),v.copy(q).multiplyScalar(o*Math.sin(Ue))),k.copy(L).normalize(),Tt||ft){f||(_e=It+be,[0,1,2].forEach(qe=>{pt[_e*3+qe]=Ei.getComponent(qe),ct[_e*3+qe]=er.getComponent(qe)}),ot[_e*2]=+ft,ot[_e*2+1]=be/c),v.copy(k).multiplyScalar(fe),b.addVectors(x,v);for(let qe=0;qe<h;qe++){let ut=qe*se+St;B.addVectors(g.copy(Y).multiplyScalar(ye*Math.sin(ut)),v.copy(k).multiplyScalar(ye*Math.cos(ut))),V.copy(B).normalize(),v.addVectors(b,B),B.normalize(),_e=bt+qe*ce+be,[0,1,2].forEach(si=>{pt[_e*3+si]=v.getComponent(si),ct[_e*3+si]=V.getComponent(si)});let Bt=+Tt+Math.sin(ut);ot[_e*2]=(Ct+ye*Bt)/Me,ot[_e*2+1]=be/c}}v.addVectors(x,L),_e=Le+Ve*ce+be,[0,1,2].forEach(qe=>{pt[_e*3+qe]=v.getComponent(qe),ct[_e*3+qe]=k.getComponent(qe)}),ot[_e*2]=(ie+Ve*he)/Me,ot[_e*2+1]=be/c}}let We=K+2*h+Te,[dt,lt]=[+f,We-1];for(let Ve=dt;Ve<=lt-1;Ve++){let Tt=f&&Ve===lt-1;for(let ft=0;ft<ce-1;ft++)S=Ve*ce+ft,_=S+1,A=(Tt?ft:S)+ce,M=(Tt?ft+1:_)+ce,Ve===0?rt.push(_,M,A):Ve===We-2?rt.push(S,_,A):rt.push(S,_,A,_,M,A)}this.setIndex(rt),this.setAttribute("position",new yt(pt,3)),this.setAttribute("normal",new yt(ct,3)),this.setAttribute("uv",new yt(ot,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,t=Math.ceil(e.tubularSegments),i=e.radialSegments+1,r=Array.from(this.getIndex().array),n,s,a,o,l=6*(t-1)*e.radialSegments,c=t,u=c===t;for(let h=0;h<e.radialSegments;h++)n=c*i+h,s=n+1,a=(u?h:n)+i,o=(u?h+1:s)+i,r[l++]=n,r[l++]=s,r[l++]=a,r[l++]=s,r[l++]=o,r[l++]=a;return r.length=l,z4.array=r,z4.count=r.length,z4}},QWe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,detail:n,corner:s,cornerSides:a}=e.parameters,o=n===0&&s!==0?new one(t*.5,s,a):new nie(t*.5,n);return o.scale(1,i/t,r/t),Object.assign(o,{userData:{...e,type:"IcosahedronGeometry"}})}},one=class extends $k{constructor(e=1,t=.2,i=4){let r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a="IcosahedronGeometry";super(n,s,a,e,t,i),this.type=a}static fromJSON(e){return new one(e.radius,e.corner,e.cornerSides)}},KWe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r;(((r=e.parameters)==null?void 0:r.points)??[]).forEach(n=>{Array.isArray(n)&&(n.x=n[0],n.y=n[1])});let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{points:t,segments:i,verticalSegments:r}=e.parameters,n=new WA;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let s=new $te(n.extractPoints(r).shape,i);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...e,type:"LatheGeometry"}})}},Bc=new tt,B4=new mr,I_=new j,PT=class extends la{constructor(){super(),this.uuid=wt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new Hn().getNormalMatrix(e);for(let i=0,r=this.vertices.length;i<r;i++)this.vertices[i].applyMatrix4(e);for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i];n.normal.applyMatrix3(t).normalize();for(let s=0,a=n.vertexNormals.length;s<a;s++)n.vertexNormals[s].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Bc.makeRotationX(e),this.applyMatrix4(Bc),this}rotateY(e){return Bc.makeRotationY(e),this.applyMatrix4(Bc),this}rotateZ(e){return Bc.makeRotationZ(e),this.applyMatrix4(Bc),this}translate(e,t,i){return Bc.makeTranslation(e,t,i),this.applyMatrix4(Bc),this}scale(e,t,i){return Bc.makeScale(e,t,i),this.applyMatrix4(Bc),this}lookAt(e){return B4.lookAt(e),B4.updateMatrix(),this.applyMatrix4(B4.matrix),this}fromBufferGeometry(e){let t=this,i=e.index!==null?e.index:void 0,r=e.attributes;if(r.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=r.position,s=r.normal,a=r.color,o=r.uv,l=r.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let h=0;h<n.count;h++)t.vertices.push(new j().fromBufferAttribute(n,h)),a!==void 0&&t.colors.push(new qt().fromBufferAttribute(a,h));function c(h,f,m,g){let v=a===void 0?[]:[t.colors[h].clone(),t.colors[f].clone(),t.colors[m].clone()],x=s===void 0?[]:[new j().fromBufferAttribute(s,h),new j().fromBufferAttribute(s,f),new j().fromBufferAttribute(s,m)],b=new _O(h,f,m,x,v,g);t.faces.push(b),o!==void 0&&t.faceVertexUvs[0].push([new pe().fromBufferAttribute(o,h),new pe().fromBufferAttribute(o,f),new pe().fromBufferAttribute(o,m)]),l!==void 0&&t.faceVertexUvs[1].push([new pe().fromBufferAttribute(l,h),new pe().fromBufferAttribute(l,f),new pe().fromBufferAttribute(l,m)])}let u=e.groups;if(u.length>0)for(let h=0;h<u.length;h++){let f=u[h],m=f.start,g=f.count;for(let v=m,x=m+g;v<x;v+=3)i!==void 0?c(i.getX(v),i.getX(v+1),i.getX(v+2),f.materialIndex):c(v,v+1,v+2,f.materialIndex)}else if(i!==void 0)for(let h=0;h<i.count;h+=3)c(i.getX(h),i.getX(h+1),i.getX(h+2));else for(let h=0;h<n.count;h+=3)c(h,h+1,h+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(I_).negate(),this.translate(I_.x,I_.y,I_.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,i=t===0?1:1/t,r=new tt;return r.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix4(r),this}computeFaceNormals(){let e=new j,t=new j;for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i],s=this.vertices[n.a],a=this.vertices[n.b],o=this.vertices[n.c];e.subVectors(o,a),t.subVectors(s,a),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let i=0,r=this.vertices.length;i<r;i++)t[i]=new j;if(e){let i=new j,r=new j;for(let n=0,s=this.faces.length;n<s;n++){let a=this.faces[n],o=this.vertices[a.a],l=this.vertices[a.b],c=this.vertices[a.c];i.subVectors(c,l),r.subVectors(o,l),i.cross(r),t[a.a].add(i),t[a.b].add(i),t[a.c].add(i)}}else{this.computeFaceNormals();for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let i=0,r=this.vertices.length;i<r;i++)t[i].normalize();for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i],s=n.vertexNormals;s.length===3?(s[0].copy(t[n.a]),s[1].copy(t[n.b]),s[2].copy(t[n.c])):(s[0]=t[n.a].clone(),s[1]=t[n.b].clone(),s[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let i=this.faces[e],r=i.vertexNormals;r.length===3?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);for(let n=0,s=r.vertexNormals.length;n<s;n++)r.__originalVertexNormals[n]?r.__originalVertexNormals[n].copy(r.vertexNormals[n]):r.__originalVertexNormals[n]=r.vertexNormals[n].clone()}let e=new PT;e.faces=this.faces;for(let t=0,i=this.morphTargets.length;t<i;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(let a=0,o=this.faces.length;a<o;a++){let l=new j,c={a:new j,b:new j,c:new j};n.push(l),s.push(c)}}let r=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,s=this.faces.length;n<s;n++){let a=this.faces[n],o=r.faceNormals[n],l=r.vertexNormals[n];o.copy(a.normal),l.a.copy(a.vertexNormals[0]),l.b.copy(a.vertexNormals[1]),l.c.copy(a.vertexNormals[2])}}for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pn),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new yo),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,i=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let r,n=this.vertices.length,s=this.vertices,a=e.vertices,o=this.faces,l=e.faces,c=this.colors,u=e.colors;t!==void 0&&(r=new Hn().getNormalMatrix(t));for(let h=0,f=a.length;h<f;h++){let m=a[h].clone();t!==void 0&&m.applyMatrix4(t),s.push(m)}for(let h=0,f=u.length;h<f;h++)c.push(u[h].clone());for(let h=0,f=l.length;h<f;h++){let m=l[h],g,v,x=m.vertexNormals,b=m.vertexColors,S=new _O(m.a+n,m.b+n,m.c+n);S.normal.copy(m.normal),r!==void 0&&S.normal.applyMatrix3(r).normalize();for(let _=0,A=x.length;_<A;_++)g=x[_].clone(),r!==void 0&&g.applyMatrix3(r).normalize(),S.vertexNormals.push(g);S.color.copy(m.color);for(let _=0,A=b.length;_<A;_++)v=b[_],S.vertexColors.push(v.clone());S.materialIndex=m.materialIndex+i,o.push(S)}for(let h=0,f=e.faceVertexUvs.length;h<f;h++){let m=e.faceVertexUvs[h];this.faceVertexUvs[h]===void 0&&(this.faceVertexUvs[h]=[]);for(let g=0,v=m.length;g<v;g++){let x=m[g],b=[];for(let S=0,_=x.length;S<_;S++)b.push(x[S].clone());this.faceVertexUvs[h].push(b)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},i=[],r=[],n=Math.pow(10,e);for(let o=0,l=this.vertices.length;o<l;o++){let c=this.vertices[o],u=Math.round(c.x*n)+"_"+Math.round(c.y*n)+"_"+Math.round(c.z*n);t[u]===void 0?(t[u]=o,i.push(this.vertices[o]),r[o]=i.length-1):r[o]=r[t[u]]}let s=[];for(let o=0,l=this.faces.length;o<l;o++){let c=this.faces[o];c.a=r[c.a],c.b=r[c.b],c.c=r[c.c];let u=[c.a,c.b,c.c];for(let h=0;h<3;h++)if(u[h]===u[(h+1)%3]){s.push(o);break}}for(let o=s.length-1;o>=0;o--){let l=s[o];this.faces.splice(l,1);for(let c=0,u=this.faceVertexUvs.length;c<u;c++)this.faceVertexUvs[c].splice(l,1)}let a=this.vertices.length-i.length;return this.vertices=i,a}setFromPoints(e){this.vertices=[];for(let t=0,i=e.length;t<i;t++){let r=e[t];this.vertices.push(new j(r.x,r.y,r.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let o=0;o<t;o++)e[o]._id=o;function i(o,l){return o.materialIndex-l.materialIndex}e.sort(i);let r=this.faceVertexUvs[0],n=this.faceVertexUvs[1],s,a;r&&r.length===t&&(s=[]),n&&n.length===t&&(a=[]);for(let o=0;o<t;o++){let l=e[o]._id;s&&s.push(r[l]),a&&a.push(n[l])}s&&(this.faceVertexUvs[0]=s),a&&(this.faceVertexUvs[1]=a)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let m=this.parameters;for(let g in m)m[g]!==void 0&&(e[g]=m[g]);return e}let t=[];for(let m=0;m<this.vertices.length;m++){let g=this.vertices[m];t.push(g.x,g.y,g.z)}let i=[],r=[],n={},s=[],a={},o=[],l={};for(let m=0;m<this.faces.length;m++){let g=this.faces[m],v=!0,x=!1,b=this.faceVertexUvs[0][m]!==void 0,S=g.normal.length()>0,_=g.vertexNormals.length>0,A=g.color.r!==1||g.color.g!==1||g.color.b!==1,M=g.vertexColors.length>0,C=0;if(C=c(C,0,0),C=c(C,1,v),C=c(C,2,x),C=c(C,3,b),C=c(C,4,S),C=c(C,5,_),C=c(C,6,A),C=c(C,7,M),i.push(C),i.push(g.a,g.b,g.c),i.push(g.materialIndex),b){let D=this.faceVertexUvs[0][m];i.push(f(D[0]),f(D[1]),f(D[2]))}if(S&&i.push(u(g.normal)),_){let D=g.vertexNormals;i.push(u(D[0]),u(D[1]),u(D[2]))}if(A&&i.push(h(g.color)),M){let D=g.vertexColors;i.push(h(D[0]),h(D[1]),h(D[2]))}}function c(m,g,v){return v?m|1<<g:m&~(1<<g)}function u(m){let g=m.x.toString()+m.y.toString()+m.z.toString();return n[g]!==void 0||(n[g]=r.length/3,r.push(m.x,m.y,m.z)),n[g]}function h(m){let g=m.r.toString()+m.g.toString()+m.b.toString();return a[g]!==void 0||(a[g]=s.length,s.push(m.getHex())),a[g]}function f(m){let g=m.x.toString()+m.y.toString();return l[g]!==void 0||(l[g]=o.length/2,o.push(m.x,m.y)),l[g]}return e.data={},e.data.vertices=t,e.data.normals=r,s.length>0&&(e.data.colors=s),o.length>0&&(e.data.uvs=[o]),e.data.faces=i,e}clone(){return new PT().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let h=0,f=t.length;h<f;h++)this.vertices.push(t[h].clone());let i=e.colors;for(let h=0,f=i.length;h<f;h++)this.colors.push(i[h].clone());let r=e.faces;for(let h=0,f=r.length;h<f;h++)this.faces.push(r[h].clone());for(let h=0,f=e.faceVertexUvs.length;h<f;h++){let m=e.faceVertexUvs[h];this.faceVertexUvs[h]===void 0&&(this.faceVertexUvs[h]=[]);for(let g=0,v=m.length;g<v;g++){let x=m[g],b=[];for(let S=0,_=x.length;S<_;S++){let A=x[S];b.push(A.clone())}this.faceVertexUvs[h].push(b)}}let n=e.morphTargets;for(let h=0,f=n.length;h<f;h++){let m={};if(m.name=n[h].name,n[h].vertices!==void 0){m.vertices=[];for(let g=0,v=n[h].vertices.length;g<v;g++)m.vertices.push(n[h].vertices[g].clone())}if(n[h].normals!==void 0){m.normals=[];for(let g=0,v=n[h].normals.length;g<v;g++)m.normals.push(n[h].normals[g].clone())}this.morphTargets.push(m)}let s=e.morphNormals;for(let h=0,f=s.length;h<f;h++){let m={};if(s[h].vertexNormals!==void 0){m.vertexNormals=[];for(let g=0,v=s[h].vertexNormals.length;g<v;g++){let x=s[h].vertexNormals[g],b={};b.a=x.a.clone(),b.b=x.b.clone(),b.c=x.c.clone(),m.vertexNormals.push(b)}}if(s[h].faceNormals!==void 0){m.faceNormals=[];for(let g=0,v=s[h].faceNormals.length;g<v;g++)m.faceNormals.push(s[h].faceNormals[g].clone())}this.morphNormals.push(m)}let a=e.skinWeights;for(let h=0,f=a.length;h<f;h++)this.skinWeights.push(a[h].clone());let o=e.skinIndices;for(let h=0,f=o.length;h<f;h++)this.skinIndices.push(o[h].clone());let l=e.lineDistances;for(let h=0,f=l.length;h<f;h++)this.lineDistances.push(l[h]);let c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());let u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new ZWe().fromGeometry(this),t=new Rt,i=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",R_.call(new Xt(i,3),e.vertices)),e.normals.length>0){let r=new Float32Array(e.normals.length*3);t.setAttribute("normal",R_.call(new Xt(r,3),e.normals))}if(e.colors.length>0){let r=new Float32Array(e.colors.length*3);t.setAttribute("color",SW.call(new Xt(r,3),e.colors))}if(e.uvs.length>0){let r=new Float32Array(e.uvs.length*2);t.setAttribute("uv",_W.call(new Xt(r,2),e.uvs))}if(e.uvs2.length>0){let r=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",_W.call(new Xt(r,2),e.uvs2))}t.groups=e.groups;for(let r in e.morphTargets){let n=[],s=e.morphTargets[r];for(let a=0,o=s.length;a<o;a++){let l=s[a],c=new yt(l.data.length*3,3);c.name=l.name,n.push(R_.call(c,l.data))}t.morphAttributes[r]=n}if(e.skinIndices.length>0){let r=new yt(e.skinIndices.length*4,4);t.setAttribute("skinIndex",EW.call(r,e.skinIndices))}if(e.skinWeights.length>0){let r=new yt(e.skinWeights.length*4,4);t.setAttribute("skinWeight",EW.call(r,e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new Rt,i=e.geometry;if(e.isPoints||e.isLine){let r=new yt(i.vertices.length*3,3),n=new yt(i.colors.length*3,3);if(t.setAttribute("position",R_.call(r,i.vertices)),t.setAttribute("color",SW.call(n,i.colors)),i.lineDistances&&i.lineDistances.length===i.vertices.length){let s=new yt(i.lineDistances.length,1);t.setAttribute("lineDistance",$We.call(s,i.lineDistances))}i.boundingSphere!==null&&(t.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(t.boundingBox=i.boundingBox.clone())}else e.isMesh&&(t=i.toBufferGeometry());return t}};PT.prototype.isGeometry=!0;var ZWe=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],i,r,n,s=e.faces;for(r=0;r<s.length;r++){let a=s[r];a.materialIndex!==n&&(n=a.materialIndex,i!==void 0&&(i.count=r*3-i.start,t.push(i)),i={start:r*3,materialIndex:n})}i!==void 0&&(i.count=r*3-i.start,t.push(i)),this.groups=t}fromGeometry(e){let t=e.faces,i=e.vertices,r=e.faceVertexUvs,n=r[0]&&r[0].length>0,s=r[1]&&r[1].length>0,a=e.morphTargets,o=a.length,l;if(o>0){l=[];for(let x=0;x<o;x++)l[x]={name:a[x].name,data:[]};this.morphTargets.position=l}let c=e.morphNormals,u=c.length,h;if(u>0){h=[];for(let x=0;x<u;x++)h[x]={name:c[x].name,data:[]};this.morphTargets.normal=h}let f=e.skinIndices,m=e.skinWeights,g=f.length===i.length,v=m.length===i.length;i.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let x=0;x<t.length;x++){let b=t[x];this.vertices.push(i[b.a],i[b.b],i[b.c]);let S=b.vertexNormals;if(S.length===3)this.normals.push(S[0],S[1],S[2]);else{let A=b.normal;this.normals.push(A,A,A)}let _=b.vertexColors;if(_.length===3)this.colors.push(_[0],_[1],_[2]);else{let A=b.color;this.colors.push(A,A,A)}if(n===!0){let A=r[0][x];A!==void 0?this.uvs.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",x),this.uvs.push(new pe,new pe,new pe))}if(s===!0){let A=r[1][x];A!==void 0?this.uvs2.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",x),this.uvs2.push(new pe,new pe,new pe))}for(let A=0;A<o;A++){let M=a[A].vertices;l[A].data.push(M[b.a],M[b.b],M[b.c])}for(let A=0;A<u;A++){let M=c[A].vertexNormals[x];h[A].data.push(M.a,M.b,M.c)}g&&this.skinIndices.push(f[b.a],f[b.b],f[b.c]),v&&this.skinWeights.push(m[b.a],m[b.b],m[b.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},_O=class{constructor(e,t,i,r,n,s=0){this.a=e,this.b=t,this.c=i,this.normal=r&&r.isVector3?r:new j,this.vertexNormals=Array.isArray(r)?r:[],this.color=n&&n.isColor?n:new qt,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function $We(e){return this.array.set(e),this}function SW(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),s=new qt),t[i++]=s.r,t[i++]=s.g,t[i++]=s.b}return this}function _W(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new pe),t[i++]=s.x,t[i++]=s.y}return this}function R_(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),s=new j),t[i++]=s.x,t[i++]=s.y,t[i++]=s.z}return this}function EW(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),s=new ni),t[i++]=s.x,t[i++]=s.y,t[i++]=s.z,t[i++]=s.w}return this}var JWe=["a","b","c"];function eqe(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function j4(e,t,i){let r=Math.min(e,t),n=Math.max(e,t),s=r+"_"+n;return i.get(s)}function N4(e,t,i,r,n,s){let a=Math.min(e,t),o=Math.max(e,t),l=a+"_"+o,c;if(r.has(l))c=r.get(l);else{let u=i[a],h=i[o];c={a:u,b:h,newEdge:null,faces:[]},r.set(l,c)}c.faces.push(n),s[e].edges.push(c),s[t].edges.push(c)}function tqe(e,t,i,r){let n,s,a;for(n=0,s=e.length;n<s;n++)i[n]={edges:[]};for(n=0,s=t.length;n<s;n++)a=t[n],N4(a.a,a.b,e,r,a,i),N4(a.b,a.c,e,r,a,i),N4(a.c,a.a,e,r,a,i)}function O_(e,t,i,r,n){e.push(new _O(t,i,r,void 0,void 0,n))}function a0(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function L_(e,t,i,r){e.push([t.clone(),i.clone(),r.clone()])}var iqe=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof Rt?e=new PT().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new j,i,r,n,s,a,o=e.vertices,l=e.faces,c=e.faceVertexUvs[0],u=c!==void 0&&c.length>0,h=[],f=new Map;tqe(o,l,h,f);let m=[],g,v,x,b,S,_,A;for(let xe of Array.from(f.keys())){for(v=f.get(xe),x=new j,S=3/8,_=1/8,A=v.faces.length,A!=2&&(S=.5,_=0,A!=1),x.addVectors(v.a,v.b).multiplyScalar(S),t.set(0,0,0),s=0;s<A;s++){for(b=v.faces[s],a=0;a<3&&(g=o[eqe(b,JWe[a])],!(g!==v.a&&g!==v.b));a++);g&&t.add(g)}t.multiplyScalar(_),x.add(t),v.newEdge=m.length,m.push(x)}let M,C,D,T,R,O,L,k=[];for(r=0,n=o.length;r<n;r++){for(O=o[r],R=h[r].edges,i=R.length,i==3?M=3/16:i>3&&(M=3/(8*i)),C=1-i*Number(M),D=M,i<=2&&(i==2?(C=3/4,D=1/8):i==1||i==0),L=O.clone().multiplyScalar(C),t.set(0,0,0),s=0;s<i;s++)T=R[s],g=T.a!==O?T.a:T.b,t.add(g);t.multiplyScalar(Number(D)),L.add(t),k.push(L)}let B=k.concat(m),V=k.length,$,q,Y,X=[],ne=[],F,K,re,oe,ce=new pe,de=new pe,se=new pe;for(r=0,n=l.length;r<n;r++)b=l[r],$=Number(j4(b.a,b.b,f).newEdge)+V,q=Number(j4(b.b,b.c,f).newEdge)+V,Y=Number(j4(b.c,b.a,f).newEdge)+V,O_(X,$,q,Y,b.materialIndex),O_(X,b.a,$,Y,b.materialIndex),O_(X,b.b,q,$,b.materialIndex),O_(X,b.c,Y,q,b.materialIndex),u&&(F=c[r],K=F[0],re=F[1],oe=F[2],ce.set(a0(K.x,re.x),a0(K.y,re.y)),de.set(a0(re.x,oe.x),a0(re.y,oe.y)),se.set(a0(K.x,oe.x),a0(K.y,oe.y)),L_(ne,ce,de,se),L_(ne,K,ce,se),L_(ne,re,de,ce),L_(ne,oe,se,de));e.vertices=B,e.faces=X,u&&(e.faceVertexUvs[0]=ne)}},es=new j,rqe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=e.geometry??(t==null?void 0:t.geometry)??new Rt().copy(new uc(100,100,100)),r;t===void 0?(i.computeBoundingBox(),i.boundingBox.getSize(es),r={width:es.x,height:es.y,depth:es.z,subdivisions:0}):r=t.parameters;let n={...r,...e.parameters};return{parameters:{width:Math.abs(n.width),height:Math.abs(n.height),depth:Math.abs(n.depth),subdivisions:Math.abs(n.subdivisions)},geometry:i}}static build(e){let{width:t,height:i,depth:r,subdivisions:n}=e.parameters,s=e.geometry??new Rt().copy(new uc(100,100,100)),a=s.userData.parameters;a===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(es)):es.set(a.width,a.height,a.depth),(t!==es.x||i!==es.y||r!==es.z)&&s.scale(es.x===0?1:t/es.x,es.y===0?1:i/es.y,es.z===0?1:r/es.z);let o=s.originalGeometry;try{n>0?(o===void 0||(a==null?void 0:a.subdivisions)!==n)&&(o===void 0&&(o=s),s=new iqe(n).modify(o).toBufferGeometry()):(o!==void 0&&(s=o),o=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals())}catch{o!==void 0&&(s=o),o=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals()}return o!==void 0&&Object.assign(s,{originalGeometry:o}),delete e.geometry,Object.assign(s,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,i){new fie(i).load(e,r=>{let n=this.normalizeInputs({geometry:r});r.boundingBox.getSize(es);let s=100/es.x;Object.assign(n.parameters,{width:100,height:es.y*s,depth:es.z*s}),t(this.build(n))})}},lne=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof gn?e.shape:new gn,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,spikes:r,cornerRadius:n,depth:s,extrudeBevelSize:a,extrudeBevelSegments:o}=e.parameters,l=e.shape,c=t*.5,u=i*.5,h=0,f=0,m=2*Math.PI/r;for(let v=0;v<r;v++){let x=m*v,b=h+Math.sin(x)*c,S=f+Math.cos(x)*u;l.addPoint(l.createPoint(b,S))}l.isClosed=!0;for(let v=0,x=l.points.length;v<x;v++)l.points[v].roundness=n;l.roundness=n,l.update();let g=Ym.create({shape:l,parameters:{roundness:n,depth:s,extrudeBevelSize:a,extrudeBevelSegments:o}});return Object.assign(g,{userData:{...e,type:"PolygonGeometry"}})}},nqe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,radialSegments:n,heightSegments:s,openEnded:a,cornerRadius:o,cornerSegments:l}=e.parameters,c=new aqe(t*.5,i,n,s,a,o,l);return c.scale(1,1,r/t),Object.assign(c,{userData:{...e,type:"PyramidGeometry"}})}};function X1(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function V4(e,t,i,r,n,s){let a=t.clone().sub(e),o=i.clone().sub(e),l=a.angleTo(o);if(a.normalize(),o.normalize(),r===n){let c=a.add(o).normalize();s.copy(e).addScaledVector(c,r/Math.sin(l/2))}else{let c=a.angleTo(o);s.copy(e),s.addScaledVector(a,n/Math.sin(c)),s.addScaledVector(o,r/Math.sin(c))}}function sqe(e,t,i){let r=e.clone().sub(t),n=i.clone().sub(t);return r.projectOnVector(n),r.add(t)}var aqe=class extends Rt{constructor(e=.5,t=1,i=4,r=1,n=!1,s=0,a=4){super(),i=Math.floor(Math.max(3,i)),r=Math.floor(r),a=Math.floor(a);let o=[],l=[],c=[],u=[],h=0,f=t/2,m=Math.PI/i,g=e*Math.cos(Math.PI/i),v=2*Math.PI/i,x=(i-2)*Math.PI/i,b=Math.PI-x,S=new j(0,-f,0),_=new j(0,f,0),A=new pe(e,-f),M=new pe(g,-f),C=new pe(0,_.y).sub(M),D=new pe(0,_.y).sub(A),T=new pe(C.y,-C.x).normalize(),R=new pe(D.y,-D.x).normalize(),O=e*Math.cos(Math.PI/i)*Math.tan((Math.PI-C.angle())/2)-1e-8;s=Math.min(s,O);let L;{let Y=new j(T.x,T.y,0),X=new j(Math.cos(v)*Y.x,Y.y,Math.sin(v)*Y.x);L=Y.angleTo(X)}let k=s/Math.tan((Math.PI-C.angle())/2),B=s/Math.tan((Math.PI-L)/2),V=new j;if(!n){l.push(S.x,S.y,S.z),c.push(0,-1,0),u.push(0,0);let Y=h++,X=[],ne=A.clone(),F=k/Math.cos(Math.PI/i);ne.x-=F;for(let K=0;K<i;K++){let re=K/i*Math.PI*2+m,oe=new pe(Math.sin(re),Math.cos(re));X1(ne,oe,V),l.push(V.x,V.y,V.z),c.push(0,-1,0),u.push(0,0),X.push(h++)}for(let K=0;K<X.length;K++)o.push(X[K],Y,X[(K+1)%X.length])}{let Y=new j,X=new j,ne=new j,F=new j,K=new j,re=new j;for(let oe=0;oe<i;oe++){let ce=oe/i*Math.PI*2+m,de=(oe+.5)/i*Math.PI*2+m,se=(oe+1)/i*Math.PI*2+m,xe=new pe(Math.sin(ce),Math.cos(ce)),fe=new pe(Math.sin(de),Math.cos(de)),ye=new pe(Math.sin(se),Math.cos(se));X1(A,xe,X),X1(A,ye,ne),X1(T,fe,Y),V4(_,X,ne,B,B,F),l.push(F.x,F.y,F.z),V4(X,_,ne,B,k,K),l.push(K.x,K.y,K.z),V4(ne,X,_,k,B,re),l.push(re.x,re.y,re.z),c.push(Y.x,Y.y,Y.z),c.push(Y.x,Y.y,Y.z),c.push(Y.x,Y.y,Y.z),u.push(0,0),u.push(0,0),u.push(0,0);let _e=h++,Te=h++,Ce=h++;if(o.push(_e,Te,Ce),s>0){{let Xe=X.clone().add(ne).multiplyScalar(.5),pt=_.clone().sub(Xe).normalize(),ct=S.clone().sub(Xe).normalize().add(pt).normalize().multiplyScalar(-1),ot=re.clone().sub(K);$(Xe,ot,ct,C.angle())}let Le,Ke;{let Xe=new j;X1(R,ye,Xe);let pt=re.clone().add(F).multiplyScalar(.5);pt=sqe(pt,ne,_);let ct=re.clone().sub(F);[Le,Ke]=$(pt,ct,Xe,L,F.y)}{let Xe=Le,pt=Xe.clone().setY(0).normalize(),ct=new j(0,-1,0),ot=pt.clone().cross(ct);q(Xe,pt,ct,ot)}{let Xe=C.angle(),pt=Math.PI-Xe,ct=_.clone();ct.y-=s/Math.sin(Xe-Math.PI/2);let ot=new j,rt=[];for(let At=0;At<a;At++){let he=[],ie=Math.PI/2-pt*At/a,Me=Math.cos(ie),$e=Math.sin(ie),Z=de;for(let We=0;We<=At;We++){let dt=Math.cos(Z),lt=Math.sin(Z);Y.x=Me*lt,Y.y=$e,Y.z=Me*dt,ot.copy(ct).addScaledVector(Y,s),l.push(ot.x,ot.y,ot.z),c.push(Y.x,Y.y,Y.z),u.push(0,0),he.push(h++),Z+=Math.PI*2/At/i}rt.push(he)}Ke.reverse(),rt.push(Ke);let Dt=rt.length-1;for(let At=0;At<Dt;At++){let he=rt[At],ie=rt[At+1],Me=he.length-1;o.push(ie[1],he[0],ie[0]);for(let $e=1;$e<=Me;$e++)o.push(he[$e],he[$e-1],ie[$e]),o.push(ie[$e+1],he[$e],ie[$e])}}}}}this.setIndex(o),this.setAttribute("position",new yt(l,3)),this.setAttribute("normal",new yt(c,3)),this.setAttribute("uv",new yt(u,2));function $(Y,X,ne,F,K){let re=-F/2,oe=(Math.PI-F)/2,ce=X.clone().normalize().cross(ne);Y.addScaledVector(ne,-s/Math.sin(oe));let de=new j,se=new j,xe=1,fe=h,ye=[];for(let _e=0;_e<=a;_e++){let Te=re+_e/a*F;se.set(0,0,0),se.addScaledVector(ce,Math.sin(Te)),se.addScaledVector(ne,Math.cos(Te));for(let Ce=0;Ce<=xe;Ce++){let Le=Ce/xe-.5;if(de.copy(Y),de.addScaledVector(X,Le),de.addScaledVector(se,s),K!=null){let Ke=Math.max(0,de.y-K);de.addScaledVector(X,-Ke/X.y)}l.push(de.x,de.y,de.z),c.push(se.x,se.y,se.z),u.push(0,0),Ce===0&&ye.push(h),h++}}for(let _e=0;_e<a;_e++)for(let Te=0;Te<xe;Te++){let Ce=fe+Te+(xe+1)*_e,Le=Ce+(xe+1),Ke=Le+1,Xe=Ce+1;o.push(Ce,Le,Xe),o.push(Le,Ke,Xe)}return[Y.clone().addScaledVector(X,.5),ye]}function q(Y,X,ne,F){let K=Math.PI/2,re=D.angle()-K,oe=[],ce=new j,de=new j;for(let xe=0;xe<=a;xe++){let fe=[],ye=xe/a;for(let _e=0;_e<=xe;_e++){let Te=((xe?_e/xe:0)-.5)*b,Ce=Math.cos(Te),Le=Math.sin(Te),Ke=Math.atan(Math.tan(re)*Ce),Xe=(K+Ke)*ye,pt=Math.cos(Xe),ct=Math.sin(Xe);ce.set(0,0,0),ce.addScaledVector(X,ct*Ce),ce.addScaledVector(ne,pt),ce.addScaledVector(F,ct*Le),de.copy(Y).addScaledVector(ce,s),l.push(de.x,de.y,de.z),c.push(ce.x,ce.y,ce.z),u.push(0,0),fe.push(h++)}oe.push(fe)}let se=oe.length-1;for(let xe=0;xe<se;xe++){let fe=oe[xe],ye=oe[xe+1],_e=fe.length-1;o.push(fe[0],ye[1],ye[0]);for(let Te=1;Te<=_e;Te++)o.push(fe[Te-1],fe[Te],ye[Te]),o.push(fe[Te],ye[Te+1],ye[Te])}}}},nz=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),r=Object.assign((t==null?void 0:t.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof gn?e.shape:new gn,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)}),ui:r}}static build(e){let t=e.shape,{width:i,height:r,cornerRadius:n,cornerType:s,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,c={x:i*.5,y:r*.5},u={x:-c.x,y:-c.y},h={x:c.x,y:c.y};function f(A,M,C){return M>i&&C>r?Math.min(A*i/M,A*r/C):M>i?A*i/M:C>r?A*r/C:A}let m=[];m[0]=n[0]===0?0:f(n[0],n[0]+n[3],n[0]+n[1]),m[1]=n[1]===0?0:f(n[1],n[1]+n[2],n[1]+n[0]),m[2]=n[2]===0?0:f(n[2],n[2]+n[1],n[2]+n[3]),m[3]=n[3]===0?0:f(n[3],n[3]+n[0],n[3]+n[2]);let g=u.x,v=h.x,x=h.y,b=u.y;t.addPoint(t.createPoint(g,x)),t.addPoint(t.createPoint(v,x)),t.addPoint(t.createPoint(v,b)),t.addPoint(t.createPoint(g,b)),t.isClosed=!0;let S=!0;for(let A=0,M=t.points.length;A<M;A++)t.points[A].roundness=m[A],A>0&&m[A]!==m[A-1]&&(S=!1);S&&(t.roundness=m[0]),t.useCubicForRoundedCorners=s!==1,t.update();let _=Ym.create({shape:t,parameters:{depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(_,{userData:{...e,type:"RectangleGeometry"}})}},oqe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return i.thetaLength=wt.clamp(i.thetaLength,0,180),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t=100,height:i=t,depth:r=t,widthSegments:n=64,heightSegments:s=64,phiStart:a,phiLength:o,thetaStart:l,thetaLength:c}=e.parameters,u;return c===0?(u=new Rt,u.setAttribute("position",new yt([],3))):u=new $0(.5*t,n,s,a,o,l,c*wt.DEG2RAD),u.scale(1,i/t,r/t),Object.assign(u,{userData:{...e,type:"SphereGeometry"}})}},lqe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:0})}}static build(e){let{width:t=100,height:i=t,widthSegments:r=8,heightSegments:n=8}=e.parameters,s=new Au(t,i,r,n);return s.scale(1,1,1),Object.assign(s,{userData:{...e,type:"PlaneGeometry"}})}},cqe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,angle:n,cornerRadius:s,cornerSegments:a}=e.parameters,o=new uqe(t,i,r,n,s,a);return Object.assign(o,{userData:{...e,type:"BackdropGeometry"}})}},uqe=class extends Rt{constructor(e=1,t=1,i=1,r=90,n=10,s=24){super(),this.type="BackdropGeometry";let a=[],o=[],l=[],c=.001;n==0&&(s=1),s=Math.max(1,Math.floor(s)),n=Math.min(n,100),r=Math.min(180-c,r),r*=Math.PI/180;let u=[],h=Math.PI/2,f=(xe=0,fe=0,ye=0)=>new j(xe,fe,ye),m=f(),g=f(),[v,x,b]=[t/2,e/2,i/2],S=-x,_=+x,[A,M,C]=[f(S,-v,+b),f(S,-v,-b),f(S,+v,-b)],D=(xe,fe=!1)=>Math.sin(xe-Math.PI/(1+ +fe)),T=(xe,fe=!1)=>Math.cos(xe-Math.PI/(1+ +fe));C.y=Math.sin(r)*t-v;let R=Math.cos(r)*t-b,O=A.z-c;r<=h?(C.z=Math.min(R,O),C.z==O&&(C.y-=(R-O)/Math.tan(h-r))):M.z=Math.min(M.z-R-b,A.z-c),m.subVectors(A,M),g.subVectors(C,M);let L=Math.min(m.length(),g.length())*n/100,k=L*Math.tan(r/2),B=L/Math.cos(r/2),V=m.clone().normalize().add(g.normalize()).setLength(B).add(M);m.set(0,D(r,!0),T(r,!0)),u.push([C,m.clone()]);let $=(Math.PI-r)/s;for(let xe=0;xe<=s;xe++){let fe=h+r+xe*$;m.set(0,Math.sin(fe)*k,Math.cos(fe)*k),m.add(V),g.set(0,D(fe),T(fe)),u.push([m.clone(),g.clone()])}u.push([A,f(0,1,0)]);let q=Math.sin($/2)*k*2,Y=u.length-1,X=u[0][0].distanceTo(u[1][0]),ne=u[Y-1][0].distanceTo(u[Y][0]),F=X+q*s+ne;u[0].push(1);for(let xe=0;xe<=s;xe++)u[xe+1].push(1-(X+xe*q)/F);u[Y].push(0);let[K,re,oe]=u[0],ce,de,se;for(let xe=1;xe<u.length;xe++)[ce,de,se]=u[xe],a.push(S,K.y,K.z,S,ce.y,ce.z,_,K.y,K.z,_,K.y,K.z,S,ce.y,ce.z,_,ce.y,ce.z),o.push(0,re.y,re.z,0,de.y,de.z,0,re.y,re.z,0,re.y,re.z,0,de.y,de.z,0,de.y,de.z),l.push(0,oe,0,se,1,oe,1,oe,0,se,1,se),[K,re,oe]=[ce,de,se];this.setAttribute("position",new yt(a,3)),this.setAttribute("normal",new yt(o,3)),this.setAttribute("uv",new yt(l,2))}},cne=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof gn?e.shape:new gn,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,innerRadiusPercent:r,spikes:n,cornerRadius:s,angle:a,depth:o,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,u=e.shape,h=t*.5,f=i*.5,m=0,g=0,v=a*Math.PI/360/n,x=Math.PI/2*3*-1,b=h*r/100,S=f*r/100;if(n===3&&r===50){v=2*Math.PI/n;for(let A=0;A<n;A++){let M=v*A,C=m+Math.sin(M)*h,D=g+Math.cos(M)*f;u.addPoint(u.createPoint(C,D))}}else for(let A=0;A<n;A++){let M=m+Math.cos(x)*h,C=g+Math.sin(x)*f;u.addPoint(u.createPoint(M,C)),x+=v,M=m+Math.cos(x)*b,C=g+Math.sin(x)*S,u.addPoint(u.createPoint(M,C)),x+=v}u.isClosed=!0;for(let A=0,M=u.points.length;A<M;A++)u.points[A].roundness=s;u.roundness=s,u.update();let _=Ym.create({shape:u,parameters:{roundness:s,depth:o,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(_,{userData:{...e,type:"StarGeometry"}})}},hqe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i}=e.parameters,r=new Au(t,i);return Object.assign(r,{userData:{...e,type:"TextFrameGeometry"}})}},dqe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),r=Math.abs(i.width),n=Math.abs(i.height??i.width);i.shapeBlendNode&&(n=r);let s=Math.round(Math.abs(i.depth??i.width*.25));return{parameters:Object.assign(i,{width:r,height:n,depth:s})}}static build(e){let{width:t,height:i,depth:r,radialSegments:n,tubularSegments:s,arc:a,cornerRadius:o,cornerSegments:l}=e.parameters,c=fqe(t,i,r,t*.5,a,s,0,0,n,o,l);return c.scale(1,i/t,1),Object.assign(c,{userData:{...e,type:"TorusGeometry"}})}};function fqe(e,t,i,r,n,s,a,o,l,c,u){[t,i]=[i,t],a=t/2;let h=wt.clamp(n/360,0,1);if(h===0){let f=new Rt;return f.setAttribute("position",new yt([],3)),f}return h===1&&(c=0),new ane(!0,e,t,i,r,h,s,a,o,l,c,u)}var pqe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width),tube:i.tube??i.width*.125})}}static build(e){let{width:t,tube:i,tubularSegments:r,radialSegments:n,p:s,q:a}=e.parameters,o=t*.5;o!==i&&(o-=i);let l=new aie(o,i,r,n,s,a);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},mqe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof gn?e.shape:new gn,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width*(i.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t=100,height:i,cornerRadius:r,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a,isRect:o}=e.parameters,l=e.shape,c=t*.5,u=i*.5;o?(l.addPoint(l.createPoint(-c,u)),l.addPoint(l.createPoint(c,-u)),l.addPoint(l.createPoint(-c,-u))):(l.addPoint(l.createPoint(0,u)),l.addPoint(l.createPoint(c,-u)),l.addPoint(l.createPoint(-c,-u))),l.isClosed=!0;for(let f=0,m=l.points.length;f<m;f++)l.points[f].roundness=r;l.roundness=r,l.update();let h=Ym.create({shape:l,parameters:{roundness:r,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a}});return Object.assign(h,{userData:{...e,type:"TriangleGeometry"}})}};function gqe(e,t){let i=2*Math.PI;return(e%i+i)%i===(t%i+i)%i}function vqe(e){return/^(rgba)?\(\s*(\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase())}function yqe(e,t,i){let r,n,s,a=Math.floor(e*6),o=e*6-a,l=i*(1-t),c=i*(1-o*t),u=i*(1-(1-o)*t);switch(a%6){case 0:r=i,n=u,s=l;break;case 1:r=c,n=i,s=l;break;case 2:r=l,n=i,s=u;break;case 3:r=l,n=c,s=i;break;case 4:r=u,n=l,s=i;break;case 5:default:r=i,n=l,s=c;break}return{r:r*255,g:n*255,b:s*255}}function xqe(e,t,i){e/=255,t/=255,i/=255;let r=Math.max(e,t,i),n=Math.min(e,t,i),s=r,a=r-n,o=r==0?0:a/r,l;if(r==n)l=0;else{switch(r){case e:l=(t-i)/a+(t<i?6:0);break;case t:l=(i-e)/a+2;break;case i:default:l=(e-t)/a+4;break}l/=6}return{h:l,s:o,v:s}}function bqe(e){return e=Math.floor(e),{r:e>>16&255,g:e>>8&255,b:e&255}}function wqe(e,t,i){return(e<<16)+(t<<8)+i}function Sqe(e,t,i){return e=Math.round(e),t=Math.round(t),i=Math.round(i),"#"+[e,t,i].map(r=>r.toString(16).padStart(2,"0")).join("").toUpperCase()}function _qe(e){let t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(r,n,s,a)=>String(n+n+s+s+a+a));let i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}var Eqe={parseRgba:vqe,hsvToRgb:yqe,rgbToHsv:xqe,hexToRgb:bqe,rgbToHex:wqe,rgbToHexString:Sqe,hexStringToRgb:_qe},Aqe=class{add(e,t,i){if(typeof arguments[0]!="string")for(let r in arguments[0])this.add(r,arguments[0][r],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(r){this[r]=this[r]||[],t&&this[r][i?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(i){i.call(t&&t.context?t.context:t,t)})}},Tqe=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(t=>{if(typeof t!="object"||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)})}},Ge=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+Ge.version}static addUnaryOp(e){return Ge.max_unop_len=Math.max(e.length,Ge.max_unop_len),Ge.unary_ops[e]=1,Ge}static addBinaryOp(e,t,i){return Ge.max_binop_len=Math.max(e.length,Ge.max_binop_len),Ge.binary_ops[e]=t,i?Ge.right_associative.add(e):Ge.right_associative.delete(e),Ge}static addIdentifierChar(e){return Ge.additional_identifier_chars.add(e),Ge}static addLiteral(e,t){return Ge.literals[e]=t,Ge}static removeUnaryOp(e){return delete Ge.unary_ops[e],e.length===Ge.max_unop_len&&(Ge.max_unop_len=Ge.getMaxKeyLen(Ge.unary_ops)),Ge}static removeAllUnaryOps(){return Ge.unary_ops={},Ge.max_unop_len=0,Ge}static removeIdentifierChar(e){return Ge.additional_identifier_chars.delete(e),Ge}static removeBinaryOp(e){return delete Ge.binary_ops[e],e.length===Ge.max_binop_len&&(Ge.max_binop_len=Ge.getMaxKeyLen(Ge.binary_ops)),Ge.right_associative.delete(e),Ge}static removeAllBinaryOps(){return Ge.binary_ops={},Ge.max_binop_len=0,Ge}static removeLiteral(e){return delete Ge.literals[e],Ge}static removeAllLiterals(){return Ge.literals={},Ge}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new Ge(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(t=>t.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return Ge.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!Ge.binary_ops[String.fromCharCode(e)]||Ge.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return Ge.isIdentifierStart(e)||Ge.isDecimalDigit(e)}throwError(e){let t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(Ge.hooks[e]){let i={context:this,node:t};return Ge.hooks.run(e,i),i.node}return t}searchHook(e){if(Ge.hooks[e]){let t={context:this};return Ge.hooks[e].find(function(i){return i.call(t.context,t),t.node}),t.node}}gobbleSpaces(){let e=this.code;for(;e===Ge.SPACE_CODE||e===Ge.TAB_CODE||e===Ge.LF_CODE||e===Ge.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let e=this.gobbleExpressions(),t=e.length===1?e[0]:{type:Ge.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t=[],i,r;for(;this.index<this.expr.length;)if(i=this.code,i===Ge.SEMCOL_CODE||i===Ge.COMMA_CODE)this.index++;else if(r=this.gobbleExpression())t.push(r);else if(this.index<this.expr.length){if(i===e)break;this.throwError('Unexpected "'+this.char+'"')}return t}gobbleExpression(){let e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,Ge.max_binop_len),t=e.length;for(;t>0;){if(Ge.binary_ops.hasOwnProperty(e)&&(!Ge.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!Ge.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,i,r,n,s,a,o,l;if(s=this.gobbleToken(),!s||(t=this.gobbleBinaryOp(),!t))return s;for(n={value:t,prec:Ge.binaryPrecedence(t),right_a:Ge.right_associative.has(t)},a=this.gobbleToken(),a||this.throwError("Expected expression after "+t),r=[s,n,a];t=this.gobbleBinaryOp();){if(i=Ge.binaryPrecedence(t),i===0){this.index-=t.length;break}n={value:t,prec:i,right_a:Ge.right_associative.has(t)},l=t;let c=u=>n.right_a&&u.right_a?i>u.prec:i<=u.prec;for(;r.length>2&&c(r[r.length-2]);)a=r.pop(),t=r.pop().value,s=r.pop(),e={type:Ge.BINARY_EXP,operator:t,left:s,right:a},r.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+l),r.push(n,e)}for(o=r.length-1,e=r[o];o>1;)e={type:Ge.BINARY_EXP,operator:r[o-1].value,left:r[o-2],right:e},o-=2;return e}gobbleToken(){let e,t,i,r;if(this.gobbleSpaces(),r=this.searchHook("gobble-token"),r)return this.runHook("after-token",r);if(e=this.code,Ge.isDecimalDigit(e)||e===Ge.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===Ge.SQUOTE_CODE||e===Ge.DQUOTE_CODE)r=this.gobbleStringLiteral();else if(e===Ge.OBRACK_CODE)r=this.gobbleArray();else{for(t=this.expr.substr(this.index,Ge.max_unop_len),i=t.length;i>0;){if(Ge.unary_ops.hasOwnProperty(t)&&(!Ge.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!Ge.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=i;let n=this.gobbleToken();return n||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:Ge.UNARY_EXP,operator:t,argument:n,prefix:!0})}t=t.substr(0,--i)}Ge.isIdentifierStart(e)?(r=this.gobbleIdentifier(),Ge.literals.hasOwnProperty(r.name)?r={type:Ge.LITERAL,value:Ge.literals[r.name],raw:r.name}:r.name===Ge.this_str&&(r={type:Ge.THIS_EXP})):e===Ge.OPAREN_CODE&&(r=this.gobbleGroup())}return r?(r=this.gobbleTokenProperty(r),this.runHook("after-token",r)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===Ge.PERIOD_CODE||t===Ge.OBRACK_CODE||t===Ge.OPAREN_CODE||t===Ge.QUMARK_CODE;){let i;if(t===Ge.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==Ge.PERIOD_CODE)break;i=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===Ge.OBRACK_CODE?(e={type:Ge.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},this.gobbleSpaces(),t=this.code,t!==Ge.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===Ge.OPAREN_CODE?e={type:Ge.CALL_EXP,arguments:this.gobbleArguments(Ge.CPAREN_CODE),callee:e}:(t===Ge.PERIOD_CODE||i)&&(i&&this.index--,this.gobbleSpaces(),e={type:Ge.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),i&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e="",t,i;for(;Ge.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===Ge.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);Ge.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(t=this.char,t==="e"||t==="E"){for(e+=this.expr.charAt(this.index++),t=this.char,(t==="+"||t==="-")&&(e+=this.expr.charAt(this.index++));Ge.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);Ge.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return i=this.code,Ge.isIdentifierStart(i)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(i===Ge.PERIOD_CODE||e.length===1&&e.charCodeAt(0)===Ge.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:Ge.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="",t=this.index,i=this.expr.charAt(this.index++),r=!1;for(;this.index<this.expr.length;){let n=this.expr.charAt(this.index++);if(n===i){r=!0;break}else if(n==="\\")switch(n=this.expr.charAt(this.index++),n){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=n}else e+=n}return r||this.throwError('Unclosed quote after "'+e+'"'),{type:Ge.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(Ge.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,Ge.isIdentifierPart(e));)this.index++;return{type:Ge.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){let t=[],i=!1,r=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let n=this.code;if(n===e){i=!0,this.index++,e===Ge.CPAREN_CODE&&r&&r>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}else if(n===Ge.COMMA_CODE){if(this.index++,r++,r!==t.length){if(e===Ge.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===Ge.CBRACK_CODE)for(let s=t.length;s<r;s++)t.push(null)}}else if(t.length!==r&&r!==0)this.throwError("Expected comma");else{let s=this.gobbleExpression();(!s||s.type===Ge.COMPOUND)&&this.throwError("Expected comma"),t.push(s)}}return i||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(Ge.CPAREN_CODE);if(this.code===Ge.CPAREN_CODE)return this.index++,e.length===1?e[0]:e.length?{type:Ge.SEQUENCE_EXP,expressions:e}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:Ge.ARRAY_EXP,elements:this.gobbleArguments(Ge.CBRACK_CODE)}}},Cqe=new Aqe;Object.assign(Ge,{hooks:Cqe,plugins:new Tqe(Ge),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});Ge.max_unop_len=Ge.getMaxKeyLen(Ge.unary_ops);Ge.max_binop_len=Ge.getMaxKeyLen(Ge.binary_ops);var Nv=e=>new Ge(e).parse(),Mqe=Object.getOwnPropertyNames(Ge);Mqe.forEach(e=>{Nv[e]===void 0&&e!=="prototype"&&(Nv[e]=Ge[e])});Nv.Jsep=Ge;var Pqe="ConditionalExpression",Dqe={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let i=t.node,r=this.gobbleExpression();if(r||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let n=this.gobbleExpression();if(n||this.throwError("Expected expression"),t.node={type:Pqe,test:i,consequent:r,alternate:n},i.operator&&e.binary_ops[i.operator]<=.9){let s=i;for(;s.right.operator&&e.binary_ops[s.right.operator]<=.9;)s=s.right;t.node.test=s.right,s.right=t.node,t.node=i}}else this.throwError("Expected :")}})}};Nv.plugins.register(Dqe);function Q3(e){return{all:e=e||new Map,on:function(t,i){var r=e.get(t);r?r.push(i):e.set(t,[i])},off:function(t,i){var r=e.get(t);r&&(i?r.splice(r.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var r=e.get(t);r&&r.slice().map(function(n){n(i)}),(r=e.get("*"))&&r.slice().map(function(n){n(t,i)})}}}var une=class{constructor(e,t,i){var r;this.id=e,this.userAPI=t,this.result=void 0,this.error="null",this.isPrefetched=!1,this.isLoading=!1,this.isLoaded=!1,this.prefetchPromise=new Promise(n=>n()),this.emitter=Q3(),this._innerCallUserAPI=async n=>{var s,a,o;this.emitter.emit("start",{userAPIId:this.id}),this.isLoading=!0,this.isLoading=!1;try{this.result=await kqe(this.userAPI,n),this.error="null",this.emitter.emit("success",{userAPIId:this.id})}catch(l){let c=((o=(a=(s=l.message)==null?void 0:s.split("_:_"))==null?void 0:a[0])==null?void 0:o.replace("status:",""))??"null";this.error=c,this.result=null,this.emitter.emit("error",{userAPIId:this.id})}this.isLoading=!1,this.isPrefetched=!0,this.isLoaded=!0},((r=t==null?void 0:t.integration)==null?void 0:r.type)==="OpenAI"?this.result={content:""}:t.method==="GET"&&t.url!==""&&(this.prefetchPromise=this.prefetch(i)),this._debouncedCallUserAPI=this._innerCallUserAPI,this._updateDebouncedCallUserAPI(),this._debouncedPrefetch=Nb(this.prefetch,1e3,{trailing:!0})}_updateDebouncedCallUserAPI(){this._debouncedCallUserAPI=this.userAPI.debounce!==void 0&&this.userAPI.debounce>0?Nb(this._innerCallUserAPI,this.userAPI.debounce,{leading:!0,trailing:!0}):this._innerCallUserAPI}async prefetch(e){await this.callUserAPI(e)}async callUserAPI(e){await this._debouncedCallUserAPI(e)}update(e,t,i=!0){this.userAPI=e,this._updateDebouncedCallUserAPI(),this.userAPI.url!==""&&this.userAPI.method==="GET"&&i&&this._debouncedPrefetch(t)}retrieveValue(e){if(this.result)try{return os.zoom(this.result,e)}catch(t){console.error(t)}}retrieveZoomedKeyValues(e){if(this.result){let t=e&&e.length?os.zoom(this.result,e):this.result;if(Lqe(t))return Object.entries(t);if(Oqe(t))return t.map((i,r)=>[r.toString(),i]);throw Rqe(t)?new Error("This path points to a value, use retrieveValue() instead. "+(e==null?void 0:e.join("."))):new Error("Path error"+(e==null?void 0:e.join(".")))}}dispose(){}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}get autostart(){return this.userAPI.autoStart}};function Iqe(e){let t=new Headers;return e.headers.forEach(i=>{i.data.key!==""&&t.append(i.data.key,i.data.value)}),t}function Rqe(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null}function Oqe(e){return Array.isArray(e)}function Lqe(e){return typeof e=="object"&&e!==null}async function kqe(e,t,i=new AbortController){var l,c,u,h;let r,n=e.url,s=((l=e.proxy)==null?void 0:l.enabled)??!1,a;if(((c=e.integration)==null?void 0:c.type)==="OpenAI"){let f=vx(e.integration.prompt===""?[]:JSON.parse(e.integration.prompt),t),m=e.integration.behavior===""?[]:vx(JSON.parse(e.integration.behavior),t);a=`{
		"model": "${e.integration.model}",
		"messages": [${e.integration.useBehavior?`
		{
			"role": "system",
			"content": "${m}"
		},`:""}
		{
			"role": "user",
			"content": "${f}"
		}
		]
	}`}if(s){n=`https://apis.spline.design/file/${e.proxy.fileId}/external-api/request?uuidexternalapi=${e.proxy.proxyId}`;let f;a!==void 0?f=a:e.method==="POST"&&e.body&&(f=vx(JSON.parse(e.body),t)),f!==void 0&&(n+=`&data=${encodeURIComponent(f.replace(/(\r\n|\n|\r|\t)/gm,""))}`)}else((u=e.integration)==null?void 0:u.type)==="OpenAI"?r=a:e.method==="POST"&&e.body&&(r=vx(JSON.parse(e.body),t));let o=await fetch(n,{method:s?"GET":e.method,headers:s?void 0:Iqe(e),signal:i.signal,body:r});if(!o.ok)throw new Error("status:"+o.status+"_:_"+o.statusText);if(((h=e.integration)==null?void 0:h.type)==="OpenAI"){let f=await o.json();return s&&(f=f.response),{content:f.choices[0].message.content}}else{let f=await o.json();return s&&(f=f.response),f}}var hne=(e,t)=>{if(typeof e=="string"){let i=t.getVariable(e);if(i)return hne(i,t)}return ta.isBoolean(e)?ta.getDisplayedValue(e).toLowerCase():ta.getDisplayedValue(e)},vx=(e,t)=>e.map((i,r)=>{if("text"in i)return i.text;if("type"in i){if(i.type==="paragraph")return(r>0?`
`:"")+vx(i.children,t);if(i.type==="variable"){let n=t.getVariable(i.variableId);if(n!==void 0)return hne(n,t)}}return""}).join(""),zqe=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],Bqe=["0","1","2","3","4","5","6","7","8","9","."],jqe=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function Nqe(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}Nv.addBinaryOp("^",11,!0);function dne(e,t,i="number"){let r="";for(let a=0;a<e.length;a++){let o=e[a];if("objType"in o&&o.objType==="api"){let l=JSON.parse(o.id),c=l[0],u=t.getUserAPI(c);if(u!==void 0&&u instanceof une){let h=u.retrieveValue(l.slice(1));h!==void 0&&(r+=h)}continue}if("objType"in o&&o.objType==="webhook"){let l=JSON.parse(o.id),[c,u]=l,h=t.getUserWebhook(c);if(h!==void 0){let f=h.getParameterValue(u);f!==void 0&&(r+=f)}continue}if("objType"in o&&o.objType==="aiAssistant"){let l=t.openAIRealtime;if("objId"in o&&o.objId!==void 0){let c;if(t.scene.data.objects.traverse((u,h)=>{var m;let f=(m=h.events)==null?void 0:m.find(g=>g.id===o.objId);f&&(c=f)}),c!==void 0&&c.data.type==="AIAssistantListener"){let u=l==null?void 0:l.computeAnalysisForListenerEvent(c.data);if(u!==void 0){r+=u;continue}}}r+=(l==null?void 0:l.voice)??0;continue}if("id"in o){let l=e[a-1];if(a>0&&"id"in l){console.error("Two variables in a row",e);return}let c=t.getVariable(o.id),u=ta.getDisplayedValue(c);i==="number"&&ta.isTextValue(c)&&Array.isArray(c.textValue)&&c.textValue.length===1?u=parseFloat(u).toString():i==="boolean"&&ta.isBoolean(c)?u=c?"true":"false":i==="boolean"&&ta.isTextValue(c)&&!Array.isArray(c.textValue)&&(u='"'+u+'"'),r+=u;continue}else if(i==="string"){o.name!=='"'&&(o.name!=="+"||o.escaped)&&(r+=o.name),o.name==="+"&&!o.escaped&&r[r.length-1]==="\\"&&(r=r.slice(0,-1)+o.name);continue}if(o.name==="and"){r+="&&";continue}if(o.name==="or"){r+="||";continue}if(o.name==="True"){r+="true";continue}if(o.name==="False"){r+="false";continue}if(i==="boolean"&&!Nqe(o.name)&&!Bqe.includes(o.name)&&!zqe.includes(o.name)&&!jqe.includes(o.name.replace(/\($/g,""))){r+='"'+o.name+'"';continue}r+=o.name}if(i==="string")return r;if(e.length===0){if(i==="number")return 0;if(i==="boolean")return!1}let n;try{n=Nv(r)}catch(a){console.error(r,a);return}let s;try{s=Yi(n)}catch(a){console.error(r,n,a)}return s}function Yi(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return+(Yi(e.left)===Yi(e.right));case"!=":return+(Yi(e.left)!==Yi(e.right));case">":return+(Yi(e.left)>Yi(e.right));case">=":return+(Yi(e.left)>=Yi(e.right));case"<":return+(Yi(e.left)<Yi(e.right));case"<=":return+(Yi(e.left)<=Yi(e.right));case"+":return Yi(e.left)+Yi(e.right);case"-":return Yi(e.left)-Yi(e.right);case"*":return Yi(e.left)*Yi(e.right);case"/":return Yi(e.left)/Yi(e.right);case"%":return Yi(e.left)%Yi(e.right);case"&&":return Yi(e.left)&&Yi(e.right);case"||":return Yi(e.left)||Yi(e.right);case"^":return Math.pow(Yi(e.left),Yi(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-Yi(e.argument);case"!":return+!Yi(e.argument);default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if(e.callee.type==="Identifier"){if(e.callee.name==="random"){let t=0,i=1;if(e.arguments.length>=1)try{t=Yi(e.arguments[0])}catch(r){console.warn(r)}if(e.arguments.length>=2)try{i=Yi(e.arguments[1])}catch(r){console.warn(r)}return t=Math.min(i,t),i=Math.max(i,t),t+Math.random()*(i-t)}return Math[e.callee.name].apply(null,e.arguments.map(Yi))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}var Vqe=new tt,Uqe=new tt;function Fqe(e,t,i){let r=[new j,new j,new j],n=[new j,new j,new j];return e.extractBasis(r[0],r[1],r[2]),t.extractBasis(n[0],n[1],n[2]),r.forEach((s,a)=>{let o=n[a],l=wt.lerp(s.length(),o.length(),i);s.lerp(o,i).setLength(l)}),new tt().makeBasis(r[0],r[1],r[2])}var Hqe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),r=Math.abs(i.width),n=Math.abs(i.height??i.width),s=Math.abs(i.depth??0),a=(t==null?void 0:t.shapeData)??rz.create({parameters:Ore}).userData.shape;return{path:e.path??pT.defaultData(),parameters:Object.assign(i,{width:r,height:n,depth:s,extrusion:{...Lre,...i.extrusion}}),shapeData:a}}static build(e){if(e.path.points.length>=2){let t=new Gqe(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new Rt,{userData:{...e,type:"PathGeometry"}})}},Gqe=class extends Rt{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!gqe(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:i,offset:r}=this.inputs.parameters.extrusion;i=Math.max(0,Math.min(i,1)),r=Math.max(0,Math.min(r,1));let n=this.inputs.path.isClosed?e.length:e.length-1,s=Math.floor(r*n),a=this.inputs.path.isClosed?Math.ceil((i+r)*n):Math.ceil(Math.min(1,i+r)*n),o=Math.min(Math.max(2,a-s+1),n+2),l=[],c=[];for(let Y=0;Y<o;Y++){let X=this.inputs.path.isClosed?(Y+s)%e.length:Math.min(Y+s,e.length-1);l.push(e[X].clone()),c.push(t[X].clone())}let u=(Y,X,ne)=>{l[Y]=l[Y].clone().lerp(l[X],ne),c[Y]=Fqe(c[Y],c[X],ne)},h=0,f=r*n%1;(!this.inputs.path.isClosed||i<=1)&&(f||r===0)&&(h=f,u(0,1,h));let m=0,g=(r+i)*n%1;if((this.inputs.path.isClosed&&i<=1||!this.inputs.path.isClosed&&r+i<1)&&g&&(m=g,u(l.length-1,l.length-2,1-m)),i===0){let Y=l.length-1;l[Y].copy(l[0]),c[Y].copy(c[0])}this._applyPathModifiers(c,h,m);let{bevel:v,bevelSides:x}=this.inputs.parameters.extrusion,b=v>0?this.inputs.parameters.extrusion.capType:"flat",S=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(S=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:_,infos:A,vertices:M}=this._computeShapePoints(S),C=0,D;b==="round"&&(D=new iz(this.inputs.shapeData,2*v,v,S,x,void 0,!0),C=D.getAttribute("position").count);let T=0,R=0;A.sort((Y,X)=>Y.start-X.start),A.forEach(Y=>{Y.verticesStart=T,Y.verticesCount=Y.continuous.reduce((X,ne,F)=>X+(F===0||!ne?2:1),0),R+=Y.verticesCount,T=R});let O=R*o,L,k=0;if(this._isOpenEnded()&&b==="flat"){try{L=uf({windingRule:Sr.ODD,elementType:Un.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:_})}catch{L=Jre}k=L.vertexCount}let B=O+2*k+C*2,V=O+2*k,$={positions:new Float32Array(B*3),normals:new Float32Array(B*3),uvs:new Float32Array(B*2)},q=[];if(A.forEach(Y=>{this._extrudeRegion(Y,M,c,l,$,q,this._isGeometryClosed()&&!this._isOpenEnded())}),L&&(this._closeEnd(L,O,q,$,c[0],l[0],!1),this._closeEnd(L,O+k,q,$,c[c.length-1],l[l.length-1],!0)),D){$.positions.set(D.getAttribute("position").array,V*3),$.normals.set(D.getAttribute("normal").array,V*3),$.uvs.set(D.getAttribute("uv").array,V*2);for(let F=V;F<V+C;F++)$.uvs[F*2+1]=1e-4;let Y=q.length;q.push(...D.getIndex().array.map(F=>F+V)),V+=C,$.positions.set(D.getAttribute("position").array,V*3),$.normals.set(D.getAttribute("normal").array,V*3),$.uvs.set(D.getAttribute("uv").array,V*2);let X=q.length;q.push(...D.getIndex().array.map(F=>F+V)),this.setAttribute("position",new Xt($.positions,3)),this.setAttribute("normal",new Xt($.normals,3)),this.setAttribute("uv",new Xt($.uvs,2)),this.setIndex(q);let ne=Vqe;ne.copy(c[c.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(ne,V,B),ne.copy(c[0]).setPosition(l[0]).multiply(Uqe.makeScale(1,1,-1)),this.applyMatrix4OnRange(ne,V-C,V),this.reverseIndicesOnRange(Y,X)}else this.setAttribute("position",new Xt($.positions,3)),this.setAttribute("normal",new Xt($.normals,3)),this.setAttribute("uv",new Xt($.uvs,2)),this.setIndex(q)}_extractPathPoints(){let e=Hre(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(i=>{t[t.length-1].distanceToSquared(i)>.001&&t.push(i)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],i=e.length,r=this.inputs.path.isClosed,n=new j,s=new j,a=new j,o=new j,l=new j(0,1,0);for(let g=0;g<i;g++){let v=e[g],x;g===0?x=r?e[e.length-2]:v.clone().multiplyScalar(2).sub(e[1]):x=e[g-1];let b;g===i-1?b=r?e[1]:v.clone().multiplyScalar(2).sub(e[g-1]):b=e[g+1];let S=v.clone().sub(x).normalize(),_=b.clone().sub(v).normalize(),A=S.clone().add(_).normalize();a.copy(A),g===0&&(A.equals(l)||A.clone().negate().equals(l))&&l.set(0,0,1);let M=l.clone().cross(A).normalize(),C=A.clone().cross(M).normalize();l.copy(C),o.copy(M),g===0&&(n.copy(C),s.copy(A));let D=new tt().makeBasis(M,C,A);t.push(D)}let c=r?s:a,u=r?n:new j(0,1,0),h=c.clone().cross(o).normalize(),f=Math.acos(u.dot(h));if(isNaN(f))return t;let m=u.clone().cross(h);c.dot(m)>0&&(f*=-1);for(let g=1;g<t.length;g++){let v=new tt().makeRotationZ(f*g/t.length);t[g].multiply(v)}return t}_applyPathModifiers(e,t,i){let r=e.length,{angle:n,twist:s,startScale:a,endScale:o}=this.inputs.parameters.extrusion,l=new tt,c=new tt;return e.forEach((u,h)=>{let f=h===0?0:h===r-1?1:(h-t)/(r-(i===0?0:1)-(t+(1-i)));l.makeRotationZ(wt.lerp(n,n+s,f)*wt.DEG2RAD);let m=wt.lerp(a,o,f);c.makeScale(m,m,m),u.multiply(l).multiply(c)}),e}_computeShapePoints(e=12,t=Sr.ODD){let i=this.inputs.shapeData,r=i.extractShapePointsToFlatArray([],e),n=i.shapeHoles.map(c=>{let u=c.extractShapePointsToFlatArray([],e),h=[];for(let f=u.length-1;f>=1;f-=2){let m=u[f-1],g=u[f-0];h.push(m,g)}return h}),s;try{s=uf({windingRule:t,elementType:Un.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[r]})}catch{s=tz}let a;try{a=uf({windingRule:Sr.ODD,elementType:Un.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...n]})}catch{a=$re}if(!s)throw new Error("error generating geometry");let o=s.elementCount;if(a){s.elementCount+=a.elementCount;for(let c=0;c<a.elements.length;c++){let u=a.elements[c],h=c%2===0?s.vertexCount:0;s.elements.push(u+h)}for(let c=0;c<a.vertexIndices.length;c++){let u=a.vertexIndices[c],h=s.vertexCount;s.vertexIndices.push(u+h)}for(let c=0;c<a.vertices.length;c++){let u=a.vertices[c];s.vertices.push(u)}}for(let c=0,u=s.vertexCount;c<u;c++){let h=c*2;s.vertices[h+0],s.vertices[h+1]}let l=[];for(let c=s.elementCount-1;c>=0;c--){let u=c>=o,h=c*2,f=s.elements[h+0],m=s.elements[h+1],g=f+m,v={start:f,count:m,normals:[],isHole:u,continuous:[],verticesStart:0,verticesCount:0};l.push(v);let x=f,b=g-1,S=f+1,_=i.roundedCurves.length;do{let A=x-f;s.vertices[b*2+0],s.vertices[b*2+1];let M=s.vertices[x*2+0],C=s.vertices[x*2+1],D=s.vertices[S*2+0],T=s.vertices[S*2+1],R=M-D,O=C-T,L=Math.sqrt(R*R+O*O);R/=L,O/=L,v.normals[A*2+0]=-O,v.normals[A*2+1]=R;let k=s.vertexIndices[x];if(Array.isArray(k))v.continuous[A]=!1;else{let[B,V]=i.getCurveIndexFromVertexId(k-1,!0);if(V>0&&V<1)v.continuous[A]=!0;else{let $=V===1?B+1:B-1;$=($+_)%_;let q=V===1?0:1,Y=i.roundedCurves[B].getTangent(V),X=i.roundedCurves[$].getTangent(q);v.continuous[A]=Y.dot(X)>.95}}u&&(v.normals[A*2+0]*=-1,v.normals[A*2+1]*=-1),[b,x,S]=[x,S,S+1],S>=g&&(S-=m)}while(S!==f+1)}return{regions:[r,...n],infos:l,vertices:s.vertices}}_insertVertex(e,t,i,r,n){let s=t*2,a=t*3;e.positions[a+0]=i.x,e.positions[a+1]=i.y,e.positions[a+2]=i.z,e.normals[a+0]=r.x,e.normals[a+1]=r.y,e.normals[a+2]=r.z,e.uvs[s+0]=n.x,e.uvs[s+1]=n.y}_extrudeRegion(e,t,i,r,n,s,a){let o=new j,l=new j,c=new j,u=new j,h=new pe;i.forEach((m,g)=>{let v=r[g],x=e.verticesStart*i.length+e.verticesCount*g;for(let b=0;b<e.count;b++){let S=(e.start+b)*2;if(o.set(t[S+0],t[S+1],0),c.copy(o).applyMatrix4(m).add(v),e.continuous[b])u.set(e.normals[b*2+0],e.normals[b*2+1],0);else{let _=b===0?(e.start+e.count-1)*2:S-2;l.set(t[_+0],t[_+1],0),u.copy(o).sub(l),u.set(-u.y,u.x,0),e.isHole||u.negate()}if(u.applyMatrix4(m).normalize(),h.set(b===0?1:b/e.count,g/(i.length-1)),this._insertVertex(n,x,c,u,h),x++,!e.continuous[b]||b===0){if(b===0)u.set(e.normals[b*2+0],e.normals[b*2+1],0),h.set(0,g/(i.length-1));else{let _=b===e.count-1?e.start*2:S+2;l.set(t[_+0],t[_+1],0),u.copy(l).sub(o),u.set(-u.y,u.x,0),e.isHole||u.negate()}u.applyMatrix4(m).normalize(),this._insertVertex(n,x,c,u,h),x++}}});let f=i.length-1;for(let m=0;m<f;m++){let g=e.verticesStart*i.length+e.verticesCount*m,v=e.verticesStart*i.length+e.verticesCount*(m+1),x=0;for(let b=0;b<e.count;b++){(!e.continuous[b]||b===0)&&x++;let S=b===e.count-1?0:x+1,_=g+x,A=g+S,M=v+S,C=v+x;e.isHole?s.push(_,M,A,_,C,M):s.push(_,A,M,_,M,C),x++}}}_closeEnd(e,t,i,r,n,s,a){let o=e.vertexCount,l=new j(0,0,a?-1:1).applyMatrix4(n),c=new j,u=new pe;for(let f=0;f<o;f++){let m=2*f;c.set(e.vertices[m+0],e.vertices[m+1],0).applyMatrix4(n).add(s),this._insertVertex(r,t+f,c,l,u)}let h=e.elements;for(let f=0;f<e.elementCount;f++){let m=3*f,g=h[m+0]+t,v=h[m+(a?1:2)]+t,x=h[m+(a?2:1)]+t;i.push(g,v,x)}}applyMatrix4OnRange(e,t,i){let r=e.elements,n=new Hn().getNormalMatrix(e).elements,s,a,o,l,c=this.attributes.position,u=this.attributes.normal;if(!c||!u)return;let h=c.array,f=u.array,m=c.itemSize;for(let g=t*m,v=i*m;g<v;g+=m){if(g===t)debugger;s=h[g+0],a=h[g+1],o=h[g+2],l=1/(r[3]*s+r[7]*a+r[11]*o+r[15]),h[g+0]=(r[0]*s+r[4]*a+r[8]*o+r[12])*l,h[g+1]=(r[1]*s+r[5]*a+r[9]*o+r[13])*l,h[g+2]=(r[2]*s+r[6]*a+r[10]*o+r[14])*l,s=f[g+0],a=f[g+1],o=f[g+2],f[g+0]=n[0]*s+n[3]*a+n[6]*o,f[g+1]=n[1]*s+n[4]*a+n[7]*o,f[g+2]=n[2]*s+n[5]*a+n[8]*o}c.needsUpdate=!0,u.needsUpdate=!0}reverseIndicesOnRange(e,t){let i=this.index;if(i){for(let r=e;r<t;r+=3){let n=i.getX(r),s=i.getX(r+1),a=i.getX(r+2);i.setXYZ(r,a,s,n)}i.needsUpdate=!0}}};function fne(){let e=new Rt;return e.setAttribute("position",new Xt(new Float32Array([]),3)),e.setIndex(new Xt(new Uint16Array([]),1)),e}var Wqe=fne().attributes,qqe=12,Xqe=1,EO=class extends Rt{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,Wqe),this.userData={parameters:e,type:"TextGeometry"};let i=t.getFont(e.font);i!=null&&i.isLoaded?(this.font=i,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t==null||t.requestRender()})}async updateFont(e,t){let i=t.getFont(e);i&&(this.font=i,await i.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(t!=null&&t.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:i,height:r,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a,text:o,textTransform:l}=e,c=ta.getDisplayedValue(o),u=l===2?c.toUpperCase():l===3?c.toLowerCase():c,h=Yqe(e,t,u),{shapes:f,charWidths:m,charCoords:g}=t.generateShapes(h,e),v=(typeof i=="number"?i:1)*.5,x=(typeof r=="number"?r:1)*.5,b=f.map(A=>new gn().fromShape(A,!0));this.vectorShapes=b;let S=b.map(A=>Ym.create({shape:A,parameters:{depth:n,extrudeBevelSegments:a,extrudeBevelSize:s,windingRule:n<=0?Sr.NONZERO:Sr.ODD,subdivisions:this.isLowResolution&&n>0?Xqe:qqe}})),_=S.length?rm(S):fne();_.translate(-v,x,0),this.dispose(),this.wrappedText=h,this.charCoords=g,this.charWidths=m,this.deleteAttribute("extrudeNormal"),Object.entries(_.attributes).forEach(([A,M])=>{this.setAttribute(A,M)}),this.setIndex(_.index),this.computeBoundingSphere()}clone(){let e=Tl(new Rt,EO.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,i])=>{this.setAttribute(t,i)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:{textValue:e}})}get text(){return this.userData.parameters.text??""}};function Yqe(e,t,i){let r=[""],n="";for(let s of i)n+=s,s===" "||s===`
`?(r[r.length-1]+=n,n="",s===`
`&&r.push("")):t.getTextWidth(r[r.length-1]+n,e)>e.width&&(r[r.length-1].length&&r.push(""),t.getTextWidth(r[r.length-1]+n,e)>e.width&&(n.length===1?(r[r.length-1]+=n,n=""):(r[r.length-1]+=n.slice(0,-1),n=n[n.length-1],r.push(""))));return r[r.length-1]+=n,r}var pne,mne=new Promise(e=>{pne=e}),AW=!1,k_;function Qqe(){if(AW)return;if(k_)return k_;async function e(){let t="https://unpkg.com/@splinetool/modelling-wasm@1.10.17/build",i=gc(()=>import("./process-BndNkLcD.js"),[]),[r,n]=await Promise.all([i,fetch(`${t}/process.wasm`).then(o=>o.arrayBuffer())]),s=r.default,a=await s({wasmBinary:n});pne(a),AW=!0}return k_=e(),k_}var Kqe=["font"];function Kb(e,t,i,r){var c,u;let n,s,a;e.type==="PathGeometry"?(s=JSON.parse(JSON.stringify(e)),a=[[],["extrusion"]]):(s={...e},a=[[]]);for(let h of a){let f=s;for(let m of h)f=f[m];for(n in f){let m=f[n];MG(m)&&!Kqe.includes(n)&&(f[n]=t.getVariable(m,[r.uuid,"geometry",...h,n]),MG(f[n])&&(f[n]=1))}}let o={parameters:s,type:s.type};if(s.type==="PathGeometry")o.path=s.path;else if(s.type==="VectorGeometry"){let h=gn.createFromState(s.shape,s.width,s.height);o.shape=h}else if(s.type==="NonParametricGeometry"){if(s.data.groups&&((c=s.data.groups)==null||c.forEach(h=>h.materialIndex=Math.max(h.materialIndex??0,0))),o.geometry=new fie().parse(s),o.geometry.groups.length===0){let h=o.geometry;h.addGroup(0,Math.max(((u=h.getIndex())==null?void 0:u.count)??0,h.getAttribute("position").count),0)}}else if(s.type==="SubdivGeometry"){let h=new Va(s,i);return h.data=e,h}else{if(s.type==="TextGeometry")return new EO(s,t);if(s.type==="InputGeometry")return new EO(s,t);if(s.type==="UIGeometry")return nz.create({parameters:{width:s.width,height:s.height,cornerRadius:s.cornerRadius,cornerType:s.cornerType}})}let l;try{l=DW(o)}catch(h){console.error(h)}if(!l){let h=gn.createFromState(fT.defaultData(),100,100);o.shape=h,l=DW(o)}return l}var Zqe=new tt;function AO(e,t,i,r){let n=e.position.array,s=e.normal.array,a=Zqe.makeScale(t,i,r).invert().elements,o,l,c;for(var u=0,h=n.length;u<h;u+=3)n[u]*=t,n[u+1]*=i,n[u+2]*=r,o=s[u],l=s[u+1],c=s[u+2],s[u]=a[0]*o+a[4]*l+a[8]*c,s[u+1]=a[1]*o+a[5]*l+a[9]*c,s[u+2]=a[2]*o+a[6]*l+a[10]*c;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var z_=new Pn,o0=new j,Yt;mne.then(e=>{Yt=e});var TW=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),CW=new Uint32Array([0,1,2,3]),MW=new Uint8Array([4]),Va=class extends Rt{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let i=this.data.scaleBaked,r=vm.div(t,i);this.subdividedGeometry&&AO(this.subdividedGeometry.attributes,...r),this.originalGeometry&&AO(this.originalGeometry.attributes,...r),this.data=e;let n=this.userData.parameters;this.userData.parameters={width:n.width*r[0],height:n.height*r[1],depth:n.depth*r[2]},this.originalGeometry.boundingSphere.center.multiply(o0.fromArray(r));let s=o0.set(n.width,n.height,n.depth).length();this.originalGeometry.boundingSphere.radius=s/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,i;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:i}=Va.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new uc(100,100,100),i=0}this.subdivPointer=i,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let r=this.subdividedGeometry??this.originalGeometry;Object.assign(this,r),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(Va.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new yo,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,i=e.boundingSphere.center;z_.setFromBufferAttribute(t),z_.getCenter(i),e.boundingSphere.radius=i.distanceTo(z_.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),z_.getSize(o0);let r={width:o0.x,height:o0.y,depth:o0.z};return this.userData.parameters=r,r}static build(e,t,i,r){let n,s,a,o=(e==null?void 0:e.phongAngle)??35;i===!1&&(o=-1),t&&(Yt.free_bvh(t),Yt.free_subdivision_surface(t));try{n=Va.allocate(e,r)}catch(l){console.error(l,e),n=Va.allocate({positionWASM:TW,indexWASM:CW,verticesPerFaceWASM:MW},r)}if(Yt.set_destination_refinement_level(n,0),s=Va.buildLevel(n,!0,o),e.subdivisions>0)try{Yt.set_destination_refinement_level(n,e.subdivisions),a=Va.buildLevel(n,!1,o)}catch{try{Yt.set_destination_refinement_level(n,e.subdivisions-1),a=Va.buildLevel(n,!1,o)}catch{a=null}}else a=null;return{subdivPointer:n,originalGeometry:s,subdividedGeometry:a}}static primitiveToQuads(e,t,i){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let r=e.shape!==void 0||e.path!==void 0?t.geometry:Kb(e,i,!1),n;e.type==="TorusGeometry"&&e.arc===Math.PI*2?n=r.getClosedTorusIndicesForBooleanOrSubdiv():n=r.getIndex();let s,a,o,l;({positions:s,triIndices:l}=K3(r.getAttribute("position"),n));let c;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let u=e.radialSegments*e.heightSegments*3*2,h=u+e.radialSegments*3;c=[u,h]}return{indices:a,verticesPerFace:o}=gne(s,l,r,c),{positions:s,indices:a,verticesPerFace:o}}static allocate(e,t){var _;let i,r,n,s=[],a=[];e.positionWASM&&e.positionWASM.length>0?(i=e.positionWASM,r=e.indexWASM,n=e.verticesPerFaceWASM):(i=TW,r=CW,n=MW);let o=i.length,l=r.length,c=n.length,u=i.length+s.length+a.length,h=r.length+n.length,f=u*Float32Array.BYTES_PER_ELEMENT+h*Uint32Array.BYTES_PER_ELEMENT,m=u*Float32Array.BYTES_PER_ELEMENT,g=Yt._malloc(f),v=new Float32Array(Yt.HEAPF32.buffer,g,u),x=new Uint32Array(Yt.HEAPU32.buffer,g+m,h);v.set(i,0),v.set(s,i.length),v.set(a,i.length+s.length),x.set(r,0),x.set(n,r.length);let b;(_=e==null?void 0:e.scaleBaked)!=null&&_.some(A=>A!==1)&&(b=new tt().makeScale(...e.scaleBaked)),t&&(b?b.premultiply(t):b=t);let S=b?Yt.alloc_subdivision_surface2(g,o,g+m,l,g+m+r.length*Uint32Array.BYTES_PER_ELEMENT,c,b.elements):Yt.alloc_subdivision_surface(g,o,g+m,l,g+m+r.length*Uint32Array.BYTES_PER_ELEMENT,c);return Yt._free(g),S}static buildLevel(e,t,i,r,n){let s=n?Yt.get_mesh_data2(e,t?Yt.Level.CONTROL:Yt.Level.REFINED,i,n.elements):Yt.get_mesh_data(e,t?Yt.Level.CONTROL:Yt.Level.REFINED,i),a=8,o=Yt.HEAPU32.subarray(s>>2,(s>>2)+a),l=o.subarray(4,8),c=0,u=Yt.HEAPU32[o[c]>>2],h=Yt.HEAPF32.subarray(u>>2,(u>>2)+l[c]);c++;let f=Yt.HEAPU32[o[c]>>2],m=Yt.HEAPF32.subarray(f>>2,(f>>2)+l[c]);c++;let g=Yt.HEAPU32[o[c]>>2],v=Yt.HEAPU32.subarray(g>>2,(g>>2)+l[c]);c++;let x=Yt.HEAPU32[o[c]>>2],b=Yt.HEAPU32.subarray(x>>2,(x>>2)+l[c]);if(c++,r===void 0){let S=new Rt;if(S.setIndex(new Z0(b,1)),S.setAttribute("position",new yt(h,3)),S.setAttribute("normal",new yt(m,3)),t){S.setAttribute("faceMap",new Z0(v,1));let _=new Float32Array(m.length/3*4).fill(0);S.setAttribute("color",new Xt(_,4))}return Yt.free_mesh_data(s),S.userData.type="SubdivGeometry",S}r.getAttribute("position").copyArray(h),r.getAttribute("normal").copyArray(m),r.attributes.position.needsUpdate=!0,r.attributes.normal.needsUpdate=!0,Yt.free_mesh_data(s)}static freeSubdivPointer(e){Yt.free_bvh(e),Yt.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,i){let r=Yt.get_wireframe_data_for_base_level(e),n=4,s=Yt.HEAPU32.subarray(r>>2,(r>>2)+n),a=s.subarray(2,4),o=0,l=Yt.HEAPU32[s[o]>>2],c=Yt.HEAPF32.subarray(l>>2,(l>>2)+a[o]);o++;let u=Yt.HEAPU32[s[o]>>2],h=Yt.HEAPU32.subarray(u>>2,(u>>2)+a[o]);if(t===void 0){let f=new Rt;f.setAttribute("position",new yt(c,3));let m=new Float32Array(c.length);for(let g=0,v=c.length;g<v;)m[g++]=i.r,m[g++]=i.g,m[g++]=i.b;return f.setAttribute("color",new Xt(m,3)),f.setIndex(new Z0(h,1)),Yt.free_wireframe_data_for_base_level(r),f}t.getAttribute("position").copyArray(c),t.attributes.position.needsUpdate=!0,Yt.free_wireframe_data_for_base_level(r)}static updateCollabMesh(e,t,i){let r=t===0;r||Yt.set_destination_refinement_level(e,t);let n=i?Yt.get_topological_data2(e,r?Yt.Level.CONTROL:Yt.Level.REFINED,i.elements):Yt.get_topological_data(e,r?Yt.Level.CONTROL:Yt.Level.REFINED),s=6,a=Yt.HEAPU32.subarray(n>>2,(n>>2)+s),o=a.subarray(3,6),l=0,c=Yt.HEAPU32[a[l]>>2],u=new Float32Array(Yt.HEAPF32.subarray(c>>2,(c>>2)+o[l]));l++;let h=Yt.HEAPU32[a[l]>>2],f=new Uint32Array(Yt.HEAPU32.subarray(h>>2,(h>>2)+o[l]));l++;let m=Yt.HEAPU32[a[l]>>2],g=new Uint8Array(Yt.HEAPU32.subarray(m>>2,(m>>2)+o[l]));return Yt.free_topological_data(n),{positions:u,indices:f,verticesPerFace:g}}},PW=["getX","getY","getZ"];function K3(e,t){let i={},r=t?t.count:e.count,n=0,s=[],a=[],o=1e4;for(let c=0;c<r;c++){let u=t?t.getX(c):c,h="";for(let f=0;f<3;f++)h+=`${~~(e[PW[f]](u)*o)},`;if(h in i)s.push(i[h]);else{for(let f=0;f<3;f++)a.push(e[PW[f]](u));i[h]=n,s.push(n),n++}}let l=[];for(let c=0;c<s.length;c+=3)s[c]===s[c+1]||s[c]===s[c+2]||s[c+1]===s[c+2]||l.push(s[c],s[c+1],s[c+2]);return{positions:a,triIndices:l}}var B_=new j,U4=new j,F4=new j,H4=new j;function gne(e,t,i,r){let n=[],s=[];if(i.userData.shape!==void 0&&i.userData.parameters.depth===0&&i.userData.shape.shapeHoles.length===0){let l=i.userData.shape.extractShapePointsToFlatArray([]),c=i.userData.parameters.spikes;if(i.userData.type==="EllipseGeometry"&&c<=24&&c%4===0&&i.userData.parameters.angle>=360){let f=l.length/2/c;l=l.filter((m,g)=>Math.floor(g/2)%f===0)}let u=0;for(let f=0;f<l.length;f+=2)u+=(l[f]-l[(f===0?l.length:f)-2])*(l[f+1]+l[(f===0?l.length:f)-1]);e.length=0;let h=0;if(u<0)for(let f=0;f<l.length;f+=2)e.push(l[f],l[f+1],0),n.push(h++);else for(let f=l.length-2;f>=0;f-=2)e.push(l[f],l[f+1],0),n.push(h++);return s.push(h),{indices:n,verticesPerFace:s}}let a=new Float32Array([i.userData.parameters.depth])[0],o=0;for(;o<t.length;){if(i.useNgonForTopBottomFaceDuringBake){let l=0;if((e[t[o]*3+2]===a||e[t[o]*3+2]===0)&&l++,(e[t[o+1]*3+2]===a||e[t[o+1]*3+2]===0)&&l++,(e[t[o+2]*3+2]===a||e[t[o+2]*3+2]===0)&&l++,l===3)break}if(t[o+1]===t[o+3]&&t[o+2]===t[o+5]||t[o+0]===t[o+3]&&t[o+2]===t[o+4]){B_.set(e[t[o]*3],e[t[o]*3+1],e[t[o]*3+2]),U4.set(e[t[o+1]*3],e[t[o+1]*3+1],e[t[o+1]*3+2]),F4.set(e[t[o+4]*3],e[t[o+4]*3+1],e[t[o+4]*3+2]),H4.set(e[t[o+5]*3],e[t[o+5]*3+1],e[t[o+5]*3+2]),U4.sub(B_).normalize(),F4.sub(B_).normalize(),H4.sub(B_).normalize();let l=U4.cross(F4).dot(H4);Math.abs(l)>.005||r&&r.some((c,u)=>u%2===1?!1:o>=r[u]&&o<r[u+1])?(n.push(t[o],t[o+1],t[o+2]),s.push(3),o+=3):(n.push(t[o],t[o+1],t[o+4],t[o+5]),s.push(4),o+=6)}else n.push(t[o],t[o+1],t[o+2]),s.push(3),o+=3}if(i.useNgonForTopBottomFaceDuringBake){let l=[],c=[],u=0;for(let h=0,f=0;h<e.length;h+=3,f++)e[h+2]===0&&(l.push(f),u++),e[h+2]===a&&c.push(f);if(i.userData.parameters.extrudeBevelSize===0){let h=c[0];c[0]=c[1],c[1]=h}l.reverse(),n.push(...l,...c),s.push(u,u)}return{indices:n,verticesPerFace:s}}var wh={};HDe(wh,{calcBoolean:()=>iXe,calcBooleanTopological:()=>tXe,freeMeshSet:()=>aXe,getMeshSet:()=>rXe,hasOpenEdges:()=>nXe,transformMeshSet:()=>sXe});var vne,$qe=new Promise(e=>{vne=e}),j_;function Jqe(){if(j_)return j_;async function e(){let t="https://unpkg.com/@splinetool/boolean-wasm@1.10.17/build",i=gc(()=>import("./boolean-B0Yz-YaS.js"),[]),[r,n]=await Promise.all([i,fetch(`${t}/boolean.wasm`).then(o=>o.arrayBuffer())]),s=r.default,a=await s({wasmBinary:n});vne(a)}return j_=e(),j_}var ki,nv;$qe.then(e=>ki=e);function eXe(e,t,i){let r,n;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?n=e.getClosedTorusIndicesForBooleanOrSubdiv():n=e.getIndex();let{positions:s,triIndices:a}=K3(e.getAttribute("position"),n),o;if(t&&i){let{indices:l,verticesPerFace:c}=gne(s,a,e);o=c.length,r=[];for(let u=0,h=0;u<o;u++){r.push(c[u]);for(let f=0;f<c[u];f++)r.push(l[h++])}}else{let l=a.length;r=Array(l+l/3),o=0;for(let c=0,u=0;u<r.length;)r[u++]=3,o++,r[u++]=a[c++],r[u++]=a[c++],r[u++]=a[c++]}return{positions:s,faceIndices:r,nFaces:o}}function yne(e){let t=e.length,i=t*Uint32Array.BYTES_PER_ELEMENT,r=t*Float32Array.BYTES_PER_ELEMENT,n=Number.isInteger(e[0])?i:r,s=ki._malloc(n);return(Number.isInteger(e[0])?new Uint32Array(ki.HEAPU32.buffer,s,t):new Float32Array(ki.HEAPF32.buffer,s,t)).set(e,0),s}function xne(e){switch(e){case 0:return ki.OP.UNION;case 1:return ki.OP.INTERSECTION;case 2:return ki.OP.A_MINUS_B;default:throw new Error("Unknown boolean operation "+e)}}function tXe(e,t){nv===void 0&&(nv=ki.init_csg());let i=yne(e),r=ki.csg_calc_topological(nv,i,e.length,xne(t));ki._free(i);let n=6,s=ki.HEAPU32.subarray(r>>2,(r>>2)+n),a=s.subarray(3,6),o=0,l=ki.HEAPU32[s[o]>>2],c=new Float32Array(ki.HEAPF32.subarray(l>>2,(l>>2)+a[o]));o++;let u=ki.HEAPU32[s[o]>>2],h=new Uint32Array(ki.HEAPU32.subarray(u>>2,(u>>2)+a[o]));o++;let f=ki.HEAPU32[s[o]>>2],m=new Uint8Array(ki.HEAPU32.subarray(f>>2,(f>>2)+a[o]));return ki.free_mesh_data(r),{positions:c,indices:h,verticesPerFace:m}}function iXe(e,t,i,r){nv===void 0&&(nv=ki.init_csg());let n=yne(e),s=ki.csg_calc(nv,n,e.length,r,xne(t));ki._free(n);let a=5,o=ki.HEAPU32.subarray(s>>2,(s>>2)+a),l=o.subarray(2,5),c=0,u=ki.HEAPU32[o[c]>>2],h=ki.HEAPF32.subarray(u>>2,(u>>2)+l[c]);c++;let f=ki.HEAPU32[o[c]>>2],m=ki.HEAPF32.subarray(f>>2,(f>>2)+l[c]);c++;let g=l[c];i.setAttribute("position",new yt(h,3)),i.setAttribute("normal",new yt(m,3));let v=ki.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return i.boundingSphere===null&&(i.boundingSphere=new yo),i.boundingSphere.center.set(v[0],v[1],v[2]),i.boundingSphere.radius=(v[3]**2+v[4]**2+v[5]**2)**.5,i.userData.parameters={width:v[3]*2,height:v[4]*2,depth:v[5]*2},ki.free_mesh_data(s),g}function rXe(e,t,i){if(ki===void 0)return-1;let r,n,s;if(t&&e.userData.positions!==void 0){let x=e.userData;s=x.verticesPerFace.length,r=x.positions,n=Array(x.verticesPerFace.reduce((b,S)=>b+S,0)+s);for(let b=0,S=0,_=0;b<x.verticesPerFace.length;b++){n[_++]=x.verticesPerFace[b];for(let A=0;A<x.verticesPerFace[b];A++)n[_++]=x.indices[S++]}}else({positions:r,faceIndices:n,nFaces:s}=eXe(e,t,i));let a=r.length,o=n.length,l=r.length,c=n.length,u=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,h=l*Float32Array.BYTES_PER_ELEMENT,f=ki._malloc(u),m=new Float32Array(ki.HEAPF32.buffer,f,l),g=new Uint32Array(ki.HEAPU32.buffer,f+h,c);m.set(r,0),g.set(n,0);let v=ki.get_csg_mesh(f,a,f+h,o,s);return ki._free(f),v}function nXe(e){return ki.has_open_edges(e)}function sXe(e,t){ki.transform_csg_mesh(e,t.elements)}function aXe(e){ki.free_csg_mesh(e)}var oXe={ConeGeometry:cWe,CubeGeometry:uWe,CylinderGeometry:Gre,DodecahedronGeometry:dWe,EllipseGeometry:rz,HelixGeometry:YWe,IcosahedronGeometry:QWe,LatheGeometry:KWe,NonParametricGeometry:rqe,PolygonGeometry:lne,PyramidGeometry:nqe,RectangleGeometry:nz,SphereGeometry:oqe,PlaneGeometry:lqe,BackdropGeometry:cqe,StarGeometry:cne,TextFrameGeometry:hqe,TorusGeometry:dqe,TorusKnotGeometry:pqe,TriangleGeometry:mqe,PathGeometry:Hqe,VectorGeometry:Ym},DW=e=>oXe[e.type].create(e);function l0(e){return e!==null&&"booleanOp"in e}var bne=class extends Zk(kr){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new tt}updateVisible(e){super.updateVisible(e),this.visible=!l0(this.parent)&&this.visible,l0(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(wh.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),l0(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof bne&&(e.freeBooleanPointer(),l0(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let i=super.updateTransformState(e,t);return i&&l0(this.parent)&&this.invalidateDownstreamBooleanData(!0),i}onVariableUpdate(e=!1){super.onVariableUpdate(e),l0(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},N_=new Pn;function sz(e,t=0,i=e.count,r,n){let s=1/0,a=1/0,o=1/0,l=-1/0,c=-1/0,u=-1/0;for(let h=t;h<i;h++){let f=e.getX(h),m=e.getY(h),g=e.getZ(h);f<s&&(s=f),m<a&&(a=m),g<o&&(o=g),f>l&&(l=f),m>c&&(c=m),g>u&&(u=g)}N_.min.set(s,a,o),N_.max.set(l,c,u),N_.getCenter(r),N_.getSize(n).multiplyScalar(.5)}var lXe=new Rt,cXe=new Yh,Ka=class extends bne{constructor(e,t){super(lXe,cXe),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?sz(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},qd=class{constructor(e){if(this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},qd.uuidContext===null)throw new Error("plz startContext");qd.uuidContext===qd.globalContext?this.uuid="_gid"+qd.uuidContext.nodeContextUuid++:this.uuid="_uid"+qd.uuidContext.nodeContextUuid++,this.type=e,this.name=""}static startContext(e){this.uuidContext===null||this.uuidContext===qd.globalContext?this.uuidContext=e:console.error("Can't start context twice")}static endContext(e){this.uuidContext!==e&&console.error("Can't end context twice"),this.uuidContext=null}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,i){return i=i??{},this.analyze(e,i),this.flow(e,t,i)}flow(e,t,i){i=i??{},e.addFlow(i.slot,i.cache,i.context);let r={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),r}build(e,t,i){t=t??this.getType(e,t);let r=e.getNodeData(i??this);return e.analyzing&&this.appendDepsNode(e,r,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,i)}updateFrame(e){}generateReadonly(e,t,i,r,n,s){return""}generate(e,t,i,r,n){return""}parse(e,t,i,r){}appendDepsNode(e,t,i){t.deps=(t.deps||0)+1;let r=e.getTypeLength(i);(r>(t.outputMax||0)||this.getType(e,i))&&(t.outputMax=r,t.output=i)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}},ns=qd;ns.globalContext={nodeContextUuid:0},ns.uuidContext=qd.globalContext;var IW=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},uXe=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,i){i=i!==void 0?i:!0,this.keywords[e]={callback:t,cache:i}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},co=new uXe,Er=class extends ns{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,i,r){if(t=t??this.getType(e),this.getShared(e,t)){let n=this.getUnique(e,t);n&&this.uuid===void 0&&(this.uuid=wt.generateUUID()),i=e.getUUID(i??this.getUUID(),!n);let s=e.getNodeData(i),a=s.output||this.getType(e);if(e.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,s,t),this.generate(e,t,i)):super.build(e,t,i);if(n)return s.name=s.name||super.build(e,t,i),s.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||s.deps===1))return super.build(e,t,i);i=this.getUUID(!1);let o=this.getTemp(e,i);if(o)return e.format(o,a,t);{o=super.generate(e,t,i,s.output,r);let l=this.generate(e,a,i);return e.addNodeCode(o+" = "+l+";"),e.format(o,a,t)}}return super.build(e,t,i)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let i=e.getVars()[t];return i?i.name:void 0}generate(e,t,i,r,n){return this.getShared(e,t)||console.error("TempNode is not shared"),i=i??this.uuid,e.getTempVar(i,r??this.getType(e),n,this.getLabel()).name}},bo=class extends Er{constructor(e,t){t=t??{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,i,r,n,s){i=e.getUUID(i??this.getUUID()),r=r??this.getType(e);let a=e.getNodeData(i);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,i,r,n,s):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(r,this,n,s,this.getLabel())),e.format(a.vertex.name,r,t)):(a.fragment||(a.fragment=e.createFragmentUniform(r,this,n,s,this.getLabel())),e.format(a.fragment.name,r,t))}},Xs=class extends bo{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof pe?e:new pe(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,i,r,n,s){return e.format("vec2("+this.value.x+", "+this.value.y+")",r,t)}},cl=class extends bo{constructor(e=0,t,i){super("v3"),this.nodeType="Vector3",this.value=e instanceof j?e:new j(e,t,i)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,i,r,n,s){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",r,t)}},sa=class extends qt{constructor(e,t,i,r){super(e,t,i),this.isColorA=!0,this.a=r}setRGBA(e,t,i,r){super.setRGB(e,t,i),this.a=r}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}equals(e){return super.equals(e)&&this.a===e.a}setStyle(e,t="srgb"){let i;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(i=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let r,n=i[1],s=i[2];switch(n){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a=n==="rgba"?parseFloat(r[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a=n==="hsla"?parseFloat(r[4]):1,super.setStyle(e,t);break}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Sh=class extends bo{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof sa?e:new sa(e.r,e.g,e.b,e.a)}generateReadonly(e,t,i,r,n,s){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",r,t)}},hXe=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,RW=/[a-z_0-9]+/gi,vt=class extends Er{constructor(e,t,i,r,n){super(n),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=n===void 0,this.isInterface=!1,this.parse(e,t,i,r)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,i,r,n){let s,a=0,o=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)e.include(this.includes[c],this);for(let c in this.extensions)e.extensions[c]=!0;let l=[];for(;s=RW.exec(this.src);)l.push(s);for(let c=0;c<l.length;c++){let u=l[c],h=u[0],f=this.isMethod?!this.getInputByName(h):!0,m=h;if(this.keywords[h]||this.useKeywords&&f&&co.containsKeyword(h)){let g=this.keywords[h];if(!g){let v=co.getKeywordData(h);v.cache&&(g=e.keywords[h]),g=g||co.getKeyword(h,e),v.cache&&(e.keywords[h]=g)}m=g.build(e)}h!==m&&o[u.index+a-1]!=="."&&(o=o.substring(0,u.index+a)+m+o.substring(u.index+h.length+a),a+=m.length-h.length),this.getIncludeByName(m)===void 0&&co.contains(m)&&e.include(co.get(m))}return t==="source"?o:this.isMethod?(this.isInterface||e.include(this,void 0,o),this.name):e.format("( "+o+" )",this.getType(e),t)}parse(e,t,i,r){if(this.src=e||"",this.includes=t??[],this.extensions=i??{},this.keywords=r??{},this.isMethod){let n=hXe.exec(this.src);if(this.inputs=[],n&&n.length==4){this.type=n[1],this.name=n[2];let s=n[3].match(RW);if(s){let a=0;for(;a<s.length;){let o=s[a++],l;o==="in"||o==="out"||o==="inout"?l=s[a++]:(l=o,o="");let c=s[a++];this.inputs.push({name:c,type:l,qualifier:o})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},dXe=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,wne=class extends Er{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||wne.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,i,r,n){this.src=e||"";let s,a,o="",l=dXe.exec(e);this.useDefine=n??this.src.charAt(0)==="#",l&&l.length>1?(a=l[1],s=l[2],o=l[3]):(s=this.src,a="f"),this.name=s,this.type=a,this.value=o}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,i,r,n){return e.format(this.name,this.getType(e),t)}},or=wne;or.PI="PI",or.PI2="PI2",or.RECIPROCAL_PI="RECIPROCAL_PI",or.RECIPROCAL_PI2="RECIPROCAL_PI2",or.LOG2="LOG2",or.EPSILON="EPSILON";var fXe=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),pXe=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),Sne=class extends Er{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,i,r,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=fXe.exec(e);if(t){let i=t[2],r;for(;r=pXe.exec(i);)this.inputs.push({type:r[1],name:r[2]});this.name=t[1]}else this.name="";this.type=this.name}},az=class extends Er{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let i=this.index>0?this.index+1:"",r=e.isShader("vertex")?"uv"+i:"vUv"+i;return e.format(r,this.getType(e),t)}};co.addKeyword("uv",function(){return new az});co.addKeyword("uv2",function(){return new az(1)});var D0=class extends Er{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??D0.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case cc:return["Linear"];case pi:return["sRGB"];default:return[]}}generate(e,t){var a;let i=this.input.build(e,"v4"),r=this.getType(e),n=D0.Nodes[this.method],s=e.include(n);if(s===D0.LINEAR_TO_LINEAR)return e.format(i,r,t);if(((a=n.inputs)==null?void 0:a.length)===2){let o=this.factor.build(e,"f");return e.format(s+"( "+i+", "+o+" )",r,t)}else return e.format(s+"( "+i+" )",r,t)}fromEncoding(e){let t=D0.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=D0.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},ou=D0;ou.Nodes={LinearToLinear:new vt(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new vt(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new vt(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},ou.LINEAR_TO_LINEAR="LinearToLinear",ou.SRGB_TO_LINEAR="sRGBToLinear",ou.LINEAR_TO_SRGB="LinearTosRGB";var Nr=class extends vt{constructor(e="",t,i,r,n){super(e,n,r,i,t),this.nodeType="Expression"}},Mh=class extends bo{constructor(e=new on,t,i,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new az,this.bias=i,this.project=r!==void 0?r:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if(t==="sampler2D")return this.getTexture(e,t);let i=this.getTexture(e,t),r=this.uv.build(e,this.project?"v4":"v2"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s,a;this.project?s="texture2DProj":s=n?"tex2DBias":"tex2D",n?a=s+"( "+i+", "+r+", "+n+" )":a=s+"( "+i+", "+r+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(o),this.colorSpace=this.colorSpace??new ou(new Nr("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,l),e.removeContext(),e.format(a,l,t)}},Et=class extends bo{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,i,r,n,s){return e.format(this.value+(this.value%1?"":".0"),r,t)}},OW=class extends Er{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,i,r,n){r=this.getType(e);let s=this.value,a=s.build(e,t)+"( ",o=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let c=s.inputs[l],u=this.inputs[l]||this.inputs[c.name];o.push(u.build(e,e.getTypeByFormat(c.type)))}a+=o.join(", ")+" )"}return e.format(a,r,t)}},_ne=class extends Er{constructor(e,t,i=_ne.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=i}getType(e){let t=this.a.getType(e),i=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(i)>e.getTypeLength(t)?i:t}generate(e,t){let i=this.getType(e);this.type=i;let r=this.a.build(e,i),n=this.b.build(e,i);return e.format("( "+r+" "+this.op+" "+n+" )",i,t)}},so=_ne;so.ADD="+",so.SUB="-",so.MUL="*",so.DIV="/";var br=class extends Er{constructor(e,t=br.ABS,i,r){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:r=t,typeof i!="string"?this.c=i:r=i,this.method=r,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case br.MIX:case br.CLAMP:case br.REFRACT:case br.SMOOTHSTEP:case br.FACEFORWARD:return 3;case br.MIN:case br.MAX:case br.MOD:case br.STEP:case br.REFLECT:case br.DISTANCE:case br.DOT:case br.CROSS:case br.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),i=this.b?e.getTypeLength(this.b.getType(e)):0,r=this.c?e.getTypeLength(this.c.getType(e)):0;return t>i&&t>r?this.a.getType(e):i>r?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case br.LENGTH:case br.DISTANCE:case br.DOT:return"f";case br.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let i,r,n,s=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,o=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),c=this.getType(e);switch(this.type=c,this.method){case br.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case br.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case br.CROSS:i=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case br.STEP:i=this.a.build(e,s===1?"f":l),r=this.b.build(e,l);break;case br.MIN:case br.MAX:case br.MOD:i=this.a.build(e,l),r=this.b.build(e,a===1?"f":l);break;case br.REFRACT:i=this.a.build(e,l),r=this.b.build(e,l),n=this.c.build(e,"f");break;case br.MIX:i=this.a.build(e,l),r=this.b.build(e,l),n=this.c.build(e,o===1?"f":l);break;default:i=this.a.build(e,l),this.b&&(r=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let u=[];u.push(i),r&&u.push(r),n&&u.push(n);let h=this.getNumInputs(e);if(u.length!==h)throw Error(`Arguments not match used in "${this.method}". Require ${h}, currently ${u.length}.`);return e.format(this.method+"( "+u.join(", ")+" )",c,t)}},di=br;di.RAD="radians",di.DEG="degrees",di.EXP="exp",di.EXP2="exp2",di.LOG="log",di.LOG2="log2",di.SQRT="sqrt",di.INV_SQRT="inversesqrt",di.FLOOR="floor",di.CEIL="ceil",di.NORMALIZE="normalize",di.FRACT="fract",di.SATURATE="saturate",di.SIN="sin",di.COS="cos",di.TAN="tan",di.ASIN="asin",di.ACOS="acos",di.ARCTAN="atan",di.ABS="abs",di.SIGN="sign",di.LENGTH="length",di.NEGATE="negate",di.INVERT="invert",di.MIN="min",di.MAX="max",di.MOD="mod",di.STEP="step",di.REFLECT="reflect",di.DISTANCE="distance",di.DOT="dot",di.CROSS="cross",di.POW="pow",di.MIX="mix",di.CLAMP="clamp",di.REFRACT="refract",di.SMOOTHSTEP="smoothstep",di.FACEFORWARD="faceforward";var yx=class extends Er{constructor(e,t,i){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=i}bilinearCubeUV(e,t,i,r){let n=new OW(yx.Nodes.bilinearCubeUV,[t,i,r]);this.colorSpaceTL=this.colorSpaceTL??new ou(new Nr("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(n.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new ou(new Nr("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(n.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new ou(new Nr("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(n.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new ou(new Nr("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(n.build(e)+".br");let s={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(s),this.colorSpaceTLExp=new Nr(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Nr(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Nr(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Nr(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let a=new Nr("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=n,a}generate(e,t){if(e.isShader("fragment")){let i=this.uv,r=this.bias||e.context.roughness,n=new OW(yx.Nodes.roughnessToMip,[r]),s=new di(n,yx.Nodes.m0,yx.Nodes.cubeUV_maxMipLevel,di.CLAMP),a=new di(s,di.FLOOR),o=new di(s,di.FRACT),l=this.bilinearCubeUV(e,this.value,i,a),c=this.bilinearCubeUV(e,this.value,i,new so(a,new Et(1).setReadonly(!0),so.ADD)),u=new di(l,c,o,di.MIX);return e.format(u.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},TO=yx;TO.Nodes=function(){let e=new Sne(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new or("float cubeUV_maxMipLevel 8.0",!0),i=new or("float cubeUV_minMipLevel 4.0",!0),r=new or("float cubeUV_maxTileSize 256.0",!0),n=new or("float cubeUV_minTileSize 16.0",!0),s=new vt(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let a=new vt(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);a.useKeywords=!1;let o=new vt(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,s,a,t,i,r,n]);o.useKeywords=!1;let l=new or("float r0 1.0",!0),c=new or("float v0 0.339",!0),u=new or("float m0 -2.0",!0),h=new or("float r1 0.8",!0),f=new or("float v1 0.276",!0),m=new or("float m1 -1.0",!0),g=new or("float r4 0.4",!0),v=new or("float v4 0.046",!0),x=new or("float m4 2.0",!0),b=new or("float r5 0.305",!0),S=new or("float v5 0.016",!0),_=new or("float m5 3.0",!0),A=new or("float r6 0.21",!0),M=new or("float v6 0.0038",!0),C=new or("float m6 4.0",!0),D=[l,c,u,h,f,m,g,v,x,b,S,_,A,M,C],T=new vt(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,D);return{bilinearCubeUV:o,roughnessToMip:T,m0:u,cubeUV_maxMipLevel:t}}();var I0=class extends Er{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??I0.VIEW}getShared(){return this.scope===I0.WORLD}build(e,t,i,r){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,i,r):super.build(e,t,i)}generate(e,t,i,r,n){let s;switch(this.scope){case I0.VIEW:e.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case I0.LOCAL:e.isShader("vertex")?s="objectNormal":(e.requires.normal=!0,s="vObjectNormal");break;case I0.WORLD:e.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,s="vWNormal");break}return e.format(s,this.getType(e),t)}},po=I0;po.LOCAL="local",po.WORLD="world",po.VIEW="view",po.NORMAL="normal";co.addKeyword("viewNormal",function(){return new po(po.VIEW)});co.addKeyword("localNormal",function(){return new po(po.NORMAL)});co.addKeyword("worldNormal",function(){return new po(po.WORLD)});var yh=class extends Er{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??yh.LOCAL}getType(){switch(this.scope){case yh.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case yh.LOCAL:case yh.WORLD:return!1}return!0}generate(e,t,i,r,n){let s;switch(this.scope){case yh.LOCAL:e.isShader("vertex")?s="transformed":(e.requires.position=!0,s="vPosition");break;case yh.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,s="vWPosition";break;case yh.VIEW:s=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case yh.PROJECTION:s=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(s,this.getType(),t)}},$l=yh;$l.LOCAL="local",$l.WORLD="world",$l.VIEW="view",$l.PROJECTION="projection";co.addKeyword("position",function(){return new $l});co.addKeyword("worldPosition",function(){return new $l($l.WORLD)});co.addKeyword("viewPosition",function(){return new $l($l.VIEW)});var Xc=class extends Er{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??Xc.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case Xc.SPHERE:return"v2"}return this.type}generate(e,t){let i=this.getUnique(e);if(e.isShader("fragment")){let r;switch(this.scope){case Xc.VECTOR:{let n=new po(po.VIEW),s=e.context.roughness,a=n.build(e,"v3"),o=new $l($l.VIEW).build(e,"v3"),l=s?s.build(e,"f"):void 0,c=`reflect( -normalize( ${o} ), ${a} )`;l&&(c=`normalize( mix( ${c}, ${a}, ${l} * ${l} ) )`);let u=`inverseTransformDirection( ${c}, viewMatrix )`;i?(e.addNodeCode(`vec3 reflectVec = ${u};`),r="reflectVec"):r=u;break}case Xc.CUBE:{let n=new Xc(Xc.VECTOR).build(e,"v3"),s="vec3( -"+n+".x, "+n+".yz )";i?(e.addNodeCode(`vec3 reflectCubeVec = ${s};`),r="reflectCubeVec"):r=s;break}case Xc.SPHERE:{let n="normalize( ( viewMatrix * vec4( "+new Xc(Xc.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";i?(e.addNodeCode(`vec2 reflectSphereVec = ${n};`),r="reflectSphereVec"):r=n;break}}return e.format(r,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},sv=Xc;sv.CUBE="cube",sv.SPHERE="sphere",sv.VECTOR="vector";var mXe=class extends Er{constructor(e=new Mh,t,i){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new TO(this.value,t??new sv(sv.VECTOR),i),this.irradianceNode=new TO(this.value,new po(po.WORLD),new Et(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},gXe=class extends bo{constructor(e=new ck,t,i){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new sv,this.bias=i}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l;if(t==="samplerCube")return this.getTexture(e,t);let i=this.getTexture(e,t),r=(l=this.uv)==null?void 0:l.build(e,"v3"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s;n?s="texCubeBias( "+i+", "+r+", "+n+" )":s="texCube( "+i+", "+r+" )";let a={include:e.isShader("vertex"),ignoreCache:!0},o=this.getType(e);return e.addContext(a),this.colorSpace=this.colorSpace??new ou(new Nr("",o)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(e,o),e.removeContext(),e.format(s,o,t)}},vXe=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,yXe=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,xXe=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,bXe=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,wXe=`
layout(location = 1) out vec4 gVelocity;
`,SXe=`
    // Discard fully transparent pixels 
    if (gl_FragColor.a <= 0.0) discard;

    gVelocity = vec4(0.0, 0.0, 0.0, 1.0);
`,LW=["x","y","z","w"],_Xe=["float","vec2","vec3","vec4"],EXe={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},AXe={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},Ene=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,i){return t.deps.length-i.deps.length}return function(t,i){let r=this.getIncludes(t,i);if(!r)return"";let n="";r=r.sort(e);for(let s=0;s<r.length;s++)r[s].src&&(n+=r[s].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode(vXe),this.addFragmentParsCode(yXe),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let i=0;i<this.requires.uv.length;i++)if(this.requires.uv[i]){let r=i>0?i+1:"";this.addVaryCode("varying vec2 vUv"+r+";"),i>0&&this.addVertexParsCode("attribute vec2 uv"+r+";"),this.addVertexFinalCode("vUv"+r+" = uv"+r+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode(`
				#ifndef SHAPEBLEND 
					vObjectNormal = normal;
				#else
					vObjectNormal = objectNormal;
				#endif
			`)),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(xXe),this.addFragmentFinalCode(bXe)),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,i){return this.addSlot(e).addCache(t).addContext(i)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,i,r="varying",n="V",s=""){let a=this.getVars(r),o=a[e];if(!o){let l=a.length;o={name:i||"node"+n+l+(s?"_"+s:""),type:t},a.push(o),a[e]=o}return o}getTempVar(e,t,i,r){return this.getVar(e,t,i,this.shader,"T",r)}getAttribute(e,t){if(!this.attributes[e]){let i=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(i.name+" = "+e+";"),this.attributes[e]={varying:i,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let i="";for(let r=0,n=e.length;r<n;++r){let s=e[r],a=s.type,o=s.name,l=s.size,c=this.getFormatByType(a);if(c===void 0)throw new Error("Node pars "+c+" not found.");c.includes("[]")?i+=t+" "+c.substring(0,c.length-2)+" "+o+`[${l}];
`:i+=t+" "+c+" "+o+`;
`}return i}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof ns?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,i,r,n,s){if(t.includes("[]")){let a=this.inputs.arrayUniforms,o=a.list.length,l=new IW({type:t,size:i.size,name:r||"nodeUA"+o+(s?"_"+s:""),node:i,needsUpdate:n});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}else{let a=this.inputs.uniforms,o=a.list.length,l=new IW({type:t,name:r||"nodeU"+o+(s?"_"+s:""),node:i,needsUpdate:n});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,i,r,n){return this.createUniform("vertex",e,t,i,r,n)}createFragmentUniform(e,t,i,r,n){return this.createUniform("fragment",e,t,i,r,n)}include(e,t,i){var s;let r;if(e=typeof e=="string"?co.get(e):e,this.context.include===!1)return e.name;e instanceof vt?r=this.includes.functions:e instanceof or?r=this.includes.consts:e instanceof Sne&&(r=this.includes.structs);let n=r[this.shader]=r[this.shader]||[];if(e){let a=n[e.name];if(a||(a=n[e.name]={node:e,deps:[]},n.push(a),a.src=e.build(this,"source")),e instanceof vt&&t&&n[t.name]&&n[t.name].deps.indexOf(e)===-1&&(n[t.name].deps.push(e),(s=e.includes)==null?void 0:s.length)){let o=0;do this.include(e.includes[o++],t);while(o<e.includes.length)}return i&&(a.src=i),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return _Xe[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let i=e[t];if(i!=null&&i.isNode)return i}}resolve(...e){for(let t=0;t<arguments.length;t++){let i=e[t];if(i!==void 0){if(i.isNode)return i;if(i.isTexture)switch(i.mapping){case Cm:case Mm:return new gXe(i);case xw:return new mXe(new Mh(i));default:return new Mh(i)}else{if(i.isVector2)return new Xs(i);if(i.isVector3)return new cl(i);if(i.isVector4)return new Sh(i)}}}}format(e,t,i){switch(this.colorToVector(i+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return EXe[e]||e}getFormatByType(e){return AXe[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return LW[e]}getIndexByElement(e){return LW.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=cc,t===cc&&this.context.gamma&&(t=pi),t}},vn=class extends bo{constructor(e=0,t,i,r){super("c"),this.nodeType="Color",this.value=e instanceof sa?e:new sa(e||0,t,i,r)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,i,r,n,s){i=e.getUUID(i??this.getUUID()),r=r??this.getType(e);let a=e.getNodeData(i),o=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return o?this.generateReadonly(e,t,i,r,n,s):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(r,this,n,s,this.getLabel())),e.format(a.vertex.name,r,t)):(a.fragment||(a.fragment=e.createFragmentUniform(r,this,n,s,this.getLabel())),e.format(a.fragment.name,r,t))}generateReadonly(e,t,i,r,n,s){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",r,t)}},Dr=class extends bo{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,i,r,n,s){return e.format(this.value.toString(),r,t)}},Ua=class extends bo{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,i,r){return e.format(this.value?"true":"false",r,t)}},Np=class extends bo{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},oz=class extends bo{},TXe=class extends oz{constructor(e){super("v3"),this.image=e,this._value=new j}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},CO=class extends oz{constructor(e,t,i=1008,r=1006){super("t"),this.image=e,this.wrap=t,this.minFilter=i,this.magFilter=r}get value(){return this.image.getTexture(this.wrap,this.minFilter,this.magFilter)}},Ane=class extends bo{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new Hn}generateReadonly(e,t,i,r,n,s){return e.format("mat3("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},Mu=class extends bo{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new tt}generateReadonly(e,t,i,r,n,s){return e.format("mat4("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function kW(e,t,i,r=0){e.setUvTransform(i[0],i[1],t[0],t[1],0,0,0).premultiply(new Hn().makeRotation(r*wt.DEG2RAD))}var CXe=class extends Ane{constructor(e,t,i=0){super(new Hn),this.repeat=e,this.offset=t,this.rotation=i,kW(this.value,e,t,i)}updateMatrix(){kW(this.value,this.repeat,this.offset,this.rotation)}},Vp=class extends bo{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof ni?new Array(e).fill(t):new Array(e).fill(new ni(0))}},zW=class extends Er{constructor(e,t,i,r){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=i,this.mode=r}generate(e,t){if(e.isShader("fragment")){let i=[];return i.push(this.a.build(e,"c")),i.push(this.b.build(e,"c")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),e.format("spe_blend("+i.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Tne=class extends Er{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let i=e.include(Tne.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.color.build(e,"v3")),r.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},MO=Tne;MO.Nodes=function(){return{customColor:new vt(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var Cne=class extends Er{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let i=e.include(Cne.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.cnormal.build(e,"v3")),r.push("normal"),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Mne=Cne;Mne.Nodes=function(){return{customNormal:new vt(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var xx=class extends Er{constructor(e,t,i,r,n,s,a,o,l,c,u,h){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=i,this.projection=r,this.axis=n,this.side=s,this.size=a,this.blending=o,this.mat=l,this.isMask=h,this.alpha=c,this.mode=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let i=`g${this.uuid.toString().replace(/-/g,"")}`,r;switch(this.projection.value){case 3:r=e.include(xx.Nodes.cylindrical);break;case 2:r=e.include(xx.Nodes.spherical);break;case 1:let s=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],a=["zy","xz","xy"][this.axis.value],o=new vt(`
		vec3 ${i}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${a})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, ${s}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);r=e.include(o);break;case 4:r=e.include(xx.Nodes.triplanar);break;default:r=e.include(xx.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let n=[];if(n.push("normal"),n.push(this.texture.generate(e,"t")),n.push(this.textureSize.build(e,"v2")),n.push(this.crop.build(e,"f")),n.push(this.mat.build(e,"mat3")),n.push(this.size.build(e,"v2")),n.push(this.blending.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),this.projection.value===4){let s=`${i}_writeUvs`,a=s+"0",o=s+"1",l=s+"2",c=`${i}_triplanarWeights`;e.addFragmentVariable(a,"vec2"),e.addFragmentVariable(o,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(c,"vec3"),n.push(a),n.push(o),n.push(l),n.push(c)}else{let s=`${i}_writeUvs`;e.addFragmentVariable(s,"vec2"),n.push(s)}return e.format(r+"("+n.join(",")+")",this.getType(e),t)}},lz=xx;lz.Nodes=function(){let e=new vt(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),t=new vt(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),i=new vt(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),r=new vt(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:t,uv:i,triplanar:r}}();var bx=class extends Er{constructor(e,t,i,r,n,s,a,o,l,c,u,h){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=i,this.far=r,this.isVector=n,this.isWorldSpace=s,this.origin=a,this.direction=o,this.colors=l,this.steps=c,this.isMask=h,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let i=`g${this.uuid.toString().replace(/-/g,"")}`,r=new vt(`vec3 ${i}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${i}_MAX_COLORS], float steps[${i}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${i}_IS_VECTOR
                   #ifdef ${i}_LINEAR
                       #ifdef ${i}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${i}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${i}_SMOOTH
				for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[bx.Nodes.vectorLinearWorldSpaceDepth,bx.Nodes.vectorLinearObjectSpaceDepth,bx.Nodes.vectorSphericalObjectSpaceDepth,bx.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${i}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${i}_SMOOTH`),this.isVector.value>.5&&e.define(`${i}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${i}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${i}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let n=e.include(r),s=[];return s.push(this.near.build(e,"f")),s.push(this.far.build(e,"f")),s.push(this.origin.build(e,"v3")),s.push(this.direction.build(e,"v3")),s.push(this.colors.build(e,"v4[]")),s.push(this.steps.build(e,"f[]")),s.push(this.isMask.build(e,"b")),s.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),s.push(this.alpha.build(e,"f")),s.push(this.calpha),e.format(n+"("+s.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Pne=bx;Pne.Nodes=function(){let e=new vt(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new vt(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),i=new vt(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),r=new vt(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:i,vectorSphericalObjectSpaceDepth:r}}();var MXe=class extends Er{constructor(e,t,i,r,n,s,a,o){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=i,this.intensity=r,this.factor=n,this.isMask=o,this.alpha=s,this.mode=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=new vt(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),r=e.include(i),n=[];return n.push(this.color.build(e,"c")),n.push(this.bias.build(e,"f")),n.push(this.scale.build(e,"f")),n.push(this.intensity.build(e,"f")),n.push(this.factor.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Dne=class extends Er{constructor(e,t,i,r,n,s,a,o,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=i,this.steps=r,this.offset=n,this.morph=s,this.angle=a,this.isMask=l,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(Dne.Nodes.gradient),r=[];return r.push(this.gradientType.build(e,"i")),r.push(this.smooth.build(e,"b")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.offset.build(e,"v2")),r.push(this.morph.build(e,"v2")),r.push(this.angle.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Ine=Dne;Ine.Nodes=function(){return{gradient:new vt(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var Rne=class extends Er{constructor(e,t,i,r,n){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=r,this.alpha=t,this.mode=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`,this.rotation=n}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=e.include(Rne.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let r=[];return r.push(this.texture.generate(e,"t")),r.push("normal"),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),r.push(this.rotation.build(e,"f")),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},One=Rne;One.Nodes=function(){return{matcap:new vt(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha, float rotation) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) );
					uv = mat2( cos(rotation), sin(rotation), -sin(rotation), cos(rotation) ) * uv;
					uv = uv * 0.495 + 0.5;
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var oo=function(){let e=new vt(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new vt(`float simplexFast(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 mediump vec3 x = p - s + dot(s, vec3(G3));
			 mediump vec3 hs = s;
			 
			 mediump vec3 e = step(vec3(0.0), x - x.yzx);
			 mediump vec3 i1 = e*(1.0 - e.zxy);
			 mediump vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 mediump vec3 x1 = x - i1 + G3;
			 mediump vec3 x2 = x - i2 + 2.0*G3;
			 mediump vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 mediump vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(hs), x);
			 d.y = dot(random3(hs + i1), x1);
			 d.z = dot(random3(hs + i2), x2);
			 d.w = dot(random3(hs + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new or("float F3 0.3333333"),t.keywords.G3=new or("float G3 0.1666667");let i=new vt(`float simplexPrecise(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);i.keywords.F3=new or("float F3 0.3333333"),i.keywords.G3=new or("float G3 0.1666667");let r=new vt(`float simplexFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplexFast(m * rot1)
				 + 0.2666667 * simplexFast(2.0 * m * rot2)
				 + 0.1333333 * simplexFast(4.0 * m * rot3)
				 + 0.0666667 * simplexFast(8.0 * m);
		}`,[t]),n=new vt("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),s=new vt("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),a=new vt(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[n,s]),o=new vt("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),l=new vt("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),c=new vt(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[l]),u=new vt(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[c]);u.keywords.NUM_OCTAVES=new or("int NUM_OCTAVES 5");let h=new vt("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),f=new vt(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[n,s,h]),m=new vt(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),g=new vt(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),v=new vt(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),x=new vt(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),b=new vt(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),S=new vt(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),_=new vt(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			// Second pass for edge distance  
			// skip for styles don't need
			if (style != 0 &&  style != 5 && style != 7)
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[m,g,v,x,b,S]);return{simplexFast:t,simplexPrecise:i,simplexFractal:r,simplexAshima:a,fbm:u,perlin:f,voronoi:_}}(),Lne=class extends Er{constructor(e,t,i,r,n,s,a,o,l,c,u,h,f,m,g,v,x,b,S){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=i,this.fA=r,this.fB=n,this.distortion=s,this.colorA=a,this.colorB=o,this.colorC=l,this.colorD=c,this.noiseType=h,this.voronoiStyle=m,this.highCut=g,this.lowCut=v,this.smoothness=x,this.seed=b,this.quality=S,this.isMask=f,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,i,r,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let s=["simplexFast","simplexFractal","simplexAshima","fbm","perlin","voronoi"][this.noiseType.value],a=s=="voronoi"?`
		float v = ${s}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${s}(st),
					   ${s}(st + vec3(1.0)),
					   ${s}(st + vec3(1.0)));
		vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${s}(st * q));
		float f = ${s}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,o=new vt(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${a}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[oo.simplexFast,oo.simplexFractal,oo.simplexAshima,oo.fbm,oo.perlin,oo.voronoi]),l=e.include(o),c=[];return c.push(this.scale.build(e,"f")),c.push(this.size.build(e,"v3")),c.push(this.move.build(e,"f")),c.push(this.fA.build(e,"v2")),c.push(this.fB.build(e,"v2")),c.push(this.distortion.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.colorC.build(e,"v4")),c.push(this.colorD.build(e,"v4")),c.push(this.voronoiStyle.build(e,"i")),c.push(this.highCut.build(e,"f")),c.push(this.lowCut.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.seed.build(e,"f")),c.push(this.quality.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}};Lne.numOctaves=5;var kne=class extends Er{constructor(e,t,i,r,n,s,a,o,l,c,u,h,f,m,g,v){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=i,this.contourWidth=r,this.contourThreshold=n,this.outlineThreshold=s,this.contourFrequency=a,this.outlineSmoothing=o,this.contourDirection=l,this.positionalLines=c,this.compensation=u,this.resolution=h,this.normalMap=f,this.depthMap=m,this.pixelRatio=g,this.alpha=v,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let i=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${i}_offset`),this.firstTime){let r=this.outlineWidth.build(e,"f"),n=this.resolution.build(e,"v2"),s=this.compensation.build(e,"b"),a=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(r,"uniform float"),e.addVertexParsVariable(n,"uniform vec2"),e.addVertexParsVariable(s,"uniform bool"),e.addVertexParsVariable(a,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${i}_offset = vec2(0.0);
                if (${s}) {
                    vec4 ${i}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${i}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${i}_offset = normalize(${i}_clipNormal.xy) / ${n} * (${r} / 2.0) * ${i}_clipPosition.w * 2.0 * ${a};
                    ${i}_clipPosition.xy += ${i}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${i}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(kne.Nodes.outline),n=[];return n.push(this.outlineColor.build(e,"c")),n.push(this.contourColor.build(e,"c")),n.push(this.outlineWidth.build(e,"f")),n.push(this.contourWidth.build(e,"f")),n.push(this.contourThreshold.build(e,"f")),n.push(this.outlineThreshold.build(e,"f")),n.push(this.contourFrequency.build(e,"f")),n.push(this.outlineSmoothing.build(e,"f")),n.push(this.contourDirection.build(e,"v3")),n.push(this.positionalLines.build(e,"b")),n.push(this.resolution.build(e,"v2")),n.push(this.normalMap.getTexture(e,"t")),n.push(this.depthMap.getTexture(e,"t")),n.push(this.pixelRatio.build(e,"f")),n.push(this.compensation.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},zne=kne;zne.Nodes=function(){let e=new vt(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new vt(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var xh=class extends Er{constructor(e,t,i,r,n,s,a,o,l,c,u,h,f,m,g,v,x,b){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=i,this.blending=r,this.offset=n,this.colorA=s,this.colorB=a,this.frequency=o,this.size=l,this.variation=c,this.smoothness=u,this.zigzag=h,this.rotation=f,this.vertical=m,this.horizontal=g,this.sides=v,this.isMask=b,this.alpha=x,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let i;switch(this.style.value){case 0:i="circle";break;case 1:i="ring";break;case 2:i="polygon";break;case 3:i="xcross";break;case 4:i="diamond";break;case 5:i="checkerboard";break;case 6:i="line";break;case 7:i="wave";break;default:i="circle";break}let r=`g${this.uuid.toString().replace(/-/g,"")}`,n=new vt(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),s=new vt(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),a="";if(this.projection.value===4){let u=this.style.value===2?`${i}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,h=this.style.value===2?`${i}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,f=this.style.value===2?`${i}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;a=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${u};
				float d1 = ${h};
				float d2 = ${f};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let u=this.style.value===2?`${i}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,h="";this.axis.value===0?h=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?h=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,h=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let f="";switch(this.projection.value){case 0:f="custom_uv = vUv.st;";break;case 1:break;case 2:f=`
							vec3 p = position;
							${h}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}a=`
				vec2 custom_uv;
				${f}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${u};
				`}let o=new vt(`vec3 ${r}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${a}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[s,n,xh.DrawFunctions.circle,xh.DrawFunctions.ring,xh.DrawFunctions.polygon,xh.DrawFunctions.cross,xh.DrawFunctions.diamond,xh.DrawFunctions.checkerboard,xh.DrawFunctions.line,xh.DrawFunctions.wave]),l=e.include(o),c=[];return c.push("normal"),c.push(this.blending.build(e,"f")),c.push(this.style.build(e,"i")),c.push(this.offset.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.frequency.build(e,"v2")),c.push(this.size.build(e,"f")),c.push(this.variation.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.zigzag.build(e,"f")),c.push(this.rotation.build(e,"f")),c.push(this.vertical.build(e,"v2")),c.push(this.horizontal.build(e,"v2")),c.push(this.sides.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},Bne=xh;Bne.DrawFunctions=function(){let e=new vt(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),t=new vt(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),i=new vt(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[t]),r=new vt(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[t]),n=new vt(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[t]),s=new vt(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[t]),a=new vt(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[t]),o=new vt(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new vt(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[t]),c=new vt(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:t,circle:i,ring:r,polygon:n,cross:s,diamond:a,checkerboard:o,line:l,wave:c}}();var jne=class extends Er{constructor(e,t,i,r,n,s,a,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=i,this.noiseStrength=r,this.noiseScale=n,this.offset=s,this.isMask=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(jne.Nodes.rainbow),r=[];return r.push(this.filmThickness.build(e,"f")),r.push(this.movement.build(e,"f")),r.push(this.wavelengths.build(e,"v3")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.offset.build(e,"v3")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Nne=jne;Nne.Nodes=function(){let e=new vt(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
				float f = 0.0;
				
				if (noiseStrength != 0.0) {
					vec3 st = position / noiseScale;
					float noise = simplexFast(1.6 * st + vec3(1.8, 1.5, 1.9) * simplexFast(st) + vec3(1.7, 9.2, 1.0));
					f = noise * noiseStrength;
				}

				vec3 waves = wavelengths * vec3(1.0, 0.8, 0.6) + 1.0;
				float angle = dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal));

				mediump vec3 color = cos((((filmThickness + f) / waves) * angle) + movement);
				return .5 + .5 * color;
			 }`,[oo.simplexFast]);return{rainbow:new vt(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				mediump vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
			 }`,[e])}}();var Vne=class extends Er{constructor(e,t,i,r,n,s,a,o,l,c){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=i,this.source=r,this.isWorldSpace=n,this.noiseStrength=s,this.noiseScale=a,this.shadowColor=o,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let i=e.include(Vne.Nodes.toon),r=[];return r.push(this.positioning.build(e,"i")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.source.build(e,"v3")),r.push(this.isWorldSpace.build(e,"b")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.shadowColor.build(e,"v4")),r.push(this.offset.build(e,"v3")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Une=Vne;Une.Nodes=function(){let e=new vt(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new vt(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),i=new vt(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),r=new vt(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),n=new vt(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[r]);return{toon:new vt(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplexFast(st),
					// 	simplexFast(st + vec3(111.1, 143.89, 217.19)),
					// 	simplexFast(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[oo.simplexFast,e,i,n])}}();var PXe=function(){return{textureBicubic:new vt(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function DXe(e,t){return e>=t?new pe(t/e,1):new pe(1,e/t)}var Fne=class extends Er{constructor(e,t,i,r,n,s,a,o){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=i,this.transmissionSamplerSize=r,this.transmissionSamplerMap=n,this.transmissionDepthMap=s,this.aspectRatio=a,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,Qt.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let i=e.include(Fne.Nodes.transmission),r=[];return r.push(this.thickness.build(e,"f")),r.push(this.ior.build(e,"f")),r.push(this.roughness.build(e,"f")),r.push(this.transmissionSamplerSize.build(e,"v2")),r.push(this.transmissionSamplerMap.getTexture(e,"t")),r.push(this.transmissionDepthMap.getTexture(e,"t")),r.push(this.aspectRatio.build(e,"v2")),r.push("normal"),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Hne=Fne;Hne.Nodes=function(){let e=new vt(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),t=new vt(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),i=new vt(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),r=new vt(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[PXe.textureBicubic,i,e]),n=new vt(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[r,t]);return{transmission:new vt(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[n])}}();var PO=(e=>(e.NOISE="noise",e.MAP="map",e))(PO||{}),Gne=class extends Er{constructor(e,t,i,r,n,s,a,o,l,c,u){super("v3"),this.displacementTypeIndex=new Dr(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(PO)[this.displacementTypeIndex.value]==="map"&&(this.mat=new Ane(this.movementOrTexture.value.matrix)),this.cropOrOffset=i,this.scale=c,this.noiseFunctionIndex=u,this.voronoiStyle=r,this.smoothness=n,this.seed=s,this.highCut=a,this.lowCut=o,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let i,r=[];switch(r.push("displaced_position"),r.push("displaced_normal"),Object.values(PO)[this.displacementTypeIndex.value]){case"map":{i=e.include(Gne.Nodes.map),r.push(this.movementOrTexture.getTexture(e,"t")),r.push("uv"),r.push(this.cropOrOffset.build(e,"f")),this.mat&&r.push(this.mat.build(e,"mat3"));break}case"noise":{let n=["simplexPrecise","simplexFractal","simplexAshima","fbm","perlin","voronoi"][this.noiseFunctionIndex.value],s=new vt(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),a=n=="voronoi"?`
					float v = ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,o=new vt(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${a}
						}`,[oo.simplexPrecise,oo.simplexFractal,oo.simplexAshima,oo.fbm,oo.perlin,oo.voronoi]),l=new vt(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,s]);i=e.include(l),r.push(this.scale.build(e,"f")),r.push(this.cropOrOffset.build(e,"v3")),r.push(this.movementOrTexture.build(e,"f")),r.push(this.voronoiStyle.build(e,"i")),r.push(this.smoothness.build(e,"f")),r.push(this.seed.build(e,"f")),r.push(this.highCut.build(e,"f")),r.push(this.lowCut.build(e,"f")),r.push(this.quality.build(e,"i"));break}}return r.push(this.intensity.build(e,"f")),r.push("displaced_normal"),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Wne=Gne;Wne.Nodes=function(){let e=new vt(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new vt(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new vt(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var Qt={normalRenderTarget:new Mh,normalRenderTargetDepth:new Mh,transmissionRenderTarget:new Mh,aspectRatio:new Xs,transmissionSize:new Xs(2048,2048),transmissionRenderTargetDepth:new Mh,aoRenderTarget:new Mh,aoEnabled:new Ua,pixelRatioNode:new Et(1),resolution:new Xs,penumbraSize:new Np(5,.5),frameIndex:new Dr(0),transmissionLod:new Dr(2)};for(let e of Object.values(Qt))e.isRenderGlobal=!0;var qne={skiaWasmUrl:"https://unpkg.com/@splinetool/ui-wasm@1.10.17/build/ui.wasm"},cz=class extends ns{constructor(){super("basic"),this.nodeType="Basic",this.color=new vn(Fo),this.shadingAlpha=new Et(1),this.shadingBlend=new Dr(0),this.previousModelViewMatrix=new Mu,this.previouseProjectionMatrix=new Mu}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Qt.frameIndex}),e.mergeUniform({resolution:Qt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(ny.merge([mt.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{this.color===void 0&&(this.color=new vn(Fo)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let i=this.color.flow(e,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=r!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let a=["#include <normal_fragment_begin>",i.code];r&&a.push(r.code,"#ifdef ALPHATEST"," if ( "+r.result+" <= ALPHATEST ) discard;","#endif"),s?a.push(s.code,`vec3 outgoingLight = ${i.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`):a.push(`vec3 finalColor = ${i.result};`);let o="1.0";this.mask&&(this.mask.analyze(e),o=`luminance(${this.mask.flow(e,"v3").result})`),r?a.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${r.result} * ${o} );`):a.push("gl_FragColor = vec4("+i.result+", 1.0 );"),n&&a.push(`gl_FragColor.a *= ${n.result};`),a.push("#include <fog_fragment>","#include <dithering_fragment>"),t=a.join(`
`)}return t}},IXe=class extends ns{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new vn(Fo),this.emissive=new vn(0),this.emissiveIntensity=new Et(1),this.previousModelViewMatrix=new Mu,this.previouseProjectionMatrix=new Mu,this.shadingAlpha=new Et(1),this.shadingBlend=new Dr(0),this.occlusion=new Ua(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Qt.frameIndex}),e.mergeUniform({resolution:Qt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(ny.merge([mt.fog,mt.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),r.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:Qt.penumbraSize}),e.mergeUniform({frameIndex:Qt.frameIndex}),e.mergeUniform({aoMap:Qt.aoRenderTarget}),e.mergeUniform({aoEnabled:Qt.aoEnabled}),this.color===void 0&&(this.color=new vn(Fo)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),s=this.occlusion.flow(e,"b",{slot:"occlusion"}),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];h.push(i.code,"vec3 diffuseColor = "+i.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),r&&h.push(r.code,"reflectedLight.directDiffuse += "+r.result+" * "+n.result+";"),h.push("vec3 ao = aoEnabled && "+s.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let f="1.0";this.mask&&(this.mask.analyze(e),f=`luminance(${this.mask.flow(e,"v3").result})`),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${f} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${f}, ${o.result} );

					outgoingLight *= ao;
				}
				`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&h.push(`gl_FragColor.a *= ${u.result};`),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}},Vv=function(){let e=new vt(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),t=new vt(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:t}}(),RXe=class extends ns{constructor(){super("phong"),this.nodeType="Phong",this.color=new vn(Fo),this.specular=new vn(1118481),this.shininess=new Et(30),this.previousModelViewMatrix=new Mu,this.previouseProjectionMatrix=new Mu,this.shadingAlpha=new Et(1),this.shadingBlend=new Dr(0),this.occlusion=new Ua(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Qt.frameIndex}),e.mergeUniform({resolution:Qt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(ny.merge([mt.fog,mt.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:Qt.penumbraSize}),e.mergeUniform({frameIndex:Qt.frameIndex}),e.mergeUniform({aoMap:Qt.aoRenderTarget}),e.mergeUniform({aoEnabled:Qt.aoEnabled}),this.color===void 0&&(this.color=new vn(Fo)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(Vv.dHdxy),e.include(Vv.perturbNormalArb);let m=this.bumpMap.texture.flow(e,"t"),g=this.bumpMap.flow(e,"v3"),v=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",x="";this.bumpMap.projection.value===4?x=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${m.result}, uv0, ${v});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${m.result}, uv1, ${v});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${m.result}, uv2, ${v});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:x=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${m.result}, bumpMapCachedUv, ${v});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,h.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};
					${x}
					`)}h.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",n.code,"	vec3 specular = "+n.result+";",s.code,"	float shininess = max( 0.0001, "+s.result+" );","	float specularStrength = 1.0;"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let f="1.0";this.mask&&(this.mask.analyze(e),f=`luminance(${this.mask.flow(e,"v3").result})`),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${f} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${f}, ${o.result} );
					
					outgoingLight *= ao;
				}
				`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result});`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&h.push(`gl_FragColor.a *= ${u.result};`),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}},OXe=class extends ns{constructor(){super("standard"),this.nodeType="Standard",this.color=new vn(Fo),this.roughness=new Et(.3),this.metalness=new Et(0),this.reflectivity=new Et(.5),this.previousModelViewMatrix=new Mu,this.previouseProjectionMatrix=new Mu,this.shadingAlpha=new Et(1),this.shadingBlend=new Dr(0),this.occlusion=new Ua(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Qt.frameIndex}),e.mergeUniform({resolution:Qt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(ny.merge([mt.fog,mt.lights])),mt.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:Qt.penumbraSize}),e.mergeUniform({frameIndex:Qt.frameIndex}),e.mergeUniform({aoMap:Qt.aoRenderTarget}),e.mergeUniform({aoEnabled:Qt.aoEnabled});let i={gamma:!0};this.color===void 0&&(this.color=new vn(Fo)),this.color.analyze(e,{slot:"color",context:i}),this.roughness.analyze(e),this.metalness.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let n=this.color.flow(e,"c",{slot:"color",context:i}),s=this.roughness.flow(e,"f"),a=this.metalness.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),c=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,f=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let m=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(Vv.dHdxy),e.include(Vv.perturbNormalArb);let v=this.bumpMap.texture.flow(e,"t"),x=this.bumpMap.flow(e,"v3"),b=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",S="";this.bumpMap.projection.value===4?S=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${v.result}, uv0, ${b});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${v.result}, uv1, ${b});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${v.result}, uv2, ${b});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:S=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${v.result}, bumpMapCachedUv, ${b});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,m.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${x.result};
					${S}
					`)}if(m.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",a.code,"	float metalnessFactor = "+a.result+";"),this.roughnessMap){let v=this.roughnessMap.texture.flow(e,"t"),x=this.roughnessMap.flow(e,"v3"),b="";this.roughnessMap.projection.value===4?b=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${v.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${v.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${v.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${s.result};
					`:b=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${v.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${s.result};
					`,m.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${x.result};

					const float roughnessScale = 1.0;

					${b}
				`)}else m.push(s.code,"	float roughnessFactor = "+s.result+";");u&&m.push(u.code,"#ifdef ALPHATEST","	if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),m.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),m.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),f?m.push(f.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+f.result+" ) ), diffuseColor, metalnessFactor );"):m.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),m.push("#include <lights_fragment_begin>"),m.push("#include <lights_fragment_end>"),m.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let g="1.0";this.mask&&(this.mask.analyze(e),g=`luminance(${this.mask.flow(e,"v3").result})`),m.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${g} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${g}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),c&&m.push(c.code,`outgoingLight = spe_blend(outgoingLight, ${c.result}, 1.0, SPE_BLENDING_NORMAL);`),u?m.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):m.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&m.push(`gl_FragColor.a *= ${h.result};`),m.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=m.join(`
`)}return t}},LXe=class extends ns{constructor(){super("toon"),this.nodeType="Toon",this.color=new vn(Fo),this.specular=new vn(1118481),this.shininess=new Et(30),this.previousModelViewMatrix=new Mu,this.previouseProjectionMatrix=new Mu,this.shadingAlpha=new Et(1),this.shadingBlend=new Dr(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Qt.frameIndex}),e.mergeUniform({resolution:Qt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(ny.merge([mt.fog,mt.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:Qt.penumbraSize}),e.mergeUniform({frameIndex:Qt.frameIndex}),e.mergeUniform({aoMap:Qt.aoRenderTarget}),e.mergeUniform({aoEnabled:Qt.aoEnabled}),this.color===void 0&&(this.color=new vn(Fo)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let u=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(Vv.dHdxy),e.include(Vv.perturbNormalArb);let f=this.bumpMap.texture.flow(e,"t"),m=this.bumpMap.flow(e,"v3"),g=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",v="";this.bumpMap.projection.value===4?v=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${f.result}, uv0, ${g});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${f.result}, uv1, ${g});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${f.result}, uv2, ${g});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:v=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${f.result}, bumpMapCachedUv, ${g});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,u.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${m.result};
					${v}
					`)}u.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"	vec3 specular = "+r.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&u.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),u.push("material.diffuseColor = diffuseColor;"),u.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${h}, ${a.result} );
				}
				`),o&&u.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&u.push(`gl_FragColor.a *= ${c.result};`),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},kXe=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),i=this.cache.get(e);return i===void 0?(i={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,i)):(i.time=t,i.prev.next=i.next,i.next.prev=i.prev),i.prev=this.tail.prev,i.next=this.tail,this.tail.prev.next=i,this.tail.prev=i,this.scheduleCleanup(),i.data}},zXe=class extends kXe{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},G4;function BXe(e){return typeof e=="string"?e:(G4||(G4=new zXe),G4.load(e))}var jXe=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},NXe=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},Xne=class extends jXe{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isBuffer=!1,this._cache={1e3:{},1001:{},1002:{}},this.isVideo=e.type==="video",this.isBuffer=e.isWebGLRenderTarget===!0,this.loadPromise=this.updateSrc(this.isBuffer?e:e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;for(let r of Object.values(this._cache))for(let n of Object.values(r))for(let s of Object.values(n))s&&(s.image=this.img,s.needsUpdate=!0);this.shared.requestRender()};if(this.isBuffer)this.img=e,this.loaded=!0;else if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var i=new FileReader;i.readAsDataURL(new Blob([e],{type:"video/mp4"}));let r;await new Promise(n=>{i.onloadend=s=>{var a;r=(a=s.target)==null?void 0:a.result,n(null)}}),this.img.src=r}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=BXe(e),this.img.onload=t,await new Promise(r=>{this.img.onload=()=>{t(),r(null)}})}getTexture(e,t=1008,i=1006){var n,s;let r=(s=(n=this._cache[e])==null?void 0:n[t])==null?void 0:s[i];if(r)return r;{let a;return this.isBuffer?a=this.img.texture:this.isVideo?a=new nze(this.img,void 0,e,e):a=new on(this.img,void 0,e,e,i,t),this.loaded&&(a.needsUpdate=!0),this._cache[e]===void 0&&(this._cache[e]={}),this._cache[e][t]===void 0&&(this._cache[e][t]={}),this._cache[e][t][i]=a,a}}setNeedsUpdate(e){for(let t of Object.values(this._cache))for(let i of Object.values(t))for(let r of Object.values(i))r&&(r.needsUpdate=e)}disposeTextures(){for(let[e,t]of Object.entries(this._cache))for(let[i,r]of Object.entries(t))for(let[n,s]of Object.entries(r))s==null||s.dispose(),this._cache[e]!==void 0&&this._cache[e][i]!==void 0&&(this._cache[e][i][n]=void 0)}dispose(){super.dispose(),this.disposeTextures()}},$d=class extends Xne{};function VXe(e,t){var i=GXe(t);return i.formatToParts?FXe(i,e):HXe(i,e)}var UXe={year:0,month:1,day:2,hour:3,minute:4,second:5};function FXe(e,t){try{for(var i=e.formatToParts(t),r=[],n=0;n<i.length;n++){var s=UXe[i[n].type];s>=0&&(r[s]=parseInt(i[n].value,10))}return r}catch(a){if(a instanceof RangeError)return[NaN];throw a}}function HXe(e,t){var i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var W4={};function GXe(e){if(!W4[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),i=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";W4[e]=i?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return W4[e]}function Yne(e,t,i,r,n,s,a){var o=new Date(0);return o.setUTCFullYear(e,t,i),o.setUTCHours(r,n,s,a),o}var BW=36e5,WXe=6e4,q4={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Qne(e,t,i){var r,n;if(!e||(r=q4.timezoneZ.exec(e),r))return 0;var s;if(r=q4.timezoneHH.exec(e),r)return s=parseInt(r[1],10),jW(s)?-(s*BW):NaN;if(r=q4.timezoneHHMM.exec(e),r){s=parseInt(r[1],10);var a=parseInt(r[2],10);return jW(s,a)?(n=Math.abs(s)*BW+a*WXe,s>0?-n:n):NaN}if(YXe(e)){t=new Date(t||Date.now());var o=i?t:qXe(t),l=DO(o,e),c=i?l:XXe(t,l,e);return-c}return NaN}function qXe(e){return Yne(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function DO(e,t){var i=VXe(e,t),r=Yne(i[0],i[1]-1,i[2],i[3]%24,i[4],i[5],0).getTime(),n=e.getTime(),s=n%1e3;return n-=s>=0?s:1e3+s,r-n}function XXe(e,t,i){var r=e.getTime(),n=r-t,s=DO(new Date(n),i);if(t===s)return t;n-=s-t;var a=DO(new Date(n),i);return s===a?s:Math.max(s,a)}function jW(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var NW={};function YXe(e){if(NW[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),NW[e]=!0,!0}catch{return!1}}var QXe=Yf(qDe(),1),VW=Yf(XDe(),1),KXe=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,ZXe=KXe,X4=36e5,UW=6e4,$Xe=2,Fa={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:ZXe};function JXe(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var i={},r=i.additionalDigits==null?$Xe:(0,QXe.default)(i.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var n=eYe(e),s=tYe(n.date,r),a=s.year,o=s.restDateString,l=iYe(o,a);if(isNaN(l))return new Date(NaN);if(l){var c=l.getTime(),u=0,h;if(n.time&&(u=rYe(n.time),isNaN(u)))return new Date(NaN);if(n.timeZone||i.timeZone){if(h=Qne(n.timeZone||i.timeZone,new Date(c+u)),isNaN(h))return new Date(NaN)}else h=(0,VW.default)(new Date(c+u)),h=(0,VW.default)(new Date(c+u+h));return new Date(c+u+h)}else return new Date(NaN)}function eYe(e){var t={},i=Fa.dateTimePattern.exec(e),r;if(i?(t.date=i[1],r=i[3]):(i=Fa.datePattern.exec(e),i?(t.date=i[1],r=i[2]):(t.date=null,r=e)),r){var n=Fa.timeZone.exec(r);n?(t.time=r.replace(n[1],""),t.timeZone=n[1].trim()):t.time=r}return t}function tYe(e,t){var i=Fa.YYY[t],r=Fa.YYYYY[t],n;if(n=Fa.YYYY.exec(e)||r.exec(e),n){var s=n[1];return{year:parseInt(s,10),restDateString:e.slice(s.length)}}if(n=Fa.YY.exec(e)||i.exec(e),n){var a=n[1];return{year:parseInt(a,10)*100,restDateString:e.slice(a.length)}}return{year:null}}function iYe(e,t){if(t===null)return null;var i,r,n,s;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(i=Fa.MM.exec(e),i)return r=new Date(0),n=parseInt(i[1],10)-1,HW(t,n)?(r.setUTCFullYear(t,n),r):new Date(NaN);if(i=Fa.DDD.exec(e),i){r=new Date(0);var a=parseInt(i[1],10);return aYe(t,a)?(r.setUTCFullYear(t,0,a),r):new Date(NaN)}if(i=Fa.MMDD.exec(e),i){r=new Date(0),n=parseInt(i[1],10)-1;var o=parseInt(i[2],10);return HW(t,n,o)?(r.setUTCFullYear(t,n,o),r):new Date(NaN)}if(i=Fa.Www.exec(e),i)return s=parseInt(i[1],10)-1,GW(t,s)?FW(t,s):new Date(NaN);if(i=Fa.WwwD.exec(e),i){s=parseInt(i[1],10)-1;var l=parseInt(i[2],10)-1;return GW(t,s,l)?FW(t,s,l):new Date(NaN)}return null}function rYe(e){var t,i,r;if(t=Fa.HH.exec(e),t)return i=parseFloat(t[1].replace(",",".")),Y4(i)?i%24*X4:NaN;if(t=Fa.HHMM.exec(e),t)return i=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),Y4(i,r)?i%24*X4+r*UW:NaN;if(t=Fa.HHMMSS.exec(e),t){i=parseInt(t[1],10),r=parseInt(t[2],10);var n=parseFloat(t[3].replace(",","."));return Y4(i,r,n)?i%24*X4+r*UW+n*1e3:NaN}return null}function FW(e,t,i){t=t||0,i=i||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var n=r.getUTCDay()||7,s=t*7+i+1-n;return r.setUTCDate(r.getUTCDate()+s),r}var nYe=[31,28,31,30,31,30,31,31,30,31,30,31],sYe=[31,29,31,30,31,30,31,31,30,31,30,31];function Kne(e){return e%400===0||e%4===0&&e%100!==0}function HW(e,t,i){if(t<0||t>11)return!1;if(i!=null){if(i<1)return!1;var r=Kne(e);if(r&&i>sYe[t]||!r&&i>nYe[t])return!1}return!0}function aYe(e,t){if(t<1)return!1;var i=Kne(e);return!(i&&t>366||!i&&t>365)}function GW(e,t,i){return!(t<0||t>52||i!=null&&(i<0||i>6))}function Y4(e,t,i){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||i!=null&&(i<0||i>=60))}function oYe(e,t,i){var r=JXe(e,i),n=Qne(t,r,!0),s=new Date(r.getTime()-n),a=new Date(0);return a.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),a.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),a}function Wa(e,t){return t.color(e)}function WW(e=new Date,t){let i=t.format,r=e.getSeconds(),n=e;t&&t.timeZone!==null&&(n=oYe(new Date,t.timeZone));let s=n.getHours(),a=n.getMinutes(),o;t.format12h24h==="12ampm"&&(o=s>=12?"PM":"AM");let l=s;t.format12h24h!=="24"&&(l=s%12,l===0&&(l=12));let c,u;switch(i){case"HH:mm:ss":c=[l,a,r];break;case"HH:mm":c=[l,a];break;case"HH":c=[l],o=void 0;break;case"mm":c=[a],o=void 0;break;case"ss":c=[r],o=void 0;break;case"year":u=n.getFullYear();break;case"month":u=n.getMonth()+1;break;case"dayOfYear":u=Math.floor((n.getTime()-new Date(n.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":u=n.getDate();break;case"secondOfDay":u=s*60*60+a*60+r;break;default:console.error("Unknown time format",i),u=0;break}return c!==void 0?{textValue:c,suffix:o}:u}function lYe(e,t){switch(e.type){case"fresnel":return hYe(e,t);case"gradient":return dYe(e,t);case"depth":return fYe(e,t);case"normal":return pYe(e,t);case"noise":return mYe(e,t);case"rainbow":return gYe(e,t);case"toon":return vYe(e,t);case"outline":return yYe(e,t);case"transmission":return xYe(e,t);case"color":return uYe(e,t);case"pattern":return bYe(e,t)}}function cYe(e){return{type:e.type}}function yc(e,t){let{alpha:i,mode:r,isMask:n}=e,s=typeof i=="string"?(Number(t.getVariable(i))??100)/100:i;return{...cYe(e),alpha:s,mode:r,isMask:n}}function uYe(e,t){return{...yc(e,t),color:Wa(e.color,t)}}function hYe(e,t){let{bias:i,scale:r,intensity:n,factor:s,color:a}=e;return{...yc(e,t),color:Wa(a,t),bias:i,scale:r,intensity:n,factor:s}}function dYe(e,t){let{gradientType:i,smooth:r,colors:n,steps:s,angle:a,offset:o,morph:l}=e;return{...yc(e,t),gradientType:i,smooth:r,colors:n.map(c=>new ni(c[0],c[1],c[2],c[3])),num:n.length,steps:s,offset:new pe(...o),morph:new pe(...l),angle:a}}function fYe(e,t){let{gradientType:i,near:r,far:n,isVector:s,isWorldSpace:a,origin:o,direction:l,colors:c,steps:u,smooth:h}=e;return{...yc(e,t),gradientType:i,near:r,far:n,isVector:s,isWorldSpace:a,origin:new j(...o),direction:l?new j(...l):new j(1,0,0),colors:c.map(f=>f!==void 0?new ni(f[0],f[1],f[2],f[3]):new ni(0,0,0,0)),steps:u.slice(0,c.length),smooth:h}}function pYe(e,t){let{cnormal:i}=e;return{...yc(e,t),cnormal:new j(i[0],i[1],i[2])}}function mYe(e,t){return{...yc(e,t),scale:e.scale,move:e.move,fA:new pe(...e.fA),fB:new pe(...e.fB),size:new j(...e.size),distortion:new pe(...e.distortion),colorA:Wa(e.colorA,t),colorB:Wa(e.colorB,t),colorC:Wa(e.colorC,t),colorD:Wa(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function gYe(e,t){return{...yc(e,t),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new j(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new j(...e.offset)}}function vYe(e,t){return{...yc(e,t),positioning:e.positioning,colors:e.colors.map(i=>new ni(i[0],i[1],i[2],i[3])),num:e.colors.length,steps:e.steps,source:new j(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:Wa(e.shadowColor,t),offset:new j(...e.offset)}}function yYe(e,t){return{...yc(e,t),outlineColor:Wa(e.outlineColor,t),contourColor:Wa(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new j(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function xYe(e,t){return{...yc(e,t),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function bYe(e,t){return{...yc(e,t),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new pe(...e.offset),colorA:Wa(e.colorA,t),colorB:Wa(e.colorB,t),frequency:new pe(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new pe(...e.vertical),horizontal:new pe(...e.horizontal),sides:e.sides}}var DT=class extends sa{},wYe={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},SYe={depth:["colors"]};function _Ye(e,t,i){var s,a;if(t==="isMask")return!0;let r=wYe[e.type],n=SYe[e.type];if(n!==void 0){let o=e.color;if(n.includes(t)){let l=(a=(s=o[t])==null?void 0:s.value)==null?void 0:a.length;if(l!==void 0&&l!==i.length)return!0}}return r!==void 0?r.includes(t):!1}function Zne(e,t,i){let r=i.uniforms[`f${i.id}_texture`];if(!r)return!1;let n=!1,s=e;if("image"in s){let a=s.image,o=t.image(a),l=r;l.image instanceof $d||l.image.deref(),l.image=o}if("video"in s){let a=s.video,o=t.video(a),l=r;l.image instanceof $d||l.image.deref(),l.image=o}if("wrapping"in s){let a=r;a.wrap=s.wrapping}if("minFilter"in s){let a=r;a.minFilter=s.minFilter}if("magFilter"in s){let a=r;a.magFilter=s.magFilter}if("rotation"in s&&i.uniforms[`f${i.id}_rotation`])return i.uniforms[`f${i.id}_rotation`].value=(s.rotation??0)*wt.DEG2RAD,n;if("repeat"in s||"offset"in s||"rotation"in s){let a="mat",o=i.uniforms[`f${i.id}_${a}`];"repeat"in s&&(o.repeat=s.repeat),"offset"in s&&(o.offset=s.offset),"rotation"in s&&(o.rotation=s.rotation??0),o.updateMatrix()}return n}function EYe(e,t,i,r){let n=!1;for(let[s,a]of Object.entries(e)){if(s==="bumpMap"||s==="roughnessMap"){n=!0;continue}if(!s||a===void 0)continue;if(Jne(s,i,r,t)){s==="visible"&&i.type==="light"&&(n=!0);continue}i.visible=r.visible;let o=i.uniforms[`f${i.id}_${s}`];if(o&&!(o instanceof oz))switch(n=n||_Ye(i,s,a),o.constructor){case vn:if(typeof a=="string"){let l=t.getColor(a);l&&(o.value=l);break}else{let l=a;o.value instanceof DT?o.value=new sa(l.r,l.g,l.b,l.a):o.setRGBA(l);break}case Sh:if(typeof a=="string"){let l=t.getColor(a);l&&(o.value=l);break}else{let l=a;o.value instanceof DT?o.value=new sa(l.r,l.g,l.b,l.a):o.value.setRGBA(l.r,l.g,l.b,l.a);break}case Xs:{let l=a;o.value.setX(l[0]),o.value.setY(l[1]);break}case cl:{let l=a;o.value.setX(l[0]),o.value.setY(l[1]),o.value.setZ(l[2]);break}case Mh:{Zne(a,t,i);break}case Vp:{o.value=a.map(l=>new ni(...l));break}default:{o.value=a;break}}}return n}var Om=(e,t,i)=>Math.max(0,Math.min(1,Number(t.getVariable(typeof e=="number"?e*100:e,i)??100)/100))??1,Pw=class{constructor(e,t,i,r,n){this.id=e,this.uuid=t,this.data=i,this.uniforms={};for(let s in r)this.uniforms[`f${this.id}_${s}`]=r[s];for(let s in i)Jne(s,this,i,n)}get type(){return this.data.type}static create(e,t,i,r){if(i.type==="light")return Kc.createLightLayer(e,t,i,r);if(i.type==="texture"||i.type==="video"){let n=i.type==="texture"?r.uiBuffer(i.texture.image)??r.image(i.texture.image):r.video(i.texture.video),s=new CO(n,i.texture.wrapping,i.texture.minFilter??1008,i.texture.magFilter??1006),a=new TXe(n),o=new CXe(i.texture.repeat,i.texture.offset,i.texture.rotation??0),l=new Et(i.crop?1:0),c=new Dr(i.projection??0),u=new Dr(["x","y","z"].indexOf(i.axis)??0),h=new Dr(i.side??0),f=new Xs(i.size?new pe(i.size[0],i.size[1]):new pe(100,100)),m=new Et(i.blending??0),g=new Et(Om(i.alpha,r)),v=new Dr(i.mode??0),x=new Ua(i.isMask??!1),b=new lz(s,a,l,c,u,h,f,m,o,g,v,x),S=new Nr(b.calpha,"f");return new fn(e,t,i,{texture:s,textureSize:a,crop:l,projection:c,axis:u,side:h,size:f,blending:m,mat:o,alpha:g,mode:v,isMask:x},b,v,S,x,r)}else if(i.type==="matcap"){let n=r.image(i.texture.image),s=new CO(n,i.texture.wrapping,i.texture.minFilter??1008,i.texture.magFilter??1006),a=new Et(Om(i.alpha,r)),o=new Dr(i.mode??0),l=new Ua(i.isMask??!1),c=new Et((i.texture.rotation??0)*wt.DEG2RAD),u=new One(s,a,o,l,c),h=new Nr(u.calpha,"f");return new fn(e,t,i,{texture:s,alpha:a,mode:o,isMask:l,rotation:c},u,o,h,l,r)}else if(i.type==="displace")if(i.displacementType==="noise"){let n=new cl(new j(...i.offset)),s=new Et(i.scale??10),a=new Et(i.intensity??8),o=new Et(i.movement??1),l=new Dr(i.noiseType??0),c=new Dr(i.voronoiStyle??0),u=new Et(i.smoothness??.5),h=new Et(i.seed??0),f=new Et(i.highCut??1),m=new Et(i.lowCut??0),g=new Dr(i.quality??1),v=new Wne(a,o,n,c,u,h,f,m,g,s,l);return new $ne(e,t,i,{offset:n,scale:s,intensity:a,movement:o,noiseType:l,voronoiStyle:c,smoothness:u,seed:h,highCut:f,lowCut:m,quality:g},v,r)}else throw new Error;else return CYe(e,t,i,r)}updateByOp(e,t,i){let r=e;if(r.path[0]===void 0){if(r.type===0)return"type"in r.props||"category"in r.props||"visible"in r.props||"noiseType"in r.props?(i.scene.markNeedsUpdateRendererDirty(),!0):EYe(r.props,i.shared,this,t)}else if(r.path[0]==="texture")return"texture"in t||"video"in t?Zne(r.props,i.shared,this):!0;return!1}dispose(){if(AYe(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof $d||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let i=`f${this.id}_${e}`;this.hasValueByKey(i)&&t!==void 0&&(this.uniforms[i].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let i=this.getName(t);i&&e.push(i)}return e}},fn=class extends Pw{constructor(e,t,i,r,n,s,a,o,l){super(e,t,i,r,l),this.params=r,this.color=n,this.mode=s,this.alpha=a,this.isMask=o}},$ne=class extends Pw{constructor(e,t,i,r,n,s){super(e,t,i,r,s),this.position=n}},Kc=class extends Pw{constructor(e,t,i,r,n,s){super(e,t,i,n,s),this.node=r}static createLightLayer(e,t,i,r){let n,s=new Et(Om(i.alpha,r)),a=new Dr(i.mode),o=new Et(i.bumpMapIntensity),l=new Et(Om(i.alphaOverride,r)),c;if(!i.visible)n=new cz,c={};else if(i.category==="lambert"){n=new IXe;let u=new vn(r.color(i.emissive)??0),h=new Ua(i.occlusion??!0);c={emissive:u,occlusion:h},n.emissive=u,n.occlusion=h}else if(i.category==="toon"){n=new LXe;let u=new Et(i.shininess??30),h=new vn(r.color(i.specular)??1118481);c={shininess:u,specular:h},n.shininess=u,n.specular=h}else if(i.category==="physical"){n=new OXe;let u=new Et(i.roughness??.3),h=new Et(i.metalness??0),f=new Et(i.reflectivity??.5),m=new Ua(i.occlusion??!0);c={roughness:u,metalness:h,reflectivity:f,occlusion:m},n.roughness=u,n.metalness=h,n.reflectivity=f,n.occlusion=m}else{n=new RXe;let u=new Et(i.shininess??30),h=new vn(i.specular!==void 0?r.color(i.specular)??1118481:1118481),f=new Ua(i.occlusion??!0);c={shininess:u,specular:h,occlusion:f},n.shininess=u,n.specular=h,n.occlusion=f}return n.alpha=new Et(1),n.shadingAlpha=s,n.shadingBlend=a,n.bumpMapIntensity=o,n.alphaOverride=l,c.alpha=n.shadingAlpha,c.mode=n.shadingBlend,c.bumpMapIntensity=n.bumpMapIntensity,c.alphaOverride=n.alphaOverride,new Kc(e,t,i,n,c,r)}get category(){return this.node.category}};function AYe(e){let t=e instanceof Pw?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function nl(e){return{alpha:new Et(e.alpha??1),mode:new Dr(e.mode??0),isMask:new Ua(e.isMask??!1)}}function TYe(e,t,i,r,n){switch(e.type){case"color":{let s=new vn(r.color??Fo),a=nl(r),o=new MO(s,a.alpha),l=new Nr(o.calpha,"f");return new fn(t,i,e,{color:s,...a},o,a.mode,l,a.isMask,n)}case"fresnel":{let s=new vn(r.color??16777215),a=new Et(r.bias??.1),o=new Et(r.scale??1),l=new Et(r.intensity??2),c=new Et(r.factor??1),u=nl(r),h=new MXe(s,a,o,l,c,u.alpha,u.mode,u.isMask),f=new Nr(h.calpha,"f");return new fn(t,i,e,{color:s,bias:a,scale:o,intensity:l,factor:c,...u},h,u.mode,f,u.isMask,n)}case"rainbow":{let s=new Et(r.filmThickness??30),a=new Et(r.movement??0),o=new cl(r.wavelengths??new j(0,0,0)),l=new Et(r.noiseStrength??0),c=new Et(r.noiseScale??1),u=new cl(r.offset??new j(0,0,0)),h=nl(r),f=new Nne(s,a,o,l,c,u,h.alpha,h.isMask),m=new Nr(f.calpha,"f");return new fn(t,i,e,{filmThickness:s,movement:a,wavelengths:o,noiseStrength:l,noiseScale:c,offset:u,...h},f,h.mode,m,h.isMask,n)}case"transmission":{let s=new Et(r.thickness??10),a=new Et(r.ior??1.5),o=new Et(r.roughness??.5),l=Qt.transmissionSize,c=Qt.transmissionRenderTarget,u=Qt.transmissionRenderTargetDepth,h=window.innerWidth,f=window.innerHeight,m=h>=f?new Xs(f/h,1):new Xs(1,h/f),g=nl(r),v=new Hne(s,a,o,l,c,u,m,g.alpha),x=new Nr(v.calpha,"f");return new fn(t,i,e,{thickness:s,ior:a,roughness:o,aspectRatio:m,...g},v,g.mode,x,g.isMask,n)}case"toon":{let s=new Dr(r.positioning??0),a;r.colors?a=new Vp(r.colors.length,r.colors):(a=new Vp(10,new ni(0,0,0,1)),a.value[1]=new ni(1,1,1,1));let o;r.steps?o=new Np(r.steps.length,r.steps):(o=new Np(10,1),o.value[0]=0);let l=new cl(r.source??new j(0,0,0)),c=new Ua(r.isWorldSpace??!0),u=new Et(r.noiseStrength??0),h=new Et(r.noiseScale??1),f=new Sh(r.shadowColor),m=new cl(r.offset??new j(0,0,0)),g=nl(r),v=new Une(s,a,o,l,c,u,h,f,m,g.alpha),x=new Nr(v.calpha,"f");return new fn(t,i,e,{positioning:s,colors:a,steps:o,source:l,isWorldSpace:c,noiseStrength:u,noiseScale:h,shadowColor:f,offset:m,...g},v,g.mode,x,g.isMask,n)}case"outline":{let s=new vn(r.outlineColor??16777215),a=new vn(r.contourColor??16777215),o=new Et(r.outlineWidth??.1),l=new Et(r.contourWidth??.1),c=new Et(r.outlineThreshold??.1),u=new Et(r.contourThreshold??.1),h=new Et(r.outlineSmoothing??.1),f=new Et(r.contourFrequency??.1),m=new cl(r.contourDirection??new j(0,1,0)),g=new Ua(r.positionalLines??!1),v=new Ua(r.compensation??!0),x=Qt.normalRenderTarget,b=Qt.normalRenderTargetDepth,S=Qt.pixelRatioNode,_=Qt.resolution,A=nl(r),M=new zne(s,a,o,l,c,u,h,f,m,g,v,_,x,b,S,A.alpha),C=new Nr(M.calpha,"f");return new fn(t,i,e,{outlineColor:s,contourColor:a,outlineWidth:o,contourWidth:l,outlineThreshold:c,contourThreshold:u,outlineSmoothing:h,contourFrequency:f,contourDirection:m,positionalLines:g,compensation:v,...A},M,A.mode,C,A.isMask,n)}case"depth":{let s=new Dr(r.gradientType??0),a=new Ua(r.smooth??!1),o=new Et(r.near??50),l=new Et(r.far??200),c=new Et(r.isVector??1),u=new Et(r.isWorldSpace??0),h=new cl(r.origin??new j),f=new cl(r.direction??new j),m;r.colors?m=new Vp(r.colors.length,r.colors):(m=new Vp(2,new ni(0,0,0,1)),m.value[1]=new ni(1,1,1,1));let g;r.steps?g=new Np(r.steps.length,r.steps):(g=new Np(2,1),g.value[0]=0);let v=nl(r),x=new Pne(s,a,o,l,c,u,h,f,m,g,v.alpha,v.isMask),b=new Nr(x.calpha,"f");return new fn(t,i,e,{gradientType:s,smooth:a,near:o,far:l,isVector:c,isWorldSpace:u,origin:h,direction:f,colors:m,steps:g,...v},x,v.mode,b,v.isMask,n)}case"noise":{let s=new Et(r.scale??1),a=new cl(r.size??new j(100,100,100)),o=new Et(r.move??1),l=new Xs(r.fA??new pe(1.7,9.2)),c=new Xs(r.fB??new pe(8.3,2.8)),u=new Xs(r.distortion??new pe(1,1)),h=new Sh(r.colorA),f=new Sh(r.colorB),m=new Sh(r.colorC),g=new Sh(r.colorD),v=new Dr(r.noiseType??0),x=new Dr(r.voronoiStyle??0),b=new Et(r.highCut??1),S=new Et(r.lowCut??0),_=new Et(r.smoothness??.5),A=new Et(r.seed??.5),M=new Dr(r.quality??1),C=nl(r),D=new Lne(s,a,o,l,c,u,h,f,m,g,C.alpha,v,C.isMask,x,b,S,_,A,M),T=new Nr(D.calpha,"f");return new fn(t,i,e,{scale:s,size:a,move:o,fA:l,fB:c,distortion:u,colorA:h,colorB:f,colorC:m,colorD:g,noiseType:v,...C,voronoiStyle:x,highCut:b,lowCut:S,smoothness:_,seed:A,quality:M},D,C.mode,T,C.isMask,n)}case"normal":{let s=new cl(r.cnormal??new j(1,1,1)),a=nl(r),o=new Mne(s,a.alpha),l=new Nr(o.calpha,"f");return new fn(t,i,e,{cnormal:s,...a},o,a.mode,l,a.isMask,n)}case"gradient":{let s=new Dr(r.gradientType??0),a=new Ua(r.smooth??!1),o;r.colors?o=new Vp(r.colors.length,r.colors):(o=new Vp(10,new ni(0,0,0,1)),o.value[1]=new ni(1,1,1,1));let l;r.steps?l=new Np(r.steps.length,r.steps):(l=new Np(10,1),l.value[0]=0);let c=new Xs(r.offset??new pe(0,0)),u=new Xs(r.morph??new pe(0,0)),h=new Et(r.angle??0),f=nl(r),m=new Ine(s,a,o,l,c,u,h,f.alpha,f.isMask),g=new Nr(m.calpha,"f");return new fn(t,i,e,{gradientType:s,smooth:a,colors:o,steps:l,offset:c,morph:u,angle:h,...f},m,f.mode,g,f.isMask,n)}case"pattern":{let s=new Dr(r.style??0),a=new Dr(r.projection??0),o=new Dr(["x","y","z"].indexOf(r.axis)??0),l=new Et(r.blending??0),c=new Xs(r.offset??new pe(0,0)),u=new Sh(r.colorA),h=new Sh(r.colorB),f=new Xs(r.frequency??new pe(10,10)),m=new Et(r.size??.5),g=new Et(r.variation??0),v=new Et(r.smoothness??.5),x=new Et(r.zigzag??0),b=new Et(r.rotation??0),S=new Xs(r.vertical??new pe(0,1)),_=new Xs(r.horizontal??new pe(0,1)),A=new Dr(r.sides??6),M=nl(r),C=new Bne(s,a,o,l,c,u,h,f,m,g,v,x,b,S,_,A,M.alpha,M.isMask),D=new Nr(C.calpha,"f");return new fn(t,i,e,{style:s,projection:a,axis:o,blending:l,offset:c,colorA:u,colorB:h,frequency:f,size:m,variation:g,smoothness:v,zigzag:x,rotation:b,vertical:S,horizontal:_,sides:A,...M},C,M.mode,D,M.isMask,n)}default:{let s=new vn(1,0,0,1),a=nl(r),o=new MO(s,a.alpha),l=new Nr(o.calpha,"f");return new fn(t,i,e,{color:s,...a},o,a.mode,l,a.isMask,n)}}}function CYe(e,t,i,r){let n=lYe(i,r);return TYe(i,e,t,n,r)}function Jne(e,t,i,r){if(i.type==="displace"&&(e==="intensity"||e==="visible")){let n=t.uniforms[`f${t.id}_intensity`];return n?(n.value=i.intensity*(i.visible?1:0),n):void 0}if(i.type!=="displace"&&(e==="alpha"||e==="visible")){let n=t.uniforms[`f${t.id}_alpha`];if(!n)return;if(n.value=Om(i.alpha,r)*(i.visible?1:0),i.type==="outline"&&e==="visible"){let s=t.uniforms[`f${t.id}_compensation`];s&&(s.value=i.compensation&&i.visible)}return n}}function q0(e,t){let i=0,r=e.layers.find(n=>n.data.type==="light");if(r){let n=r.data,s=Number(t.getVariable(n.alphaOverride));if((typeof n.alphaOverride=="string"?s/100:n.alphaOverride)<1)return!0}for(let n of e.layers){if(n.data.type!=="displace"&&n.data.isMask)return!0;if(n.data.type!=="displace"&&"alpha"in n.data&&n.data.type!=="light"&&n.data.type!=="fresnel"&&n.data.type!=="texture"&&n.data.type!=="matcap"&&n.data.type!=="rainbow"&&n.data.type!=="outline"&&n.data.type!=="pattern"){let s=n.data.visible?n.data.alpha:0;if(typeof s=="string"&&(s=Math.max(0,Math.min(1,Number(t.getVariable(s)??100)/100))),s===1&&n.data.type==="depth"||n.data.type==="gradient"){for(let a of n.data.colors)if(a[3]<1){s=a[3];break}}else if(s===1&&n.data.type==="noise"){let a=t.color(n.data.colorA).a,o=t.color(n.data.colorB).a,l=t.color(n.data.colorC).a,c=t.color(n.data.colorD).a,u=Math.min(a,Math.min(o,Math.min(l,c)));u<1&&(s=u)}i+=(1-i)*s}}return i<1}var jf=class extends Vi{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.shadersPatchedForShapeBlend=!1,this.nodeContextUuid=0,this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return""}},MYe=class extends jf{constructor(e,t,i,r){super(),this.flatShading=e,this.side=t,this.wireframe=i,this.root=r}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,Object.assign(this.defines,e.defines),Object.assign(this.uniforms,e.uniforms),this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,i,r){return this.root.getFlavor(e,t,i,r)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,i){this.root.updateByOp(e,t,i)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},uz=class extends jf{constructor(e,t,i=!0){super(),this.data=e,this.allowVariableSaves=i,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.needsJitter=t.shared.needsJitter,ns.startContext(this),this.reset0(e,t),ns.endContext(this)}get nodeMaterial(){return this}getFlavor(e,t,i,r){let n=i?6:(e?3:0)+t;if(n+=(((r==null?void 0:r.resolutionLevel)??0)-(r!=null&&r.useChildrenColors?4:0))*7,n===0)return this;this.flavors===void 0&&(this.flavors=[]),n-=1;let s=this.flavors[n];return s===void 0&&(s=new MYe(e,t,i,this),s.needsJitter=this.needsJitter,this.flavors[n]=s,s.flatShading=e,s.side=t,s.updateAfterBuild(),r&&(s.defines.SHAPEBLEND=r.resolutionLevel,s.defines.SHAPEBLEND_C=r.useChildrenColors?1:0)),s}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,t,i=!1){ns.startContext(this),(this.data!==e||i)&&this.reset0(e,t),ns.endContext(this)}reset0(e,t){this.data=e;let i=e.layers??Ms.defaultTwoLayerData("phong").layers;try{this.layers=i.map(r=>Pw.create(this.layerIdGen++,r.id,r.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(t.shared),this.transparent=q0(e,t.shared),this.saveVariableLocations(t)}onVariableUpdate(e,t,i){if(e[0]==="alphaOverride")this.transparent=q0(this.data,i.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(t)/100,1)));else if(e[0]==="layer"){let r=e[1],n=e[2];if(r&&n){let s=this.layers.find(a=>a.uuid===r);s!=null&&s.hasValue(n)&&(n==="alpha"?(this.transparent=q0(this.data,i.shared),s.setValue(n,Math.max(0,Math.min(Number(t)/100,1)))):s.setValue(n,t))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find(i=>i.data.type==="light");t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(i=>{"alpha"in i.data&&typeof i.data.alpha=="string"&&e.shared.getVariable(i.data.alpha,["material",this.uuid,"layer",i.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.lightLayer=this.layers.find(t=>t instanceof Kc),this.lightLayer===void 0&&(this.lightLayer=new Kc(0,"",{..._s.defaultData("light","phong"),visible:!1},new cz,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.build(),this.nodeContextUuid=0}applyTextureMaps(){let e=this.layers.find(n=>n instanceof Kc);if(!e)return;let t=e.data,i=t.bumpMap,r=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let n=0;n<this.layers.length;++n){let s=this.layers[n];s instanceof fn&&s.color instanceof lz&&(s.uuid===i&&(e.node.bumpMap=s.color),s.uuid===r&&(e.node.roughnessMap=s.color))}}updateByOp(e,t,i){if(ns.startContext(this),t!==void 0?this.data=t:t=this.data,this.transparent=q0(t,i.shared),e.path[0]==="layers"){let r=i.shared,n=e.path[1];if(n===void 0)i.scene.markNeedsUpdateRendererDirty(),this.reset0(t,i);else{e.type===0&&e.props.occlusion!==void 0&&i.scene.markNeedsUpdateRendererDirty();let s=this.layers.find(a=>a.uuid===n);if(s){let a=t.layers.data(n),o;e.type===0&&("alpha"in e.props||"alphaOverride"in e.props)&&("alpha"in e.props?o={...e.props,alpha:Om(e.props.alpha,r,["material",this.uuid,"layer",n,"alpha"])}:o={...e.props,alphaOverride:Om(e.props.alphaOverride,r,["material",this.uuid,"alphaOverride"])}),s.updateByOp({...e,...o?{props:o}:{},path:e.path.slice(2)},a,i)&&this.reset0(t,i)}}}else this.reset0(t,i);ns.endContext(this)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof fn?t.color.mask=void 0:t instanceof Kc&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof fn&&t.isMask.value&&t.data.visible&&e>0){let i=e-1,r=this.layers[i];r instanceof Kc?r.node.mask=new so(t.color,t.alpha,so.MUL):r instanceof fn&&(r.isMask.value||(r.color.mask=new so(t.color,t.alpha,so.MUL)))}}}blendColors(){let e=this.layers.findIndex(i=>i instanceof fn),t=this.layers.findIndex(i=>i instanceof Kc);if(e!==-1&&e<t){let i=this.layers[e].color;for(let r=e+1;r<t;++r){let n=this.layers[r];if(n instanceof fn){if(n.isMask.value)continue;i=new zW(i,n.color,n.alpha,n.mode)}}this.fragment.color=i}else this.fragment.color=void 0}blendAfterColors(){let e=new Nr("outgoingLight","f"),t=this.layers.findIndex(i=>i instanceof Kc);if(this.layers.length>t+1){for(let i=t+1;i<this.layers.length;++i){let r=this.layers[i];if(r instanceof fn){if(r.isMask.value)continue;e=new zW(e,r.color,r.alpha,r.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof $ne);if(e.length>0){let t=e[0].position;for(let i=1;i<e.length;++i)e[i]&&(t=new so(t,e[i].position,so.ADD),t=new so(t,new Et(.5).setReadonly(!0),so.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.shapeBlendhack&&this.shapeBlendhack(this),e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let i=(r,n,s)=>Math.min(Math.max(r,n),s);for(let r of this.layers)if(r.type==="displace"){let n=i(r.uniforms[`f${r.id}_intensity`].value,e,t);r.uniforms[`f${r.id}_intensity`].value=n}}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new Ene;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this.shadersPatchedForShapeBlend=!1,this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof fn){let t=e.params.texture;if(t instanceof CO&&!t.image.loaded)return!1}return!0}};Object.defineProperties(jf.prototype,{properties:{get:function(){return this.fragment.properties}}});var IO=class extends uz{constructor(e,t,i){super(e,t,!1),this.uuid=i,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},qW=new Map;function PYe(e){if(typeof e=="string")return e;let t=qW.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},qW.set(e,t)),t.url}var ese,DYe=new Promise(e=>{ese=e}),XW=!1,V_;function IYe(){if(XW)return;if(V_)return V_;async function e(){await gc(()=>import("./howler-DKMCOhZN.js").then(t=>t.h),[]),ese(window!==void 0?window:global),XW=!0}return V_=e(),V_}var tse;DYe.then(e=>tse=e);function YW(e,t){e.forEach(i=>{"dragDropActions"in i.data?(t.push(...i.data.dragDropActions.drag),t.push(...i.data.dragDropActions.drop)):"inActions"in i.data?(t.push(...i.data.inActions),t.push(...i.data.outActions)):"gameActions"in i.data?(t.push(...i.data.gameActions.idle),t.push(...i.data.gameActions.move),t.push(...i.data.gameActions.jump),t.push(...i.data.gameActions.run)):"breakpoints"in i.data?i.data.breakpoints.forEach(r=>{t.push(...r.data.actions)}):"actions"in i.data&&(t.push(...i.data.actions),i.data.actions.forEach(r=>{r.data.type==="Conditional"&&r.data.ifActions&&(t.push(...r.data.ifActions),t.push(...r.data.elseActions))}))})}function RYe(e){let t=!1,i=[];return e.scene.objects.traverse((r,n)=>{if(n.type==="Page"&&n.uiScene!==void 0&&n.uiScene.objects.traverse((s,a)=>{if(a.events===void 0||Array.isArray(a.events)===!1)return!0;YW(a.events,i),t=t||i.some(o=>o.data.type==="Audio")}),n.events===void 0||Array.isArray(n.events)===!1)return!0;YW(n.events,i),t=t||i.some(s=>s.data.type==="Audio")}),t}var wx=class{constructor({src:e,volume:t,delay:i,loop:r}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let n;typeof e=="string"?n={src:e}:n={src:PYe(e),format:"wav"},this.sound=new tse.Howl(n),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),i!==void 0&&(this.delay=i),r!==void 0&&(this.loop=r)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,i){this.sound.on(e,t,i)}off(e,t,i){this.sound.off(e,t,i)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},OYe=class{constructor(){this.type="ShapePath",this.color=new qt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new GA,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var i;return(i=this.currentPath)==null||i.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){var n;return(n=this.currentPath)==null||n.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,n,s){var a;return(a=this.currentPath)==null||a.bezierCurveTo(e,t,i,r,n,s),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function i(m,g,v,x){let b=m.x,S=g.x,_=v.x,A=x.x,M=m.y,C=g.y,D=v.y,T=x.y,R=(A-_)*(M-D)-(T-D)*(b-_),O=(S-b)*(M-D)-(C-M)*(b-_),L=(T-D)*(S-b)-(A-_)*(C-M),k=R/L,B=O/L;if(L===0&&R!==0||k<=0||k>=1||B<0||B>1)return null;if(R===0&&L===0){for(let V=0;V<2;V++)if(r(V===0?v:x,m,g),t.loc===e.ORIGIN){let $=V===0?v:x;return{x:$.x,y:$.y,t:t.t}}else if(t.loc===e.BETWEEN){let $=+(b+t.t*(S-b)).toPrecision(10),q=+(M+t.t*(C-M)).toPrecision(10);return{x:$,y:q,t:t.t}}return null}else{for(let q=0;q<2;q++)if(r(q===0?v:x,m,g),t.loc===e.ORIGIN){let Y=q===0?v:x;return{x:Y.x,y:Y.y,t:t.t}}let V=+(b+k*(S-b)).toPrecision(10),$=+(M+k*(C-M)).toPrecision(10);return{x:V,y:$,t:k}}}function r(m,g,v){let x=v.x-g.x,b=v.y-g.y,S=m.x-g.x,_=m.y-g.y,A=x*_-S*b;if(m.x===g.x&&m.y===g.y){t.loc=e.ORIGIN,t.t=0;return}if(m.x===v.x&&m.y===v.y){t.loc=e.DESTINATION,t.t=1;return}if(A<-Number.EPSILON){t.loc=e.LEFT;return}if(A>Number.EPSILON){t.loc=e.RIGHT;return}if(x*S<0||b*_<0){t.loc=e.BEHIND;return}if(Math.sqrt(x*x+b*b)<Math.sqrt(S*S+_*_)){t.loc=e.BEYOND;return}let M;x!==0?M=S/x:M=_/b,t.loc=e.BETWEEN,t.t=M}function n(m,g){let v=[],x=[];for(let b=1;b<m.length;b++){let S=m[b-1],_=m[b];for(let A=1;A<g.length;A++){let M=g[A-1],C=g[A],D=i(S,_,M,C);D!==null&&v.find(T=>T.t<=D.t+Number.EPSILON&&T.t>=D.t-Number.EPSILON)===void 0&&(v.push(D),x.push(new pe(D.x,D.y)))}}return x}function s(m,g,v){let x=new pe;g.getCenter(x);let b=[];return v.forEach(S=>{S.boundingBox.containsPoint(x)&&n(m,S.points).forEach(_=>{b.push({identifier:S.identifier,isCW:S.isCW,point:_})})}),b.sort((S,_)=>S.point.x-_.point.x),b}function a(m,g,v,x,b){(b==null||b==="")&&(b="nonzero");let S=new pe;m.boundingBox.getCenter(S);let _=[new pe(v,S.y),new pe(x,S.y)],A=s(_,m.boundingBox,g);A.sort((O,L)=>O.point.x-L.point.x);let M=[],C=[];A.forEach(O=>{O.identifier===m.identifier?M.push(O):C.push(O)});let D=M[0].point.x,T=[],R=0;for(;R<C.length&&C[R].point.x<D;)T.length>0&&T[T.length-1]===C[R].identifier?T.pop():T.push(C[R].identifier),R++;if(T.push(m.identifier),b==="evenodd"){let O=T.length%2===0,L=T[T.length-2];return{identifier:m.identifier,isHole:O,for:L}}else if(b==="nonzero"){let O=!0,L=null,k=null;for(let B=0;B<T.length;B++){let V=T[B];g[V]&&(O?(k=g[V].isCW,O=!1,L=V):k!==g[V].isCW&&(k=g[V].isCW,O=!0))}return{identifier:m.identifier,isHole:O,for:L}}else console.warn('fill-rule: "'+b+'" is currently not implemented.')}let o=0,l=999999999,c=-999999999,u=[];this.subPaths.forEach(m=>{let g=m.getPoints(),v=-999999999,x=999999999,b=-999999999,S=999999999;for(let _=0;_<g.length;_++){let A=g[_];A.y>v&&(v=A.y),A.y<x&&(x=A.y),A.x>b&&(b=A.x),A.x<S&&(S=A.x)}c<=b&&(c=b+1),l>=S&&(l=S-1),g.length&&u.push({curves:m.curves,points:g,isCW:rie.isClockWise(g),identifier:o++,boundingBox:new wk(new pe(S,x),new pe(b,v))})});let h=u.map(m=>{var g;return a(m,u,l,c,(g=this.userData)==null?void 0:g.style.fillRule)}),f=[];return u.forEach(m=>{let g=h[m.identifier];if(g&&!g.isHole){let v=new WA;v.curves=m.curves,h.filter(x=>(x==null?void 0:x.isHole)&&x.for===m.identifier).forEach(x=>{if(x){let b=u[x.identifier],S=new GA;S.curves=b.curves,v.holes.push(S)}}),f.push(v)}}),f}},ise=!1,rse,QW=new Promise(e=>{rse=e}),KW=!1,U_;function LYe(){if(ise=!0,KW)return;if(U_)return U_;async function e(){let t=await gc(()=>import("./opentype-LDE648lb.js"),[]);rse(t),KW=!0}return U_=e(),U_}var kYe=class{async load(e,t,i=()=>{}){let{load:r}=await QW;r(e,(n,s)=>{n||!s?i(n??"Something went wrong"):t(s)})}async parse(e){let{parse:t,Bidi:i}=await QW;try{let r=t(e),n=new i,s=a=>r.charToGlyphIndex(a.char);return n.registerModifier("glyphIndex",null,s),n.applyFeatures(r,r.defaultRenderOptions.features),{font:r,bidi:n}}catch(r){console.error(r)}}};async function zYe(e){return await(await fetch(e)).arrayBuffer()}var BYe=new kYe;async function ZW(e){let t,i,r=!1;if(e.url?(t=await zYe(e.url),i=e.url,r=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t)if(ise){let n=await BYe.parse(t);if(n)return{font:n.font,url:i,intercepted:r,arr:t,bidi:n.bidi}}else return{font:void 0,url:i,intercepted:r,arr:t,bidi:null}}function jYe(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var NYe=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=ZW(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=ZW(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,i){if(!this._bidi)return[];let r=this._bidi;r.getTextGlyphs(t);let n=r.tokenizer.tokens,s=[],a=0,o=i.length===n.length;for(let l=0;l<i.length;l++){let c=i[l].index,u=String.fromCharCode(i[l].unicode),h=n[a];if(jYe(c,h)||o)s.push({char:u,index:c,replacements:[h.state.glyphIndex],replacementChars:[h.char]}),a++;else{let f=h.char,m="",g=[h.state.glyphIndex],v=[],x=!1;for(;!x;)a++,m=t.charAt(a),f+=m,g.push(e.charToGlyphIndex(m)),v=e.stringToGlyphs(f),v.length===1&&v[0].index===c&&(x=!0),a>t.length&&(x=!0);s.push({char:u,index:c,replacements:g,replacementChars:Array.from(f)}),a++}}return s}generateShapes(e,t){if(!this._isLoaded)return;let i=this.font,r=t.fontSize/this.unitsPerEm,n=t.fontSize*t.lineHeight,s=e.map(b=>this.getTextWidth(b,t)),a=t.width,o=this.getCharWidth(`
`,t),l=t.horizontalAlign===1?o:0,c=this.computeSpaceWidthForLine(e,0,t),u=this.getLineInitialOffsetX(s[0],a,t.horizontalAlign,e[0],o),h=this.getLineInitialOffsetY(n,e.length,t.height,r,t.verticalAlign),f=[],m=e.map(b=>[]),g=e.map(b=>[]),v;for(let b=0;b<e.length;b++){let S=e[b],_={features:{liga:!0}},A=[];try{A=i.stringToGlyphs(S,_)}catch(C){console.warn(C)}u=this.getLineInitialOffsetX(s[b],a,t.horizontalAlign,S,o);let M=[];try{M=this.reverseLigaturesTable(i,S,A)}catch(C){console.warn(C)}c=this.computeSpaceWidthForLine(e,b,t);for(let C=0;C<A.length;C++){let D=A[C],T=D.index===0?`
`:D.unicode?String.fromCharCode(D.unicode):void 0,R=M[C],O=0,L=0;C===0&&t.horizontalAlign===2&&D.leftSideBearing!==void 0&&(L=-D.leftSideBearing*r),v&&(O=i.getKerningValue(D,v)*r),u+=L+O;let k=0;if(T===`
`)k=l;else if(T===" ")k=c;else{let B=this.createPath(D,r,u,h,t);B&&(k=B.offsetX-(O+L),f.push(B.path))}if(R.replacements.length===1)g[b].push([u,h]),m[b].push(k);else{let B=R.replacements.map(Y=>(i.glyphs.get(Y).advanceWidth??0)*r),V=B.reduce((Y,X)=>Y+=X,0),$=B.map(Y=>Y/V),q=u;for(let Y=0;Y<$.length;Y++){let X=k*$[Y];g[b].push([q,h]),m[b].push(X),q+=X}}u+=k,v=D}h-=n}let x=[];for(let b=0,S=f.length;b<S;b++)x.push(...f[b].toShapes());return{shapes:x,charWidths:m,lineWidths:s,charCoords:g}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,t,i,r,n){return(i===3||i===2)&&r.indexOf(`
`)>=0&&(e-=n),i===3?t*.5-e*.5:i===2?t-e:0}getLineInitialOffsetY(e,t,i,r,n){let s=t*e,a=Math.abs(this.ascender-this.descender)*r,o=e-a,l=-this.ascender*r-o/2;return n===3?-(i-s-l):n===2?-(i*.5-s*.5-l):l}createPath(e,t,i,r,n){var l;let s=e.getPath(i,-r,n.fontSize,{kerning:!1,letterSpacing:n.letterSpacing});if(!s){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let a=new OYe,o=(e.advanceWidth??1)*t;if(e)for(let c of s.commands){let u=(l=a.currentPath)==null?void 0:l.currentPoint;if(!(u&&c.type!=="Z"&&u.x===c.x&&-u.y===c.y))switch(c.type){case"M":a.moveTo(c.x,-c.y);break;case"L":a.lineTo(c.x,-c.y);break;case"Q":a.quadraticCurveTo(c.x1,-c.y1,c.x,-c.y);break;case"C":a.bezierCurveTo(c.x1,-c.y1,c.x2,-c.y2,c.x,-c.y);break}}return a.subPaths.forEach(c=>{let u=VYe(c.curves);u!==void 0&&c.currentPoint.distanceTo(u)>0&&c.lineTo(u.x,u.y)}),{offsetX:o+n.fontSize*n.letterSpacing,path:a}}getCharWidth(e,t){var i;return((i=this.font)==null?void 0:i.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}getTextWidth(e,t){var i;return((i=this.font)==null?void 0:i.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}computeSpaceWidthForLine(e,t,i){let r=this.getCharWidth(" ",i),n=e[t];if(n){let s=this.countSpaces(n.trimEnd());if(i.horizontalAlign===4&&t<e.length-1&&s){let a=i.width,o=this.getTextWidth(n,i);return(a-(o-s*r))/s}}return r}countSpaces(e){return(e.match(/ /g)||[]).length}};function VYe(e){if(e.length){let t=e[0];if(t instanceof nc)return t.v1;if(t instanceof Zl||t instanceof zf)return t.v0}}var UYe=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,i){let r=this.objects.get(e);return r===void 0?(r=this.createObject(e,t,i),this.objects.set(e,r)):r.isShared=!0,r}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let i=this.objects.get(e);if(i&&i.isShared!==!0)return this.objects.delete(e),this.objects.set(t,i),i}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let i=this.objects.get(e);t===i&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},$W=class extends UYe{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,i){let r=Kb(e,t,this.flatShading,i);return r.computeBoundingSphere(),r}},FYe={markNeedsUpdateRendererDirty:()=>{}},qE=1e3,JW=512*qE;function HYe(e,t){let i=typeof e;return!!((t==="string"||t==="number")&&i===t||t==="boolean"&&(e==="true"||e==="false"||e===!0||e===!1)||t==="image"&&i==="string"&&e.startsWith("http"))}var GYe="https://hooks.spline.design",WYe=`${GYe}/events?hashFile=`,qYe=class{constructor(e,t){this.id=e,this.userWebhook=t,this.result=void 0,this._connected=!1,this.emitter=Q3(),this.reconnectWaitFor=qE,this._onError=i=>{var r,n,s;(r=this.eventSource)==null||r.removeEventListener("message",this._onMessage),(n=this.eventSource)==null||n.removeEventListener("error",this._onError),(s=this.eventSource)==null||s.removeEventListener("open",this._onConnected),this._scheduleReconnect()},this._onConnected=i=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=qE,this._connected=!0},this._onDisconnected=()=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=qE,this._connected=!1},this._onMessage=i=>{let r=i.data,n;try{n=JSON.parse(r)}catch(s){console.error("Error parsing webhook message",s)}if(n){let s=!1;this.userWebhook.parametersSchemas.forEach(({data:a})=>{n[a.name]!==void 0&&HYe(n[a.name],a.type)&&(this.result===void 0&&(this.result={}),this.result[a.name]=n[a.name],s=!0)}),s&&this.emitter.emit("message",{userWebhookId:this.id})}}}connect(){clearTimeout(this.scheduledReconnectHandle),this.userWebhook.url&&(this.eventSource=new EventSource(WYe+this.userWebhook.url),this.eventSource.addEventListener("message",this._onMessage),this.eventSource.addEventListener("error",this._onError),this.eventSource.addEventListener("open",this._onConnected))}disconnect(){var e,t,i,r;(e=this.eventSource)==null||e.removeEventListener("message",this._onMessage),(t=this.eventSource)==null||t.removeEventListener("error",this._onError),(i=this.eventSource)==null||i.removeEventListener("open",this._onConnected),(r=this.eventSource)==null||r.close(),this._onDisconnected(),clearTimeout(this.scheduledReconnectHandle)}_scheduleReconnect(){this.reconnectWaitFor*=2,this.reconnectWaitFor>JW&&(this.reconnectWaitFor=JW),clearTimeout(this.scheduledReconnectHandle),this.scheduledReconnectHandle=setTimeout(()=>{this.scheduledReconnectHandle=void 0,this.connect()},this.reconnectWaitFor)}update(e){this.userWebhook=e}dispose(){this._connected&&this.disconnect()}get connected(){return this._connected}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}getParametersKeys(){return this.userWebhook.parametersSchemas.map(e=>e.data.name)}getParameterValue(e){var t;if(this.getParametersKeys().includes(e)){if(this.result)return(t=this.result)==null?void 0:t[e];for(let i of this.userWebhook.parametersSchemas)if(i.data.name===e)return sO.defaultParameterValueByType(i.data.type)}}},eq=[4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13],XYe=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Ef=[],hz=[];for(let e=1;e<=8;e++)for(let t=0;t<eq.length;t++){let i=eq[t];Ef.push(i/Math.pow(2,8-e)),hz.push(XYe[t]+e)}var IT=[32,2e3],tq=Ef.filter((e,t)=>Ef[t]>IT[0]&&Ef[t]<IT[1]),YYe=hz.filter((e,t)=>Ef[t]>IT[0]&&Ef[t]<IT[1]),QYe=class{static getFrequencies(e,t,i,r="frequency",n=-100,s=-30){i||(i=new Float32Array(e.frequencyBinCount),e.getFloatFrequencyData(i));let a=t/2,o=1/i.length*a,l,c,u;if(r==="music"||r==="voice"){let f=r==="voice"?tq:Ef,m=Array(f.length).fill(n);for(let g=0;g<i.length;g++){let v=g*o,x=i[g];for(let b=f.length-1;b>=0;b--)if(v>f[b]){m[b]=Math.max(m[b],x);break}}l=m,c=r==="voice"?tq:Ef,u=r==="voice"?YYe:hz}else l=Array.from(i),c=l.map((f,m)=>o*m),u=c.map(f=>`${f.toFixed(2)} Hz`);let h=l.map(f=>Math.max(0,Math.min((f-n)/(s-n),1)));return{values:new Float32Array(h),frequencies:c,labels:u}}},KYe="gpt-4o-realtime-preview-2024-12-17",ZYe=()=>"https://relayserver.spline.design/";async function $Ye(e){try{return(await(await fetch(ZYe()+"session?uuidfile="+e)).json()).token}catch(t){console.error("Token generation error:",t)}}var JYe=class{constructor(e){this.value=0,this.frequencies=new Float32Array(0);let t=new AudioContext;this.source=t.createMediaStreamSource(e),this.analyser=t.createAnalyser(),this.source.connect(this.analyser),this.analyser.fftSize=8192,this.analyser.smoothingTimeConstant=.1}getFrequencies(e=-100,t=-30){if(!this.analyser)throw new Error("Not connected, please call .connect() first");return QYe.getFrequencies(this.analyser,44100,void 0,"voice",e,t)}update(){let e=this.getFrequencies(),t=e.values.reduce((i,r)=>i+r,0)/e.values.length;this.value=t,this.frequencies=e.values}disconnect(){this.source.disconnect(),this.analyser.disconnect()}},iq=class{constructor(e,t,i){this.data=e,this.id=t,this.shared=i,this.emitter=Q3(),this.rafId=0,this.voice=0,this.frequencies=new Float32Array([0]),this.events=[],this.isConnected=!1,this.isToolsAdded=!1,this.tools=[],this.onMessage=r=>{var s;let n=JSON.parse(r.data);if(this.appendEvent(n),n.type==="session.created"&&this.onSessionCreated(),n.type==="response.done"&&((s=n.response)==null?void 0:s.output)){for(let a of n.response.output)if(a.type==="function_call")for(let[o,l]of this.tools)a.name===o.name&&(l(JSON.parse(a.arguments)),setTimeout(()=>{this.sendClientEvent({type:"response.create",response:{instructions:"notice the user about what you just did"}})}))}},this.onSessionCreated=()=>{this.isToolsAdded||this.registerTools()},this.onOpen=()=>{this.events=[],this.isConnected=!0,this.sendClientEvent({type:"response.create",response:{instructions:"Say hi"}})},this.animate=()=>{if(this.rafId=requestAnimationFrame(this.animate),this.isConnected&&this.analyser){this.analyser.update();let r=this.analyser.value,n=this.analyser.frequencies;this.voice=r,this.frequencies=n,this.emitter.emit("voice",{value:r,frequencies:n})}}}update(e){this.data=e}setColorByName(e,t){let i=this.shared.getColorByName(e);if(i){let{id:r}=i,{r:n,g:s,b:a}=Eqe.hexStringToRgb(t)??{r:0,g:0,b:0};this.shared.updateColor(r,{r:n/255,g:s/255,b:a/255})}}async connect(){if(this.isConnected)return;let e=await $Ye(this.data.integration.hash);this.pc=new RTCPeerConnection,this.audioElement=document.createElement("audio"),this.audioElement.autoplay=!0,this.pc.ontrack=n=>{let s=n.streams[0];this.audioElement.srcObject=s,this.analyser=new JYe(s)};let t=await navigator.mediaDevices.getUserMedia({audio:!0});this.pc.addTrack(t.getTracks()[0]),this.dc=this.pc.createDataChannel("oai-events"),this.dc.addEventListener("message",this.onMessage),this.dc.addEventListener("open",this.onOpen);let i=await this.pc.createOffer();await this.pc.setLocalDescription(i);let r={type:"answer",sdp:await(await fetch(`https://api.openai.com/v1/realtime?model=${KYe}`,{method:"POST",body:i.sdp,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/sdp"}})).text()};await this.pc.setRemoteDescription(r),this.animate()}appendEvent(e){this.events=[e,...this.events]}sendClientEvent(e){this.dc?(e.event_id=e.event_id||crypto.randomUUID(),this.dc.send(JSON.stringify(e)),this.appendEvent(e)):console.error("Failed to send message - no data channel available",e)}registerTools(){this.isToolsAdded=!0,this.registerTool({type:"function",name:"set_personality_color",description:"returns a color based on the voice personality of the ai assistant. This should be called by the voice assistant each time it is asks to speak differently. If a color cannot be associated to the personality, the color should be a neutral color.",parameters:{type:"object",properties:{color:{type:"string",description:"css hex color string, reflecting the personality"},personality:{type:"string",description:"the personality of the voice assistant"}},required:["color","personality"]}},({color:n})=>{this.setColorByName("Voice Assistant Color",n)});let e=this.shared.getVariablesNames().join(", ");this.registerTool({type:"function",name:"set_variable",description:"Sets a Spline variable value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:`The name of the variable that needs to be set. Here's a list of available variables: ${e}. It the variable does not exist, don't call the function and warn the user about it.`},value:{type:"string",description:"The new value for this variable, should always be a string even for number and boolean variables, assume that the value will be cast to the proper type afterwards."}},required:["name","value","type"]}},({name:n,value:s})=>{let a=this.shared.getVariableByName(n);if(a){let o=this.shared.getVariable(a.id),l;typeof o=="number"?l=parseFloat(s):typeof o=="boolean"?l=s.toLowerCase()==="true":l={textValue:s},this.shared.updateVariable(a.id,l)}});let t=this.shared.getColorNames().join(", ");this.registerTool({type:"function",name:"set_color",description:"Sets a Spline color asset value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:`The name of the color asset that needs to be set. Here's a list of available color assets: ${t}. It the color asset does not exist, don't call the function and warn the user about it.`},value:{type:"string",description:"css hex color string"}},required:["name","value"]}},({name:n,value:s})=>{this.setColorByName(n,s)});let i=this.shared.scene,r=[];i.traverseEntity(n=>{n.data.events.forEach(s=>{if(s.data.type==="AIAssistantTrigger"){let{description:a}=s.data;r.push(a)}})}),this.registerTool({type:"function",name:"trigger_event",description:"Trigger an event by name, here are the available events, please match what the user is asking for to one of these if it applies, otherwise don't call the function and warn the user.",parameters:{type:"object",properties:{description:{type:"string",description:`The name of the event that needs to be triggered. Here's a list of available events: ${JSON.stringify(r)}.`},direction:{type:"string",description:"default is forward, but can be forward or backward. Always set to forward unless the user ask to reverse or cancel the event, then set to backward."}},required:["description","direction"]}},({description:n,direction:s})=>{this.emitter.emit("trigger_event",{description:n,direction:s})}),this.sendClientEvent({type:"session.update",session:{tools:this.tools.map(([n])=>n)}})}registerTool(e,t){this.tools.push([e,t])}disconnect(){var e,t,i,r,n,s;cancelAnimationFrame(this.rafId),(e=this.analyser)==null||e.disconnect(),this.voice=0,this.isConnected=!1,this.isToolsAdded=!1,(t=this.dc)==null||t.removeEventListener("message",this.onMessage),(i=this.dc)==null||i.removeEventListener("open",this.onOpen),(r=this.dc)==null||r.close(),(n=this.pc)==null||n.getSenders().forEach(a=>{a.track&&a.track.stop()}),(s=this.pc)==null||s.close(),this.pc=void 0}computeAnalysisForListenerEvent(e){if(e.analysis==="range"){let t=this.frequencies.slice(...e.analysisRange);return t.reduce((i,r)=>i+r,0)/t.length}return e.analysis==="single"?this.frequencies[e.analysisSingle]:this.voice}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}};function RO(e){return"variable_"+e}var eQe=class extends NXe{constructor(e){super(),this.shared=e}create(e){return new Xne(e,this.shared)}},dz=class{constructor(e,t={},i=!0,r=!1){if(this.data=e,this.needsJitter=i,this.enableLocalStorageForPersistentVariables=r,this.geometryCache=new $W(!0),this.geometryCache2=new $W(!1),this.imageHolderCache=new eQe(this),this.thisContext={scene:FYe,shared:this},this.deletedMaterial=new IO(Ms.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new $d(oO.emptyImage,this),this.deletedVideo=new $d(dT.defaultVideo,this),this.materials={},this.images={},this.uiBuffers={},this.videos={},this.colors={},this.audios={},this.particles={},this.fonts={},this.variables={},this.userAPIs={},this.userWebhooks={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[n,s]of Object.entries(t.images))this.addImage(n,s);if(t.videos)for(let[n,s]of Object.entries(t.videos))this.addVideo(n,s);if(t.audios)for(let[n,s]of Object.entries(t.audios))this.addAudio(n,s);if(t.particles)for(let[n,s]of Object.entries(t.particles))this.addParticle(n,s);this.reset(e)}setRequestRender(e){this._requestRender=e}getImageLoadPromises(){return Object.values(this.images).map(e=>e.loadPromise)}setEntityOpContext(e){this.entityOpContext=e}reset(e,t=!1,i=!1){this.data=e,this.resetLib(e.lib);for(let{id:r,data:n}of e.variables)this.addVariableHolder(r,n),t&&this.updateVariableHolder(r,n);for(let[r,n]of Object.entries(e.userAPIs))this.addUserAPI(r,n);for(let[r,n]of Object.entries(e.userWebhooks))this.addUserWebhook(r,n);if(!i){for(let[r,n]of Object.entries(e.images))this.addImage(r,n);for(let[r,n]of Object.entries(e.videos))this.addVideo(r,n)}for(let[r,n]of Object.entries(e.colors))this.addColor(r,n);for(let[r,n]of Object.entries(e.materials))this.addMaterial(r,n);for(let[r,n]of Object.entries(e.audios))this.addAudio(r,n);for(let[r,n]of Object.entries(e.particles))this.addParticle(r,n);for(let[r,n]of Object.entries(e.fonts))this.addFont(r,n)}addMaterial(e,t){if(this.materials[e]){let i=this.materials[e];i.reset(t,this.thisContext),i.dispose()}else{let i=new IO(t,this.thisContext,e);this.materials[e]=i}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new uz(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new $d(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addUIBuffer(e,t){return this.uiBuffers[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.uiBuffers[e].updateSrc(t),!0):(this.uiBuffers[e]=new $d(t,this),!1)}uiBuffer(e){return this.uiBuffers[e]}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new $d(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new DT(t.r,t.g,t.b,t.a):this.colors[e]=new DT(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let i=this.colors[e];return this.colors[e].r=t.r??i.r,this.colors[e].g=t.g??i.g,this.colors[e].b=t.b??i.b,this.colors[e].a=t.a??i.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}getColorNames(){return Object.values(this.data.colors).map(e=>e.name)}getColorByName(e){for(let t in this.data.colors)if(this.data.colors[t].name===e)return{color:this.colors[t],id:t}}color(e){let t;if(typeof e=="string"){let i=this.getColor(e);i?t=i:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new sa(0,0,0,0))}else return"a"in e?new sa(e.r,e.g,e.b,e.a):new sa(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof wx)return t;{let i=new wx({src:t.data});return this.audios[e]=i,i}}addParticle(e,t){this.particles[e]=t}getParticle(e){return this.particles[e]}deleteParticle(e){this.particles[e]&&delete this.particles[e]}deleteAudio(e){let t=this.audios[e];t&&(t instanceof wx&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new NYe(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof wx&&e.dispose()}),this.audios={},this.particles={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){if(this.variables[e]===void 0){let i=t.value;if(this.enableLocalStorageForPersistentVariables&&t.persistent){let r=localStorage.getItem(RO(e));i=r!==null?JSON.parse(r):t.value}return this.variables[e]={value:i,locations:[],persistent:t.persistent},"dynamicVariableType"in t&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0}return this.variables[e].value=t.value,!1}resetDynamicVariablePlayState(){for(let e in this.variables)this.variables[e].dynamicVariablePlayState!==void 0&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(this.variables[e]===void 0)return!1;this.variables[e].value=t,this.enableLocalStorageForPersistentVariables&&this.variables[e].persistent&&localStorage.setItem(RO(e),JSON.stringify(t));let i=t;for(;typeof i=="string";)i=this.variables[i].value;let r=this.entityOpContext.scene;for(let n=this.variables[e].locations.length-1;n>=0;n--){let s=this.variables[e].locations[n];if(s[0]==="material"){let a=s[1],o=i,l={scene:r,shared:this},c=s.slice(2);r.traverseMaterial(h=>{let f=h.root??h;f.uuid===a&&f.onVariableUpdate(c,o,l)});let u=this.materials[a];u&&u.onVariableUpdate(c,o,l)}else{let a=r.find(s[0]);if(a===void 0){this.variables[e].locations.splice(n,1);continue}if(s[1]!=="geometry"&&s[1]!=="particles"){for(let o=1;o<s.length-1;o++)a=a[s[o]];s[1]==="rotation"?a[s[s.length-1]]=i*wt.DEG2RAD:a[s[s.length-1]]=i}if(a=r.find(s[0]),a.type==="ParticleEmitter"&&a.updateVariableState(i,s),zi.is(a))if(s[1]==="position"||s[1]==="rotation"||s[1]==="scale")a.onVariableUpdate();else if(s[1]==="geometry"){let o=a;a.component&&(o=a.component);let l=o.dataPatched;o.chooseGeoemtryCache(this).forceDelete(l.geometry),o.createGeometryDelayed(this.entityOpContext),o.onVariableUpdate(!0),o.invalidateDownstreamBooleanData(),o.instances.forEach(c=>{let u=c.dataPatched;c.chooseGeoemtryCache(this).forceDelete(u.geometry),c.createGeometryDelayed(this.entityOpContext),c.onVariableUpdate(!0),c.invalidateDownstreamBooleanData()})}else s[1]==="morphTargetInfluences"&&a.updateMorphInfluences(s[2],i)}}return this.requestRender(),!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){var i,r,n;if(Array.isArray(e)){if(e[0]==="mouse")return((i=this.mouseProperty)==null?void 0:i[e[1]])??0;if(e[0]==="raycast")return((r=this.raycastProperty)==null?void 0:r[e[1]])??0;let s=this.entityOpContext.scene.find(e[0]);if(e[1]==="width"||e[1]==="height"||e[1]==="depth")return s.geometry.userData.parameters[e[1]];for(let a=1;a<e.length;a++)s=s[e[a]];return e[1]==="rotation"&&(s*=wt.RAD2DEG),s}for(let s in this.variables){if(t===void 0)break;let a=this.variables[s],o=(n=a.locations)==null?void 0:n.findIndex(l=>os.equal(l,t));o!==void 0&&o!==-1&&a.locations.splice(o,1)}if(typeof e=="string"){let s=e,a=e;do{if(a=s,this.variables[s]===void 0)break;let o=this.variables[s].value;t&&this.variables[a]!==void 0&&this.variables[a].locations.push(t),s=o}while(typeof s=="string");return s}else return e}getVariables(){return this.variables}getVariablesNames(){return this.data.variables.map(e=>e.data.name)}getVariableByName(e){for(let t of this.data.variables)if(t.data.name===e)return{variable:t.data,id:t.id}}getDynamicVariablePlayState(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariablePlayState}setDynamicVariablePlayState(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariablePlayState=t)}getDynamicVariableToggleIsForward(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariableToggleIsForward=t)}resetLib(e){for(let[t,i]of Object.entries(e.images))this.addImage(t,i.asset);for(let[t,i]of Object.entries(e.audios))this.addAudio(t,i.asset);for(let[t,i]of Object.entries(e.particles))this.addParticle(t,i.asset);for(let[t,i]of Object.entries(e.colors))this.addColor(t,i.asset);for(let[t,i]of Object.entries(e.fonts))this.addFont(t,i.asset);for(let[t,i]of Object.entries(e.materials))this.addMaterial(t,i.asset);for(let[t,i]of Object.entries(e.videos))this.addVideo(t,i.asset);for(let[t,i]of Object.entries(e.variables))this.addVariableHolder(t,i.asset)}updateLibByOp(e,t){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="particles"?e.path.length===1&&e.type===1?this.addParticle(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteParticle(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===1&&e.type===1?this.addVariableHolder(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVariable(e.id):e.path[0]==="components"&&t.updateByLibOp(e,this)}updateByOp(e,t,i){var r;if(this.data=t,e.path[0]==="images")e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id);else if(e.path[0]==="videos")e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id);else if(e.path[0]==="audios")e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id);else if(e.path[0]==="particles")e.path.length===2&&e.type===0?e.props.data&&this.addParticle(e.path[1],t.particles[e.path[1]]):e.path.length===1&&e.type===1?this.addParticle(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteParticle(e.id);else if(e.path[0]==="colors")e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id);else if(e.path[0]==="materials")e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(Cs.drop(e,2),t.materials[e.path[1]],{shared:this,scene:i});else if(e.path[0]==="fonts")e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,i):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id);else if(e.path[0]==="variables")e.path.length===2&&e.type===0?"value"in e.props?this.updateVariable(e.path[1],e.props.value):"persistent"in e.props&&(this.variables[e.path[1]].persistent=e.props.persistent):e.path.length===1&&e.type===4?this.addVariableHolder(e.id,e.data):e.path.length===1&&e.type===5&&this.deleteVariable(e.id);else if(e.path[0]==="userAPIs"){if(e.path.length===1&&e.type===1)this.addUserAPI(e.id,e.data);else if(e.path.length===1&&e.type===2)this.deleteUserAPI(e.id);else if(typeof e.path[1]=="string"){let n=t.userAPIs[e.path[1]];if(n){let s=e.type===0&&e.props.debounce===void 0,a=this.getUserAPI(e.path[1]);a instanceof iq?a.update(n):a==null||a.update(n,this,s)}}}else if(e.path[0]==="userWebhooks"){if(e.path.length===1&&e.type===1)this.addUserWebhook(e.id,e.data);else if(e.path.length===1&&e.type===2)this.deleteUserWebhook(e.id);else if(typeof e.path[1]=="string"){let n=t.userWebhooks[e.path[1]];n&&((r=this.getUserWebhook(e.path[1]))==null||r.update(n))}}else e.path[0]==="lib"&&this.updateLibByOp(Cs.drop(e,1),i)}updateFont(e,t,i){if(t.props.url){let r=this.getFont(e),n={...this.data.fonts[e],url:t.props.url};r.update(n),r.loadingPromise.then(()=>this.requestRender()),i.updateFont(e,this)}}addUserAPI(e,t){var i,r;return this.userAPIs[e]?(this.userAPIs[e].update(t,this),!0):((i=this.openAIRealtime)==null?void 0:i.id)===e?(this.openAIRealtime.update(t),!0):((r=t.integration)==null?void 0:r.type)==="VoiceAssistant"?(this.openAIRealtime=new iq(t,e,this),!1):(this.userAPIs[e]=new une(e,t,this),!1)}getUserAPI(e){var t;return((t=this.openAIRealtime)==null?void 0:t.id)===e?this.openAIRealtime:this.userAPIs[e]}getUserAPIs(){return this.userAPIs}deleteUserAPI(e){let t=this.userAPIs[e];t&&(t.dispose(),delete this.userAPIs[e])}addUserWebhook(e,t){return this.userWebhooks[e]?(this.userWebhooks[e].update(t),!0):(this.userWebhooks[e]=new qYe(e,t),!1)}getUserWebhook(e){return this.userWebhooks[e]}getUserWebhooks(){return this.userWebhooks}deleteUserWebhook(e){let t=this.userWebhooks[e];t&&(t.dispose(),delete this.userWebhooks[e])}get scene(){return this.entityOpContext.scene}};new dz(dl.emptyData());var vy=class extends Ka{updateByPatchedOp(e,t,i){if(super.updateByPatchedOp(e,t,i),hHe(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[r,n]of Object.entries(e.props)){let s=i.shared.material(n);this.material[Number(r)]=s}else if(Ir(e.path,["material"])&&this.material instanceof jf)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(Cs.drop(e,1),t.material,i);else if(Ir(e.path,["materials","*"])&&Array.isArray(this.material)){let r=e.path[1];if("materials"in t&&r<this.material.length){let n=t.materials[r];typeof n!="string"&&this.material[r].updateByOp(Cs.drop(e,2),n,i)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,t){var n,s;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let i=this.dataPatched;this.dataPatched.type==="Mesh"&&this.dataPatched.geometry.shapeBlendNode&&this.layers.set(9);let r;if(this.dataPatched.type==="Mesh"&&this.dataPatched.geometry.type==="ShapeBlendGeometry"&&(r={resolutionLevel:this.dataPatched.geometry.resolutionLevel,useChildrenColors:this.dataPatched.geometry.useChildrenColors}),((n=e.geometry)==null?void 0:n.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe,r),t.scene.markNeedsUpdateRendererDirty()),(((s=e.geometry)==null?void 0:s.type)==="NonParametricGeometry"||"materials"in e)&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(a=>t.shared.material(a).getFlavor(i.flatShading,i.side,i.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe)],t.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let a=0;a<this.material.length;a++)this.material[a]=this.material[a].getFlavor(i.flatShading,i.side,i.wireframe);else this.material=this.material.getFlavor(i.flatShading,i.side,i.wireframe,r)}disposeMaterial(){this.material&&Jie(this.material).forEach(e=>{e instanceof jf&&(e instanceof IO||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},rq=new j,nq=new ni,sq=new ni,tQe=new j,aq=new tt,Gn=class extends vy{constructor(e,t,i){super(e,t),this.data=t,this.isSkinnedMesh=!1,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.bindMode=t.bindMode,this.bindMatrix=new tt().fromArray(t.bindMatrix),this.bindMatrixInverse=new tt)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Rt&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof dz){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return mT.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return mT.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),Ir(e.path,["geometry"])&&this.updateByPatchedOpGeometry(Cs.drop(e,1),t.geometry,i)}removeInteractionGeometry(e){var t;(t=this.localGeometry)==null||t.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var r;this.invalidateDownstreamBooleanData();let i=this.data.geometry.type;if(i==="NonParametricGeometry"||i==="SubdivGeometry"){let n=e;if(this.localGeometry===void 0){let c={...this.data.geometry,...n};this.localGeometry=Kb(c,t,this.data.flatShading,this)}let s,a,o;n.scaleBaked?[s,a,o]=n.scaleBaked:{width:s,height:a,depth:o}=n;let l=this.localGeometry.userData;l.sxPrev!==void 0&&AO(this.localGeometry.attributes,s/l.sxPrev,a/l.syPrev,o/l.szPrev),l.sxPrev=s,l.syPrev=a,l.szPrev=o}else{let n={...this.data.geometry,...e};(r=this.localGeometry)==null||r.dispose(),this.localGeometry=Kb(n,t,this.data.flatShading,this)}}refreshAttachedClonersInteractions(){for(let e of this.attachedSurfaceCloners)e.update()}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,i){var n;let r=!1;e.type===0&&e.path.length===0&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof Va&&this.chooseGeoemtryCache(i.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(r=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(i),this.refreshAttachedPaths(i)),r||((n=i.scene)==null||n.markGeometryCacheDirty(),this.createGeometryDelayed(i)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t);let i=e.morphTargetInfluences;if(i){this.updateMorphTargets(),this.geometry.morphTargetsRelative=!0;for(let{data:{name:r,value:n}}of i)this.updateMorphInfluences(r,t.shared.getVariable(n,[this.uuid,"morphTargetInfluences",r]))}super.updateState(e,t)}updateMorphInfluences(e,t){if(this.morphTargetDictionary===void 0)return;let i=this.morphTargetDictionary[e];i!==void 0&&(this.morphTargetInfluences[i]=t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let i=this.geometry.userData.parameters;this.is2DType?e.set(0,0,i.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)):i.centerOffset?e.fromArray(i.centerOffset):e.setScalar(0),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,this.isSkinnedMesh=!0,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new ni,i=this.geometry.attributes.skinWeight;for(let r=0,n=i.count;r<n;r++){t.fromBufferAttribute(i,r);let s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),i.setXYZW(r,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let i=this.skeleton;if(i===void 0)return;let r=this.geometry;nq.fromBufferAttribute(r.attributes.skinIndex,e),sq.fromBufferAttribute(r.attributes.skinWeight,e),rq.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let n=0;n<4;n++){let s=sq.getComponent(n);if(s!==0){let a=nq.getComponent(n);aq.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(tQe.copy(rq).applyMatrix4(aq),s)}}return t.applyMatrix4(this.bindMatrixInverse)}};function iQe(e){var a,o;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,i=e.geometry.attributes,r=i.position.array,n=i.normal.array,s=new Float32Array(r.length);for(let l=0;l<r.length;l+=3){let c=`${r[l]}_${r[l+1]}_${r[l+2]}`,u=new j(n[l],n[l+1],n[l+2]);t.has(c)?(a=t.get(c))==null||a.normals.push(u):t.set(c,{normals:[u],result:new j})}t.forEach((l,c)=>{for(let u of l.normals)l.result.add(u);l.result.divideScalar(l.normals.length)});for(let l=0;l<r.length;l+=3){let c=`${r[l]}_${r[l+1]}_${r[l+2]}`,u=(o=t.get(c))==null?void 0:o.result;u&&(s[l]=u.x,s[l+1]=u.y,s[l+2]=u.z)}e.geometry.setAttribute("extrudeNormal",new yt(s,3))}function rQe(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),r=new j;for(let n=0;n<t.length;n+=3)r.set(t[n],t[n+1],t[n+2]).normalize(),i[n]=r.x,i[n+1]=r.y,i[n+2]=r.z;e.geometry.setAttribute("extrudeNormal",new yt(i,3))}function fz(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof jf)||e.material.getLayersOfType("outline").length===0)return;e instanceof Gn&&e.is2DAndNoDepth?rQe(e):iQe(e)}function pz(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),r=parseInt(e.uuid.replace(/\D/g,"")),n=[wt.seededRandom(r),wt.seededRandom(r+1e4),wt.seededRandom(r+2e4)];for(let s=0;s<t.length;s++)i[s]=n[s%3];e.geometry.setAttribute("randomColor",new Xt(i,3))}var jc=new Pn,Y1=new j;function nQe(e){let t=!1;return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var Zb=class extends Gn{constructor(e,t,i){super(e,t,i),this.data=t,this.hiddenMatrixOld=new tt,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let i=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var s,a,o;if(this.skipReactionUpdate===!0)return;let t=(s=this.localGeometry)==null?void 0:s.uuid,{originalGeometry:i,subdividedGeometry:r,subdivPointer:n}=Va.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=n,i!==void 0&&((a=this.originalGeometry)==null||a.dispose(),this.originalGeometry=i),r!==void 0&&((o=this.subdividedGeometry)==null||o.dispose(),this.subdividedGeometry=r??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,fz(this),pz(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let i=this.material;this.material=Array.isArray(i)?i.map(r=>r.getFlavor(!1,r.side,r.wireframe)):i.getFlavor(!1,i.side,i.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){Va.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&Va.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=Va.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Va.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let i=this.localGeometry;this.localGeometry=this.originalGeometryNew,Ka.prototype.raycast.call(this,e,t),this.localGeometry=i}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new yo,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,i=e.boundingSphere.center;jc.setFromBufferAttribute(t),jc.getCenter(i),e.boundingSphere.radius=i.distanceTo(jc.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),jc.getSize(Y1),this.hasNonUniformScale&&Y1.divide(this.scale);let r={width:Y1.x,height:Y1.y,depth:Y1.z};return this.geometry.userData.parameters=r,r}updateBoundingSphere(e){let t=this.originalGeometry;jc.min.set(e[0],e[2],e[4]),jc.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(jc.min.applyMatrix4(this.shearScaleInv),jc.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new yo);let i=t.boundingSphere.center;jc.getCenter(i),t.boundingSphere.radius=i.distanceTo(jc.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(Va.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,i){super.updateByPatchedOpGeometry(e,t,i),this.localGeometry&&this.createGeometryByControls(t)}},oq=-1,sQe=1,aQe={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},oQe={polygon_center:0,edge:1,vertex:2},F_=(e,t)=>(i,r)=>!t||i===0||e===0?0:e*r/100,fi=(e,t)=>{let i=Math.abs(t),r=i*-1;return(e-oq)*(i-r)/(sQe-oq)+r},lQe=new j,H_=new j,cQe=new j,uQe=new j;function av(e,t){let i=cQe.fromArray(e),r=uQe.fromArray(t);H_.copy(r).sub(i);let n=H_.length();return H_.normalize().multiplyScalar(n*.5),lQe.copy(i).add(H_).toArray()}var fl=new Js,G_=new j,RT=new j,Wp=new j;function hQe(e){let t=[];for(let i=0;i<=e.index.count;i++)if(G_.fromArray(e.index.array,i*3),fl.setFromAttributeAndIndices(e.attributes.position,G_.x,G_.y,G_.z),fl.getNormal(RT),fl.getMidpoint(Wp),!(isNaN(Wp.x)||isNaN(Wp.y)||isNaN(Wp.z))){let{a:r,b:n,c:s}=fl,a=r.toArray(),o=n.toArray(),l=s.toArray(),c=r.distanceTo(n),u=n.distanceTo(s),h=s.distanceTo(r),f=av(a,o),m=av(o,l),g=av(l,a),v=[c,u,h],x=Math.max(...v),b=v.filter(A=>Math.round(A)===Math.round(x)).length>1,S=[],_=fl.getMidpoint(Wp).toArray();x===c&&!b&&(S=[m,g,g],_=f),x===u&&!b&&(S=[f,g,g],_=m),x===h&&!b&&(S=[f,m,m],_=g),b&&(S=[f,m,g]),t.push({vertices:[a,o,l],faceCenters:S,midpoint:_,norm:fl.getNormal(RT).toArray()})}return t}function dQe(e){let t=[],{position:i}=e.attributes;for(let r=0;r<i.count;r++){fl.setFromAttributeAndIndices(i,r*3,r*3+1,r*3+2),fl.getNormal(RT),fl.getMidpoint(Wp);let n=fl.a.toArray(),s=fl.b.toArray(),a=fl.c.toArray();t.push({vertices:[n,s,a],faceCenters:[av(n,s),av(s,a),av(a,n)],midpoint:Wp.toArray(),norm:RT.toArray()})}return t}var fQe=4,pQe=.5,Q4=e=>.5*(1-Math.cos(e*Math.PI)),mQe=class{constructor(){this.perlin=new Array(4096)}noise(e,t=0,i=0){if(this.perlin==null){this.perlin=new Array(4096);for(let x=0;x<4096;x++)this.perlin[x]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),i<0&&(i=-i);let r=Math.floor(e),n=Math.floor(t),s=Math.floor(i),a=e-r,o=t-n,l=i-s,c,u,h=0,f=.5,m,g,v;for(let x=0;x<fQe;x++){let b=r+(n<<4)+(s<<8);c=Q4(a),u=Q4(o),m=this.perlin[b&4095],m+=c*(this.perlin[b+1&4095]-m),g=this.perlin[b+16&4095],g+=c*(this.perlin[b+16+1&4095]-g),m+=u*(g-m),b+=256,g=this.perlin[b&4095],g+=c*(this.perlin[b+1&4095]-g),v=this.perlin[b+16&4095],v+=c*(this.perlin[b+16+1&4095]-v),g+=u*(v-g),m+=Q4(l)*(g-m),h+=m*f,f*=pQe,r<<=1,a*=2,n<<=1,o*=2,s<<=1,l*=2,a>=1&&(r++,a--),o>=1&&(n++,o--),l>=1&&(s++,l--)}return h}noiseSeed(e){let t=(()=>{let i,r;return{setSeed(n){r=i=(n??Math.random()*4294967296)>>>0},getSeed(){return i},rand(){return r=(1664525*r+1013904223)%4294967296,r/4294967296}}})();t.setSeed(e),this.perlin=new Array(4096);for(let i=0;i<4096;i++)this.perlin[i]=t.rand()}},gQe=mQe,lq=new j,cq=new tt,uq=new ry;function hq(e){let t=!1;return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&(r.geometry.type==="TextGeometry"||r.geometry.type==="InputGeometry")&&(t=!0)}),t}var mz=class extends Gn{constructor(e,t,i){super(e,t,i),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var t;let e=this.dataPatched;return((t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:i}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(cq.copy(i).invert(),uq.copy(e.ray).applyMatrix4(cq),uq.intersectBox(this.singleBBox,lq))){let r=lq.applyMatrix4(i),n=e.ray.origin.distanceTo(r);t.push({distance:n,point:r.clone(),object:this})}}},za=1e-4,Nc,nse,sse,ase,dq=new j,fq=new j;mne.then(e=>{Nc=e,nse=[Nc.get_face_center,Nc.get_edge_midpoint,Nc.get_vertex_position],sse=[Nc.get_face_normal,Nc.get_edge_normal,Nc.get_vertex_normal],ase=[Nc.face_count,Nc.edge_count,Nc.vertex_count]});var vQe=new tt,yQe=new tt,Ld=new j,W_=new j,Q1=new j,K4=new j,xQe=new j,bQe=new j,wQe=class{constructor(e,t){this.data=e,this.is3D=t,this.perlin=new gQe,e.noiseType==="perlin"?(this.perlin.noiseSeed(e.seed),t?this.noise=(i,r,n)=>this.perlin.noise(i,r,n):this.noise=i=>this.perlin.noise(i)):t?this.noise=QGe((0,vO.default)(e.seed)):this.noise=YGe((0,vO.default)(e.seed))}},vl=class extends Kk(mr){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.random=null,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof ia&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof ia&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"){if(!this.parameters.toObject.object)t=0;else if(e===void 0&&this.parameters.toObject.spreadType!=="random")return}if(this.parameters.type==="toObject"&&this.objectForSample){let i=this.children;if(i.length===t)return;if(i.length<t)for(let r=0,n=t-i.length;r<n;++r){let s=new ia(this.object);s.expand(),this.add(s)}else for(let r=0,n=i.length-t;r<n;++r)this.remove(i[r])}else{if(this.children.length===t)return;if(this.children.length<t)for(let i=0,r=t-this.children.length;i<r;++i){let n=new ia(this.object);n.expand(),this.add(n)}else for(let i=0,r=this.children.length-t;i<r;++i)this.remove(this.children[i])}}getRandom(e,t=!1){return(this.random===null||this.random.data.seed!==e.seed||this.random.is3D!==t)&&(this.random=new wQe(e,t)),this.random}_updateRadial(e){let t=e.radial,i=t.start*wt.DEG2RAD,r=t.end*wt.DEG2RAD,n=i-r,s=new as(t.rotation[0],t.rotation[1],t.rotation[2]),a;switch(t.axis){case"z":a=new j(0,0,1);break;case"y":a=new j(0,1,0);break;default:case"x":a=new j(1,0,0);break}let o=e.randomnessObject??af.defaultData([1,1,1]).randomnessObject,l=this.getRandom(o),c=F_(o.strength,this.parameters.randomness);for(let[u,h]of this.children.entries()){let f=u*(o.freqScale/10)+o.movement,m=l.noise(f,f,f),g=u+1;h.scale.x=t.scale[0]+c(g,fi(m,o.scale[0]))||za,h.scale.y=t.scale[1]+c(g,fi(m,o.scale[1]))||za,h.scale.z=t.scale[2]+c(g,fi(m,o.scale[2]))||za,h.position.setScalar(0);let v=n/e.count*u-i;switch(t.axis){case"x":h.rotation.set(0,v,0);break;case"y":h.rotation.set(0,0,v);break;case"z":h.rotation.set(v,0,0);break}h.translateOnAxis(a,t.radius),h.position.x+=t.position[0]+c(g,fi(m,o.position[0])),h.position.y+=t.position[1]+c(g,fi(m,o.position[1])),h.position.z+=t.position[2]+c(g,fi(m,o.position[2]));let x=c(g,fi(m,o.rotation[0])),b=c(g,fi(m,o.rotation[1])),S=c(g,fi(m,o.rotation[2]));t.alignment===!0?(h.rotation.x+=s.x+x,h.rotation.y+=s.y+b,h.rotation.z+=s.z+S):h.rotation.set(s.x+x,s.y+b,s.z+S)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,i=new as(t.rotation[0],t.rotation[1],t.rotation[2]),r=e.randomnessObject??af.defaultData([1,1,1]).randomnessObject,n=this.getRandom(r),s=F_(r.strength,this.parameters.randomness);for(let[a,o]of this.children.entries()){let l=a*(r.freqScale/10)+r.movement,c=n.noise(l,l,l),u=a+1,h=s(u,fi(c,r.rotation[0])),f=s(u,fi(c,r.rotation[1])),m=s(u,fi(c,r.rotation[2]));o.scale.x=1+(t.scale[0]-1)*a+s(u,fi(c,r.scale[0]))||za,o.scale.y=1+(t.scale[1]-1)*a+s(u,fi(c,r.scale[1]))||za,o.scale.z=1+(t.scale[2]-1)*a+s(u,fi(c,r.scale[2]))||za,o.rotation.x=i.x*a+h,o.rotation.y=i.y*a+f,o.rotation.z=i.z*a+m,o.position.x=t.position[0]*a+s(u,fi(c,r.position[0])),o.position.y=t.position[1]*a+s(u,fi(c,r.position[1])),o.position.z=t.position[2]*a+s(u,fi(c,r.position[2]))}}_updateGrid(e){let t=0,i=e.grid,r=e.randomnessObject??af.defaultData([1,1,1]).randomnessObject,n=this.getRandom(r,!0),s=F_(r.strength,this.parameters.randomness);if(i.useCenter===!0){let a={x:i.count[0]%2===0?2:1,y:i.count[1]%2===0?2:1,z:i.count[2]%2===0?2:1},o=new j(i.size[0]*(i.count[0]-a.x)*.5,i.size[1]*(i.count[1]-a.y)*.5,i.size[2]*(i.count[2]-a.z)*.5);for(let l=0;l<i.count[0];l++)for(let c=0;c<i.count[1];c++)for(let u=0;u<i.count[2];u++){let h=n.noise((l+1)*(r.freqScale/10)+r.movement,(c+1)*(r.freqScale/10)+r.movement,(u+1)*(r.freqScale/10)+r.movement),f=this.children[t++];f.scale.x=1+s(t,fi(h,r.scale[0]))||za,f.scale.y=1+s(t,fi(h,r.scale[1]))||za,f.scale.z=1+s(t,fi(h,r.scale[2]))||za;let m=s(t,fi(h,r.rotation[0])),g=s(t,fi(h,r.rotation[1])),v=s(t,fi(h,r.rotation[2]));f.rotation.set(m,g,v),f.position.x=i.size[0]*l-o.x+s(t,fi(h,r.position[0])),f.position.y=i.size[1]*c-o.y+s(t,fi(h,r.position[1])),f.position.z=i.size[2]*u-o.z+s(t,fi(h,r.position[2]))}}else for(let a=0;a<i.count[0];a++)for(let o=0;o<i.count[1];o++)for(let l=0;l<i.count[2];l++){let c=n.noise((a+1)*(r.freqScale/10)+r.movement,(o+1)*(r.freqScale/10)+r.movement,(l+1)*(r.freqScale/10)+r.movement),u=this.children[t++];u.scale.x=1+s(t,fi(c,r.scale[0]))||za,u.scale.y=1+s(t,fi(c,r.scale[1]))||za,u.scale.z=1+s(t,fi(c,r.scale[2]))||za;let h=s(t,fi(c,r.rotation[0])),f=s(t,fi(c,r.rotation[1])),m=s(t,fi(c,r.rotation[2]));u.rotation.set(h,f,m),u.position.x=i.size[0]*a+s(t,fi(c,r.position[0])),u.position.y=-i.size[1]*o+s(t,fi(c,r.position[1])),u.position.z=-i.size[2]*l+s(t,fi(c,r.position[2]))}}_updateToObject(e){var u;if(e.type!=="toObject")throw new Error;let{toObject:t}=e,i=new as(t.rotation[0],t.rotation[1],t.rotation[2]),r=e.randomnessObject??af.defaultData([1,1,1]).randomnessObject,n=this.getRandom(r),s=F_(r.strength,this.parameters.randomness);if(!t.object){for(let[,h]of this.children.entries())h.position.set(0,0,0),h.scale.setScalar(1),h.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof mz)if(!((u=this.objectForSample.font)!=null&&u.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let a=this.getSubdivData();if(a.length>0){let h=Math.round(a.length*t.count/100);this._updateCount(h)}else{let h=this.objectForSample.geometry.getAttribute("position");if(!h||isNaN(h.count)||h.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let o=new KGe(this.objectForSample).build(),l=aQe[t.axis],c=this.children;o.setRandomGenerator((0,vO.default)(this.object.uuid+t.seed));for(let[h,f]of c.entries()){let m=h*(r.freqScale/10)+r.movement,g=n.noise(m,m,m),v=h+1,x=s(v,fi(g,r.rotation[0])),b=s(v,fi(g,r.rotation[1])),S=s(v,fi(g,r.rotation[2]));t.spreadType==="random"?o.sample(Q1,K4):(a.length&&(Q1.fromArray(a[h].pos),K4.fromArray(a[h].norm)),this.objectForSample instanceof Zb&&Q1.applyMatrix4(vQe.copy(this.objectForSample.matrixWorld).invert())),Q1.applyMatrix4(this.object.hiddenMatrix.clone().invert()),f.position.copy(Q1),Ld.fromArray(l);let _=t.align==="normal"?K4:this.object.getWorldDirection(bQe),A=W_.fromArray(t.position);W_.x+=s(v,fi(g,r.position[0])),W_.y+=s(v,fi(g,r.position[1])),W_.z+=s(v,fi(g,r.position[2]));let M=Math.acos(_.dot(Ld)),C=xQe.crossVectors(Ld,_).normalize(),D=yQe.makeRotationAxis(C,M),T=_.clone().cross(this.object.up).normalize(),R=T.clone().cross(_).normalize(),O=new tt().makeBasis(T,_,R),L=new j(Ld.y,Ld.z,Ld.x).normalize(),k=L.clone().cross(Ld).normalize(),B=new tt().makeBasis(L,Ld,k).invert(),V=new tt().multiplyMatrices(O,B);f.rotation.setFromRotationMatrix(V),A.applyMatrix4(D),f.position.add(A),f.rotation.x=f.rotation.x+i.x+x,f.rotation.y=f.rotation.y+i.y+b,f.rotation.z=f.rotation.z+i.z+S,f.scale.setScalar(1),f.scale.x=f.scale.x+t.scale[0]+s(v,fi(g,r.scale[0]))||za,f.scale.y=f.scale.y+t.scale[1]+s(v,fi(g,r.scale[1]))||za,f.scale.z=f.scale.z+t.scale[2]+s(v,fi(g,r.scale[2]))||za,f.scale.multiply(this.object.scale),f.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType,t=new Map,i=(n,s)=>{let a=Math.round(n[0]*1e4)+"_"+Math.round(n[1]*1e4)+"_"+Math.round(n[2]*1e4),o=t.get(a);o?(o.pos[0]+=n[0],o.pos[1]+=n[1],o.pos[2]+=n[2],o.norm[0]+=s[0],o.norm[1]+=s[1],o.norm[2]+=s[2],o.count+=1):t.set(a,{pos:[...n],norm:[...s],count:1})};if(e==="random")return[];if(this.objectForSample instanceof Zb){let n=this.objectForSample,s=oQe[e],a=ase[s],o=nse[s],l=sse[s],c=a(n.subdivPointerNew);for(let u=0;u<=c-1;u++){let h=o(n.subdivPointerNew,u),f=l(n.subdivPointerNew,u);dq.fromArray(h).applyMatrix4(n.matrixWorld),fq.fromArray(f),i(dq.toArray(),fq.toArray())}}else(this.objectForSample.geometry.index?hQe(this.objectForSample.geometry):dQe(this.objectForSample.geometry)).forEach((n,s)=>{e==="polygon_center"&&i(n.midpoint,n.norm),e==="vertex"&&(i(n.vertices[0],n.norm),i(n.vertices[1],n.norm),i(n.vertices[2],n.norm)),e==="edge"&&(i(n.faceCenters[0],n.norm),i(n.faceCenters[1],n.norm),i(n.faceCenters[2],n.norm))});let r=Array.from(t.values());for(let n of r)n.pos[0]/=n.count,n.pos[1]/=n.count,n.pos[2]/=n.count,n.norm[0]/=n.count,n.norm[1]/=n.count,n.norm[2]/=n.count;return r}updateState(e,t){var i;if(this.parameters=U3(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(i=this.object.parent)==null||i.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let r=t.find(this.parameters.toObject.object);r instanceof Ka?this.objectForSample=r:this.objectForSample=void 0,this.matrix=new tt,this.hiddenMatrix=new tt,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,r&&r.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},Dw=e=>{var t;return t=class extends e{},t.geometryHelper=new uc(30,30,30),t},q_=new ry,Z4=new yo,pq=new tt,Iw=(e,t,i,r,n=!1,s=e)=>{let a=t,o=s.matrixWorld;if(a.boundingSphere===null&&a.computeBoundingSphere(),Z4.copy(a.boundingSphere),Z4.applyMatrix4(o),i.ray.intersectsSphere(Z4)===!1||(pq.copy(o).invert(),q_.copy(i.ray).applyMatrix4(pq),a.boundingBox!==null&&q_.intersectsBox(a.boundingBox)===!1))return;let l,c,u,h,f=a.index,m=a.attributes.position,g=a.drawRange,v,x;if(n===!1){let S=Math.max(0,g.start),_=Math.min(f.count,g.start+g.count);for(v=S,x=_;v<x;v+=3)if(c=f.getX(v),u=f.getX(v+1),h=f.getX(v+2),l=b(e,i,q_,m,c,u,h),l){l.faceIndex=Math.floor(v/3),r.push(l);return}}else{let S=a.attributes.position,_=new j,A=new j,M=new j,C=new j,D=2,T=1/((s.scale.x+s.scale.y+s.scale.z)/3),R=T*T,O=Math.max(0,g.start),L=Math.min(S.count,g.start+g.count);for(let k=O,B=L-1;k<B;k+=D){if(_.fromBufferAttribute(S,k),A.fromBufferAttribute(S,k+1),q_.distanceSqToSegment(_,A,C,M)>R)continue;C.applyMatrix4(s.matrixWorld);let V=i.ray.origin.distanceTo(C);V<i.near||V>i.far||r.push({distance:V,point:M.clone().applyMatrix4(s.matrixWorld),object:e})}}function b(S,_,A,M,C,D,T){let R=new j,O=new j,L=new j,k=new j,B=new j;if(R.fromBufferAttribute(M,C),O.fromBufferAttribute(M,D),L.fromBufferAttribute(M,T),A.intersectTriangle(R,O,L,!1,k)===null)return null;B.copy(k),B.applyMatrix4(S.matrixWorld);let V=_.ray.origin.distanceTo(B);return V<_.near||V>_.far?null:{faceIndex:1,distance:V,point:B.clone(),object:S}}},X_=new j,sl=new Qf,SQe=class extends ww{constructor(e){let t=new Rt,i=new Kf({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],n=[],s={},a=new qt(15711266),o=new qt(15711266),l=new qt(2857471);c("n1","n2",a),c("n2","n4",a),c("n4","n3",a),c("n3","n1",a),c("f1","f2",a),c("f2","f4",a),c("f4","f3",a),c("f3","f1",a),c("n1","f1",a),c("n2","f2",a),c("n3","f3",a),c("n4","f4",a),c("p","n1",o),c("p","n2",o),c("p","n3",o),c("p","n4",o),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l);function c(h,f,m){u(h,m),u(f,m)}function u(h,f){r.push(0,0,0),n.push(f.r,f.g,f.b),s[h]===void 0&&(s[h]=[]),s[h].push(r.length/3-1)}t.setAttribute("position",new yt(r,3)),t.setAttribute("color",new yt(n,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let e=this.geometry,t=this.pointMap;sl.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let i=1,r=1,n=.8;Nl("n1",t,e,sl,-i,-r,n),Nl("n2",t,e,sl,i,-r,n),Nl("n3",t,e,sl,-i,r,n),Nl("n4",t,e,sl,i,r,n);let s=n;Nl("f1",t,e,sl,-i,-r,s),Nl("f2",t,e,sl,i,-r,s),Nl("f3",t,e,sl,-i,r,s),Nl("f4",t,e,sl,i,r,s);let a=s,o=.5;Nl("u1",t,e,sl,i*.7*o,r*1.1,a),Nl("u2",t,e,sl,-i*.7*o,r*1.1,a),Nl("u3",t,e,sl,0,r*(1.1+.9*o),a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Nl(e,t,i,r,n,s,a){X_.set(n,s,a).unproject(r);let o=t[e];if(o!==void 0){let l=i.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],X_.x,X_.y,X_.z)}}var _Qe=class extends Dw(SQe){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){Iw(this.object,this.geometry,e,t,!0)}},OO;(e=>e.is=t=>"objectHelper"in t)(OO||(OO={}));var yy=(e,t)=>class extends Zk(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(i,r){this.objectHelper.raycast(i,r)}showGizmos(){for(let i in this.gizmos){let r=this.gizmos[i];r instanceof KA&&(r.visible=!0)}}updateEntityBoxSize(i,r){this.objectHelper.visible&&this.geometryHelper instanceof uc?(i.setScalar(0),r.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(i,r)}hideGizmos(){for(let i in this.gizmos){let r=this.gizmos[i];r instanceof KA&&(r.visible=!1)}}},Y_=790,c0=new j,$4=new j,J4=new Jt,eD=new j,K1=new j,tD=new j,Ea=class extends yy(Qf,_Qe){constructor(e="",t={...Hb.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=Ov.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new tt,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let i=this.width,r=this.height;this.orthoCamera=new I3(i*-.5,i*.5,r*.5,r*-.5,-5e4,1e4),this.perspCamera=new ya(45,i/r,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,i){typeof e=="number"&&(e=new j(e,t,i)),super.lookAt(e),this.getWorldPosition(c0),this.targetOffset=c0.distanceTo(e)}getTarget(e=new j){return this.getWorldDirection($4),this.getWorldPosition(c0),$4.multiplyScalar(this.targetOffset),e.copy(c0).add($4),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(c0),c0.distanceTo(e)}updateUp(){this.getWorldQuaternion(J4),eD.set(0,0,1).applyQuaternion(J4),K1.copy(mr.DEFAULT_UP),this.isUpVectorFlipped&&K1.negate(),K1.applyQuaternion(J4),tD.copy(mr.DEFAULT_UP).projectOnPlane(eD),this.angleOffsetFromUp=tD.angleTo(K1),this.angleOffsetFromUp*=tD.cross(K1).dot(eD)>=0?1:-1}updateTransformState(e,t){let i=super.updateTransformState(e,t);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),i}getViewFrontToObject(e){let t=e.getWorldPosition(new j),i=e.getWorldDirection(new j).multiplyScalar(this.targetOffset);return{position:t.clone().add(i),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new j).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new j;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,i=!1){if(this.aspect=e/t,i){let r=e>t?this.aspect:1,n=e>t?1:this.aspect;this.left=-Y_*.5*r,this.right=Y_*.5*r,this.top=Y_*.5*(1/n),this.bottom=-Y_*.5*(1/n)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,i,r,n,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,i,r,n,s):this.orthoCamera.setViewOffset(e,t,i,r,n,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return ER(t,e)}updateCameraSubtype(e,t){let i=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(i,t.zoom),t.near!==void 0&&this.setNear(i,t.near),t.fov!==void 0&&i==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},u0=new tt,EQe=new tt;function mq(e){let t=!1;return e.scene.objects.traverse((i,r)=>{var n;((n=r.geometry)==null?void 0:n.type)==="BooleanGeometry"&&(t=!0)}),t}var Lm=class extends vy{constructor(e,t,i){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Rt,this.onAfterRender=(r,n,s,a,o,l)=>{super.onAfterRender(r,n,s,a,o,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var r;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let n=0;n<this.children.length;n++){let s=this.children[n];s instanceof Lm&&s.dataPatched.visible===!0&&s.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let n=0;n<this.children.length;n++){let s=this.children[n];if(s instanceof Ka&&s.dataPatched.visible===!0&&((r=s.geometry.attributes.position)==null?void 0:r.count)>0&&s.geometry.drawRange.count>0&&s.booleanMeshSetAddress!==0){u0.multiplyMatrices(s.hiddenMatrix,s.matrix);try{if(s.booleanMeshSetAddress===-1){if((s.geometry.index??s.geometry.getAttribute("position")).count/3<15e5&&(s.booleanMeshSetAddress=wh.getMeshSet(s.geometry,e===!0,t)),s.booleanMeshSetAddress===-1)return;wh.transformMeshSet(s.booleanMeshSetAddress,u0),s.booleanMatrixInvOld.copy(u0).invert(),s.booleanWasTransformed=!1}else s instanceof Lm&&s.needsTransformForDownstream===!0?(wh.transformMeshSet(s.booleanMeshSetAddress,u0),s.needsTransformForDownstream=!1):s.booleanWasTransformed===!0&&(wh.transformMeshSet(s.booleanMeshSetAddress,EQe.multiplyMatrices(u0,s.booleanMatrixInvOld)),s.booleanMatrixInvOld.copy(u0).invert(),s.booleanWasTransformed=!1)}catch(a){console.error(a),s.booleanMeshSetAddress=0,s.geometry.userData.booleanOperationDidFail=!0;continue}wh.hasOpenEdges(s.booleanMeshSetAddress)===!1||n===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(s.booleanMeshSetAddress),s.geometry.userData.booleanOperationDidFail=!1):s.geometry.userData.booleanOperationDidFail="openEdges"}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new yt([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return wh.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let i=this.geometry;i.dispose(),this.geometry=new Rt,this.geometry.userData=i.userData,this.geometry.boundingSphere=i.boundingSphere;try{this.booleanMeshSetAddress=wh.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(n){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(n)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,fz(this),pz(this)}dispose(){super.dispose(),this.geometry.dispose()}},LO;(e=>{function t(i){return zi.is(i)&&i instanceof Ew}e.is=t})(LO||(LO={}));var gz=(e,t)=>class extends yy(e,t){updateState_Light(i,r){this.updateState_Entity(i,r),i.color!==void 0&&(this.color=r.shared.color(i.color)),i.intensity!==void 0&&(this.intensity=i.intensity),i.depth!==void 0&&(this.shadow.camera.far=i.depth,this.shadow.needsUpdate=!0),i.shadows!==void 0&&(this.castShadow=i.shadows)}},Yl=e=>e instanceof Ka,Lh=e=>e!==null&&e instanceof Lm,AQe=e=>e instanceof Ea,TQe=e=>LO.is(e),kO=e=>OO.is(e),CQe=new j(1,1,1),gq=new j,MQe=new j,vq=new Jt,Rw=class extends Dw(mBe){constructor(e,t=15){super(t),this.object=e,this.dummy=new Rh,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=this.dummy.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){Iw(this.object,Rw.geometryHelper,e,t,!1,this.dummy)}update(){}updateMatrix(){}updateMatrixWorld(e){this.object.matrixWorld.decompose(gq,vq,MQe),this.matrix.compose(gq,vq,CQe),super.updateMatrixWorld(e)}updateWorldMatrix(e,t){}},ov=class extends yy(Rh,Rw){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t),"buffer"in e&&Object.keys(e).length===1&&t.scene.reloadSplats()}},Yx=class extends yy(Rh,Rw){constructor(e,t,i){super(),this.super_Entity(e,t),this.context=i,this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},ose={RED:0,GREEN:1},Ow="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",PQe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;uniform vec4 kernel64[32];varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;}}`,Q_=class extends Vi{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new Qe(null),kernel16:new Qe(null),inputBuffer:new Qe(null),cocBuffer:new Qe(null),texelSize:new Qe(new pe),scale:new Qe(1)},blending:Wn,depthWrite:!1,depthTest:!1,fragmentShader:PQe,vertexShader:Ow}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),i=new Float32Array(32),r=0,n=0;for(let o=0;o<80;++o){let l=o*e,c=Math.sqrt(o)/Math.sqrt(80),u=c*Math.cos(l),h=c*Math.sin(l);o%5===0?(i[n++]=u,i[n++]=h):(t[r++]=u,t[r++]=h)}let s=[],a=[];for(let o=0;o<128;)s.push(new ni(t[o++],t[o++],t[o++],t[o++]));for(let o=0;o<32;)a.push(new ni(i[o++],i[o++],i[o++],i[o++]));this.uniforms.kernel64.value=s,this.uniforms.kernel16.value=a}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function yq(e,t,i){return e*(t-i)-t}function zO(e,t,i){return Math.min(Math.max((e+t)/(t-i),0),1)}var DQe=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,IQe=class extends Vi{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Qe(null),focusDistance:new Qe(0),focusRange:new Qe(0),cameraNear:new Qe(.3),cameraFar:new Qe(1e3)},blending:Wn,depthWrite:!1,depthTest:!1,fragmentShader:DQe,vertexShader:Ow}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=td){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-yq(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=zO(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-yq(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=zO(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ya?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},RQe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,OQe="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",xq=class extends Vi{constructor(e=new pe){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Qe(null),texelSize:new Qe(new pe),halfTexelSize:new Qe(new pe),kernel:new Qe(0),scale:new Qe(1)},blending:Wn,depthWrite:!1,depthTest:!1,fragmentShader:RQe,vertexShader:OQe}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.halfTexelSize.value.copy(i.texelSize.value).multiplyScalar(.5)}},LQe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,kQe=class extends Vi{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Qe(null),opacity:new Qe(1)},blending:Wn,depthWrite:!1,depthTest:!1,fragmentShader:LQe,vertexShader:Ow}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},zQe=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,BQe=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,Z3={COLOR:2},jQe={DISABLED:0},NQe=class extends Vi{constructor(e=new pe,t=Z3.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:iy.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Qe(null),depthBuffer:new Qe(null),predicationBuffer:new Qe(null),texelSize:new Qe(e)},blending:Wn,depthWrite:!1,depthTest:!1,fragmentShader:zQe,vertexShader:BQe}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=td){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},VQe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,UQe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",Vl={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},BO=class extends Vi{constructor(e,t,i,r,n=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:iy.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Qe(null),depthBuffer:new Qe(null),resolution:new Qe(new pe),texelSize:new Qe(new pe),cameraNear:new Qe(.3),cameraFar:new Qe(1e3),aspect:new Qe(1),time:new Qe(0)},blending:Wn,depthWrite:!1,depthTest:!1,dithering:n}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),i&&this.setUniforms(i),this.adoptCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=td){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=VQe.replace(Vl.FRAGMENT_HEAD,e.get(Vl.FRAGMENT_HEAD)).replace(Vl.FRAGMENT_MAIN_UV,e.get(Vl.FRAGMENT_MAIN_UV)).replace(Vl.FRAGMENT_MAIN_IMAGE,e.get(Vl.FRAGMENT_MAIN_IMAGE)),this.vertexShader=UQe.replace(Vl.VERTEX_HEAD,e.get(Vl.VERTEX_HEAD)).replace(Vl.VERTEX_MAIN_SUPPORT,e.get(Vl.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ya?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let i=this.uniforms;i.resolution.value.set(e,t),i.texelSize.value.set(1/e,1/t),i.aspect.value=e/t}static get Section(){return Vl}},FQe=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,HQe=class extends Vi{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:iy.replace(/\D+/g,"")},uniforms:{inputBuffer:new Qe(null),threshold:new Qe(0),smoothing:new Qe(1),range:new Qe(null)},blending:Wn,depthWrite:!1,depthTest:!1,fragmentShader:FQe,vertexShader:Ow}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},GQe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,lse={DISCARD:0,MULTIPLY:1},WQe=class extends Vi{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Qe(e),inputBuffer:new Qe(null),strength:new Qe(1)},blending:Wn,depthWrite:!1,depthTest:!1,fragmentShader:GQe,vertexShader:Ow}),this.toneMapped=!1,this.setColorChannel(ose.RED),this.setMaskFunction(lse.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Ta&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},qQe=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,XQe="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",YQe=class extends Vi{constructor(e=new pe,t=new pe){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Qe(null),searchTexture:new Qe(null),areaTexture:new Qe(null),resolution:new Qe(t),texelSize:new Qe(e)},blending:Wn,depthWrite:!1,depthTest:!1,fragmentShader:qQe,vertexShader:XQe}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.resolution.value.set(e,t)}},QQe=new Qf,kd=null;function KQe(){if(kd===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);kd=new Rt,kd.setAttribute!==void 0?(kd.setAttribute("position",new Xt(e,3)),kd.setAttribute("uv",new Xt(t,2))):(kd.addAttribute("position",new Xt(e,3)),kd.addAttribute("uv",new Xt(t,2)))}return kd}var $a=class{constructor(e="Pass",t=new go,i=QQe){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new kr(KQe(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new go),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=td){}render(e,t,i,r,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t=="object"&&typeof t.dispose=="function"){if(t instanceof go||t===this.renderer)continue;this[e].dispose()}}}},jO=class extends $a{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new kQe,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new Ni(1,1,{minFilter:yi,magFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,i,r,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,i){i!==void 0&&(this.renderTarget.texture.type=i,i!==Ta?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===pi&&(this.renderTarget.texture.encoding=pi))}},ZQe=class extends $a{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,i,r,n){let s=e.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},iD=new qt,vz=class extends $a{constructor(e=!0,t=!0,i=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,i){this.color=e,this.depth=t,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,i,r,n){let s=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),l=s!==null,c=a>=0;l?(iD.copy(e.getClearColor(iD)),e.setClearColor(s,c?a:o)):c&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(iD,o):c&&e.setClearAlpha(o)}},zd=-1,mo=class extends la{constructor(e,t=zd,i=zd,r=1){super(),this.resizable=e,this.base=new pe(1,1),this.preferred=new pe(t,i),this.target=this.preferred,this.s=r}get width(){let{base:e,preferred:t,scale:i}=this,r;return t.width!==zd?r=t.width:t.height!==zd?r=Math.round(t.height*(e.width/Math.max(e.height,1))):r=Math.round(e.width*i),r}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:i}=this,r;return t.height!==zd?r=t.height:t.width!==zd?r=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):r=Math.round(e.height*i),r}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(zd),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return zd}},rD=!1,bq=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let i;if(t.material.flatShading)switch(t.material.side){case wa:i=this.materialsFlatShadedDoubleSide;break;case Ds:i=this.materialsFlatShadedBackSide;break;default:i=this.materialsFlatShaded;break}else switch(t.material.side){case wa:i=this.materialsDoubleSide;break;case Ds:i=this.materialsBackSide;break;default:i=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=i[2]:t.isInstancedMesh?t.material=i[1]:t.material=i[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let i of t)i.uniforms=Object.assign({},e.uniforms),i.side=lc;t[2].skinning=!0,this.materialsBackSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=Ds,r}),this.materialsDoubleSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=wa,r}),this.materialsFlatShaded=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=Ds,r}),this.materialsFlatShadedDoubleSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=wa,r})}}render(e,t,i){let r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,rD){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,i);for(let s of n)s[0].material=s[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,i),t.overrideMaterial=n}e.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return rD}static set workaroundEnabled(e){rD=e}},$Qe=class extends $a{constructor(e,t,i=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new vz,this.overrideMaterialManager=i===null?null:new bq(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new bq(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,i,r,n){let s=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,c=s.background,u=e.shadowMap.autoUpdate,h=this.renderToScreen?null:t;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,s,a):e.render(s,a),a.layers.mask=l,s.background=c,e.shadowMap.autoUpdate=u}},wq=class extends $a{constructor(e,t,{resolutionScale:i=1,width:r=mo.AUTO_SIZE,height:n=mo.AUTO_SIZE,renderTarget:s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new $Qe(e,t,new qte({depthPacking:Ite}));let a=this.renderPass;a.skipShadowMapUpdate=!0,a.ignoreBackground=!0;let o=a.getClearPass();o.overrideClearColor=new qt(16777215),o.overrideClearAlpha=1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new Ni(1,1,{minFilter:_i,magFilter:_i,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new mo(this,r,n,i);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,r,n){let s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,s)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}},Fi={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},JQe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",eKe="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",tKe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",iKe="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",rKe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",nKe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",sKe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",aKe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",oKe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",lKe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",cKe="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",uKe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",hKe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",dKe="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",fKe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",pKe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",mKe="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",gKe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",vKe=new Map([[Fi.SKIP,null],[Fi.ADD,JQe],[Fi.ALPHA,eKe],[Fi.AVERAGE,tKe],[Fi.COLOR_BURN,iKe],[Fi.COLOR_DODGE,rKe],[Fi.DARKEN,nKe],[Fi.DIFFERENCE,sKe],[Fi.EXCLUSION,aKe],[Fi.LIGHTEN,oKe],[Fi.MULTIPLY,lKe],[Fi.DIVIDE,cKe],[Fi.NEGATION,uKe],[Fi.NORMAL,hKe],[Fi.OVERLAY,dKe],[Fi.REFLECT,fKe],[Fi.SCREEN,pKe],[Fi.SOFT_LIGHT,mKe],[Fi.SUBTRACT,gKe]]),yKe=class extends la{constructor(e,t=1){super(),this.f=e,this.opacity=new Qe(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return vKe.get(this.blendFunction)}},wu={NONE:0,DEPTH:1,CONVOLUTION:2},zu=class extends la{constructor(e,t,{attributes:i=wu.NONE,blendFunction:r=Fi.SCREEN,defines:n=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=i,this.fragmentShader=t,this.vertexShader=o,this.defines=n,this.uniforms=s,this.extensions=a,this.blendMode=new yKe(r),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=td){}update(e,t,i){}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t=="object"&&typeof t.dispose=="function"){if(t instanceof go||t===this.renderer)continue;this[e].dispose()}}}};function Sq(e,t,i){for(let r of t){let n="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(let a of i.entries())a[1]!==null&&i.set(a[0],a[1].replace(s,n))}}function xKe(e,t,i,r,n,s,a){let o=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=o.get("fragment")!==void 0&&/mainImage/.test(o.get("fragment")),c=o.get("fragment")!==void 0&&/mainUv/.test(o.get("fragment")),u=[],h=[],f=!1,m=!1;if(o.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(c&&(a&wu.CONVOLUTION)!==0)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!c)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let g=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,v=BO.Section;if(c){let b=`	${e}MainUv(UV);
`;i.set(v.FRAGMENT_MAIN_UV,i.get(v.FRAGMENT_MAIN_UV)+b),f=!0}if(o.get("vertex")!==null&&/mainSupport/.test(o.get("vertex"))){let b=`	${e}MainSupport(`;b+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o.get("vertex"))?`vUv);
`:`);
`,i.set(v.VERTEX_MAIN_SUPPORT,i.get(v.VERTEX_MAIN_SUPPORT)+b),u=u.concat([...o.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(S=>S[1])),h=h.concat(u).concat([...o.get("vertex").matchAll(g)].map(S=>S[1]))}h=h.concat([...o.get("fragment").matchAll(g)].map(b=>b[1])),h=h.concat([...t.defines.keys()].map(b=>b.replace(/\([\w\s,]*\)/g,""))),h=h.concat([...t.uniforms.keys()]),t.uniforms.forEach((b,S)=>s.set(e+S.charAt(0).toUpperCase()+S.slice(1),b)),t.defines.forEach((b,S)=>n.set(e+S.charAt(0).toUpperCase()+S.slice(1),b)),Sq(e,h,n),Sq(e,h,o);let x=t.blendMode;if(r.set(x.blendFunction,x),l){let b=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,S=`${e}MainImage(color0, UV, `;(a&wu.DEPTH)!==0&&b.test(o.get("fragment"))&&(S+="depth, ",m=!0),S+=`color1);
	`;let _=e+"BlendOpacity";s.set(_,x.opacity),S+=`color0 = blend${x.blendFunction}(color0, color1, ${_});

	`,i.set(v.FRAGMENT_MAIN_IMAGE,i.get(v.FRAGMENT_MAIN_IMAGE)+S),S=`uniform float ${_};

`,i.set(v.FRAGMENT_HEAD,i.get(v.FRAGMENT_HEAD)+S)}i.set(v.FRAGMENT_HEAD,i.get(v.FRAGMENT_HEAD)+o.get("fragment")+`
`),o.get("vertex")!==null&&i.set(v.VERTEX_HEAD,i.get(v.VERTEX_HEAD)+o.get("vertex")+`
`)}return{varyings:u,transformedUv:f,readDepth:m}}var OT=class extends $a{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new BO(null,null,null,e),this.effects=t.sort((i,r)=>r.attributes-i.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=BO.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),i=new Map,r=new Map,n=new Map,s=new Set,a=0,o=0,l=0,c=!1,u=!1;for(let f of this.effects)if(f.blendMode.blendFunction===Fi.SKIP)l|=f.getAttributes()&wu.DEPTH;else if((l&f.getAttributes()&wu.CONVOLUTION)!==0)console.error("Convolution effects cannot be merged",f);else{l|=f.getAttributes();let m="e"+a++,g=xKe(m,f,t,i,r,n,l);if(o+=g.varyings.length,c=c||g.transformedUv,u=u||g.readDepth,f.extensions!==null)for(let v of f.extensions)s.add(v)}let h=/\bblend\b/g;for(let f of i.values()){let m=f.getShaderCode().replace(h,`blend${f.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+m+`
`)}(l&wu.DEPTH)!==0?(u&&t.set(e.FRAGMENT_MAIN_IMAGE,`float depth = readDepth(UV);

	`+t.get(e.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,c?(t.set(e.FRAGMENT_MAIN_UV,`vec2 transformedUv = vUv;
`+t.get(e.FRAGMENT_MAIN_UV)),r.set("UV","transformedUv")):r.set("UV","vUv"),t.forEach((f,m,g)=>g.set(m,f.trim().replace(/^#/,`
#`))),this.uniformCount=n.size,this.varyingCount=o,this.skipRendering=a===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(s).setUniforms(n).setDefines(r)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=td){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let i of this.effects)i.setDepthTexture(e,t)}render(e,t,i,r,n){for(let s of this.effects)s.update(e,t,r);if(!this.skipRendering||this.renderToScreen){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,s.time+=r,e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let i of this.effects)i.setSize(e,t)}initialize(e,t,i){this.renderer=e;for(let r of this.effects)r.initialize(e,t,i),r.addEventListener("change",n=>this.handleEvent(n));this.updateMaterial(),this.verifyResources(),i!==void 0&&i!==Ta&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},bKe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],yz=class extends $a{constructor({resolutionScale:e=.5,width:t=mo.AUTO_SIZE,height:i=mo.AUTO_SIZE,kernelSize:r=$3.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new Ni(1,1,{minFilter:yi,magFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let n=this.resolution=new mo(this,t,i,e);n.addEventListener("change",s=>this.setSize(n.baseWidth,n.baseHeight)),this.blurMaterial=new xq,this.ditheredBlurMaterial=new xq,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=r}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,r,n){let s=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,c=bKe[this.kernelSize],u=this.blurMaterial,h=t,f,m;for(this.fullscreenMaterial=u,f=0,m=c.length-1;f<m;++f){let g=(f&1)===0?o:l;u.kernel=c[f],u.inputBuffer=h.texture,e.setRenderTarget(g),e.render(s,a),h=g}this.dithering&&(u=this.ditheredBlurMaterial,this.fullscreenMaterial=u),u.kernel=c[f],u.inputBuffer=h.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(s,a)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let r=i.width,n=i.height;this.renderTargetA.setSize(r,n),this.renderTargetB.setSize(r,n),this.blurMaterial.setSize(r,n),this.ditheredBlurMaterial.setSize(r,n)}initialize(e,t,i){i!==void 0&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==Ta?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===pi&&(this.renderTargetA.texture.encoding=pi,this.renderTargetB.texture.encoding=pi))}static get AUTO_SIZE(){return mo.AUTO_SIZE}},wKe=class extends $a{constructor({width:e=mo.AUTO_SIZE,height:t=mo.AUTO_SIZE,renderTarget:i,luminanceRange:r,colorOutput:n}={}){super("LuminancePass"),this.fullscreenMaterial=new HQe(n,r),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new Ni(1,1,{minFilter:yi,magFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let s=this.resolution=new mo(this,e,t);s.addEventListener("change",a=>this.setSize(s.baseWidth,s.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,i,r,n){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}initialize(e,t,i){i!==void 0&&i!==Ta&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},SKe=class extends $a{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new vz(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,i,r,n){let s=e.getContext(),a=e.state.buffers,o=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,h=1-u;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,u,4294967295),a.stencil.setClear(h),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,i))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(i),e.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},pl=class extends $a{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,i,r,n){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}initialize(e,t,i){i!==void 0&&i!==Ta&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},nD=1/1e3,_Ke=1e3,EKe=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*nD}getFixedDelta(){return this.fixedDelta*nD}setFixedDelta(e){return this.fixedDelta=e*_Ke,this}getElapsed(){return this.elapsed*nD}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},$3={MEDIUM:2,LARGE:3,HUGE:5},AKe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,TKe=class extends zu{constructor({blendFunction:e=Fi.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:i=.025,resolutionScale:r=.5,intensity:n=1,width:s=mo.AUTO_SIZE,height:a=mo.AUTO_SIZE,kernelSize:o=$3.LARGE}={}){super("BloomEffect",AKe,{blendFunction:e,uniforms:new Map([["map",new Qe(null)],["intensity",new Qe(n)]])}),this.renderTarget=new Ni(1,1,{minFilter:yi,magFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new wKe({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=i,this.blurPass=new yz({resolutionScale:r,width:s,height:a,kernelSize:o});let l=this.blurPass.getResolution();l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,i){let r=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,r),this.blurPass.render(e,r,r)):this.blurPass.render(e,t,r)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height),this.luminancePass.resolution.copy(i)}initialize(e,t,i){this.blurPass.initialize(e,t,i),i!==void 0&&(this.renderTarget.texture.type=i,e.outputEncoding===pi&&(this.renderTarget.texture.encoding=pi))}},CKe="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",MKe=class extends zu{constructor({blendFunction:e=Fi.NORMAL,brightness:t=0,contrast:i=0}={}){super("BrightnessContrastEffect",CKe,{blendFunction:e,uniforms:new Map([["brightness",new Qe(t)],["contrast",new Qe(i)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},PKe="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",DKe=class extends zu{constructor(e=Fi.NORMAL){super("ColorAverageEffect",PKe,{blendFunction:e})}},IKe="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",RKe="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",OKe=class extends zu{constructor({blendFunction:e=Fi.NORMAL,offset:t=new pe(.001,5e-4)}={}){super("ChromaticAberrationEffect",IKe,{vertexShader:RKe,blendFunction:e,attributes:wu.CONVOLUTION,uniforms:new Map([["offset",new Qe(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},LKe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,kKe=class extends zu{constructor(e,{blendFunction:t=Fi.NORMAL,worldFocusDistance:i,worldFocusRange:r,focusDistance:n=0,focalLength:s=.1,focusRange:a=s,bokehScale:o=1,width:l=mo.AUTO_SIZE,height:c=mo.AUTO_SIZE}={}){super("DepthOfFieldEffect",LKe,{blendFunction:t,attributes:wu.DEPTH,uniforms:new Map([["nearColorBuffer",new Qe(null)],["farColorBuffer",new Qe(null)],["nearCoCBuffer",new Qe(null)],["scale",new Qe(1)]])}),this.camera=e,this.renderTarget=new Ni(1,1,{minFilter:yi,magFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new pl(new IQe(e));let u=this.cocMaterial;u.focusDistance=n,u.focusRange=a,i!==void 0&&(u.worldFocusDistance=i),r!==void 0&&(u.worldFocusRange=r),this.blurPass=new yz({kernelSize:$3.MEDIUM,width:l,height:c});let h=this.blurPass.getResolution();h.addEventListener("change",m=>this.setSize(h.getBaseWidth(),h.getBaseHeight())),this.maskPass=new pl(new WQe(this.renderTargetCoC.texture));let f=this.maskPass.fullscreenMaterial;f.maskFunction=lse.MULTIPLY,f.colorChannel=ose.GREEN,this.bokehNearBasePass=new pl(new Q_(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new pl(new Q_(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new pl(new Q_(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new pl(new Q_(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=o}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let i of t)i.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,i=t.position.distanceTo(e);return zO(-i,t.near,t.far)}setDepthTexture(e,t=td){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,i){let r=this.renderTarget,n=this.renderTargetCoC,s=this.renderTargetCoCBlurred,a=this.renderTargetMasked;if(this.target!==null){let o=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=o}this.cocPass.render(e,null,n),this.blurPass.render(e,n,s),this.maskPass.render(e,t,a),this.bokehFarBasePass.render(e,a,r),this.bokehFarFillPass.render(e,r,this.renderTargetFar),this.bokehNearBasePass.render(e,t,r),this.bokehNearFillPass.render(e,r,this.renderTargetNear)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let r=i.width,n=i.height,s=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];s.push(this.renderTargetCoC,this.renderTargetMasked),s.forEach(a=>a.setSize(e,t)),s=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],s.forEach(a=>a.setSize(r,n)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(a=>a.fullscreenMaterial.setSize(r,n))}initialize(e,t,i){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(r=>r.initialize(e,t,i)),this.blurPass.initialize(e,t,Ta),i!==void 0&&(this.renderTarget.texture.type=i,this.renderTargetNear.texture.type=i,this.renderTargetFar.texture.type=i,this.renderTargetMasked.texture.type=i,e.outputEncoding===pi&&(this.renderTarget.texture.encoding=pi,this.renderTargetNear.texture.encoding=pi,this.renderTargetFar.texture.encoding=pi,this.renderTargetMasked.texture.encoding=pi))}};new j;new tt;var zKe="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",BKe=class extends zu{constructor({blendFunction:e=Fi.NORMAL,hue:t=0,saturation:i=0}={}){super("HueSaturationEffect",zKe,{blendFunction:e,uniforms:new Map([["hue",new Qe(new j)],["saturation",new Qe(i)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),i=Math.cos(e);this.uniforms.get("hue").value.set((2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new qt;var jKe=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,NKe=class extends zu{constructor({blendFunction:e=Fi.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",jKe,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},VKe="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",UKe=class extends zu{constructor(e=30){super("PixelationEffect",VKe,{uniforms:new Map([["active",new Qe(!1)],["d",new Qe(new pe)]])}),this.resolution=new pe,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new j;new j;var _q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",Eq="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",FKe="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",HKe="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",qp={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},cse=class extends zu{constructor({preset:e=qp.MEDIUM,edgeDetectionMode:t=Z3.COLOR,predicationMode:i=jQe.DISABLED}={}){super("SMAAEffect",FKe,{vertexShader:HKe,blendFunction:Fi.NORMAL,attributes:wu.CONVOLUTION|wu.DEPTH,uniforms:new Map([["weightMap",new Qe(null)]])});let r,n;arguments.length>1&&(r=arguments[0],n=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new Ni(1,1,{minFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new vz(!0,!1,!1),this.clearPass.overrideClearColor=new qt(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new pl(new NQe),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=i,this.weightsPass=new pl(new YQe);let s=new hie;s.onLoad=()=>{let a=new on(r);a.name="SMAA.Search",a.magFilter=_i,a.minFilter=_i,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!0,this.weightsMaterial.searchTexture=a;let o=new on(n);o.name="SMAA.Area",o.magFilter=yi,o.minFilter=yi,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!1,this.weightsMaterial.areaTexture=o,this.dispatchEvent({type:"load"})},s.itemStart("search"),s.itemStart("area"),r!==void 0&&n!==void 0?(s.itemEnd("search"),s.itemEnd("area")):typeof Image<"u"&&(r=new Image,n=new Image,r.addEventListener("load",()=>s.itemEnd("search")),n.addEventListener("load",()=>s.itemEnd("area")),r.src=_q,n.src=Eq),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,i=this.weightsMaterial;switch(e){case qp.LOW:t.edgeDetectionThreshold=.15,i.orthogonalSearchSteps=4,i.diagonalDetection=!1,i.cornerDetection=!1;break;case qp.MEDIUM:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=8,i.diagonalDetection=!1,i.cornerDetection=!1;break;case qp.HIGH:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=16,i.diagonalSearchSteps=8,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break;case qp.ULTRA:t.edgeDetectionThreshold=.05,i.orthogonalSearchSteps=32,i.diagonalSearchSteps=16,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break}}setDepthTexture(e,t=td){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,i){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return _q}static get areaImageDataURL(){return Eq}},GKe=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,K_={DEFAULT:0,ESKIL:1},WKe=class extends zu{constructor({blendFunction:e=Fi.NORMAL,technique:t=K_.DEFAULT,eskil:i=!1,offset:r=.5,darkness:n=.5}={}){super("VignetteEffect",GKe,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new Qe(r)],["darkness",new Qe(n)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===K_.ESKIL}set eskil(e){this.technique=e?K_.ESKIL:K_.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},id=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(i){this.effect.blendMode.opacity.value=i},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(i){this.effect.blendMode.setBlendFunction(Number(i))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Fi.NORMAL}},qKe=class extends id{constructor(){super(TKe),this.blendFunction=Fi.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},XKe=class extends id{constructor(){super(MKe)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},YKe=class extends id{constructor(){super(OKe),this.effect.offset=new pe(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},QKe=class extends id{constructor(){super(DKe)}},KKe=class extends id{constructor(){super(BKe),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},ZKe=class extends id{constructor(){super(NKe),this.blendFunction=Fi.OVERLAY}},$Ke=class extends id{constructor(){super(WKe)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},JKe=class extends id{constructor(e){super(kKe)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e/2e3}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=this.isPerspectiveCamera?e/2e3:(e+992)/2e3}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}setCamera(e){let t=!1;(e.isPerspectiveCamera&&this.isPerspectiveCamera===!1||!e.isPerspectiveCamera&&this.isPerspectiveCamera===!0)&&(t=!0),e.isPerspectiveCamera?(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e.perspCamera),this.isPerspectiveCamera=!0):(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e),this.isPerspectiveCamera=!1),t&&this.effect.setChanged()}},eZe=class extends id{constructor(){super(UKe)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},tZe=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,iZe=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,rZe=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,nZe=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,NO=class extends Vi{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new Qe(null)},blending:Wn,depthWrite:!1,depthTest:!1,vertexShader:rZe,fragmentShader:nZe})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},sZe=class extends $a{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new NO,this.resolutionVector=new pe,this.resolveMaterial=new Vi({name:"TAAResolveMaterial",uniforms:{inputBuffer:new Qe(null),historyBuffer:new Qe(null),velocityBuffer:new Qe(null),depthBuffer:new Qe(null),resolution:new Qe(new pe)},blending:Wn,depthWrite:!1,depthTest:!1,vertexShader:tZe,fragmentShader:iZe}),this.historyRenderTarget=new Ni(1024,1024,{minFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new Ni(1024,1024,{minFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let i=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(i),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},aZe=class extends $a{constructor(e,t,i){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new wq(e,t,{renderTarget:i.transmissionDepthTarget}),this.passThroughMaterial=new NO,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new NO,this.depthPass=new wq(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,i){let r=this.camera.layers.mask,n=e;n.setRenderTarget(n.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],n.clear(),n.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,i),n.shadowMap.needsUpdate=!1,n.shadowMap.autoUpdate=!1;let s=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(s),e.render(this.splineScene,this.camera),this.camera.layers.mask=r}},Aq=new go,oZe=new Vi({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),VO=class extends $a{constructor(e,t,i){super("OpaquePass",t??Aq,i),this.MRTCompatible=!0,this.originalMaterials=[],this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.MRTCompatible=e}setCamera(e){this.camera=e}setScene(e){this.scene=e??Aq}getScene(){return this.scene}render(e,t){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.length=0,this.scene.traverse(r=>{r.layers.isEnabled(3)&&r instanceof Ka&&(this.originalMaterials.push([r,r.material]),r.material=oZe)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let i=this.renderToScreen?null:t;e.setRenderTarget(i),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach(r=>{r[0].material=r[1]})}},lZe=class{constructor(e,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:r=0,frameBufferType:n=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new jO,this.depthTexture=null,this.timer=new EKe,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,i,n,r,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,i,n,r,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,i,n,r,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var t;if(this.renderer=e,e!==null){let i=e.getSize(new pe),r=((t=e.getContext().getContextAttributes())==null?void 0:t.alpha)??!1,n=this.inputBuffer.texture[0].type;n===Ta&&e.outputEncoding===pi&&(this.inputBuffer.texture[0].encoding=pi,this.outputBuffer.texture[0].encoding=pi,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(i.width,i.height,!1);for(let s of this.passes)s.initialize(e,r,n)}}replaceRenderer(e,t=!0){let i=this.renderer,r=i.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(i.domElement),r.appendChild(e.domElement)),i}createDepthTexture(){let e=this.depthTexture=new Mv(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.stencilBuffer?(e.format=Pm,e.type=pm):e.type=Dh,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,r,n,s){let a=this.renderer,o=a===null?new pe:a.getDrawingBufferSize(new pe),l={minFilter:yi,magFilter:yi,wrapS:qr,wrapT:qr,stencilBuffer:t,depthBuffer:e},c;return r>0?(c=new Ni(o.width,o.height,l),c.samples=r):(n?(c=new jte(o.width,o.height,2,l),c.texture[1].type=Xh):c=new Ni(o.width,o.height,l),c.depthTexture=new Mv(2048,2048),c.depthTexture.type=wr),i===Ta&&a!==null&&a.outputEncoding===pi&&(Array.isArray(c.texture)?c.texture.forEach(u=>u.encoding=pi):c.texture.encoding=pi),Array.isArray(c.texture)?c.texture.forEach((u,h)=>{u.name=`EffectComposer.Buffer ${n} ${h}`,u.generateMipmaps=!1}):(c.texture.name=`EffectComposer.Buffer ${n}`,c.texture.generateMipmaps=!1),c.name=s,c}addPass(e,t){var o;let i=this.passes,r=this.renderer,n=r.getDrawingBufferSize(new pe),s=((o=r.getContext().getContextAttributes())==null?void 0:o.alpha)??!1,a;if(e.MRTCompatible&&(a=this.inputBuffer.texture[0].type),e.MRTCompatible||(a=this.inputBuffer.texture.type),e.setRenderer(r),e.setSize(n.width,n.height),e.initialize(r,s,a),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?i.splice(t,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let l=this.createDepthTexture();for(e of i)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,i=t.indexOf(e);if(i!==-1&&t.splice(i,1).length>0){if(this.depthTexture!==null){let r=(n,s)=>n||s.needsDepthTexture;t.reduce(r,!1)||e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null)}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,i=this.copyPass,r=this.inputBuffer,n=this.outputBuffer,s=this.inputBufferSingle,a=this.outputBufferSingle,o=!1,l,c,u,h;e===void 0&&(e=this.timer.update().getDelta());for(let f of this.passes)f.enabled&&(f.MRTCompatible?f.render(t,r,n,e,o):f.render(t,s,a,e,o),f.needsSwap&&(o&&(i.renderToScreen=f.renderToScreen,l=t.getContext(),c=t.state.buffers.stencil,c.setFunc(l.NOTEQUAL,1,4294967295),i.render(t,r,n,e,o),c.setFunc(l.EQUAL,1,4294967295)),u=r,h=s,r=n,s=a,n=u,a=h),f instanceof SKe?o=!0:f instanceof ZQe&&(o=!1))}setSize(e,t,i){let r=this.renderer;if(this._width=e,this._height=t,e===void 0||t===void 0){let s=r.getSize(new pe);e=s.width,t=s.height}r.setSize(e,t,i);let n=r.getDrawingBufferSize(new pe);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height),this.inputBufferSingle.setSize(n.width,n.height),this.outputBufferSingle.setSize(n.width,n.height);for(let s of this.passes)s.setSize(n.width,n.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},cZe=new Vi({name:"CombineMaterial",uniforms:{inputBufferA:new Qe(null),inputBufferB:new Qe(null)},blending:Wn,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),uZe=class extends $a{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=cZe,this.helperPass=new VO(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new VO(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new cse({preset:qp.LOW,edgeDetectionMode:Z3.COLOR});this.effectPass=new OT(this.camera,t),this.rt=new Ni(10,10,{minFilter:yi,magFilter:yi,wrapS:qr,wrapT:qr,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,i){super.initialize(e,t,i),this.effectPass.initialize(e,t,i)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,i){this.rt.depthTexture=t.depthTexture;let r=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,i),this.fullscreenMaterial.uniforms.inputBufferA.value=i.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(r),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},hZe=`#define GLSLIFY 1
#include <skinning_pars_vertex>
#include <morphtarget_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,dZe=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,fZe=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,pZe=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,mZe=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,gZe=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,Z1=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],vZe=new Vi({vertexShader:hZe,fragmentShader:dZe}),h0=new Vi({vertexShader:mZe,fragmentShader:gZe,uniforms:{texture_ao_lrez:new Qe(null),texture_depth_lrez:new Qe(null),texture_depth_hrez:new Qe(null),near:new Qe(null),far:new Qe(null)}}),yZe=class extends $a{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let i=1024,r=1024;this.gBuffer=new Ni(i,r,{type:Cw?Xh:wr,depthTexture:new Mv(i,r),minFilter:yi,magFilter:yi}),this.depthBufferHighRes=new Ni(i,r,{depthTexture:new Mv(i,r)}),this.aoBuffer=new Ni(i,r,{minFilter:yi,magFilter:yi}),this.splineScene=e,this.splineCamera=t;let n=new Float32Array(Z1.length*2);for(let a=0;a<Z1.length;a++){let o=a*2;n[o+0]=Z1[a][0],n[o+1]=Z1[a][1]}this.blueNoiseInDiskTexture=new Ga(n,Z1.length,1,BA,wr),this.blueNoiseInDiskTexture.wrapS=Ph,this.blueNoiseInDiskTexture.wrapT=Ph,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new Vi({vertexShader:fZe,fragmentShader:pZe,uniforms:{near:new Qe(null),far:new Qe(null),fov:new Qe(null),proj_info:new Qe(new ni),is_ortho:new Qe(!1),resolution:new Qe(new pe),radius_of_influence:new Qe(8),radius_in_screen_space:new Qe(1),exponent:new Qe(1),ao_color:new Qe(new j),bias:new Qe(.5),texture_depth:new Qe(null),texture_normals:new Qe(null),texture_blue_noise:new Qe(null),texture_blue_noise_in_disk:new Qe(this.blueNoiseInDiskTexture),frame_index:new Qe(0),fog_enabled:new Qe(!1),fog_near:new Qe(1),fog_far:new Qe(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new Ni(i,r,{minFilter:yi,magFilter:yi,wrapS:qr,wrapT:qr,depthBuffer:!1,type:wr});let s=new cse({preset:qp.ULTRA,edgeDetectionMode:Z3.COLOR});this.effectPass=new OT(this.camera,s)}initialize(e,t,i){super.initialize(e,t,i),this.effectPass.initialize(e,t,i)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let i=this._runHalfRes?.5:1,r=e*i,n=t*i;this.gBuffer.setSize(r,n),this.aoBuffer.setSize(r,n),this.hbaoMaterial.uniforms.resolution.value.set(r,n),this.aaBuffer.setSize(r,n),this.effectPass.setSize(r,n)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}setDepthTexture(e){this.depthBufferHighRes.depthTexture=e,h0.uniforms.texture_depth_hrez.value=e,h0.needsUpdate=!0}render(e,t,i){this.splineScene.overrideMaterial=vZe;let r=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=r,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let n=this.splineCamera.perspCamera.projectionMatrix.elements,s=2/n[0],a=2/n[5],o=-(1-n[8])/n[0],l=-(1+n[9])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(s,a,o,l);let c=this.splineCamera.perspCamera.fov*(Math.PI/180),u=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(c*.5)*2),h=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*u;this.hbaoMaterial.uniforms.radius_in_screen_space.value=h,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let n=this.splineCamera.orthoCamera.projectionMatrix.elements,s=2/n[0],a=2/n[5],o=-(1+n[12])/n[0],l=-(1-n[13])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(s,a,o,l);let c=.5*(this.hbaoMaterial.uniforms.resolution.value.y/a),u=this.hbaoMaterial.uniforms.radius_of_influence.value*c;this.hbaoMaterial.uniforms.radius_in_screen_space.value=u,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=h0,h0.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,h0.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,h0.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},xZe=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,bZe=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,wZe=class extends pl{constructor(){super(new Vi({vertexShader:xZe,fragmentShader:bZe,uniforms:{tInput:new Qe(null),tMap:new Qe(null),uResolution:new Qe(new pe),uSize:new Qe(new pe),uCoords:new Qe(new pe),uScale:new Qe(1),uSceneColor:new Qe(new qt(16711680)),uDPR:new Qe(1),uCurrent:new Qe(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},SZe=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,_Ze=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,EZe=[],AZe=class extends pl{constructor(){super(new Vi({vertexShader:SZe,fragmentShader:_Ze,uniforms:{toScene:new Qe(null),fromScene:new Qe(null),uResolution:new Qe(new pe),uDPR:new Qe(1),mixRatio:new Qe(0),threshold:new Qe(.1),useTexture:new Qe(0),tMixTexture:{value:EZe[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}},TZe=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,CZe=`
uniform sampler2D inputBuffer;
uniform sampler2D blurredInputBuffer;
uniform sampler2D overlay;
uniform float blurIntensity;

uniform vec2 uResolution;
uniform float uDPR;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( overlay, screenUv );
	vec4 texel2 = texture2D( inputBuffer, screenUv );
	vec4 texel3 = texture2D( blurredInputBuffer, screenUv );

	float blurMask2 = max(sign(texel1.a), 0.0) * blurIntensity;
    gl_FragColor = mix( mix(texel2, texel3, blurMask2), texel1, texel1.a );
}
`,MZe=class extends pl{constructor(){super(new Vi({vertexShader:TZe,fragmentShader:CZe,uniforms:{inputBuffer:new Qe(null),blurredInputBuffer:new Qe(null),overlay:new Qe(null),uResolution:new Qe(new pe),uDPR:new Qe(1),blurIntensity:new Qe(0)}})),this._blurEnabled=!1,this.blurTarget=new Ni(1,1,{minFilter:yi,magFilter:yi,wrapS:qr,wrapT:qr}),this.blurPass=new yz({width:window.innerWidth,height:window.innerHeight,kernelSize:$3.HUGE,resolutionScale:.25}),this.blurPass.renderToScreen=!1,this.uniforms.blurredInputBuffer.value=this.blurTarget.texture}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.overlay.value}set texture(e){this.uniforms.overlay.value=e}setResolution(e,t,i=1){this.uniforms.uResolution.value.set(e,t),this.uniforms.uDPR.value=i,this.blurPass.setSize(e,t),this.blurTarget.setSize(e,t),this.blurPass.setSize(e,t)}get uiCanvas(){return this._uiCanvas}set uiCanvas(e){this._uiCanvas=e,e.texture&&(this.uniforms.overlay.value=e.texture);let t=e.frame;if(t){let i=t.data.backgroundBlur,r=i.radius;this._blurEnabled=i.enabled,this.uniforms.blurIntensity.value=this._blurEnabled?1:0,this.blurPass.scale=r/3}}render(e,t,i,r,n){this._blurEnabled&&(this.blurPass.setDepthTexture(this.getDepthTexture()),this.blurPass.render(e,t,this.blurTarget,r,n)),super.render(e,t,i,r,n)}},PZe=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,DZe=`
uniform sampler2D tInput;
uniform sampler2D tOverlayImage;
varying vec2 vUv;
uniform vec2 uResolution;
uniform vec2 uRightBottom;
uniform vec2 uImageSize;
uniform float uScale;
uniform float uDPR;

vec3 blendNormal(vec3 base, vec3 blend) {
	return blend;
}

vec3 blendNormal(vec3 base, vec3 blend, float opacity) {
	return (blendNormal(base, blend) * opacity + base * (1.0 - opacity));
}

vec4 drawFixedSizeImage(sampler2D image, vec2 screenUV, vec2 imageSize, vec2 imageCoords, vec2 screenSize, float dpr) {
	vec2 uv = (screenUV * screenSize * dpr - imageCoords) / (imageSize * dpr);
	if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {
		return vec4(0.0);
	}
	return texture2D(image, uv);
}

void main() {
    vec2 screenUV = gl_FragCoord.xy / (uResolution.xy * uDPR);
	vec2 imageCoords = vec2(uResolution.x * uDPR - uImageSize.x * uScale * uDPR - uRightBottom.x * uDPR, uRightBottom.y * uDPR);
    vec4 background = texture2D(tInput, screenUV);
    vec4 image = drawFixedSizeImage(tOverlayImage, screenUV, uImageSize * uScale, imageCoords, uResolution, uDPR);
    gl_FragColor = vec4(blendNormal(background.rgb, image.rgb, image.a), max(background.a, image.a));
}
`,IZe=class extends pl{constructor(){super(new Vi({vertexShader:PZe,fragmentShader:DZe,uniforms:{tInput:new Qe(null),tOverlayImage:new Qe(null),uResolution:new Qe(new pe),uImageSize:new Qe(new pe),uRightBottom:new Qe(new pe(20,20)),uScale:new Qe(.25),uDPR:new Qe(1)}}),"tInput")}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tOverlayImage.value}set texture(e){this.uniforms.tOverlayImage.value=e,this.uniforms.uImageSize.value.set(e.image.width,e.image.height)}};function Tq(e,t){return t&&t.enabled&&e.push(t.effect),e}var RZe=e=>Object.values(Fi).includes(e)?e:Fi.NORMAL,OZe=class extends la{constructor(e,t){super(),this._needsDOFResize=t,this.postprocessingState=gT.defaultData,this._scene=new go,this._camera=new Ea,this.effects=new Map,this.blueNoiseTexture=new Ga,this._renderToScreen=!0,this._isUIOverlayEnabled=!1,this.clock=new $ze,this.renderer=e,this.debug=!1,this.effects.set("bloom",new qKe),this.effects.set("chromaticAberration",new YKe),this.effects.set("vignette",new $Ke),this.effects.set("noise",new ZKe),this.effects.set("colorAverage",new QKe),this.effects.set("hueSaturation",new KKe),this.effects.set("brightnessContrast",new XKe),this.effects.set("depthOfField",new JKe),this.effects.set("pixelation",new eZe),this.effectComposer=new lZe(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new VO(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new aZe(this.scene,this.camera,this.renderer),this.aoPass=new yZe(this.scene,this.camera),this.taaPass=new sZe,this.taaPass.renderToScreen=!1,this.helperPass=new uZe(this.camera),this.helperPass.renderToScreen=!1,this.stylesOverlayPass=new wZe,this.stylesOverlayPass.enabled=!1,this.uiOverlayPass=new MZe,this.uiOverlayPass.enabled=!1,this.logoOverlayPass=new IZe,this.logoOverlayPass.enabled=!1,this.sceneTransitionPass=new AZe,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.stylesOverlayPass.texture=e,this.stylesOverlayPass.enabled=!0):this.stylesOverlayPass.enabled=!1}get overlayTexture(){return this.stylesOverlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){let t=this._camera!==e;this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),t&&this.transmissionPass.updatePasses(this.renderer),this.aoPass.setCamera(e),this.helperPass.setCamera(e),this.effects.get("depthOfField").setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let i=this.effectComposer.passes[t];if(i.enabled===!0&&!e&&this._renderToScreen){i.renderToScreen=!0,e=!0;continue}i.renderToScreen=!1}}get isUIOverlayEnabled(){return this._isUIOverlayEnabled}disableUIOverlay(){this._isUIOverlayEnabled=!1}enableUIOverlay(){this._isUIOverlayEnabled=!0}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new Ga(e,128,128),this.blueNoiseTexture.wrapS=Ph,this.blueNoiseTexture.wrapT=Ph,this.blueNoiseTexture.minFilter=_i,this.blueNoiseTexture.magFilter=_i,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,i,r,n,s,a,o){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=i,this.aoPass.aoColor=r,this.aoPass.fogEnabled=n,this.aoPass.fogNear=s,this.aoPass.fogFar=a,this.aoPass.runHalfRes!==!o&&(this.aoPass.runHalfRes=!o)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,t,i;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let r=[this.effects.get("pixelation")].reduce(Tq,[]);r.length>0&&(this.uvEffectPass=new OT(this.camera,...r),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let n=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("depthOfField"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(Tq,[]);if(n.length>0&&(this.effectPass=new OT(this.camera,...n),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass),this._needsDOFResize&&((i=this.effects.get("depthOfField"))==null?void 0:i.enabled)&&window!==void 0)){let s=this.renderer.viewportWidth,a=this.renderer.viewportHeight;this.renderer.setSize(s-1,a-1),this.renderer.setSize(s,a)}}this.effectComposer.addPass(this.stylesOverlayPass),this.effectComposer.addPass(this.uiOverlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.logoOverlayPass)}_initCopyPass(){if(this._savePass)return;let e=new pe;this.renderer.getDrawingBufferSize(e),this._rt=new Ni(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Ph,wrapT:Ph}),this._rt.samples=0,this._savePass=new jO(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new jO(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}setWatermark(e){this.logoOverlayPass.enabled=e!==null,e&&(this.logoOverlayPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...i}=e,r=!1;t!==this.postprocessingState.enabled&&(r=!0);for(let n of Object.entries(i)){let s=n[1],a=this.effects.get(n[0]);if(a){a.enabled!==s.enabled&&(r=!0),a.enabled=s.enabled;for(let[o,l]of Object.entries(s))o==="blendFunction"?a.blendFunction=RZe(l):a[o]=l}}this.postprocessingState=e,r&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,i,r){e instanceof ni?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,i,r),this.effectComposer.outputBuffer.scissor.set(e,t,i,r));let n=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(n),this.effectComposer.outputBuffer.scissor.multiplyScalar(n),this.renderer.setScissor(e,t,i,r)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,i,r){e instanceof ni?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,i,r),this.effectComposer.outputBuffer.viewport.set(e,t,i,r))}resize(e,t,i){if(this.effectComposer.setSize(e,t,i),this._rt){let r=this.renderer.getPixelRatio();this._rt.setSize(e*r,t*r)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},LZe=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,kZe=vi.lights_fragment_begin,zZe=vi.shadowmask_pars_fragment,Cq=null,BZe=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},jZe=(e="medium")=>{if(Cq===e)return!1;Cq=e;let t=BZe(e);vi.shadowmap_pars_fragment=LZe(t);let i=kZe.slice();i=i.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),i=i.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),vi.lights_fragment_begin=i;let r=zZe.slice();return r=r.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),vi.shadowmask_pars_fragment=r,!0},NZe=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;
#include <skinning_pars_vertex>
#include <morphtarget_pars_vertex>
	
void main()
{
#include <beginnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
vec3 transformed = vec3(position);
#include <morphtarget_vertex>
#include <skinning_vertex>

vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));
}
`,VZe=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,sD=new Vi({vertexShader:NZe,fragmentShader:VZe,uniforms:{depthContrast:{value:1}}}),Mq=new on,Pq=new pe,UZe=class extends Xte{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new pe,this.dummyCamera=new Ea,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(n=!0,s=!0,a=!0)=>{let o=this.getContext(),l=0;n&&(l|=o.COLOR_BUFFER_BIT),s&&(l|=o.DEPTH_BUFFER_BIT),a&&(l|=o.STENCIL_BUFFER_BIT),o.clear(l),o.clearBufferfv(o.COLOR,1,[0,0,0,1])},this.pipeline=new OZe(this,(e==null?void 0:e.needsDOFResize)??!1),this.autoClear=!1;let t=this.setPixelRatio.bind(this),i=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=nk,this.dummyCamera.matrixAutoUpdate=!1,this.domElement.removeAttribute("data-engine");let r=this.getContext();if(r&&"drawingBufferColorSpace"in r)try{r.drawingBufferColorSpace="display-p3"}catch(n){console.warn(n)}this.setPixelRatio=n=>{this._pixelRatio!==n&&(this._pixelRatio=n,t(n))},this.setSize=(n,s,a=!0)=>{var o,l;(this.viewportWidth!==n||this.viewportHeight!==s)&&(this.viewportWidth=n,this.viewportHeight=s,i(n,s,a),(o=this.normalRenderTarget)==null||o.setSize(n*this._pixelRatio,s*this._pixelRatio),this._resizeTransmission(n,s),(l=this.transmissionDepthTarget)==null||l.setSize(n*this._pixelRatio/2,s*this._pixelRatio/2),this.pipeline.resize(n,s,a))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new Ni(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:yi,magFilter:yi,wrapS:qr,wrapT:qr,depthBuffer:!1}))}_resizeTransmission(e,t){var i,r;(i=this.transmissionRenderTarget)==null||i.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),(r=this.aoRenderTarget)==null||r.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return Qt.transmissionLod.value===1}set hdTransmission(e){Qt.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new Ni(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:Tv,magFilter:yi,wrapS:qr,wrapT:qr,depthBuffer:!1}),this.transmissionDepthTarget=new Ni(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:_i,magFilter:_i,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new Ni(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:_i,magFilter:_i,type:wr,depthTexture:new Mv(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,i){this.normalRenderTarget&&(this.setClearColor(0),i.layers.enable(8),i.layers.disable(0),i.layers.disable(3),t.traverseEntity(r=>{r.layers.isEnabled(8)&&(r.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),i instanceof Ea?sD.uniforms.depthContrast.value=(i.far-i.near)/1e4:sD.uniforms.depthContrast.value=1,t.overrideMaterial=sD,this.render(t,i),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?XO:null,i.layers.enable(0),i.layers.enable(3),t.traverseEntity(r=>{r.layers.isEnabled(8)&&(r.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,i=1){this.dummyCamera.updateCameraState(t.dataPatched),this.dummyCamera.matrix.copy(t.matrixWorld);let r=t.height,n=t.width,s=this.viewportWidth/this.viewportHeight;n<r?n=r*s:r=n/s,this.dummyCamera.setViewplaneSize(n,r);for(let a=0;a<i;a++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,t,{sceneHelpers:i=this.sceneHelpers,sceneHelpersOnTop:r=this.sceneHelpersOnTop,overrideTransmission:n=void 0,overrideNormal:s=void 0}={}){var f;let a=e instanceof Tz?e.activePage:e,o=a.visible;a.visible=!0;let l=a.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(a.bgColor,a.bgColor.a),a.penumbraSizeArray.forEach((m,g)=>{Qt.penumbraSize.value[g]=m}),Qt.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?Qt.resolution.value.set(this.resolution.x,this.resolution.y):Qt.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),s!==void 0?(Qt.normalRenderTarget.value=s,Qt.normalRenderTargetDepth.value=Mq):l.needsNormal()&&(this.createNormalRenderTarget(),Qt.normalRenderTarget.value=this.normalRenderTarget.texture,Qt.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(l,a,t));let c=a.data.ao,u=c.occlusion;if(u&&(this.createAORenderTarget(),Qt.aoRenderTarget.value=this.aoRenderTarget.texture),Qt.aoEnabled.value=u,this.pipeline.setAmbientOcclusionParams(c.occlusion,c.radius,c.bias,a.aoColor,a.fog!==null,a.backupFog.near,a.backupFog.far,c.aoFullRes&&!Cw),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture),this.pipeline.isUIOverlayEnabled&&((f=a.uiCanvas)==null?void 0:f.enabled)&&a.uiCanvas.texture&&a.uiCanvas.texture.image.width>0){let m=this.getSize(Pq),g=this.getPixelRatio();(a.uiCanvas.width!==this.viewportWidth||a.uiCanvas.height!==this.viewportHeight||a.uiCanvas.dpr!==g)&&a.uiCanvas.applySize({width:this.viewportWidth,height:this.viewportHeight},g),a.uiCanvas.render(this),this.pipeline.uiOverlayPass.uiCanvas=a.uiCanvas,this.pipeline.uiOverlayPass.enabled=!0,this.pipeline.uiOverlayPass.setResolution(m.x,m.y,g),this.pipeline.updateRenderToScreen()}else this.pipeline.uiOverlayPass.enabled=!1,this.pipeline.updateRenderToScreen();if(this.pipeline.logoOverlayPass.enabled){let m=this.getSize(Pq),g=this.getPixelRatio();this.pipeline.logoOverlayPass.uniforms.uResolution.value.set(m.x,m.y),this.pipeline.logoOverlayPass.uniforms.uDPR.value=g}let h=!1;if(n!==void 0)Qt.transmissionRenderTarget.value=n,Qt.transmissionRenderTargetDepth.value=Mq,this.pipeline.setTransmissionPassEnabled(!1);else{let m=l.needsTransmission();m&&(this.transmissionRenderTarget===void 0&&(h=!0),this.createTransmissionRenderTarget(),Qt.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Qt.aspectRatio.value=DXe(this.viewportWidth,this.viewportHeight),Qt.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(m)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=i,this.pipeline.sceneHelpersOnTop=r,this.pipeline.scene=a,this.pipeline.camera=t,h&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==a.postprocessing&&(this.pipeline.updatePostprocessing(a.postprocessing),!i&&!r&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),l.shapeBlendIntances.forEach(m=>{m.onBeforeShadowPass(this)}),a.overrideMaterial=l.wireframeState?XO:null,this.pipeline.render(),Qt.frameIndex.value=(Qt.frameIndex.value+1)%16,t instanceof Ea&&t.copyHistory(),a.visible=o}renderFromSceneForSceneTransitionPass(e,t,i){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=i,this.sceneTransitionTimeRemaining=i,this.pipeline.renderToScreen=!0;let r=this.pipeline.sceneTransitionPass.uniforms;r.uDPR.value=window.devicePixelRatio,r.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,t,i,r,n,s;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(t=this.transmissionRenderTarget)==null||t.dispose(),(i=this.transmissionDepthTarget)==null||i.dispose(),(r=this.normalRenderTarget)==null||r.dispose(),(s=(n=this.normalRenderTarget)==null?void 0:n.depthTexture)==null||s.dispose()}},use=class extends Dw(pBe){constructor(e,t=15,i=10066329){super(e,t,i),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){Iw(this.object,use.geometryHelper,e,t)}},hse=class extends Dw(fBe){constructor(e,t=15,i=6710886){super(e,t,i),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){Iw(this.object,hse.geometryHelper,e,t)}},UO=class extends Dw(dBe){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){Iw(this.object,UO.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=UO._vector,t=this.object.distance?this.object.distance:1e3,i=t*Math.tan(this.object.angle);this.cone.scale.set(i,i,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let r=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,s=this.cone.material.length;n<s;n++)this.cone.material[n].color.set(r);else this.cone.material.color.set(r)}}},dse=UO;dse._vector=new j;var fse=class extends Rh{constructor(){super(),this.caretIndex=0,this._caretVisibleAlpha=1,this._selectionVisibleAlpha=.3,this.current={start:0,end:void 0},this.matrixAutoUpdate=!1,this.caretMesh=new kr(new Au(1,1),new Yh({transparent:!0,opacity:0,side:wa})),this.add(this.caretMesh),this.selectionMesh=new kr(new Au(1,1),new Yh({color:2857471,transparent:!0,depthTest:!1,depthWrite:!1,opacity:0,side:wa})),this.add(this.selectionMesh),this.hide()}get caretHeight(){var e;return((e=this.object)==null?void 0:e.AD)??0}show(e){this.visible=!0,this.object=e,this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.y=-this.caretHeight*.5,this.setCaretPosition(this.caretIndex),this.update()}hide(){this.visible=!1}update(){if(this.object===void 0)return;this.updateHelperMatrix();let{depth:e}=this.object.geometry.userData.parameters;this.caretMesh.position.z=e,this.selectionMesh.position.z=e}updateHelperMatrix(){if(this.object===void 0)return;let e=this.object,t=e.parent;t!==null&&t.updateWorldMatrix(!0,!1),e.matrixAutoUpdate&&e.updateMatrix(),t!==null?(this.matrixWorld.multiplyMatrices(t.matrixWorld,e.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,e.matrix)):this.matrixWorld.multiplyMatrices(e.hiddenMatrix,e.matrix),this.matrix.copy(this.matrixWorld);for(let i of this.children)i.matrixWorld.copy(this.matrixWorld);e.updateWorldMatrix(!0,!0)}setCaretColor(e){let t=this.caretMesh.material;t.color.setRGB(e.r,e.g,e.b);let i=this._caretVisibleAlpha===t.opacity;this._caretVisibleAlpha=e.a,i&&(t.opacity=this._caretVisibleAlpha)}setSelectionColor(e){this.selectionMesh.material.color.setRGB(e.r,e.g,e.b)}setCaretPosition(e,t={}){if(this.object===void 0)return;this.caretIndex=e;let i=this.object.wrappedText,[r,n]=LT(i,e),[s,a]=e>0?LT(i,e-1):[null,null];(e>0&&i.length?i[s].charAt(a):null)===`
`&&(r++,n=0),this.current.start=e,this.current.end=void 0;let[o,l]=aD(this.object,r,n),{AD:c,descender:u}=this.object,h=u+c*.5,{width:f,height:m,depth:g}=this.object.geometry.userData.parameters,v=typeof f=="string"?0:f,x=typeof m=="string"?0:m;this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.set(o-v*.5,l+h+x*.5,g),this.hideSelectionMesh(),this.showCaretMesh()}setSelection(e,t){if(this.object===void 0)return;let i=this.object.wrappedText;this.current.start=e,this.current.end=t;let r=[],n=[],s=FZe(i,e,t),{lineHeight:a,AD:o,descender:l}=this.object,c=l+o*.5-a*.5;for(let[x,b,S]of s)if(b!==S){let[_,A]=aD(this.object,x,b),[M,C]=aD(this.object,x,S);A+=c,C+=c,C+=a;let D=r.length/3;r.push(_,A,0),r.push(M,A,0),r.push(M,C,0),r.push(_,C,0),n.push(D+0,D+1,D+2),n.push(D+2,D+3,D+0)}let u=new Rt;u.setIndex(n),u.setAttribute("position",new yt(r,3));let{width:h,height:f,depth:m}=this.object.geometry.userData.parameters,g=typeof h=="string"?0:h,v=typeof f=="string"?0:f;this.selectionMesh.geometry.dispose(),this.selectionMesh.geometry=u,this.selectionMesh.position.x=-g*.5,this.selectionMesh.position.y=v*.5,this.selectionMesh.position.z=m,this.showSelectionMesh(),this.hideCaretMesh()}getSelectionFromPosition(e,t,i="previous"){if(this.object===void 0||this.object.font===void 0)return;let r=this.object.wrappedText,n=r.length,s=this.object.lineHeight,a=n*s,{height:o,verticalAlign:l}=this.object.geometry.userData.parameters,c=typeof o=="string"?0:o,u=0;l===3?u=c-a:l===2&&(u=c*.5-a*.5);let h=Math.min(Math.floor(Math.max(Math.min(-t-u,a),0)/s),n-1),f=this.object.charCoords[h],m=this.object.charWidths[h],g=0,v=!1;if(i==="previous"){for(let x=0;x<f.length;x++)if(f[x][0]+m[x]*.5-e>0){g=x,v=!0;break}}else if(i==="closest"){let x=1/0;for(let b=0;b<f.length;b++){let S=f[b][0]+m[b]*.5,_=Math.abs(S-e);_<x&&(x=_,g=b,v=!0)}}else for(let x=0;x<f.length;x++){let b=f[x][0],S=f[x][0]+m[x];if(e>=b&&e<S){g=x,v=!0;break}}return v||(g=f.length),{index:this.getGlobalIndexFromLineAndCharIndexes(r,h,g),lineIndex:h,characterIndex:g}}getGlobalIndexFromLineAndCharIndexes(e,t,i){return e.slice(0,t).reduce((r,n)=>r+=n.length,0)+i}showSelectionMesh(){this.selectionMesh.material.opacity=this._selectionVisibleAlpha}hideSelectionMesh(){this.selectionMesh.material.opacity=0}showCaretMesh(){this.caretMesh.material.opacity=this._caretVisibleAlpha}hideCaretMesh(){this.caretMesh.material.opacity=0}};function aD(e,t,i){let{charCoords:r,charWidths:n,initialOffsetY:s,lineHeight:a}=e;if(r[t]&&r[t].length===0||r.length===0){let u=0,{horizontalAlign:h}=e.data.geometry,f=e.wrappedText,{width:m}=e.geometry.userData.parameters;return f.length===1&&f[0].length===0&&(h===3?u=m*.5:h===2&&(u=m)),[u,s-a*t]}let o=r[t];if(o===void 0||o.length===0)return[0,0];let[l,c]=o[Math.min(i,o.length-1)];return i>=o.length&&(l+=n[t][i-1]),[l,c]}function LT(e,t){var r;let i=0;for(let n=0;n<e.length;n++){let s=e[n],a=t-i;if(a<=s.length)return[n,a];i+=s.length}return[Math.max(0,e.length-1),((r=e[e.length-1])==null?void 0:r.length)??0]}function FZe(e,t,i){let[r,n]=LT(e,t),[s,a]=LT(e,i),o=[];n>=e[r].length&&(r++,n=0);for(let l=r;l<=s;l++){let c=e[l],u=l===r?n:0,h=l===s?a:c.length;o.push([l,u,h])}return o}function HZe(e,t){let i=Zs.fromHex(3223857),r=.8;for(let n of e.layers){if(n.data.type==="light"||n.data.type==="displace"||n.data.type==="fresnel"||n.data.type==="matcap"||n.data.type==="texture"||n.data.type==="toon"||n.data.type==="outline"||n.data.type==="transmission"||n.data.type==="noise")continue;let s=typeof n.data.alpha=="string"?Number(t.getVariable(n.data.alpha)):n.data.alpha;if(n.data.type==="color"&&s>.3){i=GZe(n.data.color,t),r=s;break}else if((n.data.type==="depth"||n.data.type==="gradient")&&s>.3){let a=WZe(n.data);i={r:a[0],g:a[1],b:a[2]},r=typeof n.data.alpha=="string"?1:n.data.alpha;break}}return{...i,a:r}}function GZe(e,t){return typeof e=="string"?t.data.colors[e]:e}function WZe(e){return e.colors[0]}function qZe(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var pse=class extends gz(Zze,use){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.top=1250,r.bottom=-1250,r.right=1250,r.left=-1250,r.near=-1e4,r.far=2500;let n=new QA(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof QA&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let i=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&qZe(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),i&&this.update()}},Dq=new j,Iq=new j,Rq=new Jt,mse=class extends gz(Xze,dse){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=wt.RAD2DEG*2*this.angle,r.aspect=1,r.near=100,r.far=2500;let n=new QA(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof QA&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),Iq.setFromMatrixPosition(this.matrixWorld),Rq.setFromRotationMatrix(this.matrixWorld),Dq.copy(this.up).applyQuaternion(Rq).negate().multiplyScalar(this.distance),this.target.position.copy(Iq).add(Dq),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}};function XZe(e){let t=(e[0][0]+e[1][1])/2,i=(e[0][0]-e[1][1])/2,r=(e[1][0]+e[0][1])/2,n=(e[1][0]-e[0][1])/2,s=Math.sqrt(t*t+n*n),a=Math.sqrt(i*i+r*r),o=s+a,l=s-a,c=Math.atan2(r,i),u=Math.atan2(n,t),h=(u-c)/2,f=(u+c)/2,m=[[Math.cos(f),Math.sin(f)],[-Math.sin(f),Math.cos(f)]],g=[[o,0],[0,l]],v=[[Math.cos(h),Math.sin(h)],[-Math.sin(h),Math.cos(h)]];return m[0][0]*=-1,m[0][1]*=-1,v[0][0]*=-1,v[1][0]*=-1,[m,g,v]}function XE(e,t){return[[e[0][0]*t[0][0]+e[0][1]*t[1][0],e[0][0]*t[0][1]+e[0][1]*t[1][1]],[e[1][0]*t[0][0]+e[1][1]*t[1][0],e[1][0]*t[0][1]+e[1][1]*t[1][1]]]}function Oq(e){return[[e[0][0],e[1][0]],[e[0][1],e[1][1]]]}function YZe(e){let[t,i,r]=XZe(e),n=XE(t,Oq(r)),s=XE(XE(r,i),Oq(r)),a=Math.atan2(n[1][0],n[0][0]),o=[s[0][0],s[1][1]],l=[s[0][1]/s[1][1],s[1][0]/s[0][0]];return{rotation:a,scale:o,shear:l}}function QZe({rotation:e,scale:t,shear:i}){let r=Math.cos(e),n=Math.sin(e),s=[[r,-n],[n,r]],a=[[t[0],i[0]*t[1]],[i[1]*t[0],t[1]]],o=XE(s,a);return[o[0][0],o[1][0],o[0][1],o[1][1]]}var Qi;(e=>{function t(){return[1,0,0,0,1,0,0,0,1]}e.identity=t;function i(C,D=e.identity()){for(let T=0,R=C.length;T<R;T++)D[T]=C[T];return D}e.copy=i;function r(C,D,T,R,O,L){return e.setAbcdef(e.identity(),C,D,T,R,O,L)}e.create=r;function n(C,D,T,R,O,L,k){return C[0]=D,C[1]=R,C[2]=L,C[3]=T,C[4]=O,C[5]=k,C}e.setAbcdef=n;function s(C,D){let[T,R,O,L,k,B]=o(C),[V,$,q,Y,X,ne]=o(D),F=V*T+$*O,K=V*R+$*L,re=q*T+Y*O,oe=q*R+Y*L,ce=X*T+ne*O+k,de=X*R+ne*L+B;return e.create(F,K,re,oe,ce,de)}e.append=s;function a(C,D){let[T,R,O,L,k,B]=o(C),[V,$,q,Y,X,ne]=o(D),F=T,K=R,re=O,oe=L;(V!==1||$!==0||q!==0||Y!==1)&&(F=T*V+R*q,K=T*$+R*Y,re=O*V+L*q,oe=O*$+L*Y);let ce=k*V+B*q+X,de=k*$+B*Y+ne;return e.create(F,K,re,oe,ce,de)}e.prepend=a;function o(C){return[C[0],C[3],C[1],C[4],C[2],C[5]]}e.getAbcdef=o;function l(C){let[D,T,R,O,L,k]=e.getAbcdef(C),B=D*O-T*R,V=O/B,$=-T/B,q=-R/B,Y=D/B,X=(R*k-O*L)/B,ne=-(D*k-T*L)/B;return e.create(V,$,q,Y,X,ne)}e.invert=l;function c([C,D],T){let[R,O,L,k,B,V]=e.getAbcdef(T);return[R*C+L*D+B,O*C+k*D+V]}e.apply=c;function u(C,D){let[T,R,O,L,k,B]=e.getAbcdef(D),V=1/(T*L+O*-R),[$,q]=C;return[L*V*$+-O*V*q+(B*O-k*L)*V,T*V*q+-R*V*$+(-B*T+k*R)*V]}e.applyInverse=u;function h(C,D,T=D){let[R,O,L,k,B,V]=e.getAbcdef(C);return e.setAbcdef(C,R*D,O*T,L*D,k*T,B*D,V*T),C}e.scale=h;function f(C,D){let T=Math.cos(D),R=Math.sin(D),[O,L,k,B,V,$]=e.getAbcdef(C);return e.setAbcdef(C,O*T-L*R,O*R+L*T,k*T-B*R,k*R+B*T,V*T-$*R,V*R+$*T),C}e.rotate=f;function m(C,D,T){let[R,O]=T,L=e.translate(C,-R,-O);return L=e.rotate(L,D),L=e.translate(L,R,O),L}e.rotateAround=m;function g(C,D,T){let[R,O,L,k,B,V]=e.getAbcdef(C);return e.setAbcdef(C,R,O,L,k,B+D,V+T),C}e.translate=g;function v(C,D,T){let[R,O,L,k]=e.getAbcdef(C);return e.setAbcdef(C,R,O,L,k,D,T),C}e.setTranslate=v;function x(C,D,T){let[R,O,L,k]=e.getAbcdef(C);return e.setAbcdef(C,R,O,L,k,D,T),C}e.setPosition=x;function b(C){let[D,T,R,O]=e.getAbcdef(C),L=Math.sqrt(D*D+T*T),k=Math.sqrt(R*R+O*O);return[L,k]}e.getScale=b;function S(C){let[,,,,D,T]=e.getAbcdef(C);return[D,T]}e.getPosition=S;function _(C,D){return e.decompose(C,D).rotation}e.getRotation=_;function A(C,D){let[T,R,O,L,k,B]=e.getAbcdef(C),{rotation:V,scale:$,shear:q}=YZe([[T,O],[R,L]]);return{position:[k+(D[0]*T+D[1]*O)-D[0],B+(D[0]*R+D[1]*L)-D[1]],scale:$,rotation:V,shear:q,pivot:D}}e.decompose=A;function M(C,D,T,R,O=[0,0]){let[L,k]=C,[B,V]=R,[$,q,Y,X]=QZe({rotation:T,scale:D,shear:O}),ne=L-(B*$+V*Y)+B,F=k-(B*q+V*X)+V;return e.create($,q,Y,X,ne,F)}e.compose=M})(Qi||(Qi={}));var KZe=Math.PI/180;function ZZe(e,t,i,r,n,s){let a=e-i,o=t-r;return a*a/(n*n)+o*o/(s*s)<=1}function $Ze(e){return e*KZe}var Os=class{constructor(e,t,i){this.uuid=e,this.data=t,this.localMatrix=Qi.identity(),this.worldMatrix=Qi.identity(),this.ignoreCameraZoom=!1,this.visible=!0,this._singleBBox=new FO,this._recursiveBBox=new FO,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.stateSelection=null,this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this.name="",this.position=[0,0],this.scale=[1,1],this.rotation=0,this.shear=[0,0],this.emitter=Q3(),this.dpr=i.dpr??1,this.dataPatched=t}project(e,t){let i=this.worldMatrix;return t&&(i=Qi.append(t.worldMatrix,i)),Qi.applyInverse(e,i)}intersects(e,t,i,r=!1){return this.visible&&!this.data.raycastLock&&this.intersectsInLocalSpace(...this.project([e,t],i),r)}intersectsInLocalSpace(e,t,i=!1){let{min:r,max:n}=i?this.recursiveBBox:this.singleBBox;return e>=r[0]&&e<=n[0]&&t>=r[1]&&t<=n[1]}applyTransforms(e){e.setTransform(this.worldMatrix,this.ignoreCameraZoom)}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges()),this._recursiveBBox}updateLocalMatrix(){this.localMatrix=Qi.compose(this.position,this.scale,$Ze(this.rotation),ym.getPivot(this.dataPatched),this.shear)}updateWorldMatrix(e,t,i){let r=this.parent;t&&r!==null&&r!==void 0&&r.updateWorldMatrix(e,!0,!1),e&&this.updateLocalMatrix(),this.parent?this.worldMatrix=Qi.append(this.parent.worldMatrix,this.localMatrix):this.worldMatrix=Qi.copy(this.localMatrix),this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get pivot(){return ym.getPivot(this.data)}getCenter(){return[0,0]}getHalfSize(){return[0,0]}get id(){return this.uuid}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{e.resetBBoxNeedsUpdateSelf()})}updateTransformState(e){let t=!1;e.position!==void 0&&(t=!0,this.position=e.position),e.rotation!==void 0&&(t=!0,this.rotation=e.rotation),e.scale!==void 0&&(t=!0,this.scale=e.scale),e.shear!==void 0&&(t=!0,this.shear=e.shear),t&&(this.updateWorldMatrix(!0,!1,!0),this.resetBBoxNeedsUpdate())}updateByOp(e,t,i){e.type===0&&e.props.visible!==void 0&&(this.visible=e.props.visible),this.data=t,this.data=t;let r=e,n=Ir(e.path,["states","*"]);if(n!==null){if(e.type===0){let[s]=n;if((this==null?void 0:this.stateSelection)===s){let a={...e.props};if(delete a.name,Object.values(e.props).some(o=>o===void 0)){let o=this.data;if(o!==void 0){let l=os.zoom(o,e.path.slice(2));if(l)for(let c in e.props)e.props[c]===void 0&&c in l&&(a[c]=l[c])}}r={...e,props:a,path:e.path.slice(2)}}}}else if(e.type===0){let s=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(s!==void 0){if(e.props.name!==void 0&&s.name){let{name:o,...l}=s;s=l}let a=os.removeOverridden(e.path,e.props,s);r={...e,props:a}}}this.updateByPatchedOpBase(r,im.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i)}changeSelectedState(e,t,i=!1){if(!(this.data.states.length===0&&!i)){for(let r of this.data.states)im.toOps(this.data,r.data).forEach(n=>{let s=aT.replaceProps(n,this.data);this.dataPatched=this.data,this.updateByPatchedOp(s,this.data,t)});if(e!==null){let r=this.data.states.data(e);r&&(this.dataPatched=im.patch(this.data,r),im.toOps(this.data,r).forEach(n=>{this.updateByPatchedOp(n,this.dataPatched,t)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=e}}updateState(e,t){e.name!==void 0&&(this.name=e.name),e.visible!==void 0&&(this.visible=e.visible),this.updateTransformState(e)}updateByPatchedOpBase(e,t,i){this.dataPatched=t,this.updateByPatchedOp(e,t,i)}updateByPatchedOp(e,t,i){e.path.length===0&&e.type===0&&this.updateState(e.props,i),this.requestRender()}traverseFrameAncestors(e){this.traverseAncestors(t=>{t.data.type==="frame2d"&&e(t)})}traverseAncestors(e){let t=this.parent;for(;t;)e(t),t=t.parent}requestRender(){this.traverseFrameAncestors(e=>{e.requestRender()})}clone(e){let t=new Os(this.uuid,this.data,e);return t.parent=void 0,t}addEventListener(e,t){this.emitter.on(e,t)}removeEventListener(e,t){this.emitter.off(e,t)}dispatchEvent(e){this.emitter.emit(e.type,{...e,target:e.target??this})}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children;if(t){let i=t.indexOf(this)+1;return t[i]?t[i]:e.traverseSortNextHelper()}}}sortNext(){let e=this.children;return e&&e.length>0&&e[0]?e[0]:this.traverseSortNextHelper()}isDescendantOf(e){e instanceof Os&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}},Ql=class extends Os{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.context=i,this.children=[]}add(e){e.parent&&e.parent instanceof Ql&&e.parent.remove(e),this.children.push(e),e.parent=this}remove(e){let t=this.children.indexOf(e);t>=0&&(this.children.splice(t,1),e.parent=void 0)}traverse(e){let t=e(this);if(t!==!0)for(let i of this.children)i instanceof Ql?i.traverse(e):t=e(i)}intersectsChildrenHelper(e,t,i,r,n){for(let s of this.children)if(s.intersects(e,t,i,!1)&&(n.push(s),r)||s instanceof Ql&&s.intersectsChildrenHelper(e,t,i,r,n))return!0;return!1}intersectsChildren(e,t,i,r=!1,n=[],s=!1){return this.intersectsChildrenHelper(e,t,i,r,n),n}intersectsChildrenHelperReverse(e,t,i,r,n){for(let s of this.children)if(s instanceof Ql&&s.intersectsChildrenHelperReverse(e,t,i,r,n)||s.intersects(e,t,i,!1)&&(n.push(s),r))return!0;return!1}intersectsChildrenReverse(e,t,i,r=!1,n=[],s=!1){return this.intersectsChildrenHelperReverse(e,t,i,r,n),n}updateWorldMatrix(e,t,i){if(super.updateWorldMatrix(e,t,i),i&&this.children)for(let r of this.children)r.updateWorldMatrix(e,!1,!0)}find(e){let t;return this.traverse(i=>{i.uuid===e&&(t=i)}),t}innerDrawChildren(e){for(let t=this.children.length-1;t>=0;t--)this.children[t].draw(e)}resetBBoxNeedsUpdate(){super.resetBBoxNeedsUpdate(),this.traverse(e=>{e.resetBBoxNeedsUpdateSelf()})}clone(e){let t=new Ql(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}},Nf=class extends Ql{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.updateState(t,i)}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.innerDrawChildren(e),e.restore())}clone(e){let t=new Nf(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}};function JZe(e,t){let[[i,r],[n,s]]=e,[[a,o],[l,c]]=t,u=(i-n)*(o-c)-(r-s)*(a-l);if(u===0)return!1;let h=((i-a)*(o-c)-(r-o)*(a-l))/u,f=-((i-n)*(r-o)-(r-s)*(i-a))/u;return h>=0&&h<=1&&f>=0&&f<=1}var gse=[[-1,1],[-1,-1],[1,-1],[1,1]],Lq=(e,t,i)=>{let r=e.getCenter(),n=e.getHalfSize(),s=Qi.append(t,e.worldMatrix);n[0]===0&&n[1]===0?i.push(Qi.apply(r,s)):gse.forEach(a=>{let o=[a[0]*n[0]+r[0],a[1]*n[1]+r[1]];i.push(Qi.apply(o,s))})},FO=class{constructor(){this.matrix=Qi.identity(),this.min=[1/0,1/0],this.max=[-1/0,-1/0],this.vertices=[],this.edges=[]}setFromObjectSize(e,t=!1){e.updateWorldMatrix(),this.makeEmpty(),Qi.copy(e.worldMatrix,this.matrix);let i=Qi.invert(e.worldMatrix);this.expandByObjectSize(e,i,t)}expandByObjectSize(e,t,i=!1){let r=[];i===!0&&e instanceof Ql?e.traverse(n=>{n.visible&&Lq(n,t,r)}):Lq(e,t,r),this.setFromPoints(r)}setFromSize(e,t,i){this.makeEmpty(),Qi.copy(i,this.matrix),this.expandBySize(e,t,i)}expandBySize(e,t,i){[Qi.apply([0,0],i),Qi.apply([0,t],i),Qi.apply([e,t],i),Qi.apply([e,0],i)].forEach(r=>this.expandByPoint(r))}getCenter(){let[e,t]=this.min,[i,r]=this.getHalfSize();return Qi.apply([e+i,t+r],this.matrix)}getSize(){return[this.max[0]-this.min[0],this.max[1]-this.min[1]]}getHalfSize(){return[(this.max[0]-this.min[0])*.5,(this.max[1]-this.min[1])*.5]}makeEmpty(){this.min=[1/0,1/0],this.max=[-1/0,-1/0]}setFromPoints(e){this.makeEmpty();for(let t of e)this.expandByPoint(t)}expandByPoint(e){this.min=[Math.min(this.min[0],e[0]),Math.min(this.min[1],e[1])],this.max=[Math.max(this.max[0],e[0]),Math.max(this.max[1],e[1])]}computeVertices(){let[e,t]=this.getHalfSize(),i=this.getCenter(),[r,n,s,a]=Qi.getAbcdef(this.matrix),o=Qi.create(r,n,s,a,i[0],i[1]);this.vertices=gse.map(([l,c])=>Qi.apply([l*e,c*t],o))}computeEdges(){this.edges=[];for(let e=0,t=this.vertices.length;e<t;++e)this.edges.push([this.vertices[e],this.vertices[(e+1)%t]])}project(e,t){let i=this.matrix;return t&&(i=Qi.append(t.worldMatrix,i)),Qi.applyInverse(e,i)}intersects(e,t,i){return this.intersectsInLocalSpace(...this.project([e,t],i))}intersectsInLocalSpace(e,t){let{min:i,max:r}=this;return e>=i[0]&&e<=r[0]&&t>=i[1]&&t<=r[1]}containsPoint(e){let[t,i]=e,[r,n]=this.min,[s,a]=this.max;return t>=r&&t<=s&&i>=n&&i<=a}intersectsBBox2D(e){for(let t=0,i=this.edges.length;t<i;t++){let r=this.edges[t];for(let n=0,s=e.edges.length;n<s;n++){let a=e.edges[n];if(JZe(r,a))return!0}}for(let t=0,i=e.vertices.length;t<i;t++){let r=e.vertices[t];if(this.containsPoint(r))return!0}return!1}ensureMinMax(){let e=this.min,t=this.max;this.min=[Math.min(e[0],t[0]),Math.min(e[1],t[1])],this.max=[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}copy(e){this.min=[...e.min],this.max=[...e.max],Qi.copy(e.matrix,this.matrix),this.computeVertices(),this.computeEdges()}clone(){let e=new FO;return e.copy(this),e}},vse,e$e=new Promise(e=>{vse=e}),kq=!1,Z_;function t$e(){if(kq)return;if(Z_)return Z_;async function e(){let t=await gc(()=>import("./ui-Ds7EeOeb.js"),[]);vse(t.default??t),kq=!0}return Z_=e(),Z_}function zq(e){let t=!1;return e.scene.objects.traverse((i,r)=>{(r.type==="Mesh"&&r.geometry.type==="UIGeometry"||r.type==="Page"&&r.uiFrame!==void 0)&&(t=!0)}),t}var ci,oD;async function i$e(e){let t=await e$e;ci||(oD||(oD=t({locateFile:()=>e})),ci=await oD)}var Bq=Qi.identity(),yse=class{constructor(e,t=1){this.canvas=e,this._dpr=t,this._width=0,this._height=0,this._strokeMode="inside",this._layerBlur=0,this._backgroundBlur=0,this._dropShadowBlur=0,this._dropShadowOffsetX=0,this._dropShadowOffsetY=0,this._dropShadowColor=_r.transparent,this._innerShadowBlur=0,this._innerShadowOffsetX=0,this._innerShadowOffsetY=0,this._innerShadowSpread=0,this._innerShadowColor=_r.transparent,this._fonts=new Map,this._isSizeDirty=!1;try{let i=e.getBoundingClientRect();e.width=i.width*t,e.height=i.height*t}catch{console.log(e.width,t)}this._currentM3Transform=Bq,this._currentTransform=new Float32Array(Bq)}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this._isSizeDirty=!0}async init(){var e,t;if(!this.wasmURL)throw Error("Your must set the wasm binary url with renderer.wasmURL = ... before you can call renderer.init");await i$e(this.wasmURL),this._surface=ci.MakeWebGLCanvasSurface(this.canvas),this.ctx=(e=this._surface)==null?void 0:e.getCanvas(),this._paint=new ci.Paint,this._paint.setAntiAlias(!0),this._paintFill=this._paint.copy(),this._paintFill.setStyle(ci.PaintStyle.Fill),this._paintStroke=this._paint.copy(),this._paintStroke.setStyle(ci.PaintStyle.Stroke),(t=this.ctx)==null||t.scale(this.dpr,this.dpr)}get currentTransform(){return this._currentM3Transform}get currentTransformBuffer(){return this._currentTransform}set currentTransform(e){this._currentM3Transform=e,this._currentTransform.set(e)}async loadFont(e,t){let i=await(await fetch(e)).arrayBuffer();this.registerFont(i,t)}registerFont(e,t){if(this._fonts.has(t))return;let i=ci.FontMgr.FromData(e);if(i)this._fonts.set(t,i);else throw new Error("Invalid font data for "+t)}get width(){return this._width}get height(){return this._height}set strokeColor(e){this._paintStroke&&this._paintStroke.setColor($_(e),ci.ColorSpace.DISPLAY_P3)}set fillColor(e){this._paintFill&&this._paintFill.setColor($_(e),ci.ColorSpace.DISPLAY_P3)}set lineWidth(e){this._paintStroke&&this._paintStroke.setStrokeWidth(this._strokeMode==="center"?e:e*2)}set strokeMode(e){this._strokeMode=e}set dropShadowBlur(e){this._dropShadowBlur=e}set dropShadowColor(e){this._dropShadowColor=e}set dropShadowOffsetX(e){this._dropShadowOffsetX=e}set dropShadowOffsetY(e){this._dropShadowOffsetY=e}set innerShadowBlur(e){this._innerShadowBlur=e}set innerShadowColor(e){this._innerShadowColor=e}set innerShadowOffsetX(e){this._innerShadowOffsetX=e}set innerShadowOffsetY(e){this._innerShadowOffsetY=e}set innerShadowSpread(e){this._innerShadowSpread=e}set layerBlur(e){this._layerBlur=e}set backgroundBlur(e){this._backgroundBlur=e}clear(){var e;(e=this.ctx)==null||e.clear(ci.TRANSPARENT)}save(){var e;(e=this.ctx)==null||e.save()}restore(){var e;(e=this.ctx)==null||e.restore()}beginPath(){var e;(e=this._currentPath)==null||e.delete(),this._currentPath=new ci.Path}closePath(){let e=this._currentPath;if(e){if(e.isEmpty())return;let t=e.getBounds();(t[3]-t[1]||t[2]-t[0])&&e.close()}}fill(){this._paintInner(this._paintFill,!0)}stroke(){this._paintInner(this._paintStroke,!1)}clipRect(e,t,i,r,n=0,s=0,a=0,o=0){var c,u;let l=ci.XYWHRect(e,t,i,r);if(n===0&&s===0&&o===0&&a===0)(c=this.ctx)==null||c.clipRect(l,ci.ClipOp.Intersect,!0);else{let h=ci.RRectXY(l,n,n);h[4]=h[5]=n,h[6]=h[7]=s,h[8]=h[9]=a,h[10]=h[11]=o,(u=this.ctx)==null||u.clipRRect(h,ci.ClipOp.Intersect,!0)}}_applyShadowOffsetMatrix(){if(this.ctx){let e=Qi.invert(this.currentTransform);this.ctx.concat(e);let t=Qi.translate(Qi.identity(),this._dropShadowOffsetX,this._dropShadowOffsetY);this.ctx.concat(t),this.ctx.concat(this._currentTransform)}}_applyEffectsToPaint(e,t,i=!0){var r,n,s,a;if(this.ctx&&this._currentPath){let o,l=!1;if(i&&this._hasDropShadow()){let c=e.copy();c.setColor($_(this._dropShadowColor));let u;this._dropShadowBlur>0&&(u=ci.MaskFilter.MakeBlur(ci.BlurStyle.Normal,this._dropShadowBlur*this.dpr*(((r=this.camera)==null?void 0:r.scale)??1),!1),c.setMaskFilter(u)),this.ctx.save(),this.ctx.clipPath(this._currentPath,ci.ClipOp.Difference,!0),this._applyShadowOffsetMatrix(),t(c),this.ctx.restore(),c.delete(),u==null||u.delete()}if(this._backgroundBlur>0&&i){this.ctx.save(),this.ctx.clipPath(this._currentPath,ci.ClipOp.Intersect,!0);let c=ci.ImageFilter.MakeBlur(this._backgroundBlur,this._backgroundBlur,ci.TileMode.Clamp,null),u=e.copy();u.setImageFilter(c),u.setAlphaf(1);let h=this._currentPath.computeTightBounds();this.ctx.saveLayer(u,h,null,ci.SaveLayerInitWithPrevious),this.ctx.drawColor(e.getColor()),this.ctx.restore(),this.ctx.restore(),u.delete(),c.delete(),l=!0}if(this._layerBlur>0){let c=e.copy();o=ci.MaskFilter.MakeBlur(ci.BlurStyle.Normal,this._layerBlur*this.dpr*(((n=this.camera)==null?void 0:n.scale)??1),!1),c.setMaskFilter(o),t(c),c.delete(),o.delete(),l=!0}if(l||t(e),i&&this._hasInnerShadow()){let c=new ci.Paint;c.setAntiAlias(!0),c.setStyle(ci.PaintStyle.Fill),c.setColor($_(this._innerShadowColor));let u;this._innerShadowBlur>0&&(u=ci.MaskFilter.MakeBlur(ci.BlurStyle.Normal,this._innerShadowBlur*this.dpr*(((s=this.camera)==null?void 0:s.scale)??1),!1),c.setMaskFilter(u));let h=this._currentPath.computeTightBounds(),[f,m,g,v]=h,x=g-f,b=v-m;this.ctx.save(),this.ctx.clipPath(this._currentPath,ci.ClipOp.Intersect,!0),this.ctx.saveLayer(c,h,null,ci.SaveLayerInitWithPrevious),(a=this.ctx)==null||a.translate(this._innerShadowOffsetX,this._innerShadowOffsetY),this.ctx.drawRect(ci.XYWHRect(-1e3-this._innerShadowOffsetX,-1e3-this._innerShadowOffsetY,2e3+x+Math.abs(this._innerShadowOffsetX*2),2e3+b+Math.abs(this._innerShadowOffsetY*2)),c),c.setBlendMode(ci.BlendMode.Clear),this.ctx.drawPath(this._currentPath,c),this.ctx.restore(),this.ctx.restore(),c.delete(),u==null||u.delete()}}}_paintInner(e,t=!0){if(this.ctx&&this._currentPath&&e){let i=this.ctx,r=this._currentPath;this._applyEffectsToPaint(e,n=>{let s=!1;!t&&this._strokeMode!=="center"&&(i.save(),i.clipPath(r,this._strokeMode==="outside"?ci.ClipOp.Difference:ci.ClipOp.Intersect,!0),s=!0),i.drawPath(r,n),s&&i.restore()},t)}}_hasDropShadow(){var e;return((e=this._dropShadowColor)==null?void 0:e.a)>0}_hasInnerShadow(){var e;return((e=this._innerShadowColor)==null?void 0:e.a)>0}path(e){var t;(t=this._currentPath)==null||t.addPath(ci.Path.MakeFromSVGString(e))}ellipse(e,t,i,r,n,s,a,o){var c;if(!jq([e,t,i,r])||!this._currentPath)return;if(i<0||r<0)throw Error("radii cannot be negative");let l=ci.XYWHRect(e-i,t-r,i*2,r*2);(c=this._currentPath)==null||c.addOval(l)}rect(e,t,i,r,n=0,s=0,a=0,o=0){var c,u;let l=ci.XYWHRect(e,t,i,r);if(jq(l))if(n===0&&s===0&&o===0&&a===0)(c=this._currentPath)==null||c.addRect(l);else{let h=ci.RRectXY(l,n,n);h[4]=h[5]=n,h[6]=h[7]=s,h[8]=h[9]=a,h[10]=h[11]=o,(u=this._currentPath)==null||u.addRRect(h)}}getHorizontalAlign(e){switch(e){case 2:return ci.TextAlign.Right;case 3:return ci.TextAlign.Center;case 4:return ci.TextAlign.Justify;case 1:default:return ci.TextAlign.Left}}drawTextInner(e,t,i,[r,n,s,a],o,l,c=!0){let u=0,{ctx:h}=this;if(!h)return u;let f=l.copy(),m=l.copy();return m.setAlphaf(0),this._applyEffectsToPaint(f,g=>{t.pushPaintStyle(i,g,m),t.addText(e);let v=t.build();v.layout(s);let x=n;o===2?x+=(a-v.getHeight())/2:o===3&&(x+=a-v.getHeight()),h.drawParagraph(v,r,x),u=v.getHeight(),t.reset(),v.delete()},c),f.delete(),m.delete(),u}drawText(e,t){let i=0,r=this._fonts.get(t.font),{ctx:n,_paintFill:s,_paintStroke:a}=this;if(r&&n){let o=new ci.TextStyle({fontFamilies:[t.font],fontSize:t.fontSize,heightMultiplier:t.lineHeight,letterSpacing:t.letterSpacing}),l=new ci.ParagraphStyle({textStyle:o,textAlign:this.getHorizontalAlign(t.horizontalAlign)}),c=ci.XYWHRect(t.x,t.y,t.width,t.height),u=ci.ParagraphBuilder.Make(l,r);s&&(i=this.drawTextInner(e,u,o,c,t.verticalAlign,s,!0)),a&&(i=this.drawTextInner(e,u,o,c,t.verticalAlign,a,!1)),u.delete()}return{height:i}}render(){var e;(e=this._surface)==null||e.flush()}moveTo(e,t){var i;(i=this._currentPath)==null||i.moveTo(e,t)}lineTo(e,t){var i;(i=this._currentPath)==null||i.lineTo(e,t)}bezierCurveTo(e,t,i,r,n,s){var a;(a=this._currentPath)==null||a.cubicTo(e,t,i,r,n,s)}quadraticCurveTo(e,t,i,r){var n;(n=this._currentPath)==null||n.quadTo(e,t,i,r)}setTransform(e,t=!1){var n,s,a,o,l;if(!this.ctx)return;let i=this.ctx.getTotalMatrix(),r=Qi.invert(i);if(r&&this.ctx.concat(r),(n=this.ctx)==null||n.scale(this.dpr,this.dpr),((s=this.camera)==null?void 0:s.enabled)&&((a=this.ctx)==null||a.concat(this.camera.worldMatrix),t)){let c=Qi.getScale(this.camera.worldMatrix);(o=this.ctx)==null||o.scale(1/c[0],1/c[1])}(l=this.ctx)==null||l.concat(e),this.currentTransform=e}transform(e){var t;(t=this.ctx)==null||t.concat(e)}setSize(e,t){var i;!this._isSizeDirty&&e===this._width&&t===this._height||(this._isSizeDirty=!1,this._width=e,this._height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=e*this.dpr,this.canvas.height=t*this.dpr,this._surface&&(this._surface=ci.MakeWebGLCanvasSurface(this.canvas),this.ctx=(i=this._surface)==null?void 0:i.getCanvas()))}};function jq(e){for(let t=0;t<e.length;t++)if(e[t]!==void 0&&!Number.isFinite(e[t]))return!1;return!0}function $_({r:e,g:t,b:i,a:r}){return ci.Color4f(e,t,i,r)}var Nq=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=_r.transparent,this.blurRadius=0,this.offset=[0,0],this.spread=0,this.update(t)}update(e){e.color!==void 0&&(this.color=e.color),e.enabled!==void 0&&(this.enabled=e.enabled),e.blurRadius!==void 0&&(this.blurRadius=e.blurRadius),e.offset!==void 0&&(this.offset=e.offset),e.spread!==void 0&&(this.spread=e.spread)}},Vq=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.radius=0,this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.radius!==void 0&&(this.radius=e.radius)}},r$e=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=_r.transparent,this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color)}},n$e=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=_r.transparent,this.thickness=0,this.mode="inside",this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color),e.thickness!==void 0&&(this.thickness=e.thickness),e.mode!==void 0&&(this.mode=e.mode)}},Ts=class extends Os{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.autoClose=!0,this.fill=new r$e(e+"-fill",t.fill,i),this.stroke=new n$e(e+"-stroke",t.stroke,i),this.dropShadow=new Nq(e+"-dropShadow",t.dropShadow,i),this.innerShadow=new Nq(e+"-innerShadow",t.innerShadow,i),this.backgroundBlur=new Vq(e+"-backgroundBlur",t.backgroundBlur,i),this.layerBlur=new Vq(e+"-layerBlur",t.layerBlur,i)}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:_r.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:_r.transparent,e.strokeMode=this.stroke.mode,e.lineWidth=this.stroke.thickness}applyFilters(e){this.layerBlur.enabled?e.layerBlur=this.layerBlur.radius*5:e.layerBlur=0,this.backgroundBlur.enabled?e.backgroundBlur=this.backgroundBlur.radius*5:e.backgroundBlur=0,this.dropShadow.enabled?(e.dropShadowBlur=this.dropShadow.blurRadius*5,e.dropShadowColor=this.dropShadow.color,e.dropShadowOffsetX=this.dropShadow.offset[0],e.dropShadowOffsetY=this.dropShadow.offset[1]):e.dropShadowColor=_r.transparent,this.innerShadow.enabled?(e.innerShadowSpread=this.innerShadow.spread,e.innerShadowBlur=this.innerShadow.blurRadius*5,e.innerShadowColor=this.innerShadow.color,e.innerShadowOffsetX=this.innerShadow.offset[0],e.innerShadowOffsetY=this.innerShadow.offset[1]):e.innerShadowColor=_r.transparent}innerDraw(e){}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.applyFilters(e),this.applyFillStroke(e),e.beginPath(),this.innerDraw(e),this.autoClose&&e.closePath(),this.fill.enabled&&e.fill(),this.stroke.enabled&&e.stroke(),e.restore())}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.type===0&&(Ir(e.path,["fill"])?this.fill.update(e.props):Ir(e.path,["stroke"])?this.stroke.update(e.props):Ir(e.path,["dropShadow"])?this.dropShadow.update(e.props):Ir(e.path,["innerShadow"])?this.innerShadow.update(e.props):Ir(e.path,["layerBlur"])?this.layerBlur.update(e.props):Ir(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}updateState(e,t){super.updateState(e,t),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur)}clone(e){let t=new Ts(this.uuid,this.data,e);return t.parent=void 0,t}},xz=class extends Ts{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.width=0,this.height=0,this.updateState(t,i)}innerDraw(e){e.ellipse(this.width*.5,this.height*.5,this.width*.5,this.height*.5,0,0,Math.PI*2)}intersectsInLocalSpace(e,t){return ZZe(e,t,this.width*.5,this.height*.5,this.width*.5,this.height*.5)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e)}clone(e){let t=new xz(this.uuid,this.data,e);return t.parent=void 0,t}},Lw=class extends Ts{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.width=0,this.height=0,this.cornerRadius=[0,0,0,0],this.updateState(t,i)}innerDraw(e){e.rect(0,0,this.width,this.height,...this.cornerRadius)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e)}clone(e){let t=new Lw(this.uuid,this.data,e);return t.parent=void 0,t}},bz=class extends Ts{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this._textHeight=0,this._textHeightDirty=!0,this.width=0,this.height=0,this.updateState(t,i)}get textHeight(){return this._textHeight}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:_r.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:_r.transparent,e.strokeMode="center",e.lineWidth=this.stroke.thickness}innerDraw(e){var s;(s=this._fontHolder)!=null&&s.arrayBuffer&&this._fontHolder.arrayBuffer.byteLength>1&&this.data.font&&e.registerFont(this._fontHolder.arrayBuffer,this.data.font);let t=this.data.textTransform,i=this.data.text.textValue.toString(),r=t===2?i.toUpperCase():t===3?i.toLowerCase():i,{height:n}=e.drawText(r,{x:0,y:0,width:this.width,height:this.height,fontSize:this.data.fontSize,lineHeight:this.data.lineHeight??1,letterSpacing:this.data.letterSpacing??0,horizontalAlign:this.data.horizontalAlign,verticalAlign:this.data.verticalAlign,font:this.data.font});this._textHeight=n}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateFontState(e,{shared:t}){e.font!==void 0&&(this._fontHolder=t.getFont(e.font),this._fontHolder&&!this._fontHolder.isLoaded&&this._fontHolder.loadingPromise.then(()=>{this.requestRender()}))}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateFontState(e,t)}clone(e){let t=new bz(this.uuid,this.data,e);return t.parent=void 0,t}},xse=class extends Ts{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.curves=[],this.extremasBBox={min:[0,0],max:[0,0]},this.updateState(t,i)}computeExtremas(){this.curves.length===0&&this.computeCurves();let e=this.curves.map(r=>kT.extremas(r)),t=[1/0,1/0],i=[-1/0,-1/0];for(let r=0,n=e.length;r<n;r++){let s=e[r];s[0][0]<t[0]&&(t[0]=s[0][0]),s[0][1]<t[1]&&(t[1]=s[0][1]),s[1][0]>i[0]&&(i[0]=s[1][0]),s[1][1]>i[1]&&(i[1]=s[1][1])}return this.extremasBBox.min=[t[0],t[1]],this.extremasBBox.max=[i[0],i[1]],this.extremasBBox}computeCurves(){this.curves=[];for(let i=1,r=this.data.points.length;i<r;i++){let n=this.data.points[i].data,s=this.data.points[i-1].data,a={start:s.position,cp1:s.controlNext.position,cp2:n.controlPrevious.position,end:n.position};this.curves.push(a)}let e=this.data.points[0].data,t=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let i={start:t.position,cp1:t.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(i)}}getCenter(){let[e,t]=this.extremasBBox.min,[i,r]=this.getHalfSize();return[e+i,t+r]}getHalfSize(){let{min:e,max:t}=this.extremasBBox;return[(t[0]-e[0])*.5,(t[1]-e[1])*.5]}innerDraw(e){for(let r=0,n=this.data.points.length;r<n;r++){let s=this.data.points[r].data;if(r===0){let[a,o]=s.position;e.moveTo(a,o)}else{let a=this.data.points[r-1].data,[o,l]=a.controlNext.position,[c,u]=s.controlPrevious.position,[h,f]=s.position,m={start:a.position,cp1:a.controlNext.position,cp2:s.controlPrevious.position,end:s.position};kT.derive(m),e.bezierCurveTo(o,l,c,u,h,f)}}let t=this.data.points[0].data,i=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let[r,n]=i.controlNext.position,[s,a]=t.controlPrevious.position,[o,l]=t.position;e.bezierCurveTo(r,n,s,a,o,l)}}updateState(e,t){super.updateState(e,t),this.computeExtremas()}clone(e){let t=new xse(this.uuid,this.data,e);return t.parent=void 0,t}},kT;(e=>{function t(a){let o=a.start,l=a.cp1,c=a.cp2,u=a.end,h=[3*(l[0]-o[0]),3*(l[1]-o[1])],f=[3*(c[0]-l[0]),3*(c[1]-l[1])],m=[3*(u[0]-c[0]),3*(u[1]-c[1])],g={start:h,cp:f,end:m};return a.derivative=g,g.derivative=HO.derive(g),g}e.derive=t;function i(a,o,l,c=!1){let u=a-2*o+l;if(u!==0){let h=-Math.sqrt(Math.abs(o*o-a*l)),f=-a+o,m=-(h+f)/u,g=-(-h+f)/u;return[m,g]}else if(o!==l&&u===0)return[(2*o-l)/(2*(o-l))];return[]}function r(a){let o=a.derivative??e.derive(a),l=o.start,c=o.cp,u=o.end;return[i(l[0],c[0],u[0]),i(l[1],c[1],u[1])]}e.droot=r;function n(a){let[o,l]=e.droot(a),c=[a.start[0],a.end[0]],u=[a.start[1],a.end[1]];for(let h of o)c.push(e.compute(a,Math.min(1,Math.max(0,h)))[0]);for(let h of l)u.push(e.compute(a,Math.min(1,Math.max(0,h)))[1]);return c.sort((h,f)=>h-f),u.sort((h,f)=>h-f),[[c[0],u[0]],[c[c.length-1],u[u.length-1]]]}e.extremas=n;function s(a,o){if(o===0)return[...a.start];if(o===1)return[...a.end];let l=1-o,c=l*l,u=o*o,h=c*l,f=c*o*3,m=l*u*3,g=o*u;return[h*a.start[0]+f*a.cp1[0]+m*a.cp2[0]+g*a.end[0],h*a.start[1]+f*a.cp1[1]+m*a.cp2[1]+g*a.end[1]]}e.compute=s})(kT||(kT={}));var HO;(e=>{function t(n){let s=n.start,a=n.cp,o=n.end,l=[2*(a[0]-s[0]),2*(a[1]-s[1])],c=[2*(o[0]-a[0]),2*(o[1]-a[1])],u={start:l,end:c};return u.derivative=GO.derive(u),n.derivative=u,u}e.derive=t;function i(n){let s=n.derivative??e.derive(n),a=s.start,o=s.end;return[a[0]!==o[0]?a[0]/(a[0]-o[0]):0,a[1]!==o[1]?a[1]/(a[1]-o[1]):0]}e.droot=i;function r(n,s){if(s===0)return[...n.start];if(s===1)return[...n.end];let a=1-s,o=a*a,l=s*s,c=o,u=a*s*2,h=l;return[c*n.start[0]+u*n.cp[0]+h*n.end[0],c*n.start[1]+u*n.cp[1]+h*n.end[1]]}e.compute=r})(HO||(HO={}));var GO;(e=>{function t(r){let n=r.start,s=r.end,a=[s[0]-n[0],s[1]-n[1]];return r.derivative=a,r.derivative}e.derive=t;function i(r,n){if(n===0)return[...r.start];if(n===1)return[...r.end];let s=r.start,a=r.end;return[s[0]+(a[0]-s[0])*n,s[1]+(a[1]-s[1])*n]}e.compute=i})(GO||(GO={}));var Su=class extends Ql{constructor(e,t,i){super(e,t,i),this.uuid=e,this.width=0,this.height=0,this.clipped=!0,this.background=new Lw(e+"-background",qb.defaultData,i),this.background.parent=this,this.updateState(t,i)}get fill(){return this.background.fill}get stroke(){return this.background.stroke}get backgroundBlur(){return this.background.backgroundBlur}get layerBlur(){return this.background.layerBlur}get dropShadow(){return this.background.dropShadow}get innerShadow(){return this.background.innerShadow}get cornerRadius(){return this.background.cornerRadius}set cornerRadius(e){this.background.cornerRadius=e}updateLocalMatrix(){var e;super.updateLocalMatrix(),(e=this.background)==null||e.updateLocalMatrix()}updateWorldMatrix(e,t,i){var r;super.updateWorldMatrix(e,t,i),(r=this.background)==null||r.updateWorldMatrix(e,t,i)}draw(e){if(!this.visible)return;e.save();let t=this.width,i=this.height;this.applyTransforms(e),this.background.width=t,this.background.height=i,this.background.draw(e),this.clipped&&e.clipRect(0,0,t,i,...this.cornerRadius),this.innerDrawChildren(e),e.restore()}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur),e.clipped!==void 0&&(this.clipped=e.clipped)}requestRender(){super.requestRender(),this.dispatchEvent({type:"render"})}dispose(){this.removeEventListener("render")}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.type===0&&(Ir(e.path,["fill"])?this.fill.update(e.props):Ir(e.path,["stroke"])?this.stroke.update(e.props):Ir(e.path,["dropShadow"])?this.dropShadow.update(e.props):Ir(e.path,["innerShadow"])?this.innerShadow.update(e.props):Ir(e.path,["layerBlur"])?this.layerBlur.update(e.props):Ir(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}clone(e){let t=new Su(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}},s$e=Yf(Ste(),1),J3=class extends Ts{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this._pathBBox=new DOMRect,this.path="",this.updateState(t,i),this.autoClose=!1,this.computeSVGBBox()}computeSVGBBox(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");document.body.appendChild(e),t.setAttribute("d",this.path),e.appendChild(t),this._pathBBox=t.getBBox(),e.remove()}innerDraw(e){e.path(this.path)}intersectsInLocalSpace(e,t){return e>=this._pathBBox.x&&e<=this._pathBBox.x+this._pathBBox.width&&t>=this._pathBBox.y&&t<=this._pathBBox.y+this._pathBBox.height}getCenter(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}getHalfSize(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}updateState(e,t){super.updateState(e,t),e.path!==void 0&&(this.path=e.path,this.computeSVGBBox())}clone(e){let t=new J3(this.uuid,this.data,e);return t.parent=void 0,t}};function a$e(e,t=1,i=1){if(t<=0||i<=0)return e;let r=(0,s$e.parseSVG)(e).map(n=>{let s={...n};return"x"in s&&(s.x=s.x*t),"y"in s&&(s.y=s.y*i),"x1"in s&&(s.x1=s.x1*t),"x2"in s&&(s.x2=s.x2*t),"y1"in s&&(s.y1=s.y1*i),"y2"in s&&(s.y2=s.y2*i),"rx"in s&&(s.rx=s.rx*t),"ry"in s&&(s.ry=s.ry*i),s});return o$e(r)}function o$e(e){let t=["rx","ry","xAxisRotation","largeArc","sweep","x1","y1","x2","y2","x","y"],i;return e.map(r=>{let n=[];t.forEach(a=>{if(a in r){let o=r[a]*1;n.length&&o>=0&&n.push(","),n.push(o)}});let s=(i===r.code?n[0]<0?"":",":r.code)+n.join("");return i=r.code,s}).join("")}function l$e(e,t,i){switch(t.type){case"ellipse2d":return new xz(e,t,i);case"rectangle2d":return new Lw(e,t,i);case"text2d":return new bz(e,t,i);case"vector2d":return new xse(e,t,i);case"path2d":return new J3(e,t,i);case"frame2d":return new Su(e,t,i);case"group2d":default:return new Nf(e,t,i)}}var bse=class{constructor(e,t,i){this.uuid=e,this.data=t,this.group=new Nf(bse.GROUP_ID,{...AT.defaultData},i),this.createChildrenObjects(t.objects,this.group,i)}createObject(e,t,i,r,n,s){let a=l$e(e,t,s);a&&(r.add(a),r.children.splice(n,0,r.children.pop()),a.updateWorldMatrix(),i.length>0&&(a instanceof Nf||a instanceof Su)&&this.createChildrenObjects(i,a,s))}createChildrenObjects(e,t,i){let r=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,r,i),r+=1}draw(e){this.group.draw(e)}updateEntityByOp(e,t,i,r){let n=this.find(e);if(n)try{n.updateByOp(t,i,{shared:r})}catch(s){console.error(s)}}updateTreeByOp(e,t){if(e.path.length===0&&e.type===7){let i=e.parent===null?this.group:this.find(e.parent);i!==void 0&&i instanceof Ql&&(this.createObject(e.id,e.data,e.children,i,e.localIndex,t),i.requestRender())}else if(e.path.length===0&&e.type===8){let i=this.find(e.id);if(i!==void 0&&i.parent!==void 0&&i.parent instanceof Ql){let r=i.parent;i.resetBBoxNeedsUpdate(),r==null||r.remove(i),r==null||r.requestRender()}}else if(e.path.length===0&&e.type===9){let i=this.find(e.id);if(i!==void 0){let r=i.parent,n=e.parent===null?this:this.find(e.parent);if(n instanceof Ql||n===this){n.add(i);let s=e.localIndex;n.children.splice(s,0,n.children.pop()),i.updateWorldMatrix(!0,!1,!0),r==null||r.requestRender(),i.requestRender()}i.resetBBoxNeedsUpdate()}}}add(e){this.group.add(e)}remove(e){this.group.remove(e)}traverse(e){this.group.traverse(t=>{t!==this.group&&e(t)})}intersectsChildren(e,t,i,r=!1,n=[]){return this.group.intersectsChildren(e,t,i,r,n,!0)}intersectsChildrenReverse(e,t,i,r=!1,n=[]){return this.group.intersectsChildrenReverse(e,t,i,r,n,!0)}find(e){return this.group.find(e)}get children(){return this.group.children}project(e,t){return this.group.project(e,t)}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let i=[],r=t;for(;r!==this.group;){let n=r;r=r.parent;let s=r.children.indexOf(n);i.splice(0,0,s)}return{entity:t,sortKey:i}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push(r)}return t.sort((i,r)=>ere(i.sortKey,r.sortKey)),t.map(i=>i.entity)}},wz=bse;wz.GROUP_ID="scene2d";function wse({constraints:e,newParentWidth:t,newParentHeight:i,initialParentWidth:r,initialParentHeight:n,objectInitialWidth:s,objectInitialHeight:a,objectInitialPosition:o}){let{horizontalConstraint:l,verticalConstraint:c}=e,u=t-r,h=i-n,f=s,m=a,g=o[0],v=o[1];if(l!==0){if(l===1)g+=u;else if(l===3)g+=u/2;else if(l===2)f=Math.max(1,f+u);else if(l===4){let x=t/r;f*=x,g*=x}}if(c!==0){if(c===1)v+=h;else if(c===3)v+=h/2;else if(c===2)m=Math.max(1,m+h);else if(c===4){let x=i/n;m*=x,v*=x}}return{width:f,height:m,position:[g,v]}}Yf(Ste(),1);var c$e=`
	varying vec2 vUv;
	void main() {
		vUv = uv;
		gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
	}`,u$e=`
	uniform sampler2D tDiffuse;
	varying vec2 vUv;
	void main() {
		vec4 texel = texture2D( tDiffuse, vUv );
		gl_FragColor = texel;
	}`,h$e=new I3(-1,1,1,-1,0,1),d$e=class extends Rt{constructor(){super(),this.setAttribute("position",new yt([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new yt([0,2,0,0,2,0],2))}},f$e=new d$e,p$e=class{constructor(e){this._mesh=new kr(f$e,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,h$e)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}},Sse=new Vi({defines:{},uniforms:{tDiffuse:new Qe(null)},vertexShader:c$e,fragmentShader:u$e}),m$e=new p$e(Sse),lD=null,cD=null,g$e=()=>(lD===null&&(lD=document.createElement("canvas")),lD),v$e=e=>(cD===null&&(cD=new yse(e)),cD),y$e=Qi.identity(),_se=class{constructor(e,t,i,r){this.uuid=e,this.width=t,this.height=i,this.context=r,this.enabled=!0,this.isScreenSpace=!1,this.dpr=window.devicePixelRatio,this.isFrameDirty=!1,this.onRenderRequestedDownstream=()=>{this.isFrameDirty=!0,this.context.shared.requestRender()},this._innerApplySize=()=>{let n=this.width,s=this.height,a=this.dpr;this.renderer.dpr=this.isScreenSpace?a:Math.floor(2048/Math.max(n,s)),this.renderer.setSize(n,s)},this.onFrameOverrideObjectEvent=n=>{var s,a;if(((s=n.target)==null?void 0:s.uuid)!==void 0){let o=(a=this.frameRoot)==null?void 0:a.find(n.target.uuid);o&&o.dispatchEvent({...n,target:o})}},this.scene2d=new wz(wt.generateUUID(),fO.defaultData,{dpr:window.devicePixelRatio,shared:r.shared}),this.canvas=g$e(),this.renderer=v$e(this.canvas),this.promise=this.init(),this.renderTarget=new Ni(1,1,{type:Xh,stencilBuffer:!1,depthBuffer:!1}),r.shared.addUIBuffer(this.uuid,this.renderTarget),this.textureHolder=r.shared.uiBuffer(this.uuid)}get canvasTexture(){return this._canvasTexture||(this._canvasTexture=new sze(this.canvas)),this._canvasTexture}async init(){this.renderer instanceof yse&&(this.renderer.wasmURL=qne.skiaWasmUrl),await this.renderer.init()}render(e){var t,i;if(this.isFrameDirty){this.isFrameDirty=!1,this._innerApplySize(),this.renderer.clear(),(t=this.frameOverride)==null||t.draw(this.renderer),this.renderer.render(),Sse.uniforms.tDiffuse.value=this.canvasTexture,this.canvasTexture.needsUpdate=!0;let r=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.clear(),m$e.render(e),e.setRenderTarget(r),(i=this.textureHolder)==null||i.setNeedsUpdate(!0)}}updateEntity2DByOp(e,t,i,r){this.scene2d.updateEntityByOp(e,t,i,r),this.applySize()}updateTreeByOp(e,t){this.scene2d.updateTreeByOp(e,t),this.applySize()}applyOverrides(e){if(this.frameOverride&&this.frameRoot){this.frameOverride.position=[0,0],this.frameOverride.rotation=0;let t=(e==null?void 0:e.width)??this.width,i=(e==null?void 0:e.height)??this.height;this.frameOverride.width=t,this.frameOverride.height=i,this.frameOverride.localMatrix=y$e,this.isScreenSpace&&(this.frameOverride.fill.color=_r.from0to1([0,0,0,0])),this.frameOverride.data={...this.frameOverride.data,width:t,height:i},Ese({objectOverride:this.frameOverride,objectRoot:this.frameRoot,newParentWidth:this.frameOverride.width,newParentHeight:this.frameOverride.height,initialParentWidth:this.frameRoot.width,initialParentHeight:this.frameRoot.height}),this.frameOverride.updateWorldMatrix(!0,!1,!0)}}applySize(e,t=window.devicePixelRatio){var o,l;let i=Math.max(1,(e==null?void 0:e.width)??this.width),r=Math.max(1,(e==null?void 0:e.height)??this.height);this.dpr=t,this.width=i,this.height=r,this._innerApplySize();let n=1,s=512,a=512;(i*t<s||r*t<a)&&(n=Math.max(s/(i*t),a/(r*t))),this.renderTarget.setSize(i*t*n,r*t*n),(o=this._canvasTexture)==null||o.dispose(),this._canvasTexture=void 0,this.applyOverrides(e),(l=this.frameOverride)==null||l.requestRender()}applyFrame(e){var i,r;let t=this.context.scene.find2D(e);if(!(!t||!(t instanceof Su)))return this.disposeFrameOverride(),this.frameRoot=t,this.frameOverride=t.clone({dpr:this.renderer.dpr,shared:this.context.shared}),this.scene2d.add(this.frameOverride),this.applySize(),(i=this.frame)==null||i.addEventListener("render",this.onRenderRequestedDownstream),this.frameOverride.traverse(n=>{n.addEventListener("beginState",this.onFrameOverrideObjectEvent)}),this.frameOverride.traverse(n=>{n.addEventListener("completeState",this.onFrameOverrideObjectEvent)}),(r=this.frame)==null||r.requestRender(),t}get frame(){return this.frameOverride}get frameId(){var e;return(e=this.frame)==null?void 0:e.uuid}find(e){return this.scene2d.find(e)}get texture(){var e;return(e=this.textureHolder)==null?void 0:e.getTexture(1001)}disposeFrameOverride(){var e,t,i;(e=this.frameOverride)==null||e.removeEventListener("render",this.onRenderRequestedDownstream),(t=this.frameOverride)==null||t.traverse(r=>{r.removeEventListener("beginStateChange",this.onFrameOverrideObjectEvent)}),(i=this.frameOverride)==null||i.traverse(r=>{r.removeEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frameOverride&&this.scene2d.remove(this.frameOverride)}};function Ese({objectOverride:e,objectRoot:t,newParentWidth:i,newParentHeight:r,initialParentWidth:n,initialParentHeight:s}){if(e instanceof Su&&t instanceof Su||e instanceof Nf&&t instanceof Nf)for(let a=0,o=e.children.length;a<o;a++){let l=e.children[a],c=t.children[a];l&&c&&l.uuid===c.uuid&&b$e({objectOverride:l,objectRoot:c,newParentWidth:i,newParentHeight:r,initialParentWidth:n,initialParentHeight:s})}}function x$e(e){if(WO(e))return[e.width,e.height];if(e instanceof J3){let[t,i]=e.getHalfSize();return[t*2,i*2]}else if(e instanceof Nf){let[t,i]=e.recursiveBBox.getHalfSize();return[t*2,i*2]}return[0,0]}function b$e({objectOverride:e,objectRoot:t,newParentWidth:i,newParentHeight:r,initialParentWidth:n,initialParentHeight:s}){let[a,o]=x$e(t),{width:l,height:c,position:u}=wse({constraints:e.data,newParentWidth:i,newParentHeight:r,initialParentWidth:n,initialParentHeight:s,objectInitialWidth:a,objectInitialHeight:o,objectInitialPosition:t.position});if(e.position=u,e.data={...e.data,position:u},e.states)for(let h in e.states)w$e({stateId:h,objectOverride:e,objectRoot:t,newParentWidth:i,newParentHeight:r,initialParentWidth:n,initialParentHeight:s});if(WO(e)||e instanceof Nf)WO(e)&&(e.width=l,e.height=c,e.data={...e.data,width:l,height:c}),Ese({objectOverride:e,objectRoot:t,newParentWidth:l,newParentHeight:c,initialParentWidth:a,initialParentHeight:o});else if(e instanceof J3){let h=t,f=a!==0?l/a:1,m=o!==0?c/o:1;e.path=a$e(h.path,f,m),e.data={...e.data,path:e.path}}}function w$e({stateId:e,objectOverride:t,objectRoot:i,newParentWidth:r,newParentHeight:n,initialParentWidth:s,initialParentHeight:a}){var c,u;let o=(c=t.states)==null?void 0:c[e],l=(u=i.states)==null?void 0:u[e];if(o&&l){let{width:h,height:f,position:m}=wse({constraints:t.data,newParentWidth:r,newParentHeight:n,initialParentWidth:s,initialParentHeight:a,objectInitialWidth:ym.isResizeable(l)?l.width:0,objectInitialHeight:ym.isResizeable(l)?l.height:0,objectInitialPosition:l.position});Object.assign(t.states[e],{position:m}),ym.isResizeable(o)&&Object.assign(t.states[e],{width:h,height:f})}}function WO(e){return e instanceof Lw||e instanceof Su||e instanceof xz||e instanceof bz}var As=class extends Zk(go){constructor(e,t,i){super(),this.data=t,this.bgColor=new sa(1,1,1,1),this.fog=null,this.backupFog=new Yte(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new qt,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new Ea(py,{...Hb.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new Wze(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight),t.uiScene?this.uiScene=new wz((Array.isArray(e)?e[0]:e)+"-ui",t.uiScene,{dpr:window.devicePixelRatio,shared:i.shared}):t.uiFrame&&this.createUICanvas(t.uiFrame,i)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}get frameId(){return this.data.uiFrame}get frame(){var e;return(e=this.uiCanvas)==null?void 0:e.frame}createUICanvas(e,t){this.uiCanvas=new _se(this.uuid+"-uiscreen",window.innerWidth,window.innerHeight,t),this.uiCanvas.isScreenSpace=!0,this.uiCanvas.promise.then(()=>{var i,r;(i=this.uiCanvas)==null||i.applyFrame(e),(r=this.uiCanvas)==null||r.applySize()})}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}entityChildrenCount(){return this.uiScene?this.uiScene.children.length:super.entityChildrenCount()}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=Wa(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.traverseEntity(t=>{t instanceof Lm&&t.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof vy)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&jZe(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let i=this.scene;i.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=Wa(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){e.aoColor!==void 0&&(this.aoColor=Wa(e.aoColor,t))}updateByOp(e,t,i,r){let n=this.data.uiFrame;super.updateByOp(e,t,i,r);let s=t;Ir(e.path,["fog"])?this.updateFog(s.fog,i.shared):Ir(e.path,["ao"])?this.updateAo(s.ao,i.shared):Ir(e.path,["ambient"])?this.updateAmbientLight(s.ambient,i.shared):Ir(e.path,["shadow"])?this.updateShadow(s.shadow):e.type===0&&e.path.length===0&&(e.props.uiFrame!==void 0||n!==s.uiFrame)&&this.updateUIFrame(e.props.uiFrame,i)}updateUIFrame(e,t){e?(this.uiCanvas||this.createUICanvas(e,t),this.uiCanvas.enabled=!0,this.uiCanvas.applyFrame(e)):this.uiCanvas&&(this.uiCanvas.enabled=!1)}updateState(e,t){this.updateState_Entity(e,t),e.backgroundColor!==void 0&&this.setBackgroundColor(Wa(e.backgroundColor,t.shared)),e.fog!==void 0&&this.updateFog(e.fog,t.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,t.shared),e.ao!==void 0&&this.updateAo(e.ao,t.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}createFrame(e,t){}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e;return((e=this.scene)==null?void 0:e.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(i=>{if(!i.visible)return!0;i instanceof pse&&i.visible&&e<3&&(this.penumbraSizeArrayCache[e]=i.data.penumbraSize??.5,e+=1),i instanceof mse&&i.visible&&e<2&&(this.penumbraSizeArrayCache[3+t]=i.data.penumbraSize??.5,t+=1)})}raycastWithClones(e){let t=[],i=r=>{for(let n of r.children){let s=n.cloner;zi.is(n)&&(n.visible||s!=null&&s.object.data.visible)&&((Yl(n)||kO(n)&&this.scene.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),qO(n,e,t,!0)),i(n))}};return i(this),t}updateEntity2DByOp(e,t,i,r){var n;(n=this.uiCanvas)==null||n.updateEntity2DByOp(e,t,i,r)}},S$e=class extends gz(Qze,hse){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=90,r.aspect=1,r.near=100,r.far=2500;let n=new j(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),s=new j(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z),a=new Pn(n,s),o=new KA(a,new qt(16755200));o.visible=!1,this.gizmos.shadowmap=o,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof KA){let i=this.shadow.camera,r=new j(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),n=new j(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z);t.box.set(r,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},_$e=class extends Gn{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?sz(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},Sz=class extends Gn{constructor(e,t,i){super(e,t,i),this._shapeId=null,this._context=i}updateState(e,t){super.updateState(e,t),this.updateShape(),this.refreshAttachedCloners(t)}updateShape(){var r;let e={...this.data.geometry.extrusion.shape};for(let n in e)typeof e[n]=="string"&&(e[n]=this._context.shared.getVariable(e[n],[this.uuid,"geometry","extrusion","shape",n]));let t;if(e.type==="Custom"){let n=e.shapeId;if(n!==this._shapeId&&this.detachShape(),n){this._shapeId=n;let s=this._context.scene.find(n);s!=null&&s.data&&(s.attachedPaths.add(this),t=(r=s.geometry.userData)==null?void 0:r.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let n;switch(e.type){case"Rectangle":n=nz;break;case"Ellipse":n=rz;break;case"Polygon":n=lne;break;case"Star":n=cne;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=n.create({parameters:e}).userData.shape}let i=this.geometry;t&&i.inputs&&(i.inputs.shapeData=t,i.build())}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?sz(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},_z=class extends mz{constructor(e,t,i){super(e,t,i),this.data=t}},lv=class extends yy(Rh,Rw){constructor(e,t,i){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,i)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let i=wT.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(i){let r,n;for(let s of of.rootOverrideProps)e[s]===void 0?(r===void 0&&(r={...e}),r[s]=i.data[s]):(n===void 0&&(n={}),n[s]=e[s],r===void 0&&(r={...e}),r[s]=bf.apply(i.data[s],e[s]));return this.overrideData=n,r}else return{...ls.defaultData,...e,...bu(ls.defaultData,of.rootOverrideProps)}}updateByOp(e,t,i,r){let n;if(this.isInstanceRoot&&!r){if(t=this.transformAssignData(t,i),e.type===0&&e.path.length===0&&this.component)for(let s of of.rootOverrideProps)s in e.props&&e.props[s]===void 0&&(n===void 0&&(n={...e,props:{...e.props}}),n.props[s]=this.component.data[s]);else if(e.type===0&&e.path.length>0&&of.rootOverrideProps.includes(e.path[0])){let s=e.path[0];n===void 0&&(n={...e,path:[],props:{[s]:t[s]}})}}super.updateByOp(n??e,t,i,r)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){let i=e.scene.find(t.component)??null,r=!1;if(i!==this.oldComponent){if(this.oldComponent){let n=0;for(let s of this.children)if(zi.is(s))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(s),Ez(s),n+=1;else break;this.children.splice(0,n)}r=!0}if(i){let n={};Ase(e,[this.uuid],t.overrides,this,i,i,0,r,n);for(let s of this.children)if(zi.is(s)){let a=s.data;a.type==="Empty"&&a.animations&&s.traverseEntity(o=>{let l=o.dataPatched;if(o instanceof Gn&&l.bones&&l.boneInverses){let c=o.dataPatched;if(c.bones&&c.boneInverses){let u=c.bones.map(m=>e.scene.find(n[m])),h=c.boneInverses.map(m=>new tt().fromArray(m)),f=new dk(u,h);o.bind(f,o.bindMatrix)}}else o.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function Ez(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let i of e.children)zi.is(i)&&Ez(i)}}function Uq(e,t,i,r){return e.component===t&&jk(e.identity,r)?e.overrideData===i?2:1:0}function Ase(e,t,i,r,n,s,a,o,l){if(a>50)return!1;if(r.component!==n){if(r.component){let u=r.component.instances.indexOf(r);u>=0&&r.component.instances.splice(u,1)}n.instances.find(u=>u===r)||n.instances.push(r),r.component=n}n instanceof lv&&n.isInstanceRoot&&n.expandInstanceChildren(e);let c=0;for(let u of n.children)if(zi.is(u)){let h=[...t,...typeof u.identity=="string"?[u.identity]:u.identity],f=vT.resolve(i,h,1);f!=null&&!(f instanceof qn)&&(Object.setPrototypeOf(f,qn.prototype),console.error("wrong prototype"));let m=null,g;if(!o){let v=r.children[c];if(m=zi.is(v)?v:null,m!==null){let x=Uq(m,u,f,h);g=x>=1?m.stateSelection:void 0,x!==2&&(m=null)}if(m===null&&(m=e.scene.findInstance(h)??null,m!==null)){let x=Uq(m,u,f,h);if(g=x>=1?m.stateSelection:void 0,x!==2)m=null;else{let b=m.parent.children.indexOf(m);m.parent.children.splice(b,1),r.children.splice(c,0,m),m.parent===r?b<=c&&console.error("not possible"):(m.parent=r,m.matrixWorldNeedsUpdate=!0,m.resetBBoxNeedsUpdate(),m.updateVisible(),e.pendingDeletes.delete(m))}}}if(m===null){let v=f?bf.apply(u.data,f):u.data;Im.is(v.type)&&(v={...v,type:"Empty"}),m=cf.createEntity(h,v,e),m.overrideData=f,r.add(m),r.children.splice(r.children.length-1,1),r.children.splice(c,0,m),m.updateState(m.data,e),g&&m.changeSelectedState(g,e),e.scene.registerInstanceAndSetUuid(m)}if(m.isBone){let v=m.identity[m.identity.length-1];l[v]=m.uuid}c+=1,Ase(e,t,i,m,u,s,a+1,o,l)}if(!o){let u=c;for(;;){let h=r.children[c];if(zi.is(h))e.pendingDeletes.add(h);else break;c+=1}r.children.splice(u,c-u)}return!0}var E$e=class extends yy(Qte,Rw){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}},xa=class extends Gn{constructor(e,t,i){super(e,t,i),this.onBeforeRender=r=>{this.uiCanvas.render(r)},this.uiCanvas=new _se(e+"-canvas",t.geometry.width,t.geometry.height,i),this.uiCanvas.promise.then(()=>{this.applyFrame(this.dataPatched.geometry.frame,i.shared)})}updateByPatchedOpGeometry(e,t,i){super.updateByPatchedOpGeometry(e,t,i),e.type===0&&(e.props.frame!==void 0&&this.applyFrame(e.props.frame,i.shared),(e.props.width!==void 0||e.props.height!==void 0)&&this.applySize(e.props,i.shared))}applySize(e,t){let i=(e==null?void 0:e.width)??this.dataPatched.geometry.width,r=(e==null?void 0:e.height)??this.dataPatched.geometry.height;this.uiCanvas.applySize({width:i,height:r}),this.applyGeometryParametersFromFrame(t)}applyFrame(e,t){this.uiCanvas.applyFrame(e),this.applyGeometryParametersFromFrame(t),this.applyMaterialParametersFromFrame({shared:t})}applyGeometryParametersFromFrame(e){var i;let t=this.frame;t&&(Object.assign(this.data,{geometry:Object.assign(this.data.geometry,{cornerRadius:t.cornerRadius,cornerType:0})}),Object.assign(this.dataPatched,{geometry:Object.assign(this.dataPatched.geometry,{cornerRadius:t.cornerRadius,cornerType:0})}),(i=this.localGeometry)==null||i.dispose(),this.localGeometry=Kb(this.dataPatched.geometry,e,this.data.flatShading,this))}applyMaterialParametersFromFrame(e){let t=this.frame;if(t){let i=t.data.backgroundBlur;Object.assign(this.data.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.data.material.layers[1].data,{roughness:i.radius,alpha:i.enabled?1:0}),Object.assign(this.dataPatched.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.dataPatched.material.layers[1].data,{roughness:i.radius,alpha:i.enabled?1:0}),this.material.reset(this.dataPatched.material,e,!0)}}updateEntity2DByOp(e,t,i,r){this.uiCanvas.updateEntity2DByOp(e,t,i,r),e===this.frameId&&t.type===0&&(t.props.cornerRadius!==void 0?this.applyGeometryParametersFromFrame(r):Ir(t.path,["backgroundBlur"])&&this.applyMaterialParametersFromFrame({shared:r}))}get frame(){return this.uiCanvas.frame}get frameId(){var e;return(e=this.frame)==null?void 0:e.uuid}removeInteractionGeometry(e){super.removeInteractionGeometry(e),this.applySize({},e)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.applySize({width:e.width,height:e.height},t)}},A$e=class{constructor(e,t,i){this.variables=[],this.currentTextureIndex=0;let r=wr,n=new go,s=new Qf;s.position.z=1;let a={passThruTexture:{value:null}},o=u(f(),a),l=new kr(new Au(2,2),o);n.add(l),this.setDataType=function(m){return r=m,this},this.addVariable=function(m,g,v){let x=this.createShaderMaterial(g),b={name:m,initialValueTexture:v,material:x,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:_i,magFilter:_i};return this.variables.push(b),b},this.setVariableDependencies=function(m,g){m.dependencies=g},this.init=function(){if(i.capabilities.isWebGL2===!1&&i.extensions.has("OES_texture_float")===!1)return"No OES_texture_float support for float textures.";if(i.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let m=0;m<this.variables.length;m++){let g=this.variables[m];g.renderTargets[0]=this.createRenderTarget(e,t,g.wrapS,g.wrapT,g.minFilter,g.magFilter),g.renderTargets[1]=this.createRenderTarget(e,t,g.wrapS,g.wrapT,g.minFilter,g.magFilter),this.renderTexture(g.initialValueTexture,g.renderTargets[0]),this.renderTexture(g.initialValueTexture,g.renderTargets[1]);let v=g.material,x=v.uniforms;if(g.dependencies!==null)for(let b=0;b<g.dependencies.length;b++){let S=g.dependencies[b];if(S.name!==g.name){let _=!1;for(let A=0;A<this.variables.length;A++)if(S.name===this.variables[A].name){_=!0;break}if(!_)return"Variable dependency not found. Variable="+g.name+", dependency="+S.name}x[S.name]={value:null},v.fragmentShader=`
uniform sampler2D `+S.name+`;
`+v.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){let m=this.currentTextureIndex,g=this.currentTextureIndex===0?1:0;for(let v=0,x=this.variables.length;v<x;v++){let b=this.variables[v];if(b.dependencies!==null){let S=b.material.uniforms;for(let _=0,A=b.dependencies.length;_<A;_++){let M=b.dependencies[_];S[M.name].value=M.renderTargets[m].texture}}this.doRenderTarget(b.material,b.renderTargets[g])}this.currentTextureIndex=g},this.getCurrentRenderTarget=function(m){return m.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(m){return m.renderTargets[this.currentTextureIndex===0?1:0]},this.dispose=function(){l.geometry.dispose(),l.material.dispose();let m=this.variables;for(let g=0;g<m.length;g++){let v=m[g];v.initialValueTexture&&v.initialValueTexture.dispose();let x=v.renderTargets;for(let b=0;b<x.length;b++)x[b].dispose()}};function c(m){m.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}this.addResolutionDefine=c;function u(m,g){g=g||{};let v=new Vi({uniforms:g,vertexShader:h(),fragmentShader:m});return c(v),v}this.createShaderMaterial=u,this.createRenderTarget=function(m,g,v,x,b,S){return m=m||e,g=g||t,v=v||qr,x=x||qr,b=b||_i,S=S||_i,new Ni(m,g,{wrapS:v,wrapT:x,minFilter:b,magFilter:S,format:$r,type:r,depthBuffer:!1})},this.createTexture=function(){let m=new Float32Array(e*t*4),g=new Ga(m,e,t,$r,wr);return g.needsUpdate=!0,g},this.renderTexture=function(m,g){a.passThruTexture.value=m,this.doRenderTarget(o,g),a.passThruTexture.value=null},this.doRenderTarget=function(m,g){let v=i.getRenderTarget(),x=i.xr.enabled,b=i.shadowMap.autoUpdate,S=i.outputEncoding,_=i.toneMapping;i.xr.enabled=!1,i.shadowMap.autoUpdate=!1,i.outputEncoding=cc,i.toneMapping=xu,l.material=m,i.setRenderTarget(g),i.render(n,s),l.material=o,i.xr.enabled=x,i.shadowMap.autoUpdate=b,i.outputEncoding=S,i.toneMapping=_,i.setRenderTarget(v)};function h(){return`void main()	{

	gl_Position = vec4( position, 1.0 );

}
`}function f(){return`uniform sampler2D passThruTexture;

void main() {

	vec2 uv = gl_FragCoord.xy / resolution.xy;

	gl_FragColor = texture2D( passThruTexture, uv );

}
`}}},Fs=new Js,J_=new j,T$e=class{constructor(e){let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,t=this.weightAttribute,i=new Float32Array(e.count/3);for(let n=0;n<e.count;n+=3){let s=1;t&&(s=t.getX(n)+t.getX(n+1)+t.getX(n+2)),Fs.a.fromBufferAttribute(e,n),Fs.b.fromBufferAttribute(e,n+1),Fs.c.fromBufferAttribute(e,n+2),s*=Fs.getArea(),i[n/3]=s}this.distribution=new Float32Array(e.count/3);let r=0;for(let n=0;n<i.length;n++)r+=i[n],this.distribution[n]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,i){let r=this.distribution[this.distribution.length-1],n=this.binarySearch(this.randomFunction()*r);return this.sampleFace(n,e,t,i)}binarySearch(e){let t=this.distribution,i=0,r=t.length-1,n=-1;for(;i<=r;){let s=Math.ceil((i+r)/2);if(s===0||t[s-1]<=e&&t[s]>e){n=s;break}else e<t[s]?r=s-1:i=s+1}return n}sampleFace(e,t,i,r){let n=this.randomFunction(),s=this.randomFunction();return n+s>1&&(n=1-n,s=1-s),Fs.a.fromBufferAttribute(this.positionAttribute,e*3),Fs.b.fromBufferAttribute(this.positionAttribute,e*3+1),Fs.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(Fs.a,n).addScaledVector(Fs.b,s).addScaledVector(Fs.c,1-(n+s)),i!==void 0&&Fs.getNormal(i),r!==void 0&&this.colorAttribute!==void 0&&(Fs.a.fromBufferAttribute(this.colorAttribute,e*3),Fs.b.fromBufferAttribute(this.colorAttribute,e*3+1),Fs.c.fromBufferAttribute(this.colorAttribute,e*3+2),J_.set(0,0,0).addScaledVector(Fs.a,n).addScaledVector(Fs.b,s).addScaledVector(Fs.c,1-(n+s)),r.r=J_.x,r.g=J_.y,r.b=J_.z),this}};function C$e(e){let t=new Float32Array(e*e*2);for(let i=0;i<e;i++)for(let r=0;r<e;r++){let n=i*e+r;t[n*2+0]=i/(e-1),t[n*2+1]=r/(e-1)}return t}function M$e(e){let t=Math.ceil(Math.sqrt(e));return Math.max(t,1)}function P$e(e,t){let i=new kr(e.geometry,e.material),r=[],n=[],s=new j,a=new j;i.geometry.index!==null&&(i.geometry=i.geometry.toNonIndexed());let o=new T$e(i).build();for(let u=0;u<t;u++)o.sample(s,a),r.push(s.x,s.y,s.z),n.push(a.x,a.y,a.z);let l=new Float32Array(r),c=new Float32Array(n);return{positions:l,normals:c}}function Fq(e,t){let i=e,r=new Float32Array(4*t*t);for(let s=0;s<t*t;s++)r[4*s]=i[3*s],r[4*s+1]=i[3*s+1],r[4*s+2]=i[3*s+2],r[4*s+3]=0;let n=new Ga(r,t,t,$r,wr);return n.needsUpdate=!0,n}function D$e({size:e}){let t=new Float32Array(4*e*e);for(let r=0;r<e*e;r++)t[4*r]=r,t[4*r+1]=0,t[4*r+2]=0,t[4*r+3]=0;let i=new Ga(t,e,e,$r,wr);return i.needsUpdate=!0,i}function I$e(e){let t=new Float32Array(4*e*e);for(let r=0;r<e*e;r++)t[4*r]=0,t[4*r+1]=0,t[4*r+2]=0,t[4*r+3]=0;let i=new Ga(t,e,e,$r,wr);return i.needsUpdate=!0,i}var R$e=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform float uTime;
uniform float uSpeed;     // update speed of the particles
uniform vec3 uWorldOffset;    
uniform vec4 uWorldQuaternion;
uniform float uMaxLifeTime;
uniform vec3 uEmitterSize;
uniform float uFPSRatio;     // 1  for 60 FPS

float random (vec2 st) {
    return fract(sin(dot(st.xy,
        vec2(12.9898,78.233)))*
        43758.5453123);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
    vec3 acceleration = force / mass;
    
    return acceleration;
  }
  

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    float currentLife = texture2D( uCurrentPosition, vUv ).w;   // from 1 to 0
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).r;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;          // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;         // timeStart in seconds when the particle was emitted
    vec3 originalPosition = ((texture2D( uOriginalPosition, vUv ).xyz) * uEmitterSize);
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float collisionFlag = texture2D( uCurrentVelocity, vUv ).w;             // 1. = collided, 0. = not collided
    float lifeTime = uMaxLifeTime;

    // Calculate the position adjustment based on collision
    //     if (collisionFlag > .5) {  
    float isColliding = step(0.5, collisionFlag); // 1.0 if collisionFlag > 0.5, otherwise 0.0
    float bounceOffset = 3.0 * isColliding; // Becomes 3.0 if colliding, 0.0 otherwise
    vec3 collisionAdjustedVelocity = velocity * (1.0 + bounceOffset);

    // Update position based on collision or normal movement
    vec3 fpsVelocity = velocity * min(uFPSRatio, 5.0);
    position += mix(fpsVelocity, collisionAdjustedVelocity, isColliding);

    // EMISSION RATE - BIRTH
    // if (isSpawning == 1.0) {
    // Better Approach to avoid If statement
    vec3 newPosition = applyQuaternionToVector(uWorldQuaternion, originalPosition) + uWorldOffset;
    originalPosition = mix(originalPosition, newPosition, isSpawning);
    position = mix(position, originalPosition, isSpawning);;
    timeStart = mix(timeStart, uTime, isSpawning);

    // Calculate timeLeft for life normalization
    float timeLeft = max(lifeTime - (uTime - timeStart), 0.0);
    float life_Normalize = timeLeft / lifeTime;

    // Use isActive to blend between the calculated color and black
    vec4 activeColor = vec4(position, life_Normalize);
    // if (isActive == 1.0) {
    gl_FragColor = mix(vec4(0.0), activeColor, isActive);

}
`,O$e=`

    vec3 mod289(vec3 x) {
      return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 mod289(vec4 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 permute(vec4 x) {
        return mod289(((x*34.0)+1.0)*x);
    }
    
    vec4 taylorInvSqrt(vec4 r)
    {
    return 1.79284291400159 - 0.85373472095314 * r;
    }
    
    vec3 fade(vec3 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

    float snoise(vec3 v)
    {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y
    
    // Permutations
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
    
    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
    float n_ = 0.142857142857; // 1.0/7.0
    vec3  ns = n_ * D.wyz - D.xzx;
    
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)
    
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
    
    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    
    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
    
    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);
    
    //Normalise gradients
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    
    // Mix final noise value
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                  dot(p2,x2), dot(p3,x3) ) );
    }
    
    vec3 snoiseVec3( vec3 x ){
    
      float s  = snoise(vec3( x ));
      float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
      float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
      vec3 c = vec3( s , s1 , s2 );
      return c;
    
    }
    
      
    vec3 curlNoise( vec3 p, float seed){
      p += seed;
      const float e = .1;
      vec3 dx = vec3( e   , 0.0 , 0.0 );
      vec3 dy = vec3( 0.0 , e   , 0.0 );
      vec3 dz = vec3( 0.0 , 0.0 , e   );
    
      vec3 p_x0 = snoiseVec3( p - dx );
      vec3 p_x1 = snoiseVec3( p + dx );
      vec3 p_y0 = snoiseVec3( p - dy );
      vec3 p_y1 = snoiseVec3( p + dy );
      vec3 p_z0 = snoiseVec3( p - dz );
      vec3 p_z1 = snoiseVec3( p + dz );
    
      float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
      float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
      float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;
    
      const float divisor = 1.0 / ( 2.0 * e );
      return normalize( vec3( x , y , z ) * divisor );
    
    }


// Classic Perlin noise
float cnoise(vec3 P)
{
  vec3 Pi0 = floor(P); // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec3 Pf0 = fract(P); // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);

  vec4 gx0 = ixy0 * (1.0 / 7.0);
  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 * (1.0 / 7.0);
  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
  return 2.2 * n_xyz;
}


vec3 fbm_vec3(vec3 p, float frequency, float offset)
{
  return vec3(
    cnoise((p+vec3(offset))*frequency),
    cnoise((p+vec3(offset+20.0))*frequency),
    cnoise((p+vec3(offset-30.0))*frequency)
  );
}

`,L$e=`
  #ifdef USE_COLLIDER
    float restitution = max(uBounce * 2., .01); // Energy Loss
    // SPHERE COLLIDER
    // **************************************************************
    #ifdef USE_SPHERE_COLLIDER       
      // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
      vec3 radii = uColliderSize;
      // Adjust position relative to collider
      vec3 relPos = position - uColliderPos;
      // Apply rotation of the collider to the relative position
      relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
      // Scale relative position by radii (for ellipsoid collision detection)
      vec3 scaledPos = relPos / radii;
      // Calculate ellipsoidal distance
      float dist = length(scaledPos); // Distance in terms of ellipsoid
      
      // Check for collision
      if (dist <= 1. + particleSize / length(radii) && collisionFlag == 0.0) {
          // Compute the normal at the collision point, accounting for particle size
        vec3 adjustedPos = scaledPos * (1.0 + particleSize / length(radii));          
        // Compute the normal at the collision point
        vec3 normal = ellipsoidNormal(adjustedPos, radii);
        // Rotate the normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);
        // Reflect the velocity vector off the normal
        velocity = reflect(velocity, normal) * restitution;

        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif

    // BOX COLLIDER or PLANE COLLIDER 
    // **************************************************************
    #ifdef USE_BOX_COLLIDER
      // Box dimensions and repulsion variables
      vec3 boxHalfSize = uColliderSize / 2.0;
      // Convert world position to box's local space
      vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
      // Collision detection
      vec3 localDistance = abs(localPos) - boxHalfSize;
      float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));    

      // Collision Detected
      if (distToSurface <= particleSize * 0.5 && collisionFlag == 0.0) {      
        // Find the nearest face normal for bounce direction
        vec3 normal;
        if (localDistance.x > localDistance.y && localDistance.x > localDistance.z) {
            normal = vec3(sign(localPos.x), 0.0, 0.0);
        } else if (localDistance.y > localDistance.z) {
            normal = vec3(0.0, sign(localPos.y), 0.0);
        } else {
            normal = vec3(0.0, 0.0, sign(localPos.z));
        }            
        // Rotate normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);      
        // Reflect velocity and apply repulsion force
        velocity = reflect(velocity, normal) * restitution;
        
        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif      
  #endif      
  // END COLLIDER    
`,k$e=`
  #ifdef USE_ATTRACTOR

      #ifdef USE_SPHERE_COLLIDER      
        // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
        vec3 radii = uColliderSize;
        // Adjust position relative to collider
        vec3 relPos = position - uColliderPos;
        // Apply rotation of the collider to the relative position
        relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
        // Scale relative position by radii (for ellipsoid collision detection)
        vec3 scaledPos = relPos / radii;
        // Calculate ellipsoidal distance
        float distToSurface = length(scaledPos); // Distance in terms of ellipsoid
        float insideCheck = 1.0;

      #endif


      #ifdef USE_BOX_COLLIDER
        // Box dimensions
        vec3 boxHalfSize = uColliderSize / 2.0;
        // Convert world position to box's local space
        vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
        vec3 localDistance = abs(localPos) - boxHalfSize;
        float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));
        float insideCheck = particleSize;
      #endif      
  
      // Apply vortex force inside the Helper
      #ifdef USE_FORCE_LOCAL_SPACE
        if (distToSurface <= insideCheck ) {    
            // Define parameters for the attractor field
            #ifdef USE_SPHERE_COLLIDER      
              float attractorStrength = (1.0 - distToSurface ) * uForceIntensity; // Adjust as needed
            #endif

            #ifdef USE_BOX_COLLIDER
              float attractorStrength = max((1.0 - insideCheck / distToSurface), 0.) * uForceIntensity; // Adjust as needed
              #endif

            float attractorDamping = uForceDamping;  // Adjust as needed (higher values will attenuate velocity more)
          
            // Use the same radii calculation code as for the collider
            vec3 attractorRadii = uColliderSize;
            // Adjust position relative to attractor center
            vec3 relPos = position - uColliderPos;
            // Apply rotation of the collider to the relative position
            relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
            // Scale relative position by radii (for ellipsoid attraction)
            vec3 scaledPos = relPos / attractorRadii;

            // Calculate ellipsoidal distance as attractor radius
            float attractorRadius = length(scaledPos);
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * attractorStrength;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= attractorDamping;
        }
      #else 
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * uForceIntensity;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= uForceDamping;
      #endif    
  #endif      
`,z$e=`
  #ifdef USE_VORTEX
    // Box dimensions
    vec3 boxHalfSize = uColliderSize / 2.0;
    // Convert world position to box's local space
    vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
    vec3 localDistance = abs(localPos) - boxHalfSize;
    float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));

    // Apply vortex force inside the box
    if (distToSurface <= particleSize) {
      float vortexStrength = uForceIntensity;
      vec3 localTopCenter = vec3(0.0, 0., 0.0);

      // Transform the local top center to the world space
      vec3 vortexCenter = uColliderPos + applyQuaternionToVector(uColliderQuaternion, localTopCenter);
      // Calculate the vector from particle to vortex center
      vec3 vortexVector = vortexCenter - position;

      // Calculate the rotation axis from the inverse of the collider's quaternion and the fixed up vector
      // Note: important to add a tiny z component to the up vector to avoid instability
      vec3 upVector = vec3(0.0, 1.0, 0.01);
      vec3 rotationAxis = cross(upVector, applyQuaternionToVector(uColliderQuaternion, vortexVector));
      rotationAxis = normalize(rotationAxis);

      // Add rotational component to velocity
      float rotationSpeed = length(vortexVector * vortexStrength * 3.0) ; 

      vec3 rotationVelocity = rotationAxis * rotationSpeed;
      // velocity += rotationVelocity * 0.005 ;
      velocity = rotationVelocity * 0.005 ;

      // Calculate vortex force
      // vec3 vortexForce = normalize(vortexVector) * uSpeed * .1 ;
      // Apply the vortex force to the particle
      vec3 originDirection = applyQuaternionToVector(uWorldQuaternion, directions);
      velocity += applyForce( originDirection * uSpeed * (1. - uForceDamping) , mass * .5);
    }
  #endif      
`,B$e=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform sampler2D uDirections;     
uniform vec3 uDirectionsAxis;
uniform vec4 uWorldQuaternion;
uniform vec3 uGravity;        
uniform float uNoiseStrength;     // Variation of the noise
uniform float uNoiseScale;        // Scale of the noise
uniform float uNoiseSeed;         // Seed of the noise
uniform float particleSize;
uniform float uSpeed;     // update speed of the particles
uniform float uRandomMassFactor;

// COLLIDER
uniform vec3 uColliderPos;                // Collider Position
uniform vec3 uColliderSize;               // Collider Dimension
uniform vec4 uColliderQuaternion;         // Collider Rotation
uniform vec4 uColliderQuaternionInvert;   // Collider Rotation
uniform float uBounce;                    // Bounce factor
uniform float uForceDamping;
uniform float uForceIntensity;


`+O$e+`
float rand(vec2 co){
    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
 } 
vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
  
  return acceleration;
}

vec4 conjugate(vec4 q) {
  return vec4(q.w, -q.x, -q.y, -q.z);
}

// Function to compute the normal of the ellipsoid at a given point
vec3 ellipsoidNormal(vec3 p, vec3 radii) {
  return normalize(p / (radii * radii));
}

float friction = .3;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    vec3 originalPosition = texture2D( uOriginalPosition, vUv ).xyz;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    vec3 directions = texture2D( uDirections, vUv ).xyz;    
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float mass = rand(originalPosition.xy) * 0.5 + 0.5;
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).x;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).y;          // 1. = active, 0. = not active
    float collisionFlag =texture2D( uCurrentVelocity, vUv ).w;          // Indicate collision

    // Randomness Mass
    mass = (1.0 - (uRandomMassFactor * mass));
    
    if (isActive == 1.0) {
      // **************************************************************
      // FORCES NOISES
      // **************************************************************
      #ifdef USE_CURL_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = curlNoise(position * uNoiseScale * .002, uNoiseSeed) * ( uNoiseStrength + 1.0) * .05 * uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {
          velocity += curlNoise( position, uNoiseSeed)  * uNoiseStrength * 0.05 * uSpeed;
        }
      #endif
      // **************************************************************
      #ifdef USE_SIMPLEX_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = vec3(snoise(position * uNoiseScale * .001) * ( uNoiseStrength + 1.0) * .1);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0) {
          velocity += vec3(snoise(position * uNoiseStrength * .001) * .05 * uSpeed);
        }
      #endif
      // ************************************************************** 
      #ifdef USE_FBM_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = fbm_vec3(position * uNoiseScale * .001, ( uNoiseStrength + 1.0), uNoiseSeed);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {      
          velocity += fbm_vec3(position * uNoiseStrength * .001, ( uNoiseStrength + 1.0), uNoiseSeed) * .1 * uSpeed;
        }
      #endif

      // COLLIDER
      ${L$e}
      // ATTRACTION
      ${k$e}  
      // VORTEX
      ${z$e}
    } 
    // End isActive

    // SPAWN BIRTH 
    // **************************************************************
    // if (isSpawning == 1.)
    #ifdef USE_NORMALS
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, directions) * uSpeed, isSpawning);
    #else
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, uDirectionsAxis) * uSpeed, isSpawning);    
    #endif
    
    // if (collisionFlag == 0.0)
    velocity += applyForce(uGravity, mass * .5) * (1.0 - collisionFlag);

    gl_FragColor = vec4(velocity, collisionFlag);
}
`,Tse=`

  // Linear Fade In
  float linearFadeIn(float t) {
    return t;
  }


  // linear fade out
  float linearFadeOut(float t) {
    return 1.0 - t;
  }
  
  float linearInOut(float t) {
    return t < 0.5 ? t :  (1.0 - t);  
  }

    // lerp
    float lerp(float a, float b, float t) {
      return a + (b - a) * t;
    }

  // Ease In Out Quart
  float exponentialInOut(float t) {
    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :
    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :
    1.0;
   }

  // constant
  float constant(float t) {
    return 1.0;
  } 
`,j$e=`

float rand(vec3 co){
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

vec3 applyQuaternionToVector( vec4 q, vec3 v ){
  return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
    
  return acceleration;
}
`,N$e=`
vec3 rgb2xyz (in vec3 rgb) {
    float r = rgb.r;
	float g = rgb.g;
	float b = rgb.b;

	r = r > 0.04045 ? pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);
	g = g > 0.04045 ? pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);
	b = b > 0.04045 ? pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);

	float x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);
	float y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);
	float z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);
    
    vec3 xyz = vec3(
        (r * 0.4124) + (g * 0.3576) + (b * 0.1805) * 100.0,
        (r * 0.2126) + (g * 0.7152) + (b * 0.0722) * 100.0,
        (r * 0.0193) + (g * 0.1192) + (b * 0.9505) * 100.0
    );
    return(xyz);
}

vec3 xyz2lab (in vec3 xyz) {
	float x = xyz.x / 95.047;
	float y = xyz.y / 100.0;
	float z = xyz.z / 108.883;

	x = x > 0.008856 ? pow(x, 1.0 / 3.0) : (7.787 * x) + (16.0 / 116.0);
	y = y > 0.008856 ? pow(y, 1.0 / 3.0) : (7.787 * y) + (16.0 / 116.0);
	z = z > 0.008856 ? pow(z, 1.0 / 3.0) : (7.787 * z) + (16.0 / 116.0);

    vec3 lab = vec3((116.0 * y) - 16.0, 500.0 * (x - y), 200.0 * (y - z));
    return(lab);
}

vec3 rgb2lab(in vec3 rgb) {
    vec3 xyz = rgb2xyz(rgb);
    vec3 lab = xyz2lab(xyz);
    return(lab);
}

vec3 xyz2rgb (in vec3 xyz) {
	float x = xyz.x / 100.0;
	float y = xyz.y / 100.0;
	float z = xyz.z / 100.0;
	
    
	float r = (x *  3.2406) + (y * -1.5372) + (z * -0.4986);
	float g = (x * -0.9689) + (y *  1.8758) + (z *  0.0415);
	float b = (x *  0.0557) + (y * -0.2040) + (z *  1.0570);

	r = r > 0.0031308 ? ((1.055 * pow(r, 1.0 / 2.4)) - 0.055) : r * 12.92;
	g = g > 0.0031308 ? ((1.055 * pow(g, 1.0 / 2.4)) - 0.055) : g * 12.92;
	b = b > 0.0031308 ? ((1.055 * pow(b, 1.0 / 2.4)) - 0.055) : b * 12.92;

	r = min(max(0.0, r), 1.0);
	g = min(max(0.0, g), 1.0);
	b = min(max(0.0, b), 1.0);

	return(vec3(r, g, b));
}

vec3 lab2xyz (in vec3 lab) {
    float l = lab.x;
	float a = lab.y;
	float b = lab.z;

  	float y = (l + 16.0) / 116.0;
	float x = a / 500.0 + y;
	float z = y - b / 200.0;

	float y2 = pow(y, 3.0);
	float x2 = pow(x, 3.0);
	float z2 = pow(z, 3.0);

  	y = y2 > 0.008856 ? y2 : (y - 16.0 / 116.0) / 7.787;
	x = x2 > 0.008856 ? x2 : (x - 16.0 / 116.0) / 7.787;
	z = z2 > 0.008856 ? z2 : (z - 16.0 / 116.0) / 7.787;

	x *= 95.047;
	y *= 100.0;
	z *= 108.883;

	return(vec3(x, y, z));
}
vec3 lab2rgb (in vec3 lab) {
    vec3 xyz = lab2xyz(lab);
    vec3 rgb = xyz2rgb(xyz);
    return(rgb);
}

`,V$e=`
  uniform sampler2D uPosition;
  uniform float uSize;
  uniform float uSizeEnd;
  uniform vec3 uWorldOffset;
  uniform vec4 uWorldQuaternion;
  // Billboard Behavior - Currently at Zero, but we can change that
  uniform float uRotation;
  uniform float uRotationEnd;
  uniform vec2 center;

  // Randomness
  uniform float uRandScaleFactor;
  uniform float uRandRotationFactor;

  attribute vec2 ref;

  varying float v_LifeLeft;    // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  ${j$e}
  ${Tse}
`,U$e=({easeSize:e="linearFadeOut"})=>`
  vUv = uv;  
  vRef = ref;
  // Normalized LifeTime 1 to 0
  float lifeLeft = texture2D(uPosition, ref).w;
  v_LifeLeft = lifeLeft;
  // Position From DataTexture Simulation
  vec3 pos = texture2D(uPosition, ref).rgb - uWorldOffset;
  // Apply World Quaternion
  pos = applyQuaternionToVector(uWorldQuaternion, pos);  
            
  #ifdef  USE_SIZE_END
    // Scaled Over Time
    float t = 1. - lifeLeft;
    float currentSize = mix(uSize, uSizeEnd, t); // Linearly interpolate between uSize and uSizeEnd
    vec3 scaledPosition = position * vec3(currentSize);
  #else
    // Change Size Behavior over LifeTime
    float easeSize = ${e}(1. - lifeLeft);
    // Scaled Over Time
    vec3 scaledPosition = position * vec3(uSize * easeSize);
  #endif

  // Billboard Behavior
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );    
  // Randomness 
  float randRef = rand(ref);
  scale *= (1.0 - (uRandScaleFactor * randRef));
  // Rotation
  float randRotation =  2.0 * PI * ( uRandRotationFactor * randRef);
  float originalRotation = (1.0 - uRotation) * 2.0 * PI;
  float originalRotationEnd = (1.0 - uRotationEnd) * 2.0 * PI;
  // OverTime
  float finalRotation = mix(originalRotation + randRotation, originalRotationEnd + randRotation, lifeLeft);

  vec2 alignedPosition = ( scaledPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( finalRotation ) * alignedPosition.x - sin( finalRotation ) * alignedPosition.y;
  rotatedPosition.y = sin( finalRotation ) * alignedPosition.x + cos( finalRotation ) * alignedPosition.y;
  
  mat4 instanceMatrix = mat4(
    vec4(1.0, 0.0, 0.0, 0.0),
    vec4(0.0, 1.0, 0.0, 0.0),
    vec4(0.0, 0.0, 1.0, 0.0),
    vec4(pos.x, pos.y, pos.z, 1.0)
  );  

  mvPosition = modelViewMatrix * instanceMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix  * mvPosition;   
`,F$e=`
  uniform vec4 uColor;                // start color
  uniform vec4 uColor2;               // end color
  uniform sampler2D uTexture;         // texture
  varying float v_LifeLeft;   // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  float random(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
  }
  `+Tse+`  
  ${N$e}

`,H$e=({easeOpacity:e="linearFadeOut"})=>`  
  // if Particle is dead, hide it
  if (v_LifeLeft <= 0.005 ) {
    discard;
  }

  #ifdef USE_RANDOM_COLORING
    float randVal = random(vRef); // Generate a random value based on the reference
    vec4 color = mix(uColor, uColor2, randVal); // Interpolate between the two colors
  #else
    vec4 color = mix(uColor, uColor2, 1. - v_LifeLeft);
  #endif

  // Opacity over Life Time
  float finalAlpha = ${e}(1. - v_LifeLeft);  
  vec4 textureColor = texture2D(uTexture, vUv).rgba; 
  finalColor = textureColor.rgb * color.rgb;
  finalAlpha = color.a * textureColor.a * finalAlpha;
  
  gl_FragColor = vec4(finalColor, finalAlpha);     

`,G$e=class extends Vi{constructor(e,t){super(),this.needsJitter=!0,this.type="ParticleMaterial",this.easeOpacity="linearFadeIn",this.easeSize="linearFadeIn",this.useSizeEnd=!1,this.isColoringRandom=!1,this.init(e,t),this.context=t}reset(){}init(e,t){this.transparent=!0,this.depthTest=!0,this.depthWrite=!1,this.easeOpacity=e.ease,this.easeSize=e.easeSize,this.layers=[],ns.startContext(ns.globalContext),this.lightLayer=new Kc(0,"",{..._s.defaultData("light","phong"),visible:!1},new cz,{},t.shared),ns.endContext(ns.globalContext),this.build()}updateState(e){e.coloring!==void 0&&(this.isColoringRandom=e.coloring==="random"),e.color!==void 0&&(e.color instanceof Array?this.uniforms.uColor.value=e.color:this.uniforms.uColor.value=this.context.shared.color(e.color)),e.color2!==void 0&&(e.color2 instanceof Array?this.uniforms.uColor2.value=e.color2:this.uniforms.uColor2.value=this.context.shared.color(e.color2)),e.size!==void 0&&(this.uniforms.uSize.value=e.size[0],this.uniforms.uSizeEnd.value=e.size[1],e.size[0]!==e.size[1]?this.useSizeEnd=!0:this.useSizeEnd=!1),e.ease!==void 0&&(this.easeOpacity=e.ease,this.build()),e.easeSize!==void 0&&(this.easeSize=e.easeSize,this.build()),this.needsUpdate=!0}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader}build(){let e=new Ene;return e.needsJitter=this.needsJitter,e.addFragmentParsCode(wXe),e.buildShader("vertex",this.fragment),e.buildShader("fragment",this.fragment),e.addFragmentFinalCode(SXe),this.isColoringRandom&&e.define("USE_RANDOM_COLORING"),this.useSizeEnd&&e.define("USE_SIZE_END"),e.addVertexParsCode(V$e),e.addFragmentParsCode(F$e),e.addVertexFinalCode(U$e({easeSize:this.easeSize})),e.addFragmentFinalCode(H$e({easeOpacity:this.easeOpacity})),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms={...e.uniforms,...this.uniforms},this.extensions=e.extensions,this}get nodeMaterial(){return this}get fragment(){return this.lightLayer.node}getDefines(){return this.defines}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}},uD=class{constructor(e,t,i,r){this.type="SphereEmitterShape",this.targetMesh=void 0,this.size=e,this.type=i,this.textureSize=M$e(t);let n=1;this.targetMesh=(r==null?void 0:r.geometry.type)==="BufferGeometry"||(r==null?void 0:r.type)==="Mesh"&&r&&r.geometry.hasAttribute("position")&&r.geometry.hasAttribute("normal")?r:this.getMesh(i,n);let{positions:s,dataTexture:a,dataTextureNormals:o}=this.createPositions(this.textureSize,this.targetMesh??this.getMesh(i,n));this.positionsTexture=a,this.positionsAttribute=s,this.directionsTexture=o}createPositions(e,t){let{positions:i,normals:r}=P$e(t,e*e),n=Fq(i,e),s=Fq(r,e);return{dataTexture:n,positions:i,dataTextureNormals:s}}getMesh(e,t){let i=null;switch(e){case"SphereEmitterShape":{i=new $0(t*.5,32,32);break}case"TorusEmitterShape":{i=new sie(t*.5,.3,15,40);break}case"ConeEmitterShape":{i=new gk(t,t,15);break}case"BoxEmitterShape":{i=new uc(t,t,t);break}case"PlaneEmitterShape":{i=new Au(t,t),i.rotateX(-Math.PI/2);break}case"MeshEmitterShape":{i=new $0(t,32,32);break}default:{i=new $0(t,32,32);break}}return new kr(i,new Yh({color:16711680}))}applyToShader(e,t){this.size=new j().fromArray(t.size),e.uEmitterSize.value=this.size}dispose(){this.positionsTexture.dispose(),this.directionsTexture.dispose(),this.positionsAttribute=new Float32Array}};function R0(e){let t={...e},i=hT.defaultData;t.forceFieldObjectId&&(t.colliderEntityId=t.forceFieldObjectId);let r={...i.shape,...t.shape},n={...i.renderMaterial,...t.renderMaterial};return{...i,...t,shape:r,renderMaterial:n}}var W$e=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU

uniform sampler2D uIndex; // Texture with corresponding index
uniform float uLastIndexEmitted; // Last emitted index
uniform float uParticlesToEmit; // Number of particles to emit on that frame
uniform float uTime;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    float particleIndex = texture(uIndex, vUv).x;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;    // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;


    // ********** Detect Colision to Create a flag and use it in position **********
    // We are doing this here, so

    // ********** Emit Particles **********
    // X = isSpawning 0.0 or 1.0
    // Y = isActive 0.0 or 1.0
    // Check if the vertex index is between the first value and the last value
    // if (particleIndex >= uLastIndexEmitted && particleIndex < uLastIndexEmitted + uParticlesToEmit) {
    //     // Emit a particle by writing 1 to the red channel of the color output
    //     // r: 1. == emit the particle
    //     // g: 1. == particle is now active
    //     timeStart = uTime;
    //     gl_FragColor = vec4(1.0, 1.0, timeStart, 1.0);
    // } else {
    //     // The Particle is either already emitted or not in the range of the particles to emit
    //     // Do not emit a particle by writing 0 to the red channel of the color output        
    //     gl_FragColor = vec4(0.0, isActive, timeStart, 1.0);
    // }
    // Determine if the particle is within the emission range
    float emitLowerBound = step(uLastIndexEmitted, particleIndex);
    float emitUpperBound = step(particleIndex, uLastIndexEmitted + uParticlesToEmit - 1.0);
    float emitParticle = emitLowerBound * emitUpperBound; // 1.0 if in range, 0.0 otherwise

    // Set timeStart and color
    timeStart = mix(timeStart, uTime, emitParticle);
    gl_FragColor = vec4(emitParticle, mix(isActive, 1.0, emitParticle), timeStart, 1.0);


}
`,hD=10,q$e=class extends mr{constructor(e,t){super(),this.type="ParticleEmitter",this.debugMode=!1,this.worldSpace=!0,this.rootObject=null,this.gpuCompute=null,this.positionSimRT=null,this.velocitySimRT=null,this.emissionRateSimRT=null,this.emitterShape=void 0,this.isEmitting=!1,this.hasBeenReset=!1,this.emittedParticlesAmount=0,this.lastEmitTime=0,this.globalTime=0,this.targetFPS=60,this.previousRatio=1,this.lerpFactor=.4,this.particlesAmount=0,this.noiseStrength=0,this.noiseScale=0,this.isBillboardBased=!0,this.simFeaturesDefinition={USE_COLLIDER:!1,USE_ATTRACTOR:!1,USE_VORTEX:!1,USE_SPHERE_COLLIDER:!1,USE_BOX_COLLIDER:!1,USE_FORCE_LOCAL_SPACE:!1,USE_NORMALS:!1,USE_CURL_NOISE:!0,USE_SIMPLEX_NOISE:!1,USE_FBM_NOISE:!1},this.textureLoader=new Gze,this.currentWorldPosition=new j,this.systemQuaternion=new Jt,this.worldGravity=new j(0,0,0),this.directionAxis=new j(0,0,0),this.colliderV3=new j(0,0,0),this.colliderQuaternion=new Jt(0,0,0,1),this.matrixAutoUpdate=!0,this.renderer=e,this.system=t,this.shared=t.context.shared;let i=t.data;this.material=new G$e(i.renderMaterial,t.context),this.material.uniforms={uSize:{value:0},uSizeEnd:{value:0},uColor:{value:i.renderMaterial.color},uColor2:{value:i.renderMaterial.color2},uPosition:{value:new j(0,0,0)},uEmissionData:{value:new j(0,0,0)},uTexture:{value:this.defaultTexture},uWorldOffset:{value:new j(0,0,0)},uWorldQuaternion:{value:new ni(0,0,0,1)},uRandScaleFactor:{value:i.randomScale??0},uRandRotationFactor:{value:i.randomRotation??0},uRotation:{value:i.renderMaterial.spriteRotation[0]??0},uRotationEnd:{value:i.renderMaterial.spriteRotation[1]??0}},this.setTexture(this.material.uniforms,i.renderMaterial.texture),this.init(i)}setTexture(e,t){let i=t.data;if(typeof t=="string"){let r=this.shared.image(t),n=new on(r.img);n.needsUpdate=!0,e.uTexture.value=n;return}if(typeof i!="string"){let r=new Image;r.onload=()=>{let a=new on(r);a.needsUpdate=!0,e.uTexture.value=a};let n=new Blob([i],{type:"image/*"}),s=URL.createObjectURL(n);r.src=s}}updateGeometryAttributes(e,t){var r;let i=C$e(t);!((r=this.emitterShape)!=null&&r.positionsAttribute)||e.geometry.setAttribute("ref",new Rb(i,2))}applyWorldSpace(){if(!this.system.started||!this.worldSpace||!this.positionSimRT||!this.velocitySimRT)return;let e=this.system;e.getWorldQuaternion(this.systemQuaternion),this.systemQuaternion.invert(),e.getWorldPosition(this.currentWorldPosition),this.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.positionSimRT.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.systemQuaternion.invert(),this.positionSimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.velocitySimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize())}update(e,t){var a;if(!this.gpuCompute||!this.positionSimRT||!this.velocitySimRT||!this.emissionRateSimRT||this.hasBeenReset)return;if(this.checkIfAllParticlesAreDead()&&!this.hasBeenReset){this.reset();return}this.applyWorldSpace(),this.globalTime=e,this.positionSimRT.material.uniforms.uTime.value=e,this.emissionRateSimRT.material.uniforms.uTime.value=e;let i=1e3/t,r=this.targetFPS/i,n=this.previousRatio+(r-this.previousRatio)*this.lerpFactor;this.positionSimRT.material.uniforms.uFPSRatio.value=n,this.previousRatio=n;let s=this.isEmitting?this.GoEmitSomeParticles(e,this.system.data.birthRatePerSec):0;this.emissionRateSimRT.material.uniforms.uLastIndexEmitted.value=this.emittedParticlesAmount,this.emissionRateSimRT.material.uniforms.uParticlesToEmit.value=s,this.material.uniforms.uPosition.value=(a=this.gpuCompute.getCurrentRenderTarget(this.positionSimRT))==null?void 0:a.texture,this.system.colliderEntities.length>0&&this.renderColliders(),this.gpuCompute.compute()}renderColliders(){if(!this.velocitySimRT)return;let e=this.system.colliderEntities[0],t=this.simFeaturesDefinition.USE_COLLIDER||this.simFeaturesDefinition.USE_ATTRACTOR||this.simFeaturesDefinition.USE_VORTEX;if(e.destroyedInAction&&t&&this.init(R0({...this.system.data,colliderEntityId:null})),!e||e.destroyedInAction)return;e.getWorldPosition(this.colliderV3),this.colliderV3.y===0&&(this.colliderV3.y=1e-4),this.velocitySimRT.material.uniforms.uColliderPos.value.copy(this.colliderV3);let i=e.data.size;this.colliderV3.fromArray(i),this.velocitySimRT.material.uniforms.uColliderSize.value.copy(this.simFeaturesDefinition.USE_SPHERE_COLLIDER?this.colliderV3.multiplyScalar(.5):this.colliderV3),e.getWorldQuaternion(this.colliderQuaternion),this.velocitySimRT.material.uniforms.uColliderQuaternion.value.copy(this.colliderQuaternion.normalize()),this.velocitySimRT.material.uniforms.uColliderQuaternionInvert.value.copy(this.colliderQuaternion.normalize().invert())}updateState(e){!this.velocitySimRT||!this.positionSimRT||(e.renderMaterial&&this.updateMaterialState(e.renderMaterial),this.updateParticleState(e))}updateVariableState(e,t){if(!this.velocitySimRT||!this.positionSimRT)return;t[2]==="size"&&this.material.updateState({size:[e,this.material.uniforms.uSizeEnd.value]}),t[2]==="sizeEnd"&&this.material.updateState({size:[this.material.uniforms.uSize.value,e]});let i=(r,n)=>{let s=[...this.system.data.shape.size];s[r]=n,this.updateParticleState({shape:{...this.system.data.shape,size:s}})};t[2]==="shape_size_0"&&i(0,e),t[2]==="shape_size_1"&&i(1,e),t[2]==="shape_size_2"&&i(2,e),t[2]==="speed"&&(this.velocitySimRT.material.uniforms.uSpeed.value=e/hD),t[2]==="gravity"&&this.worldGravity.set(0,e/100,0),t[2]==="noiseStrength"&&(this.noiseStrength=e,this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),t[2]==="noiseScale"&&(this.noiseScale=e,this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),t[2]==="direction_x"&&(this.directionAxis=this.getDirectionAxis([Number(e),this.system.data.direction[1],this.system.data.direction[2]])),t[2]==="direction_y"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],Number(e),this.system.data.direction[2]])),t[2]==="direction_z"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],this.system.data.direction[1],Number(e)]))}updateMaterialState(e){this.material.updateState({...e,size:e.size?[Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","size"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","sizeEnd"]))]:[0,0]}),e.texture&&(this.setTexture(this.material.uniforms,e.texture),this.material.needsUpdate=!0)}updateParticleState(e){var t,i,r;if(!(!this.positionSimRT||!this.velocitySimRT)){if(this.shouldReInitGPUCompute(e)&&this.init(R0(this.system.data)),e.life!==void 0&&(this.positionSimRT.material.uniforms.uMaxLifeTime.value=e.life),e.speed!==void 0&&(this.velocitySimRT.material.uniforms.uSpeed.value=Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/hD),e.collisionBounce!==void 0&&(this.velocitySimRT.material.uniforms.uBounce.value=e.collisionBounce),e.noiseStrength!==void 0&&(this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),e.noiseScale!==void 0&&(this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"])),this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),e.noiseSeed!==void 0&&(this.velocitySimRT.material.uniforms.uNoiseSeed.value=e.noiseSeed),e.randomMass!==void 0&&(this.velocitySimRT.material.uniforms.uRandomMassFactor.value=e.randomMass),((t=e.renderMaterial)==null?void 0:t.size)!==void 0){let n=this.shared.getVariable(e.renderMaterial.size[0],[this.uuid,"particles","size"]);this.velocitySimRT.material.uniforms.particleSize.value=Number(n)}if(((i=e.renderMaterial)==null?void 0:i.spriteRotation)!==void 0&&(this.material.uniforms.uRotation.value=e.renderMaterial.spriteRotation[0],this.material.uniforms.uRotationEnd.value=e.renderMaterial.spriteRotation[1]),e.shape!==void 0){let n=e.shape.size??this.system.data.shape.size,s=[Number(this.shared.getVariable(n[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(n[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(n[2],[this.uuid,"particles","shape_size_2"]))],a={...R0(this.system.data).shape,size:s};(r=this.emitterShape)==null||r.applyToShader(this.positionSimRT.material.uniforms,a)}if(e.gravity!==void 0&&(this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.velocitySimRT.material.uniforms.uGravity={value:this.worldGravity}),e.direction!==void 0){let n=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(n),this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis}e.randomRotation!==void 0&&(this.material.uniforms.uRandRotationFactor.value=e.randomRotation),e.randomScale!==void 0&&(this.material.uniforms.uRandScaleFactor.value=e.randomScale)}}updateForceFieldParameters(e){!this.velocitySimRT||(e.forceIntensity!==void 0&&(this.velocitySimRT.material.uniforms.uForceIntensity.value=e.forceIntensity),e.forceDambing!==void 0&&(this.velocitySimRT.material.uniforms.uForceDamping.value=e.forceDambing))}getDirectionAxis(e){let t=[Number(e[0])*wt.DEG2RAD,Number(e[1])*wt.DEG2RAD,Number(e[2])*wt.DEG2RAD],i=new as(t[0],t[1],t[2],"XYZ");return this.directionAxis.set(0,1,0).applyEuler(i).normalize(),this.velocitySimRT&&(this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis),this.directionAxis}shouldReInitGPUCompute(e){let{birthRatePerSec:t,rootObjectType:i,colliderEntityId:r,shape:n,emitTimeDuration:s,emitTimeCycle:a,life:o,directionMode:l,noiseType:c}=e;return t!==void 0||i!==void 0||r||r===null||a!==void 0||n!==void 0||o!==void 0||s!==void 0||l!==void 0||c!==void 0}init(e){this.dispose(),this.particlesAmount=this.getMaxParticlesAmount({birthRatePerSecond:e.birthRatePerSec,particleMaxLifeTime:e.life,loopDuration:e.emitTimeCycle==="infinity"?0:e.emitTimeDuration}),this.particlesAmount>1e5&&(console.warn("The maximum number of particles is limited to 100000."),this.particlesAmount=1e5),this.emitterShape=this.createShape(e.shape,this.particlesAmount);let t=setInterval(()=>{if(this.emitterShape)if(isNaN(this.emitterShape.positionsTexture.source.data.data[0])){this.init(e);return}else clearInterval(t)},100);if(!this.emitterShape)return;let i=new A$e(this.emitterShape.textureSize,this.emitterShape.textureSize,this.renderer),r=this.updateSimulationDefinition(e),n=i.addVariable("uCurrentPosition",r+R$e,this.emitterShape.positionsTexture),s=i.addVariable("uCurrentVelocity",r+B$e,this.emitterShape.directionsTexture),a=i.addVariable("uCurrentEmissionRate",W$e,I$e(this.emitterShape.textureSize));i.setVariableDependencies(n,[n,s,a]),i.setVariableDependencies(s,[n,s,a]),i.setVariableDependencies(a,[n,s,a]);let o=D$e({size:this.emitterShape.textureSize}),l={uOriginalPosition:{value:this.emitterShape.positionsTexture},uWorldOffset:{value:new j(0,0,0)},uWorldQuaternion:{value:new ni(0,0,0,1)},uTime:{value:0},uFPSRatio:{value:1},uMaxLifeTime:{value:e.life},uEmitterSize:{value:new j(Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"])))},particleSize:{value:0}};n.material.uniforms=l;let c=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(c),this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"]));let u=e.colliderEntityId&&this.system.getColliderData(e.colliderEntityId),h={uOriginalPosition:{value:this.emitterShape.positionsTexture},uDirections:{value:this.emitterShape.directionsTexture},uDirectionsAxis:{value:this.directionAxis},uWorldQuaternion:{value:new ni(0,0,0,1)},uColliderPos:{value:new j(0,0,0)},uColliderSize:{value:new j(0,0,0)},uForceIntensity:{value:u?u.forceIntensity:0},uForceDamping:{value:u?u.forceDambing:0},uColliderQuaternion:{value:new ni(0,0,0,1)},uColliderQuaternionInvert:{value:new ni(0,0,0,1)},particleSize:{value:0},uGravity:{value:this.worldGravity},uNoiseStrength:{value:this.noiseStrength},uNoiseScale:{value:this.noiseScale},uNoiseSeed:{value:e.noiseSeed},uRandomMassFactor:{value:e.randomMass},uBounce:{value:e.collisionBounce},uSpeed:{value:Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/hD}};s.material.uniforms=h;let f={uIndex:{value:o},uTime:{value:0},uLastIndexEmitted:{value:0},uParticlesToEmit:{value:0}};a.material.uniforms=f;let m=[Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"]))],g={...R0(this.system.data).shape,size:m};this.emitterShape.applyToShader(n.material.uniforms,g),i.init(),this.gpuCompute=i,this.positionSimRT=n,this.velocitySimRT=s,this.emissionRateSimRT=a,this.rootObject=this.createPrimaryEmitter(this.emitterShape.textureSize),this.add(this.rootObject),this.material.needsUpdate=!0}getDirectionFromVariable(e){let t=Number(this.shared.getVariable(e[0],[this.uuid,"particles","direction_x"])),i=Number(this.shared.getVariable(e[1],[this.uuid,"particles","direction_y"])),r=Number(this.shared.getVariable(e[2],[this.uuid,"particles","direction_z"]));return[t,i,r]}updateSimulationDefinition(e){if(this.simFeaturesDefinition.USE_COLLIDER=!1,this.simFeaturesDefinition.USE_ATTRACTOR=!1,this.simFeaturesDefinition.USE_VORTEX=!1,this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!1,this.simFeaturesDefinition.USE_BOX_COLLIDER=!1,this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!1,this.simFeaturesDefinition.USE_NORMALS=!1,this.simFeaturesDefinition.USE_CURL_NOISE=!1,this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!1,this.simFeaturesDefinition.USE_FBM_NOISE=!1,e.colliderEntityId&&this.system.colliderEntities.length>0){let i=this.system.getColliderData(e.colliderEntityId);switch(i==null?void 0:i.forceType){case"attractor":this.simFeaturesDefinition.USE_ATTRACTOR=!0;break;case"collider":this.simFeaturesDefinition.USE_COLLIDER=!0;break;case"vortex":this.simFeaturesDefinition.USE_VORTEX=!0;break}let r=i==null?void 0:i.colliderType;r==="sphere"&&(this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!0),r==="box"&&(this.simFeaturesDefinition.USE_BOX_COLLIDER=!0),(i==null?void 0:i.forceRange)==="helper"&&(this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!0)}e.directionMode==="normals"&&(this.simFeaturesDefinition.USE_NORMALS=!0),e.noiseType==="curl"&&(this.simFeaturesDefinition.USE_CURL_NOISE=!0),e.noiseType==="simplex"&&(this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!0),e.noiseType==="fbm"&&(this.simFeaturesDefinition.USE_FBM_NOISE=!0);let t="";for(let[i,r]of Object.entries(this.simFeaturesDefinition))r&&(t+=`#define ${i}
`);return t}createShape(e,t){this.emitterShape&&this.emitterShape.dispose();let i=new j(Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.size[2],[this.uuid,"particles","shape_size_2"])));if(e.type==="MeshEmitterShape"){let r=null;return this.system.context.scene.traverseEntity(n=>{n.uuid===e.fromMeshId&&(r=n)}),r?new uD(i,t,e.type,r):new uD(i,t,"SphereEmitterShape")}else return new uD(i,t,e.type)}createPrimaryEmitter(e){let t,i=e*e;return t=new rze(new Au(1,1,1),this.material,i),this.updateGeometryAttributes(t,e),this.material.needsUpdate=!0,t.onBeforeRender=()=>{this.applyWorldSpace()},t}getMaxParticlesAmount({birthRatePerSecond:e,particleMaxLifeTime:t,loopDuration:i=0}){return Math.ceil(e*(t+i))}dispose(){var e,t,i;!this.gpuCompute||((t=(e=this.rootObject)==null?void 0:e.parent)==null||t.remove(this.rootObject),this.gpuCompute.dispose(),this.material.nodeMaterialDispose(),(i=this.emitterShape)==null||i.dispose())}GoEmitSomeParticles(e,t){let i=e-this.lastEmitTime,r=1/t;if(i>=r){let n=Math.max(1,Math.floor(i/r));return this.lastEmitTime=e,this.emittedParticlesAmount+n>this.particlesAmount&&(this.emittedParticlesAmount=0),this.emittedParticlesAmount+=n,n}return 0}checkIfAllParticlesAreDead(){return this.lastEmitTime+this.system.data.life+1<this.globalTime}reset(){this.hasBeenReset=!0,this.lastEmitTime=0,this.emittedParticlesAmount=0,this.gpuCompute&&this.init(R0(this.system.data))}startEmitting(e){this.isEmitting=!0,this.hasBeenReset=!1,this.lastEmitTime=e}stopEmitting(){this.isEmitting=!1}},Qx=class extends Ka{constructor(e,t,i){super(e,t),this.type="ParticleSystem",this.geometry=new Rt,this.actualTime=0,this.currentLoopTime=0,this.started=!1,this.stopped=!1,this.timeoutId=void 0,this.isFrozen=!1,this.isIdle=!0,this.emitter=null,this.colliderEntities=[],this.renderer=null,this.isPreWarm=!1,this._hasOnAfterRenderBeenCalled=!1,this.onAfterRender=r=>{this._hasOnAfterRenderBeenCalled||(this._hasOnAfterRenderBeenCalled=!0,this.init(r))},this.context=i,this.data={...t,...R0(t)},this.geometry.setAttribute("position",new yt([],3)),this.material=new Yh({colorWrite:!1}),this.frustumCulled=!1}init(e){this.renderer=e,this.emitter=new q$e(e,this),this.add(this.emitter),this.updateParticleState(this.data)}update(e){if(!this.isReady||!this.started||this.isFrozen||this.isIdle)return;this.actualTime+=e,this.stopped||(this.currentLoopTime+=e);let t=this.data.emitTimeCycle==="one_time";if((this.data.emitTimeCycle==="loop"||t)&&this.currentLoopTime>this.data.emitTimeDuration*1e3&&(this.stopped||(this.stop(),t||this.start(this.data.emitTimeDelay*1e3))),this.emitter&&this.started){let i=this.actualTime/1e3;this.emitter.update(i,e)}this.scale.set(1,1,1),this.updateMatrix()}isReady(){return!!this.emitter}hasCollider(e){return this.colliderEntities.some(t=>t.identity===e)}getColliderData(e){let t=this.colliderEntities.find(i=>i.identity===e);return t?t.data:null}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),Ir(e.path,["renderMaterial"])&&this.updateParticleState({renderMaterial:{...this.data.renderMaterial,...Cs.drop(e,1).props}}),Ir(e.path,["shape"])&&this.updateParticleState({shape:{...this.data.shape,...Cs.drop(e,1).props}})}updateState(e,t){super.updateState(e,t),this.updateParticleState(e)}updateParticleState(e){if(this.emitter){if(e.colliderEntityId!==void 0&&e.colliderEntityId!==null){let t=this.context.scene.find(e.colliderEntityId);this.colliderEntities=t?[t]:[]}e.colliderEntityId===null&&(this.colliderEntities=[]),this.emitter.updateState(e),e.emitTimeCycle&&this.started&&this.start()}}updateFromColliderEntity(e){!this.emitter||(this.emitter.updateForceFieldParameters(e),this.stop(),this.start())}start(e=0){var t;if(this.currentLoopTime=0,e){this.timeoutId=window.setTimeout(()=>{this.start(0)},e);return}this.started=!0,this.stopped=!1,this.isFrozen=!1,(t=this.emitter)==null||t.startEmitting(this.actualTime/1e3)}froze(){this.isFrozen=!0}unFroze(){this.isFrozen=!1}stop(){var e;this.stopped=!0,this.currentLoopTime=0,(e=this.emitter)==null||e.stopEmitting(),clearTimeout(this.timeoutId)}reset(){var e;this.started=!1,this.stopped=!1,(e=this.emitter)==null||e.reset()}wakeUp(){this.isIdle=!1}sleep(){this.isIdle=!0,this.reset()}};function X$e(){try{let e=window.location.href;if(e.includes("reducesubdiv=")){let t=e.indexOf("reducesubdiv=")+13;return parseInt(e.slice(t,t+1))}}catch{}}var dD=X$e();function Y$e(e,t,i){var n;dD!==void 0&&(((n=t==null?void 0:t.geometry)==null?void 0:n.subdivisions)??0)>dD&&(console.log("reducing subdivisions",t.name,t.geometry.subdivisions),t.geometry.subdivisions=dD);let r;return t.geometry.type==="TextGeometry"?new mz(e,t,i):t.geometry.type==="InputGeometry"?new _z(e,t,i):(t.geometry.type==="SubdivGeometry"?r=new Zb(e,t,i):t.geometry.type==="PathGeometry"?r=new Sz(e,t,i):t.geometry.type==="VectorGeometry"?r=new _$e(e,t,i):t.geometry.type==="BooleanGeometry"?r=new Lm(e,t,i):t.geometry.type==="ShapeBlendGeometry"?r=new km(e,t,i):t.geometry.type==="UIGeometry"?r=new xa(e,t,i):r=new Gn(e,t,i),r)}function Az(e,t,i){return console.assert(t.type!==void 0),t.type==="Mesh"?Y$e(e,t,i):t.type==="Empty"?new ov(e,t):t.type==="Particle"?new Qx(e,t,i):t.type==="ParticleCollider"?new Yx(e,t,i):t.type==="Splat"?new ov(e,t):t.type==="Bone"?new E$e(e,t):t.type==="Page"?new As(e,t,i):t.type==="PointLight"?new S$e(e,t,i):t.type==="SpotLight"?new mse(e,t,i):t.type==="DirectionalLight"?new pse(e,t,i):t.type==="Component"||t.type==="Instance"?new lv(e,t,i):Im.is(t.type)?new Ea(e,t):(console.error(t),new ov(e,t))}cf.createEntity=Az;function Q$e(e,t,i){let r=Az(e.identity,t,i),n=e.children,s=e.attachedPaths,a=e.parent,o=e.component,l=e.instances,c=e.overrideData,u=e.uuid,h=e.stateSelection;e.dispose();for(let f of Object.keys(e))delete e[f];Object.setPrototypeOf(e,Object.getPrototypeOf(r));for(let f of Object.keys(r))e[f]=r[f];e.children=[...e.children,...n],e.attachedPaths=s,e.parent=a,e.component=o,e.instances=l,e.uuid=u,e.overrideData=c,e.updateState(e.data,i),h&&e.changeSelectedState(h,i),e.resetBBoxNeedsUpdate()}cf.changeEntityProptotype=Q$e;cf.Cloner=vl;function K$e(e,t,i,r){e.updateByOp(t,i,r,!1)}var Xp=5,Kx=new Rt;Kx.setAttribute("position",new Xt(new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),3));var YE=class extends Lze{constructor(e){super({...e,depthTest:!1,depthWrite:!1,glslVersion:oR,vertexShader:`
				precision highp float;
				in vec3 position;
				void main() {
					gl_Position = vec4(position, 1);
				}
			`})}customProgramCacheKey(){return""}};function Z$e(){return{shapeInput:()=>`
			const float posRowCoord = ${.5/Xp};  // vec4: px py pz opType
			const float quatRowCoord = ${1.5/Xp};  // vec4: qx qy qz qw
			const float param1RowCoord = ${2.5/Xp};// vec4: type param1 param2 param3
			const float param2RowCoord = ${3.5/Xp};// vec4: blendRange roundness scale param4
			const float colorRowCoord = ${4.5/Xp}; // vec4: r g b a
			uniform sampler2D shapesDataTexture;
			vec4 shapePos(float iin) { 
				vec4 r = texture(shapesDataTexture, vec2(iin, posRowCoord));
				return r;
			}
			vec4 shapeQuat(float iin) {
				vec4 r = texture(shapesDataTexture, vec2(iin, quatRowCoord));
				return r;
			}
			vec4 shapeParams1(float iin) {
				vec4 r = texture(shapesDataTexture, vec2(iin, param1RowCoord));
				return r;
			}
			vec4 shapeParams2(float iin) {
				vec4 r = texture(shapesDataTexture, vec2(iin, param2RowCoord));
				return r;
			}
			vec4 shapeColor(float iin) {
				vec4 r = texture(shapesDataTexture, vec2(iin, colorRowCoord));
				return r;
			}
		`,getxyzi:`
			// this code must complement lookup
			float xi = mod(gl_FragCoord.x - 0.5, VOXEL_RESOLUTION);
			float yi = mod(gl_FragCoord.y - 0.5, VOXEL_RESOLUTION);
			float zi = floor((gl_FragCoord.x - 0.5) * INV_VOXEL_RESOLUTION) + floor((gl_FragCoord.y - 0.5) * INV_VOXEL_RESOLUTION) * Z_LAYERS_PER_ROW;
		`,lookup:`
			uniform sampler2D potentialPassTexture;
			uniform sampler2D voxelPassTexture; // includes normal (in xyz) and key (in w)
			
			// box or marching cube lookup value in value texture, integer box coord inputs
			// this code must complement codebits.getxyzi
			vec4 look(float xi, float yi, float zi, sampler2D rt) {// range 0 .. numv etc
				vec2 uv = vec2(
					mod(zi, Z_LAYERS_PER_ROW) + (xi + 0.5) / VOXEL_RESOLUTION,
					floor(zi / Z_LAYERS_PER_ROW) + (yi + 0.5) / VOXEL_RESOLUTION
				); 
				uv /= Z_LAYERS_PER_ROW;
				return texture(rt, uv);
			}
		`,getpart:`
			float getpart(inout float a, float b) {
				float t = floor(a/b);
				float r = a - t*b;
				a = t;
				return r;
			}
		`,triTable:new Float32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,1,1,8,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,2,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,10,2,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,2,9,9,2,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,2,8,10,2,8,9,10,-1,-1,-1,-1,-1,-1,-1,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,11,0,0,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,11,3,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,11,1,11,9,1,11,8,9,-1,-1,-1,-1,-1,-1,-1,1,10,3,3,10,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,10,0,10,8,0,10,11,8,-1,-1,-1,-1,-1,-1,-1,0,9,3,9,11,3,9,10,11,-1,-1,-1,-1,-1,-1,-1,10,8,9,11,8,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,4,4,3,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,0,7,4,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,4,1,7,4,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,2,1,7,4,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,4,3,4,0,3,10,2,1,-1,-1,-1,-1,-1,-1,-1,10,2,9,2,0,9,7,4,8,-1,-1,-1,-1,-1,-1,-1,9,10,2,7,9,2,3,7,2,4,9,7,-1,-1,-1,-1,7,4,8,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,4,11,4,2,11,4,0,2,-1,-1,-1,-1,-1,-1,-1,1,0,9,7,4,8,11,3,2,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,9,2,11,9,1,2,9,-1,-1,-1,-1,1,10,3,10,11,3,4,8,7,-1,-1,-1,-1,-1,-1,-1,10,11,1,11,4,1,4,0,1,4,11,7,-1,-1,-1,-1,8,7,4,11,0,9,10,11,9,3,0,11,-1,-1,-1,-1,11,7,4,9,11,4,10,11,9,-1,-1,-1,-1,-1,-1,-1,4,5,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,5,9,3,8,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,5,0,0,5,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,5,8,5,3,8,5,1,3,-1,-1,-1,-1,-1,-1,-1,10,2,1,4,5,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,3,10,2,1,5,9,4,-1,-1,-1,-1,-1,-1,-1,10,2,5,2,4,5,2,0,4,-1,-1,-1,-1,-1,-1,-1,5,10,2,5,2,3,4,5,3,8,4,3,-1,-1,-1,-1,4,5,9,11,3,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,11,0,11,8,0,5,9,4,-1,-1,-1,-1,-1,-1,-1,4,5,0,5,1,0,11,3,2,-1,-1,-1,-1,-1,-1,-1,5,1,2,8,5,2,11,8,2,5,8,4,-1,-1,-1,-1,11,3,10,3,1,10,4,5,9,-1,-1,-1,-1,-1,-1,-1,5,9,4,1,8,0,1,10,8,10,11,8,-1,-1,-1,-1,0,4,5,11,0,5,10,11,5,3,0,11,-1,-1,-1,-1,8,4,5,10,8,5,11,8,10,-1,-1,-1,-1,-1,-1,-1,8,7,9,9,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,9,3,5,9,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,7,0,7,1,0,7,5,1,-1,-1,-1,-1,-1,-1,-1,3,5,1,7,5,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,7,9,7,5,9,2,1,10,-1,-1,-1,-1,-1,-1,-1,2,1,10,0,5,9,0,3,5,3,7,5,-1,-1,-1,-1,2,0,8,5,2,8,7,5,8,2,5,10,-1,-1,-1,-1,5,10,2,3,5,2,7,5,3,-1,-1,-1,-1,-1,-1,-1,5,9,7,9,8,7,2,11,3,-1,-1,-1,-1,-1,-1,-1,7,5,9,2,7,9,0,2,9,11,7,2,-1,-1,-1,-1,11,3,2,8,1,0,8,7,1,7,5,1,-1,-1,-1,-1,1,2,11,7,1,11,5,1,7,-1,-1,-1,-1,-1,-1,-1,8,5,9,7,5,8,3,1,10,11,3,10,-1,-1,-1,-1,0,7,5,9,0,5,0,11,7,10,0,1,0,10,11,-1,0,10,11,3,0,11,0,5,10,7,0,8,0,7,5,-1,5,10,11,5,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,6,10,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,0,9,6,10,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,1,8,9,1,6,10,5,-1,-1,-1,-1,-1,-1,-1,5,6,1,1,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,6,1,6,2,1,8,0,3,-1,-1,-1,-1,-1,-1,-1,5,6,9,6,0,9,6,2,0,-1,-1,-1,-1,-1,-1,-1,8,9,5,2,8,5,6,2,5,8,2,3,-1,-1,-1,-1,11,3,2,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,11,0,2,11,5,6,10,-1,-1,-1,-1,-1,-1,-1,9,1,0,11,3,2,6,10,5,-1,-1,-1,-1,-1,-1,-1,6,10,5,2,9,1,2,11,9,11,8,9,-1,-1,-1,-1,11,3,6,3,5,6,3,1,5,-1,-1,-1,-1,-1,-1,-1,11,8,0,5,11,0,1,5,0,6,11,5,-1,-1,-1,-1,6,11,3,6,3,0,5,6,0,9,5,0,-1,-1,-1,-1,9,5,6,11,9,6,8,9,11,-1,-1,-1,-1,-1,-1,-1,6,10,5,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,4,3,7,4,10,5,6,-1,-1,-1,-1,-1,-1,-1,0,9,1,6,10,5,7,4,8,-1,-1,-1,-1,-1,-1,-1,5,6,10,7,9,1,3,7,1,4,9,7,-1,-1,-1,-1,2,1,6,1,5,6,8,7,4,-1,-1,-1,-1,-1,-1,-1,5,2,1,6,2,5,4,0,3,7,4,3,-1,-1,-1,-1,7,4,8,5,0,9,5,6,0,6,2,0,-1,-1,-1,-1,9,3,7,4,9,7,9,2,3,6,9,5,9,6,2,-1,2,11,3,4,8,7,5,6,10,-1,-1,-1,-1,-1,-1,-1,6,10,5,2,7,4,0,2,4,11,7,2,-1,-1,-1,-1,9,1,0,8,7,4,11,3,2,6,10,5,-1,-1,-1,-1,1,2,9,2,11,9,11,4,9,4,11,7,6,10,5,-1,7,4,8,5,11,3,1,5,3,6,11,5,-1,-1,-1,-1,11,1,5,6,11,5,11,0,1,4,11,7,11,4,0,-1,9,5,0,5,6,0,6,3,0,3,6,11,7,4,8,-1,9,5,6,11,9,6,9,7,4,9,11,7,-1,-1,-1,-1,9,4,10,10,4,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,10,4,10,9,4,3,8,0,-1,-1,-1,-1,-1,-1,-1,1,0,10,0,6,10,0,4,6,-1,-1,-1,-1,-1,-1,-1,1,3,8,6,1,8,4,6,8,10,1,6,-1,-1,-1,-1,9,4,1,4,2,1,4,6,2,-1,-1,-1,-1,-1,-1,-1,8,0,3,9,2,1,9,4,2,4,6,2,-1,-1,-1,-1,4,2,0,6,2,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,4,2,8,6,2,4,-1,-1,-1,-1,-1,-1,-1,9,4,10,4,6,10,3,2,11,-1,-1,-1,-1,-1,-1,-1,2,8,0,11,8,2,10,9,4,6,10,4,-1,-1,-1,-1,2,11,3,6,1,0,4,6,0,10,1,6,-1,-1,-1,-1,1,4,6,10,1,6,1,8,4,11,1,2,1,11,8,-1,4,6,9,6,3,9,3,1,9,3,6,11,-1,-1,-1,-1,1,11,8,0,1,8,1,6,11,4,1,9,1,4,6,-1,6,11,3,0,6,3,4,6,0,-1,-1,-1,-1,-1,-1,-1,8,4,6,8,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,10,7,10,8,7,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,7,0,7,10,0,10,9,0,10,7,6,-1,-1,-1,-1,7,6,10,7,10,1,8,7,1,0,8,1,-1,-1,-1,-1,7,6,10,1,7,10,3,7,1,-1,-1,-1,-1,-1,-1,-1,6,2,1,8,6,1,9,8,1,7,6,8,-1,-1,-1,-1,9,6,2,1,9,2,9,7,6,3,9,0,9,3,7,-1,0,8,7,6,0,7,2,0,6,-1,-1,-1,-1,-1,-1,-1,2,3,7,2,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,3,2,8,6,10,9,8,10,7,6,8,-1,-1,-1,-1,7,0,2,11,7,2,7,9,0,10,7,6,7,10,9,-1,0,8,1,8,7,1,7,10,1,10,7,6,11,3,2,-1,1,2,11,7,1,11,1,6,10,1,7,6,-1,-1,-1,-1,6,9,8,7,6,8,6,1,9,3,6,11,6,3,1,-1,1,9,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,6,0,7,0,11,3,0,6,11,-1,-1,-1,-1,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,3,6,7,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,0,6,7,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,8,1,3,8,6,7,11,-1,-1,-1,-1,-1,-1,-1,2,1,10,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,2,1,8,0,3,7,11,6,-1,-1,-1,-1,-1,-1,-1,0,9,2,9,10,2,7,11,6,-1,-1,-1,-1,-1,-1,-1,7,11,6,3,10,2,3,8,10,8,9,10,-1,-1,-1,-1,3,2,7,7,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,7,0,6,7,0,2,6,-1,-1,-1,-1,-1,-1,-1,6,7,2,7,3,2,9,1,0,-1,-1,-1,-1,-1,-1,-1,2,6,1,6,8,1,8,9,1,6,7,8,-1,-1,-1,-1,6,7,10,7,1,10,7,3,1,-1,-1,-1,-1,-1,-1,-1,6,7,10,10,7,1,7,8,1,8,0,1,-1,-1,-1,-1,7,3,0,10,7,0,9,10,0,7,10,6,-1,-1,-1,-1,10,6,7,8,10,7,9,10,8,-1,-1,-1,-1,-1,-1,-1,4,8,6,6,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,6,3,6,0,3,6,4,0,-1,-1,-1,-1,-1,-1,-1,11,6,8,6,4,8,1,0,9,-1,-1,-1,-1,-1,-1,-1,6,4,9,3,6,9,1,3,9,6,3,11,-1,-1,-1,-1,4,8,6,8,11,6,1,10,2,-1,-1,-1,-1,-1,-1,-1,10,2,1,11,0,3,11,6,0,6,4,0,-1,-1,-1,-1,8,11,4,11,6,4,9,2,0,9,10,2,-1,-1,-1,-1,3,9,10,2,3,10,3,4,9,6,3,11,3,6,4,-1,3,2,8,2,4,8,2,6,4,-1,-1,-1,-1,-1,-1,-1,2,4,0,2,6,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,4,3,2,6,4,2,8,3,4,-1,-1,-1,-1,4,9,1,2,4,1,6,4,2,-1,-1,-1,-1,-1,-1,-1,3,1,8,1,6,8,6,4,8,1,10,6,-1,-1,-1,-1,0,1,10,6,0,10,4,0,6,-1,-1,-1,-1,-1,-1,-1,3,6,4,8,3,4,3,10,6,9,3,0,3,9,10,-1,4,9,10,4,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,9,4,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,5,9,4,6,7,11,-1,-1,-1,-1,-1,-1,-1,1,0,5,0,4,5,11,6,7,-1,-1,-1,-1,-1,-1,-1,6,7,11,4,3,8,4,5,3,5,1,3,-1,-1,-1,-1,4,5,9,2,1,10,11,6,7,-1,-1,-1,-1,-1,-1,-1,7,11,6,10,2,1,3,8,0,5,9,4,-1,-1,-1,-1,11,6,7,10,4,5,10,2,4,2,0,4,-1,-1,-1,-1,8,4,3,4,5,3,5,2,3,2,5,10,6,7,11,-1,3,2,7,2,6,7,9,4,5,-1,-1,-1,-1,-1,-1,-1,4,5,9,6,8,0,2,6,0,7,8,6,-1,-1,-1,-1,2,6,3,6,7,3,0,5,1,0,4,5,-1,-1,-1,-1,8,2,6,7,8,6,8,1,2,5,8,4,8,5,1,-1,4,5,9,6,1,10,6,7,1,7,3,1,-1,-1,-1,-1,10,6,1,6,7,1,7,0,1,0,7,8,4,5,9,-1,10,0,4,5,10,4,10,3,0,7,10,6,10,7,3,-1,10,6,7,8,10,7,10,4,5,10,8,4,-1,-1,-1,-1,5,9,6,9,11,6,9,8,11,-1,-1,-1,-1,-1,-1,-1,11,6,3,3,6,0,6,5,0,5,9,0,-1,-1,-1,-1,8,11,0,11,5,0,5,1,0,11,6,5,-1,-1,-1,-1,3,11,6,5,3,6,1,3,5,-1,-1,-1,-1,-1,-1,-1,10,2,1,11,5,9,8,11,9,6,5,11,-1,-1,-1,-1,3,11,0,11,6,0,6,9,0,9,6,5,10,2,1,-1,5,8,11,6,5,11,5,0,8,2,5,10,5,2,0,-1,3,11,6,5,3,6,3,10,2,3,5,10,-1,-1,-1,-1,9,8,5,8,2,5,2,6,5,2,8,3,-1,-1,-1,-1,6,5,9,0,6,9,2,6,0,-1,-1,-1,-1,-1,-1,-1,8,5,1,0,8,1,8,6,5,2,8,3,8,2,6,-1,6,5,1,6,1,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,3,1,10,6,1,6,8,3,9,6,5,6,9,8,-1,0,1,10,6,0,10,0,5,9,0,6,5,-1,-1,-1,-1,8,3,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,5,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,11,11,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,11,5,7,11,0,3,8,-1,-1,-1,-1,-1,-1,-1,7,11,5,11,10,5,0,9,1,-1,-1,-1,-1,-1,-1,-1,5,7,10,7,11,10,1,8,9,1,3,8,-1,-1,-1,-1,2,1,11,1,7,11,1,5,7,-1,-1,-1,-1,-1,-1,-1,3,8,0,7,2,1,5,7,1,11,2,7,-1,-1,-1,-1,5,7,9,7,2,9,2,0,9,7,11,2,-1,-1,-1,-1,2,5,7,11,2,7,2,9,5,8,2,3,2,8,9,-1,10,5,2,5,3,2,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,2,8,2,5,8,5,7,8,5,2,10,-1,-1,-1,-1,1,0,9,3,10,5,7,3,5,2,10,3,-1,-1,-1,-1,2,8,9,1,2,9,2,7,8,5,2,10,2,5,7,-1,5,3,1,5,7,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,1,7,0,5,7,1,-1,-1,-1,-1,-1,-1,-1,3,0,9,5,3,9,7,3,5,-1,-1,-1,-1,-1,-1,-1,7,8,9,7,9,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,5,8,10,5,8,11,10,-1,-1,-1,-1,-1,-1,-1,4,0,5,0,11,5,11,10,5,0,3,11,-1,-1,-1,-1,9,1,0,10,4,8,11,10,8,5,4,10,-1,-1,-1,-1,4,11,10,5,4,10,4,3,11,1,4,9,4,1,3,-1,1,5,2,5,8,2,8,11,2,8,5,4,-1,-1,-1,-1,11,4,0,3,11,0,11,5,4,1,11,2,11,1,5,-1,5,2,0,9,5,0,5,11,2,8,5,4,5,8,11,-1,5,4,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,2,2,5,3,5,4,3,4,8,3,-1,-1,-1,-1,2,10,5,4,2,5,0,2,4,-1,-1,-1,-1,-1,-1,-1,2,10,3,10,5,3,5,8,3,8,5,4,9,1,0,-1,2,10,5,4,2,5,2,9,1,2,4,9,-1,-1,-1,-1,5,4,8,3,5,8,1,5,3,-1,-1,-1,-1,-1,-1,-1,5,4,0,5,0,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,4,8,3,5,8,5,0,9,5,3,0,-1,-1,-1,-1,5,4,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,11,4,11,9,4,11,10,9,-1,-1,-1,-1,-1,-1,-1,3,8,0,7,9,4,7,11,9,11,10,9,-1,-1,-1,-1,11,10,1,4,11,1,0,4,1,11,4,7,-1,-1,-1,-1,4,1,3,8,4,3,4,10,1,11,4,7,4,11,10,-1,7,11,4,4,11,9,11,2,9,2,1,9,-1,-1,-1,-1,4,7,9,7,11,9,11,1,9,1,11,2,3,8,0,-1,4,7,11,2,4,11,0,4,2,-1,-1,-1,-1,-1,-1,-1,4,7,11,2,4,11,4,3,8,4,2,3,-1,-1,-1,-1,10,9,2,9,7,2,7,3,2,9,4,7,-1,-1,-1,-1,7,10,9,4,7,9,7,2,10,0,7,8,7,0,2,-1,10,7,3,2,10,3,10,4,7,0,10,1,10,0,4,-1,2,10,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,4,7,1,4,3,1,7,-1,-1,-1,-1,-1,-1,-1,1,9,4,7,1,4,1,8,0,1,7,8,-1,-1,-1,-1,3,0,4,3,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,10,9,8,11,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,3,11,9,3,10,9,11,-1,-1,-1,-1,-1,-1,-1,10,1,0,8,10,0,11,10,8,-1,-1,-1,-1,-1,-1,-1,10,1,3,10,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,2,1,9,11,1,8,11,9,-1,-1,-1,-1,-1,-1,-1,9,0,3,11,9,3,9,2,1,9,11,2,-1,-1,-1,-1,11,2,0,11,0,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,2,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,10,8,2,9,8,10,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,10,8,2,8,1,0,8,10,1,-1,-1,-1,-1,2,10,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),numTrisTable:new Float32Array([0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,2,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,2,3,4,4,3,3,4,4,3,4,5,5,2,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,4,2,3,3,4,3,4,2,3,3,4,4,5,4,5,3,2,3,4,4,3,4,5,3,2,4,5,5,4,5,2,4,1,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,4,3,4,4,5,3,2,4,3,4,3,5,2,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,4,3,4,4,3,4,5,5,4,4,3,5,2,5,4,2,1,2,3,3,4,3,4,4,5,3,4,4,5,2,3,3,2,3,4,4,5,4,5,5,2,4,3,5,4,3,2,4,1,3,4,4,5,4,5,3,4,4,5,5,2,3,4,2,1,2,3,3,2,3,4,2,1,3,2,4,1,2,1,1,0])}}var QE=new Qf,$$e=class{constructor(){this.pyramidPassScene=new go,this.pyramidPassMaterial=new YE({name:"PyramidPass"}),this.pyramidPassUniforms={inputTexture:{value:void 0},inputWidth:{value:0},inputHeight:{value:0},inputShiftX:{value:0},outputShiftX:{value:0}},this.pyramidTopLevelReadPixelBuffer=new Float32Array(4);let e=`
			precision highp float;
			precision highp sampler2D;
			layout(location = 0) out vec4 pc_FragColor;
			uniform sampler2D inputTexture;
			uniform float inputWidth;
			uniform float inputHeight;
			uniform float inputShiftX;
			uniform float outputShiftX;
			const vec2 half_unit_coord = vec2(0.5);
			const vec4 one = vec4(1.0);
			void main() {
				vec2 inputSize = vec2(inputWidth, inputHeight);
				vec2 input_pixel_uv = 1. / inputSize;
				vec2 coord = gl_FragCoord.xy - half_unit_coord;
				coord.x -= outputShiftX;
				coord = coord * 2. + half_unit_coord;
				coord.x += inputShiftX;

				// sample bottom left corner
				vec2 input_uv = coord / inputSize;
				float bl = texture(inputTexture, input_uv).r;

				// sample bottom right corner
				input_uv.x += input_pixel_uv.x;
				float br = texture(inputTexture, input_uv).r;

				// sample top right corner
				input_uv.y += input_pixel_uv.y;
				float tr = texture(inputTexture, input_uv).r;

				// sample top left corner
				input_uv.x -= input_pixel_uv.x;
				float tl = texture(inputTexture, input_uv).r;

				pc_FragColor.a = bl;
				pc_FragColor.b = pc_FragColor.a + br;
				pc_FragColor.g = pc_FragColor.b + tr;
				pc_FragColor.r = pc_FragColor.g + tl; 
			}
		`;this.pyramidPassMaterial.fragmentShader=e,this.pyramidPassMaterial.uniforms=this.pyramidPassUniforms,this.pyramidPassMaterial.depthTest=!1,this.pyramidPassMaterial.depthWrite=!1;let t=new kr(Kx,this.pyramidPassMaterial);t.frustumCulled=!1,this.pyramidPassScene.add(t)}renderPyramid(e,t,i,r,n){new wk().min.setScalar(0);let s=t.length-1,a=new ni;i.getViewport(a),this.pyramidPassUniforms.inputShiftX.value=0,this.pyramidPassUniforms.outputShiftX.value=0;let o=s-1;for(let c=o;c>=0;c--){let u=c%2===o%2?n[0]:n[1],h=c===o?r:c%2===o%2?n[1]:n[0];this.pyramidPassUniforms.inputTexture.value=Array.isArray(h.texture)?h.texture[1]:h.texture,this.pyramidPassUniforms.inputWidth.value=h.width,this.pyramidPassUniforms.inputHeight.value=h.height,i.setRenderTarget(u);let f=t[c],m=i.getPixelRatio();i.setViewport(this.pyramidPassUniforms.outputShiftX.value/m,0,f/m,f/m),c===2&&e%2!==0&&i.setViewport(this.pyramidPassUniforms.outputShiftX.value/m,0,3/m,3/m),i.render(this.pyramidPassScene,QE);let g=this.pyramidPassUniforms.inputShiftX.value;this.pyramidPassUniforms.inputShiftX.value=this.pyramidPassUniforms.outputShiftX.value,this.pyramidPassUniforms.outputShiftX.value=g,c<o&&(this.pyramidPassUniforms.outputShiftX.value+=t[c+1])}i.setViewport(a);let l=t.length%2===0?0:1;return i.readRenderTargetPixelsAsync(n[l],n[l].width-1,0,1,1,this.pyramidTopLevelReadPixelBuffer).then(()=>this.pyramidTopLevelReadPixelBuffer[0])}},Ul=24,Ws=96,Vc=Z$e(),uh=2,Cse=class extends Gn{constructor(e,t,i){super(e,t,i),this.data=t,this.needsRebuild=!0,this.customDepthMaterialNeedsUpdate=!1,this._npart=-1,this.spatialn=1,this.drawRangeNeedsForceUpdate=!0,this._resolutionLevel=-1,this.resolution=64,this.spatialDivisions=25,this.zLayersPerRow=8,this.basePyramidSize=512,this.pyramidTexture1Width=341,this.pyramidTexture1Height=256,this.pyramidTexture2Width=170,this.pyramidTexture2Height=128,this.numLevels=9,this.pyramidLevelSizes=[1,2,4,8,16,32,64,128,256,512],this.bboxSize=0,this.bboxOffset=0,this.shapesDataTexture={value:void 0},this.spatialscene=new go,this.potentialPassScene=new go,this.voxelPassScene=new go,this._spatialPassRenderTargets=[],this._potentialPassRenderTargets=[],this._voxelPassRenderTargets=[],this._pyramidRenderTargets=[],this.geometry=new Rt,this.geometry.drawRange.count=0,this.spatialPassUniforms={span:{value:-1},shapesDataTexture:this.shapesDataTexture,npart:{value:this.npart},spatialn:{value:this.spatialn}},this.spatialMesh=new kr(Kx,this.spatialPassMaterial()),this.spatialMesh.frustumCulled=!1,this.spatialscene.add(this.spatialMesh);let r=new Ga(Vc.triTable,16,256,BE,wr);r.needsUpdate=!0;let n=new Ga(Vc.numTrisTable,256,1,BE,wr);n.needsUpdate=!0,this.voxelPassUniforms={potentialPassTexture:{value:void 0},numTrisTable:{value:n}},this.voxelMesh=new kr(Kx,this.voxelPassMaterial()),this.voxelMesh.frustumCulled=!1,this.voxelPassScene.add(this.voxelMesh),this.potentialPassUniforms={shapesDataTexture:this.shapesDataTexture,spatialPassTexture:{value:void 0},npart:{value:this.npart},spatialn:{value:this.spatialn}},this.potentialMesh=new kr(Kx,this.potentialPassMaterial()),this.potentialMesh.frustumCulled=!1,this.potentialPassScene.add(this.potentialMesh),this.marchPassUniforms={triTable:{value:r},potentialPassTexture:{value:void 0},voxelPassTexture:{value:void 0},pyramidTexture1:{value:void 0},pyramidTexture1Size:{value:void 0},pyramidTexture2:{value:void 0},pyramidTexture2Size:{value:void 0}},this.frustumCulled=!1,this.onBeforeShadowPass=s=>{if(rJe.call(this),this.npart===0){this.geometry.drawRange.count=0;return}let a=this.material.root;if(!a.shadersPatchedForShapeBlend)this.patchVertexShaderForShapeBlend(a),a.shadersPatchedForShapeBlend=!0,this.customDepthMaterialNeedsUpdate=!0;else if(this.customDepthMaterialNeedsUpdate){this.customDepthMaterialNeedsUpdate=!1,this.customDepthMaterial=new Vi({vertexShader:a.vertexShader,fragmentShader:`
						#include <packing>
						void main()
						{
							gl_FragColor = packDepthToRGBA(gl_FragCoord.z);
						}
					`,uniforms:a.uniforms,defines:this.material.defines}),this.isMeshDepthMaterial=!0,this.customDistanceMaterial=new Vi({vertexShader:a.vertexShader,fragmentShader:`
					#include <common>
					#include <packing>
					uniform vec3 referencePosition;
					uniform float nearDistance;
					uniform float farDistance;
					// World-space position
					varying vec3 vWPosition;
					void main()
					{
						float dist = length(vWPosition - referencePosition);
						dist = (dist - nearDistance) / (farDistance - nearDistance);
						dist = saturate(dist);
						// Required by Three.js for this to work
						gl_FragColor = packDepthToRGBA( dist );
					}`,uniforms:{nearDistance:{value:0},farDistance:{value:0},referencePosition:{value:new j},opacity:{value:0},...a.uniforms},defines:this.material.defines});let c=this.customDistanceMaterial;c.referencePosition=new j,c.nearDistance=0,c.farDistance=0,c.opacity=1,c.isMeshDistanceMaterial=!0}if(this.spatialPassUniforms.npart.value=this.npart,this.spatialPassUniforms.spatialn.value=this.spatialn,this.potentialPassUniforms.npart.value=this.npart,this.potentialPassUniforms.spatialn.value=this.spatialn,this.needsRebuild){this.needsRebuild=!1,this.spatialMesh.material.defines.RES=this.resolutionLevel,this.spatialMesh.material.needsUpdate=!0,this.potentialMesh.material.defines.RES=this.resolutionLevel,this.potentialPassUniforms.spatialPassTexture.value=this.spatialPassRenderTarget.texture,this.potentialMesh.material.needsUpdate=!0,this.voxelMesh.material.defines.RES=this.resolutionLevel,this.voxelMesh.material.needsUpdate=!0,this.voxelPassUniforms.potentialPassTexture.value=this.potentialPassRenderTarget.texture,this.marchPassUniforms.potentialPassTexture.value=this.potentialPassRenderTarget.texture,this.marchPassUniforms.voxelPassTexture.value=this.voxelPassRenderTarget.texture[0],this.material.defines.RES=this.resolutionLevel,this.material.defines.LEVELS=this.pyramidLevelSizes.length,this.material.defines.LOOP=this.pyramidLevelSizes.length%2===0?this.pyramidLevelSizes.length-3:this.pyramidLevelSizes.length-2,this.material.defines.HALF=this.pyramidLevelSizes.length%2===0?1:0,this.material.needsUpdate=!0;let c=this.pyramidLevelSizes.length%2===0?0:1,u=this.pyramidLevelSizes.length%2===0?1:0;this.marchPassUniforms.pyramidTexture2.value=this.pyramidRenderTarget[c].texture,this.marchPassUniforms.pyramidTexture2Size.value=new pe(this.pyramidRenderTarget[c].width,this.pyramidRenderTarget[c].height),this.marchPassUniforms.pyramidTexture1.value=this.pyramidRenderTarget[u].texture,this.marchPassUniforms.pyramidTexture1Size.value=new pe(this.pyramidRenderTarget[u].width,this.pyramidRenderTarget[u].height),Object.assign(this.material.uniforms,this.marchPassUniforms)}let o=s.shadowMap.enabled;s.shadowMap.enabled=!1;let l=s.getRenderTarget();s.setRenderTarget(this.spatialPassRenderTarget),s.render(this.spatialscene,QE),s.setRenderTarget(this.potentialPassRenderTarget),s.render(this.potentialPassScene,QE),s.setRenderTarget(this.voxelPassRenderTarget),s.render(this.voxelPassScene,QE),Cse.streamCompaction.renderPyramid(this.resolutionLevel,this.pyramidLevelSizes,s,this.voxelPassRenderTarget,this.pyramidRenderTarget).then(c=>{this.material.wireframe&&(c*3>this.geometry.attributes.position.count||this.drawRangeNeedsForceUpdate)&&(this.geometry.dispose(),this.geometry=new Rt,this.geometry.userData.parameters={width:this.bboxSize,height:this.bboxSize,depth:this.bboxSize,centerOffset:[this.bboxOffset,this.bboxOffset,this.bboxOffset]},this.geometry.attributes.position=new Xt(new Float32Array(c*3*2),3)),(c*3>this.geometry.drawRange.count||this.drawRangeNeedsForceUpdate)&&(this.geometry.drawRange.count=Math.floor(c*1.2)*3),this.drawRangeNeedsForceUpdate=!1}),s.shadowMap.enabled=o,s.setRenderTarget(l)}}set npart(e){e!==this._npart&&(this.drawRangeNeedsForceUpdate=!0,this._npart=e,this.spatialn=Math.ceil(e/(4*Ul)))}get npart(){return this._npart}set resolutionLevel(e){let t=Math.min(8,Math.max(5,e));if(t!==this._resolutionLevel){switch(this._resolutionLevel=t,this.resolution=Math.pow(2,t),this.resolutionLevel){case 5:this.pyramidLevelSizes=[1,2,4,6,12,24,48,96,192],this.bboxSize=31*8*uh,this.bboxOffset=8*uh*-1/2;break;case 6:this.pyramidLevelSizes=[1,2,4,8,16,32,64,128,256,512],this.bboxSize=63*4*uh,this.bboxOffset=4*uh*-1/2;break;case 7:this.pyramidLevelSizes=[1,2,4,6,12,24,48,96,192,384,768,1536],this.bboxSize=127*2*uh,this.bboxOffset=2*uh*-1/2;break;case 8:this.pyramidLevelSizes=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096],this.bboxSize=255*uh,this.bboxOffset=uh*-1/2;break}this.pyramidTexture1Width=0,this.pyramidTexture2Width=0,this.pyramidTexture1Height=this.pyramidLevelSizes[this.pyramidLevelSizes.length-2],this.pyramidTexture2Height=this.pyramidLevelSizes[this.pyramidLevelSizes.length-3];for(let i=this.pyramidLevelSizes.length-2;i>=0;i--)(this.pyramidLevelSizes.length-2)%2===i%2?this.pyramidTexture1Width+=this.pyramidLevelSizes[i]:this.pyramidTexture2Width+=this.pyramidLevelSizes[i];this.basePyramidSize=this.pyramidLevelSizes[this.pyramidLevelSizes.length-1],this.zLayersPerRow=this.basePyramidSize/this.resolution,this.numLevels=this.pyramidLevelSizes.length-1,this.geometry.userData.parameters={width:this.bboxSize,height:this.bboxSize,depth:this.bboxSize,centerOffset:[this.bboxOffset,this.bboxOffset,this.bboxOffset]},this.needsRebuild=!0,this.customDepthMaterialNeedsUpdate=!0}}get resolutionLevel(){return this._resolutionLevel}get spatialPassRenderTarget(){let e=this._spatialPassRenderTargets[this.resolutionLevel];return e||(e=new Ni(this.spatialDivisions*this.spatialn,this.spatialDivisions**2,{format:$r,type:wr,stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1,minFilter:_i,magFilter:_i}),this._spatialPassRenderTargets[this.resolutionLevel]=e),e}get potentialPassRenderTarget(){let e=this._potentialPassRenderTargets[this.resolutionLevel];return e||(e=new Ni(this.basePyramidSize,this.basePyramidSize,{format:$r,type:wr,stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1,minFilter:_i,magFilter:_i}),this._potentialPassRenderTargets[this.resolutionLevel]=e),e}get voxelPassRenderTarget(){let e=this._voxelPassRenderTargets[this.resolutionLevel];return e||(e=new jte(this.basePyramidSize,this.basePyramidSize,2,{stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1,minFilter:_i,magFilter:_i}),e.texture[0].format=$r,e.texture[0].type=wr,e.texture[1].format=BE,e.texture[1].type=wr,this._voxelPassRenderTargets[this.resolutionLevel]=e),e}get pyramidRenderTarget(){let e=this._pyramidRenderTargets[this.resolutionLevel];if(!e){let t=new Ni(this.pyramidTexture1Width,this.pyramidTexture1Height,{format:$r,type:wr,stencilBuffer:!1,depthBuffer:!1,magFilter:_i,minFilter:_i}),i=new Ni(this.pyramidTexture2Width,this.pyramidTexture2Height,{format:$r,type:wr,stencilBuffer:!1,depthBuffer:!1,magFilter:_i,minFilter:_i});e=[t,i],this._pyramidRenderTargets[this.resolutionLevel]=e}return e}updateState(e,t){let i=this.material;super.updateState(e,t),i!==this.material&&(this.needsRebuild=!0),e.geometry&&(this.resolutionLevel=e.geometry.resolutionLevel,this.geometry.userData.parameters={width:this.bboxSize,height:this.bboxSize,depth:this.bboxSize,centerOffset:[this.bboxOffset,this.bboxOffset,this.bboxOffset]}),e.wireframe&&!this.geometry.getAttribute("position")?this.geometry.setAttribute("position",new Xt(new Float32Array(this.geometry.drawRange.count*3),3)):!e.wireframe&&this.geometry.getAttribute("position")&&this.geometry.deleteAttribute("position")}spatialPassMaterial(){let e=`
			precision highp float;
			out vec4 pc_FragColor;
			const float spatialDivisions = ${this.spatialDivisions}.;
			uniform float span;
			uniform float npart;
			uniform float spatialn;
			${Vc.shapeInput()}

			vec3 low, high;     // range of current div; subset of -1 .. 1 with span border

			// lookup one element/channel's worth of spheres for current division
			// stating with low sphere number lowi
			// gives a key to which spheres from lowi..lowi+23 are active within given div (low..high)
			float spatialKey(float lowi) {
				float t = 0.;
				for (float ii = ${Ul-1}.; ii >= 0.; ii--) {
					float i = ii + lowi;
					float iin = (i + 0.5) / ${Ws}.;
					vec4 shape = shapePos(iin);
					vec3 d = shape.xyz;
					float op = shape.w;
	
					t *= 2.;
					t += (
						low.x < d.x && d.x < high.x &&
						low.y < d.y && d.y < high.y &&
						low.z < d.z && d.z < high.z &&
						i < npart || op == -2. // always include if op is -2, which is the intersection operation
					) ? 1. : 0.;
				}
				return t;
			}

			${Vc.getpart}

			void main() {               // spatialial fragment shader
				// find active div
				vec3 div;                               // which div is current
				// out holds x=> x, lowi faster moving and y=> z, y faster moving
				float yz = float(gl_FragCoord.y - 0.5);     // contains  z, y faster moving
				div.y = getpart(yz, spatialDivisions);
				div.z = yz; // getpart(yz, spatialDivisions.z); // what's left, should be the same as getpart

				float lx = float(gl_FragCoord.x - 0.5);     // contains x, lowi faster moving
				float lowi = getpart(lx, spatialn) * ${4*Ul}.;
				div.x = lx;

				low = div / spatialDivisions * 2. - 1. - span;
				high = (div+1.) / spatialDivisions * 2. - 1. + span;

				// find active range of spheres
				pc_FragColor.x = spatialKey(lowi);
				pc_FragColor.y = spatialKey(lowi+${Ul}.);
				pc_FragColor.z = spatialKey(lowi+${2*Ul}.);
				pc_FragColor.w = spatialKey(lowi+${3*Ul}.);
			}
		`;return new YE({name:"Spatial Pass",fragmentShader:e,uniforms:this.spatialPassUniforms})}potentialPassMaterial(){let e=`
			precision highp float;
			out vec4 pc_FragColor;

			${Vc.shapeInput()}
			uniform sampler2D spatialPassTexture;

			const float res = float(RES);
			const float VOXEL_RESOLUTION = pow(2., res);
			const float Z_LAYERS_PER_ROW = ceil(pow(2., res / 2.));
			const float VOXEL_RESOLUTION_SUB1 = VOXEL_RESOLUTION - 1.;
			const float INV_VOXEL_RESOLUTION = 1.0 / VOXEL_RESOLUTION;

			uniform float npart;
			uniform float spatialn;
			const float spatialDivisions = ${this.spatialDivisions}.;
			const float spatialDivisions2 = spatialDivisions * spatialDivisions;
			const float spatialDivisionsSub1 = spatialDivisions - 1.;

			${Vc.getpart}

			vec3 packRGBAToVec3(vec4 color) {
				uint r = uint(color.r * 255.);
				uint g = uint(color.g * 255.);
				uint combined = (r << 8) | g; 
				return vec3(float(combined) * 0.00001525902, color.b, color.a); // 1/65535
			}

			void applyQuaternionToVector(in vec4 q, inout vec3 v) {
				v += 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
			}

			/**
			 * SDF functions (reference: https://iquilezles.org/articles/distfunctions/)
			 */

			// branchless version of "Smooth Union, Subtraction and Intersection - bound, bound, bound" in above reference
			float smoothOperation(float op, float sdf, float d, float k) {
			  //        union: op =  1 => signSubtract =  1, signIntersection =  1
			  //     subtract: op = -1 => signSubtract = -1, signIntersection =  1
				// intersection: op = -2 => signSubtract = -1, signIntersection = -1

				float signSubtract = clamp(op, -1., 1.);
				float signIntersection = 2. * (op - signSubtract) + 1.;
				float h = clamp(
					0.5 + signSubtract * 0.5 * (sdf - signSubtract * signIntersection * d) / k,
					0.0,
					1.0
				);
				return mix(sdf, signSubtract * signIntersection * d, h) - 
							 signSubtract * k * h * (1.0 - h);
			}

			float sdSphere( vec3 p, float s )
			{
				return length(p)-s;
			}

			float sdEllipsoid( vec3 p, vec3 r )
			{
				float k0 = length(p/r);
				float k1 = length(p/(r*r));
				return k0*(k0-1.0)/k1;
			}

			float sdBox( vec3 p, vec3 b )
			{
				vec3 q = abs(p) - b;
				return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0);
			}

			float sdTorus( vec3 p, vec2 t )
			{
				vec2 q = vec2(length(p.xy)-t.x,p.z);
				return length(q)-t.y;
			}

			float sdCappedTorus( vec3 p, vec2 sc, float ra, float rb)
			{
				p.x = abs(p.x);
				float k = (sc.y*p.x>sc.x*p.y) ? dot(p.xy,sc) : length(p.xy);
				return sqrt( dot(p,p) + ra*ra - 2.0*ra*k ) - rb;
			}

			float dot2( in vec2 v ) { return dot(v,v); }
			float sdCappedCone( vec3 p, float h, float r1, float r2 )
			{
				vec2 q = vec2( length(p.xz), p.y );
				vec2 k1 = vec2(r2,h);
				vec2 k2 = vec2(r2-r1,2.0*h);
				vec2 ca = vec2(q.x-min(q.x,(q.y<0.0)?r1:r2), abs(q.y)-h);
				vec2 cb = q - k1 + k2*clamp( dot(k1-q,k2)/dot2(k2), 0.0, 1.0 );
				float s = (cb.x<0.0 && ca.y<0.0) ? -1.0 : 1.0;
				return s*sqrt( min(dot2(ca),dot2(cb)) );
			}

			float sdCappedCylinder( vec3 p, float h, float r )
			{
				vec2 d = abs(vec2(length(p.xz),p.y)) - vec2(r,h);
				return min(max(d.x,d.y),0.0) + length(max(d,0.0));
			}

			float maxBlend = 0.0;
			// compute potential from A (=24) spheres, using the bit flags in 'activeKey'
			// to avoid lookup/compute for inactive spheres
			// return field potential, side effect updates track,
			// compute and return +ve and -ve values separately
			void fillSpatialInner(
				float ii,
				float activeKey,
				vec3 corner,
				inout float sdf,
				inout float colorDivisor,
				inout vec4 trackColor
			) {
				for (float i = 0.; i < ${Ul}.; i++) {
					if (activeKey < 1.) break; // activeKey exhausted, no more active spheres
					activeKey *= 0.5;
					if (fract(activeKey) < 0.5) continue;

					float iin = (i + ii + 0.5) * ${1/Ws};
					vec4 shape = shapePos(iin);
					vec4 quat = shapeQuat(iin);
					vec4 params1 = shapeParams1(iin);
					vec4 params2 = shapeParams2(iin);

					vec3 p = corner - shape.xyz;
					applyQuaternionToVector(quat, p);
					p /= params2.z; // scale
					float d; // d in -1..1 coordinates
					switch (int(params1.x)) {
						case 0: d = sdSphere(p, params1.y); break;
						case 1: d = sdEllipsoid(p, params1.yzw); break;
						case 2: d = sdBox(p, params1.yzw); break;
						case 3: d = sdCappedCylinder(p, params1.y, params1.z); break;
						case 4: d = sdCappedCone(p, params1.y, params1.z, params1.w); break;
						case 5: d = sdTorus(p, params1.yz); break;
						case 6: d = sdCappedTorus(p, params1.yz, params1.w, params2.w); break;
					}
					d -= params2.y; // rounded edge
					d *= params2.z; // scale

					float k = params2.x;
					float op = shape.w;

					sdf = smoothOperation(shape.w, sdf, d, k);

					float isNegativeOne = step(-1.5, op) * step(op, -0.5); // 1 when op == -1, 0 otherwise
					float colorCull = smoothstep(maxBlend, 0., -d);
					float cullFactor = mix(1.0, colorCull, isNegativeOne);
					trackColor *= cullFactor;
					colorDivisor *= cullFactor;

					maxBlend = max(maxBlend, k);

					k += 2. * INV_VOXEL_RESOLUTION; // avoid division by zero, and other color artifacts with very small k
					float nearness = smoothstep(k, 0., d);

					vec4 color = shapeColor(iin);
					nearness *= float(color.a >= 0.);

					colorDivisor += nearness;
					trackColor += color * nearness;
				}
			}

			vec3 div;
			// compute potential from all spheres; collect +ve and =ve values separately
			// work in blocks of A*4 (=96) spheres, using the bit flags in 4 float channel 'activeKey' values
			// TODO check if extra vec3 output useful, not really used at present
			float fillSpatial(vec3 corner, inout vec4 trackColor) {
				float sdf = 1e3; // hack: initialize to large value
				float colorDivisor = 0.;
				// spatialPassTexture holds x=> lowi, x faster moving and y=> z, y faster moving
				float divyz = (div.y + div.z * spatialDivisions + 0.5) / (spatialDivisions2);
				for (float ii = 0.; ii < spatialn; ii++) {
					float i = ii * ${4*Ul}.;

					vec4 activeKey = texture(spatialPassTexture, vec2((div.x * spatialn + ii + 0.5)/(spatialn * spatialDivisions), divyz));
					fillSpatialInner(i, activeKey.x, corner, sdf, colorDivisor, trackColor);
					fillSpatialInner(i+${Ul}., activeKey.y, corner, sdf, colorDivisor, trackColor);
					fillSpatialInner(i+${2*Ul}., activeKey.z, corner, sdf, colorDivisor, trackColor);
					fillSpatialInner(i+${3*Ul}., activeKey.w, corner, sdf, colorDivisor, trackColor);
				}

				trackColor /= colorDivisor;
				return mix(sdf, 0.0, step(1e20 - 0.1, sdf));
			}

			void main() {
				${Vc.getxyzi}    // get xi yi zi from 2d position

				vec3 xyzi = vec3(xi,yi,zi);
				vec3 corner = xyzi / VOXEL_RESOLUTION_SUB1 * 2. - 1.;  // -1..1 coords

				div = floor(xyzi / VOXEL_RESOLUTION_SUB1 * spatialDivisionsSub1);

				vec4 c = vec4(0.);
				float t = fillSpatial(corner, c);

				pc_FragColor = vec4(t, packRGBAToVec3(c)); // RGB texture
			}
		`;return new YE({name:"PotentialPass",fragmentShader:e,uniforms:this.potentialPassUniforms})}voxelPassMaterial(){let e=`
			precision highp float;
			layout(location = 0) out vec4 pc_FragColor;
			layout(location = 1) out vec4 numTris;

			const float res = float(RES);
			const float VOXEL_RESOLUTION = pow(2., res);
			const float VOXEL_RESOLUTION_SUB1 = VOXEL_RESOLUTION - 1.; 
			const float Z_LAYERS_PER_ROW = ceil(pow(2., res / 2.));
			const float INV_VOXEL_RESOLUTION = 1.0 / VOXEL_RESOLUTION;
			uniform sampler2D numTrisTable; // 256 x 1

			float keyi(float f000, float f100, float f010, float f110, float f001, float f101, float f011, float f111) {
				return (float(f000 < 0.) * 1.) +
							 (float(f100 < 0.) * 2.) +
							 (float(f010 < 0.) * 8.) +
							 (float(f110 < 0.) * 4.) +
							 (float(f001 < 0.) * 16.) +
							 (float(f101 < 0.) * 32.) +
							 (float(f011 < 0.) * 128.) +
							 (float(f111 < 0.) * 64.);
			}

			${Vc.lookup}

			vec3 compNormi(float xi, float yi, float zi) {
				float dx = look(xi + 1., yi, zi, potentialPassTexture).r - look(xi - 1., yi, zi, potentialPassTexture).r;
				float dy = look(xi, yi + 1., zi, potentialPassTexture).r - look(xi, yi - 1., zi, potentialPassTexture).r;
				float dz = look(xi, yi, zi + 1., potentialPassTexture).r - look(xi, yi, zi - 1., potentialPassTexture).r;
				// if we allow (common) 0,0,0 case through then NaN can spread
				// eg r = vec4(compNorm i(???), 1.) will pollute r.w
				if (dx == 0.0 && dy == 0.0 && dz == 0.0) {
					return vec3(0.199, 0.299, 0.399);
				}
				return normalize(vec3(dx, dy, dz));
			}

			void main() {
				${Vc.getxyzi}    // get xi yi zi from 2d

				vec3 normal = compNormi(xi, yi, zi);  // even if our key is -1 this may be needed by a neighbouring voxel

				if (xi >= VOXEL_RESOLUTION_SUB1 || yi >= VOXEL_RESOLUTION_SUB1 || zi >= VOXEL_RESOLUTION_SUB1) {
					pc_FragColor = vec4(normal, 0.);
					numTris = vec4(0.);
					return;
				}

				float
					f000 = look(xi, yi, zi, potentialPassTexture).r,
					f100 = look(xi+1., yi, zi, potentialPassTexture).r,
					f010 = look(xi, yi+1., zi, potentialPassTexture).r,
					f110 = look(xi+1., yi+1., zi, potentialPassTexture).r,
					f001 = look(xi, yi, zi+1., potentialPassTexture).r,
					f101 = look(xi+1., yi, zi+1., potentialPassTexture).r,
					f011 = look(xi, yi+1., zi+1., potentialPassTexture).r,
					f111 = look(xi+1., yi+1., zi+1., potentialPassTexture).r;
				float key = keyi(f000, f100, f010, f110, f001, f101, f011, f111);

				pc_FragColor = vec4(normal, key);

				numTris = texture(numTrisTable, vec2((key + 0.5) / 256., 0.5));
			}
		`;return new YE({name:"VoxelPass",fragmentShader:e,uniforms:this.voxelPassUniforms})}patchVertexShaderForShapeBlend(e){let t=`
		#ifdef SHAPEBLEND 
			precision highp sampler2D;

			uniform float isol;

			uniform sampler2D triTable;     // 256 x 16
			uniform sampler2D pyramidTexture1;
			uniform vec2 pyramidTexture1Size;
			uniform sampler2D pyramidTexture2;
			uniform vec2 pyramidTexture2Size;

			const vec2 halfPixelOffset = vec2(0.5, 0.5);

			const vec2 rShift = vec2(0., 1.);
			const vec2 gShift = vec2(1., 1.);
			const vec2 bShift = vec2(1., 0.);

			const float res = float(RES);
			const float VOXEL_RESOLUTION = pow(2., res);
			const float Z_LAYERS_PER_ROW = ceil(pow(2., res / 2.));
			const float INV_VOXEL_RESOLUTION = 1.0 / VOXEL_RESOLUTION;

			const float scale_factor = ${uh}.;

			#if SHAPEBLEND == 5
				const float levelShiftX[7] = float[7](4., 6., 12., 24., 48., 96., 192.);
				const float scale = 8. * scale_factor;
				const vec3 originOffset = vec3(16.);
			#elif SHAPEBLEND == 7
				const float levelShiftX[10] = float[10](4., 6., 12., 24., 48., 96., 192., 384., 768., 1536.); 
				const float scale = 2. * scale_factor;
				const vec3 originOffset = vec3(64.);
			#elif SHAPEBLEND == 8
				const float levelShiftX[11] = float[11](4., 8., 16., 32., 64., 128., 256., 512., 1024., 2048., 4096.);
				const float scale = scale_factor;
				const vec3 originOffset = vec3(128.);
			#else
				const float levelShiftX[8] = float[8](4., 8., 16., 32., 64., 128., 256., 512.);
				const float scale = 4. * scale_factor;
				const vec3 originOffset = vec3(32.);
			#endif

			${Vc.lookup}

			const vec3 offsets[24] = vec3[](
				vec3(0., 0., 0.), vec3(1., 0., 0.),
				vec3(1., 0., 0.), vec3(1., 1., 0.),
				vec3(0., 1., 0.), vec3(1., 1., 0.),
				vec3(0., 0., 0.), vec3(0., 1., 0.),
				vec3(0., 0., 1.), vec3(1., 0., 1.),
				vec3(1., 0., 1.), vec3(1., 1., 1.),
				vec3(0., 1., 1.), vec3(1., 1., 1.),
				vec3(0., 0., 1.), vec3(0., 1., 1.),
				vec3(0., 0., 0.), vec3(0., 0., 1.),
				vec3(1., 0., 0.), vec3(1., 0., 1.),
				vec3(1., 1., 0.), vec3(1., 1., 1.),
				vec3(0., 1., 0.), vec3(0., 1., 1.)
			);

			vec2 computeShiftedPosition1(vec2 xy, float levelOriginX) {
				vec2 xyShifted = xy;
				xyShifted.x += levelOriginX;
				return (xyShifted + halfPixelOffset) / pyramidTexture1Size;
			}

			vec2 computeShiftedPosition2(vec2 xy, float levelOriginX) {
				vec2 xyShifted = xy;
				xyShifted.x += levelOriginX;
				return (xyShifted + halfPixelOffset) / pyramidTexture2Size;
			}

			vec4 unpackVec3ToRGBA(vec3 vec) {
				uint combined = uint(vec.x * 65535.0 + 0.5); // Add 0.5 for rounding
				float g = float(combined & uint(0xFF)) * 0.00392156862; // 1/255
				float r = float((combined >> 8) & uint(0xFF)) * 0.00392156862; 
		
				return vec4(r, g, vec.y, vec.z);
			}

			out vec4 marchColor;
			// end of marchvertPre
		#endif
		`,i=`
		#ifdef SHAPEBLEND
			float triIndex = floor(float(gl_VertexID/3));
			float vertexIndex = float(gl_VertexID);
			
			// Initial pyramid lookup
			float levelOriginX1 = pyramidTexture1Size.x - 2.;
			float levelOriginX2 = pyramidTexture2Size.x - 1.;
			vec2 xy = vec2(0.);
			vec4 lookUp = texture(pyramidTexture2, computeShiftedPosition2(xy, levelOriginX2));
			
			// Early exit check
			if (triIndex >= lookUp.r) return;
			
			// Optimize loop variables
			float start = 0.;
			vec4 triIndexVec = vec4(triIndex);
			
			// Main position computation loop
			for (int i = 0; i < LOOP;) {
				// Compute boundaries
				vec4 ends = lookUp + vec4(start);
				vec4 starts = vec4(ends.gba, start);
				vec4 check = vec4(greaterThanEqual(triIndexVec, starts)) * 
											vec4(lessThan(triIndexVec, ends));
				
				// Update position
				xy *= 2.;
				xy += check.r * rShift + check.g * gShift + check.b * bShift;
				
				// Update loop variables
				start = dot(check, starts);
				levelOriginX2 -= levelShiftX[i];
				
				// Update lookup
				lookUp = texture(pyramidTexture1, computeShiftedPosition1(xy, levelOriginX1));
				i++;

				ends = lookUp + vec4(start);
				starts = vec4(ends.gba, start);
				check = vec4(greaterThanEqual(triIndexVec, starts)) * 
											vec4(lessThan(triIndexVec, ends));
				
				// Update position
				xy *= 2.;
				xy += check.r * rShift + check.g * gShift + check.b * bShift;
				
				// Update loop variables
				start = dot(check, starts);
				levelOriginX1 -= levelShiftX[i];
				
				// Update lookup
				lookUp = texture(pyramidTexture2, computeShiftedPosition2(xy, levelOriginX2));

				i++;
			}

			#if HALF == 1
				vec4 ends = lookUp + vec4(start);
				vec4 starts = vec4(ends.gba, start);
				vec4 check = vec4(greaterThanEqual(triIndexVec, starts)) * vec4(lessThan(triIndexVec, ends));
			
				// Update position
				xy *= 2.;
				xy += check.r * rShift + check.g * gShift + check.b * bShift;
			
				// Update loop variables
				start = dot(check, starts);
			#endif
			
			// Compute final coordinates
			vec3 gridPos;
			gridPos.x = mod(xy.x, VOXEL_RESOLUTION);
			gridPos.y = mod(xy.y, VOXEL_RESOLUTION);
			gridPos.z = floor(xy.x * INV_VOXEL_RESOLUTION) + 
									floor(xy.y * INV_VOXEL_RESOLUTION) * Z_LAYERS_PER_ROW;
			
			// Vertex key computation
			vertexIndex -= start * 3.;
			float vk = vertexIndex * 0.0625 + 0.03125; // Optimized division by 16 and addition of 1/32
			
			// Voxel lookup and edge computation
			vec4 voxel = look(gridPos.x, gridPos.y, gridPos.z, voxelPassTexture);
			float key = (voxel.w + 0.5) * 0.00390625; // Optimized division by 256
			
			// Edge lookup and offset computation
			float edgeNum = texture(triTable, vec2(vk, key)).x;
			int edgeIndex = int(edgeNum) * 2;
			
			// Compute edge positions
			vec3 p1 = gridPos + offsets[edgeIndex];
			vec3 p2 = gridPos + offsets[edgeIndex + 1];
			
			// Compute potentials and normals
			vec4 potential1 = look(p1.x, p1.y, p1.z, potentialPassTexture);
			vec4 potential2 = look(p2.x, p2.y, p2.z, potentialPassTexture);
			
			// Final position and normal computation
			float mu = potential1.r / (potential1.r - potential2.r);

			marchColor = mix(
				unpackVec3ToRGBA(potential1.gba),
				unpackVec3ToRGBA(potential2.gba),
				mu
			);

			transformed = p1 + (p2 - p1) * mu;
			transformed -= originOffset;
			transformed *= scale;
			vec4 data1 = look(p1.x, p1.y, p1.z, voxelPassTexture);
			vec4 data2 = look(p2.x, p2.y, p2.z, voxelPassTexture);
			objectNormal = normalize(mix(data1.xyz, data2.xyz, mu));
			transformedNormal = normalMatrix * objectNormal;
			#ifndef FLAT_SHADED
				vNormal = transformedNormal;
			#endif
		#endif
		`;e.vertexShader=t+e.vertexShader.replace("#include <project_vertex>",i+`
#include <project_vertex>`);let r=e.fragmentShader.match(/vec3 diffuseColor[^\n]*\n/);if(!r)return;let n=`
		#ifdef SHAPEBLEND_C
			#if SHAPEBLEND_C == 1
				${r[0].replace(/nodeU0,/g,"marchColor.rgb,").replace(/nodeU\d+(?=,g_uid\d+_calpha\))/g,"marchColor.a")}
			#else
				${r[0]}
			#endif
		#else
			${r[0]}
		#endif
		`;e.fragmentShader=`in vec4 marchColor;
`+e.fragmentShader.replace(r[0],n),Object.assign(e.uniforms,this.marchPassUniforms)}initDebugPass(e){console.log("fboToDebug.width",e.width,e.height),this.geometry=new Au(e.width,e.height),this.geometry.userData={parameters:{width:4,height:4}};let t={inputTexture:{value:Array.isArray(e.texture)?e.texture[1]:e.texture},pyramidTextureSize:{value:void 0}},i=r=>{r.vertexShader=`
				precision highp float;

				varying vec2 vUv;

				void main() {
						gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
						vUv = uv;
				}
			`,r.fragmentShader=`
				layout(location = 1) out vec4 gVelocity;

				precision highp float;
				
				uniform sampler2D inputTexture;
				varying vec2 vUv;

				uniform vec2 pyramidTextureSize;

				void main() {
						// Sample the input texture using UV coordinates
						gl_FragColor = texture(inputTexture, vUv);
						gVelocity = vec4(0.0);
				}
			`,t.pyramidTextureSize.value=new pe(this.pyramidRenderTarget.width,this.pyramidRenderTarget.height),Object.assign(r.uniforms,t)};this.material.shapeBlendhack=i,this.material.root.shapeBlendhack=i}},km=Cse;km.streamCompaction=new $$e;var J$e=new tt,eJe=new tt,d0=new Jt,Bd=new j,eE=new j,tJe=new Jt;function iJe(e,t=0){let i=this.children.length;for(;i--;){let r=this.children[i];Rm.is(r)&&Mse.call(r,e,t+1)}}function Mse(e,t=0){if(e(this,t)!==!0){let i=this.children.length;for(;i--;){let r=this.children[i];Rm.is(r)&&Mse.call(r,e,t+1)}}}function rJe(){if(this.shapesDataTexture.value===void 0){let a=new Ga(new Float32Array(4*Ws*Xp),Ws,Xp,$r,wr);this.shapesDataTexture.value=a}let e=this.shapesDataTexture.value,t=e.image.data;e.needsUpdate=!0;let i=0,r=this.data.geometry.blendRange,n=J$e.copy(this.matrixWorld).invert(),s=0;iJe.call(this,a=>{var b;if(a.visible===!1)return!0;let o;if(a instanceof vl||a instanceof Yx||a instanceof Qx)return;a instanceof ia?o=a.object:o=a;let l=(b=a.data)==null?void 0:b.cloner;if(zi.is(a)&&l&&!l.hideBase&&l.type!=="radial"&&l.disabled!==!0||!(o instanceof Gn))return;let c=o.geometry.userData.parameters,u=c.shapeBlendNode;if(u===void 0)return;if(eJe.multiplyMatrices(n,a.matrixWorld).decompose(eE,d0,Bd),c.type==="TorusGeometry"&&c.arc!==360){let S=c.arc*Math.PI/180;S=S/4,d0.multiply(tJe.set(0,0,Math.sin(S),Math.cos(S)))}let h=u.overrideGlobalBlend?u.blendRange:r;h=h/this.bboxSize*2,t[s*4]=(eE.x-this.bboxOffset)/this.bboxSize*2,t[s*4+1]=(eE.y-this.bboxOffset)/this.bboxSize*2,t[s*4+2]=(eE.z-this.bboxOffset)/this.bboxSize*2,t[s*4+3]=u.operation===0?1:u.operation===2?-1:-2,t[Ws*4+s*4]=-d0.x,t[Ws*4+s*4+1]=-d0.y,t[Ws*4+s*4+2]=-d0.z,t[Ws*4+s*4+3]=d0.w;let f=new Float32Array(4),m=0;if(c.type==="SphereGeometry")c.width===c.height&&c.width===c.depth?f[0]=0:f[0]=1,f[1]=c.width/this.bboxSize,f[2]=c.height/this.bboxSize,f[3]=c.depth/this.bboxSize,i=Math.max(i,f[1]*Bd.x+h,f[2]*Bd.x+h,f[3]*Bd.x+h);else if(c.type==="CubeGeometry"){m=c.cornerRadius;let S=c.width,_=c.height,A=c.depth;f[0]=2,f[1]=(S-2*m)/this.bboxSize,f[2]=(_-2*m)/this.bboxSize,f[3]=(A-2*m)/this.bboxSize,i=Math.max(i,Math.sqrt(S**2+_**2+A**2)/this.bboxSize*Bd.x+h)}else if(c.type==="CylinderGeometry"){m=c.cornerRadius;let S=c.height,_=c.radiusBottom,A=c.radiusTop;if(A>=_){let M=Math.atan2(A-_,S),C=(Math.PI/2-M)/2;A-=m/Math.tan(C),_-=m*Math.tan(C)}else if(_>A){let M=Math.atan2(_-A,S),C=(Math.PI/2-M)/2;A-=m*Math.tan(C),_-=m/Math.tan(C)}f[1]=(c.height-2*m)/this.bboxSize,_===A?(f[0]=3,f[2]=_/this.bboxSize*2):(f[0]=4,f[2]=_/this.bboxSize*2,f[3]=A/this.bboxSize*2),i=Math.max(i,f[1]*4*Bd.x+h)}else if(c.type==="TorusGeometry"){if(f[0]=5,f[1]=(c.width-c.depth)/this.bboxSize,f[2]=c.depth/this.bboxSize,c.arc!==360){f[0]=6,f[3]=f[1],t[Ws*12+s*4+3]=f[2];let S=2*Math.atan2(f[2]/2,f[1]),_=c.arc*Math.PI/180/2-S;f[1]=Math.sin(_),f[2]=Math.cos(_)}i=Math.max(i,c.width*Bd.x/this.bboxSize+h)}t.set(f,Ws*8+s*4),t[Ws*12+s*4]=h,t[Ws*12+s*4+1]=m/this.bboxSize*2,t[Ws*12+s*4+2]=Bd.x;let g=o.material,v=g.uniforms.nodeU0.node.value,x=g.uniforms.nodeU1.value;u.operation!==0&&!u.useColor&&(x=-1),t[Ws*16+s*4]=v.r,t[Ws*16+s*4+1]=v.g,t[Ws*16+s*4+2]=v.b,t[Ws*16+s*4+3]=x,x<1&&this.material.defines.SHAPEBLEND_C===1&&(this.material.transparent=!0),s++}),this.npart=s,this.spatialPassUniforms.span.value=i*1.4}var Pse=512;function Hq(e,t){let i=!1,r=e.layers.mask&Pse,n=t.getLayersOfType("transmission"),s=t.getLayersOfType("outline");return s.length>0&&(e.layers.set(8),n.length>0&&e.layers.enable(3),i=!0,pz(e),fz(e)),n.length===0&&s.length===0&&e.layers.set(0),r&&e.layers.set(9),e instanceof vy&&e.needsAO&&e.layers.enable(5),i}function Gq(e,t){if(!t.layers)return!1;let i=e.layers.mask&Pse,r=!1,n=t.getLayersOfType("transmission").filter(a=>a.data.visible),s=t.getLayersOfType("outline").filter(a=>a.data.visible);return n.length>0&&(e.layers.set(3),s.length>0&&e.layers.enable(8),r=!0),n.length===0&&s.length===0&&e.layers.set(0),i&&e.layers.set(9),e.needsAO&&e.layers.enable(5),r}function nJe(e){let t=!1;return e.traverseEntity(i=>{if(i instanceof vy)if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)Hq(i,i.material[r])&&(t=!0);else Hq(i,i.material)&&(t=!0)}),t}function sJe(e){let t=!1;return e.traverseEntity(i=>{if(i instanceof vy)if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)Gq(i,i.material[r])&&(t=!0);else Gq(i,i.material)&&(t=!0)}),t}var aJe=new pie,oJe=new tt,lJe=new ry;function qO(e,t,i,r=!1){let n=e.cloner;if(n)for(let s of n.children){let a=oJe.copy(s.matrixWorld).invert(),o=lJe.copy(t.ray).applyMatrix4(a),l=e.matrixWorld;o.applyMatrix4(l);let c=aJe;c.set(o.origin,o.direction),c.near=t.near,c.far=t.far;let u=c.intersectObject(e,!1);u.length>0&&i.push({...u[0],object:r?s:e})}}var cJe=class{constructor(){this._constraints=new Map}setConstraint(e,t){t===null?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((i,r)=>{let n=[r,i],s=i;for(;this._constraints.has(s);){if(s=this._constraints.get(s),n.includes(s)){console.warn(`circular dependency detected: ${n.join(" -> ")}`);break}t.has(s)||n.push(s)}for(let a=n.length-2;a>=0;a--)if(!t.has(n[a])){let o=e.find(n[a]);o?o.applyPathSnapping(e):console.warn(`missing entity ${n[a]}`),t.add(n[a])}})}findDependency(e,t){let i=e;for(;this._constraints.has(i);)if(i=this._constraints.get(i),i===t)return!0;return!1}},uJe="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL",hf=class{};hx(hf,"DepthMapRange",65536),hx(hf,"MemoryPageSize",65536),hx(hf,"BytesPerFloat",4),hx(hf,"BytesPerInt",4);function hJe(e){let t,i,r,n,s,a,o,l,c,u,h,f,m,g,v,x;function b(L){let k=new Float64Array(u,a,16);for(let V=0;V<16;V++)k[V]=L[V];let B;if(r>1){t.exports.sortIndexes(n,s,c,a,o,l,f.DepthMapRange,r);let V=new Uint32Array(r);B=V.buffer,V.set(new Uint32Array(u,l,r))}else if(r===1){let V=new Uint32Array(r);V[0]=new Uint32Array(u,n,i)[0],B=V.buffer}else B=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:B},[B])}function S(L,k,B){let V=new Float32Array(u,s,i*3);r=0;let $=new Uint32Array(u,n,i);for(let q=0;q<B.length-1;q++){let Y=k[q],X=L[q].elements,ne=Y.filter(K=>K.enabled&&K.mode==="Include").map(K=>K.type==="Box"?C(K):R(K)),F=Y.filter(K=>K.enabled&&K.mode==="Exclude").map(K=>K.type==="Box"?C(K):R(K));for(let K=B[q];K<B[q+1];K++){let re=m[K*3],oe=m[K*3+1],ce=m[K*3+2];if((ne.length===0||A(re,oe,ce,ne))&&(F.length===0||!A(re,oe,ce,F))){let de=1/(X[3]*re+X[7]*oe+X[11]*ce+X[15]);V[r*3]=(X[0]*re+X[4]*oe+X[8]*ce+X[12])*de,V[r*3+1]=(X[1]*re+X[5]*oe+X[9]*ce+X[13])*de,V[r*3+2]=(X[2]*re+X[6]*oe+X[10]*ce+X[14])*de,$[r]=K,r++}}}}function _(L,k){let B=[],V=k.filter(Y=>Y.enabled&&Y.mode==="Include").map(Y=>Y.type==="Box"?C(Y):R(Y)),$=k.filter(Y=>Y.enabled&&Y.mode==="Exclude").map(Y=>Y.type==="Box"?C(Y):R(Y)),q=L.length;for(let Y=0;Y<q;Y+=3){let X=L[Y],ne=L[Y+1],F=L[Y+2];(V.length===0||A(X,ne,F,V))&&($.length===0||!A(X,ne,F,$))||B.push(Y/3)}return B}function A(L,k,B,V,$){return V[$==="Intersect"?"every":"some"](q=>{let Y=M(L,k,B,q.invRotationMatrix,q.cropCenter);return Array.isArray(q)?T(Y.x,Y.y,Y.z,q):O(Y.x,Y.y,Y.z,q)})}function M(L,k,B,V,$){let q=L-$[0],Y=k-$[1],X=B-$[2],ne=1/(V[3]*q+V[7]*Y+V[11]*X+V[15]);return{x:(V[0]*q+V[4]*Y+V[8]*X+V[12])*ne+$[0],y:(V[1]*q+V[5]*Y+V[9]*X+V[13])*ne+$[1],z:(V[2]*q+V[6]*Y+V[10]*X+V[14])*ne+$[2]}}function C(L){let k=L.cropSize[0]/2,B=L.cropSize[1]/2,V=L.cropSize[2]/2,$=[L.cropCenter[0]-k,L.cropCenter[1]-B,L.cropCenter[2]-V,L.cropCenter[0]+k,L.cropCenter[1]+B,L.cropCenter[2]+V],q=D(L.cropRotation);return Object.assign($,{invRotationMatrix:q,cropCenter:L.cropCenter})}function D(L){let k=[],B=L[0]*Math.PI/180,V=L[1]*Math.PI/180,$=L[2]*Math.PI/180,q=Math.cos(B),Y=Math.sin(B),X=Math.cos(V),ne=Math.sin(V),F=Math.cos($),K=Math.sin($),re=q*F,oe=q*K,ce=Y*F,de=Y*K;return k[0]=X*F,k[1]=-X*K,k[2]=ne,k[4]=oe+ce*ne,k[5]=re-de*ne,k[6]=-Y*X,k[8]=de-re*ne,k[9]=ce+oe*ne,k[10]=q*X,k[12]=0,k[13]=0,k[14]=0,k[3]=0,k[7]=0,k[11]=0,k[15]=1,k}function T(L,k,B,V){return L>=V[0]&&L<=V[3]&&k>=V[1]&&k<=V[4]&&B>=V[2]&&B<=V[5]}function R(L){let k=2/L.cropSize[0],B=2/L.cropSize[1],V=2/L.cropSize[2],$=D(L.cropRotation);return{invRadiusX:k,invRadiusY:B,invRadiusZ:V,cropCenter:L.cropCenter,invRotationMatrix:$}}function O(L,k,B,V){let $=(L-V.cropCenter[0])*V.invRadiusX,q=(k-V.cropCenter[1])*V.invRadiusY,Y=(B-V.cropCenter[2])*V.invRadiusZ;return $*$+q*q+Y*Y<=1}e.onmessage=L=>{if(L.data.getCroppedIndexes){let k=new Uint32Array(_(new Float32Array(L.data.positions),L.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:k},[k])}else if(L.data.positions)h=L.data.positions,m=new Float32Array(h),v=L.data.meshMatrixWorlds,x=L.data.cropsArray,g=L.data.meshIndexIntervals,S(v,x,g),e.postMessage({sortSetupComplete:!0});else if(L.data.sort||L.data.newMatrixWorlds||L.data.newCropsArray)(L.data.newMatrixWorlds||L.data.newCropsArray)&&(x=L.data.newCropsArray||x,v=L.data.newMatrixWorlds||v,S(v,x,g)),b(L.data.sort.view,L.data.sort.cameraPosition);else if(L.data.init){f=L.data.init.Constants,i=L.data.init.splatCount;let k=f.BytesPerInt,B=f.BytesPerFloat*3,V=new Uint8Array(L.data.init.sorterWasmBytes),$=k+B,q=i*$,Y=i*f.BytesPerInt*2+f.DepthMapRange*f.BytesPerInt*2,X=f.MemoryPageSize*32,ne=q+Y+X,F=Math.floor(ne/f.MemoryPageSize)+1,K={module:{},env:{memory:new WebAssembly.Memory({initial:F*2,maximum:F*3,shared:!0})}};WebAssembly.compile(V).then(re=>WebAssembly.instantiate(re,K)).then(re=>{t=re,n=0,s=i*k,a=s+i*B,c=a+16*f.BytesPerFloat*2,o=c+i*f.BytesPerInt,l=o+f.DepthMapRange*f.BytesPerInt,u=K.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}function dJe(e){let t=new Worker(URL.createObjectURL(new Blob(["(",hJe.toString(),")(self)"],{type:"application/javascript"}))),i=atob(uJe),r=new Uint8Array(i.length);for(let n=0;n<i.length;n++)r[n]=i.charCodeAt(n);return t.postMessage({init:{sorterWasmBytes:r.buffer,splatCount:e,Constants:{BytesPerFloat:hf.BytesPerFloat,BytesPerInt:hf.BytesPerInt,DepthMapRange:hf.DepthMapRange,MemoryPageSize:hf.MemoryPageSize}}}),t}var fD=function(){let e=new Float32Array(1),t=new Int32Array(e.buffer);return function(i){return e[0]=i,t[0]}}(),fJe=function(e,t,i,r){return e+(t<<8)+(i<<16)+(r<<24)},tE=new pe;function Wq(e){let t=!1;return e.scene.objects.traverse((i,r)=>{if(r.visible===!1)return!0;r.type==="Splat"&&(t=!0)}),t}var KE=class extends kr{constructor(e,t,i,r,n=!1,s=1,a,o){super(i,r),this.splatCount=t,this.meshIndexIntervals=a,this.meshMatrixWorlds=o,this.splatBuffers=e,this.geometry=i,this.material=r,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=n,this.devicePixelRatio=s,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,t,i=!1,r=1,n,s){let a=KE.buildGeomtery(t),o=KE.buildMaterial(n);return new KE(e,t,a,o,i,r,n,s)}static buildMaterial(e){let t=`
            precision highp float;
            #include <common>

            attribute uint splatIndex;

            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D centersColorsTexture;
            uniform vec2 focal;
            uniform vec2 viewport;
            uniform vec2 basisViewport;
            uniform vec2 covariancesTextureSize;
            uniform vec2 centersColorsTextureSize;
						uniform highp sampler2D meshMatrixWorldsTexture;
						uniform uint meshIndexIntervals[257];
						uniform float orthoZoom;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;

            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
            const uvec4 shift4 = uvec4(0, 8, 16, 24);
            vec4 uintToRGBAVec (uint u) {
               uvec4 urgba = mask4 & u;
               urgba = urgba >> shift4;
               vec4 rgba = vec4(urgba) * encodeNorm4;
               return rgba;
            }

            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
                samplerUV.y = float(floor(d)) / dimensions.y;
                samplerUV.x = fract(d);
                return samplerUV;
            }

            void main () {
                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));
                vColor = uintToRGBAVec(sampledCenterColor.r);

                vPosition = position.xy * 2.0;

								uint meshIndex;
								for (int i = 1; i < 257; i++) {
									if (splatIndex < meshIndexIntervals[i]) {
										meshIndex = uint(i - 1);
										break;
									}
								}

								float strideMulmeshIndex = float(4u*meshIndex);
								float meshMatrixWorldsTextureLength = float(256*4);

								mat4 modelMat = mat4(
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))
								);
								mat4 modelViewMat = viewMatrix * modelMat;
								vec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); 
                vec4 clipCenter = projectionMatrix * viewCenter;

                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;
                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;
                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;

                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);
                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);

                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix
                mat3 Vrk = mat3(
                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
                );
                float s = 1.0 / (viewCenter.z * viewCenter.z);

                mat3 W = transpose(mat3(modelViewMat));
                mat3 T = orthoZoom > 0.0 ? W : W * mat3(
									focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
									0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
									0., 0., 0.
								);
                mat3 cov2Dm = transpose(T) * Vrk * T;
                cov2Dm[0][0] += 0.3;
                cov2Dm[1][1] += 0.3;

                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
                // need cov2Dm[1][0] because it is a symetric matrix.
                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
                // so that we can determine the 2D basis for the splat. This is done using the method described
                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
                //
                // This is a different approach than in the original work at INRIA. In that work they compute the
                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle
                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance
                // matrix (called 'conic') to determine fragment opacity.
                float a = cov2Dv.x;
                float d = cov2Dv.z;
                float b = cov2Dv.y;
                float D = a * d - b * b;
                float trace = a + d;
                float traceOver2 = 0.5 * trace;
                float term2 = sqrt(trace * trace / 4.0 - D);
                float eigenValue1 = traceOver2 + term2;
								float eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value

                const float maxSplatSize = 1024.0;
                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
                // since the eigen vectors are orthogonal, we derive the second one from the first
                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);
                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);
                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);

                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;

								if (orthoZoom > 0.0) {
									ndcOffset *= orthoZoom;
								}

                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            }`,i=`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;
						layout(location = 1) out vec4 gVelocity; 

            void main () {
                // compute the negative squared distance from the center of the splat to the
                // current fragment in the splat's local space.
                float A = -dot(vPosition, vPosition);
                if (A < -4.0) discard;
                vec3 color = vColor.rgb;
                A = exp(A) * vColor.a;
                gl_FragColor = vec4(color.rgb, A);
								gVelocity = vec4(0.0); // so it is ignored by TAA
            }`,r={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new pe},viewport:{type:"v2",value:new pe},basisViewport:{type:"v2",value:new pe},debugColor:{type:"v3",value:new qt},covariancesTextureSize:{type:"v2",value:new pe(1024,1024)},centersColorsTextureSize:{type:"v2",value:new pe(1024,1024)},orthoZoom:{type:"f",value:-1}};return new Vi({uniforms:r,vertexShader:t,fragmentShader:i,transparent:!0,alphaTest:1,blending:fm,depthTest:!0,depthWrite:!1,side:wa})}static buildGeomtery(e){let t=new Rt;t.setIndex([0,1,2,0,2,3]);let i=new Float32Array(4*3),r=new Xt(i,3);t.setAttribute("position",r),r.setXYZ(0,-1,-1,0),r.setXYZ(1,-1,1,0),r.setXYZ(2,1,1,0),r.setXYZ(3,1,-1,0),r.needsUpdate=!0;let n=new die().copy(t),s=new Uint32Array(e),a=new Rb(s,1,!1);return a.setUsage(FIe),n.setAttribute("splatIndex",a),n.instanceCount=e,n}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(r=>r.buildPreComputedBuffers()),this.covariances=new Float32Array(this.splatCount*6),this.colors=new Uint8Array(this.splatCount*4),this.centers=new Float32Array(this.splatCount*3);let e=0,t=0,i=0;for(let r of this.splatBuffers){let n=r.nsplats;this.colors.subarray(e,e+n*4).set(r.colorsA),e+=n*4,this.centers.subarray(t,t+n*3).set(r.decoded.xyz.denormDequant().data),t+=n*3,this.covariances.subarray(i,i+n*6).set(new Float32Array(r.precomputedCovarianceBufferData)),i+=n*6}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,t=new pe(4096,1024);for(;t.x*t.y*2<e*6;)t.y*=2;let i=new pe(4096,1024);for(;i.x*i.y*4<e*4;)i.y*=2;let r,n;if(this.halfPrecisionCovariancesOnGPU){n=new Uint16Array(t.x*t.y*2);for(let u=0;u<this.covariances.length;u++)n[u]=xBe.toHalfFloat(this.covariances[u]);r=new Ga(n,t.x,t.y,BA,Xh)}else n=new Float32Array(t.x*t.y*2),n.set(this.covariances),r=new Ga(n,t.x,t.y,BA,wr);r.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=r,this.material.uniforms.covariancesTextureSize.value.copy(t);let s=new Uint32Array(i.x*i.y*4);for(let u=0;u<e;u++){let h=u*4,f=u*3,m=u*4;s[m]=fJe(this.colors[h],this.colors[h+1],this.colors[h+2],this.colors[h+3]),s[m+1]=fD(this.centers[f]),s[m+2]=fD(this.centers[f+1]),s[m+3]=fD(this.centers[f+2])}let a=new Ga(s,i.x,i.y,Mte,Dh);a.internalFormat="RGBA32UI",a.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=a,this.material.uniforms.centersColorsTextureSize.value.copy(i);let o=256*4,l=new Float32Array(256*16);for(let u=0;u<this.meshMatrixWorlds.length;u++)l.set(this.meshMatrixWorlds[u].elements,u*16);let c=new Ga(l,o,1,$r,wr);c.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=c,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:n,texture:r,size:t},centerColors:{data:s,texture:a,size:i},meshMatrixWorlds:{data:l,texture:c}}}updateIndexes(e){let t=this.geometry;t.attributes.splatIndex.set(e),t.attributes.splatIndex.needsUpdate=!0,t.instanceCount=e.length}updateUniforms(e,t,i,r){this.splatCount>0&&(tE.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(tE),this.material.uniforms.basisViewport.value.set(2/tE.x,2/tE.y),this.material.uniforms.focal.value.set(t,i),this.material.uniforms.orthoZoom.value=r,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose()),this.removeFromParent()}},Dse,pJe=new Promise(e=>{Dse=e}),qq=!1,iE;function mJe(){if(qq)return;if(iE)return iE;async function e(){let t=await gc(()=>import("./gaussian-splat-compression-BblNKJdU.js"),[]);Dse(t),qq=!0}return iE=e(),iE}var Ise;pJe.then(e=>Ise=e);var gJe=class{constructor(e={}){hx(this,"updateView",function(){let t=new tt,i=[],r=new j(0,0,-1),n=new j(0,0,-1),s=new j,a=new j;return function(o=!1,l){let c=this.updateMatrixWorldsInWorkerIfNeeded(),u=this.cropsChanged();if(!o){n.set(0,0,-1).applyQuaternion(l.quaternion);let f=!1,m=!1;if(n.dot(r)<=.95&&(f=!0),a.copy(l.position).sub(s).length()>=1&&(m=!0),!f&&!m&&!c&&!u&&!this.needsInitialRender)return}this.needsInitialRender=!1,s.copy(l.position),r.copy(n),t.copy(l.matrixWorld).invert(),t.premultiply(this.dummyPerspectiveMatrix),i[0]=l.position.x,i[1]=l.position.y,i[2]=l.position.z;let h={sort:{view:t.elements,cameraPosition:i,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...c?{newMatrixWorlds:this.meshMatrixWorlds}:{},...u?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=h:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(h))}}()),this.scene=e.scene,this.currentPage=null,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null,this.needsInitialRender=!0,this.dummyPerspectiveMatrix=new tt().makePerspective(-1,1,-1,1,.1,1e3)}updateSplatMeshUniforms(e,t){let i=new pe;this.splatMesh!==null&&this.splatMesh.getSplatCount()>0&&(e.getSize(i),this.cameraFocalLengthX=t.projectionMatrix.elements[0]*this.devicePixelRatio*i.x*.45,this.cameraFocalLengthY=t.projectionMatrix.elements[5]*this.devicePixelRatio*i.y*.45,this.splatMesh.updateUniforms(i,this.cameraFocalLengthX,this.cameraFocalLengthY,t.isPerspectiveCamera?-1:t.zoom*this.devicePixelRatio))}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=new j().fromArray(e.position)),e.orientation&&(e.orientation=new Jt().fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let t=[];if(this.splatEntries=t,this.activePage.traverseVisibleEntity(s=>{s.data.type==="Splat"&&t.push(s)}),this.splatMesh&&this.splatMesh.dispose(),t.length===0)return this.splatMesh=null,!1;this.meshMatrixWorlds=t.map(s=>s.matrixWorld),this.meshMatrixWorldsOld=t.map(s=>s.matrixWorld.clone()),this.cropsArray=t.map(s=>s.data.crops.map(a=>a.data));let i=t.map(s=>new Ise.GSplineBuffer(new Uint8Array(s.data.buffer).buffer)),r=0,n=[0];for(let s of i)r+=s.getSplatCount(),n.push(r);return this.setupSplatMesh(i,r,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,n,this.meshMatrixWorlds),this.setupSortWorker(r),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let t=0;t<this.meshMatrixWorlds.length;t++)e.set(this.meshMatrixWorlds[t].elements,t*16);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,this.meshMatrixWorlds.every((t,i)=>t.equals(this.meshMatrixWorldsOld[i]))?!1:(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(t=>t.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((t,i)=>{var r;t.data.crops.forEach((n,s)=>{this.cropsArray[i][s]===void 0?(e=!0,this.cropsArray[i][s]=n.data):Object.entries(n.data).forEach(([a,o])=>{var l;Array.isArray(o)&&o.some((c,u)=>c!==this.cropsArray[i][s][a][u])?(e=!0,this.cropsArray[i][s][a]=o):o!==((l=this.cropsArray[i][s])==null?void 0:l[a])&&(e=!0,this.cropsArray[i][s][a]=o)})}),t.data.crops.length!==((r=this.cropsArray[i])==null?void 0:r.length)&&(this.cropsArray[i].length=t.data.crops.length,e=!0)}),e}setupSplatMesh(e,t,i=new j,r=new Jt,n=!1,s=1,a,o){this.splatMesh=KE.buildMesh(e,t,n,s,a,o),this.splatMesh.position.copy(i),this.splatMesh.quaternion.copy(r),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=99999,this.splatRenderCount=t,this.splatMesh.onBeforeRender=(l,c,u)=>this.update(l,u)}setupSortWorker(e){this.sortWorker=dJe(e),this.sortWorker.onmessage=t=>{var i;t.data.sortDone?(this.sortRunning=!1,(i=this.splatMesh)==null||i.updateIndexes(new Uint32Array(t.data.indexesBuffer)),this.lastSortTime=t.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):t.data.sortCanceled?this.sortRunning=!1:t.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):t.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.scene.activePage.add(this.splatMesh),this.needsInitialRender=!0)}}update(e,t){this.splatMesh!==null&&(this.updateSplatMeshUniforms(e,t),this.updateView(!1,t))}getSplatMesh(){return this.splatMesh}},XO=new Yh;XO.wireframe=!0;var Xq=new j,Tz=class extends go{constructor(e,t){super(),this.data=e,this.sharedAssets=t,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.shapeBlendIntances=[],this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new cJe,this.invisibleObjects=new ov("jflkdsafjasdifjaslk",{...eO.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1,this.errorPage=new As("fdasfa",{...Bv.defaultData,name:""},{shared:t,scene:this})}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=sJe(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=nJe(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),i=this.entityIdentityToEntity[t];i&&(e.uuid=i.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof As&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let i=[],r=t;for(;r!==this;){let n=r;r=r.parent;let s=r.children.indexOf(n);i.splice(0,0,s)}return{entity:t,sortKey:i}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push(r)}return t.sort((i,r)=>ere(i.sortKey,r.sortKey)),t.map(i=>i.entity)}nonExistOrDescendantOf(e,t){let i=this.find(e);if(i===void 0)return!0;for(;i;){if(i.uuid===t)return!0;i=i.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===py)return this.activePage.personalCamera}if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}find2D(e){for(let t of this.children)if(t instanceof As&&t.uiScene){let i=t.uiScene.find(e);if(i)return i}}findScene2DfromObject2D(e){for(let t of this.children)if(t instanceof As&&t.uiScene&&t.uiScene.find(e))return t.uiScene}find2DInUIObjects(e){let t;return this.traverseEntity(i=>{t===void 0&&i instanceof xa&&(t=i.uiCanvas.find(e))}),t}traverse2D(e){for(let t of this.children)t instanceof As&&t.uiScene&&t.uiScene.traverse(e)}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){var i;if(e.path.length===0&&e.type===7){let r=e.parent===null?this:this.find(e.parent);if(r===void 0)throw new Error("unexpected");let n=this.createObject(e.id,e.data,e.children,r,e.localIndex,t);n.updateVisible(this),n.resetBBoxNeedsUpdate(),Yl(n)&&Lh(n.parent)&&(n.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(r),this.markNeedsRecomputeInstancesForChildren(n),this.markToExpandCloner(n),this.markPenumbraSizeDirty(),n.updatePathSnapping()}else if(e.path.length===0&&e.type===8){let r=this.find(e.id);if(r===void 0)throw new Error("unexpected");r.traverseEntity(s=>{s instanceof km&&(this.shapeBlendIntances=this.shapeBlendIntances.filter(a=>a!==s))}),this.markToExpandCloner(r),r.resetBBoxNeedsUpdate(),this.unregisterObject(r);let n=r.parent;this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(r),this.markPenumbraSizeDirty(),r.parent.remove(r),Lh(r.parent)&&(r.parent.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),Yl(r)&&(r.freeBooleanPointer(),n instanceof Lm&&n.invalidateDownstreamBooleanData().recomputeBoolean()),r instanceof Sz&&r.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),this.pathConstraints.removeDependencies(r.uuid),r.updatePathSnapping()}else if(e.path.length===0&&e.type===9){let r=this.find(e.id);if(r===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(r);let n=r.parent;this.markNeedsRecomputeInstancesForAncessors(n),(i=r.cloner)==null||i.resetOnMove(),this.markToExpandCloner(r);let s=e.parent===null?this:this.find(e.parent);if(s===void 0)throw new Error("unexpected");s.add(r),this.markNeedsRecomputeInstancesForAncessors(s),this.markToExpandCloner(r),r.invalidateClonerTransform(r),r.updateVisible(this),r.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let a=e.localIndex;s.children.splice(a,0,s.children.pop()),Yl(r)&&(r.invalidateUpstreamBooleanData(),Lh(r.parent)?r.parent.invalidateDownstreamBooleanData().recomputeBoolean():n instanceof Lm&&n.invalidateDownstreamBooleanData().recomputeBoolean()),r.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){var t;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let i of this.children)i instanceof As&&(i.visible=i.uuid===e,i.visible&&(this.activePage=i,this.activePage.onActive(this)));this.activePage!==((t=this.splatViewer)==null?void 0:t.activePage)&&this.reloadSplats()}updateEntityByOp(e,t,i,r){if(t.type===0){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:s}=t.props;t={...t,props:s},this.markNeedsRecomputeInstances()}t.path[0]==="pathSnapping"&&t.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,t.props.pathId)}let n=this.find(e);if(n)try{K$e(n,t,i,{scene:this,shared:r}),n instanceof Gn&&n.updateGeometryGroupsIfNeeded()}catch(s){console.error(s)}}updateEntity2DByOp(e,t,i,r,n,s=[]){e.updateEntityByOp(t,i,r,n),this.traverseEntity(a=>{(a instanceof xa||a instanceof As)&&(s.includes(a.frameId??"")||a.frameId===t)&&a.updateEntity2DByOp(t,i,r,n)})}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let i=Object.entries(t.data.lib.components).map((r,n)=>({data:r[1].asset.data,children:r[1].asset.children,id:r[0],fi:n}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(i,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(r=>{r instanceof Ea&&r.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){zi.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{zi.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,i,r,n,s,a){if(e){let o=r.find(e);o&&o!==r&&n.forInstancesRec(l=>{l.data=Fb(l.data,c=>{let u=c.events.data(a.id),h=l.goUp(s);if(h){let f=[...Jie(h.identity),e].join("-"),m=this.entityIdentityToEntity[f];if(m){let g=m.uuid,v=os.zoom(u,t);v[i]=g}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,i,r,n,s){e.forEach(a=>{a.data.type==="Transition"?this.relativeizeInner(a.data.object,[...t,a.id],"object",i,r,n,s):a.data.type==="Animation"?this.relativeizeInner(a.data.object,[...t,a.id],"object",i,r,n,s):a.data.type==="Conditional"&&(this.rewriteActions(a.data.ifActions,[...t,a.id,"ifActions"],i,r,n,s),this.rewriteActions(a.data.elseActions,[...t,a.id,"elseActions"],i,r,n,s))})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof lv&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,i)=>{t.data.events.forEach(r=>{if(r.data.type==="GameControl"){let n=!1;if(t.forInstancesRec(s=>{s.data=Fb(s.data,a=>{s.isInstanceRoot||(a.events.delete(r.id),n=!0)}).data}),n===!1)for(let s of xT.list)this.rewriteActions(r.data.gameActions[s],["gameActions",s],e,t,i,r)}else r.data.type==="Conditional"?(r.data.condition.type==="Distance"?(this.relativeizeInner(r.data.condition.fromObject,["condition"],"fromObject",e,t,i,r),this.relativeizeInner(r.data.condition.toObject,["condition"],"toObject",e,t,i,r)):r.data.condition.type==="State"?this.relativeizeInner(r.data.condition.object,["condition"],"object",e,t,i,r):r.data.condition.type==="Comparison"&&(r.data.condition.lOperand.type==="Property"&&this.relativeizeInner(r.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,i,r),r.data.condition.rOperand.type==="Property"&&this.relativeizeInner(r.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,i,r)),this.rewriteActions(r.data.inActions,["inActions"],e,t,i,r),this.rewriteActions(r.data.outActions,["outActions"],e,t,i,r)):"actions"in r.data&&this.rewriteActions(r.data.actions,["actions"],e,t,i,r)})}),!0})}expandInstances(e,t,i){let r=new Set;this.traverseEntity(n=>{if(n instanceof lv&&n.isInstanceRoot)return n.expandInstanceChildren({scene:this,shared:e,pendingDeletes:r}),t||n.resetBBoxNeedsUpdate(),i&&n.traverseEntity(s=>{i.addClip(s)}),!0});for(let n of r)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),Ez(n)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(i=>{i instanceof lv&&i.isInstanceRoot&&(i.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let i=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[i]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[i]),t.dispose()})}clearScene(){for(let e of this.children)zi.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let i=[],r=n=>{for(let s of n.children){let a=s.cloner;if(zi.is(s)&&!s.raycastLock&&(s.visible||a!=null&&a.object.data.visible))if(t===!0&&s.isInstanceRoot){let o=[];if(e.intersectObject(s,!0,o),o.length){let l=o[0];l.object=s,l.point.applyMatrix4(l.object.matrixWorld);let c=s.matrixWorld.clone().invert();l.point.applyMatrix4(c),i.push(l)}}else(Yl(s)||kO(s)&&this.enableHelpers&&s.objectHelper.visible)&&(e.intersectObject(s,!1,i),qO(s,e,i)),r(s)}};return r(this.activePage),i}raycastWithClones(e){let t=[],i=r=>{for(let n of r.children){let s=n.cloner;zi.is(n)&&(n.visible||s!=null&&s.object.data.visible)&&((Yl(n)||kO(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),qO(n,e,t,!0)),i(n))}};return i(this),t}forEachEntity(e){for(let t of this.children)zi.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)zi.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)zi.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(i=>{if(i instanceof Gn&&i.data.type==="Mesh"&&(i.data.geometry.type==="TextGeometry"||i.data.geometry.type==="InputGeometry")&&i.data.geometry.font===e){let r=i.geometry,n=i.data.geometry;r.updateFont(e,t).then(()=>{r.update(n);let s=i.invalidateDownstreamBooleanData();Lh(s)&&s.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)Rm.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)zi.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,i){let r=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,r,i),r+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,i,r,n,s){var l;let a={scene:this,shared:s},o=Az(e,t,a);return o instanceof km&&this.shapeBlendIntances.push(o),o&&(this.entityByUuid[e]=o,r.add(o),r.children.splice(n,0,r.children.pop()),i.length>0&&(o.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(i,o,s)),o.updateState(t,a),o instanceof Gn&&o.updateGeometryGroupsIfNeeded(),o.updateVisible(this),o.cloner&&this.toExpandCloner.add(o),(l=t.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),t.type==="Empty"&&t.animations&&o.traverseEntity(c=>{let u=c.dataPatched;if(c instanceof Gn&&u.bones&&u.boneInverses){let h=u.bones.map(g=>this.find(g)),f=u.boneInverses.map(g=>new tt().fromArray(g)),m=new dk(h,f);c.bind(m,c.bindMatrix)}else c.matrixAutoUpdate=!0}),o}getCenter(e){let t=[];for(let r=0,n=e.length;r<n;++r){let{id:s,recursive:a}=e[r],o=this.find(s),l=a?o.recursiveBBox:o.singleBBox;t.push(...l.vertices)}let i=new Pn;return i.setFromPoints(t),i.getCenter(Xq),Xq}copyMatrixWorld(e,t){if(e===null){t.identity();return}let i=this.find(e);i?t.copy(i.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var r;if(e===null){t.identity();return}let i=(r=this.find(e))==null?void 0:r.parent;i?t.copy(i.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof Ka)if(Array.isArray(t.material))for(let i=0;i<t.material.length;i++)t.material[i]instanceof jf&&e(t.material[i]);else t.material instanceof jf&&e(t.material)})}updateViewPlaneSize(e,t,i=!1){this.traverseConcreteEntity(r=>{r instanceof Ea&&r.setViewplaneSize(e,t,i)})}initializeSplatViewer(){this.splatViewer=new gJe({scene:this}),this.reloadSplats()}reloadSplats(){var e;(e=this.splatViewer)==null||e.loadSplat()}},ZE=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)},vJe=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return xJe(Math.atan2(r,i))},yJe=(e,t,i)=>{let r={x:0,y:0};return i=YO(i),r.x=e.x-t*Math.cos(i),r.y=e.y-t*Math.sin(i),r},YO=e=>e*(Math.PI/180),xJe=e=>e*(180/Math.PI),bJe=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,pD=new Map,Yq=e=>{pD.has(e)&&clearTimeout(pD.get(e)),pD.set(e,setTimeout(e,100))},zT=(e,t,i)=>{let r=t.split(/[ ,]+/g),n;for(let s=0;s<r.length;s+=1)n=r[s],e.addEventListener?e.addEventListener(n,i,!1):e.attachEvent&&e.attachEvent(n,i)},Qq=(e,t,i)=>{let r=t.split(/[ ,]+/g),n;for(let s=0;s<r.length;s+=1)n=r[s],e.removeEventListener?e.removeEventListener(n,i):e.detachEvent&&e.detachEvent(n,i)},Rse=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),Kq=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},QO=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},Cz=(e,t,i)=>{let r=Ose(e);for(let n in r)if(r.hasOwnProperty(n))if(typeof t=="string")r[n]=t+" "+i;else{let s="";for(let a=0,o=t.length;a<o;a+=1)s+=t[a]+" "+i+", ";r[n]=s.slice(0,-2)}return r},wJe=(e,t)=>{let i=Ose(e);for(let r in i)i.hasOwnProperty(r)&&(i[r]=t);return i},Ose=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(i){t[i+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},mD=(e,t)=>{for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},SJe=(e,t)=>{let i={};for(let r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)?i[r]=t[r]:e.hasOwnProperty(r)&&(i[r]=e[r]);return i},KO=(e,t)=>{if(e.length)for(let i=0,r=e.length;i<r;i+=1)t(e[i]);else t(e)},_Je=(e,t,i)=>({x:Math.min(Math.max(e.x,t.x-i),t.x+i),y:Math.min(Math.max(e.y,t.y-i),t.y+i)});typeof window<"u"&&(Lse="ontouchstart"in window,kse=!!window.PointerEvent,zse=!!window.MSPointerEvent);var Lse,kse,zse,$1={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},X0,$b={};kse?X0=$1.pointer:zse?X0=$1.MSPointer:Lse?(X0=$1.touch,$b=$1.mouse):X0=$1.mouse;function Qm(){}Qm.prototype.on=function(e,t){var i=this,r=e.split(/[ ,]+/g),n;i._handlers_=i._handlers_||{};for(var s=0;s<r.length;s+=1)n=r[s],i._handlers_[n]=i._handlers_[n]||[],i._handlers_[n].push(t);return i};Qm.prototype.off=function(e,t){var i=this;return i._handlers_=i._handlers_||{},e===void 0?i._handlers_={}:t===void 0?i._handlers_[e]=null:i._handlers_[e]&&i._handlers_[e].indexOf(t)>=0&&i._handlers_[e].splice(i._handlers_[e].indexOf(t),1),i};Qm.prototype.trigger=function(e,t){var i=this,r=e.split(/[ ,]+/g),n;i._handlers_=i._handlers_||{};for(var s=0;s<r.length;s+=1)n=r[s],i._handlers_[n]&&i._handlers_[n].length&&i._handlers_[n].forEach(function(a){a.call(i,{type:n,target:i},t)})};Qm.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=SJe(t.options,e))};Qm.prototype.bindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[t]=function(){typeof i["on"+t]=="function"?i["on"+t].apply(i,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},zT(e,X0[t],i._domHandlers_[t]),$b[t]&&zT(e,$b[t],i._domHandlers_[t]),i};Qm.prototype.unbindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},Qq(e,X0[t],i._domHandlers_[t]),$b[t]&&Qq(e,$b[t],i._domHandlers_[t]),delete i._domHandlers_[t],this};var Mz=Qm;function ds(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=ds.id,ds.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}ds.prototype=new Mz;ds.constructor=ds;ds.id=0;ds.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};ds.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=wJe("borderRadius","50%"),i=Cz("transition","opacity",e),r={};return r.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},r.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},r.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},mD(r.el,i),this.options.shape==="circle"&&mD(r.back,t),mD(r.front,t),this.applyStyles(r),this};ds.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var i in e[t])this.ui[t].style[i]=e[t][i];return this};ds.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};ds.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};ds.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};ds.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};ds.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var i=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=i,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let i=t.options.restJoystick,r={};r.x=i===!0||i.x!==!1?0:t.instance.frontPosition.x,r.y=i===!0||i.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,r)}return t};ds.prototype.setPosition=function(e,t){var i=this;i.frontPosition={x:t.x,y:t.y};var r=i.options.fadeTime+"ms",n={};n.front=Cz("transition",["top","left"],r);var s={front:{}};s.front={left:i.frontPosition.x+"px",top:i.frontPosition.y+"px"},i.applyStyles(n),i.applyStyles(s),i.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(i),i.restCallback()},i.options.fadeTime)};ds.prototype.restCallback=function(){var e=this,t={};t.front=Cz("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};ds.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};ds.prototype.computeDirection=function(e){var t=e.angle.radian,i=Math.PI/4,r=Math.PI/2,n,s,a;if(t>i&&t<i*3&&!e.lockX?n="up":t>-i&&t<=i&&!e.lockY?n="left":t>-i*3&&t<=-i&&!e.lockX?n="down":e.lockY||(n="right"),e.lockY||(t>-r&&t<r?s="left":s="right"),e.lockX||(t>0?a="up":a="down"),e.force>this.options.threshold){var o={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(o[l]=this.direction[l]);var c={};this.direction={x:s,y:a,angle:n},e.direction=this.direction;for(l in o)o[l]===this.direction[l]&&(c[l]=!0);if(c.x&&c.y&&c.angle)return e;(!c.x||!c.y)&&this.trigger("plain",e),c.x||this.trigger("plain:"+s,e),c.y||this.trigger("plain:"+a,e),c.angle||this.trigger("dir dir:"+n,e)}else this.resetDirection();return e};var EJe=ds;function Dn(e,t){var i=this;i.nipples=[],i.idles=[],i.actives=[],i.ids=[],i.pressureIntervals={},i.manager=e,i.id=Dn.id,Dn.id+=1,i.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},i.config(t),(i.options.mode==="static"||i.options.mode==="semi")&&(i.options.multitouch=!1),i.options.multitouch||(i.options.maxNumberOfNipples=1);let r=getComputedStyle(i.options.zone.parentElement);return r&&r.display==="flex"&&(i.parentIsFlex=!0),i.updateBox(),i.prepareNipples(),i.bindings(),i.begin(),i.nipples}Dn.prototype=new Mz;Dn.constructor=Dn;Dn.id=0;Dn.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(i){if(i===void 0)return t[0];for(var r=0,n=t.length;r<n;r+=1)if(t[r].identifier===i)return t[r];return!1}};Dn.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};Dn.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var i=e.createNipple(t.position,e.manager.getIdentifier());i.add(),e.idles.push(i)}};Dn.prototype.createNipple=function(e,t){var i=this,r=i.manager.scroll,n={},s=i.options,a={x:i.parentIsFlex?r.x:r.x+i.box.left,y:i.parentIsFlex?r.y:r.y+i.box.top};if(e.x&&e.y)n={x:e.x-a.x,y:e.y-a.y};else if(e.top||e.right||e.bottom||e.left){var o=document.createElement("DIV");o.style.display="hidden",o.style.top=e.top,o.style.right=e.right,o.style.bottom=e.bottom,o.style.left=e.left,o.style.position="absolute",s.zone.appendChild(o);var l=o.getBoundingClientRect();s.zone.removeChild(o),n=e,e={x:l.left+r.x,y:l.top+r.y}}var c=new EJe(i,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:t,position:e,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(QO(c.ui.el,n),QO(c.ui.front,c.frontPosition)),i.nipples.push(c),i.trigger("added "+c.identifier+":added",c),i.manager.trigger("added "+c.identifier+":added",c),i.bindNipple(c),c};Dn.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};Dn.prototype.bindNipple=function(e){var t=this,i,r=function(n,s){i=n.type+" "+s.id+":"+n.type,t.trigger(i,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)};Dn.prototype.pressureFn=function(e,t,i){var r=this,n=0;clearInterval(r.pressureIntervals[i]),r.pressureIntervals[i]=setInterval((function(){var s=e.force||e.pressure||e.webkitForce||0;s!==n&&(t.trigger("pressure",s),r.trigger("pressure "+t.identifier+":pressure",s),n=s)}).bind(r),100)};Dn.prototype.onstart=function(e){var t=this,i=t.options,r=e;e=Rse(e),t.updateBox();var n=function(s){t.actives.length<i.maxNumberOfNipples?t.processOnStart(s):r.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(a){if(Object.values(r.touches).findIndex(function(l){return l.identifier===a})<0){var o=[e[0]];o.identifier=a,t.processOnEnd(o)}}),t.actives.length<i.maxNumberOfNipples&&t.processOnStart(s))};return KO(e,n),t.manager.bindDocument(),!1};Dn.prototype.processOnStart=function(e){var t=this,i=t.options,r,n=t.manager.getIdentifier(e),s=e.force||e.pressure||e.webkitForce||0,a={x:e.pageX,y:e.pageY},o=t.getOrCreate(n,a);o.identifier!==n&&t.manager.removeIdentifier(o.identifier),o.identifier=n;var l=function(u){u.trigger("start",u),t.trigger("start "+u.id+":start",u),u.show(),s>0&&t.pressureFn(e,u,u.identifier),t.processOnMove(e)};if((r=t.idles.indexOf(o))>=0&&t.idles.splice(r,1),t.actives.push(o),t.ids.push(o.identifier),i.mode!=="semi")l(o);else{var c=ZE(a,o.position);if(c<=i.catchDistance)l(o);else{o.destroy(),t.processOnStart(e);return}}return o};Dn.prototype.getOrCreate=function(e,t){var i=this,r=i.options,n;return/(semi|static)/.test(r.mode)?(n=i.idles[0],n?(i.idles.splice(0,1),n):r.mode==="semi"?i.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(n=i.createNipple(t,e),n)};Dn.prototype.processOnMove=function(e){var t=this,i=t.options,r=t.manager.getIdentifier(e),n=t.nipples.get(r),s=t.manager.scroll;if(!bJe(e)){this.processOnEnd(e);return}if(!n){console.error("Found zombie joystick with ID "+r),t.manager.removeIdentifier(r);return}if(i.dynamicPage){var a=n.el.getBoundingClientRect();n.position={x:s.x+a.left,y:s.y+a.top}}n.identifier=r;var o=n.options.size/2,l={x:e.pageX,y:e.pageY};i.lockX&&(l.y=n.position.y),i.lockY&&(l.x=n.position.x);var c=ZE(l,n.position),u=vJe(l,n.position),h=YO(u),f=c/o,m={distance:c,position:l},g,v;if(n.options.shape==="circle"?(g=Math.min(c,o),v=yJe(n.position,g,u)):(v=_Je(l,n.position,o),g=ZE(v,n.position)),i.follow){if(c>o){let _=l.x-v.x,A=l.y-v.y;n.position.x+=_,n.position.y+=A,n.el.style.top=n.position.y-(t.box.top+s.y)+"px",n.el.style.left=n.position.x-(t.box.left+s.x)+"px",c=ZE(l,n.position)}}else l=v,c=g;var x=l.x-n.position.x,b=l.y-n.position.y;n.frontPosition={x,y:b},i.dataOnly||QO(n.ui.front,n.frontPosition);var S={identifier:n.identifier,position:l,force:f,pressure:e.force||e.pressure||e.webkitForce||0,distance:c,angle:{radian:h,degree:u},vector:{x:x/o,y:-b/o},raw:m,instance:n,lockX:i.lockX,lockY:i.lockY};S=n.computeDirection(S),S.angle={radian:YO(180-u),degree:180-u},n.trigger("move",S),t.trigger("move "+n.id+":move",S)};Dn.prototype.processOnEnd=function(e){var t=this,i=t.options,r=t.manager.getIdentifier(e),n=t.nipples.get(r),s=t.manager.removeIdentifier(n.identifier);!n||(i.dataOnly||n.hide(function(){i.mode==="dynamic"&&(n.trigger("removed",n),t.trigger("removed "+n.id+":removed",n),t.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(t.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),t.trigger("end "+n.id+":end",n),t.ids.indexOf(n.identifier)>=0&&t.ids.splice(t.ids.indexOf(n.identifier),1),t.actives.indexOf(n)>=0&&t.actives.splice(t.actives.indexOf(n),1),/(semi|static)/.test(i.mode)?t.idles.push(n):t.nipples.indexOf(n)>=0&&t.nipples.splice(t.nipples.indexOf(n),1),t.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(t.manager.ids[s.id]=s.identifier))};Dn.prototype.onDestroyed=function(e,t){var i=this;i.nipples.indexOf(t)>=0&&i.nipples.splice(i.nipples.indexOf(t),1),i.actives.indexOf(t)>=0&&i.actives.splice(i.actives.indexOf(t),1),i.idles.indexOf(t)>=0&&i.idles.splice(i.idles.indexOf(t),1),i.ids.indexOf(t.identifier)>=0&&i.ids.splice(i.ids.indexOf(t.identifier),1),i.manager.removeIdentifier(t.identifier),i.manager.unbindDocument()};Dn.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(i){i.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var AJe=Dn;function zs(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=Kq(),t.config(e),t.prepareCollections();var i=function(){var n;t.collections.forEach(function(s){s.forEach(function(a){n=a.el.getBoundingClientRect(),a.position={x:t.scroll.x+n.left,y:t.scroll.y+n.top}})})};if(typeof window>"u")return t.collections;zT(window,"resize",function(){Yq(i)});var r=function(){t.scroll=Kq()};return zT(window,"scroll",function(){Yq(r)}),t.collections}zs.prototype=new Mz;zs.constructor=zs;zs.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var i;return e.collections.every(function(r){return i=r.get(t),!i}),i}};zs.prototype.create=function(e){return this.createCollection(e)};zs.prototype.createCollection=function(e){var t=this,i=new AJe(t,e);return t.bindCollection(i),t.collections.push(i),i};zs.prototype.bindCollection=function(e){var t=this,i,r=function(n,s){i=n.type+" "+s.id+":"+n.type,t.trigger(i,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)};zs.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};zs.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};zs.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};zs.prototype.removeIdentifier=function(e){var t={};for(var i in this.ids)if(this.ids[i]===e){t.id=i,t.identifier=this.ids[i],delete this.ids[i];break}return t};zs.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};zs.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};zs.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};zs.prototype.onAny=function(e,t){var i=this,r,n="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=Rse(t);var s=function(o,l,c){c.ids.indexOf(l)>=0&&(c[n](o),o._found_=!0)},a=function(o){r=i.getIdentifier(o),KO(i.collections,s.bind(null,o,r)),o._found_||i.removeIdentifier(r)};return KO(t,a),!1};zs.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};zs.prototype.onDestroyed=function(e,t){var i=this;if(i.collections.indexOf(t)<0)return!1;i.collections.splice(i.collections.indexOf(t),1)};var TJe=zs,Zq=new TJe,CJe={create:function(e){return Zq.create(e)},factory:Zq},Bse=new Map,Zx=new Map,nm=class{constructor(e,t,i,r){this.data=t;let{audio:n,volume:s,delay:a,loop:o}=t;if(!n)throw new Error("Missing property");let l=typeof n=="string"?r.getAudio(n).src:n.data;this.audioPlayer=new wx({src:l,volume:s,delay:a,loop:o}),Zx.has(i.uuid)?Zx.get(i.uuid).push(this):Zx.set(i.uuid,[this]),Bse.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},ZO=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=Bse.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=Zx.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(i=>i.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(i=>i.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...Zx.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(i=>{i.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(i=>{i.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},jse=class{constructor(e,t,i,r,n){if(this.data=t,this.shared=r,this.condition=n,t.interaction==="play")this.interaction=new nm(e,t,i,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new ZO(t);else throw new Error("Missing property")}dispatchBasic(){if(Vr(this.shared,this.condition)===!1)return!1;this.interaction instanceof nm?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Vr(this.shared,this.condition)===!1)return!1;this.interaction instanceof nm?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(Vr(this.shared,this.condition)===!1)return!1;this.interaction instanceof nm&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},Nse=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r,this.delay=0,this.emission=e.emission,e.delay!==void 0&&(this.delay=e.delay),this.particleSystem=this.page.scene.find(this.data.emitterObjectId)}toggleEmitting(){this.particleSystem.started&&!this.particleSystem.stopped?this.stop(this.delay):this.start(this.delay)}toggleFroze(){this.particleSystem.started&&!this.particleSystem.isFrozen?this.freeze(this.delay):this.unFreeze(this.delay)}start(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.start(0),this.clearDelay()},e);return}this.particleSystem.start()}stop(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.stop(0),this.clearDelay()},e);return}this.particleSystem.stop()}freeze(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.freeze(0),this.clearDelay()},e);return}this.particleSystem.froze()}unFreeze(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.unFreeze(0),this.clearDelay()},e);return}this.particleSystem.unFroze()}reset(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.reset(0),this.clearDelay()},e);return}this.particleSystem.reset()}reverseFromCurrent(){switch(this.emission){case"emitToggle":this.toggleEmitting();break;case"pauseToggle":this.toggleFroze();break}}dispatchBasic(){if(Vr(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"emitToggle":this.toggleEmitting();break;case"pause":this.freeze(this.delay);break;case"pauseToggle":this.toggleFroze();break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay);break}}dispatchConditional(){if(Vr(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay);break}}dispatchGameControl(e){if(Vr(this.shared,this.condition)===!1||!this.particleSystem)return!1;e==="start"?this.start(this.delay):this.stop(this.delay)}dispose(){!this.particleSystem||(this.particleSystem.reset(),this.clearDelay())}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},MJe="text/plain",PJe="us-ascii",$q=(e,t)=>t.some(i=>i instanceof RegExp?i.test(e):i===e),DJe=(e,{stripHash:t})=>{let i=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!i)throw new Error(`Invalid URL: ${e}`);let{type:r,data:n,hash:s}=i.groups,a=r.split(";");s=t?"":s;let o=!1;a[a.length-1]==="base64"&&(a.pop(),o=!0);let l=(a.shift()||"").toLowerCase(),c=[...a.map(u=>{let[h,f=""]=u.split("=").map(m=>m.trim());return h==="charset"&&(f=f.toLowerCase(),f===PJe)?"":`${h}${f?`=${f}`:""}`}).filter(Boolean)];return o&&c.push("base64"),(c.length>0||l&&l!==MJe)&&c.unshift(l),`data:${c.join(";")},${o?n.trim():n}${s?`#${s}`:""}`};function IJe(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return DJe(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let i=e.startsWith("//");!i&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let r=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&r.protocol==="https:"&&(r.protocol="http:"),t.forceHttps&&r.protocol==="http:"&&(r.protocol="https:"),t.stripAuthentication&&(r.username="",r.password=""),t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,"")),r.pathname){let s=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,a=0,o="";for(;;){let c=s.exec(r.pathname);if(!c)break;let u=c[0],h=c.index,f=r.pathname.slice(a,h);o+=f.replace(/\/{2,}/g,"/"),o+=u,a=h+u.length}let l=r.pathname.slice(a,r.pathname.length);o+=l.replace(/\/{2,}/g,"/"),r.pathname=o}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let s=r.pathname.split("/"),a=s[s.length-1];$q(a,t.removeDirectoryIndex)&&(s=s.slice(0,-1),r.pathname=s.slice(1).join("/")+"/")}if(r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let s of[...r.searchParams.keys()])$q(s,t.removeQueryParameters)&&r.searchParams.delete(s);if(t.removeQueryParameters===!0&&(r.search=""),t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,""));let n=e;return e=r.toString(),!t.removeSingleSlash&&r.pathname==="/"&&!n.endsWith("/")&&r.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||r.pathname==="/")&&r.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),i&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var RJe=class{constructor({url:e,context:t},i,r,n){if(this.controlsManager=i,this.shared=r,this.condition=n,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:IJe(e,{removeTrailingSlash:!1,removeSingleSlash:!1,stripWWW:!1}),this.context=t??"tab"}dispatch(){var e;if(Vr(this.shared,this.condition)===!1)return!1;Cw?window.location.assign(this.url):(this.context==="tab"||$ie&&this.context==="none"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.controlsManager.orbitControls)==null||e.onPointerUp(Kt[0]),X9e())}},Vse=class{constructor(e,t,i,r,n){this.data=e,this.page=t,this.controlsManager=i,this.shared=r,this.condition=n,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=s=>{var c,u;this.timeoutIdQueue.shift();let a=this.page.scene.find(s);if(a===void 0)return;let o=this.controlsManager.sharedGameControlGlobals.rapierWorld,l=o?(c=a.dataPatched.physics)==null?void 0:c.fusedBody:!0;if(a.cloner){for(let h of a.cloner.children)l?(h.playModeVisible=!1,h.rigidBody&&((u=a.dataPatched.physics)==null?void 0:u.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(h.rigidBody.collider(0).handle),o.removeRigidBody(h.rigidBody),h.rigidBody=void 0),h.bvhGeometry&&(h.bvhGeometry=void 0)):this.clone===void 0||this.clone===h?(h.playModeVisible=!1,h.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(h.rigidBody.collider(0).handle),o.removeRigidBody(h.rigidBody),h.rigidBody=void 0)):h.playModeVisible===void 0&&(h.playModeVisible=!0);(l||this.clone===void 0||this.clone===!1)&&(a.visible=!1,a.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(a.rigidBody.collider(0).handle),o.removeRigidBody(a.rigidBody),a.rigidBody=void 0),a.bvhGeometry&&(a.bvhGeometry=void 0))}else a.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(a.rigidBody.collider(0).handle),o.removeRigidBody(a.rigidBody),a.rigidBody=void 0),a.bvhGeometry&&(a.bvhGeometry=void 0),a.visible=!1;o===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(h=>h.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(h=>h.rigidBody!==void 0),a.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(Vr(this.shared,this.condition)===!1)return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(Vr(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},Use=class{constructor(e,t,i,r,n){this.data=e,this.page=t,this.shared=i,this.eventManager=r,this.condition=n,this.shared=i}dispatch(){if(Vr(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;this.shared.reset(this.shared.data,!0),Vz(this.page,this.shared,!0),this.eventManager.reset(),(e=this.eventManager.controlsManager.gameControl)==null||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Fse={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},Pz={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},OJe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],BT={CSS:{},springs:{}};function Jl(e,t,i){return Math.min(Math.max(e,t),i)}function $x(e,t){return e.indexOf(t)>-1}function gD(e,t){return e.apply(null,t)}var ei={arr:function(e){return Array.isArray(e)},obj:function(e){return $x(Object.prototype.toString.call(e),"Object")},pth:function(e){return ei.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||ei.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return ei.hex(e)||ei.rgb(e)||ei.hsl(e)},key:function(e){return!Fse.hasOwnProperty(e)&&!Pz.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Hse(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(i){return parseFloat(i)}):[]}function Gse(e,t){var i=Hse(e),r=Jl(ei.und(i[0])?1:i[0],.1,100),n=Jl(ei.und(i[1])?100:i[1],.1,100),s=Jl(ei.und(i[2])?10:i[2],.1,100),a=Jl(ei.und(i[3])?0:i[3],.1,100),o=Math.sqrt(n/r),l=s/(2*Math.sqrt(n*r)),c=l<1?o*Math.sqrt(1-l*l):0,u=1,h=l<1?(l*o+-a)/c:-a+o;function f(g){var v=t?t*g/1e3:g;return l<1?v=Math.exp(-v*l*o)*(u*Math.cos(c*v)+h*Math.sin(c*v)):v=(u+h*v)*Math.exp(-v*o),g===0||g===1?g:1-v}function m(){var g=BT.springs[e];if(g)return g;for(var v=1/6,x=0,b=0;;)if(x+=v,f(x)===1){if(b++,b>=16)break}else b=0;var S=x*v*1e3;return BT.springs[e]=S,S}return t?f:m}function LJe(e){return e===void 0&&(e=10),function(t){return Math.ceil(Jl(t,1e-6,1)*e)*(1/e)}}var kJe=function(){var e=11,t=1/(e-1);function i(u,h){return 1-3*h+3*u}function r(u,h){return 3*h-6*u}function n(u){return 3*u}function s(u,h,f){return((i(h,f)*u+r(h,f))*u+n(h))*u}function a(u,h,f){return 3*i(h,f)*u*u+2*r(h,f)*u+n(h)}function o(u,h,f,m,g){var v,x,b=0;do x=h+(f-h)/2,v=s(x,m,g)-u,v>0?f=x:h=x;while(Math.abs(v)>1e-7&&++b<10);return x}function l(u,h,f,m){for(var g=0;g<4;++g){var v=a(h,f,m);if(v===0)return h;var x=s(h,f,m)-u;h-=x/v}return h}function c(u,h,f,m){if(!(0<=u&&u<=1&&0<=f&&f<=1))return;var g=new Float32Array(e);if(u!==h||f!==m)for(var v=0;v<e;++v)g[v]=s(v*t,u,f);function x(b){for(var S=0,_=1,A=e-1;_!==A&&g[_]<=b;++_)S+=t;--_;var M=(b-g[_])/(g[_+1]-g[_]),C=S+M*t,D=a(C,u,f);return D>=.001?l(b,C,u,f):D===0?C:o(b,S,S+t,u,f)}return function(b){return u===h&&f===m||b===0||b===1?b:s(x(b),h,m)}}return c}(),Wse=function(){var e={linear:function(){return function(r){return r}}},t={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var n,s=4;r<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-r,2)}},Elastic:function(r,n){r===void 0&&(r=1),n===void 0&&(n=.5);var s=Jl(r,1,10),a=Jl(n,.1,2);return function(o){return o===0||o===1?o:-s*Math.pow(2,10*(o-1))*Math.sin((o-1-a/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/a)}}},i=["Quad","Cubic","Quart","Quint","Expo"];return i.forEach(function(r,n){t[r]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(r){var n=t[r];e["easeIn"+r]=n,e["easeOut"+r]=function(s,a){return function(o){return 1-n(s,a)(1-o)}},e["easeInOut"+r]=function(s,a){return function(o){return o<.5?n(s,a)(o*2)/2:1-n(s,a)(o*-2+2)/2}}}),e}();function Dz(e,t){if(ei.fnc(e))return e;var i=e.split("(")[0],r=Wse[i],n=Hse(e);switch(i){case"spring":return Gse(e,t);case"cubicBezier":return gD(kJe,n);case"steps":return gD(LJe,n);default:return gD(r,n)}}function qse(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function eC(e,t){for(var i=e.length,r=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<i;s++)if(s in e){var a=e[s];t.call(r,a,s,e)&&n.push(a)}return n}function tC(e){return e.reduce(function(t,i){return t.concat(ei.arr(i)?tC(i):i)},[])}function Jq(e){return ei.arr(e)?e:(ei.str(e)&&(e=qse(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function Iz(e,t){return e.some(function(i){return i===t})}function Rz(e){var t={};for(var i in e)t[i]=e[i];return t}function $O(e,t){var i=Rz(e);for(var r in e)i[r]=t.hasOwnProperty(r)?t[r]:e[r];return i}function iC(e,t){var i=Rz(e);for(var r in t)i[r]=ei.und(e[r])?t[r]:e[r];return i}function zJe(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function BJe(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=e.replace(t,function(o,l,c,u){return l+l+c+c+u+u}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),n=parseInt(r[1],16),s=parseInt(r[2],16),a=parseInt(r[3],16);return"rgba("+n+","+s+","+a+",1)"}function jJe(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(t[1],10)/360,r=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function a(f,m,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?f+(m-f)*6*g:g<1/2?m:g<2/3?f+(m-f)*(2/3-g)*6:f}var o,l,c;if(r==0)o=l=c=n;else{var u=n<.5?n*(1+r):n+r-n*r,h=2*n-u;o=a(h,u,i+1/3),l=a(h,u,i),c=a(h,u,i-1/3)}return"rgba("+o*255+","+l*255+","+c*255+","+s+")"}function NJe(e){if(ei.rgb(e))return zJe(e);if(ei.hex(e))return BJe(e);if(ei.hsl(e))return jJe(e)}function Vh(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function VJe(e){if($x(e,"translate")||e==="perspective")return"px";if($x(e,"rotate")||$x(e,"skew"))return"deg"}function JO(e,t){return ei.fnc(e)?e(t.target,t.id,t.total):e}function lu(e,t){return e.getAttribute(t)}function Oz(e,t,i){var r=Vh(t);if(Iz([i,"deg","rad","turn"],r))return t;var n=BT.CSS[t+i];if(!ei.und(n))return n;var s=100,a=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(a),a.style.position="absolute",a.style.width=s+i;var l=s/a.offsetWidth;o.removeChild(a);var c=l*parseFloat(t);return BT.CSS[t+i]=c,c}function Xse(e,t,i){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return i?Oz(e,n,i):n}}function Lz(e,t){if(ei.dom(e)&&!ei.inp(e)&&(lu(e,t)||ei.svg(e)&&e[t]))return"attribute";if(ei.dom(e)&&Iz(OJe,t))return"transform";if(ei.dom(e)&&t!=="transform"&&Xse(e,t))return"css";if(e[t]!=null)return"object"}function Yse(e){if(ei.dom(e)){for(var t=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map,n;n=i.exec(t);)r.set(n[1],n[2]);return r}}function UJe(e,t,i,r){var n=$x(t,"scale")?1:0+VJe(t),s=Yse(e).get(t)||n;return i&&(i.transforms.list.set(t,s),i.transforms.last=t),r?Oz(e,s,r):s}function kz(e,t,i,r){switch(Lz(e,t)){case"transform":return UJe(e,t,r,i);case"css":return Xse(e,t,i);case"attribute":return lu(e,t);default:return e[t]||0}}function zz(e,t){var i=/^(\*=|\+=|-=)/.exec(e);if(!i)return e;var r=Vh(e)||0,n=parseFloat(t),s=parseFloat(e.replace(i[0],""));switch(i[0][0]){case"+":return n+s+r;case"-":return n-s+r;case"*":return n*s+r}}function Qse(e,t){if(ei.col(e))return NJe(e);if(/\s/g.test(e))return e;var i=Vh(e),r=i?e.substr(0,e.length-i.length):e;return t?r+t:r}function Bz(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function FJe(e){return Math.PI*2*lu(e,"r")}function HJe(e){return lu(e,"width")*2+lu(e,"height")*2}function GJe(e){return Bz({x:lu(e,"x1"),y:lu(e,"y1")},{x:lu(e,"x2"),y:lu(e,"y2")})}function Kse(e){for(var t=e.points,i=0,r,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(i+=Bz(r,s)),r=s}return i}function WJe(e){var t=e.points;return Kse(e)+Bz(t.getItem(t.numberOfItems-1),t.getItem(0))}function Zse(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return FJe(e);case"rect":return HJe(e);case"line":return GJe(e);case"polyline":return Kse(e);case"polygon":return WJe(e)}}function qJe(e){var t=Zse(e);return e.setAttribute("stroke-dasharray",t),t}function XJe(e){for(var t=e.parentNode;ei.svg(t)&&ei.svg(t.parentNode);)t=t.parentNode;return t}function $se(e,t){var i=t||{},r=i.el||XJe(e),n=r.getBoundingClientRect(),s=lu(r,"viewBox"),a=n.width,o=n.height,l=i.viewBox||(s?s.split(" "):[0,0,a,o]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:o/l[3]}}function YJe(e,t){var i=ei.str(e)?qse(e)[0]:e,r=t||100;return function(n){return{property:n,el:i,svg:$se(i),totalLength:Zse(i)*(r/100)}}}function QJe(e,t){function i(o){o===void 0&&(o=0);var l=t+o>=1?t+o:0;return e.el.getPointAtLength(l)}var r=$se(e.el,e.svg),n=i(),s=i(-1),a=i(1);switch(e.property){case"x":return(n.x-r.x)*r.w;case"y":return(n.y-r.y)*r.h;case"angle":return Math.atan2(a.y-s.y,a.x-s.x)*180/Math.PI}}function eX(e,t){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=Qse(ei.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(i)?r.match(i).map(Number):[0],strings:ei.str(e)||t?r.split(i):[]}}function Jse(e){var t=e?tC(ei.arr(e)?e.map(Jq):Jq(e)):[];return eC(t,function(i,r,n){return n.indexOf(i)===r})}function eae(e){var t=Jse(e);return t.map(function(i,r){return{target:i,id:r,total:t.length,transforms:{list:Yse(i)}}})}function KJe(e,t){var i=Rz(t);if(/^spring/.test(i.easing)&&(i.duration=Gse(i.easing)),ei.arr(e)){var r=e.length,n=r===2&&!ei.obj(e[0]);n?e={value:e}:ei.fnc(t.duration)||(i.duration=t.duration/r)}var s=ei.arr(e)?e:[e];return s.map(function(a,o){var l=ei.obj(a)&&!ei.pth(a)?a:{value:a};return ei.und(l.delay)&&(l.delay=o?0:t.delay),ei.und(l.endDelay)&&(l.endDelay=o===s.length-1?t.endDelay:0),l}).map(function(a){return iC(a,i)})}function ZJe(e){for(var t=eC(tC(e.map(function(s){return Object.keys(s)})),function(s){return ei.key(s)}).reduce(function(s,a){return s.indexOf(a)<0&&s.push(a),s},[]),i={},r=function(s){var a=t[s];i[a]=e.map(function(o){var l={};for(var c in o)ei.key(c)?c==a&&(l.value=o[c]):l[c]=o[c];return l})},n=0;n<t.length;n++)r(n);return i}function $Je(e,t){var i=[],r=t.keyframes;r&&(t=iC(ZJe(r),t));for(var n in t)ei.key(n)&&i.push({name:n,tweens:KJe(t[n],e)});return i}function JJe(e,t){var i={};for(var r in e){var n=JO(e[r],t);ei.arr(n)&&(n=n.map(function(s){return JO(s,t)}),n.length===1&&(n=n[0])),i[r]=n}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function eet(e,t){var i;return e.tweens.map(function(r){var n=JJe(r,t),s=n.value,a=ei.arr(s)?s[1]:s,o=Vh(a),l=kz(t.target,e.name,o,t),c=i?i.to.original:l,u=ei.arr(s)?s[0]:c,h=Vh(u)||Vh(l),f=o||h;return ei.und(a)&&(a=c),n.from=eX(u,f),n.to=eX(zz(a,u),f),n.start=i?i.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=Dz(n.easing,n.duration),n.isPath=ei.pth(s),n.isColor=ei.col(n.from.original),n.isColor&&(n.round=1),i=n,n})}var tae={css:function(e,t,i){return e.style[t]=i},attribute:function(e,t,i){return e.setAttribute(t,i)},object:function(e,t,i){return e[t]=i},transform:function(e,t,i,r,n){if(r.list.set(t,i),t===r.last||n){var s="";r.list.forEach(function(a,o){s+=o+"("+a+") "}),e.style.transform=s}}};function iae(e,t){var i=eae(e);i.forEach(function(r){for(var n in t){var s=JO(t[n],r),a=r.target,o=Vh(s),l=kz(a,n,o,r),c=o||Vh(l),u=zz(Qse(s,c),l),h=Lz(a,n);tae[h](a,n,u,r.transforms,!0)}})}function tet(e,t){var i=Lz(e.target,t.name);if(i){var r=eet(t,e),n=r[r.length-1];return{type:i,property:t.name,animatable:e,tweens:r,duration:n.end,delay:r[0].delay,endDelay:n.endDelay}}}function iet(e,t){return eC(tC(e.map(function(i){return t.map(function(r){return tet(i,r)})})),function(i){return!ei.und(i)})}function rae(e,t){var i=e.length,r=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=i?Math.max.apply(Math,e.map(function(s){let a=s.startOnceDelay??0,o=s.pingPongDelayCorrection??0,l=s.pingPongEndDelayCorrection??0;return r(s)+a+o+l+s.duration*(s.loop??1)})):t.duration,n.delay=i?Math.min.apply(Math,e.map(function(s){let a=s.startOnceDelay??0,o=s.pingPongDelayCorrection??0;return r(s)+a+o+s.delay})):t.delay,n.endDelay=i?n.duration-Math.max.apply(Math,e.map(function(s){let a=s.startOnceDelay??0,o=s.pingPongDelayCorrection??0,l=s.pingPongEndDelayCorrection??0;return r(s)+a+o+s.duration*(s.loop??1)-s.endDelay-l})):t.endDelay,n}var tX=0;function ret(e){var t=$O(Fse,e),i=$O(Pz,e),r=$Je(i,e),n=eae(e.targets),s=iet(n,r),a=rae(s,i),o=tX;return tX++,iC(t,{id:o,children:[],animatables:n,animations:s,duration:a.duration,delay:a.delay,endDelay:a.endDelay,startOnceDelay:i.startOnceDelay,pingPongDelayCorrection:i.pingPongDelayCorrection,pingPongEndDelayCorrection:i.pingPongEndDelayCorrection})}var wl=[],iX=[],$E,net=function(){function e(){$E=requestAnimationFrame(t)}function t(i){var r=wl.length;if(r){for(var n=0;n<r;){var s=wl[n];s.paused?(wl.splice(n,1),r-=1):(s.tick(i),n++)}e()}else $E=cancelAnimationFrame($E)}return e}();function set(e){document.hidden?(wl.forEach(function(t){return t.pause(e.timeStamp)}),iX=wl.slice(0),Mn.running=wl=[]):iX.forEach(function(t){return t.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",set);function Mn(e){e===void 0&&(e={});var t=0,i=0,r=0,n,s,a=0,o=null;function l(C){var D=window.Promise&&new Promise(function(T){return o=T});return C.finished=D,D}var c=ret(e);l(c);function u(){var C=c.direction;C!=="alternate"&&(c.direction=C!=="normal"?"normal":"reverse"),c.reversed=!c.reversed,s.forEach(function(D){(D.loop===1||D.loop%2===0)&&(D.reversed=c.reversed)})}function h(){c.direction="normal",c.reversed=!1,s.forEach(function(C){return C.reversed=!1})}function f(C){return c.reversed?c.duration-C:C}function m(){t=0,i=f(c.currentTime)*(1/Mn.speed)}function g(C,D,T=!1){D&&(c.reversed?D.seek(D.duration*D.loop-(C-D.timelineOffset-D.pingPongDelayCorrection),T):D.seek(C-D.timelineOffset-D.startOnceDelay-D.pingPongDelayCorrection,T))}function v(C,D=!1){if(c.reversed)for(var T=a;T--;)g(C,s[T],D);else for(var R=0;R<a;R++)g(C,s[R],D)}function x(C){var xe,fe,ye,_e,Te,Ce,Le,Ke,Xe,pt;var D=0,T=c.animations,R=T.length;for(c.direction!=="alternate"&&((xe=c.parent)==null?void 0:xe.direction)==="alternate"?((fe=c.parent)==null?void 0:fe.rewind)===!1&&c.reversePlayback===!0&&c.rewind===!1&&((ye=c.parent)!=null&&ye.reversed&&c.direction==="alternate"?C=c.duration-c.delay+c.endDelay-C:C=c.duration+c.delay-c.endDelay-C):A(!1,(_e=c.parent)==null?void 0:_e.rewind,c.rewind,(Te=c.parent)==null?void 0:Te.reversePlayback,c.reversePlayback)&&((Ce=c.parent)!=null&&Ce.reversed&&c.direction==="alternate"?C=c.duration-c.delay+c.endDelay-C:C=c.duration+c.delay-c.endDelay-C);D<R;){var O=T[D],L=O.animatable,k=O.tweens,B=k.length-1,V=k[B];B&&(V=eC(k,function(ot){return C<ot.end})[0]||V);let ct;(Le=c.parent)!=null&&Le.reversed&&c.direction==="alternate"?ct=Jl(C-V.start-V.endDelay,0,V.duration)/V.duration:ct=Jl(C-V.start-V.delay,0,V.duration)/V.duration;for(var $=isNaN(ct)?1:V.easing(ct),q=V.to.strings,Y=V.round,X=[],ne=V.to.numbers.length,F=void 0,K=0;K<ne;K++){var re=void 0;let ot,rt;c.direction!=="alternate"?((Ke=c.parent)==null?void 0:Ke.rewind)===!1&&c.reversePlayback===!0&&c.rewind===!1?(ot=V.to.numbers[K],rt=V.from.numbers[K]||0):(rt=V.to.numbers[K],ot=V.from.numbers[K]||0):A(!0,(Xe=c.parent)==null?void 0:Xe.rewind,c.rewind,(pt=c.parent)==null?void 0:pt.reversePlayback,c.reversePlayback)?(ot=V.to.numbers[K],rt=V.from.numbers[K]||0):(rt=V.to.numbers[K],ot=V.from.numbers[K]||0),V.isPath?re=QJe(V.value,$*rt):re=ot+$*(rt-ot),Y&&(V.isColor&&K>2||(re=Math.round(re*Y)/Y)),X.push(re)}var oe=q.length;if(!oe)F=X[0];else{F=q[0];for(var ce=0;ce<oe;ce++){q[ce];var de=q[ce+1],se=X[ce];isNaN(se)||(de?F+=se+de:F+=se+" ")}}tae[O.type](L.target,O.property,F,L.transforms),O.currentValue=F,D++}}function b(C){c[C]&&!c.passThrough&&c[C](c)}function S(){c.remaining&&c.remaining!==!0&&c.remaining--}let _={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function A(C,D,T,R,O){return _[C<<4|D<<3|T<<2|R<<1|O]}function M(C,D=!1){var k;var T=c.duration;let R=c.delay,O=T-c.endDelay;(k=c.parent)!=null&&k.reversed&&c.direction==="alternate"&&(R=c.endDelay,O=T-c.delay);var L=f(C);if(c.progress=Jl(L/T*100,0,100),D||(c.reversePlayback=L<c.currentTime),a&&v(L,D),!c.began&&c.currentTime>=0&&(c.began=!0,b("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,b("loopBegin")),(c.reversed||L>=0)&&L<=R&&c.currentTime!==0&&(x(0),b("change")),(L>=O&&c.currentTime!==T+c.pingPongDelayCorrection||!T)&&(x(T),b("change")),L>R&&L<O?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,b("changeBegin")),x(L),b("change")):c.changeBegan?(c.changeCompleted=!0,c.changeBegan=!1,b("change"),a&&b("timelineChangeComplete")):c.began&&L>O&&b("changeComplete"),c.currentTime=Jl(L,0,T+c.pingPongDelayCorrection),c.began&&b("update"),C>=T)if(S(),!c.remaining)c.paused=!0,c.completed||(c.completed=!0,b("loopComplete"),b("complete"),!c.passThrough&&"Promise"in window&&(o(),l(c)));else{a?t+=c.duration/Mn.speed:t+=c.duration;for(let B of s)B.setStartTime(0),B.remaining=B.loop;b("loopComplete"),c.loopBegan=!1,c.direction==="alternate"?u():a&&h()}}return c.reset=function(){var C=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed=C==="reverse",c.remaining=c.loop,s=c.children,a=s.length;for(var D=a;D--;)c.children[D].reset();x(c.reversed?c.duration:0)},c.setStartTime=function(C){t=C},c.set=function(C,D){return iae(C,D),c},c.tick=function(C){r=C,t||(t=r),M((r+(i-t))*Mn.speed)},c.seek=function(C,D=!1){M(C-t,D)},c.pause=function(C){c.paused=!0,a&&(n=C??performance.now())},c.play=function(C){!c.paused||(c.completed&&c.reset(),c.paused=!1,wl.push(c),a&&n!==void 0&&(t+=(C??performance.now())-n),$E||net())},c.reverse=function(){u(),c.completed=!c.reversed,m()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function rX(e,t){for(var i=t.length;i--;)Iz(e,t[i].animatable.target)&&t.splice(i,1)}function aet(e){for(var t=Jse(e),i=wl.length;i--;){var r=wl[i],n=r.animations,s=r.children;rX(t,n);for(var a=s.length;a--;){var o=s[a],l=o.animations;rX(t,l),!l.length&&!o.children.length&&s.splice(a,1)}!n.length&&!s.length&&r.pause()}}function oet(e,t){t===void 0&&(t={});var i=t.direction||"normal",r=t.easing?Dz(t.easing):null,n=t.grid,s=t.axis,a=t.from||0,o=a==="first",l=a==="center",c=a==="last",u=ei.arr(e),h=parseFloat(u?e[0]:e),f=u?parseFloat(e[1]):0,m=Vh(u?e[1]:e)||0,g=t.start||0+(u?h:0),v=[],x=0;return function(b,S,_){if(o&&(a=0),l&&(a=(_-1)/2),c&&(a=_-1),!v.length){for(var A=0;A<_;A++){if(!n)v.push(Math.abs(a-A));else{var M=l?(n[0]-1)/2:a%n[0],C=l?(n[1]-1)/2:Math.floor(a/n[0]),D=A%n[0],T=Math.floor(A/n[0]),R=M-D,O=C-T,L=Math.sqrt(R*R+O*O);s==="x"&&(L=-R),s==="y"&&(L=-O),v.push(L)}x=Math.max.apply(Math,v)}r&&(v=v.map(function(B){return r(B/x)*x})),i==="reverse"&&(v=v.map(function(B){return s?B<0?B*-1:-B:Math.abs(x-B)}))}var k=u?(f-h)/x:h;return g+k*(Math.round(v[S]*100)/100)+m}}function cet(e){e===void 0&&(e={});var t=Mn(e);return t.duration=0,t.add=function(i,r){var n=wl.indexOf(t),s=t.children;n>-1&&wl.splice(n,1);function a(f){f.passThrough=!0}for(var o=0;o<s.length;o++)a(s[o]);var l=iC(i,$O(Pz,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.timelineOffset=ei.und(r)?c:zz(r,c),a(t);var u=Mn(l);a(u),s.push(u),u.parent=t;var h=rae(s,e);return t.delay=h.delay,t.endDelay=h.endDelay,t.duration=h.duration,u.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}Mn.version="3.2.0";Mn.speed=1;Mn.running=wl;Mn.remove=aet;Mn.get=kz;Mn.set=iae;Mn.convertPx=Oz;Mn.path=YJe;Mn.setDashoffset=qJe;Mn.stagger=oet;Mn.timeline=cet;Mn.easing=Dz;Mn.penner=Wse;Mn.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var jz=Mn,nX=new j,sX=new j,aX=new Jt;function uet(e,t,i,r){if(r===0)return i.copy(e);if(r===1)return i.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return i.copy(e);let s=1-n*n;if(s<=Number.EPSILON){let u=1-r;return i.w=u*e.w+r*t.w,i.x=u*e.x+r*t.x,i.y=u*e.y+r*t.y,i.z=u*e.z+r*t.z,i.normalize(),i}let a=Math.sqrt(s),o=Math.atan2(a,n),l=Math.sin((1-r)*o)/a,c=Math.sin(r*o)/a;return i.w=e.w*l+t.w*c,i.x=e.x*l+t.x*c,i.y=e.y*l+t.y*c,i.z=e.z*l+t.z*c,i}function Ys(e,t,i,r,n,s){let a=i[e]!==void 0?i[e]:void 0,o=r[e];if(o==null)return;let l=a!=null?typeof a=="string"?Number(n.getVariable(a)??0):a:t[e],c=typeof o=="string"?Number(n.getVariable(o)??0):o;if(l!==c)return{update:u=>{let h=wt.lerp(l,c,u);s?t[e]=Math.trunc(h):t[e]=h},start:()=>{t[e]=l},end:()=>{t[e]=c}}}function Nz(e,t,i,r,n,s){let a=i[e]?i[e]:void 0,o=r[e];if(!o)return;let l=t[e],c=[...a??l].map(h=>typeof h=="string"?Number(n.getVariable(h)??0):h),u=[...o].map(h=>typeof h=="string"?Number(n.getVariable(h)??0):h);if(!(c.length!==u.length||jk(c,u)))return{update:h=>{c.forEach((f,m)=>{let g=wt.lerp(f,u[m],h);t[e][m]=s?Math.trunc(g):g})},start:()=>{Object.assign(t[e],c)},end:()=>{Object.assign(t[e],u)}}}function jT(e,t,i){return t.forEach((r,n)=>{e.setComponent(n,typeof r=="string"?Number(i.getVariable(r)??0):r)}),e}function oX(e,t,i,r,n){let s=i[e]?i[e]:void 0,a=r[e];if(!a)return;let o=t[e],l=s?jT(new j,s,n):o.clone(),c=jT(new j,a,n);if(!l.equals(c))return{update:u=>{o.lerpVectors(l,c,u)},start:()=>{o.copy(l)},end:()=>{o.copy(c)}}}function lX(e,t,i){return t.forEach((r,n)=>{e.setComponent(n,typeof r=="string"?Number(i.getVariable(r)??0):r)}),e}function NT(e,t,i,r,n){let s=i[e]?i[e]:void 0,a=r[e];if(!a)return;let o=t[e],l=!(o instanceof pe),c=o instanceof pe?o:new pe().fromArray(o),u=s?lX(new pe,s,n):c.clone(),h=lX(new pe,a,n);if(!u.equals(h))return{update:f=>{c.lerpVectors(u,h,f),l&&(t[e]=c.toArray())},start:()=>{c.copy(u),l&&(t[e]=c.toArray())},end:()=>{c.copy(h),l&&(t[e]=c.toArray())}}}function het(e,t,i,r){let n=i[e]?i[e]:void 0,s=r[e];if(!s)return;let a=t[e],o=n?new tt().fromArray(n):a.clone(),l=new j,c=new Jt,u=new j;o.decompose(l,c,u);let h=new tt().fromArray(s),f=new j,m=new Jt,g=new j;if(h.decompose(f,m,g),!o.equals(h))return{update:v=>{aX.slerpQuaternions(c,m,v),nX.lerpVectors(l,f,v),sX.lerpVectors(u,g,v),a.compose(nX,aX,sX)},start:()=>{a.compose(l,c,u)},end:()=>{a.compose(f,m,g)}}}function det(e,t,i,r,n){let s=i[e]?i[e]:void 0,a=r[e];if(!a)return;let o=t[e],l=s?typeof s=="string"?n.getColor(s).clone():new qt().setRGB(s.r,s.g,s.b):o.clone(),c=typeof a=="string"?n.getColor(a).clone():new qt().setRGB(a.r,a.g,a.b);if(l.equals(c))return;let u=o.clone();return{update:h=>{var f,m;u.lerpColors(l,c,h),(m=(f=t[e])==null?void 0:f.copy)==null||m.call(f,u)},start:()=>{u.copy(l)},end:()=>{u.copy(c)}}}function rE(e,t,i,r,n){let s=i[e]?i[e]:void 0,a=r[e];if(!a)return;let o=t[e],l=new sa(o.r,o.g,o.b,o.a),c=s?typeof s=="string"?n.getColor(s).clone():new sa(s.r,s.g,s.b,s.a):l.clone(),u=typeof a=="string"?n.getColor(a).clone():new sa(a.r,a.g,a.b,a.a);if(!c.equals(u))return{update:h=>{l.lerpColors(c,u,h);let f=wt.lerp(c.a,u.a,h);l.a=f,t[e]={r:l.r,g:l.g,b:l.b,a:l.a}},start:()=>{l.copy(c)},end:()=>{l.copy(u)}}}function Zf(e,t,i,r,n){if(typeof t[e]=="number")return Ys(e,t,i??{},r,n);if(Array.isArray(t[e]))return Nz(e,t,i??{},r,n)}function fet(e,t,i,r){var o,l,c,u;let n=[],s=e.cameraType==="OrthographicCamera"?(o=t.orthographic)==null?void 0:o.zoom:(l=t.perspective)==null?void 0:l.zoom,a=e.cameraType==="OrthographicCamera"?(c=i.orthographic)==null?void 0:c.zoom:(u=i.perspective)==null?void 0:u.zoom;if(a!==void 0){let h=s??e.zoom,f=a;h!==f&&n.push({update:m=>{e.zoom=wt.lerp(h,f,m),e.updateProjectionMatrix()},start:()=>{e.zoom=h,e.updateProjectionMatrix()},end:()=>{e.zoom=f,e.updateProjectionMatrix()}})}if(i.targetOffset!==void 0){let h=Ys("targetOffset",e,t,i,r);h&&n.push(h)}return n}function pet(e,t,i,r){if(i.scaleBaked===void 0)return;let n=(t.scaleBaked??e.data.geometry.scaleBaked).map(o=>typeof o=="string"?Number(r.getVariable(o)??0):o),s=i.scaleBaked.map(o=>typeof o=="string"?Number(r.getVariable(o)??0):o);if(vm.isEqual(n,s))return;let a=[];return a.push({update:o=>{e.updateGeometryInteractions({scaleBaked:[wt.lerp(n[0],s[0],o),wt.lerp(n[1],s[1],o),wt.lerp(n[2],s[2],o)]},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},start:()=>{e.updateGeometryInteractions({scaleBaked:n},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},end:()=>{e.updateGeometryInteractions({scaleBaked:s},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()}}),a}function met(e,t,i,r){if(!i.extrusion)return;let n=e.extrusion,s=t.extrusion??{},a=i.extrusion,o=[];return kre.forEach(l=>{let c=Zf(l,n,s,a,r);c&&o.push(c)}),o}function get(e,t,i,r){let n=[];if(!("geometry"in i))return n;let s=e.geometry.userData.parameters,a="geometry"in t?t.geometry:{},o=i.geometry;if(e instanceof Zb){let l=pet(e,a,o,r);l&&n.push(...l)}else{let l={};if(Object.assign(l,bu(s,S4),bu(a,S4)),S4.forEach(c=>{let u=Zf(c,l,a,o,r);u&&n.push(u)}),e instanceof Sz){Object.assign(l,{extrusion:{...s.extrusion}});let c=met(l,a,o,r);c&&n.push(...c)}n.length&&n.push({update:c=>{e.updateGeometryInteractions(l,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},start:c=>{e.updateGeometryInteractions(l,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},end:c=>{e.updateGeometryInteractions(l,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()}})}return n}function vet(e,t,i,r){let n=[];if(i.intensity!==void 0){let s=Ys("intensity",e,t,i,r);s&&n.push(s)}if(i.color!==void 0){let s=det("color",e,t,i,r);s&&n.push(s)}return n}function yet(e,t,i,r){let n=[];if(Array.isArray(e.material)){if(!("materials"in i&&i.materials))return n;let s="materials"in t&&t.materials?t.materials:[],a=i.materials;e.material.forEach((o,l)=>{if(!a[l])return;let c=s[l]??{},u=a[l];typeof c=="string"||typeof u=="string"||n.push(...cX(o,c,u,r))})}else{if(!("material"in i&&i.material))return n;let s="material"in t&&t.material?t.material:{},a=i.material;if(typeof s=="string"||typeof a=="string")return n;n.push(...cX(e.material,s,a,r))}return n}function cX(e,t,i,r){var a;let n=[],s=q0(i,r)||!!t.layers&&q0(t,r);n.push(Met(e,s));for(let o of e.layers){let l=(a=t.layers)==null?void 0:a.data(o.uuid),c=i.layers.data(o.uuid);if(!c||o.type!=="light"&&(!(o.visible??!0)||!(c.visible??!0)))continue;let u=o.getNames().filter(h=>!Rre.some(f=>h.includes(f)));for(let h of u)try{let f=o.getValue(h),m;if(h==="colors")m=Tet(o,l,c,h);else if(Array.isArray(f))h==="steps"&&(m=Aet(o,l,c,h));else if(typeof f=="number")m=xet(o,l,c,h,r);else{if(typeof f=="boolean")continue;f instanceof pe?m=bet(o,l,c,h):f instanceof j?m=wet(o,l,c,h,r):f instanceof sa?m=Eet(o,l,c,h,r):f instanceof qt?m=_et(o,l,c,h,r):"isTexture"in f&&(m=Cet(o,l,c,h))}m&&(Array.isArray(m)?n.push(...m):n.push(m))}catch(f){console.error(`lerpMaterial: unexpected material layer for ${h}`,f)}}return n}function xet(e,t,i,r,n){if(!e.hasValue(r)||!(r in i))return;let s=t?t[r]:e.getValue(r),a=i[r],o=typeof s=="string"?Number(n.getVariable(s)??0):s,l=typeof a=="string"?Number(n.getVariable(a)??0):a;if(o!==l)return{update:c=>{e.setValue(r,wt.lerp(o,l,c))},start:()=>{e.setValue(r,o)},end:()=>{e.setValue(r,l)}}}function bet(e,t,i,r){if(!e.hasValue(r)||!(r in i))return;let n=e.getValue(r),s=t?new pe().fromArray(t[r]):n.clone(),a=new pe().fromArray(i[r]);if(!s.equals(a))return{update:o=>{n.lerpVectors(s,a,o)},start:()=>{n.copy(s)},end:()=>{n.copy(a)}}}function wet(e,t,i,r,n){if(!e.hasValue(r)||!(r in i))return;let s=e.getValue(r),a=t?t[r]:void 0,o=i[r],l=a?jT(new j,a,n):s.clone(),c=jT(new j,o,n);if(!l.equals(c))return{update:u=>{s.lerpVectors(l,c,u)},start:()=>{s.copy(l)},end:()=>{s.copy(c)}}}function _et(e,t,i,r,n){if(!e.hasValue(r)||!(r in i))return;let s=t?t[r]:void 0,a=i[r],o=e.getValue(r),l=s?typeof s=="string"?n.getColor(s).clone():new qt().setRGB(s.r,s.g,s.b):o.clone(),c=typeof a=="string"?n.getColor(a).clone():new qt().setRGB(a.r,a.g,a.b);if(l.equals(c))return;let u=o.clone();return{update:h=>{e.getValue(r)!==u&&e.setValue(r,u),u.lerpColors(l,c,h)},start:()=>{u.copy(l)},end:()=>{u.copy(c)}}}function Eet(e,t,i,r,n){if(!e.hasValue(r)||!(r in i))return;let s=t?t[r]:void 0,a=i[r],o=e.getValue(r),l=s?typeof s=="string"?n.getColor(s).clone():new qt().setRGB(s.r,s.g,s.b):o.clone(),c=typeof a=="string"?n.getColor(a).clone():new sa(a.r,a.g,a.b,a.a);if(l.equals(c))return;let u=o.clone();return{update:h=>{e.getValue(r)!==u&&e.setValue(r,u),u.lerpColors(l,c,h)},start:()=>{u.copy(l)},end:()=>{u.copy(c)}}}function Aet(e,t,i,r="steps"){if(!e.hasValue(r)||!(r in i))return;let n=[],s=e.getValue(r),a=t?t[r]:s,o=i[r];return jk(a,o)||n.push({update:l=>{let c=[...s];for(let u=0;u<s.length;++u){let h=a[u],f=o[u];c[u]=wt.lerp(h,f,l)}e.setValue(r,c)},start:()=>{e.setValue(r,a)},end:()=>{e.setValue(r,o)}}),n.length?n:void 0}function Tet(e,t,i,r="colors"){if(!e.hasValue(r)||!(r in i))return;let n=[],s=e.getValue(r),a=t?t[r]:s.map(l=>l.toArray()),o=i[r];for(let l=0;l<s.length;++l){let c=[...a[l]],u=[...o[l]];uT.isEqual(c,u)||n.push({update:h=>{s[l].fromArray(uT.lerp(c,u,h))},start:()=>{s[l].fromArray(c)},end:()=>{s[l].fromArray(u)}})}return n.length?n:void 0}function Cet(e,t,i,r="texture"){var x,b;if(!e.hasValue(r)||!(r in i))return;let n=e.getNode("rotation"),s=((x=t==null?void 0:t[r])==null?void 0:x.rotation)??0,a=((b=i[r])==null?void 0:b.rotation)??0;if(n&&s!==a)return{update:S=>{n.value=wt.lerp(s,a,S)*wt.DEG2RAD},start:()=>{n.value=s*wt.DEG2RAD},end:()=>{n.value=a*wt.DEG2RAD}};let o=e.getNode("mat");if(!o)return;let l=t?t[r]:o,c=i[r],u=[...l.repeat],h=[...l.offset],f=[...c.repeat],m=[...c.offset],g=l.rotation??0,v=c.rotation??0;if(!Oh.isEqual(u,f)||!Oh.isEqual(h,m)||g!==v)return{update:S=>{o.repeat=Oh.lerp(u,f,S),o.offset=Oh.lerp(h,m,S),o.rotation=wt.lerp(g,v,S),o.updateMatrix()},start:()=>{o.repeat=[...u],o.offset=[...h],o.rotation=g,o.updateMatrix()},end:()=>{o.repeat=[...f],o.offset=[...m],o.rotation=v,o.updateMatrix()}}}function Met(e,t){return{update:()=>{e.transparent=t}}}var vD=new j,uX=new as;function Pet(e,t,i,r,n){var g,v,x,b,S,_;let s=[],a,o,l,c,u,h,f,m;if(e instanceof Os?(a=NT("position",e,t,i,n),a&&s.push(a),l=Ys("rotation",e,t,i,n),l&&s.push(l),c=NT("shear",e,t,i,n),c&&s.push(c)):(m={slide:((g=t.pathSnapping)==null?void 0:g.slide)??((v=e.updatedPathSnapping)==null?void 0:v.slide)??((x=e.dataPatched.pathSnapping)==null?void 0:x.slide)??0,offset:((b=t.pathSnapping)==null?void 0:b.offset)??((S=e.updatedPathSnapping)==null?void 0:S.offset)??((_=e.dataPatched.pathSnapping)==null?void 0:_.offset)??0},h=Ys("slide",m,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,i.pathSnapping??e.dataPatched.pathSnapping,n),h&&s.push(h),f=Ys("offset",m,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,i.pathSnapping??e.dataPatched.pathSnapping,n),f&&s.push(f),!h&&!f&&(a=oX("position",e,t,i,n),a&&s.push(a),o=oX("scale",e,t,i,n),o&&s.push(o),l=Det(e,t,i,r,n),l&&s.push(l),u=het("hiddenMatrix",e,t,i),u&&s.push(u))),a||o||l||u||h||f){let A=e instanceof Os?()=>{e.updateWorldMatrix(!0,!1,!0),e.resetBBoxNeedsUpdate()}:()=>{var M;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(M=e.parent)!=null&&M.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),Yl(e)&&Lh(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,m))};s.push({update:A,start:A,end:A})}return s}function Det(e,t,i,r,n){var u;let s=t!=null&&t.rotation?t.rotation.map(h=>(typeof h=="string"?Number(n.getVariable(h)??0):h)*wt.DEG2RAD):void 0,a=(u=i.rotation)==null?void 0:u.map(h=>(typeof h=="string"?Number(n.getVariable(h)??0):h)*wt.DEG2RAD);if(!a)return;let o=s?new j().fromArray(s):new j().setFromEuler(e.rotation),l=new j().fromArray(a);if(o.equals(l))return;let c=vD.subVectors(l,o);if(r&&c.toArray().every(h=>Math.abs(h)<2*Math.PI)){let h=new Jt().setFromEuler(uX.setFromVector3(o)),f=new Jt().setFromEuler(uX.setFromVector3(l));return{update:m=>{uet(h,f,e.quaternion,m)},start:()=>{e.rotation.setFromVector3(o)},end:()=>{e.rotation.setFromVector3(l)}}}else return{update:h=>{vD.lerpVectors(o,l,h),e.rotation.setFromVector3(vD)},start:()=>{e.rotation.setFromVector3(o)},end:()=>{e.rotation.setFromVector3(l)}}}function Iet(e,t,i,r){let n=[];if(!("cloner"in i)||!e.cloner)return n;let s=e.cloner,a="cloner"in t?t.cloner:{},o=i.cloner;Tre.forEach(m=>{let g;m==="count"?g=Ys("count",s.parameters,a,o,r,!0):g=Zf(m,s.parameters,a??{},o,r),g&&n.push(g)});let l=Ret(s,a,o,r);l!=null&&l.length&&n.push(...l);let c=Oet(s,a,o,r);c!=null&&c.length&&n.push(...c);let u=Let(s,a,o,r);u!=null&&u.length&&n.push(...u);let h=ket(s,a,o,r);h!=null&&h.length&&n.push(...h);let f=zet(s,a,o,r);return f!=null&&f.length&&n.push(...f),n.length&&n.push({update:()=>{s.update()}}),n}function Ret(e,t,i,r){if(e.parameters.type!=="radial")return;let n=t.radial,s=i.radial;if(!s)return;let a=e.parameters.radial,o=[];return Cre.forEach(l=>{let c=Zf(l,a,n??{},s,r);c&&o.push(c)}),o}function Oet(e,t,i,r){if(e.parameters.type!=="linear")return;let n=t.linear,s=i.linear;if(!s)return;let a=[],o=e.parameters.linear;return Mre.forEach(l=>{let c=Zf(l,o,n??{},s,r);c&&a.push(c)}),a}function Let(e,t,i,r){if(e.parameters.type!=="grid")return;let n=t.grid,s=i.grid;if(!s)return;let a=[],o=e.parameters.grid;return Pre.forEach(l=>{let c;l==="count"?c=Nz(l,o,n??{},s,r,!0):c=Zf(l,o,n??{},s,r),c&&a.push(c)}),a}function ket(e,t,i,r){if(e.parameters.type!=="toObject")return;let n=t.toObject,s=i.toObject;if(!s)return;let a=[],o=e.parameters.toObject;return Dre.forEach(l=>{let c;l==="count"?c=Ys(l,o,n??{},s,r,!0):c=Zf(l,o,n??{},s,r),c&&a.push(c)}),a}function zet(e,t,i,r){if(!e.parameters.randomness)return;let n=t.randomnessObject,s=i.randomnessObject;if(!s)return;let a=[],o=e.parameters.randomnessObject;return Ire.forEach(l=>{let c=Zf(l,o,n??{},s,r);c&&a.push(c)}),a}function Bet(e,t){return{update:()=>{e instanceof Ts&&(e.fill.enabled=t)}}}function jet(e,t){return{update:()=>{e instanceof Ts&&(e.stroke.enabled=t)}}}function Net(e,t){return{update:()=>{e instanceof Ts&&(e.dropShadow.enabled=t)}}}function Vet(e,t){return{update:()=>{e instanceof Ts&&(e.innerShadow.enabled=t)}}}function Uet(e,t){return{update:()=>{e instanceof Ts&&(e.backgroundBlur.enabled=t)}}}function Fet(e,t){return{update:()=>{e instanceof Ts&&(e.layerBlur.enabled=t)}}}function Het(e,t,i,r,n){let s=[],a,o,l,c,u,h,f,m,g,v,x,b,S,_,A;if("width"in e&&(a=Ys("width",e,t,i,n),a&&s.push(a)),"height"in e&&(o=Ys("height",e,t,i,n),o&&s.push(o)),e instanceof Ts||e instanceof Su){let M={...t.fill},C={...i.fill};M.enabled!==void 0&&M.enabled!==C.enabled&&(s.push(Bet(e,!0)),M.enabled||Object.assign(M,{enabled:!0,color:{...M.color,a:0}}),C.enabled||Object.assign(C,{enabled:!0,color:{...C.color,a:0}})),l=rE("color",e.fill,M,C,n),l&&s.push(l)}if(e instanceof Ts){let M={...t.stroke},C={...i.stroke};(M.enabled||C.enabled)&&(s.push(jet(e,!0)),M.enabled||Object.assign(M,{enabled:!0,color:{...M.color,a:0}}),C.enabled||Object.assign(C,{enabled:!0,color:{...C.color,a:0}})),c=rE("color",e.stroke,M,C,n),c&&s.push(c),u=Ys("thickness",e.stroke,M,C,n),u&&s.push(u)}if(e instanceof Ts){let M={...t.dropShadow},C={...i.dropShadow};(M.enabled||C.enabled)&&(s.push(Net(e,!0)),M.enabled||Object.assign(M,{enabled:!0,color:{...M.color,a:0}}),C.enabled||Object.assign(C,{enabled:!0,color:{...C.color,a:0}})),h=rE("color",e.dropShadow,M,C,n),h&&s.push(h),f=Ys("blurRadius",e.dropShadow,M,C,n),f&&s.push(f),g=Ys("spread",e.dropShadow,M,C,n),g&&s.push(g),m=NT("offset",e.dropShadow,M,C,n),m&&s.push(m)}if(e instanceof Ts){let M={...t.innerShadow},C={...i.innerShadow};(M.enabled||C.enabled)&&(s.push(Vet(e,!0)),M.enabled||Object.assign(M,{enabled:!0,color:{...M.color,a:0}}),C.enabled||Object.assign(C,{enabled:!0,color:{...C.color,a:0}})),v=rE("color",e.innerShadow,M,C,n),v&&s.push(v),x=Ys("blurRadius",e.innerShadow,M,C,n),x&&s.push(x),S=Ys("spread",e.innerShadow,M,C,n),S&&s.push(S),b=NT("offset",e.innerShadow,M,C,n),b&&s.push(b)}if(e instanceof Ts||e instanceof Su){let M={...t.backgroundBlur},C={...i.backgroundBlur};(M.enabled||C.enabled)&&(s.push(Uet(e,!0)),M.enabled||Object.assign(M,{enabled:!0,radius:0}),C.enabled||Object.assign(C,{enabled:!0,radius:0})),_=Ys("radius",e.backgroundBlur,M,C,n),_&&s.push(_)}if(e instanceof Ts){let M={...t.layerBlur},C={...i.layerBlur};(M.enabled||C.enabled)&&(s.push(Fet(e,!0)),M.enabled||Object.assign(M,{enabled:!0,radius:0}),C.enabled||Object.assign(C,{enabled:!0,radius:0})),A=Ys("radius",e.layerBlur,M,C,n),A&&s.push(A)}if(e instanceof Su||e instanceof Lw){let M=Nz("cornerRadius",e,t,i,n);M&&s.push(M)}return s}function hX(e,t,i,r,n){let s=[];return e.data.visible&&s.push(...Pet(e,t,i,n,r)),e instanceof Os?s.push(...Het(e,t,i,n,r)):(e.data.visible&&s.push(...Iet(e,t,i,r)),Yl(e)?(e instanceof Gn&&e.data.visible&&s.push(...get(e,t,i,r)),e.data.visible&&s.push(...yet(e,t,i,r))):TQe(e)?e.data.visible&&s.push(...vet(e,t,i,r)):AQe(e)&&s.push(...fet(e,t,i,r))),s.length?{update:a=>{s.forEach(o=>o.update(a))},start:a=>{s.forEach(o=>{var l;return(l=o.start)==null?void 0:l.call(o,a)})},end:a=>{s.forEach(o=>{var l;return(l=o.end)==null?void 0:l.call(o,a)})}}:void 0}var dX=new j;function Vz(e,t,i=!1){var s;let r=[],n=a=>{let o=a.data;delete a.states,a.currentState=null,a.reversibleToState=null,a.currentTransitionEvent=null;for(let l of o.states){let c={...l.data};a.states||(a.states={}),a.states[l.id]=im.patch(o,c)}pX(e.scene,a,null,t,o.events.find(l=>l.data.type==="Follow"||l.data.type==="LookAt")!==void 0),fX(e)};e.scene.traverse2D(n),e.traverseChildren(a=>{var u,h,f,m,g,v;if(i&&((u=a.rigidBody)==null||u.setTranslation(a.position0,!0),(h=a.rigidBody)==null||h.setRotation(a.rotation0,!0),(f=a.rigidBody)==null||f.setLinvel(dX,!0),(m=a.rigidBody)==null||m.setAngvel(dX,!0)),!zi.is(a))return;let o=a.uuid,l=a.data;if(delete a.states,a.uuid===py)return;let c=!1;r.some(x=>{var b;return(b=e.scene.find(o))==null?void 0:b.isDescendantOf(x)})?c=!0:((g=l.physics)==null?void 0:g.fusedBody)===!0&&l.physics.rigidBody==="dynamic"&&r.push(o),a.data=l,a.currentState=null,a.reversibleToState=null,a.currentTransitionEvent=null;for(let x of l.states){let b={...x.data};e.data.globalPhysics.usePhysics===!0&&l.physics&&(l.physics.rigidBody==="dynamic"||c)&&(x.data.position!==void 0&&delete b.position,x.data.rotation!==void 0&&delete b.rotation,x.data.hiddenMatrix!==void 0&&delete b.hiddenMatrix),a.states||(a.states={}),a.states[x.id]=Jp.patch(l,b)}pX(e.scene,a,null,t,l.events.find(x=>x.data.type==="Follow"||x.data.type==="LookAt")!==void 0),a instanceof xa&&a.frame&&(a.frame.traverse(x=>n(x)),(v=a.uiCanvas)==null||v.applySize())}),fX(e),e.frame&&(e.frame.traverse(a=>n(a)),(s=e.uiCanvas)==null||s.applySize())}function fX(e){e.traverseEntity(t=>{for(let i of t.data.events){let r=[];switch(i.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":r.push(...i.data.actions);break;case"GameControl":for(let n of Object.values(i.data.gameActions))r.push(...n);break;case"DragDrop":r.push(...i.data.dragDropActions.drag,...i.data.dragDropActions.drop);break;case"Conditional":r.push(...i.data.inActions,...i.data.outActions);break}for(let n of r)if(n.data.type==="Create"&&n.data.hideBase==="Yes"){let s=e.scene.find(n.data.object);s&&(s.visible=!1)}}})}function pX(e,t,i,r,n=!1){if(t instanceof Gn&&!(t instanceof km)&&t.removeInteractionGeometry(r),t instanceof Os?t.changeSelectedState(i,{shared:r},n):t.changeSelectedState(i,{scene:e,shared:r},n),t instanceof Gn&&t.updateGeometryGroupsIfNeeded(),t instanceof Ea&&t.updateCameraState(t.dataPatched,{scene:e,shared:r}),!(t instanceof Os)){if(t.cloner)for(let s of t.cloner.children)s.playModeVisible=void 0;t.updateVisible()}}function nae(e){let t;if(e.easing===5){let{control1:i,control2:r}=e;t=`cubicBezier(
			${i[0]}, ${i[1]}, ${r[0]}, ${r[1]}
		)`}else if(e.easing===6){let{mass:i,stiffness:r,damping:n,velocity:s}=e;t=`spring( ${i}, ${r}, ${n}, ${s} )`}else{let i;switch(e.easing){case 0:i=Wd.linear;break;case 1:i=Wd.ease;break;case 2:i=Wd.easeIn;break;case 3:i=Wd.easeOut;break;case 4:i=Wd.easeInOut;break;default:i=Wd.linear}let[r,n,s,a]=i;t=`cubicBezier( ${r}, ${n}, ${s}, ${a} )`}return{duration:Math.max(e.duration,1e-4),easing:t}}function e6(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,e.delayDirection==="start"?(t.pingPongDelayCorrection=t.delay,typeof t.loop=="number"&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):e.delayDirection==="end"?typeof t.loop=="number"&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):e.delayDirection==="start-end"&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var Get={type:"beginState"},Wet={type:"completeState",isfromEntity:!1},t6=class{constructor(e,t,i,r,n,s){if(this.object=e,this.data=r,this.sharedAssets=n,this.allowSlerp=s,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.requestRender()),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let a=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=a,this.object.dispatchEvent({type:"beginState",state:a}),this.object instanceof Os||this.object.traverseEntity(o=>{o!==this.object&&o instanceof Ea&&o.dispatchEvent(Get)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let a=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=a,this.object.dispatchEvent({type:"completeState",state:a}),this.object instanceof Os||this.object.traverseEntity(o=>{o!==this.object&&o instanceof Ea&&o.dispatchEvent(Wet)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=hX(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let a=JE(this.object,this.object.currentState===i?this.object.prevState:this.object.currentState);if(!a)throw new Error("Missing property");this.from=a}else{let a=JE(this.object,t);if(!a)throw new Error("Missing property");this.from=a}if(i===void 0)throw new Error("Missing property");{let a=JE(this.object,i);if(!a)throw new Error("Missing property");this.to=a}this.useCurrentState=t===void 0||i===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...e6(r),...nae(r),change:this.onChange},this.callback=hX(this.object,t===void 0?{}:this.from.data,i===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},sae=class extends la{constructor(e,t,i,r,n){var a;if(super(),this.eventType=e,this.data=t,this.page=i,this.shared=r,this.condition=n,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.hasPlayedOnce=!1,this.onTimelineChangeComplete=()=>{var o;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((o=this.timeline)==null||o.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let s=this.page.scene.find(t.object)??((a=this.page.uiCanvas)==null?void 0:a.find(t.object))??this.page.scene.find2DInUIObjects(t.object);if(!s)throw new Error("Missing property");if(!s.states)throw new Error("Missing property");if(this.object=s,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=t.tweens[0].data.delayDirection==="start-once"?t.tweens[0].data.delay:0,this.init()}get playing(){var e;return((e=this.timeline)==null?void 0:e.paused)===!1}get changeBegan(){return this.tweens.some(e=>e.changeBegan)??!1}init(){this.initialCurrentState=JE(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.data.runMode==="Toggle"&&fG(this.eventType)?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:t=!1,isRebuild:i=!1}={}){var r,n,s,a;try{let o=e6(this.data.tweens[0].data);i&&typeof o.loop=="number"&&o.loop--,(r=this.timeline)==null||r.pause(),this.timeline=jz.timeline({autoplay:!1,...o,...o.loop===!0||o.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(c=>c==null?void 0:c.changeBegan);if(t===!0&&(this.timelineNeedsRebuild=!0),e){let c=l===-1?0:l;for(let u=c;u<this.data.tweens.length-1;u++){let h=this.data.tweens[u],f=this.data.tweens[u+1],m;u===c&&(this.object.wasMovedByUser===!0||((n=this.object.previousAction)==null?void 0:n.changeBegan)===!0)?(m=void 0,this.object instanceof Ea&&(this.object.wasMovedByUser=!1)):m=h.data.state===void 0?this.currentState:h.data.state;let g=new t6(this.object,m,f.data.state===void 0?this.currentState:f.data.state,f.data,this.shared,this.data.allowSlerp??!1);l!==-1&&u===c&&Object.assign(g.params,{startOnceDelay:0}),this.tweens[u]=g,this.timeline.add(g.params,this.timeline.duration+(u===c?o.delay:0))}this.timeline.duration+=o.endDelay}else{let c=l===-1?this.data.tweens.length-1:l+1;for(let u=c;u>0;u--){let h=this.data.tweens[u],f=this.data.tweens[u-1],m;u===c&&(this.object.wasMovedByUser===!0||((s=this.object.previousAction)==null?void 0:s.changeBegan)===!0)?(m=void 0,this.object instanceof Ea&&(this.object.wasMovedByUser=!1)):m=h.data.state===void 0?this.currentState:h.data.state;let g=new t6(this.object,m,f.data.state===void 0?this.currentState:f.data.state,h.data,this.shared,this.data.allowSlerp??!1);l!==-1&&u===c&&Object.assign(g.params,{startOnceDelay:0}),this.tweens[u-1]=g,this.timeline.add(g.params,this.timeline.duration+(u===c?o.endDelay:0))}this.timeline.duration+=o.delay}}catch(o){o instanceof Error&&console.error(o.message)}((a=this.object.previousAction)==null?void 0:a.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(Vr(this.shared,this.condition)===!1||fG(this.eventType)&&this.data.runMode==="Once"&&this.hasPlayedOnce||(this.hasPlayedOnce=!0,this.playing))return!1;clearTimeout(this.timeoutId);let e=e6(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}},this.startOnceDelay+e)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object instanceof Os?this.object.changeSelectedState(e,{shared:this.shared}):this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var t;if(Vr(this.shared,this.condition)===!1)return!1;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration,!0)}toggle(e){var t;if(Vr(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var i;(i=this.timeline)==null||i.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function JE(e,t){var n;let i,r;if(typeof t=="string"?(i=t,r=(n=e.states)==null?void 0:n[i]):t===null&&(i=null,r=e.data),!(i===void 0||r===void 0))return{id:i,data:r}}var qet={type:"beginState"},mX={type:"completeState",isfromEntity:!1},gX={type:"requestRender"},aae=class extends la{constructor(e,t,i,r){super(),this.data=e,this.page=t,this.shared=i,this.condition=r,this.toggleIsForward=!1,this.posStart=new j,this.posEnd=new j,this.qStart=new Jt,this.qEnd=new Jt,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let i={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=jz({targets:i,t:1,...nae(this.data),update:()=>{i.t===0&&(this.data.runMode==="Toggle"&&!this.toggleIsForward?this.fromCamera&&(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)),this.page.activeCamera.dispatchEvent(qet));let r=this.page.activeCamera;r.position.lerpVectors(this.posStart,this.posEnd,i.t),r.quaternion.slerpQuaternions(this.qStart,this.qEnd,i.t),r.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*i.t,r.wasMovedBySwitchCameraAction=!0,r.updateMatrix(),r.updateMatrixWorld(),r.updateProjectionMatrix(),r.dispatchEvent(gX),i.t===1&&r.dispatchEvent(mX)}})}switchCamera(e){let t=this.page.activeCamera,i=this.page.scene.find(e);if(!i||!i.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(i),t.dispatchEvent({type:"cameraChange",camera:i})}play(){if(Vr(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var t,i;if(Vr(this.shared,this.condition)===!1)return!1;if(window.clearTimeout(this.timeoutId),delete this.timeoutId,e!==this.toggleIsForward)try{this.playing?((t=this.animation)==null||t.pause(),this.toggleIsForward=e??!this.toggleIsForward,this.buildAnimation(!0),(i=this.animation)==null||i.play()):this.timeoutId=window.setTimeout(()=>{var r,n;this.toggleIsForward=e??!this.toggleIsForward,this.data.animate?((r=this.animation)==null||r.pause(),this.buildAnimation(),(n=this.animation)==null||n.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.fromCamera&&this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(mX),this.page.activeCamera.dispatchEvent(gX))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}};function oae(e){let t=e==null?void 0:e.tracks.filter(i=>i.ValueTypeName==="vector"||i.ValueTypeName==="quaternion").map(i=>i.times.length);if(t!=null&&t.length){let i=v9e(t);return i&&i>2?i:2}return 2}var lae=class extends la{constructor(e,t,i,r,n){var l,c,u;super(),this.data=e,this.page=t,this.animationControls=i,this.shared=r,this.condition=n,this.startOnceDelay=0,this.toggleIsForward=!1;let s=e.object,a=t.scene.find(e.object);a&&Array.isArray(a.identity)&&(s=a.identity[0]),this.data={...e,object:s};let o=this.animationControls.clipIdToAction[e.clipId+"/"+s];if(this.duration=((l=o==null?void 0:o.getClip())==null?void 0:l.duration)??1,this.data.crop2){let h=oae(o==null?void 0:o.getClip());this.leftFrameTime=this.data.crop2[0]/(h-1)*this.duration,this.rightFrameTime=this.data.crop2[1]/(h-1)*this.duration}else{let h=(u=(c=o==null?void 0:o.getClip())==null?void 0:c.tracks[0])==null?void 0:u.times.length;h&&h>1?(this.leftFrameTime=this.data.crop[0]/h*this.duration,this.rightFrameTime=this.data.crop[1]/h*this.duration):(this.leftFrameTime=0,this.rightFrameTime=this.duration)}this.startOnceDelay=e.delay}get playing(){var e;return((e=this.threeAnimAction)==null?void 0:e.isRunning())??!1}play(e=!1){if(Vr(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var i;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let t=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([r,n])=>{let s=r.split("/")[1];this.threeAnimAction!==n&&s===t&&n.isRunning()&&(e?n.fadeOut(.2):n.stop())}),e&&((i=this.threeAnimAction)==null||i.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=wt.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){if(Vr(this.shared,this.condition)===!1)return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var i;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let r=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([n,s])=>{let a=n.split("/")[1];this.threeAnimAction!==s&&a===r&&s.isRunning()&&(t?s.fadeOut(.2):s.stop())}),t&&((i=this.threeAnimAction)==null||i.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var t;let e=(t=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:t.getClip();e&&(e.duration=this.duration),this.pause()}},cae=class{constructor(e,t,i,r,n){this.data=e,this.page=t,this.eventManager=i,this.shared=r,this.condition=n,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(Vr(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target||t.data.uiScene))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.traverseVisibleEntity(t=>{t.type==="ParticleSystem"&&(t.sleep(),t.wakeUp(),t.data.autoPlay?t.start():t.stop())}),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),Vz(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},uae=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=Vr(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let e=this.shared.getVariable(this.data.variableId),t=dne(this.data.expression,this.shared,ta.typeOfVariable(e));t!==void 0&&this.shared.updateVariable(this.data.variableId,typeof t=="string"?{textValue:t}:t)}dispose(){}},hae=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r,this.timeoutId=null}dispatchInner(){if(Vr(this.shared,this.condition)===!1)return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if(this.data.mode==="PlayPause")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,e==="Playing"?"Paused":"Playing");else if(this.data.mode==="Play"&&e!=="Playing")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if(this.data.mode==="Stop"&&e!=="Stopped")this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if(this.data.mode==="Pause"&&e!=="Paused")this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if(this.data.mode==="Restart")this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if(this.data.mode==="Toggle"){let t=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);e==="Playing"?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,t===void 0?!1:!t):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!t),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,t=this.shared.getDynamicVariablePlayState(this.data.variableId);this.data.mode==="PlayPause"&&t==="Playing"&&(e=this.data.pauseDelay),e!==0?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},Xet=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r}dispatch(){if(Vr(this.shared,this.condition)===!1)return!1;(this.data.target==="single"?this.data.variableId?[this.data.variableId]:[]:Object.keys(this.shared.getVariables())).forEach(e=>{var i;this.shared.getVariable(e);let t=(i=this.shared.data.variables.data(e))==null?void 0:i.value;t!==void 0&&this.shared.updateVariable(e,t),this.shared.enableLocalStorageForPersistentVariables&&localStorage.removeItem(RO(e))})}dispose(){}},Yet=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r}dispatch(){var e;if(Vr(this.shared,this.condition)===!1)return!1;this.data.userAPIId&&((e=this.shared.getUserAPI(this.data.userAPIId))==null||e.callUserAPI(this.shared))}dispose(){}};function Vr(e,t){if(t===void 0)return!0;if(t.expression.length===0)return!1;let i=dne(t.expression,e,"boolean");return t.negate?!i:!!i}function Xn(e,t,i,r,n,s){let a={Audio:[],Video:[],Particles:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[],ClearLocalStorage:[],UserAPI:[]},o=l=>({id:c,data:u})=>{try{u.type==="Audio"?pa[e.type].includes("Audio")&&a.Audio.push(new jse(c,u,s,r,l)):u.type==="Video"&&!(s instanceof Os)?pa[e.type].includes("Video")&&a.Video.push(new fae(c,u,s,r,l)):u.type==="Particles"?pa[e.type].includes("Particles")&&a.Particles.push(new Nse(u,i,r,l)):u.type==="Link"?pa[e.type].includes("Link")&&a.Link.push(new RJe(u,n.controlsManager,r,l)):u.type==="Create"?pa[e.type].includes("Create")&&a.Create.push(new pae(u,i,n.controlsManager,r,l)):u.type==="Destroy"?pa[e.type].includes("Destroy")&&a.Destroy.push(new Vse(u,i,n.controlsManager,r,l)):u.type==="Reset"?pa[e.type].includes("Reset")&&a.Reset.push(new Use(u,i,r,n,l)):u.type==="Transition"?pa[e.type].includes("Transition")&&a.Transition.push(new sae(e.type,u,i,r,l)):u.type==="SwitchCamera"?pa[e.type].includes("SwitchCamera")&&a.SwitchCamera.push(new aae(u,i,r,l)):u.type==="SceneTransition"?pa[e.type].includes("SceneTransition")&&a.SceneTransition.push(new cae(u,i,n,r,l)):u.type==="Animation"?pa[e.type].includes("Animation")&&a.Animation.push(new lae(u,i,n.animationControls,r,l)):u.type==="SetVariable"?pa[e.type].includes("SetVariable")&&a.SetVariable.push(new uae(u,i,r,l)):u.type==="DynamicVariablePlay"?pa[e.type].includes("DynamicVariablePlay")&&a.DynamicVariablePlay.push(new hae(u,i,r,l)):u.type==="Conditional"?pa[e.type].includes("Conditional")&&(u.ifActions.forEach(o({expression:u.condition,negate:!1})),u.elseActions.forEach(o({expression:u.condition,negate:!0}))):u.type==="ClearLocalStorage"?pa[e.type].includes("ClearLocalStorage")&&a.ClearLocalStorage.push(new Xet(u,i,r,l)):u.type==="UserAPI"&&pa[e.type].includes("UserAPI")&&a.UserAPI.push(new Yet(u,i,r,l))}catch{}};return t.forEach(o()),a}function Is(e){Object.values(e).forEach(t=>{t.forEach(i=>{(i instanceof jse||i instanceof fae||i instanceof Nse||i instanceof lae||i instanceof sae||i instanceof pae||i instanceof Vse||i instanceof aae||i instanceof cae||i instanceof Use||i instanceof uae||i instanceof hae)&&i.dispose()})})}function Qet(e,t){let i;if("material"in e){let r=e.material;Array.isArray(r)?i=e.material[0].layers.find(n=>n.uuid===t):i=e.material.layers.find(n=>n.uuid===t)}if(i)return i.color.texture.image.img instanceof HTMLVideoElement?i.color.texture.image.img:void 0}var dae=new Map,Jx=new Map,cv=class{constructor(e,t,i){this.data=t,this.delay=0,this.status="stopped";let{layerId:r,loop:n,volume:s,delay:a}=t;if(this.object=i,r===void 0)throw new Error("Missing property");let o=Qet(i,r);o&&(this.videoElement=o,this.videoElement.loop=n===1/0,Cw&&(this.videoElement.autoplay=!0),s!==void 0&&(this.videoElement.volume=s)),a!==void 0&&(this.delay=a),Jx.has(i.uuid)?Jx.get(i.uuid).push(this):Jx.set(i.uuid,[this]),dae.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let i=this.videoElement.play();i!==void 0&&i.then(r=>{}).catch(r=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},i6=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=dae.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=Jx.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(i=>i[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(i=>i[this.data.interaction]()))}pauseAllVideos(){let e=[...Jx.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(i=>{i[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(i=>{i[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},fae=class{constructor(e,t,i,r,n){if(this.data=t,this.shared=r,this.condition=n,t.interaction==="play")this.interaction=new cv(e,t,i);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new i6(t);else throw new Error("Missing property")}dispatchBasic(){if(Vr(this.shared,this.condition)===!1)return!1;this.interaction instanceof cv?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Vr(this.shared,this.condition)===!1)return!1;this.interaction instanceof cv?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},vX=(()=>{let e,t,i,r;function n(o){!e&&!yX()&&(t==null?void 0:t.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(s)),o&&(t=o,r=o.requestRender)}function s(o){let l=i?o-i:0,c=t.sharedGameControlGlobals.createdObjects,u=t.sharedGameControlGlobals.nCreatedPerAction,h=c.length,f=0;for(;f<h;){let m=c[f];m.userData.createdTime===void 0&&(m.userData.createdTime=o),m.userData.lifetime===void 0&&m.userData.quantity===void 0||m.userData.lifetime&&o-m.userData.createdTime<m.userData.lifetime||m.userData.quantity&&u[m.userData.actionId]<=m.userData.quantity?(m.userData.velocity&&(m.position.addScaledVector(m.userData.velocity,l/1e3),m.updateMatrix(),r()),f++):(u[m.userData.actionId]>m.userData.quantity&&u[m.userData.actionId]--,c.splice(f,1),m.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&m.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(m.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(m.rigidBody)):(m.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(g=>g.bvhGeometry!==void 0)),h--,r())}e=f>0?requestAnimationFrame(s):void 0,i=f>0?o:void 0}function a(){yX()?e&&(cancelAnimationFrame(e),e=void 0,i=void 0):n()}return typeof document<"u"&&document.addEventListener("visibilitychange",a),n})();function yX(){return!!document&&document.hidden}var xX=new Jt,Ket=new j,Zet=new j,pae=class{constructor(e,t,i,r,n){this.data=e,this.page=t,this.controlsManager=i,this.shared=r,this.condition=n,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=wt.generateUUID(),this.dispatch=()=>{if(Vr(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(Vr(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=k9e(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let a=new ia(this.object);if(a.playModeVisible=!0,a.expand(),this.data.coordinateSystem!=="world"){let l=this.data.coordinateSystem,c=this.page.scene.find(l);c&&(c.updateMatrixWorldSVD(),a.hiddenMatrix.copy(c.matrixWorldRigid))}a.scale.copy(this.object.scale),a.position.fromArray(this.data.position),a.rotation.fromArray(this.data.rotation),a.updateMatrix(),this.page.add(a);let o=this.controlsManager.sharedGameControlGlobals;o.createdObjects.push(a),o.nCreatedPerAction[this.uniqueId]===void 0?o.nCreatedPerAction[this.uniqueId]=1:o.nCreatedPerAction[this.uniqueId]++,a.updateWorldMatrix(!0,!0),a.traverseObject(this.traverseObjectCB),vX(),this.controlsManager.requestRender()},this.traverseObjectCB=a=>{var u,h,f,m;a.hasNonUniformScale&&a.updateMatrixWorldSVD();let o;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(a instanceof vl)if(a.objectForSample){if(a.objectForSample.dataPatched.physics.fusedBody)return;o=a.object}else return a.object.dataPatched.physics.fusedBody===!0&&a.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(a instanceof ia)o=a.object;else if(o=a,(u=o.dataPatched.cloner)==null?void 0:u.hideBase)return!0}else{if(a instanceof vl)return;a instanceof ia?o=a.object:o=a}this.data.destroy==="Time"?a.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(a.userData.quantity=this.data.destroyAfterQuantity,a.userData.actionId=this.uniqueId);let l=new j().fromArray(this.data.velocity),c=o.dataPatched;if(!(c.physics.enabled==="visibility"?!c.visible:!c.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(a,o,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((h=a.rigidBody)==null||h.collider(0).setActiveEvents(1),a.userData.hasCollisionDestroy=!0),a.matrixWorld.decompose(Ket,xX,Zet),l.applyQuaternion(xX),this.data.velocity.some(g=>g!==0)&&this.data.dynamic&&((f=a.rigidBody)==null||f.setLinvel(l.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in a.object&&this.controlsManager.addBoundsTree(a),this.data.velocity.some(g=>g!==0)&&this.data.dynamic&&(a.userData.velocity=l)),((m=o.dataPatched.physics)==null?void 0:m.fusedBody)===!0))return!0};let s=this.page.scene.find(this.data.object);if(!s)throw new Error("Missing Property");if(this.object=s,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");vX(i)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},mae=200,yD=.02,xD=.3,$et=65;new j;var bX=new j,wX=new j,Jet=new j,Ba=new j,io=new j,jd=new j,bD=new tt,SX=new tt,ett=new tt;new tt;var Fl=new Jt,hh=new Jt,Uc=new as(0,0,0,"YXZ"),ttt=new j(1,0,0),Hl=new j(0,1,0),itt=new j(0,0,1),_X=new j(1,1,1);new yo;var rtt=1,ntt=.025,stt=16e-6,EX=12,att=20,bs=new bl,al=new Pn,ott={type:"requestRender"},ltt={type:"updateMatrix"},AX=Math.PI/6,r6=class extends la{constructor(e,t,i,r,n,s,a,o,l){var g;super(),this.object=e,this.domElement=t,this.data=i,this.gloabalPhysics=r,this.controlsManager=n,this.cameraFollow=s,this.camera=a,this.page=o,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new tt,this.target0=new j,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=mae,this.euler0=new as(0,0,0,"YXZ"),this.position0Cam=new j,this.quat0Cam=new Jt,this.scale0Cam=new j,this.hiddenMatrix0Cam=new tt,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new bl(new j(0,-40,0),new j(0,40,0)),matrix:new tt,position:new j,rotation:new Jt},this.euler=new as(0,0,0,"YXZ"),this.eulerDelta=new j,this.lastPosition=new j,this.lastCameraQuaternion=new Jt,this.lastCameraPosition=new j,this.PI_2=Math.PI/2,this.prevMouse=new pe,this.velocityTarget=new j,this.velocity=new j,this.directionXZ=new j,this.rotVelocityStick=new j,this.rotVelocityTarget=new j,this.rotVelocity=new j,this.rotDirection=new j,this.nonColliderRotOffset=new tt,this.nonColliderPosOffset=new tt,this.firstPointerId=-1,this.rot=new j,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new tt,this.objectToTarget=new j,this.objectToTarget0=new j,this.objectToCamXZ=new j,this.objectToCamXZ0=new j,this.targetToCamera=new j,this.targetToCamera0=new j,this.cameraPolarAxis0=new j,this.targetPos=new j,this.targetQuat=new Jt,this.lerpFactorPos=new j().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Jt,this.objXZQuatInv=new Jt,this.objXZRotMat=new tt,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new j,this.pushedVelocity=new j,this.groundYRotation=0,this.objectRealQuat=new Jt,this.colliderWorldQuat=new Jt,this.groundNormal=new j,this.groundTilt=new Jt,this.groundTiltInv=new Jt,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new j,this.quaternion=new Jt,this.scale=new j,this.initialAction=!0,this.onPointerDown=v=>{var x;!(v.target===this.domElement||v.target instanceof HTMLElement&&v.target.tagName==="SPLINE-VIEWER"&&((x=v.target.shadowRoot)!=null&&x.contains(this.domElement)))||this.firstPointerId!==-1||(this.firstPointerId=v.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!jo&&!$H&&this.domElement.requestPointerLock(),this.prevMouse.set(v.clientX,v.clientY))},this.onPointerUp=v=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),v.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=v=>{if(v.pointerId!==this.firstPointerId)return;let x=v.clientX-this.prevMouse.x,b=v.clientY-this.prevMouse.y;this.prevMouse.set(v.clientX,v.clientY),v.pointerType==="mouse"&&this.rotBy!=="keys"&&($H&&W9e<15.5&&!jo?(this.eulerDelta.y=-x*this.mouseOrbitSensitivity,this.eulerDelta.x=-b*this.mouseOrbitSensitivity):(this.eulerDelta.y=-v.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-v.movementY*this.mouseOrbitSensitivity)),v.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-x*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-b*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=v=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?r6.isLocked=!0:r6.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let v in this.movementState)this.movementState[v]=0},this.onKeyDown=v=>{!(v.target instanceof HTMLInputElement)&&(v.code==="ArrowLeft"||v.code==="ArrowUp"||v.code==="ArrowRight"||v.code==="ArrowDown"||v.code==="Space")&&v.preventDefault();for(let x of this.keyAssignments)if(v.key.toUpperCase()===x[1]||v.key===x[1]){this.movementState[x[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=v=>{for(let x of this.keyAssignments)if(v.key.toUpperCase()===x[1]||v.key===x[1]||v.code.slice(3,v.code.length).toUpperCase()===x[1]){this.movementState[x[0]]=0;break}},this.copyVRGamePadValues=(v,x)=>{for(let b=2;b<4;b++){let S=v.axes[b];x===0?b===2?this.movementState.movePosX=S:this.movementState.movePosZ=S:(v.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,b===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(S)>=.3&&(this.vrEulerYOffset+=S<0?1:-1),this.movementState.rotPosY=S):this.moveMode==="fly"&&(this.movementState.moveNegY=S))}},this.sharedGameControlGlobals=n.sharedGameControlGlobals,e===a&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let c=this.euler0.clone(),u=c.y;if(this.objectRealQuat.copy(this.quaternion),c.y=0,this.quaternion.setFromEuler(c),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),c.set(0,u,0),this.quaternion.setFromEuler(c),this.rot.setFromEuler(c),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((g=this.camera)==null?void 0:g.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let v=new j(0,0,-1).applyQuaternion(this.camera.quaternion),x=new j().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(x),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let b,S;Math.abs(v.y)<1e-6?(x.y=0,v.y=0,S=x.projectOnVector(v)):x.y/v.y>0?S=v.multiplyScalar(x.y/v.y):S=v.multiplyScalar(x.length()),this.targetToCamera0.copy(S).negate(),b=this.camera.position.clone().add(S),this.objectToTarget0.subVectors(b,this.position);let _=new as().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-_.x,_.x=0,_.z=0,_.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(_)}if(this.object instanceof Ea&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=i.rotByTouch??"joystick",this.rotBy=i.rotBy??"keys",this.rotationMode=i.rotationMode??"normal",this.moveMode=i.moveMode??"walk",this.collisionEnabled=i.collisionEnabled,this.speedTranslate=(i.speedTranslate??250)*rtt,this.speedOrbit=(i.speedRotate??100)*ntt,this.mouseOrbitSensitivity=(i.speedRotate??100)*stt,this.keyAssignments=i.keyAssignments.map(v=>{let x=[v[0],v[1]];return x[1]==="▲"?x[1]="ArrowUp":x[1]==="◀"?x[1]="ArrowLeft":x[1]==="▼"?x[1]="ArrowDown":x[1]==="▶"?x[1]="ArrowRight":x[1]==="⇧"?x[1]="Shift":x[1]==="↵"?x[1]="Enter":x[1]==="Space"?x[1]=" ":x[1]==="⌘"?x[1]="Meta":x[1]==="Ctrl"?x[1]="Control":x[1]==="Esc"&&(x[1]="Escape"),x}),i.rotBy==="mouse"){let v;v=this.keyAssignments.findIndex(x=>x[0]==="rotNegX"),v!==-1&&(this.keyAssignments[v][1]=""),v=this.keyAssignments.findIndex(x=>x[0]==="rotPosX"),v!==-1&&(this.keyAssignments[v][1]=""),v=this.keyAssignments.findIndex(x=>x[0]==="rotPosY"),v!==-1&&(this.keyAssignments[v][1]=""),v=this.keyAssignments.findIndex(x=>x[0]==="rotNegY"),v!==-1&&(this.keyAssignments[v][1]="")}this.lerpFactorPosStart=1-.02**(1/((i.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((i.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((i.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((i.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((i.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((i.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??kv.defaultData.gravity)*EX,this.usePhysics=this.gloabalPhysics.usePhysics??kv.defaultData.usePhysics,this.jumpPower=i.jumpPower*att,this.resetYPosition=this.position.y+Math.abs(i.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=i.alignToGround??!1,this.orientMode=i.autoOrientMove?i.orientMode:"none",this.orientWith=i.orientWith??bT.defaultDataThirdPerson.orientWith,this.slopeThresh=$et*Math.PI/180,i.collider.type==="capsule"?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=i.collider.height/2-i.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=i.collider.height*yD/this.pixelsPerMeter,this.stepThresh=i.collider.height*xD/this.pixelsPerMeter,this.colliderHeight=i.collider.height):i.collider.type==="sphere"?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*i.collider.radius*yD/this.pixelsPerMeter,this.stepThresh=2*i.collider.radius*xD/this.pixelsPerMeter,this.colliderHeight=i.collider.radius*2):(this.offset=i.collider.height*yD/this.pixelsPerMeter,this.stepThresh=i.collider.height*xD/this.pixelsPerMeter,this.colliderHeight=i.collider.height),this.collider.type=i.collider.type;let h=new j().fromArray(i.collider.position),f=new Jt().setFromEuler(new as().fromArray([...i.collider.rotation,"XYZ"]));this.collider.position.copy(h).multiply(this.scale),this.collider.rotation.copy(f),this.collider.matrix.compose(h,f,_X),i.cameraXAxis!==void 0&&(this.cameraXAxis=i.cameraXAxis,this.cameraYAxis=i.cameraYAxis,this.minPolarAngle=i.cameraRotXLimits[0],this.maxPolarAngle=i.cameraRotXLimits[1],this.minAzimuthAngleRel=i.cameraRotYLimits[0],this.maxAzimuthAngleRel=i.cameraRotYLimits[1]),this.forwardDir=i.forwardDirection??"-z",this.isFirstPerson&&(this.forwardDir="-z"),this.runMultiplier=i.runMultiplier??2;let m=i.navmesh.destinationHelperRadius*2;if(m>0){let v=new Lt;v.push({fi:0,data:{..._s.defaultData("light","phong"),alpha:0},id:"layer1"}),v.push({fi:0,data:{..._s.defaultData("color"),color:i.navmesh.destinationHelperColor,alpha:i.navmesh.destinationHelperColor.a},id:"layer2"});let x=new uz({layers:v},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new kr(Gre.create({parameters:{width:m,height:m/10,hollow:.7}}),x),this.navMeshPathDest.material.userData.opacity0=i.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=new as().setFromQuaternion(this.quaternion,"YXZ"),i=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,i,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof Ea?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;e.gameActions!==void 0&&(this.actions={},xT.list.forEach(i=>{this.actions[i]=Xn({...e,disabled:!1,type:"GameControl"},e.gameActions[i],this.page,t,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),Is(this.actions.idle),Is(this.actions.move),Is(this.actions.run),Is(this.actions.jump)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(t=>{t.play()}),this.actions[e].Animation.forEach(t=>{t.play(this.initialAction===!1)}),this.actions[e].Create.forEach(t=>{t.dispatchStart()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("start")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(t=>{t.stop(),t.object.currentState!==null&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(t=>{t.dispatchStop()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("stop")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Ba.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,i){var o,l,c,u,h,f,m,g,v;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let r=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let n=r*60,s=!1;if(this.usePhysics&&this.collisionEnabled){let x=io.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*EX),1)*(this.gravity>0?1:-1):this.velocity.y)*r,0).divideScalar(this.pixelsPerMeter),b=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,x,(o=this.object.rigidBody)==null?void 0:o.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(b){this.onObject=!0,this.groundNormal.set(b.normal2.x,b.normal2.y,b.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(s=!0),((l=b.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let S=b.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let _ of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(_.rigidBody===S&&_.userData.isFollowingObj!==this.object.uuid){(_.hasNonUniformScale?_.matrixWorldRigid:_.matrixWorld).decompose(Ba,hh,io),this.groundVelocity.subVectors(Ba,_.prevT),this.object.getWorldPosition(io).add(this.collider.position).sub(Ba),this.groundYRotation=Uc.setFromQuaternion(hh).y-_.prevR.y,jd.copy(io).applyAxisAngle(Hl,this.groundYRotation),this.groundVelocity.add(jd.sub(io)).divideScalar(r);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*n),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let x=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let b=Ba.subVectors(this.path[1],this.position),S=io.subVectors(this.path[1],this.path[0]);b.dot(S)<0?this.path.shift():(this.directionXZ.x=S.x,this.directionXZ.z=S.z),x.opacity=x.userData.opacity0}else x.opacity-=.05*x.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**n),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**n),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**n)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let a=Jet.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let x=io.copy(a);x.y=0,a.set(0,a.y,x.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none"&&this.isFirstPerson===!1)if(this.orientWith==="camera"&&this.path.length<=1){let x=Ba;this.camera.getWorldDirection(x);let b=jd.copy(Hl).multiplyScalar(x.dot(Hl));x.sub(b);let S=io.copy(this.directionXZ);S.x*=-1,this.rot.y=x.angleTo(S)*(x.cross(S).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(Uc.setFromVector3(this.rot),this.moveMode==="walk"&&(Uc.x=0),a.applyEuler(Uc),s&&(hh.setFromUnitVectors(Hl,this.groundNormal),a.applyQuaternion(hh)),i){let x=Uc.set(0,this.vrEulerYOffset*AX,0);i.applyEuler(x),a.x+=i.x,a.z+=i.z,this.nonColliderPosOffset.elements[13]+=i.y*r}if(this.usePhysics===!0){let x=io;this.pushedVelocity.set(0,0,0);for(let b of this.sharedGameControlGlobals.entitiesWithTransformAnim){let S=jd.setFromMatrixPosition(b.matrixWorld).sub(b.prevT).divideScalar(r).divideScalar(this.pixelsPerMeter),_=b.rigidBody.collider(0).castCollider(S,this.object.rigidBody.collider(0),Ba.copy(a).divideScalar(this.pixelsPerMeter),r,!1);S.multiplyScalar(this.pixelsPerMeter);let A=zi.is(b)?b:b.object;if(_!==null&&this.lastHitObj!==A){let M;b instanceof ia&&(M=b);let C=this.sharedGameControlGlobals.entityToCollisionEvents[A.uuid];if(C)for(let D of C)D.data.target==="character"&&(D.dispatch(M),A.dispatchEvent(s6));this.lastHitObj=A}if(_!==null){this.pushedVelocity.copy(S),x.copy(_.normal1).applyQuaternion(b.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let b=x.dot(a);b<0&&a.addScaledVector(x,-b),a.add(this.pushedVelocity)}else a.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(r),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**n):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**n),this.euler.x+=this.rotVelocity.x*r,this.euler.y+=this.rotVelocity.y*r+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*r),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(Hl,this.euler.y-this.euler0.y);let x=io.copy(this.objectToCamXZ).normalize(),b=jd.copy(a).multiplyScalar(r);b.y=0;let S=b.sub(Ba.copy(x).multiplyScalar(b.dot(x))).cross(x).y;this.euler.y-=Math.atan2(S,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*r+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=wt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=wt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=wt.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(Uc.copy(t),Uc.y=0):(Uc.copy(this.euler),Uc.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Uc)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*AX),Fl.setFromAxisAngle(ttt,this.rot.x),hh.setFromAxisAngle(Hl,this.rot.y),hh.multiply(Fl),Fl.setFromAxisAngle(itt,this.rot.z),hh.multiply(Fl),this.quaternion.copy(hh),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let x=io.copy(a).multiplyScalar(r/this.pixelsPerMeter),b=null;this.didHit=!1;let S=new j;for(let _=0;_<5;_++){let A=x.length(),M=jd.copy(x).normalize();if(b=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(S),this.colliderWorldQuat,M,(c=this.object.rigidBody)==null?void 0:c.collider(0).shape,A,!1,24,void 0,void 0,this.object.rigidBody),b!==null){this.didHit=!0;let C=this.sharedGameControlGlobals.colliderToEntity.get(b.collider.handle);if(C!==this.lastHitObj&&_===0){this.lastHitObj=C;let O=this.sharedGameControlGlobals.entityToCollisionEvents[C==null?void 0:C.uuid];if(O){for(let L of O)if(L.data.target==="character"){let k=((u=this.sharedGameControlGlobals.rapierWorld)==null?void 0:u.getCollider(b.collider.handle))._parent,B;if(C.cloner){for(let V of C.cloner.children)if(V.rigidBody===k){B=V;break}}L.dispatch(B),C.dispatchEvent(s6)}}}let D=bX.set(b.normal2.x,b.normal2.y,b.normal2.z).applyQuaternion(this.colliderWorldQuat),T=wX.copy(M).multiplyScalar(b.toi).dot(D),R=b.toi;if(R===0&&(this.position.y+=this.offset*this.pixelsPerMeter),T>this.offset&&(R=b.toi*(T-this.offset)/T,S.addScaledVector(M,R)),x.copy(M).multiplyScalar(A-R),Math.acos(-D.y)>this.slopeThresh){let O=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(S),L=jd.copy(b.witness2).applyQuaternion(this.colliderWorldQuat);L.y=0;let k=O.add(L);k.y+=this.stepThresh;let B=this.sharedGameControlGlobals.rapierWorld.castShape(k,this.colliderWorldQuat,x,(h=this.object.rigidBody)==null?void 0:h.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);B!==null&&B.toi===0&&(D.y=0,D.normalize())}x.addScaledVector(D,-x.dot(D))}else{_===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),S.add(x);break}}this.position.addScaledVector(S,this.pixelsPerMeter),(f=this.object.rigidBody)==null||f.setTranslation(Ba.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(m=this.object.rigidBody)==null||m.setRotation(Fl.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let x=this.onObject?1:5,b=a.multiplyScalar(r/x);for(let S=0;S<x;S++)this.position.add(b),this.collisionAdjustment(r/x)}else this.position.addScaledVector(a,r);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let x=this.objectToTarget.add(this.position),b=this.targetToCamera.add(x);bD.lookAt(b,x,Hl).setPosition(b),bD.decompose(this.targetPos,this.targetQuat,Ba),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**n),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**n),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=wt.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=wt.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(ltt),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*((v=(g=this.navMeshPathDest)==null?void 0:g.material)==null?void 0:v.userData.opacity0))?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(ott),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=Fl.setFromAxisAngle(Hl,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?wt.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=wt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=wt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let i=Ba.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&i.applyQuaternion(e);let r=hh.setFromAxisAngle(i,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(r)}groundTiltAdjustment(e){Hl.angleTo(e)*180/Math.PI<15||Hl.angleTo(e)*180/Math.PI>85?Fl.identity():Fl.setFromUnitVectors(Hl,e),this.groundTilt.slerp(Fl,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var n;let t=wX.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let i=bD.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Ba,Fl,io).compose(Ba,Fl,_X);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(s=>{if(s===this.object||s.isDescendantOf(this.object))return;al.makeEmpty(),s.updateMatrixWorldSVD();let a=s.matrixWorldRigid,o=SX.copy(a).invert(),l=ett.copy(SX).multiply(i);bs.copy(this.collider.segment),bs.start.applyMatrix4(l),bs.end.applyMatrix4(l);let c=bX.copy(this.position).applyMatrix4(o);al.expandByPoint(bs.start),al.expandByPoint(bs.end),al.min.addScalar(-this.collider.radius),al.max.addScalar(this.collider.radius),s.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(u){return u.distanceToPoint(bs.end)},intersectsBounds:u=>u.intersectsBox(al),intersectsTriangle:u=>{let h=Ba,f=io,m=u.closestPointToSegment(bs,h,f);if(m<this.collider.radius){let g=this.collider.radius-m,v=f.sub(h).normalize(),x=jd.copy(c);x.addScaledVector(v,g);let b=x.applyMatrix4(a).sub(this.position);t.add(b),bs.start.addScaledVector(v,g),bs.end.addScaledVector(v,g)}}})}),al.makeEmpty(),bs.copy(this.collider.segment),bs.start.applyMatrix4(i),bs.end.applyMatrix4(i),al.expandByPoint(bs.start),al.expandByPoint(bs.end),al.min.addScalar(-this.collider.radius),al.max.addScalar(this.collider.radius),(n=this.sharedGameControlGlobals.staticMeshBVH)==null||n.shapecast({traverseBoundsOrder(s){return s.distanceToPoint(bs.end)},intersectsBounds:s=>s.intersectsBox(al),intersectsTriangle:s=>{let a=Ba,o=io,l=s.closestPointToSegment(bs,a,o);if(l<this.collider.radius){let c=this.collider.radius-l,u=o.sub(a).normalize();this.alignToGround&&this.groundTiltAdjustment(u),t.addScaledVector(u,c),bs.start.addScaledVector(u,c),bs.end.addScaledVector(u,c)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let r=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(r),this.position.add(t)}pause(){this.firstPointerId=-1,this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.deactivate()}resume(){this.activate()}},gae=r6;gae.isLocked=!1;var ctt=Yf(wte());function vae(e){let t=e.elements,i=t[0]**2+t[1]**2+t[2]**2,r=t[4]**2+t[5]**2+t[6]**2,n=t[8]**2+t[9]**2+t[10]**2,s=t[0]**2+t[4]**2+t[8]**2,a=t[1]**2+t[5]**2+t[9]**2,o=t[2]**2+t[6]**2+t[10]**2,l=1e-8;return i<l||r<l||n<l||s<l||a<l||o<l}function Ah(e,t){let i=new Rt;if(t&&vae(t))return i.setAttribute("position",new yt([],3)),i.setIndex([]),i;if(!e.getAttribute("position"))return i.setAttribute("position",new yt([],3)),i.setIndex([]),i;let{positions:r,triIndices:n}=K3(e.getAttribute("position"),e.getIndex());return i.setAttribute("position",new yt(r,3)),i.setIndex(n),t&&i.applyMatrix4(t),i}var utt=new tt,htt=new tt,Fc=[[0,0,0],[0,0,0],[0,0,0]];function yae(e){let t=e.elements;Fc[0][0]=t[0],Fc[0][1]=t[4],Fc[0][2]=t[8],Fc[1][0]=t[1],Fc[1][1]=t[5],Fc[1][2]=t[9],Fc[2][0]=t[2],Fc[2][1]=t[6],Fc[2][2]=t[10];let{u:i,v:r}=(0,ctt.SVD)(Fc),n=utt.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),s=htt.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1);return n.multiply(s.transpose())}var dtt=class extends pie{constructor(){super(),this.layers.enable(3),this.layers.enable(8),this.layers.enable(9)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,i=[]){return e.forEach(r=>{r.visible&&this.intersectObject(r,t,i)}),i}createRaycastLineHelper(){let e=new Kf({color:65280,linewidth:10}),t=new j(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),i=new j(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),r=this.camera.far-this.camera.near,n=new j().addVectors(t,i.multiplyScalar(r)),s=new Rt;return s.setFromPoints([t,n]),new HA(s,e)}},xae=e=>e instanceof ov||e instanceof lv;function ftt(e,t){return e.distance-t.distance}function bae(e,t,i){if(!(!Eh(t)||!t.visible)){Yl(t)&&t.raycast(e,i);for(let r of t.children)bae(e,r,i)}}function eA(e,t,i,r=!1){if(!r&&!i.some(s=>VT(e,s)!==void 0))return[];let n=[];return t.children.forEach(s=>bae(e,s,n)),n.sort(ftt),n}function n6(e){let t=[];if(e.length){let i=e[0].object;Eh(i)&&t.push(i);let r=i.parent;for(;r;)xae(r)&&t.push(r),r=r.parent}return t}function Th(e,t,i,r){let n=e.frame;if(n){let s=t[0]*n.width,a=(1-t[1])*n.height;for(let o of i){let l=o===n.uuid?n:n.find(o);if(l!=null&&l.intersects(s,a))return r(l),!0}}return!1}function VT(e,t){if(Yl(t)){if(t.visible){let i=[];return t.raycast(e,i),i.length?i[0]:void 0}}else if(xae(t))return wae(e,t)}function wae(e,t){if(!(!Eh(t)||!t.visible)){if(Yl(t)){let i=[];if(t.raycast(e,i),i.length)return i[0]}for(let i of t.children){let r=wae(e,i);if(r)return r}}}function ptt(e,t,i){return{x:(e-(i.left+window.scrollX))/i.width*2-1,y:-((t-(i.top+window.scrollY))/i.height)*2+1}}function mtt(e,t,i){return{x:(e-(i.left+window.scrollX))/i.width,y:1-(t-(i.top+window.scrollY))/i.height}}var gtt=class{constructor(e,t,i,r,n,s,a,o){this.renderer=e,this.publish=t,this.scene=i,this.getCamera=r,this.sharedAssets=n,this.requestRender=s,this.isExport=a,this.frame=o,this.raycaster=new dtt,this._useWindowEvents=!1,this.pointerWorld={x:0,y:0},this.pointerScreen={x:0,y:0},this._useWindowEvents=t.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}get domRect(){return this._domRect}updateRaycaster(e){var r;let{pageX:t,pageY:i}=((r=e.touches)==null?void 0:r.length)>0?e.touches[0]:e;this.pointerWorld=ptt(t,i,this._domRect),this.pointerScreen=mtt(t,i,this._domRect),this.raycaster.setFromCamera(this.pointerWorld,this.getCamera())}},Ca=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},Uz=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],Sae=e=>{var t;return(t=Uz.find(([i,r])=>r===e))==null?void 0:t[0]},kw=e=>{var t;return(t=Uz.find(([i])=>i===e))==null?void 0:t[1]},vtt=(e,t)=>{let i=Sae(e);if(i){let r=new CustomEvent(i,{bubbles:!0});return Object.defineProperty(r,"target",{writable:!1,value:t}),r}},ytt=class extends Ca{constructor(){super(...arguments),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=e=>{var r;if(!e.eventName||!e.target||e.eventName==="Scroll")return;let t=(r=this.splineEvents[Sae(e.eventName)])==null?void 0:r[e.target.uuid];if(!t)return;e.eventName==="Scroll"&&e.deltaY!==void 0&&Object.assign(t,{deltaY:e.deltaY});let{domElement:i}=this.eventContext;i.dispatchEvent(t)}}connect(){let{page:e}=this.eventContext;e.traverseEntity(t=>{var i,r;if((i=t.data)!=null&&i.events.length){for(let[n,s]of Uz)if(t.data.events.some(a=>a.data.type===s&&!a.data.disabled)){this.objectsPerEvents.has(n)?(r=this.objectsPerEvents.get(n))==null||r.push(t):this.objectsPerEvents.set(n,[t]);let a={id:t.uuid,name:t.name},o=vtt(s,a),l=this.splineEvents[n];l?l[t.uuid]=o:this.splineEvents[n]={[t.uuid]:o}}}}),this.objectsPerEvents.forEach(t=>{t.forEach(i=>{i.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},xtt=class{constructor(e,t,i,r,n,s){if(this.id=e,this.data=t,this.object=i,this.entered=!1,(t.type==="KeyDown"||t.type==="KeyUp"||t.type==="KeyPress")&&!t.key)throw new Error("Missing property");this.actions=Xn(t,t.actions,r,n,s,i)}disconnect(){Is(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing&&t.data.runMode!=="Toggle")||this.actions.Transition.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.SwitchCamera.some(t=>t.playing&&t.data.runMode!=="Toggle")||this.actions.SwitchCamera.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),e===!1&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},btt=class extends Ca{constructor(e,t,i){super(e),this.eventManager=t,this.useForRaycastProperty=i,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=r=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(r);let{raycaster:n,page:s}=this.eventContext,a=eA(n,s,[],!0);this.sceneInterects=a,a.length&&(this.eventContext.sharedAssets.raycastProperty={x:a[0].point.x,y:a[0].point.y,z:a[0].point.z,objX:a[0].object.matrixWorld.elements[12],objY:a[0].object.matrixWorld.elements[13],objZ:a[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=r=>{(r.target===this.eventContext.domElement||r.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(n=>{(n.data.type==="MouseDown"||n.data.type==="MousePress")&&(this.onCanvasRaycast(r),n.dispatch())})},this.onCanvasMouseUp=r=>{(r.target===this.eventContext.domElement||r.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(n=>{n.data.type==="MouseUp"?(this.onCanvasRaycast(r),n.dispatch()):n.data.type==="MousePress"&&n.dispatchRelease()})},this.onMouseDown=r=>{Kt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseEvent("MouseDown"))},this.onMouseUp=r=>{Kt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=r=>{Kt.length>1||(this.eventContext.updateRaycaster(r),this.handleMousePressEvent())},this.onMousePressRelease=r=>{Kt.length>1||(this.eventContext.updateRaycaster(r),this.handleMousePressEvent(!0))},this.onKeyDown=r=>{this.heldKeys[r.key]||(this.handleKeyEvent(r,"KeyDown"),this.handleKeyEventHeld(r,"KeyDown",!0)),this.heldKeys[r.key]=!0},this.onKeyUp=r=>{this.handleKeyEvent(r,"KeyUp"),this.handleKeyEventHeld(r,"KeyUp",!0)},this.onKeyPressDown=r=>{this.heldKeysPress[r.key]?this.handleKeyEventHeld(r,"KeyPress"):(this.handleKeyEvent(r,"KeyPress"),this.handleKeyEventHeld(r,"KeyPress",!0)),this.heldKeysPress[r.key]=!0},this.onKeyPressUp=r=>{this.handleKeyEvent(r,"KeyPress",!0)},this.releaseHeldKey=r=>{delete this.heldKeys[r.key]},this.releaseHeldKeyPress=r=>{delete this.heldKeysPress[r.key]},this._onUserEvent=({eventName:r,target:n,reverse:s})=>{var o,l,c,u;if(!r||!n)return;let a=kw(r);a&&(a==="MouseDown"||a==="MouseUp"||a==="MousePress"?(n.dispatchEvent({type:"beginEvent",eventName:a}),(l=(o=this.eventsPerObjects[a])==null?void 0:o[n.uuid])==null||l.forEach(h=>{h.dispatchUserEvent(s)})):(a==="KeyDown"||a==="KeyUp"||a==="KeyPress")&&(n.dispatchEvent({type:"beginEvent",eventName:a}),(u=(c=this.eventsPerObjects[a])==null?void 0:c[n.uuid])==null||u.forEach(h=>{h.dispatchUserEvent()})))}}connect(){var n,s,a,o,l,c;let{page:e,sharedAssets:t,domElement:i}=this.eventContext,r=(u,h)=>{var m,g;if(!((m=u.data)!=null&&m.events.length))return;let f=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let v of f){let x=this.eventsPerObjects[v];if(u.data.events.filter(({data:b})=>b.type===v&&b.disabled!==!0).forEach(({id:b,data:S})=>{try{let _=new xtt(b,S,u,e,t,this.eventManager);_.actions.Video.length&&(this.hasVideoAction=!0),(S.type==="MouseDown"||S.type==="MouseUp"||S.type==="MousePress")&&(S.mode==="Canvas"||S.mode==="Window")?this.canvasMouseEvents.push(_):(x[u.uuid]?x[u.uuid].some(A=>A.id===_.id)||x[u.uuid].push(_):x[u.uuid]=[_],u instanceof km&&u.traverseChildren(A=>{var M;if(!A.visible)return!0;A instanceof Gn&&((M=A.data.geometry.shapeBlendNode)==null?void 0:M.operation)!==2&&(x[A.uuid]?x[A.uuid].push(_):x[A.uuid]=[_])}))}catch{}}),((g=x[u.uuid])==null?void 0:g.length)&&(this.objectsPerTypes[v].push(u instanceof Os&&(v==="MouseDown"||v==="MouseUp"||v==="MousePress")?h:u),u instanceof km)){let b=this.objectsPerTypes[v];u.traverseChildren(S=>{if(!S.visible)return!0;S instanceof Gn&&b.indexOf(S)===-1&&b.push(S)})}}};e.traverseEntity(u=>{var h;(u instanceof xa||u instanceof As)&&((h=u.frame)==null||h.traverse(f=>{r(f,u)})),r(u)}),this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),i.addEventListener("pointerdown",this.onCanvasMouseDown),i.addEventListener("pointerup",this.onCanvasMouseUp),((n=this.objectsPerTypes.MouseDown)!=null&&n.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),i.addEventListener("pointerdown",this.onMouseDown)),(s=this.objectsPerTypes.MouseUp)!=null&&s.length&&(this.domEventsNeeded.add("pointerup"),i.addEventListener("pointerup",this.onMouseUp)),(a=this.objectsPerTypes.MousePress)!=null&&a.length&&(this.domEventsNeeded.add("pointerdown"),i.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),i.addEventListener("pointerup",this.onMousePressRelease)),(o=this.objectsPerTypes.KeyDown)!=null&&o.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(l=this.objectsPerTypes.KeyUp)!=null&&l.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(c=this.objectsPerTypes.KeyPress)!=null&&c.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([u,h])=>{h.forEach(f=>{f.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(i=>{i.forEach(r=>{r.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,i])=>{i.forEach(r=>{r.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){var o,l,c,u;let{stopRaycast:t,raycaster:i,page:r,pointerScreen:n}=this.eventContext,s=this.objectsPerTypes[e],a=s.filter(h=>!(h instanceof Os));if(!(!s.length&&!this.useForRaycastProperty)&&!(r.uiCanvas&&Th(r,[n.x,n.y],Object.keys(this.eventsPerObjects[e]),h=>{this.handleObjectMouseEventDispatch(h,e)}))){if(t||this.useForRaycastProperty){let h;if(this.sceneInterects===null?h=eA(i,r,a,this.useForRaycastProperty):(h=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&h.length&&(this.eventContext.sharedAssets.raycastProperty={x:h[0].point.x,y:h[0].point.y,z:h[0].point.z,objX:h[0].object.matrixWorld.elements[12],objY:h[0].object.matrixWorld.elements[13],objZ:h[0].object.matrixWorld.elements[14]}),t){let f=[((l=(o=h[0])==null?void 0:o.uv)==null?void 0:l.x)??0,((u=(c=h[0])==null?void 0:c.uv)==null?void 0:u.y)??0];n6(h).forEach(m=>{m instanceof xa&&Th(m,f,Object.keys(this.eventsPerObjects[e]),g=>{this.handleObjectMouseEventDispatch(g,e)}),this.eventsPerObjects[e][m.uuid]&&this.handleObjectMouseEventDispatch(m,e)})}}t||a.forEach(h=>{var m,g;let f=VT(i,h);f&&(this.handleObjectMouseEventDispatch(h,e),h instanceof xa&&Th(h,[((m=f==null?void 0:f.uv)==null?void 0:m.x)??0,((g=f==null?void 0:f.uv)==null?void 0:g.y)??0],Object.keys(this.eventsPerObjects[e]),v=>{this.handleObjectMouseEventDispatch(v,e)}))})}}handleMousePressEvent(e=!1){let t="MousePress",i=this.objectsPerTypes[t],r=i.filter(s=>!(s instanceof Os)),n=[];if(i.length){if(!e){let{stopRaycast:s,raycaster:a,page:o,pointerScreen:l}=this.eventContext,c=!1;if(o.uiCanvas&&(c=Th(o,[l.x,l.y],Object.keys(this.eventsPerObjects[t]),u=>{n.push(u)})),s&&!c){let u=eA(a,o,r);n=n6(u),u.forEach(h=>{var f,m;h.object instanceof xa&&Th(h.object,[((f=h==null?void 0:h.uv)==null?void 0:f.x)??0,((m=h==null?void 0:h.uv)==null?void 0:m.y)??0],Object.keys(this.eventsPerObjects[t]),g=>{n.push(g)})})}else r.forEach(u=>{var f,m;let h=VT(a,u);h&&(n.push(u),u instanceof xa&&Th(u,[((f=h==null?void 0:h.uv)==null?void 0:f.x)??0,((m=h==null?void 0:h.uv)==null?void 0:m.y)??0],Object.keys(this.eventsPerObjects[t]),g=>{n.push(g)}))})}this._prevObjects.length&&this._prevObjects.forEach(s=>{n.includes(s)||this.handleObjectMouseEventDispatchRelease(s,t)}),n.length&&n.forEach(s=>{this.handleObjectMouseEventDispatch(s,t)}),this._prevObjects=n}}handleObjectMouseEventDispatch(e,t){var i,r;e.dispatchEvent({type:"beginEvent",eventName:t}),(r=(i=this.eventsPerObjects[t])==null?void 0:i[e.uuid])==null||r.forEach(n=>{n.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){var i,r;e.dispatchEvent({type:"beginEvent",eventName:t}),(r=(i=this.eventsPerObjects[t])==null?void 0:i[e.uuid])==null||r.forEach(n=>{n.dispatchRelease()})}handleKeyEvent(e,t,i=!1){this.objectsPerTypes[t].forEach(r=>{let n=this.eventsPerObjects[t][r.uuid];n.some(({data:s})=>"key"in s&&s.key===e.key)&&r.dispatchEvent({type:"beginEvent",eventName:t}),n.forEach(s=>{"key"in s.data&&s.data.key===e.key&&(i?s.dispatchRelease():s.dispatch(!0))})})}handleKeyEventHeld(e,t,i=!1){this.objectsPerTypes[t].forEach(r=>{this.eventsPerObjects[t][r.uuid].forEach(n=>{"key"in n.data&&n.data.key===e.key&&n.dispatchHeld(i)})})}},wtt=new j,Stt=new j,_ae=class{constructor(e,t,i,r,n){this.actionsIn=Xn(e,e.inActions,i,r,n,t),this.actionsOut=Xn(e,e.outActions,i,r,n,t)}disconnect(){Is(this.actionsIn),Is(this.actionsOut)}},_tt=class extends _ae{constructor(e,t,i,r,n,s){super(t,i,r,n,s),this.id=e,this.data=t,this.object=i,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let f of this.objects)if(!f.visible)return;let c=wtt.setFromMatrixPosition(this.objects[0].matrixWorld),u=Stt.setFromMatrixPosition(this.objects[1].matrixWorld),h=c.distanceTo(u)<=this.distance?"in":"out";if(this.stage!==h){this.stage=h;let f=h==="in"?this.actionsIn:this.actionsOut;f.Audio.forEach(m=>m.dispatchConditional()),f.Particles.forEach(m=>m.dispatchConditional()),f.Video.forEach(m=>m.dispatchConditional()),f.Link.forEach(m=>m.dispatch()),f.Create.forEach(m=>m.dispatch()),f.Destroy.forEach(m=>m.dispatch()),f.Reset.forEach(m=>m.dispatch()),f.Transition.forEach(m=>{m.object.currentTransitionEvent!==this&&(m.object.currentTransitionEvent=this),m.init()}),f.Transition.forEach(m=>m.play()),f.Animation.forEach(m=>m.play()),f.SwitchCamera.forEach(m=>m.play()),f.SceneTransition.forEach(m=>m.dispatch()),f.SetVariable.forEach(m=>m.checkConditions()),f.SetVariable.forEach(m=>m.dispatch()),f.DynamicVariablePlay.forEach(m=>m.dispatch()),f.ClearLocalStorage.forEach(m=>m.dispatch()),f.UserAPI.forEach(m=>m.dispatch())}};let{distance:a,fromObject:o,toObject:l}=t.condition;this.distance=a;for(let c of[o,l]){if(!c)throw new Error("Missing property");let u=r.find(c);if(!u)throw new Error("Missing property");this.objects.push(u)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},Ett=class extends _ae{constructor(e,t,i,r,n,s){var l;super(t,i,r,n,s),this.id=e,this.data=t,this.object=i,this.onBegin=({target:c,state:u})=>{this.toState!==u&&(this.actionsOut.Audio.forEach(h=>h.dispatchConditional()),this.actionsOut.Particles.forEach(h=>h.dispatchConditional()),this.actionsOut.Video.forEach(h=>h.dispatchConditional()),this.actionsOut.Link.forEach(h=>h.dispatch()),this.actionsOut.Create.forEach(h=>h.dispatch()),this.actionsOut.Destroy.forEach(h=>h.dispatch()),this.actionsOut.Reset.forEach(h=>h.dispatch()),this.actionsIn.Transition.forEach(h=>h.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(h=>h.play()),this.actionsOut.Animation.forEach(h=>h.play()),this.actionsIn.SwitchCamera.forEach(h=>h.pause()),this.actionsOut.SwitchCamera.forEach(h=>h.play()),this.actionsOut.SceneTransition.forEach(h=>h.dispatch()),this.actionsOut.SetVariable.forEach(h=>h.checkConditions()),this.actionsOut.SetVariable.forEach(h=>h.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(h=>h.dispatch()),this.actionsOut.ClearLocalStorage.forEach(h=>h.dispatch()),this.actionsOut.UserAPI.forEach(h=>h.dispatch()))},this.onComplete=({target:c,state:u})=>{this.toState===u&&(this.actionsIn.Audio.forEach(h=>h.dispatchConditional()),this.actionsIn.Particles.forEach(h=>h.dispatchConditional()),this.actionsIn.Video.forEach(h=>h.dispatchConditional()),this.actionsIn.Link.forEach(h=>h.dispatch()),this.actionsIn.Create.forEach(h=>h.dispatch()),this.actionsIn.Destroy.forEach(h=>h.dispatch()),this.actionsIn.Reset.forEach(h=>h.dispatch()),this.actionsOut.Transition.forEach(h=>h.pause()),this.actionsOut.Transition.forEach(h=>h.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(h=>h.play()),this.actionsIn.Animation.forEach(h=>h.play()),this.actionsOut.SwitchCamera.forEach(h=>h.pause()),this.actionsIn.SwitchCamera.forEach(h=>h.play()),this.actionsIn.SceneTransition.forEach(h=>h.dispatch()),this.actionsIn.SetVariable.forEach(h=>h.checkConditions()),this.actionsIn.SetVariable.forEach(h=>h.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(h=>h.dispatch()),this.actionsOut.ClearLocalStorage.forEach(h=>h.dispatch()),this.actionsOut.UserAPI.forEach(h=>h.dispatch()))};let{condition:a}=t;if(!a.object)throw new Error("Missing property");let o=r.find(a.object)??r.scene.find2D(a.object);if(!o)throw new Error("Missing property");if(this.toObject=o,a.state&&!((l=this.toObject.states)!=null&&l[a.state]))throw new Error("Missing property");this.toState=a.state}connect(){$p(this.actionsOut).forEach(e=>{var t;(t=this.actionsOut[e])!=null&&t.length&&this.toObject.addEventListener("beginState",this.onBegin)}),$p(this.actionsIn).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),$p(this.actionsOut).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),$p(this.actionsIn).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},Att=class extends Ca{constructor(e,t){super(e),this.eventManager=t,this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1}connect(){super.connect();let{page:e,sharedAssets:t}=this.eventContext;e.traverseEntity(i=>{var r;if((r=i.data)!=null&&r.events.length){for(let{id:n,data:s}of i.data.events)if(!s.disabled&&s.type==="Conditional")try{let a;s.condition.type==="Comparison"||(s.condition.type==="Distance"?a=new _tt(n,s,i,e,t,this.eventManager):s.condition.type==="State"&&(a=new Ett(n,s,i,e,t,this.eventManager))),a&&(this.eventsPerConditions[s.condition.type].push(a),(a.actionsIn.Video.length||a.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}}),Object.values(this.eventsPerConditions).forEach(i=>i.forEach(r=>r.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},J1=new j,Nd=new j,Ip=new j,TX=new ao,Ttt=.01,nr=new j,rs=new j,CX=new j,sm=new Jt,wD=new as,Ctt=new tt,SD=new Hn,f0=new j,Hc=new j,p0=.2;function _D(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var Mtt=function(){let e=new tt;return(t,i,r)=>{let n=t.obj;e.copy(n.hiddenMatrix),n.parent!==null&&e.premultiply(n.parent.matrixWorld),e.invert(),n.position.copy(i),t.reference==="global"&&_D(n.position,t.limits),n.position.applyMatrix4(e),t.reference==="parent"?_D(n.position,t.limits):t.reference==="local"&&(sm.copy(t.quat0).invert(),n.position.sub(t.position0),n.position.applyQuaternion(sm),_D(n.position,t.limits),sm.invert(),n.position.applyQuaternion(sm),n.position.add(t.position0)),e.multiply(r??n.matrixWorld).decompose(nr,n.quaternion,rs),n.updateMatrix(),n.hasNonUniformScale&&(n.updateMatrixWorld(),n.updateMatrixWorldSVD()),n instanceof Ka&&Lh(n.parent)&&n.invalidateDownstreamBooleanData(!0)}}(),Ptt=class{constructor(e,t,i,r,n,s,a){this.object=e,this.id=t,this.data=i,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Xn(i,i.dragDropActions.drag,r,n,s,this.object),this.actionsDrop=Xn(i,i.dragDropActions.drop,r,n,s,this.object);let o=[];this.data.objects.forEach(l=>{let c=r.find(l);!c||c.data.visible!==!1&&(o.push(c),a[c.uuid]&&a[c.uuid].forEach(u=>{let h=r.find(u);!h||h.data.visible!==!1&&o.push(h)}))}),this.data.dropDestinations.forEach(l=>{let c=r.find(l);!c||c.data.visible!==!1&&(this.dropDestIds.push(c.uuid),a[c.uuid]&&a[c.uuid].forEach(u=>{let h=r.find(u);!h||h.data.visible!==!1&&this.dropDestIds.push(h.uuid)}))}),this.dragItems=o.map(l=>(this.data.planeMode==="locked"&&(l.userData.lockedPlane=!0),l.userData.worldPosition0=new j().setFromMatrixPosition(l.matrixWorld),{obj:l,fromPosition:new j().setFromMatrixPosition(l.matrixWorld),pointStart:new j,pointEnd:new j,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new j().copy(l.position),quat0:new Jt().copy(l.quaternion),snapped:!1,orientationMatrix:new tt,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){Is(this.actionsDrag),Is(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},Dtt=class extends Ca{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=i=>{var a;if(Kt.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:r,page:n}=this.eventContext,s=n.raycastWithClones(r);if(this.lastDropDestination=null,s.length===0){this.activeEvent=null;return}for(let o of this.events){let l=0;for(let{obj:c,pointEnd:u,pointStart:h}of o.dragItems){if(c===s[0].object||c===s[0].object.object||zi.is(c)&&c.isAncestorOf(s[0].object.uuid)){if(o.activeIdx=l,o.activeDragItem.reset=!1,o.activeDragItem.currentDampingFactor=o.data.dampingFactor,o.activeDragItem.snapped=!1,o.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){o.activeDragItem.obj.rigidBody&&o.activeDragItem.obj.rigidBody.setBodyType(2,!0);let f=o.activeDragItem.obj;c.hasNonUniformScale&&c.updateMatrixWorldSVD(),(f.hasNonUniformScale?f.matrixWorldRigid:f.matrixWorld).decompose(nr,sm,rs),wD.setFromQuaternion(sm),f.prevR===void 0?(f.prevR=wD.clone(),f.prevT=nr.clone()):(f.prevR.copy(wD),f.prevT.copy(nr)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(o.activeDragItem.obj)}this.calcPlaneIntersectPos(c,h,o.data.plane,o.data.referenceFrame),u.copy(h),(this.eventManager.controlsManager.usePhysics&&((a=c.data.physics)==null?void 0:a.rigidBody)==="dynamic"||o.data.drop===!1||o.data.resetOnSnapFail===!1)&&o.activeDragItem.fromPosition.setFromMatrixPosition(o.activeDragItem.obj.matrixWorld),this.activeEvent=o,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}l++}}this.activeEvent=null},this.onPointerMove=i=>{var a,o,l,c;if(Kt.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:r,page:n}=this.eventContext,s=n.raycastWithClones(r);if(Kt.length===0){let u=!1;for(let h of this.events){for(let{obj:f}of h.dragItems)if(f===((a=s[0])==null?void 0:a.object)||f===((l=(o=s[0])==null?void 0:o.object)==null?void 0:l.object)||zi.is(f)&&f.isAncestorOf((c=s[0])==null?void 0:c.object.uuid)){switch(u=!0,h.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(u)break}u||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let u=this.activeEvent.activeDragItem;u.snapped=!1;let h;if(this.activeEvent.data.drop&&(h=s.filter(f=>u.obj!==f.object&&!u.obj.isAncestorOf(f.object.uuid)&&!(f.object instanceof ov)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(m=>m===f.object.uuid||n.scene.find(m).isAncestorOf(f.object.uuid))))[0]),h){let f=CX.copy(h.face.normal).applyMatrix3(SD.getNormalMatrix(h.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")u.fromPosition.setFromMatrixPosition(h.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(u.fromPosition.copy(h.point),this.activeEvent.data.snapSurfaceMode==="bbox"){nr.copy(f).applyMatrix3(SD.setFromMatrix4(u.obj.matrixWorld).transpose());let m=u.obj;nr.x>p0?rs.x=-m.recursiveBBox.min.x:nr.x<-p0&&(rs.x=-m.recursiveBBox.max.x),nr.y>p0?rs.y=-m.recursiveBBox.min.y:nr.y<-p0&&(rs.y=-m.recursiveBBox.max.y),nr.z>p0?rs.z=-m.recursiveBBox.min.z:nr.z<-p0&&(rs.z=-m.recursiveBBox.max.z),rs.applyMatrix3(SD.invert())}else rs.copy(f).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);u.fromPosition.add(rs)}this.activeEvent.data.autoOrient&&(nr.set(0,1,0).cross(f),nr.length()<1e-4&&nr.set(-1,0,0).cross(f),rs.crossVectors(CX,nr),u.orientationMatrix.makeBasis(nr,rs,f)),u.pointStart.copy(u.fromPosition),u.pointEnd.copy(u.pointStart),u.currentDampingFactor=this.activeEvent.snapDampingFactor,u.snapped=!0,this.lastDropDestination!==h.object&&(this.lastDropDestination=h.object,this.activeEvent.actionsDrop.Transition.forEach(m=>{m.play()}),this.activeEvent.actionsDrop.Animation.forEach(m=>{m.play()}),this.activeEvent.actionsDrop.Audio.forEach(m=>{m.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Particles.forEach(m=>{m.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(m=>{m.dispatchThrottled()}))}else u.orientationMatrix.makeRotationFromQuaternion(u.quat0),this.lastDropDestination=null,u.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(u.obj,u.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(f=>{f.stop(),f.object.currentState!==null&&f.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(f=>{f.stop()}),this.activeEvent.actionsDrop.Audio.forEach(f=>{f.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.Particles.forEach(f=>{f.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(f=>{f.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(f=>f.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(f=>f.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(f=>f.dispatch()),this.activeEvent.actionsDrag.ClearLocalStorage.forEach(f=>f.dispatch()),this.activeEvent.actionsDrag.UserAPI.forEach(f=>f.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(f=>{f.play()}),this.activeEvent.actionsDrag.Animation.forEach(f=>{f.play()}),this.activeEvent.actionsDrag.Audio.forEach(f=>{f.dispatchGameControl("start")}),this.activeEvent.actionsDrag.Particles.forEach(f=>{f.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(f=>{f.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(f=>{f.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(f=>{f.stop(),f.object.currentState!==null&&f.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(f=>{f.stop()}))},500),this.updateDragItem(u),u.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=i=>{var r;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let n=((r=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:r.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!n)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&n&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(s=>{s.stop(),s.object.currentState!==null&&s.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(s=>{s.stop()}),this.activeEvent.actionsDrag.Audio.forEach(s=>{s.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(s=>{s.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(s=>s.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(s=>s.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(s=>s.dispatch()),this.activeEvent.actionsDrop.ClearLocalStorage.forEach(s=>s.dispatch()),this.activeEvent.actionsDrop.UserAPI.forEach(s=>s.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}}}connect(){let e={};if(this.eventContext.page.traverseEntity(i=>{i.component&&(e[i.component.uuid]?e[i.component.uuid].push(i.uuid):e[i.component.uuid]=[i.uuid])}),this.eventContext.page.traverseEntity(i=>{var r;(r=i.data)==null||r.events.filter(n=>n.data.type==="DragDrop"&&!n.data.disabled).forEach(n=>{this.events.push(new Ptt(i,n.id,n.data,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager,e))})}),!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let t=this.eventContext.domElement;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,i,r){let{getCamera:n,raycaster:s}=this.eventContext;n().getWorldDirection(Nd),Nd.negate();let a=sm.identity();switch(r==="parent"?Ctt.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(nr,a,rs):r==="local"&&e.matrixWorld.decompose(nr,a,rs),i){case"x":nr.set(1,0,0).applyQuaternion(a),f0.copy(Nd).cross(nr),Hc.copy(nr).cross(f0);break;case"y":nr.set(0,1,0).applyQuaternion(a),f0.copy(Nd).cross(nr),Hc.copy(nr).cross(f0);break;case"z":nr.set(0,0,1).applyQuaternion(a),f0.copy(Nd).cross(nr),Hc.copy(nr).cross(f0);break;case"xy":Hc.set(0,0,1).applyQuaternion(a);break;case"yz":Hc.set(1,0,0).applyQuaternion(a);break;case"xz":Hc.set(0,1,0).applyQuaternion(a);break;case"adaptive":Nd.angleTo(rs.set(0,1,0))>Math.PI/6?(nr.crossVectors(rs.set(0,1,0),Nd),Hc.crossVectors(nr,rs)):Hc.set(0,1,0);break;default:Hc.copy(Nd);break}Ip.setFromMatrixPosition(e.matrixWorld);let o=e.userData.lockedPlane?e.userData.worldPosition0:Ip;if(TX.setFromNormalAndCoplanarPoint(Hc,o),!!s.ray.intersectPlane(TX,t)&&(i==="x"||i==="y"||i==="z")){let l=rs.subVectors(t,o).dot(nr);t.copy(o).addScaledVector(nr,l)}}updateDragItem(e,t=!1){var i,r;Ip.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?J1.subVectors(e.fromPosition,Ip).divideScalar(e.currentDampingFactor):e.reset==="original"?(J1.subVectors(e.obj.userData.worldPosition0,Ip).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):J1.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(Ip).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?J1.length()<Ttt:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||t)&&Mtt(e,J1.add(Ip),(i=this.activeEvent)!=null&&i.data.drop&&((r=this.activeEvent)!=null&&r.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},m0=new j,ED=new j,dh=new j,fh=new j,MX=new ao,Itt=.01,Rtt={type:"requestRender"},Ott=function(){let e=new j,t=new j;return(i,r,n)=>n>0?(e.subVectors(i,r),e.length()<=n?i:t.copy(r).add(e.normalize().multiplyScalar(n))):r}(),PX=function(){let e=new tt;return(t,i)=>{t.position.copy(i),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof Ka&&Lh(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),Ltt=class{constructor(e,t,i,r,n,s){this.data=e,this.id=t,this.object=i,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new j,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...RR.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Xn(e,e.actions,r,n,s,i)}},ktt=class extends Ca{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.pairOfEventListeners=[],this.onMouseMove=i=>{if(!(Kt.length>1)){this.eventContext.updateRaycaster(i);for(let r of this.events)r.target===void 0&&this.updateSingleEvent(r)}},this.onMouseEnter=i=>{for(let r of this.events)r.target===void 0&&(r.isReset=!1,r.currentDampingFactor=r.data.dampingFactor)},this.onMouseLeave=i=>{for(let r of this.events)r.target===void 0&&(r.data.resetOnPointerLeave&&(r.isReset=!0,r.currentDampingFactor=r.resetDampingFactor),this.updateSingleEvent(r))},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(r=>{var s,a;let n=(s=r.data)==null?void 0:s.events.find(o=>o.data.type==="Follow"&&!o.data.disabled);n&&(!e.data.globalPhysics.usePhysics||((a=r.dataPatched.physics)==null?void 0:a.rigidBody)!=="dynamic")&&this.events.push(new Ltt(n.data,n.id,r,e,this.eventContext.sharedAssets,this.eventManager))}),!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),jo&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events)if(r.target!==void 0){let n=r.target,s=this.onTargetChange(r);this.pairOfEventListeners.push([n,s]),n.addEventListener("requestRender",s)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),jo&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[i,r]of this.pairOfEventListeners)i.removeEventListener("requestRender",r);for(let i of this.events)i.paused=!0,i.isReset=!1,Is(i.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){var a;this.events.forEach(o=>{o.actions.Create.forEach(l=>{l.dispatchThrottled()})});let{plane:i,limitDistance:r,limitDistanceEnabled:n}=e.data;if(e.object.getWorldPosition(dh),e.isReset)fh.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(fh);else{let{getCamera:o,raycaster:l}=this.eventContext;if(i==="custom"?(o().getWorldDirection(ED),ED.negate(),m0.copy(ED)):i==="xy"?m0.set(0,0,1):i==="xz"?m0.set(0,1,0):i==="yz"&&m0.set(1,0,0),MX.setFromNormalAndCoplanarPoint(m0,dh),!l.ray.intersectPlane(MX,fh))return}if(!e.isReset){if(fh.distanceTo(e.worldPosition0)>r&&n&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)fh.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(fh.x=dh.x),e.data.enabledTranslation[1]===!1&&(fh.y=dh.y),e.data.enabledTranslation[2]===!1&&(fh.z=dh.z);let s=Ott(dh,fh,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let o=m0.subVectors(s,dh).divideScalar(e.currentDampingFactor);dh.add(o),t&&PX(e.object,dh),e.paused=o.length()<Itt}else PX(e.object,s),e.paused=!0;(a=e.object)==null||a.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(Rtt)}},ex=new j,nE=new j,tx=new tt,g0=new Jt,Vd=new Jt,ix=new j,rx=new j,Rp=new j,ph=new j,AD=new ao,ztt=1e-6,Btt={type:"requestRender"},jtt={type:"changeRotation"},DX=function(){let e=new tt;return function(t,i){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),i.premultiply(yae(e).invert()),t.rotation.setFromRotationMatrix(i),t.updateMatrix(),t instanceof Ka&&Lh(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),Ntt=class{constructor(e,t,i,r){this.id=t,this.object=i,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Jt,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...OR.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},Vtt=class extends Ca{constructor(){super(...arguments),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=e=>{if(!(Kt.length>1)){this._lastMouseEvent=e,this.eventContext.updateRaycaster(e);for(let t of this.events)t.target===void 0&&this.updateSingleEvent(t)}},this.onMouseEnter=e=>{for(let t of this.events)t.target===void 0&&(t.isReset=!1,t.currentDampingFactor=t.data.dampingFactor)},this.onMouseLeave=e=>{for(let t of this.events)t.target===void 0&&(t.data.resetOnPointerLeave&&(t.isReset=!0,t.currentDampingFactor=t.resetDampingFactor),this.updateSingleEvent(t))},this.onScroll=e=>{if(this._lastMouseEvent){let t=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(t)}},this.onTargetChange=e=>()=>{this.updateSingleEvent(e)},this.createUserEventListener=e=>({eventName:t,target:i})=>{if(!t||!i)return;let r=kw(t);r&&r==="LookAt"&&this.updateSingleEvent(e)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(r=>{var s,a;let n=(s=r.data)==null?void 0:s.events.find(o=>o.data.type==="LookAt"&&!o.data.disabled);n&&(!e.data.globalPhysics.usePhysics||((a=r.dataPatched.physics)==null?void 0:a.rigidBody)!=="dynamic")&&this.events.push(new Ntt(n.data,n.id,r,e))}),!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),jo&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?i.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events){if(r.target!==void 0){let a=this.onTargetChange(r),o=r.target;this.pairOfEventListeners.push([o,a]),o.addEventListener("requestRender",a)}let n=this.createUserEventListener(r),s=r.object;this.pairOfUserEventListeners.push([s,n]),s.addEventListener("userEvent",n)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),jo&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[i,r]of this.pairOfEventListeners)i.removeEventListener("requestRender",r);for(let[i,r]of this.pairOfUserEventListeners)i.removeEventListener("userEvent",r);for(let i of this.events)i.paused=!0,i.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var f;let{tilt:t,axis:i,distance:r,plane:n,limitDistance:s,enabledRotation:a,limitDistanceEnabled:o}=e.data,{getCamera:l,raycaster:c}=this.eventContext,{object:u,target:h}=e;if(u.getWorldPosition(ix),!e.isReset)if(e.target)e.target.getWorldPosition(rx);else{if(n==="custom"?(l().getWorldDirection(nE),nE.negate(),AD.setFromNormalAndCoplanarPoint(nE,ix)):(n==="xy"?ex.set(0,0,1):n==="xz"?ex.set(0,1,0):n==="yz"&&ex.set(1,0,0),AD.setFromNormalAndCoplanarPoint(ex,ix)),!c.ray.intersectPlane(AD,rx))return;r>0&&(n==="custom"||n===void 0)&&rx.addScaledVector(nE,r)}if(e.isReset||(h?t==="target"?Rp.copy(h.up).applyMatrix4(tx.extractRotation(h.matrixWorld)).normalize():a.some(m=>m===!1)?(i==="x"?(ph.set(0,0,1),a[2]===!1&&ph.set(0,1,0)):i==="y"?(ph.set(1,0,0),a[0]===!1&&ph.set(0,0,1)):(ph.set(0,1,0),a[1]===!1&&ph.set(1,0,0)),Rp.copy(ph).applyQuaternion(e.worldQuaternion0).normalize()):Rp.set(0,1,0):n==="custom"?Rp.set(0,1,0):Rp.copy(ex)),e.isReset)Vd.copy(e.worldQuaternion0);else if(ix.distanceTo(rx)>s&&o&&h)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Vd.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;Utt(tx,rx,ix,Rp,i,ph),Vd.setFromRotationMatrix(tx),g0.setFromUnitVectors(ph.applyQuaternion(Vd),Rp),a.some(m=>m===!1)&&t!=="target"&&Vd.premultiply(g0).normalize()}e.currentDampingFactor>1?(u.updateWorldMatrix(!0,!1),g0.setFromRotationMatrix(yae(u.matrixWorld)),g0.slerp(Vd,1/e.currentDampingFactor),DX(u,tx.makeRotationFromQuaternion(g0)),e.paused=8*(1-g0.dot(Vd))<ztt):(DX(u,tx.makeRotationFromQuaternion(Vd)),e.paused=!0),(f=e.object)==null||f.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),u.dispatchEvent(Btt),u.dispatchEvent(jtt)}},ol=new j,ts=new j,_n=new j;function Utt(e,t,i,r,n,s){let a=e.elements;_n.subVectors(t,i),_n.lengthSq()===0&&(_n.z=1),_n.normalize(),ts.crossVectors(r,_n),ts.lengthSq()===0&&(Math.abs(r.z)===1?_n.x+=1e-4:_n.z+=1e-4,_n.normalize(),ts.crossVectors(r,_n)),ts.normalize(),ol.crossVectors(_n,ts),n==="x"?s.z===1?[ts,ol,_n]=[_n,ts,ol]:(ts.negate(),[ts,_n]=[_n,ts]):n==="y"?s.x===1?[ts,ol,_n]=[ol,_n,ts]:(ts.negate(),[ol,_n]=[_n,ol]):s.x===1&&(ts.negate(),[ts,ol]=[ol,ts]),a[0]=ts.x,a[4]=ol.x,a[8]=_n.x,a[1]=ts.y,a[5]=ol.y,a[9]=_n.y,a[2]=ts.z,a[6]=ol.z,a[10]=_n.z}var Ftt=class{constructor(e,t,i,r,n,s){this.id=e,this.data=t,this.object=i,this.entered=!1,this.actions=Xn(t,t.actions,r,n,s,i)}disconnect(){Is(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatchStart()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Create.forEach(e=>e.dispatchStop()),this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Particles.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Particles.forEach(t=>t.dispatchBasic()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},Htt=class extends Ca{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObjects={},this.objects=[],this.objects2D=[],this._prevObjects=[],this.onMouseDown=i=>{Kt.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onMouseUp=i=>{Kt.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=i=>{Kt.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:i,target:r,reverse:n})=>{var a;if(!i||!r)return;let s=kw(i);s&&s==="MouseHover"&&(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(a=this.eventsPerObjects[r.uuid])==null||a.forEach(o=>o.dispatchUserEvent(n)))}}connect(){let{page:e,sharedAssets:t}=this.eventContext,i=(n,s)=>{var a,o;if(!(!n.visible||!((a=n.data)!=null&&a.events.length))){for(let{id:l,data:c}of n.data.events)if(!c.disabled&&c.type==="MouseHover")try{let u=new Ftt(l,c,n,e,t,this.eventManager);this.eventsPerObjects[n.uuid]?this.eventsPerObjects[n.uuid].push(u):this.eventsPerObjects[n.uuid]=[u]}catch{}(o=this.eventsPerObjects[n.uuid])!=null&&o.length&&this.objects.push(n instanceof Os?s:n)}};if(e.traverseEntity(n=>{var s;(n instanceof xa||n instanceof As)&&((s=n.frame)==null||s.traverse(a=>{i(a,n)})),i(n)}),!this.objects.length)return;let{domElement:r}=this.eventContext;this.domEventsNeeded.clear(),jo&&(this.domEventsNeeded.add("pointerdown"),r.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),r.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),r.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(n=>{n.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),jo&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(i=>{i.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:i,raycaster:r,page:n,pointerScreen:s}=this.eventContext,a=!1;if(n.uiCanvas&&(a=Th(n,[s.x,s.y],Object.keys(this.eventsPerObjects),o=>{t.push(o)})),i&&!a){let o=eA(r,n,this.objects);t=n6(o),o.forEach(l=>{var c,u;l.object instanceof xa&&Th(l.object,[((c=l==null?void 0:l.uv)==null?void 0:c.x)??0,((u=l==null?void 0:l.uv)==null?void 0:u.y)??0],Object.keys(this.eventsPerObjects),h=>{t.push(h)})})}else this.objects.forEach(o=>{var c,u;let l=VT(r,o);l&&(t.push(o),o instanceof xa&&Th(o,[((c=l==null?void 0:l.uv)==null?void 0:c.x)??0,((u=l==null?void 0:l.uv)==null?void 0:u.y)??0],Object.keys(this.eventsPerObjects),h=>{t.push(h)}))})}this._prevObjects.length&&this._prevObjects.forEach(i=>{var r;t.includes(i)||(i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(r=this.eventsPerObjects[i.uuid])==null||r.forEach(n=>n.dispatchLeave()))}),t.length&&t.forEach(i=>{var r;i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(r=this.eventsPerObjects[i.uuid])==null||r.forEach(n=>n.dispatchEnter())}),this._prevObjects=t}},Gtt=class{constructor(e,t,i,r,n,s){this.id=e,this.data=t,this.object=i,this.scrollCounter=0,this.actions=Xn(t,t.actions,r,n,s,i)}connect(){this.scrollCounter=0}disconnect(){Is(this.actions)}dispatch(e){this.actions.Transition.forEach(r=>{r.object.currentTransitionEvent!==this&&(r.object.currentTransitionEvent=this,r.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let i=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(r=>r.seek(i)),this.actions.Animation.forEach(r=>r.seek(t)),this.actions.Create.forEach(r=>r.dispatchThrottled()),this.actions.SetVariable.forEach(r=>r.checkConditions()),this.actions.SetVariable.forEach(r=>r.dispatch()),this.actions.DynamicVariablePlay.forEach(r=>r.dispatch()),this.actions.ClearLocalStorage.forEach(r=>r.dispatch()),this.actions.UserAPI.forEach(r=>r.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},Wtt=class{constructor(e,t,i,r,n,s,a){this.id=e,this.data=t,this.object=i,this.domElement=s,this.eventManager=a,this.scrollStart=0,this.scrollEnd=0,this.actions=Xn(t,t.actions,r,n,a,i)}getStickyParentElement(){let e=this.domElement;for(;e;){if(window.getComputedStyle(e).position==="sticky")return e;e=e.parentElement}return null}computeScrollBounds(){let e=this.getStickyParentElement(),t=e==null?void 0:e.parentElement,i=this.domElement.getBoundingClientRect(),r={top:i.top,bottom:i.bottom,left:i.left,right:i.right,width:i.width,height:i.height};if(t){let c=t.getBoundingClientRect(),u=window.getComputedStyle(e),h=parseFloat(u.marginTop)+parseFloat(u.marginBottom),f=parseFloat(u.top),m=parseFloat(u.bottom),g=c.height-h;if(!isNaN(f))i.top===f?(r.top+=c.top-f,r.bottom+=c.top-f):i.top<0&&(r.top-=g-i.height,r.bottom-=g-i.height);else if(!isNaN(m)){let v=document.body.clientHeight??window.innerHeight,x=window.innerWidth-(document.documentElement.clientWidth??window.innerWidth);i.bottom===v-m?(r.top+=c.top-i.height+m+x,r.bottom+=c.top-i.height+m+x):i.bottom<v-m&&(r.top-=g-i.height,r.bottom-=g-i.height)}}let n=document.body,s=document.documentElement,a=window.pageYOffset||s.scrollTop||n.scrollTop,o=s.clientTop||n.clientTop||0,l=Math.round(r.top+a-o);if(this.data.startFrom==="enter"){let c=window.innerHeight,u=r.height,h=this.data.enterAnchor,f=h==="top"?c:h==="bottom"?c-u:c-u*.5;this.scrollStart=l-f}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=r,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){Is(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:t}){this.actions.Transition.forEach(n=>{n.object.currentTransitionEvent!==this&&(n.object.currentTransitionEvent=this,n.init())});let i=this.scrollEnd-this.scrollStart,r=Math.min(1,Math.max(0,(t-this.scrollStart)/i));this.actions.Transition.forEach(n=>n.seek(r)),this.actions.Animation.forEach(n=>n.seek(r)),this.actions.Create.forEach(n=>n.dispatchThrottled()),this.actions.SetVariable.forEach(n=>n.checkConditions()),this.actions.SetVariable.forEach(n=>n.dispatch()),this.actions.DynamicVariablePlay.forEach(n=>n.dispatch()),this.actions.ClearLocalStorage.forEach(n=>n.dispatch()),this.actions.UserAPI.forEach(n=>n.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},qtt=class extends Ca{constructor(e,t){super(e),this.managers=t,this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([i,r])=>{r.forEach(n=>n.handleResize())})},this.onScroll=i=>{if(!this.isInview)return;let r={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([n,s])=>{n.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:r}),s.forEach(a=>a.dispatch(r))})},this.onWheel=i=>{!this.isInview||i.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:i.deltaY}),n.forEach(s=>s.dispatch(i.deltaY))})},this.onUserEvent=({eventName:i,target:r,reverse:n})=>{var a;if(!i||!r)return;let s=kw(i);s&&s==="Scroll"&&(r.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(a=this.wheelEventsPerObject.get(r))==null||a.forEach(o=>{o.dispatchUserEvent(n)}))}}connect(){let{page:e,sharedAssets:t,domElement:i,isExport:r}=this.eventContext,n=s=>{var a,o,l;if((a=s.data)!=null&&a.events.length){for(let{id:c,data:u}of s.data.events)if(!u.disabled&&u.type==="Scroll")if(u.trigger==="load"||!r){let h=new Gtt(c,u,s,e,t,this.managers);this.wheelEventsPerObject.has(s)?(o=this.wheelEventsPerObject.get(s))==null||o.push(h):this.wheelEventsPerObject.set(s,[h])}else{let h=new Wtt(c,u,s,e,t,i,this.managers);this.scrollEventsPerObject.has(s)?(l=this.scrollEventsPerObject.get(s))==null||l.push(h):this.scrollEventsPerObject.set(s,[h])}}};e.traverseEntity(s=>{var a;(s instanceof xa||s instanceof As)&&((a=s.frame)==null||a.traverse(o=>{n(o)})),n(s)}),this.intersectionObserver=new IntersectionObserver(s=>{let a=s[0];a&&(this.isInview=a.isIntersecting)},{root:null}),this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([s,a])=>{a.forEach(o=>o.connect()),s.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([s,a])=>{a.forEach(o=>o.connect()),s.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(s=>s.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(s=>s.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(i=>i.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(i=>i.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},Xtt=class{constructor(e,t,i,r,n,s){this.id=e,this.data=t,this.object=i,this.actions=Xn(t,t.actions,r,n,s,i)}disconnect(){Is(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof nm?t.interaction.audioPlayer.play():t.interaction instanceof ZO&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let i=t.interaction.data.triggerAfter??"autoplay";i===e&&(t.interaction instanceof cv?t.interaction.play(i==="autoplay"):t.interaction instanceof i6&&t.interaction.dispatch())}),this.actions.Particles.forEach(t=>{(t.data.triggerAfter??"any")===e&&t.dispatchBasic()})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.Reset.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof nm?t.interaction.audioPlayer.play():t.interaction instanceof ZO&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof cv?t.interaction.play():t.interaction instanceof i6&&t.interaction.dispatch()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()})}},Ytt=class extends Ca{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(n=>{n.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(n=>{n.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:i,isExport:r}=this.eventContext,n=r?document:i;n.removeEventListener("pointerdown",this.onAny),n.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([s,a])=>{s.dispatchEvent({type:"beginEvent",eventName:"Start"}),a.forEach(o=>{o.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(n=>{n.actions.Audio.forEach(s=>{s.interaction instanceof nm&&s.interaction.audioPlayer.play()}),n.actions.Video.forEach(s=>{let a=s.interaction.data.triggerAfter??"autoplay";s.interaction instanceof cv&&s.interaction.play(a==="autoplay")}),n.actions.Particles.forEach(s=>{s.dispatchBasic()})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(n=>{n.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:i,target:r,reverse:n})=>{var a,o;if(!i||!r)return;let s=kw(i);s&&s==="Start"&&(r instanceof Os||r.dispatchEvent({type:"beginEvent",eventName:"Start"}),(a=this.eventsPerObject.get(r))==null||a.forEach(l=>{l.dispatchUserEvent(n)}),(o=this.eventsAfterPerObject.get(r))==null||o.forEach(l=>{l.dispatchUserEvent(n)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext,i=r=>{var n,s,a,o,l;if((n=r.data)!=null&&n.events.length)for(let{id:c,data:u}of r.data.events){if(u.disabled||u.type!=="Start")continue;let h=new Xtt(c,u,r,t,e,this.eventManager);(h.actions.Transition.length||h.actions.Animation.length||h.actions.SwitchCamera.length||h.actions.Create.length||h.actions.Destroy.length||h.actions.SceneTransition.length||h.actions.Reset.length||h.actions.SetVariable.length||h.actions.DynamicVariablePlay.length||h.actions.ClearLocalStorage.length||h.actions.UserAPI.length)&&(this.eventsPerObject.has(r)?(s=this.eventsPerObject.get(r))==null||s.push(h):this.eventsPerObject.set(r,[h])),h.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?(a=this.eventsAfterPerObject.get(r))==null||a.push(h):this.eventsAfterPerObject.set(r,[h])),h.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?(o=this.eventsAfterPerObject.get(r))==null||o.push(h):this.eventsAfterPerObject.set(r,[h])),h.actions.Particles.length&&(this.eventsAfterPerObject.has(r)?(l=this.eventsAfterPerObject.get(r))==null||l.push(h):this.eventsAfterPerObject.set(r,[h]))}};if(t.traverseEntity(r=>{var n;(r instanceof xa||r instanceof As)&&((n=r.frame)==null||n.traverse(s=>{i(s)})),i(r)}),[...this.eventsAfterPerObject.values()].some(r=>r.length)){if(this.eventManager.activateCount===0){let{domElement:r,isExport:n}=this.eventContext,s=n?document:r;s.addEventListener("pointerdown",this.onMouseDown,{once:!0}),s.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),s.addEventListener("pointerdown",this.onAny),s.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([a,o])=>{a.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(s=>s.dispatch()),r.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,i=t?document:e;i.removeEventListener("pointerdown",this.onMouseDown),i.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),i.removeEventListener("pointerdown",this.onAny),i.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.removeEventListener("userEvent",this.onUserEvent),n.forEach(s=>s.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(i=>i.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},Qtt=class{constructor(e,t,i,r,n,s){this.id=e,this.data=t,this.object=i,this.initialDisabled=!1,this.actions=Xn(t,t.actions,r,n,s,i),this.target=t.target}disconnect(){Is(this.actions)}dispatch(e){this.initialDisabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.actions.Transition.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e??!1)}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()))}},Ktt=class extends Ca{constructor(e,t,i,r,n){super(e),this.sharedVariables=t,this.eventManager=i,this.needsMouse=r,this.needsRaycast=n,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.isOutOfFocus=!1,this.events=[],this.onFrame=s=>{let a=this.eventContext.sharedAssets;if(this.rafId=window.requestAnimationFrame(this.onFrame),this.isOutOfFocus)return;let o=new Date,l=[],c=[];for(let f=0;f<this.propertiesToWatch.length;f++){let{objectId:m,property:g,prevValue:v}=this.propertiesToWatch[f],x=this.eventContext.scene.find(m),b=kR.propertyPaths[g];if(b[0]==="width"||b[0]==="height"||b[0]==="depth")x=x.geometry.userData.parameters[b[0]];else for(let S=0;S<b.length;S++)x=x[b[S]];v===null?this.propertiesToWatch[f].prevValue=x instanceof j?x.clone():x:(x instanceof j?!x.equals(v):v!==x)&&(c.push({objId:m,property:g}),x instanceof j?this.propertiesToWatch[f].prevValue.copy(x):this.propertiesToWatch[f].prevValue=x)}for(let f=0;f<this.variablesToWatch.length;f++){let{id:m,prevValue:g}=this.variablesToWatch[f],v=a.getVariable(m);v!==g&&(l.push(m),this.variablesToWatch[f].prevValue=v)}for(let f=0;f<this.dynamicVars.length;f++){let{id:m,expectedTime:g,last:v,data:x,timerSeconds:b,startValue:S}=this.dynamicVars[f],_=1e3;if((x.dynamicVariableType==="timer"||x.dynamicVariableType==="stopwatch")&&x.format==="number3decimal"?_=1:x.dynamicVariableType==="counter"?_=x.updateInterval:x.dynamicVariableType==="random"&&(_=x.isStatic?1/0:x.updateInterval),g===-1){this.dynamicVars[f].last=s,this.dynamicVars[f].expectedTime=s+_;continue}if(!((a.getDynamicVariablePlayState(m)==="Stopped"||a.getDynamicVariablePlayState(m)==="Restarted")&&(this.dynamicVars[f].last=s,this.dynamicVars[f].expectedTime=s+_,x.dynamicVariableType==="counter"&&a.getVariable(m)!==S&&(a.updateVariable(m,S),this.eventManager.requestRender()),(x.dynamicVariableType==="timer"||x.dynamicVariableType==="stopwatch")&&this.dynamicVars[f].timerSeconds!==S&&(this.dynamicVars[f].timerSeconds=S,a.updateVariable(m,dl.getFormattedTimerTime(S,x)),this.eventManager.requestRender()),a.getDynamicVariablePlayState(m)==="Restarted"&&a.setDynamicVariablePlayState(m,"Playing"),a.getDynamicVariablePlayState(m)==="Stopped"))){if(a.getDynamicVariablePlayState(m)==="Paused"){this.dynamicVars[f].deltaToExpectedTime===void 0&&(this.dynamicVars[f].deltaToExpectedTime=Math.max(this.dynamicVars[f].expectedTime-s,0)),this.dynamicVars[f].last=s-(_-this.dynamicVars[f].deltaToExpectedTime),this.dynamicVars[f].expectedTime=s+this.dynamicVars[f].deltaToExpectedTime;continue}else this.dynamicVars[f].deltaToExpectedTime=void 0;if(s>=g)if(this.dynamicVars[f].last=s,this.dynamicVars[f].expectedTime+=_,x.dynamicVariableType==="random"){let A=x.min+Math.random()*(x.max-x.min),M=x.decimals;A=Math.round(A*Math.pow(10,M))/Math.pow(10,M),a.updateVariable(m,A),l.push(m),this.eventManager.requestRender()}else if(x.dynamicVariableType==="counter"){let A=a.getVariable(m),M=a.getDynamicVariableToggleIsForward(m)??!0,C=a.getVariable(m)+x.increment*(M?1:-1);x.hasEnd&&(C=x.increment>0?wt.clamp(C,S,x.endValue):wt.clamp(C,x.endValue,S),C===S&&a.setDynamicVariableToggleIsForward(m,void 0),x.repeat?C===x.endValue&&(C=S):(C===S||C===x.endValue)&&a.setDynamicVariablePlayState(m,"Paused")),C!==A&&(l.push(m),a.updateVariable(m,C),this.eventManager.requestRender())}else if(x.dynamicVariableType==="time"){let A=a.getVariable(m),M=WW(o,x);if(typeof A=="object"&&"textValue"in A&&typeof M=="object"&&"textValue"in M){if(Array.isArray(A.textValue)&&Array.isArray(M.textValue)){if(A.textValue.every((C,D)=>C===M.textValue[D]))continue}else if(A.textValue===M.textValue)continue}else if(A===M)continue;a.updateVariable(m,M),l.push(m),this.eventManager.requestRender()}else{let A=ta.isTextValue(x.endValue)?IX(x.endValue.textValue):x.endValue,M=a.getDynamicVariableToggleIsForward(m)??!0,C=b+(s-v)/1e3*(x.dynamicVariableType==="timer"?-1:1)*(M?1:-1);C=Math.max(C,0),x.hasEnd&&(C=x.dynamicVariableType==="stopwatch"?wt.clamp(C,S,A):wt.clamp(C,A,S),C===S&&a.setDynamicVariableToggleIsForward(m,void 0),x.repeat?Math.abs(C-A)<(x.format==="number3decimal"?1e-4:.1)&&(C=S):(Math.abs(C-S)<(x.format==="number3decimal"?1e-4:.1)||Math.abs(C-A)<(x.format==="number3decimal"?1e-4:.1))&&a.setDynamicVariablePlayState(m,"Paused")),C!==b&&(l.push(m),this.dynamicVars[f].timerSeconds=C,a.updateVariable(m,dl.getFormattedTimerTime(C,x)),this.eventManager.requestRender())}}}let u=!1;a.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=a.mouseProperty,u=!0);let h=!1;a.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=a.raycastProperty,h=!0),this.events.forEach(f=>{(l.includes(f.data.variableId)||c.find(m=>m.objId===f.data.objectId&&m.property===f.data.property)||f.data.variableId==="mouseProperty"&&u||f.data.variableId==="raycastProperty"&&h)&&(f.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()}}pause(){this.isOutOfFocus||(this.isOutOfFocus=!0,this.pauseTime=Date.now())}resume(){if(!this.isOutOfFocus)return;this.isOutOfFocus=!1;let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.eventContext.page.traverseEntity(t=>{var i;(i=t.data)==null||i.events.filter(r=>r.data.type==="VariableChange"&&!r.data.disabled).forEach(r=>{this.events.push(new Ztt(r.id,r.data,t,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.propertiesToWatch=this.events.filter(t=>t.data.variableId==="objectProperty"&&t.data.objectId!==null).map(t=>({objectId:t.data.objectId,property:t.data.property,prevValue:null}));let e=this.eventContext.sharedAssets;this.sharedVariables.forEach(({id:t,data:i})=>{if(!("dynamicVariableType"in i)){this.events.find(n=>n.data.variableId===t)&&this.variablesToWatch.push({id:t,prevValue:e.getVariable(t)});return}let r;if(i.dynamicVariableType==="timer"||i.dynamicVariableType==="stopwatch"){let n;if(ta.isTextValue(i.value)&&Array.isArray(i.value.textValue)){let s=i.value.textValue;s.length===3?n=s[2]+s[1]*60+s[0]*3600:n=s[1]+s[0]*60}else n=i.value;r=n,this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:i,timerSeconds:n,startValue:r})}else i.dynamicVariableType==="time"&&e.updateVariable(t,WW(new Date,i)),i.dynamicVariableType==="counter"&&(r=ta.isTextValue(i.value)?IX(i.value.textValue):i.value),this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:i,startValue:r})}),this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},Ztt=class{constructor(e,t,i,r,n,s){this.id=e,this.data=t,this.object=i,this.actions=Xn(t,t.actions,r,n,s,i)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispose(){Is(this.actions)}};function IX(e){return e.length===3?e[2]+e[1]*60+e[0]*3600:e[1]+e[0]*60}var $tt="https://unpkg.com/@splinetool/runtime@1.10.17/build/",Jtt="https://unpkg.com/@splinetool/navmesh-wasm@1.10.17/build/",eit=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${$tt}' + 'navmesh.js'),
		fetch('${Jtt}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,tit=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,iit=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,rit=.001,nit={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},Eae,Ii,Gs;K9e.then(e=>{Eae=e,Ii=new e.Vec3,Gs=new e.Vec3});var sit=new j,ait=class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=i=>{if(Kt.length!==1)return;let{raycaster:r,page:n}=this.eventContext;this.eventContext.updateRaycaster(i);let s=n.raycastWithClones(r);if(s.length!==0){if(this.gameControl){let a=sit.copy(this.gameControl.colliderWorldPosition);a.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(a,s[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(i,r)=>n=>{var f,m,g,v,x,b,S;let s;if(n instanceof vl)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;s=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof ia)s=n.object;else if(s=n,((f=s.dataPatched.cloner)==null?void 0:f.disabled)===!1&&((m=s.dataPatched.cloner)==null?void 0:m.hideBase)&&((g=s.dataPatched.physics)==null?void 0:g.fusedBody)!==!0)return!0;if(r&&!s.userData.navmesh)return;let a=s.dataPatched;if(!a.visible&&((v=a.physics)==null?void 0:v.enabled)!==!0)return!0;n.updateMatrixWorldSVD();let o=UT(a),l=s.userData.hasDestroy,c=s.userData.hasDrag,u=!1,h=!1;for(let _ of a.events)_.data.disabled!==!0&&(_.data.type==="GameControl"?u=!0:_.data.type==="Follow"&&(h=!0));if(u||o||h||l||c)return!0;if(this.usePhysics&&((x=a.physics)==null?void 0:x.rigidBody)==="dynamic"){if(this.usePhysics&&((b=a.physics)!=null&&b.fusedBody))return!0}else if("geometry"in n&&n.geometry&&i.push(Ah(n.geometry,n.matrixWorld)),this.usePhysics&&((S=a.physics)==null?void 0:S.fusedBody))return n.traverseObject((_,A)=>{var D,T;if(A===0)return;let M;if(_ instanceof vl)if(_.objectForSample){if(_.objectForSample.dataPatched.physics.fusedBody)return;M=_.object}else return _.object.dataPatched.physics.fusedBody===!0&&_.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(_ instanceof ia)M=_.object;else if(M=_,(D=_.dataPatched.cloner)==null?void 0:D.hideBase)return!0;let C=M.dataPatched;if(!C.visible&&((T=C.physics)==null?void 0:T.enabled)!==!0)return!0;"geometry"in _&&_.geometry&&i.push(Ah(_.geometry,_.matrixWorld))}),!0},this.traverseNoPhysics=(i,r)=>n=>{let s;if(n instanceof vl)return;n instanceof ia?s=n.object:s=n;let a=s.dataPatched;if(a.physics.enabled==="visibility"?!a.visible:!a.physics.enabled)return!0;if(r&&!s.userData.navmesh)return;let o=n.geometry,l=s.userData.hasDestroy===!0,c=s.userData.hasDrag===!0;if(UT(a)||l||c||s.dataPatched.events.some(u=>u.data.disabled!==!0&&u.data.type==="GameControl"))return!0;o&&i.push(Ah(o,n.matrixWorld))},this.navmeshWasm=Eae,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?eit:tit)+iit])),this._worker=new Worker(this._workerURL)}init(e,t,i){this.gameControl=t,this.eventContext=i,this.setDefaultQueryExtent(new j().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(i.page,e,r=>{this.buildFromNavmeshData(r.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,i){t.objects.forEach(l=>{var u;let c=e.scene.find(l);c.traverseEntity(h=>{h.userData.navmesh=!0}),(u=c.cloner)==null||u.traverseObject(h=>{h.userData.navmesh=!0})});let r=[],n=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(r,t.zones==="custom");if(e.traverseChildren(n),t.objects.forEach(l=>{var u;let c=e.scene.find(l);c.traverseEntity(h=>{h.userData.navmesh=void 0}),(u=c.cloner)==null||u.traverseObject(h=>{h.userData.navmesh=void 0})}),r.length===0)return!1;let s=rm(r),{positions:a,triIndices:o}=K3(s.getAttribute("position"),s.getIndex());return this._worker.postMessage([a,a.length/3,o,o.length,{...nit,...t}]),this._worker.onmessage=i,!0}createDebugNavGeometry(){let e,t,i=this.navMesh.getDebugNavMesh(),r=i.getTriangleCount(),n=new Uint32Array(r*3),s=new Float32Array(r*3*3);for(e=0;e<r*3;e++)n[e]=e;for(e=0;e<r;e++)for(t=0;t<3;t++){let o=i.getTriangle(e).getPoint(t);s[e*9+t*3+0]=o.x,s[e*9+t*3+1]=o.y,s[e*9+t*3+2]=o.z}let a=new Rt;return a.setIndex(new Xt(n,1)),a.setAttribute("position",new Xt(s,3)),a}getClosestPoint(e){return Ii.x=e.x,Ii.y=e.y,Ii.z=e.z,this.navMesh.getClosestPoint(Ii)}getClosestPointToRef(e,t){Ii.x=e.x,Ii.y=e.y,Ii.z=e.z;let i=this.navMesh.getClosestPoint(Ii);t.set(i.x,i.y,i.z)}getRandomPointAround(e,t){return Ii.x=e.x,Ii.y=e.y,Ii.z=e.z,this.navMesh.getRandomPointAround(Ii,t)}getRandomPointAroundToRef(e,t,i){Ii.x=e.x,Ii.y=e.y,Ii.z=e.z;let r=this.navMesh.getRandomPointAround(Ii,t);i.set(r.x,r.y,r.z)}moveAlong(e,t){return Ii.x=e.x,Ii.y=e.y,Ii.z=e.z,Gs.x=t.x,Gs.y=t.y,Gs.z=t.z,this.navMesh.moveAlong(Ii,Gs)}moveAlongToRef(e,t,i){return Ii.x=e.x,Ii.y=e.y,Ii.z=e.z,Gs.x=t.x,Gs.y=t.y,Gs.z=t.z,this.navMesh.moveAlong(Ii,Gs)}computePath(e,t){let i=this.getClosestPoint(t);if(Gs.x=i.x,Gs.y=i.y,Gs.z=i.z,Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)+Math.pow(t.z-i.z,2))>this.getDefaultQueryExtent().y)return[];this.getClosestPoint(e);let r=this.navMesh.computePath(Ii,Gs),n=r.getPointCount(),s=[];for(let a=0;a<n;a++){let o=r.getPoint(a);s.push(new j(o.x,o.y,o.z))}return s}createCrowd(e,t){return new oit(this,e,t)}setDefaultQueryExtent(e){Ii.x=e.x,Ii.y=e.y,Ii.z=e.z,this.navMesh.setDefaultQueryExtent(Ii)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,i=this.navmeshWasm._malloc(t),r=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,i,t);r.set(e);let n=new this.navmeshWasm.NavmeshData;n.dataPointer=r.byteOffset,n.size=e.length,this.navMesh.buildFromNavmeshData(n),this.navmeshWasm._free(r.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),i=new Uint8Array(e.size);return i.set(t),this.navMesh.freeNavmeshData(e),i}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(e=this.eventContext)==null||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,i){return Ii.x=e.x,Ii.y=e.y,Ii.z=e.z,this.navMesh.addCylinderObstacle(Ii,t,i)}addBoxObstacle(e,t,i){return Ii.x=e.x,Ii.y=e.y,Ii.z=e.z,Gs.x=t.x,Gs.y=t.y,Gs.z=t.z,this.navMesh.addBoxObstacle(Ii,Gs,i)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},oit=class{constructor(e,t,i){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,i,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,i){let r=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;r.radius=t.radius,r.height=t.height,r.maxAcceleration=t.maxAcceleration,r.maxSpeed=t.maxSpeed,r.collisionQueryRange=t.collisionQueryRange,r.pathOptimizationRange=t.pathOptimizationRange,r.separationWeight=t.separationWeight,r.updateFlags=7,r.obstacleAvoidanceType=0,r.queryFilterType=0,r.userData=0;let n=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),r);return this.transforms.push(i),this.agents.push(n),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new j(0,0,0)),n}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let i=this.crowd.getAgentPosition(e);t.set(i.x,i.y,i.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let i=this.crowd.getAgentVelocity(e);t.set(i.x,i.y,i.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let i=this.crowd.getAgentNextTargetPath(e);t.set(i.x,i.y,i.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let i=this.agents.indexOf(e);i>-1&&(this._agentDestinationArmed[i]=!0,this._agentDestination[i].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let i=this.crowd.getAgentParameters(e);t.radius!==void 0&&(i.radius=t.radius),t.height!==void 0&&(i.height=t.height),t.maxAcceleration!==void 0&&(i.maxAcceleration=t.maxAcceleration),t.maxSpeed!==void 0&&(i.maxSpeed=t.maxSpeed),t.collisionQueryRange!==void 0&&(i.collisionQueryRange=t.collisionQueryRange),t.pathOptimizationRange!==void 0&&(i.pathOptimizationRange=t.pathOptimizationRange),t.separationWeight!==void 0&&(i.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,i)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=rit)return;let t=1/60,i=10;{let r=Math.floor(e/t);r>i&&(r=i),r<1&&(r=1);let n=e/r;for(let s=0;s<r;s++)this.crowd.update(n)}for(let r=0;r<this.agents.length;r++){let n=this.agents[r],s=this.getAgentPosition(n);if(this.transforms[r].copy(s),this._agentDestinationArmed[r]){let a=s.x-this._agentDestination[r].x,o=s.z-this._agentDestination[r].z,l=this.reachRadii[r],c=this._agentDestination[r].y-this.reachRadii[r],u=this._agentDestination[r].y+this.reachRadii[r],h=a*a+o*o;s.y>c&&s.y<u&&h<l*l&&(this.onReachTarget(n,this._agentDestination[r]),this._agentDestinationArmed[r]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,i=this.crowd.getCorners(e),r=i.getPointCount(),n=[];for(t=0;t<r;t++){let s=i.getPoint(t);n.push(new j(s.x,s.y,s.z))}return n}dispose(){this.crowd.destroy()}};function lit(e){let t=!1;return e.scene.objects.forEach(i=>{i.data.type==="Page"&&!t&&i.data.publish.gameControlObject&&Gb.traverseModuleInstances(e,i.id,(r,n,s)=>{for(let a of s)a.data.type==="GameControl"&&a.data.navmesh.enabled&&(t=!0)})}),t}var cit={type:"change"},RX={type:"changeZoom"},uit={type:"changePan"},Op={type:"start"},Lp={type:"end",changed:!0},hit={type:"end",changed:!1},TD=new Jt,OX=new pe,dit=2*Math.PI,fit=1e-8,pit=.01,CD=new j,sE=new pe,MD=new j,aE=new Jt,LX=new tt,mit={type:"requestRender"},Aae=class extends la{constructor(e,t,i={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=i,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,il.DOLLY_ROTATE,il.PAN],this.offset=new j,this.eye=new j,this.lastPosition=new j,this.lastQuaternion=new Jt,this.current=new pe,this.overShoot=new pe,this.overRatio=new pe,this.spherical=new uH,this.sphericalDelta=new uH,this.panOffset=new j,this.panLeftV=new j,this.panUpV=new j,this.panV=new j,this.rotateStart=new pe,this.rotateEnd=new pe,this.rotateDelta=new pe,this.panStart=new pe,this.panEnd=new pe,this.panDelta=new pe,this.dollyStart=new pe,this.dollyEnd=new pe,this.dollyDelta=new pe,this.rotationRangeFactor=new pe,this.panRangeFactor=new pe,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=r=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=r.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(MD,aE,CD),this.offset.copy(MD).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&this.object.isPerspectiveCamera&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(TD.copy(aE).invert()),this.panOffset.applyQuaternion(TD),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(aE),this.panOffset.applyQuaternion(aE)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),MD.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(LX.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(LX));let r=this.spherical.phi%dit;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(mr.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),r>0&&r>Math.PI||r<0&&r>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0){let n=this.hoverRotatePanMode===1?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-n,this.sphericalDelta.phi*=1-n}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>pit||8*(1-this.lastQuaternion.dot(this.object.quaternion))>fit?(this.dispatchEvent(cit),this.object.dispatchEvent(mit),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=r=>{this.enabled!==!1&&(r.pointerType==="touch"||r.pointerType==="pen"&&jo?this.onPointerDownTouch(r):this.onPointerDownMouse(r),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(Op),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),r.stopPropagation(),r.pointerType==="touch"||r.pointerType==="pen"&&jo||this.domElement.setPointerCapture(r.pointerId)))},this.onPointerLeave=r=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,CD.subVectors(this.position0,this.target0),this.spherical.setFromVector3(CD),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=r},this.onPointerEnter=r=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?sE.set(r.clientX-this.domElement.clientWidth/2,r.clientY-this.domElement.clientHeight/2):sE.set(r.clientX-this.pointerLeaveEvent.clientX,r.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(sE).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(OX,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(r.clientX,r.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(sE).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(r.clientX,r.clientY)),this.update()},this.onPointerMove=r=>{this.enabled!==!1&&(this.checkRaycastLock()||(r.pointerType==="touch"||r.pointerType==="pen"&&jo?this.onPointerMoveTouch(r):this.onPointerMoveMouse(r),r.stopPropagation()))},this.onPointerUp=r=>{this.isPointerDown=!1,Kt.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),Kt.length>1&&r.preventDefault(),this.hasChange?this.dispatchEvent(Lp):this.dispatchEvent(hit),this.state=-1,r&&(r.stopPropagation(),r.pointerType==="touch"||r.pointerType==="pen"&&jo||this.domElement.releasePointerCapture(r.pointerId))},this.onPointerDownMouse=r=>{let n;switch(this.useKeyEvents?n=this.mouseButtons[r.button]:n=this.mouseButtonsPlay[r.button],n){case 0:if(r.altKey===!0&&!r.shiftKey&&!g_(r)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2;break;case 3:if(g_(r)||r.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}break;case 5:if(g_(r)||r.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=r=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(r);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(r);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(r);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=r=>{switch(Kt.length>1&&r.preventDefault(),this.touches[Kt.length-1]){case il.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case il.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case il.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case il.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=r=>{switch(Kt.length>1&&r.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(r),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(r),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(r),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(r),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=Nb(()=>this.dispatchEvent(Lp),33),this.onMouseWheel=r=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&r.preventDefault(),this.dispatchEvent(Op),this.handleMouseWheel(r),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=r=>{if(r.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!Cw)if(r.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(Op),r.scale>this.prevScale?this.dollyIn(this.getZoomScale()):r.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=r.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(Lp)},this.onContextMenu=r=>{r.preventDefault()},this.onTouchEnd=r=>{r.preventDefault()},this.onKeyDown=r=>{this.enabled!==!1&&(this.key=r.key,r.key===" "&&this.dispatchEvent(Op))},this.onKeyUp=r=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&r.key==="Alt"&&this.onPointerUp(Kt[0]),r.key===" "&&this.dispatchEvent(Lp))},this.onPointerHover=r=>{r.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(r,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(r,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=r=>{r.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.initialSphericalRadius=this.spherical.radius,this.addEventListenersToCamera()}dispatchEvent(e){e.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotateDamping=e.hoverRotateDamping??this.dampingFactor,this.useWindowEvents=t==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let i=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=i**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/this.maxZoom,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let r=this.object.getTarget().applyQuaternion(TD.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+r.y,this.maxV=e.panVerticalOffset.max+r.y,this.minH=-e.panHorizontalOffset.min+r.x,this.maxH=e.panHorizontalOffset.max+r.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Gc(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=Gc(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=Gc(Gc(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=Gc(Gc(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=il.ROTATE),e.panTouches===1&&(this.touches[0]=il.PAN),e.orbitTouches===2&&(this.touches[1]=il.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=il.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=il.ROTATE),e.panTouches===3&&(this.touches[2]=il.PAN),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,i,r,n,s,a,o){this.overShoot.set(0,0);let l,c,u;e instanceof j?(l=e.x,c=e.y,this.current.set(this.target.x,this.target.y),u=!0):(l=e.theta,c=e.phi,this.current.set(Gc(this.spherical.theta),Gc(this.spherical.phi)),u=!1),i===0&&(this.current.x+=l,this.current.y+=c),(t===3||t===2)&&(!u&&this.isThetaFlipped?this.current.x>r&&this.current.x<0?this.overShoot.x=r-this.current.x:this.current.x<n&&this.current.x>0&&(this.overShoot.x=n-this.current.x):this.current.x>r?this.overShoot.x=r-this.current.x:this.current.x<n&&(this.overShoot.x=n-this.current.x)),(t===3||t===1)&&(this.current.y>s?this.overShoot.y=s-this.current.y:this.current.y<a&&(this.overShoot.y=a-this.current.y)),u||(this.overShoot.x=Gc(this.overShoot.x),this.overShoot.y=Gc(this.overShoot.y)),i!==0?(this.overRatio.copy(this.overShoot).divide(o),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),i===1&&(this.overRatio.x=kX(Math.abs(this.overRatio.x)),this.overRatio.y=kX(Math.abs(this.overRatio.y))),this.isPointerDown||i===1?i===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&!this.phiIsFree&&(c*=1-this.overRatio.y)):i===2&&(!u&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||u&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(c=this.overShoot.y*.05),u?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):u?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),e instanceof j?(e.x=l,e.y=c):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=c))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let i=this.domElement;if(i&&this.object.isPerspectiveCamera){let r=this.object.position;this.panV.copy(r).sub(this.target);let n=this.panV.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*n/i.clientHeight,this.object.matrixWorld),this.panUp(2*t*n/i.clientHeight,this.object.matrixWorld)}else i&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrixWorld));this.dispatchEvent(uit)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(RX)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(RX)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(Op),this.dollyOut(e),this.dispatchEvent(Lp)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(Op),this.dollyIn(e),this.dispatchEvent(Lp)}setZoom(e){if(this.dispatchEvent(Op),this.object.isPerspectiveCamera){let t=this.initialSphericalRadius/e/this.spherical.radius;this.scale=t}else this.object.isOrthographicCamera&&(this.object.zoom=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0);this.dispatchEvent(Lp)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){e.movementX!==void 0?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(OX,-this.object.angleOffsetFromUp);let i=this.domElement,r=this.useWindowEvents?window.innerHeight:i.clientHeight,n=2*Math.PI*this.rotateDelta.x/r,s=2*Math.PI*this.rotateDelta.y/r;this.rotateLeft(n),this.rotateUp(s),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){e.movementX!==void 0?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(G9e===!1&&g_(e)===!1&&q9e(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1||this.gesture)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(Kt.length===2){let e=.5*(Kt[0].pageX+Kt[1].pageX),t=.5*(Kt[0].pageY+Kt[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(Kt[0].pageX,Kt[0].pageY)}handleTouchStartPan(){if(Kt.length===2){let e=.5*(Kt[0].pageX+Kt[1].pageX),t=.5*(Kt[0].pageY+Kt[1].pageY);this.panStart.set(e,t)}else this.panStart.set(Kt[0].pageX,Kt[0].pageY)}handleTouchStartDolly(){let e=Kt[0].pageX-Kt[1].pageX,t=Kt[0].pageY-Kt[1].pageY,i=Math.sqrt(e*e+t*t);this.dollyStart.set(0,i)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(Kt.length===2){let i=v4(e),r=.5*(e.pageX+i.x),n=.5*(e.pageY+i.y);this.rotateEnd.set(r,n)}else{if(e.pointerId!==Kt[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(Kt.length===2){let t=v4(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this.panEnd.set(i,r)}else{if(e.pointerId!==Kt[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=v4(e),i=e.pageX-t.x,r=e.pageY-t.y,n=Math.sqrt(i*i+r*r);this.dollyEnd.set(0,n),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){var e;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let t=(e=this.options)==null?void 0:e.showCameraLock;return t&&t(),!0}}else return!1}};function Gc(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function kX(e){return 1-Math.pow(1-e,4)}var zX=class{constructor(e,t,i,r,n,s){this.id=e,this.data=t,this.object=i,this.page=r,this.currentIntersectedObjects=[],this.actions=Xn(t,t.actions,r,n,s,i),this.target=t.target,this.triggeringObjects=[];for(let a of t.triggeringObjects){let o=r.scene.find(a);o&&this.triggeringObjects.push(o)}}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){Is(this.actions)}dispatch(){this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.actions.Transition.forEach(e=>{e.data.runMode==="Toggle"?e.toggle():e.play()}),this.actions.SwitchCamera.forEach(e=>{e.data.runMode==="Toggle"?e.toggle():e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}},Ui;$9e.then(e=>Ui=e);var kn=new j,Gl=new Jt,Ud=new j,PD=new as(0,0,0,"YXZ"),BX=new as(0,0,0,"XYZ"),Wl=new j,DD=new j,ID=new j(1,1,1),v0=new Jt,oE=new tt,jX=new tt,git={type:"updateMatrix"},NX=new Jt,RD=new yo,s6={type:"beginEvent",eventName:"Collision"},vit={type:"beginEvent",eventName:"Trigger"};function yit(e){if(Gb.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((i,r)=>{if(r.events){if(Array.isArray(r.events)){for(let n of r.events)if(n.data.disabled!==!0&&n.data.type==="GameControl"&&n.data.collisionEnabled){t=!0;break}}else for(let n of Object.values(r.events))if(n.disabled!==!0&&n.type==="GameControl"&&n.collisionEnabled){t=!0;break}}}),t}var UT=e=>e.states.some(t=>t.data.position!==void 0||t.data.rotation!==void 0||t.data.hiddenMatrix!==void 0||t.data.cloner!==void 0||t.data.pathSnapping!==void 0),xit=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=t=>{if(t.bodyType()!==Ui.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[i,r,n]=this.rigidBodyToMesh.get(t.handle);if(kn.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),Gl.copy(t.rotation()),i.matrixWorld.compose(kn,Gl,r),i.hasNonUniformScale&&i.matrixWorld.multiply(i.shearScale),i.dispatchEvent(git),n){let s=i.cloner;if(s&&s.objectForSample===void 0){s.matrixWorld.copy(i.matrixWorld);for(let a of s.children)a.updateMatrixWorld(!0)}for(let a of i.children)a.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,i,r)=>{var a,o,l,c;if(r===!1)return;let n,s;if(this.sensorToTriggerEvent[t]?(n=this.sensorToTriggerEvent[t],s=this.sharedGameControlGlobals.colliderToEntity.get(i)):this.sensorToTriggerEvent[i]&&(n=this.sensorToTriggerEvent[i],s=this.sharedGameControlGlobals.colliderToEntity.get(t)),n&&s&&n.isValidTriggeringObject(s)){n.dispatch();return}for(let u=this.sharedGameControlGlobals.createdObjects.length-1;u>=0;u--){let h=this.sharedGameControlGlobals.createdObjects[u];if(h.userData.hasCollisionDestroy&&(((a=h.rigidBody)==null?void 0:a.collider(0).handle)===t||((o=h.rigidBody)==null?void 0:o.collider(0).handle)===i)){this.sharedGameControlGlobals.createdObjects.splice(u,1),h.removeFromParent(),requestAnimationFrame(()=>{var f;return(f=this.sharedGameControlGlobals.rapierWorld)==null?void 0:f.removeRigidBody(h.rigidBody)});break}}if(((l=this.gameControl)==null?void 0:l.object)!==void 0&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(t)){let u=this.sharedGameControlGlobals.colliderToEntity.get(i),h=this.sharedGameControlGlobals.entityToCollisionEvents[u.uuid];if(h===void 0)return;for(let f of h)f.data.target==="character"&&this.dispatchCollisionEvent(f,u,i)}else if(((c=this.gameControl)==null?void 0:c.object)!==void 0&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(i)){let u=this.sharedGameControlGlobals.colliderToEntity.get(t),h=this.sharedGameControlGlobals.entityToCollisionEvents[u.uuid];if(h===void 0)return;for(let f of h)f.data.target==="character"&&this.dispatchCollisionEvent(f,u,t)}else{let u=this.sharedGameControlGlobals.colliderToEntity.get(t),h=this.sharedGameControlGlobals.entityToCollisionEvents[u.uuid];if(h!==void 0)for(let g of h)g.data.target==="scene"&&this.dispatchCollisionEvent(g,u,t);let f=this.sharedGameControlGlobals.colliderToEntity.get(i),m=this.sharedGameControlGlobals.entityToCollisionEvents[f==null?void 0:f.uuid];if(m!==void 0)for(let g of m)g.data.target==="scene"&&this.dispatchCollisionEvent(g,f,i)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=mae,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",i=>{"gamepad"in i.data&&"axes"in i.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(i.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var i,r;let t=e.dataPatched;for(let n of t.events){if(n.data.disabled===!0)continue;let s=(r=(i=n.data.actions)==null?void 0:i.find(a=>a.data.type==="Destroy"))==null?void 0:r.data;if(s)for(let a of s.objects){let o=this.page.scene.find(a);o&&(o.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let i of t.events)if(!(i.data.disabled===!0||i.data.type!=="DragDrop"))for(let r of i.data.objects){let n=this.page.scene.find(r);n&&(n.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{var c,u;let i,r=t instanceof Yx,n=t instanceof Qx;if(t instanceof vl||r||n)return;t instanceof ia?i=t.object:i=t;let s=i.dataPatched;if(((c=s.physics)==null?void 0:c.enabled)==="visibility"?!s.visible:!((u=s.physics)!=null&&u.enabled))return!0;let a=t.geometry,o=i.userData.hasDestroy===!0,l=i.userData.hasDrag===!0;if(UT(s)||o||l||i.dataPatched.events.some(h=>h.data.disabled!==!0&&(h.data.type==="GameControl"||h.data.type==="Follow")))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;a&&e.push(Ah(a,t.matrixWorld))}),e.length>0){let t=rm(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new qx(t)}}addRigidBody(e,t,i){if(vae(e.matrixWorld))return;let r=[],n="geometry"in e?e.geometry:void 0,s=t.dataPatched;if((n==null?void 0:n.getAttribute("position"))!==void 0&&r.push(Ah(n,e.shearScale)),s.physics.fusedBody){let a=this.gatherChildrenGeom(e,r);e.traverseObject(a),e.children.forEach(l=>l.updateMatrixWorld(!0));let o=e.cloner;o&&o.objectForSample===void 0&&s.physics.rigidBody==="dynamic"&&(o.traverseObject(a),o.children.forEach(l=>l.updateMatrixWorld(!0)))}if(r.length>0){let a,o=!i.fromCreate&&s.physics.rigidBody==="dynamic"||i.fromCreate&&i.dynamic;o?(a=Ui.RigidBodyDesc.dynamic(),a.setLinearDamping(s.physics.damping).setAngularDamping(s.physics.damping).setAdditionalMass(1e-9).setGravityScale(s.physics.gravityScale).enabledRotations(...s.physics.enabledRotation).enabledTranslations(...s.physics.enabledTranslation)):(i.hasTransformAnim||i.hasFollow||i.hasDrag)&&!i.fromCreate?(a=Ui.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):a=Ui.RigidBodyDesc.fixed();let l=rm(r);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(kn,Gl,Ud),e.position0=kn.clone().divideScalar(this.pixelsPerMeter),e.rotation0=Gl.clone(),kn.divideScalar(this.pixelsPerMeter),a.setTranslation(kn.x,kn.y,kn.z).setRotation(Gl),n?l==null||l.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l==null||l.scale(Ud.x/this.pixelsPerMeter,Ud.y/this.pixelsPerMeter,Ud.z/this.pixelsPerMeter);let c=this.sharedGameControlGlobals.rapierWorld.createRigidBody(a);o&&this.rigidBodyToMesh.set(c.handle,[e,Ud.clone(),s.physics.fusedBody]);let u=!(s.geometry===void 0||s.geometry.type==="SubdivGeometry"||s.geometry.type==="NonParametricGeometry"||s.geometry.type==="BooleanGeometry"||s.geometry.type==="VectorGeometry"||s.geometry.type==="StarGeometry"||s.geometry.type==="RectangleGeometry"||s.geometry.type==="EllipseGeometry"||s.geometry.type==="TriangleGeometry"||s.geometry.type==="TorusGeometry"||s.geometry.type==="HelixGeometry");try{this.addCollider(c,s.physics,l,t,u)}catch{try{this.addCollider(c,s.physics,l,t,!1)}catch(h){console.error(h)}}e.rigidBody=c}}addBoundsTree(e){var i,r;let t=[];if(((i=e.geometry)==null?void 0:i.getAttribute("position"))!==void 0&&((r=e.geometry)==null?void 0:r.getAttribute("position").count)>0&&t.push(Ah(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,t)),e.children.forEach(n=>n.updateMatrixWorld(!0)),t.length>0){let n=rm(t,!1);e.bvhGeometry=n,n.getAttribute("position").count>0&&(e.bvhGeometry.boundsTree=new qx(n),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e))}}addCollider(e,t,i,r,n=!0){var o,l;if((i==null?void 0:i.getAttribute("position").count)===0||((o=i==null?void 0:i.getIndex())==null?void 0:o.count)===0)return;let s;i&&(t.colliderType==="trimesh"?s=Ui.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array):s=Ui.ColliderDesc.convexMesh(i.getAttribute("position").array,n?i.getIndex().array:void 0)),s.setFrictionCombineRule(Ui.CoefficientCombineRule.Average).setRestitutionCombineRule(Ui.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let a=this.sharedGameControlGlobals.rapierWorld.createCollider(s,e);this.sharedGameControlGlobals.colliderToEntity.set(a.handle,r),(l=this.sharedGameControlGlobals.entityToCollisionEvents[r.uuid])!=null&&l.some(c=>c.target==="scene")&&a.setActiveEvents(Ui.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(i,r)=>{var o;if(r===0)return;let n;if(i instanceof vl)if(i.objectForSample){if(i.objectForSample.dataPatched.physics.fusedBody)return;n=i.object}else return i.object.dataPatched.physics.fusedBody===!0&&i.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(i instanceof ia)n=i.object;else if(n=i,(o=n.dataPatched.cloner)==null?void 0:o.hideBase)return!0;let s=n.dataPatched;if(s.physics.enabled==="visibility"?!s.visible:!s.physics.enabled)return!0;r===1?e.hasNonUniformScale?i.matrixWorld.multiplyMatrices(e.shearScale,i.hiddenMatrix):i.matrixWorld.copy(i.hiddenMatrix):i.matrixWorld.multiplyMatrices(i.parent.matrixWorld,i.hiddenMatrix),i.matrixWorld.multiply(i.matrix);let a=i.geometry;(a==null?void 0:a.getAttribute("position"))!==void 0&&t.push(Ah(a,i.matrixWorld))}}activate(e){var f,m;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,i=!1,r=5,n=8,s=9,a="drag",o=this.page.data.publish.gameControlObject,l=o!==null?this.page.find(o):null,c=null;if(l)for(let g of l.data.events){if(g.data.disabled||g.data.type!=="GameControl")continue;let v=l;for(;this.usePhysics&&((f=v=v.parent)==null?void 0:f.parent)!==null;)(m=v.data.physics)==null||m.fusedBody;g.data.collisionEnabled&&(this.needsCollisionDetection=!0),c===null&&(c=g.data)}if(this.page.traverseEntity(g=>{for(let v of g.dataPatched.events)if(v.data.disabled===!1&&v.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),l&&c&&(l.data.visible===!0||l.data.physics.enabled===!0)){i=i||c.camera===t.uuid||l.uuid===t.uuid;let g=new gae(l,this.renderer.domElement,c,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&c.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=g,r=c.joystickPosLoc,n=c.joystickRotLoc,s=c.jumpTouchButtonLoc,a=c.rotByTouch,jo&&c.touchControl&&(this.joystickToGameControls[r]="pos",c.moveMode==="walk"&&(this.joystickToGameControls[s]="jmp"),a==="joystick"&&(this.joystickToGameControls[n]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let g=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new ait(this.usePhysics,this.isExport);let v;g.collider.type==="sphere"?v=g.collider.radius*2:v=g.collider.height,v=Math.floor(v/g.navmesh.ch-1),this.navigationMeshWrapper.init({...g.navmesh,walkableHeight:v},this.gameControl,this.eventContext)}}if(i===!1){let{enableRotate:g,enablePan:v,enableZoom:x,autoRotate:b,hoverRotatePanMode:S}=this.eventManager.publish.orbitControls;(g||v||x||b||S!==0)&&(this.orbitControls=new Aae(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let u=this.renderer.domElement.width/this.renderer.getPixelRatio(),h=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((g,v)=>{let x=document.body.appendChild(document.createElement("div")),[b,S,_]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[v],A=(u-5*b)/4+b,M={},C=g==="jmp",D=C?0:b;v<10?(v<5?M.top=D/2:M.bottom=D/2,M.left=D/2+v%5*A):v===10?(M.left=D/2,M.top=h/2):(M.right=D/2,M.top=h/2),M.top?M.top-=S[1]:M.bottom+=S[1],M.left?M.left+=S[0]:M.right-=S[0];for(let O in M)M[O]+="px";if(C){let O=x.appendChild(document.createElement("div"));Object.assign(O.style,M,{position:"absolute",width:b+"px",height:b+"px",backgroundColor:`rgba(255,255,255,${_==="show"?.4:0})`,zIndex:"9999",borderRadius:b+"px",border:_==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let L=b/16*16*.4;_==="show"&&(O.innerHTML=`
						<svg width="${L}" height="${b*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),O.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),O.addEventListener("touchend",k=>k.preventDefault()),this.joysticks[v]=[void 0,x];return}let T={zone:x,mode:"static",position:M,size:b};_==="hide"&&(T.restOpacity=0);let R=CJe.create(T);R.on("move",(O,L)=>{let k=this.gameControl;g==="pos"?L.force<.2?k.moveForce=0:(k.movementState.movePosZ=Math.sin(-L.angle.radian),k.movementState.movePosX=Math.cos(-L.angle.radian),L.force>1.2?k.movementState.run=1:k.movementState.run=0,L.force<.3?k.moveForce=(L.force-.2)/.1:k.moveForce=1):g==="rot"&&(L.force<.2?k.rotForce=0:(k.movementState.rotPosX=L.vector.y,k.movementState.rotPosY=-L.vector.x,L.force<.3?k.rotForce=(L.force-.2)/.1:k.rotForce=1)),this.requestRender()}),R.on("end",(O,L)=>{let k=this.gameControl;g==="pos"?(k.movementState.movePosZ=0,k.movementState.movePosX=0,k.moveForce=1):g==="rot"&&(k.movementState.rotPosX=0,k.movementState.rotPosY=0,k.rotForce=1)}),this.joysticks[v]=[R,x]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(g=>g.initialDisabled=!1)},80)}initPhysics(){var a;(a=this.sharedGameControlGlobals.rapierWorld)==null||a.free(),this.sharedGameControlGlobals.rapierWorld=new Ui.World(new Ui.Vector3(0,this.gravity,0)),this.events=new Ui.EventQueue(!0);let e=[],t=[];if(this.page.traverseChildren(o=>{var b,S,_,A;let l;if(o instanceof vl)if(o.objectForSample){if(o.objectForSample.dataPatched.physics.fusedBody)return;l=o.object}else return o.object.dataPatched.physics.fusedBody===!0&&o.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(o instanceof ia)l=o.object;else{if(o instanceof Qx||o instanceof Yx)return;if(l=o,((b=l.dataPatched.cloner)==null?void 0:b.disabled)===!1&&((S=l.dataPatched.cloner)==null?void 0:S.hideBase)&&((_=l.dataPatched.physics)==null?void 0:_.fusedBody)!==!0)return!0}let c=l.dataPatched,u;for(let M of c.events)M.data.disabled!==!0&&M.data.type==="GameControl"&&(u=M.data);if(!c.physics||(c.physics.enabled==="visibility"?!c.visible:!c.physics.enabled))return!0;o.updateMatrixWorldSVD();let h=UT(c),f=!1,m=l.userData.hasDestroy,g=l.userData.hasDrag,v=!1;for(let M of c.events)if(M.data.disabled!==!0){if(M.data.type==="Collision"){f=!0;let C=new Qtt(M.id,M.data,l,this.page,this.sharedAssets,this.eventManager);C.initialDisabled=!0,this.collisionEvents.push(C),this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].every(D=>D.id!==M.id)?this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].push(C):this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]=[C]}else if(M.data.type==="Follow"){v=!0;let C=M.data.target;o.traverseVisible(D=>{D.userData.isFollowingObj=C})}}c.physics.rigidBody==="dynamic"&&c.physics.fusedBody===!1&&(o.matrixWorldFusedFalse=o.matrixWorld.clone());let x=o.geometry;if(u!==void 0){let M=Ui.RigidBodyDesc.kinematicPositionBased();(o.hasNonUniformScale?o.matrixWorldRigid:o.matrixWorld).decompose(kn,Gl,Ud),o.position0=kn.clone().divideScalar(this.pixelsPerMeter),o.rotation0=Gl.clone(),kn.divideScalar(this.pixelsPerMeter),M.setTranslation(kn.x,kn.y,kn.z).setRotation(Gl);let C=this.sharedGameControlGlobals.rapierWorld.createRigidBody(M);o.rigidBody=C;let D;u.collider.type==="sphere"?D=Ui.ColliderDesc.ball(u.collider.radius/this.pixelsPerMeter):u.collider.type==="capsule"?D=Ui.ColliderDesc.capsule((u.collider.height/2-u.collider.radius)/this.pixelsPerMeter,u.collider.radius/this.pixelsPerMeter):D=Ui.ColliderDesc.cuboid(u.collider.width/this.pixelsPerMeter/2,u.collider.height/this.pixelsPerMeter/2,u.collider.depth/this.pixelsPerMeter/2),D.setFrictionCombineRule(Ui.CoefficientCombineRule.Average).setRestitutionCombineRule(Ui.CoefficientCombineRule.Average).setDensity(c.physics.density).setFriction(c.physics.friction).setRestitution(c.physics.restitution);let T=this.sharedGameControlGlobals.rapierWorld.createCollider(D,C);this.sharedGameControlGlobals.colliderToEntity.set(T.handle,l),kn.fromArray(u.collider.position).multiply(Ud.setFromMatrixScale(l.matrixWorld)).divideScalar(this.pixelsPerMeter),T.setTranslationWrtParent(kn);let R=new Jt().setFromEuler(new as().setFromVector3(new j().fromArray(u.collider.rotation)));T.setRotationWrtParent(R),T.setActiveEvents(Ui.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(l,!0)}else c.physics.rigidBody==="dynamic"||h||v||m||g||f?(this.addRigidBody(o,l,{hasFollow:v,hasTransformAnim:h,hasDrag:g}),this.generateSensorColliderDescs(l,c.physics.fusedBody)):(x&&e.push(Ah(x,o.matrixWorld)),c.physics.fusedBody&&o.traverseObject((M,C)=>{var O;if(C===0)return;let D;if(M instanceof vl)if(M.objectForSample){if(M.objectForSample.dataPatched.physics.fusedBody)return;D=M.object}else return M.object.dataPatched.physics.fusedBody===!0&&M.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else{if(M instanceof Qx||M instanceof Yx)return;if(M instanceof ia)D=M.object;else if(D=M,(O=D.dataPatched.cloner)==null?void 0:O.hideBase)return!0}let T=D.dataPatched;if(T.physics.enabled==="visibility"?!T.visible:!T.physics.enabled)return!0;let R=M.geometry;(R==null?void 0:R.getAttribute("position"))!==void 0&&e.push(Ah(R,M.matrixWorld))}),this.generateSensorColliderDescs(l,c.physics.fusedBody,t));if(((A=c.physics)==null?void 0:A.fusedBody)===!0||u)return!0}),e.length===0)return;let i=rm(e);i.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let r=Ui.RigidBodyDesc.fixed(),n=this.sharedGameControlGlobals.rapierWorld.createRigidBody(r),s=Ui.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array).setFrictionCombineRule(Ui.CoefficientCombineRule.Multiply).setRestitutionCombineRule(Ui.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(s,n);for(let[o,l]of t){let c=this.sharedGameControlGlobals.rapierWorld.createCollider(o,n);this.sensorToTriggerEvent[c.handle]=l}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if(t.data.type==="Trigger"&&t.data.disabled!==!0){let i=new zX(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),r=new tt().compose(Wl.fromArray(t.data.position),v0.setFromEuler(BX.fromArray(t.data.rotation)),ID);if(t.data.triggerZone==="box"){let n=new Pn;n.min.fromArray(t.data.size).multiplyScalar(-.5),n.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([n,r,e,i])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,r,e,i])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,t,i,r;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(n=>{let s=n;s.matrixWorldFusedFalse&&(s.matrixWorldFusedFalse=void 0),s.rigidBody&&(s.rigidBody=void 0),s.position0&&(s.position0=void 0),s.rotation0&&(s.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(t=this.gameControl)==null||t.reset(),(i=this.gameControl)==null||i.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([n,s])=>{n==null||n.destroy(),s.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(r=this.navigationMeshWrapper)==null||r.dispose(),this.navigationMeshWrapper=void 0;for(let n of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))n.forEach(s=>s.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,i){if(!this.isEnabled)return!0;let r=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(r=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,r=!1):this.initializationCounter===2&&this.gameControl&&(r=!this.gameControl.update(e,t,i)&&r),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let n=.016666666666666666;if(e===0)r=this.stepPhysics()&&r;else{let s=e/1e3;s<n&&s>n*.55&&(s=n),this.accumulator+=s;let a=performance.now(),o=0,l=6;for(;this.accumulator>=n&&o<l&&(r=this.stepPhysics()&&r,this.accumulator-=n,o++,!(performance.now()-a>n*1e3)););this.accumulator=this.accumulator%n}}return r}stepPhysics(){var e;for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(kn,Gl,Ud),PD.setFromQuaternion(Gl);let i=t;i.prevR===void 0?(i.prevR=PD.clone(),i.prevT=kn.clone()):(i.prevR.copy(PD),i.prevT.copy(kn)),t.rigidBody&&(t.rigidBody.setNextKinematicTranslation(kn.divideScalar(this.pixelsPerMeter)),t.rigidBody.setNextKinematicRotation(Gl))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,i){var s;let r=((s=this.sharedGameControlGlobals.rapierWorld)==null?void 0:s.getCollider(i))._parent,n;if(t.cloner){for(let a of t.cloner.children)if(a.rigidBody===r){n=a;break}}e.dispatch(n),t.dispatchEvent(s6)}updateUseWindowEvents(e){var t;(t=this.orbitControls)==null||t.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,i){let r=jX.copy(e.matrixWorld).invert();e.traverseEntity((n,s)=>{if(t===!1&&s===1)return!0;for(let a of n.dataPatched.events)if(a.data.type==="Trigger"&&a.data.disabled!==!0){let o=new zX(a.id,a.data,n,this.page,this.sharedAssets,this.eventManager),l;if(a.data.triggerZone==="box"?l=Ui.ColliderDesc.cuboid(...a.data.size.map(c=>c/(2*this.pixelsPerMeter))):l=Ui.ColliderDesc.ball(a.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(Ui.ActiveEvents.COLLISION_EVENTS),Wl.fromArray(a.data.position),v0.setFromEuler(BX.fromArray(a.data.rotation)),oE.compose(Wl,v0,ID).premultiply(n.matrixWorld),i?(oE.decompose(Wl,v0,DD),l.setActiveCollisionTypes(Ui.ActiveCollisionTypes.KINEMATIC_FIXED|Ui.ActiveCollisionTypes.DYNAMIC_FIXED)):(oE.premultiply(r).decompose(Wl,v0,DD),e.rigidBody.bodyType()===Ui.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===Ui.RigidBodyType.Fixed?l.setActiveCollisionTypes(Ui.ActiveCollisionTypes.KINEMATIC_FIXED|Ui.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(Ui.ActiveCollisionTypes.KINEMATIC_KINEMATIC|Ui.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),Wl.divideScalar(this.pixelsPerMeter),l.setTranslation(Wl.x,Wl.y,Wl.z),l.setRotation(v0),i)i.push([l,o]);else{let c=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[c.handle]=o}}})}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[i,r,n,s]=this.sharedGameControlGlobals.triggers[t];for(let a=0;a<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;a++){let o=this.sharedGameControlGlobals.entitiesWithTransformAnim[a];if(n===o||s.isValidTriggeringObject(zi.is(o)?o:o.object)===!1)continue;let l=jX.copy(n.matrixWorld).decompose(Wl,NX,DD).compose(Wl,NX,ID).multiply(r),c=oE.copy(o.matrixWorld).invert().multiply(l);i instanceof Pn?e=o.bvhGeometry.boundsTree.intersectsBox(i,c):(RD.radius=i,RD.center.setFromMatrixPosition(c),e=o.bvhGeometry.boundsTree.intersectsSphere(RD)),e?s.currentIntersectedObjects.indexOf(o)===-1&&(s.currentIntersectedObjects.push(o),s.dispatch(),n.dispatchEvent(vit)):s.currentIntersectedObjects=s.currentIntersectedObjects.filter(u=>u!==o)}}}};function bit(e){let t=this._clip.duration,i=this._clip.start??0,r=this.loop,n=this.time+e,s=this._loopCount,a=r===sk;if(e===0)return s===-1?n:a&&(s&1)===1?t-(n-i):n;if(r===Pte){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else if(n<0)n=0;else{this.time=n;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),n>=t||n<i){let o=Math.floor((n-i)/(t-i));n-=(t-i)*o,s+=Math.abs(o);let l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a||(n=e>0?t:i,this.repetitions===1&&(n=t)),this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=n;if(a&&(s&1)===1)return t-(n-i)}return n}var VX=!1,wit=class{constructor(e,t,i,r){this.scene=e,this.requestRender=t,this.updateDisplayProgress=i,this.animationInspectorState=r,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=n=>{n.data.type==="Empty"&&n.data.animations&&n.data.animations.forEach((s,a)=>{let o=s[0]+"/";if(Array.isArray(n.identity)?o+=n.identity[0]:o+=n.uuid,this.clipIdToAction[o])return;let l=pR.parse(JSON.parse(s[2]));n.animations[a]=l;let c=this.mixer.clipAction(l,n);VX===!1&&(Object.getPrototypeOf(c)._updateTime=bit,VX=!0),c.clampWhenFinished=!0,this.clipIdToAction[o]=c})},this.mixer=new hBe(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let i=this.scene.find(t);if(!i)return;let r=i.animations.find(s=>s.uuid===e);if(!r)return;let n=this.clipIdToAction[e];!n||(n.stop(),this.mixer.uncacheClip(r),delete this.clipIdToAction[e],i.animations=i.animations.filter(s=>s.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=Dte}),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,i=this.clipIdToAction[t];if(i)return e&&(e.repeat>=0&&(i.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(i.loop=sk)),i.play(),i.paused=!1,this.requestRender(),i}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(t=this.animationInspectorState)!=null&&t.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*(this.maxFrames-1)%(this.maxFrames-1))),this.requestRender()}get maxFrames(){return oae(this.activeClip??void 0)}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let i=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(e/(this.maxFrames-1),.9999)*this.activeClip.duration),this.requestRender(),i&&(this.clipIdToAction[t].paused=!0)}},OD=new WeakMap,Sit=class extends _w{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){let n=new mR(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,s=>{this.decodeDracoFile(s,t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){let n={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};return this.decodeGeometry(e,n).then(t)}decodeGeometry(e,t){let i=JSON.stringify(t);if(OD.has(e)){let o=OD.get(e);if(o.key===i)return o.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,n=this.workerNextTaskID++,s=e.byteLength,a=this._getWorker(n,s).then(o=>(r=o,new Promise((l,c)=>{r._callbacks[n]={resolve:l,reject:c},r.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(o=>this._createGeometry(o.geometry));return a.catch(()=>!0).then(()=>{r&&n&&this._releaseTask(r,n)}),OD.set(e,{key:i,promise:a}),a}_createGeometry(e){let t=new Rt;e.index&&t.setIndex(new Xt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let r=e.attributes[i],n=r.name,s=r.array,a=r.itemSize;t.setAttribute(n,new Xt(s,a))}return t}_loadLibrary(e,t){let i=new mR(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,n)=>{i.load(e,r,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{let r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);let n=_it.toString(),s=["/* draco decoder */",r,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(n){let s=n.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,n){return r._taskLoad>n._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function _it(){let e,t;onmessage=function(a){let o=a.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise(function(u){e.onModuleLoaded=function(h){u({draco:h})},DracoDecoderModule(e)});break;case"decode":let l=o.buffer,c=o.taskConfig;t.then(u=>{let h=u.draco,f=new h.Decoder,m=new h.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{let g=i(h,f,m,c),v=g.attributes.map(x=>x.array.buffer);g.index&&v.push(g.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:g},v)}catch(g){console.error(g),self.postMessage({type:"error",id:o.id,error:g.message})}finally{h.destroy(m),h.destroy(f)}});break}};function i(a,o,l,c){let u=c.attributeIDs,h=c.attributeTypes,f,m,g=o.GetEncodedGeometryType(l);if(g===a.TRIANGULAR_MESH)f=new a.Mesh,m=o.DecodeBufferToMesh(l,f);else if(g===a.POINT_CLOUD)f=new a.PointCloud,m=o.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());let v={index:null,attributes:[]};for(let x in u){let b=self[h[x]],S,_;if(c.useUniqueIDs)_=u[x],S=o.GetAttributeByUniqueId(f,_);else{if(_=o.GetAttributeId(f,a[u[x]]),_===-1)continue;S=o.GetAttribute(f,_)}v.attributes.push(n(a,o,f,x,b,S))}return g===a.TRIANGULAR_MESH&&(v.index=r(a,o,f)),a.destroy(f),v}function r(a,o,l){let c=l.num_faces()*3,u=c*4,h=a._malloc(u);o.GetTrianglesUInt32Array(l,u,h);let f=new Uint32Array(a.HEAPF32.buffer,h,c).slice();return a._free(h),{array:f,itemSize:1}}function n(a,o,l,c,u,h){let f=h.num_components(),m=l.num_points()*f,g=m*u.BYTES_PER_ELEMENT,v=s(a,u),x=a._malloc(g);o.GetAttributeDataArrayForAllPoints(l,h,v,g,x);let b=new u(a.HEAPF32.buffer,x,m).slice();return a._free(x),{name:c,array:b,itemSize:f}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}var df;function Eit(){return df||(df=new Sit,df.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),df.decoderPending}async function Ait(e){if(df){let t={attributeIDs:df.defaultAttributeIDs,attributeTypes:df.defaultAttributeTypes,useUniqueIDs:!1},i;try{i=await df.decodeGeometry(new Int8Array(e).buffer,t)}catch(r){console.error(r)}if(i)return{index:i.index?{array:i.index.array}:void 0,attributes:Object.entries(i.attributes).map(([r,n])=>({name:r,itemSize:n.itemSize,array:n.array}))}}return null}async function Tit(e,t){let[i,r]=fre(DR.deserialize(new Uint8Array(e)));return jre(i),r.result().data}function Cit(e){let t=[];return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="NonParametricGeometry"&&r.geometry.data.draco!==void 0&&t.push(r)}),t}async function Mit(e){for(let t of e){let i=await Ait(t.geometry.data.draco);if(i){let r=t.geometry.data;i.index&&(r.index={array:i.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let n={};i.attributes.forEach(({name:s,array:a,itemSize:o})=>{n[s]={array:a,itemSize:o,type:"Float32Array",normalized:!1}}),r.attributes=n,r.draco=void 0}}}var Pit=class{constructor(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0],this._delay=500,this._distance=2,this._onMouseDown=e=>{let t=[e.clientX,e.clientY],i=new Date().getTime();if(this._clickCount>0){let r=t[0]-this._lastPosition[0],n=t[1]-this._lastPosition[1];Math.sqrt(r*r+n*n)>this._distance&&(this._clickCount=0)}this._lastPosition=t,this._clickCount=i-this._lastTime>this._delay?1:this._clickCount+1,this._lastTime=i},this._onMouseUp=e=>{}}start(e,t=500,i=2){this._target&&this.stop(),this.reset(),this._delay=t,this._distance=i,this._target=e,this._target.addEventListener("pointerdown",this._onMouseDown,!1),this._target.addEventListener("pointerup",this._onMouseUp,!1)}stop(){this._target&&(this._target.removeEventListener("pointerdown",this._onMouseDown,!1),this._target.removeEventListener("pointerup",this._onMouseUp,!1),this._target=void 0)}get clickCount(){return this._clickCount}reset(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0]}},Dit=class{constructor(e,t,i,r,n,s,a,o){this.eventId=e,this.id=t,this.data=i,this.dataEvent=r,this.object=n,this.stage=!1,this.actions=Xn(r,i.actions,s,a,o,n)}disconnect(){Is(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},Iit=class extends Ca{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.resize=(i,r)=>{this.breakpoints.forEach(n=>{let s=LR.deviceToSize(n.data.size),a=n.dataEvent.orientation==="horizontal"?i:r,o;switch(n.data.operator){case"<":o=a<s[0];break;case">":o=a>s[0];break;case"<>":o=a>s[0]&&a<s[1];break}n.stage!==o&&(n.stage=o,n.stage?n.dispatchIn():n.dispatchOut())})},this.onResizeObserver=new ResizeObserver(i=>{for(let r of i){let{width:n,height:s}=r.contentRect;this.resize(n,s)}})}connect(){let{page:e,sharedAssets:t,domElement:i}=this.eventContext;this.onResizeObserver.observe(i);let r=n=>{var s;if(!(!n.visible||!((s=n.data)!=null&&s.events.length)))for(let{data:a,id:o}of n.data.events)a.disabled||a.type==="Resize"&&a.breakpoints.forEach(({data:l,id:c})=>{try{let u=new Dit(o,c,l,a,n,e,t,this.eventManager);this.breakpoints.push(u)}catch{}})};e.traverseEntity(n=>{var s;(n instanceof xa||n instanceof As)&&((s=n.frame)==null||s.traverse(a=>{r(a)})),r(n)})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},Rit=class extends Ca{constructor(e,t){super(e),this.eventManager=t,this.userAPIs={},this.events=[],this.onSuccess=({userAPIId:i})=>{this.events.forEach(r=>{r.data.userAPIId===i&&r.dispatchSuccess()})},this.onError=({userAPIId:i})=>{this.events.forEach(r=>{r.data.userAPIId===i&&r.dispatchError()})},this.userAPIs=e.sharedAssets.getUserAPIs()}connect(){this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(i=>i.data.type==="API"&&!i.data.disabled).forEach(i=>{this.events.push(new Oit(i.id,i.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userAPIs).forEach(([e,t])=>{t.on("success",this.onSuccess),t.on("error",this.onError),t.autostart&&t.callUserAPI(this.eventContext.sharedAssets)})}disconnect(){Object.entries(this.userAPIs).forEach(([e,t])=>{t.off("success",this.onSuccess),t.off("error",this.onError)})}},Oit=class{constructor(e,t,i,r,n,s){this.id=e,this.data=t,this.object=i,this.successActions=Xn(t,t.successActions,r,n,s,i),this.errorActions=Xn(t,t.errorActions,r,n,s,i)}dispatchSuccess(){this.dispatchActions(this.successActions)}dispatchError(){this.dispatchActions(this.errorActions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},Lit=class extends Ca{constructor(e,t){super(e),this.eventManager=t,this.userWebhooks={},this.events=[],this.onMessage=({userWebhookId:i})=>{this.events.forEach(r=>{r.data.userWebhookId===i&&r.dispatch()})},this.userWebhooks=e.sharedAssets.getUserWebhooks()}connect(){this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(i=>i.data.type==="WEBHOOK"&&!i.data.disabled).forEach(i=>{this.events.push(new kit(i.id,i.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userWebhooks).forEach(([e,t])=>{t.connect(),t.on("message",this.onMessage)})}disconnect(){Object.entries(this.userWebhooks).forEach(([e,t])=>{t.off("message",this.onMessage),t.disconnect()})}},kit=class{constructor(e,t,i,r,n,s){this.id=e,this.data=t,this.object=i,this.actions=Xn(t,t.actions,r,n,s,i)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}};function zit(){let e=document.createElement("textarea");return e.style.position="fixed",e.style.top="200px",e.style.left="400px",e.style.zIndex="-1",e.style.border="1px solid rgba(255,0,0,0.5)",e.style.width="10px",e.style.height="500px",e.style.color="white",e.style.opacity="0.5",e.style.background="transparent",e.style.display="none",e.style.margin="0px",e.style.padding="0px",e.style.boxSizing="content-box",e.style.pointerEvents="none",e}var Bit=new j(0,0,1),UX=new j,FX=new j,HX=new Hn,jit=class{constructor(e,t,i,r,n){this.containerScene=e,this.raycaster=t,this.sharedAssets=i,this.requestRender=r,this.onExit=n,this.htmlInput=null,this.virtualInput=null,this.helper=new fse,this.doubleClickHandler=new Pit,this.isDragging=!1,this.plane=new ao,this.caretInterval=0,this.planeIntersection=new j,this.projected=new pe,this._lastIndex=0,this._isFirstDragMove=!1,this.selectionOnDragStart=0,this.onTextMaterialChanged=()=>{var a;let s=(a=this.virtualInput)==null?void 0:a.data;if(this.virtualInput!==void 0&&s){let o=s.material,l=typeof o=="string"?this.sharedAssets.data.materials[o]:o,c=HZe(l,this.sharedAssets);this.helper.setCaretColor(c)}},this.stopAnimateTextCursor=()=>{clearInterval(this.caretInterval),this.helper&&(this.helper.caretMesh.visible=!1)},this.startAnimateTextCursor=()=>{this.stopAnimateTextCursor(),this.helper&&(this.helper.caretMesh.visible=!0,this.caretInterval=setInterval(()=>{this.helper&&(this.helper.caretMesh.visible=!this.helper.caretMesh.visible),this.requestRender()},600))},this.handleCaretUpdate=s=>{if(!this.htmlInput||!this.virtualInput)return;let a=this.helper,o=(s==null?void 0:s.key)==="ArrowLeft"||(s==null?void 0:s.key)==="ArrowRight",l=(s==null?void 0:s.key)==="ArrowUp"||(s==null?void 0:s.key)==="ArrowDown";this.htmlInput.selectionStart===this.htmlInput.selectionEnd?(a.setCaretPosition(this.htmlInput.selectionStart,{horizontalKeyMove:o,verticalKeyMove:l}),this.startAnimateTextCursor()):a.setSelection(this.htmlInput.selectionStart,this.htmlInput.selectionEnd),this.requestRender()},this.containerScene.add(this.helper)}createInput(){return this.htmlInput=zit(),this.htmlInput}connect(){}disconnect(){var e;this.stopAnimateTextCursor(),this.helper.hide(),(e=this.htmlInput)==null||e.remove(),this.doubleClickHandler.stop()}handleMouseDown(){var s,a;if(!this.htmlInput||!this.virtualInput)return!0;this.getPointOnPlane();let e=this.doubleClickHandler.clickCount,{index:t,lineIndex:i,characterIndex:r}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,e>1?"inside":"previous")??{index:0,lineIndex:0,characterIndex:0};(a=(s=this.virtualInput)==null?void 0:s.wrappedText)!=null&&a.length&&this.virtualInput.wrappedText[i][Math.max(0,r-1)]===`
`&&(t--,r--),this._lastIndex=t,this._isFirstDragMove=!0;let n=this.checkClickedObject();if(e===1){if(n===null)return this.onExit(this.virtualInput),!0;this.selectionOnDragStart=t,this.isDragging=!0,this.setInputSelection(t)}else n===this.virtualInput&&(e===2?this.selectClosestWord(i,r):e>2&&(this.setInputSelection(0,this.htmlInput.value.length),this.doubleClickHandler.reset()))}handleMouseUp(){this.applyRangeToTextInput(),this.isDragging=!1,this._isFirstDragMove=!1}handleMouseMove(){!this.virtualInput||(this._isFirstDragMove&&this.doubleClickHandler.clickCount>1&&(this.selectionOnDragStart=this._lastIndex,this.isDragging=!0,this.setInputSelection(this._lastIndex)),this._isFirstDragMove=!1,this.getPointOnPlane(),this.applyRangeToTextInput())}focus(e){var t;if(this.virtualInput=e,this.updateTextInputStyles(),this.htmlInput)if(e){let i=(t=this.data)==null?void 0:t.geometry.text;this.htmlInput.value=typeof i=="string"?"":(i==null?void 0:i.textValue.toString())??""}else this.htmlInput.value=""}blur(){}get data(){let{virtualInput:e}=this;if(e)return e.dataPatched}applyRangeToTextInput(){var n;if(!this.isDragging||!this.virtualInput||!this.htmlInput)return;let e=this.selectionOnDragStart,{index:t,lineIndex:i,characterIndex:r}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,this.doubleClickHandler.clickCount>2?"inside":"previous")??{index:0};i!==void 0&&r!==void 0&&((n=this.virtualInput)==null?void 0:n.wrappedText[i][r-1])===`
`&&t--,this.htmlInput.setSelectionRange(Math.min(e,t),Math.max(e,t))}checkClickedObject(){if(this.virtualInput){let e=this.raycaster.intersectObject(this.virtualInput,!1);if(e.length>0){let t=e[0];if(t.object instanceof _z)return t.object}}return null}selectClosestWord(e,t){if(!this.virtualInput)return;let i=this.virtualInput.wrappedText,r=i[e],n=t+1,s=t;r[t]!==" "&&(n=this.findNextCharOccurence(r,t,"forward"," "),s=this.findNextCharOccurence(r,t,"backward"," "),s>0&&s++,n>=r.length-1&&e===i.length-1&&n++);let a=this.helper,o=a.getGlobalIndexFromLineAndCharIndexes(i,e,s),l=a.getGlobalIndexFromLineAndCharIndexes(i,e,n);this.setInputSelection(o,l)}findNextCharOccurence(e,t,i,r=" "){let n=Math.max(0,e.length-1),s=i==="forward"?n:0,a=i==="forward"?1:-1,o=Math.max(Math.min(t,n),0);for(;o!==s;)if(o+=a,e.charAt(o)===r)return o;return s}getPointOnPlane(){var t;let e=(t=this.virtualInput)==null?void 0:t.data;if(!(!this.virtualInput||!e)&&this.raycaster.ray.intersectsPlane(this.plane)){this.planeIntersection===null&&(this.planeIntersection=new j);let i=this.raycaster.ray.intersectPlane(this.plane,this.planeIntersection);if(i){this.planeIntersection.copy(this.virtualInput.worldToLocal(i));let r=typeof e.geometry.width=="number"?e.geometry.width:1,n=typeof e.geometry.height=="number"?e.geometry.height:1;this.projected.set(i.x+r*.5,i.y-n*.5)}}}updatePlane(){var t;let e=(t=this.virtualInput)==null?void 0:t.data;this.virtualInput&&e&&(HX.getNormalMatrix(this.virtualInput.matrixWorld),UX.copy(Bit).applyMatrix3(HX).normalize(),this.virtualInput.localToWorld(FX.set(0,0,e.geometry.depth)),this.plane.setFromNormalAndCoplanarPoint(UX,FX))}setInputSelection(e,t=e){var i;(i=this.htmlInput)==null||i.setSelectionRange(e,t),setTimeout(()=>{var r;(r=this.htmlInput)==null||r.focus()})}updateTextInputStyles(){var t;let e=(t=this.virtualInput)==null?void 0:t.data;this.virtualInput&&e&&this.htmlInput&&(this.htmlInput.style.fontSize=e.geometry.fontSize+"px",this.htmlInput.style.letterSpacing=e.geometry.letterSpacing*e.geometry.fontSize+"px",this.htmlInput.style.lineHeight=e.geometry.fontSize*e.geometry.lineHeight+"px",this.htmlInput.style.width=e.geometry.width+"px",this.htmlInput.style.height=e.geometry.height+"px",this.htmlInput.style.textAlign=Nit(e.geometry.horizontalAlign))}};function Nit(e){return e===4?"justify":e===2?"right":e===3?"center":"left"}var Tae=(e,t)=>{if(typeof e=="string"){let i=t.data(e);if(i)return Tae(i.value,t)}return ta.getDisplayedValue(e)};function GX(e,t){let i=e.text,r="";if(typeof i=="string"){let n=t.variables.data(r);n&&(r=Tae(n.value,t.variables))}else r=i.textValue.toString();return r}var Vit=class extends Ca{constructor(e,t){super(e),this.eventManager=t,this._textInputs=[],this.sceneHelpers=new go,this.helper=new fse,this._onMouseDownFocusIn=i=>{if(Kt.length>1)return;this.eventContext.updateRaycaster(i);let r=null;if(this.eventContext.raycaster){for(let n of this._textInputs)if(this.eventContext.raycaster.intersectObject(n,!0).length>0){r=n;break}}this.focusOnTextInput(r),this._onCaretUpdate(),this._onMouseUp(),this.textInputManager.doubleClickHandler.start(this.eventContext.domElement),this.textInputManager.doubleClickHandler._onMouseDown(i),this._onMouseDown(i)},this.onExit=()=>{let{virtualInput:i}=this.textInputManager;if(i===null)return;let r=this.textInputManager.htmlInput;this.helper.hide(),r==null||r.setSelectionRange(r.value.length,r.value.length),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0);let{domElement:n}=this.eventContext;n.removeEventListener("pointerdown",this._onMouseDown,!1),n.removeEventListener("pointerup",this._onMouseUp,!1),n.removeEventListener("pointermove",this._onMouseMove,!1),window.removeEventListener("keydown",this._onKeyPress),this.textInputManager.doubleClickHandler.reset(),n.addEventListener("pointerdown",this._onMouseDownFocusIn),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers()},this._onMouseDown=i=>{this.eventContext.updateRaycaster(i),this.textInputManager.handleMouseDown(),this.textInputManager.virtualInput&&this.eventContext.raycaster.intersectObject(this.textInputManager.virtualInput,!0).length>0&&this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1)},this._onMouseUp=()=>{this.textInputManager.handleMouseUp(),this.eventManager.controlsManager.orbitControls&&!this.eventManager.controlsManager.orbitControls.enabled&&(this.eventManager.controlsManager.orbitControls.enabled=!0)},this._onMouseMove=i=>{this.eventContext.updateRaycaster(i),this.textInputManager.handleMouseMove()},this._onTextEdit=i=>{let{htmlInput:r,virtualInput:n,helper:s}=this.textInputManager;if(!r||!n)return;let a=r.value;n.textGeometry.setText(a).then(()=>{this.eventContext.requestRender()});let o=n.data;s.update();let l=o.geometry.text;if(typeof l=="string"){let c=l;this.eventContext.sharedAssets.updateVariable(c,{textValue:a})}this.textInputManager.updateTextInputStyles(),this._onCaretUpdate()},this._onCaretUpdate=i=>{this.textInputManager.handleCaretUpdate(i)},this._onKeyPress=i=>{i.key==="Escape"&&this.onExit()},this.textInputManager=new jit(this.sceneHelpers,e.raycaster,e.sharedAssets,e.requestRender,this.onExit)}connect(){let e=[];if(this.eventContext.scene.traverseEntity(r=>{r instanceof _z&&e.push(r)}),this._textInputs=e,e.length===0)return;let{domElement:t}=this.eventContext;t.addEventListener("pointerdown",this._onMouseDownFocusIn),this.textInputManager.connect();let i=this.textInputManager.createInput();document.body.appendChild(i),i.style.display="none",i.addEventListener("keyup",this._onCaretUpdate),i.addEventListener("keydown",this._onCaretUpdate),i.addEventListener("beforeinput",this._onCaretUpdate),i.addEventListener("paste",this._onCaretUpdate),i.addEventListener("cut",this._onCaretUpdate),i.addEventListener("select",this._onCaretUpdate),i.addEventListener("selectstart",this._onCaretUpdate)}disconnect(){let e=this.textInputManager.htmlInput,{domElement:t}=this.eventContext;t.removeEventListener("pointerdown",this._onMouseDownFocusIn),e==null||e.removeEventListener("keyup",this._onCaretUpdate),e==null||e.removeEventListener("keydown",this._onCaretUpdate),e==null||e.removeEventListener("beforeinput",this._onCaretUpdate),e==null||e.removeEventListener("paste",this._onCaretUpdate),e==null||e.removeEventListener("cut",this._onCaretUpdate),e==null||e.removeEventListener("select",this._onCaretUpdate),e==null||e.removeEventListener("selectstart",this._onCaretUpdate),this._textInputs.forEach(i=>{let r=GX(i.data.geometry,this.eventContext.sharedAssets.data);i.textGeometry.setText(r)}),t.removeEventListener("pointerdown",this._onMouseDown,!1),t.removeEventListener("pointerup",this._onMouseUp,!1),t.removeEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers(),this.textInputManager.disconnect()}focusOnTextInput(e){this.textInputManager.focus(e),this.textInputManager.onTextMaterialChanged();let t=this.textInputManager.htmlInput;if(!t||e===null)return;this.textInputManager.updateTextInputStyles(),this.eventContext.renderer.sceneHelpersOnTop=this.sceneHelpers,this.eventContext.renderer.pipeline.enableHelpers(),this.textInputManager.isDragging=!1;let i=GX(e.textGeometry.userData.parameters,this.eventContext.sharedAssets.data);t.value=i,t.setSelectionRange(0,0),this.textInputManager.helper.show(e),t.style.display="block",t.addEventListener("input",this._onTextEdit),this.textInputManager.updatePlane();let{domElement:r}=this.eventContext;r.removeEventListener("pointerdown",this._onMouseDownFocusIn),r.addEventListener("pointerdown",this._onMouseDown,!1),r.addEventListener("pointerup",this._onMouseUp,!1),r.addEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress)}},Uit=class extends Ca{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onVoice=({value:i,frequencies:r})=>{this.events.forEach(n=>{n.dispatch()})}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(i=>i.data.type==="AIAssistantListener"&&!i.data.disabled).forEach(i=>{this.events.push(new Fit(i.id,i.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("voice",this.onVoice))}disconnect(){var e;(e=this.openAIRealtime)==null||e.off("voice",this.onVoice)}},Fit=class{constructor(e,t,i,r,n,s){this.id=e,this.data=t,this.object=i,this.actions=Xn(t,t.actions,r,n,s,i)}dispatch(){this.dispatchActions(this.actions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},Hit=class extends Ca{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onTriggerEvent=({description:i,direction:r})=>{let n=this.events.find(s=>s.data.description===i);n&&(r==="backward"?n.dispatchReverse():n.dispatch())}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(i=>i.data.type==="AIAssistantTrigger"&&!i.data.disabled).forEach(i=>{this.events.push(new Git(i.id,i.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("trigger_event",this.onTriggerEvent))}disconnect(){var e;(e=this.openAIRealtime)==null||e.off("trigger_event",this.onTriggerEvent)}},Git=class{constructor(e,t,i,r,n,s){this.id=e,this.data=t,this.object=i,this.actions=Xn(t,t.actions,r,n,s,i)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispatchReverse(){let e=this.actions;e.Transition.forEach(t=>t.reverseFromCurrent()),e.Particles.forEach(t=>t.reverseFromCurrent()),e.Animation.forEach(t=>t.reverseFromCurrent()),e.SwitchCamera.forEach(t=>t.reverseFromCurrent()),e.Create.forEach(t=>t.dispatchStop())}},Wit=class{constructor(e,t,i,r,n){this.publish=e,this.controlsManager=t,this.animationControls=i,this.eventContext=r,this.sharedVariables=n,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=s=>{let a=window.parent!==window,o=document.documentElement.scrollHeight>document.documentElement.clientHeight||document.documentElement.scrollWidth>document.documentElement.clientWidth;(s.touches.length>1||this.preventTouchScroll||a===!1&&o===!1)&&s.preventDefault()},this.onMouseWheelPreventScroll=s=>{this.preventScroll&&s.preventDefault()},this.onMouseMove=s=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(s),pressed:s.buttons>0}},this.onMouseDown=s=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(s),pressed:!0}},this.onMouseUp=s=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(s),pressed:!1}},this.getMousePosition=s=>{var c;let{domRect:a}=this.eventContext,{pageX:o,pageY:l}=((c=s.touches)==null?void 0:c.length)>0?s.touches[0]:s;return{x:o-(a.left+window.scrollX),y:l-(a.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=r.requestRender}activate(e=!1){var r;if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new ytt(this.eventContext),VariableChange:new Ktt(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),API:new Rit(this.eventContext,this),WEBHOOK:new Lit(this.eventContext,this),AIAssistantListener:new Uit(this.eventContext,this),AIAssistantTrigger:new Hit(this.eventContext,this),Conditional:new Att(this.eventContext,this),Start:new Ytt(this.eventContext,this),Basic:new btt(this.eventContext,this,this.needsRaycast),MouseHover:new Htt(this.eventContext,this),Scroll:new qtt(this.eventContext,this),Follow:new ktt(this.eventContext,this),DragDrop:new Dtt(this.eventContext,this),LookAt:new Vtt(this.eventContext),Resize:new Iit(this.eventContext,this),Textfields:new Vit(this.eventContext,this)};let{page:t,domElement:i}=this.eventContext;this.hideCursor&&(i.style.cursor="none"),t.traverseEntity(n=>{n.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(n=>n.connect()),i.addEventListener("wheel",this.onMouseWheelPreventScroll),i.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++,e||((r=this.eventContext.sharedAssets.openAIRealtime)==null||r.connect())}deactivate(e=!1){var r,n;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:t,domElement:i}=this.eventContext;i.style.cursor="",Object.values(this.handlers).forEach(s=>s.disconnect()),(r=this.controlsManager.gameControl)==null||r.disposeActions(),this.controlsManager.disconnectEvents(),t.traverseEntity(s=>{s.removeEventListener("requestRender",this.requestRender),s.destroyedInAction=!1}),i.removeEventListener("touchmove",this.onTouchMovePreventScroll),i.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode(),e||((n=this.eventContext.sharedAssets.openAIRealtime)==null||n.disconnect())}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(!0),this.activate(!0),this.controlsManager.deactivate(),this.controlsManager.activate(this),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let t=i=>{if(i.data.type==="Conditional"&&(i.data.ifActions.forEach(t),i.data.elseActions.forEach(t)),i.data.type==="Conditional"||i.data.type==="SetVariable")for(let r of i.data.type==="Conditional"?i.data.condition:i.data.expression)"id"in r&&Array.isArray(r.id)&&(r.id[0]==="mouse"&&(this.needsMouse=!0),r.id[0]==="raycast"&&(this.needsRaycast=!0));i.data.type==="DynamicVariablePlay"&&i.data.variableId!==""&&(i.data.mode==="Play"||i.data.mode==="PlayPause"||i.data.mode==="Toggle")&&e.setDynamicVariablePlayState(i.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(i=>{var r;if((r=i.data)!=null&&r.events.length)for(let n of i.data.events)if(n.data.type==="VariableChange"&&(n.data.variableId==="mouseProperty"&&(this.needsMouse=!0),n.data.variableId==="raycastProperty"&&(this.needsRaycast=!0)),n.data.type==="Conditional")for(let s of["inActions","outActions"])n.data[s].forEach(t);else if(n.data.type==="DragDrop")for(let s of["drag","drop"])n.data.dragDropActions[s].forEach(t);else if(n.data.type==="GameControl")for(let s of["idle","move","jump","run"])n.data.gameActions[s].forEach(t);else if(n.data.type==="Resize")for(let s of n.data.breakpoints)s.data.actions.forEach(t);else n.data.type==="LookAt"||n.data.type==="API"||n.data.actions.forEach(t)})}},qit=class{constructor(e,t,i,r,n){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=new pe().copy(i),this._editorSize=new pe().copy(r),this._aspect=t.aspect,this._fov=n??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,i=this._editorSize.y;this._aspect=e/t,t<=i&&(this._camera.zoom*=i/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,i=this._editorSize.y,r=this._fov;if(e&&t>i){let n=Xit(t,1080,2160,1,15)/100;r*=t/i,r*=1-n}this._camera.aspect=this._aspect,this._camera.fov=r,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};function Xit(e,t,i,r,n){return(e-t)/(i-t)*(n-r)+r}var Yit=class{get sharedAssets(){return this.shared}constructor(e,t={},i=!0){this.shared=new dz(e.shared,t,!0,i),this.scene=new Tz(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof As&&!e.uiScene&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof Gn&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},Qit=class{constructor({x:e=10,y:t=10}){this._startTime=0;let i=document.getElementById("spe-perfs");i?this.element=i:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function Kit(e){let t;if(e.index)for(let i=0;i<e.index.array.length;i+=3)t=e.index.array[i],e.index.array[i]=e.index.array[i+2],e.index.array[i+2]=t}function eb(e){return e instanceof Zb?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function Zit(e,t){let i={};return e.traverseEntity(r=>{var l;if(!r.visible||!(r instanceof Ka)||r.type!=="Mesh"||Array.isArray(r.material)||r.states&&Object.keys(r.states).length)return;let n=r.parent;for(;n;){if(n instanceof Ka&&r.states&&Object.keys(r.states).length)return;n=n.parent}let s=r.material.uuid,a=t.shared.materials[s];if(a){if(!Ms.isMergable(a))return}else{let c=(l=t.scene.objects.get(r.uuid))==null?void 0:l.data;if(c&&"material"in c&&typeof c.material!="string"){if(!Ms.isMergable(c.material))return;s=Ms.getHash(c.material)}}i[s]||(i[s]={});let o=i[s][eb(r)];if(o){if(o.push(r),r.cloner)for(let c of r.cloner.children)o.push(c)}else if(i[s][eb(r)]=[r],r.cloner)for(let c of r.cloner.children)i[s][eb(r)].push(c)}),i}function $it(e){let t=0;return Object.values(e).forEach(i=>{Object.values(i).forEach(r=>{let n=r.length;n>t&&(t=n)})}),t}function Jit(e,t){let i=Zit(t,e),r=$it(i),n=new Array(r),s=0,a=new Array(r),o=0,l=new Array(r),c=0,u=new Array(r),h=0;for(let[f,m]of Object.entries(i))for(let g of Object.values(m)){if(o=0,c=0,g.forEach(x=>{x instanceof Ka&&(a[o++]=x.geometry.clone(),l[c++]=x)}),c<2)continue;for(let x=0;x<c;x++)l[x].updateWorldMatrix(!0,!1),a[x].applyMatrix4(l[x].matrixWorld),l[x].matrixWorld.determinant()<0&&Kit(a[x]);let v=rm(a.slice(0,o),!1);if(v){let x;switch(f){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),x=new kr(v,l[0].material);break}default:{x=new kr(v,l[0].material);break}}x.castShadow=l[0].castShadow,x.receiveShadow=l[0].receiveShadow,t.add(x);let b=S=>{h=0;for(let _ of S)_.children&&b(_.children),_ instanceof Ka&&(Array.isArray(_.material)||i[_.material.uuid]&&i[_.material.uuid][eb(_)]&&i[_.material.uuid][eb(_)].length>1||(u[h++]=_));for(let _=0;_<h;_++)t.attach(u[_])};for(let S=0;S<c;S++){let _=l[S];b(_.children),n[s++]=_}}}for(let f=0;f<s;f++)n[f].removeFromParent()}var ert=Yf(QDe(),1),trt=new pe;function irt(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var rrt=class{constructor(e,{renderOnDemand:t,renderMode:i="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=r=>{var n,s,a,o,l,c,u,h,f,m,g,v,x;if(this.time=r,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(n=this._perfs)==null||n.start(),!this._renderer){(s=this._perfs)==null||s.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(a=this._perfs)==null||a.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((o=this._eventManager.handlers)!=null&&o.Start.hasVideoAction||(l=this._eventManager.handlers)!=null&&l.Basic.hasVideoAction||(c=this._eventManager.handlers)!=null&&c.Conditional.hasVideoAction)&&(this._skipRender=!1),(u=this._animationControls)==null||u.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,(h=this._scene)==null||h.traverseVisibleEntity(b=>{b.type==="ParticleSystem"&&(b.update(this.dt),this._skipRender=!1)}),this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(f=this._eventManager)!=null&&f.isEnabled&&(((m=this._eventManager.handlers)==null?void 0:m.Follow).onAnimationFrameDamping(),((g=this._eventManager.handlers)==null?void 0:g.LookAt).onAnimationFrameDamping(),((v=this._eventManager.handlers)==null?void 0:v.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let b=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=b,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(x=this._perfs)==null||x.end()},this._resize=r=>{var n,s,a,o,l,c,u,h,f,m;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=trt.set(this._viewportWidth,this._viewportHeight)),r){let g=this._viewportWidth,v=this._viewportHeight;this._renderer.setSize(g-1,v-1,!1),this._renderer.setSize(g,v,!1)}else this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1);if(this._camera=(n=this._scene)==null?void 0:n.activeCamera,(u=this._scene)==null||u.updateViewPlaneSize(((a=(s=this._frameView)==null?void 0:s.frameSize)==null?void 0:a.x)??this._viewportWidth,((l=(o=this._frameView)==null?void 0:o.frameSize)==null?void 0:l.y)??this._viewportHeight,((c=this._frameView)==null?void 0:c.enableResponsive)??!1),this._camera){let g=Object.values(((h=this._data)==null?void 0:h.frames)??{})[0].preset??"fullscreen";(f=this._frameView)==null||f.setCamera(this._camera),(m=this._frameView)==null||m.updateCamera(g!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=Nb(this._resize,10),this._onScroll=r=>{this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect())},this.canvas=e,this.renderMode=t?"auto":i,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new Qit({x:10,y:10})),Y9e(e)}async load(e,t,i){irt(e),this.disposed=!1;let r=await(await fetch(e,i)).arrayBuffer();await this.start(r,{variables:t})}async start(e,{interactive:t=!0,variables:i}={}){var l,c,u,h;if(this.disposed)return;let r=await Tit(e);this._data=r;let n=Cit(r);r.version&&(0,ert.default)(r.version,"1.10.17")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([n.length&&Eit(),mq(r)&&Jqe(),nQe(r)&&Qqe(),Gb.physicsEnabled(r.scene.objects)&&J9e(),hq(r)&&LYe(),Wq(r)&&mJe(),RYe(r)&&IYe(),zq(r)&&t$e(),lit(r)&&Z9e()].filter(Boolean)),n.length&&await Mit(n),(l=this._eventManager)==null||l.deactivate(),(c=this._controls)==null||c.deactivate(),(u=this._scene)==null||u.dispose();let s=new Yit(r);if(s.resetPersonalCameraFromDocumentData(),this._scene=s.scene,this._sharedAssetsManager=s.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let f=performance.now();Jit(r,s.scene);let m=performance.now();console.log("Merged geometries in ",m-f," ms")}mq(r)&&this._scene.traverse(f=>{Lh(f)&&f.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var f;this._requestRenderAutoMode(),(f=this._scene)==null||f.traverse(m=>{m instanceof vl&&m.pendingMediaLoad&&m.update()})}),(h=this._scene)==null||h.traverse(f=>{f.type==="ParticleSystem"&&(f.wakeUp(),f.data.autoPlay?f.start():f.stop())});let a=Object.keys(r.shared.fonts).map(f=>this._sharedAssetsManager.getFont(f).loadingPromise);if(Promise.all(a).then(()=>{s.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),hq(r)&&yit(r)&&await Promise.all(a),zq(r)){let f=[];this._scene.traverseEntity(m=>{(m instanceof xa||m instanceof As)&&m.uiCanvas&&f.push(m.uiCanvas)}),await Promise.all(f.map(m=>m.promise))}if(this._scene.rewriteEventsBeforeGoToPlayMode(),Vz(this._scene.activePage,this._sharedAssetsManager),!this._renderer&&(this._renderer=new UZe({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=r.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.enableUIOverlay(),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode),r.shared.images.SplineWatermark)){let f=this._sharedAssetsManager.getImage("SplineWatermark");await f.loadPromise;let m=f.getTexture(1001);this._renderer.pipeline.setWatermark(m)}Wq(r)&&this._scene.initializeSplatViewer(),r.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(r.scene.blueNoiseTextureData);let o=Object.values(r.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(o.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=o.size[0],this._viewportHeight=o.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new qit(this._renderer,this._camera,new pe(this._viewportWidth,this._viewportHeight),new pe(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(o.allowResponsive??!1)&&o.preset==="fullscreen"),t){let f=new gtt(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,o);this._scene.updateMatrixWorld(!0),this._controls=new xit(f),this._animationControls=new wit(this._scene,this._requestRenderAutoMode),this._eventManager=new Wit(r.scene.publish,this._controls,this._animationControls,f,r.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),this._scene.activePage.data.postprocessing.depthOfField.enabled&&Promise.all(this._sharedAssetsManager.getImageLoadPromises()).then(()=>{this._resize(!0)}),i!==void 0&&this.setVariables(i),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var f;(f=this._renderer)==null||f.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300),document.addEventListener("scroll",this._onScroll)}setVariables(e){if(this._data!==void 0){let t=Object.entries(e);for(let[i,r]of t)this.setVariable(i,r)}}setVariable(e,t){var r;let i=this._getVariableByName(e);if(i&&!("dynamicVariableType"in i.data)){let n=t;typeof i.data.value=="number"?n=typeof t=="number"?t:typeof t=="boolean"?t===!0?1:0:parseFloat(t):typeof i.data.value=="boolean"?n=typeof t=="number"?!!t:typeof t=="boolean"?t:t.toLocaleLowerCase()==="false"?!1:!!t:typeof i.data.value!="string"&&i.data.value.textValue!==void 0&&(n=t.toString());let s=typeof n=="string"?{textValue:n}:n;(r=this._sharedAssetsManager)==null||r.updateVariable(i.id,s),this.requestRender(),this._requestRenderAutoMode()}else i===void 0?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in i.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(t=>{e[t.data.name]===void 0&&(e[t.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(t.id)))}),e}getVariable(e){let t=this._getVariableByName(e);if(t){let i=this._sharedAssetsManager.getVariable(t.id);return this._getVariableValue(i)}}_getVariableValue(e){return typeof e!="string"&&ta.isTextValue(e)?ta.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let t=this._data.shared.variables.find(i=>i.data.name===e);return t&&this._variablesCache.set(e,t),t}}findObjectById(e){var i;let t=(i=this._scene)==null?void 0:i.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){var i;let t=(i=this._scene)==null?void 0:i.getObjectByName(e);return this._createProxyObject(t)}getAllObjects(){var t;let e=[];return(t=this._scene)==null||t.traverseEntity(i=>{if(i.uuid!==py&&!this._scene.isInvisibleObjects(i)&&!(i instanceof As)){let r=this._createProxyObject(i);r&&e.push(r)}}),e}getSplineEvents(){var e,t;return((t=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:t.Spline).splineEvents}emitEvent(e,t){var i;(i=this.findObjectById(t)||this.findObjectByName(t))==null||i.emitEvent(e)}emitEventReverse(e,t){var i;(i=this.findObjectById(t)||this.findObjectByName(t))==null||i.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,i;((t=this._controls)==null?void 0:t.orbitControls)instanceof Aae&&((i=this._controls)==null||i.orbitControls.setZoom(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){var a;let{r:t,g:i,b:r,a:n}={r:0,g:0,b:0,a:1},s=new sa(t,i,r,n);try{s.setStyle(e)}catch{console.error("This is not a valid css color",e)}(a=this._scene)==null||a.activePage.setBackgroundColor(s),this._requestRenderAutoMode()}dispose(){var e,t,i,r,n,s,a;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(i=this._sharedAssetsManager)==null||i.dispose(),this._proxyObjectCache.forEach(o=>{bH.unsubscribe(o)}),this._variablesCache.clear(),(r=this._renderer)==null||r.setAnimationLoop(null),(n=this._renderer)==null||n.dispose(),this._renderer=void 0,(s=this._sharedAssetsManager)==null||s.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(a=this._controls)==null||a.deactivate(),this.dt=0,Q9e(this.canvas),document.removeEventListener("scroll",this._onScroll)}get isStopped(){return this._isPaused}stop(){var e,t,i;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(t=this._eventManager)==null||t.pause(),(i=this._controls)!=null&&i.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,t,i;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(t=this._controls)!=null&&t.orbitControls&&(this._controls.orbitControls.enabled=!0),(i=this._renderer)==null||i.setAnimationLoop(this.render))}setGlobalEvents(e){var t;(t=this._eventManager)==null||t.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var o;if(!this._scene||e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t;e.traverseAncestors(l=>{l instanceof As&&(t=l.name)});let i=this._sharedAssetsManager,r={shared:i,scene:this._scene},n=l=>{if(l===null||l==="Base State")return null;if(l&&e.data.states){let c=e.data.states.find(u=>u.data.name===l);return c?c.id:void 0}},s={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:t,parentUuid:e.parent instanceof As||e instanceof Tz||(o=e.parent)==null?void 0:o.uuid,emitEvent(l){e.dispatchEvent({type:"userEvent",eventName:l})},emitEventReverse(l){e.dispatchEvent({type:"userEvent",eventName:l,reverse:!0})},hide(){e.visible&&(e.visible=!1,r.shared.requestRender())},show(){e.visible||(e.visible=!0,r.shared.requestRender())},get state(){var c;let l=e.stateSelection;if(l!==null)return(c=e.data.states.find(({id:u})=>u===l))==null?void 0:c.data.name},set state(l){let c;if(l!==void 0){let u=typeof l=="string"?e.data.states.find(({id:h})=>h===l):e.data.states[l];if(u)c=u.id;else{let h=typeof l=="string"?n(l):void 0;h&&(c=h)}}e.changeSelectedState(c??null,r),e.dispatchEvent({type:"completeState",state:c??null}),r.shared.requestRender()},transition(l){let c,u=jz.timeline({autoplay:l.autoPlay??!0}),h={transition({from:f,to:m,duration:g,delay:v,...x}){let b=n(f);b===void 0&&(b=c);let S=n(m);c=S;let _=new t6(e,b,S,{state:S,repeat:0,delay:v??0,delayDirection:"start-once",direction:"normal",duration:g??1e3,...x,...x.easing===6?BR.defaultData:x.easing===5?jR.defaultData:{}},i,!1);return u.add(_.params,u.duration),this},play(){return u.play(),this},pause(){return u.pause(),this},reset(){return u.reset(),this},seek(f){return u.seek(f),this}};return h.transition(l),h}},a=bH(s,(l,c)=>{var u;typeof e[l]!="object"&&((u=Object.getOwnPropertyDescriptor(e,l))!=null&&u.writable)&&(e[l]=c),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,a),a}setUIWasmUrl(e){qne.skiaWasmUrl=e}pauseGameControls(){var e,t;(t=(e=this._eventManager)==null?void 0:e.controlsManager.gameControl)==null||t.pause()}resumeGameControls(){var e,t;(t=(e=this._eventManager)==null?void 0:e.controlsManager.gameControl)==null||t.resume()}},LD,WX;function nrt(){if(WX)return LD;WX=1;var e="Expected a function",t=NaN,i="[object Symbol]",r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,l=typeof Jd=="object"&&Jd&&Jd.Object===Object&&Jd,c=typeof self=="object"&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),h=Object.prototype,f=h.toString,m=Math.max,g=Math.min,v=function(){return u.Date.now()};function x(M,C,D){var T,R,O,L,k,B,V=0,$=!1,q=!1,Y=!0;if(typeof M!="function")throw new TypeError(e);C=A(C)||0,b(D)&&($=!!D.leading,q="maxWait"in D,O=q?m(A(D.maxWait)||0,C):O,Y="trailing"in D?!!D.trailing:Y);function X(xe){var fe=T,ye=R;return T=R=void 0,V=xe,L=M.apply(ye,fe),L}function ne(xe){return V=xe,k=setTimeout(re,C),$?X(xe):L}function F(xe){var fe=xe-B,ye=xe-V,_e=C-fe;return q?g(_e,O-ye):_e}function K(xe){var fe=xe-B,ye=xe-V;return B===void 0||fe>=C||fe<0||q&&ye>=O}function re(){var xe=v();if(K(xe))return oe(xe);k=setTimeout(re,F(xe))}function oe(xe){return k=void 0,Y&&T?X(xe):(T=R=void 0,L)}function ce(){k!==void 0&&clearTimeout(k),V=0,T=B=R=k=void 0}function de(){return k===void 0?L:oe(v())}function se(){var xe=v(),fe=K(xe);if(T=arguments,R=this,B=xe,fe){if(k===void 0)return ne(B);if(q)return k=setTimeout(re,C),X(B)}return k===void 0&&(k=setTimeout(re,C)),L}return se.cancel=ce,se.flush=de,se}function b(M){var C=typeof M;return!!M&&(C=="object"||C=="function")}function S(M){return!!M&&typeof M=="object"}function _(M){return typeof M=="symbol"||S(M)&&f.call(M)==i}function A(M){if(typeof M=="number")return M;if(_(M))return t;if(b(M)){var C=typeof M.valueOf=="function"?M.valueOf():M;M=b(C)?C+"":C}if(typeof M!="string")return M===0?M:+M;M=M.replace(r,"");var D=s.test(M);return D||a.test(M)?o(M.slice(2),D?2:8):n.test(M)?t:+M}return LD=x,LD}var srt=nrt();const art=Fv(srt);function ort(e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}const lrt=[],crt={width:"100%",height:"100%"},urt=J.forwardRef(function({className:e,children:t,debounceTime:i=300,ignoreDimensions:r=lrt,parentSizeStyles:n,enableDebounceLeadingCall:s=!0,resizeObserverPolyfill:a,...o},l){const c=J.useRef(null),u=J.useRef(0),[h,f]=J.useState({width:0,height:0,top:0,left:0}),m=J.useMemo(()=>{const g=Array.isArray(r)?r:[r];return art(v=>{f(x=>Object.keys(x).filter(b=>x[b]!==v[b]).every(b=>g.includes(b))?x:v)},i,{leading:s})},[i,s,r]);return J.useEffect(()=>{const g=a||window.ResizeObserver,v=new g(x=>{x.forEach(b=>{const{left:S,top:_,width:A,height:M}=(b==null?void 0:b.contentRect)??{};u.current=window.requestAnimationFrame(()=>{m({width:A,height:M,top:_,left:S})})})});return c.current&&v.observe(c.current),()=>{window.cancelAnimationFrame(u.current),v.disconnect(),m.cancel()}},[m,a]),E.jsx("div",{style:{...crt,...n},ref:ort([l,c]),className:e,...o,children:t({...h,ref:c.current,resize:m})})}),zw=J.forwardRef(({scene:e,style:t,onSplineMouseDown:i,onSplineMouseUp:r,onSplineMouseHover:n,onSplineKeyDown:s,onSplineKeyUp:a,onSplineStart:o,onSplineLookAt:l,onSplineFollow:c,onSplineScroll:u,onLoad:h,renderOnDemand:f=!0,children:m,...g},v)=>{const x=J.useRef(null),[b,S]=J.useState(!0),[_,A]=J.useState();if(_)throw _;return J.useEffect(()=>{S(!0);let M;const C=[{name:"mouseDown",cb:i},{name:"mouseUp",cb:r},{name:"mouseHover",cb:n},{name:"keyDown",cb:s},{name:"keyUp",cb:a},{name:"start",cb:o},{name:"lookAt",cb:l},{name:"follow",cb:c},{name:"scroll",cb:u}];if(x.current){M=new rrt(x.current,{renderOnDemand:f});async function D(){await M.load(e);for(let T of C)T.cb&&M.addEventListener(T.name,T.cb);S(!1),h==null||h(M)}D().catch(T=>{A(T)})}return()=>{for(let D of C)D.cb&&M.removeEventListener(D.name,D.cb);M.dispose()}},[e]),E.jsx(urt,{ref:v,parentSizeStyles:{overflow:"hidden",...t},debounceTime:50,...g,children:()=>E.jsxs(E.Fragment,{children:[b&&m,E.jsx("canvas",{ref:x,style:{display:b?"none":"block"}})]})})}),Cae=Object.freeze(Object.defineProperty({__proto__:null,default:zw},Symbol.toStringTag,{value:"Module"})),hrt=U.div`
  margin: 0 auto;
  margin-top: 450px;
  width: 100%;
  height: 100%;
  margin-bottom: -450px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: visible;

  @media screen and (min-width: 768px) {
    margin-top: 400px;
    margin-bottom: 100px;
  }

  @media screen and (min-width: 1440px) {
    margin-top: 370px;
    
  }

    @media (min-width: 1920px) {
   margin-top: 400px;
  }
`,drt=cn`
  from {
    transform: rotateY(0deg);
  }
  to {
    transform: rotateY(360deg);
  }
`,qX=U.div`
  perspective: 1900px;
  display: flex;
  justify-content: center;
`,XX=U.div`
  width: 94vh;
  height: 100vw;
margin-bottom: -400px;
  position: relative;
  transform-style: preserve-3d;
  // animation: ${drt} 15s linear infinite;
  backface-visibility: hidden;

    @media screen and (min-width: 768px) {
    top: 400px;
    left: 20%;
   width: 100vh;
  height: 100vh;

  }

  @media screen and (min-width: 1440px) {
   top: 500px;
  }
`,YX=U.img`
  // position: absolute;
  // left: 0%;
  // width: 70%;
  // height: 70%;
  transform: rotate(347deg);
  backface-visibility: hidden;
      @media screen and (min-width: 768px) {
   width: 60vh;
  height: 60vh;

  }

  @media screen and (min-width: 1440px) {
  
  }
`,frt=U.div`
  position: absolute;
  top: 127px;

  @media screen and (min-width: 1440px) {
    margin-top: 100px;
  }

  @media (min-width: 1920px) {
   margin-top: 500px;
  }
`,prt=U.div`
  position: relative; /* Змінюємо на relative */
  width: 100%;
  max-width: 1920px;
  margin: 0 auto;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  z-index: -1;
  overflow: visible;
  top: -750px;

 

  iframe,
  canvas {
    width: 100% !important;
    height: auto !important;
    display: block;
    position: relative;
    z-index: 1;
    object-fit: contain; /* Змінюємо на contain для коректного відображення */
    margin: 0 auto;
  }

  @media screen and (max-width: 767px) {
    height: 100vh;



    iframe,
    canvas {
      height: 100% !important;
      object-fit: cover;
      pointer-events: none;
      opacity: 0.7;
    }
  }

  @media screen and (min-width: 768px) {
    iframe,
    canvas {
      width: 100vw !important; /* Дозволяємо розширення за межі екрану */
      height: 100vh !important;
      left: 50%;
      top: 430px;
      transform: translateX(-50%);
    }
  }

  @media screen and (min-width: 1440px) {
    margin-bottom: 400px;
    iframe,
    canvas {
    top: 550px;
      // max-width: 80vw;
    }
  }

  @media (min-width: 1920px) {
  margin-bottom: 800px;
    iframe,
    canvas {
    top: -140px;
    margin-top: 300px;
     
    }
  
  }

`,mrt=()=>{const e=kf("(max-width: 767px)"),{t}=jt(),[i,r]=J.useState(!1),[n,s]=J.useState(!1),a=4e3,o=J.useRef(Date.now()),l=J.useRef();J.useEffect(()=>(l.current=setTimeout(()=>{s(!0)},a),()=>{l.current&&clearTimeout(l.current)}),[]);const c=()=>{const u=Date.now()-o.current,h=Math.max(0,a-u);l.current=setTimeout(()=>{r(!0)},h)};return E.jsxs(hrt,{children:[E.jsx(prt,{style:{display:"flex",justifyContent:"center"},children:e?E.jsx(qX,{children:E.jsx(XX,{children:E.jsx(YX,{src:zF,alt:"Customer illustration"})})}):E.jsxs(E.Fragment,{children:[E.jsx("div",{style:{display:n&&i?"none":"flex",justifyContent:"center",alignItems:"center",zIndex:10,transition:"opacity 0.5s ease-out",opacity:n&&i?0:1},children:E.jsx(qX,{children:E.jsx(XX,{children:E.jsx(YX,{src:zF,alt:"Loading illustration",style:{}})})})}),E.jsx(zw,{scene:"https://prod.spline.design/IkvUuAcfU3TUW6Zw/scene.splinecode",style:{position:"absolute",top:0,left:0,width:"100%",height:"100vh",transform:"scale(0.6)",transformOrigin:"center",transition:"opacity 0.5s ease-out",filter:"blur(0.5px)",overflow:"visible",zIndex:0,opacity:n&&i?1:0},onLoad:c}),E.jsx(See,{style:{width:400,backgroundColor:"black"}})]})}),E.jsxs(frt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},style:{position:"relative",zIndex:1,width:"100%"},children:E.jsxs(Ml,{children:[t("mobileUXSection1.title")," ",E.jsx(Fee,{src:d$,alt:"Phone icon"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(Pl,{children:t("mobileUXSection1.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:1.5,delay:.9},viewport:{once:!1,amount:.3},children:E.jsxs(Pu,{children:[E.jsx("a",{href:"https://sabsus.app/registrcompany/web",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Du,{children:t("mobileUXSection1.buttons.tryFree")})}),E.jsx("a",{href:"https://sabsus.app/login/demo@sabsus.com/demo2025",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Iu,{children:t("mobileUXSection1.buttons.viewDemo")})})]})})]})]})},Km="/assets/Dvd-BRVstBpY.svg",grt="/assets/key-COrsZ5fS.png",vrt="/assets/key1-DTKSUhVV.png",yrt="/assets/key2-Dk4BhJe9.png",xrt="/assets/key3-7vFRfLE_.png",brt="/assets/key4-CVkze-On.png",wrt="/assets/key5-DtmJhm8-.png",Srt="/assets/key6-BbufmUi-.png",_rt="/assets/key7-B4ctNb0f.png",Ert=U(G.div)`
  margin: 0 auto;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: hidden;

  .swiper {
    width: 100vw;
    padding: 0 0;
    margin: 0 auto;
  }

  .swiper-slide {
    padding: 0 0;
    margin: 0 auto;
    width: 100vw !important;
    display: flex;
    justify-content: center;
    transition: transform 0.3s ease;
  }
`,Art=U(G.div)`
  @media (min-width: 768px) {
      display: flex;
    flex-wrap: wrap;
    flex-direction: row;
    align-items: center;
    gap: 22px;
    margin: 0 auto;
    justify-content: center;
  }
`,QX=U.div`
  overflow: hidden;
  display: flex;
  flex-direction: column;
  border: 1px solid #212121;
  border-radius: 24px;
  padding: 20px;
  width: 100%;
  max-width: 311px;
  height: 350px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  will-change: transform, box-shadow;
  transition:
    transform 0.3s ease,
    box-shadow 0.3s ease;
  gap: 10px;
  align-items: flex-start;
  // margin: 0 auto;

  @media screen and (min-width: 1440px) {
    width: 380px;
  }
`,KX=U.img`
  filter: drop-shadow(0 0 20px rgba(43, 67, 226, 0.7));
  transition: filter 0.3s ease;
  width: 199px;
height: 199px;
  
  &:hover {
    filter: drop-shadow(0 0 30px rgba(35, 62, 236, 0.84));
`,ZX=U.h3`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 17px;
  line-height: 130%;
  color: var(--white-100);
`,$X=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  line-height: 130%;
  color: var(--white-60);
`,Trt=()=>{const e=Yr({query:"(max-width: 767px)"}),{t}=jt(),i=a=>{switch(a){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}},r=[{id:1,imageUrl:grt,key:"brandedMobileApp"},{id:2,imageUrl:vrt,key:"loyaltyPrograms"},{id:3,imageUrl:yrt,key:"smartDeliveryOptions"},{id:4,imageUrl:xrt,key:"pushNotifications"},{id:5,imageUrl:brt,key:"orderHistoryRepeats"},{id:6,imageUrl:wrt,key:"tableReservations"},{id:7,imageUrl:Srt,key:"customerFeedback"},{id:8,imageUrl:_rt,key:"personalAccountArea"}];return E.jsx(Ert,{as:G.div,initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.2},children:e?E.jsx(G.div,{children:E.jsx(Aa,{loop:!0,slidesPerView:1,spaceBetween:6,centeredSlides:!1,autoplay:{delay:1e3,disableOnInteraction:!1,reverseDirection:!1},speed:4e3,modules:[ra],className:"mySwiper",children:r.map(a=>E.jsx(na,{children:E.jsxs(QX,{children:[E.jsx(KX,{src:a.imageUrl,alt:t(`keyCapabilitiesSection3.cards.${a.key}.title`)}),E.jsx(ZX,{children:t(`keyCapabilitiesSection3.cards.${a.key}.title`)}),E.jsx($X,{children:t(`keyCapabilitiesSection3.cards.${a.key}.desc`)})]})},a.id))})}):E.jsx(Art,{children:r.map((a,o)=>E.jsxs(QX,{as:G.div,...i(o),transition:{duration:.5,delay:o*.1},viewport:{once:!1,amount:.3},children:[E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:o*.25},viewport:{once:!1,amount:.3},children:E.jsx(KX,{src:a.imageUrl,alt:t(`keyCapabilitiesSection3.cards.${a.key}.title`)})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:o*.2},viewport:{once:!1,amount:.3},children:E.jsx(ZX,{children:t(`keyCapabilitiesSection3.cards.${a.key}.title`)})}),E.jsx($X,{children:t(`keyCapabilitiesSection3.cards.${a.key}.desc`)})]},a.id))})})},Crt=U(G.div)`
  margin: 0 auto;
  margin-top: 100px;
  width: 100%;
  height: 100%;
  max-width: 1440px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
`,Mrt=()=>{const{t:e}=jt();return E.jsxs(Crt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Ff,{children:[e("keyCapabilitiesSection1.title")," ",E.jsx(Ur,{src:Km,alt:""})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(Hf,{children:e("keyCapabilitiesSection1.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(pc,{children:e("keyCapabilitiesSection1.description")})}),E.jsx(Trt,{})]})},Prt="/assets/Frame%203577-background-Cg3NCZBA.png",Drt="/assets/Frame%2035771-iphon-DVTv7mZA.png",Irt="/assets/black%20titanium2-iphon-BiMZmQrx.png",Rrt="/assets/Lightpered-linie-BAbAbg-a.png",Ort=U(G.div)`
  display: flex;
  padding: 0 16px;
  max-width: 1440px;
  margin: 0 auto;
  flex-direction: column;
  align-items: center;
  position: relative;
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
    width: 1440px;
    margin: 0 auto;
  }
`,Lrt=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity;
`,krt=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
    text-align: start;
  }
`,zrt=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
    text-align: start;
  }
`,Brt=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    position: absolute;
    max-width: 530px;
    width: 100%;
    margin: 0 auto 26px;
    top: 80%;
    right: 62%;
    text-align: start;
  }
`,jrt=U.div`
  margin-bottom: 374px;

  @media screen and (min-width: 768px) {
    margin-bottom: 700px;
  }

  @media screen and (min-width: 1440px) {
    margin-bottom: 609px;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
`,Nrt=U.div`
  position: absolute;
  top: 60%;
  left: 50%;
  width: 365px;
  height: 354px;
  transform: translate(-50%, -50%);
  overflow: visible;

  @media screen and (min-width: 768px) {
    top: 60%;
    width: 700px;
    height: 633px;
  }

  @media screen and (min-width: 1440px) {
    left: 70%;
    top: 50%;
    height: 660px;
  }
`,Vrt=U(G.img)`
  position: absolute;
  bottom: 22%;
  left: 0;
  width: 100%;
  height: 100%;
`,Urt=U(G.img)`
  position: absolute;
  top: 10%;
  left: 6%;
  width: 100%;
  height: 100%;
`,Frt=U(G.img)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,Hrt=U(G.img)`
  position: absolute;
  top: 9%;
  left: 16%;
  width: 77%;
  height: 77%;
  overflow: visible;

  @media screen and (min-width: 768px) {
    left: 15%;
  }

  @media screen and (min-width: 1440px) {
    left: 16%;

  }
`,Grt=U(G.div)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 0.8) 0%,
    rgba(255, 255, 255, 0) 70%
  );
  opacity: 0;
  border-radius: 50%;
  pointer-events: none;
`,Wrt=()=>{const{t:e}=jt();return E.jsxs(Ort,{children:[E.jsxs(jrt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Lrt,{children:[e("livePrepInsights1.title"),E.jsx(Ur,{src:xo,alt:"🚀"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(krt,{children:e("livePrepInsights1.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(zrt,{children:e("livePrepInsights1.description")})})]}),E.jsxs(Nrt,{children:[E.jsx(Frt,{src:Prt,alt:"background lines",initial:{opacity:.8},animate:{opacity:1},transition:{duration:2,repeat:1/0,repeatType:"reverse"}}),E.jsx(Vrt,{src:Drt,alt:"phone",initial:{y:-10},animate:{y:0},transition:{duration:3,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}}),E.jsx(Urt,{src:Irt,alt:"phone",initial:{y:0},animate:{y:-10},transition:{duration:3,repeat:1/0,repeatType:"reverse",ease:"easeInOut",delay:.5}}),E.jsx(Hrt,{src:Rrt,alt:"glowing lines",initial:{opacity:.5},animate:{opacity:1},transition:{duration:2,repeat:1/0,repeatType:"reverse"}}),E.jsx(Grt,{initial:{scale:.8,opacity:0},animate:{scale:1.2,opacity:.3},transition:{duration:3,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}})]}),E.jsx(Brt,{children:e("livePrepInsights1.footerText")})]})},qrt="/assets/Videocassette-eJLk5PIc.svg",Xrt="/assets/GloryToUkraine-zPjOr8SI.webm",JX="/assets/VideoBackground-pTgMBc66.png",Yrt="data:image/svg+xml,%3csvg%20width='32'%20height='34'%20viewBox='0%200%2032%2034'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13%2024V14L11%2015.875'%20stroke='white'%20stroke-opacity='0.7'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M17%2023.3752C17.5223%2023.7675%2018.1715%2024%2018.875%2024C20.6009%2024%2022%2022.6009%2022%2020.875C22%2019.1491%2020.6009%2017.75%2018.875%2017.75C18.1715%2017.75%2017.5223%2017.9825%2017%2018.3748L17.625%2014H22'%20stroke='white'%20stroke-opacity='0.7'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M25.5479%208.42028C31.2027%2013.6588%2031.5121%2022.4595%2026.2389%2028.0771C20.9657%2033.6948%2012.1069%2034.0021%206.45206%2028.7636C0.797264%2023.525%200.487906%2014.7244%205.76109%209.10671C8.76048%205.91139%2012.92%204.43414%2016.9901%204.71831M15%201.5L18.5658%204.87773L15%208.5'%20stroke='white'%20stroke-opacity='0.7'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Qrt="data:image/svg+xml,%3csvg%20width='32'%20height='34'%20viewBox='0%200%2032%2034'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13%2024V14L11%2015.875'%20stroke='white'%20stroke-opacity='0.7'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M17%2023.3752C17.5223%2023.7675%2018.1715%2024%2018.875%2024C20.6009%2024%2022%2022.6009%2022%2020.875C22%2019.1491%2020.6009%2017.75%2018.875%2017.75C18.1715%2017.75%2017.5223%2017.9825%2017%2018.3748L17.625%2014H22'%20stroke='white'%20stroke-opacity='0.7'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M6.45206%208.42028C0.797264%2013.6588%200.487905%2022.4595%205.76109%2028.0771C11.0343%2033.6948%2019.8931%2034.0021%2025.5479%2028.7636C31.2027%2023.525%2031.5121%2014.7244%2026.2389%209.10671C23.2395%205.91139%2019.08%204.43414%2015.0099%204.71831M17%201.5L13.4342%204.87773L17%208.5'%20stroke='white'%20stroke-opacity='0.7'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Krt=U.div`
  margin: 0 auto;
  width: 100%;
  height: 100%;
  margin-bottom: 100px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
`,Zrt=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity;
`,$rt=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,Jrt=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,ent=U.img`
  border-radius: 25px;
  padding: 4px;
  overflow: visible;
  font-size: 13px;
  width: 20px;
  margin-left: 6px;
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 1px 2px rgba(0, 0, 0, 0.06);
  background: linear-gradient(
      315deg,
      rgba(122, 121, 122, 0) 7%,
      rgba(172, 172, 172, 0) 86%
    )
    rgba(255, 255, 255, 0.03);
  -webkit-transform: translateZ(0);
`,tnt=U.div`
  margin: 0 auto;
  width: 343px;
  height: auto;
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(11.129203796386719px);
  box-shadow:
    0 6px 11px -6px rgba(0, 0, 0, 0.03),
    0 1px 3px -1px rgba(0, 0, 0, 0.08),
    inset 0 -6px 17px 0 rgba(255, 255, 255, 0.03),
    inset 0 -3px 4px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  border-radius: 12px;
  border-left: 0.15px solid #212121;
  border-right: 0.15px solid #212121;
  border-top: 0.15px solid #212121;

  @media screen and (min-width: 768px) {
    max-width: 740px;
    width: 100%;
    margin: 0 auto;
  }

  @media screen and (min-width: 1440px) {
    max-width: 1130px;
  }
`,int=U.div`
  padding: 16px 22px;
  width: 100%;
  max-width: 343px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-top: 0.35px solid rgba(33, 33, 33, 0.7);
  -webkit-backdrop-filter: blur(11px);
  backdrop-filter: blur(11px);
  box-shadow:
    0 6px 11px -6px rgba(0, 0, 0, 0.03),
    0 1px 3px -1px rgba(0, 0, 0, 0.08),
    inset 0 -6px 17px 0 rgba(255, 255, 255, 0.03),
    inset 0 -3px 4px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  background-image: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.03),
    rgba(255, 255, 255, 0.01)
  );

  @supports (-webkit-touch-callout: none) {
    background-color: rgba(85, 85, 85, 0.86);
    -webkit-backdrop-filter: saturate(180%) blur(11px);
  }

  @media screen and (min-width: 768px) {
    max-width: 740px;
    width: 100%;
    margin: 0 auto;
    padding: 16px 24px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 1130px;
    padding: 16px 32px;
  }
`,rnt=U.img`
  width: 37px;
  height: 9px;
`,nnt=U.img`
  width: 82px;
  height: 11px;
`,snt=U.img`
  width: 79px;
  height: 19px;
`,ant=U.div`
  position: relative;
  width: 100%;
  padding-bottom: 56.25%; /* 16:9 aspect ratio by default */
  overflow: hidden;
  border-radius: 10px;
  background: rgba(2, 0, 23, 1);
  @media (max-width: 768px) {
    padding-bottom: 75%; /* 4:3 для мобільних пристроїв */
  }

  @media (min-width: 1920px) {
    padding-bottom: 50%; /* Широкоекранні монітори */
  }
`,ont=U.video`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  background: rgba(255, 255, 255, 0.03);
`,lnt=U.div`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  gap: 16px;
  z-index: 2;
  flex-direction: row;
  align-items: center;
`,a6=U.button`
  border: none;
  border-radius: 50%;
  backdrop-filter: blur(6px);
  background-color: rgba(255, 255, 255, 0.08);
  color: white;
  cursor: pointer;
  transition: background 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;

  &:hover {
    background-color: rgba(255, 255, 255, 0.15);
  }

  @media screen and (min-width: 768px) {
    width: 48px;
    height: 48px;
  }

  @media screen and (min-width: 1440px) {
    width: 54px;
    height: 54px;
  }
`,cnt=U(a6)`
  background-color: rgba(255, 255, 255, 0.12);
  width: 62px;
  height: 62px;

  @media screen and (min-width: 768px) {
    width: 72px;
    height: 72px;
  }

  @media screen and (min-width: 1440px) {
    width: 80px;
    height: 80px;
  }
`,eY=U.img`
  width: 20px;
  height: 20px;

  @media screen and (min-width: 768px) {
    width: 24px;
    height: 24px;
  }

  @media screen and (min-width: 1440px) {
    width: 28px;
    height: 28px;
  }
`,unt=U.div`
  position: relative;
  width: 100%;
  height: 100%;
`,Zm=()=>{const e=J.useRef(null),[t,i]=J.useState(!1),[r,n]=J.useState(!1),{t:s}=jt(),a=kf("(max-width:768px)"),o=kf("(max-width:1024px)"),{videoUrl:l,loading:c,error:u}=n_e(a?"mobile":o?"tablet":"desktop"),[,h]=J.useState(!1);J.useEffect(()=>{const g=new IntersectionObserver(v=>{v[0].isIntersecting&&(h(!0),g.disconnect())},{threshold:.1});return e.current&&g.observe(e.current),()=>g.disconnect()},[]),J.useEffect(()=>{const g=new Image;g.src=JX},[]),J.useEffect(()=>{let g;return r&&(g=setTimeout(()=>{n(!1)},3e3)),()=>{g&&clearTimeout(g)}},[r]);const f=()=>{e.current&&(e.current.paused?e.current.play().then(()=>{i(!0),n(!0)}).catch(g=>{console.error("Video play failed:",g),i(!1)}):(e.current.pause(),i(!1),n(!0)))},m=g=>{e.current&&(e.current.currentTime+=g,n(!0))};return J.useEffect(()=>{const g=e.current;if(!g)return;const v=()=>{i(!0),n(!0),setTimeout(()=>n(!1),3e3)},x=()=>{i(!1),n(!0),setTimeout(()=>n(!1),3e3)};return g.addEventListener("play",v),g.addEventListener("pause",x),g.addEventListener("ended",()=>i(!1)),()=>{g.removeEventListener("play",v),g.removeEventListener("pause",x),g.removeEventListener("ended",()=>i(!1))}},[]),c?E.jsx(vw,{}):u?E.jsx(gw,{message:u}):E.jsxs(Krt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Zrt,{children:[s("stepByStepGuidance1.title")," ",E.jsx(ent,{src:qrt,alt:"⏺️"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx($rt,{children:s("stepByStepGuidance1.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(Jrt,{children:s("stepByStepGuidance1.description")})}),E.jsxs(tnt,{children:[E.jsxs(int,{children:[E.jsx(rnt,{src:Gee,alt:"Logo"}),E.jsx(nnt,{src:u3,alt:"Logo"}),E.jsx(snt,{src:Wee,alt:"Tools"})]}),E.jsx(unt,{onClick:f,children:E.jsxs(ant,{children:[E.jsxs(ont,{ref:e,poster:JX,controls:!0,children:[E.jsx("source",{src:l||Xrt,type:"video/mp4"}),s("videoNotSupported")]}),r&&E.jsxs(lnt,{children:[E.jsx(a6,{onClick:g=>{m(-15),g.stopPropagation()},children:E.jsx(eY,{src:Qrt,alt:"Rewind"})}),E.jsx(cnt,{onClick:g=>{f(),g.stopPropagation()},children:t?"⏸":"▶"}),E.jsx(a6,{onClick:g=>{m(15),g.stopPropagation()},children:E.jsx(eY,{src:Yrt,alt:"Fast forward"})})]})]})})]})]})},hnt=U.div`
  display: flex;
  margin: 0 auto;
  width: 100%;
  height: 100%;
  margin-bottom: 100px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
`,dnt=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,fnt=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,pnt=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,mnt=U.img`
  border-radius: 25px;
  padding: 4px;
  overflow: visible;
  font-size: 13px;
  width: 20px;
  margin-left: 6px;
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 1px 2px rgba(0, 0, 0, 0.06);
  background: linear-gradient(
      315deg,
      rgba(122, 121, 122, 0) 7%,
      rgba(172, 172, 172, 0) 86%
    )
    rgba(255, 255, 255, 0.03);
  -webkit-transform: translateZ(0);
`,gnt=U.div`
  display: flex;
  flex-direction: column;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;

  @media screen and (min-width: 768px) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    width: 100vw;
    padding: 0 24px;
    position: relative;

    &::before {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      width: 1px;
      transform: translateX(-50%);
    }

    &::after {
      content: '';
      position: absolute;
      left: 2%;
      right: 0;
      bottom: 0;
      height: 1px;
      width: 96%;
      background-color: rgba(255, 255, 255, 0.25);
    }

    & > :nth-child(1) {
      width: 80%;
    }
    & > :nth-child(2) {
      width: 120%;
      margin-left: -20%;
    }
    & > :nth-child(3) {
      width: 120%;
    }
    & > :nth-child(4) {
      width: 80%;
      margin-left: 20%;
    }
    & > :nth-child(5) {
      width: 80%;
    }
    & > :nth-child(6) {
      width: 120%;
      margin-left: -20%;
    }
    & > :nth-child(7) {
      width: 120%;
    }
    & > :nth-child(8) {
      width: 80%;
      margin-left: 20%;
    }
  }

  @media screen and (min-width: 1440px) {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    grid-template-rows: auto auto auto;
    max-width: 1400px;
    width: 100%;
    margin: 0 auto;
    padding: 0 20px;
    box-sizing: border-box;

    &::before,
    &::after {
      display: none;
    }

    & > * {
      width: auto !important;
      margin-left: 0 !important;
    }

    & > :nth-child(1) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important;
    }
    & > :nth-child(2) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25);
    }
    & > :nth-child(3) {
      grid-column: 3;
    }
    & > :nth-child(4) {
      grid-column: 1;
      width: 151% !important;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important;
    }
    & > :nth-child(5) {
      grid-column: 2;
      width: 151% !important;
      margin-left: 51% !important;
      border: none;
    }
    & > :nth-child(6) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25);
    }
    & > :nth-child(7) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important;
    }
    & > :nth-child(8) {
      grid-column: 3;
    }
  }
`,vnt=U(G.div)`
  padding: 16px;
  width: 100%;
  height: fit-content;
  display: flex;
  gap: 4px;
  flex-direction: column;
  position: relative;

  &:not(:last-child)::after {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 0;
    width: 100%;
    height: 1px;
    background-color: rgba(255, 255, 255, 0.25);
  }

  @media screen and (min-width: 768px) {
    padding: 32px;
    height: 100%;

    &::after {
      top: 0%;
    }

    &:nth-child(odd) {
      border-right: 1px solid rgba(255, 255, 255, 0.25);
    }
    &:nth-child(even) {
      border-left: 1px solid rgba(255, 255, 255, 0.25);
    }
  }

  @media screen and (min-width: 1440px) {
    &:nth-child(odd) {
      border-right: none;
    }
    &:nth-child(even) {
      border-left: none;
    }
  }
`,ynt=U(G.p)`
  border-radius: 6px;
  padding: 6px 13px;
  width: 36px;
  height: 36px;
  margin: 10px 0px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.12) 7%,
      rgba(255, 255, 255, 0) 86%
    ),
    rgba(255, 255, 255, 0.03);
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);
`,xnt=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);
`,bnt=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-80);
  @media screen and (min-width: 768px) {
    font-size: 17px;
  }
`,wnt=U.div`
  display: none;

  @media screen and (min-width: 768px) {
    display: flex;
    background-color: rgba(255, 255, 255, 0.25);
    width: 1px;
    height: 100%;
  }
`,tY=U.div`
  position: absolute;
  width: 100vw;
  height: 1px;

  @media screen and (min-width: 768px) {
    width: 100vw;
    height: 1px;
    margin: 0 auto;
    left: 50%;
    transform: translateX(-50%);
  }
`,Mae=()=>{const{t:e}=jt(),t=[{id:"1",key:"fastOrdering"},{id:"2",key:"loyaltyPrograms"},{id:"3",key:"deliveryFlow"},{id:"4",key:"reservationSystem"},{id:"5",key:"notifications"},{id:"6",key:"feedback"},{id:"7",key:"selfService"},{id:"8",key:"customerProfile"}],i=r=>{switch(r){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}};return E.jsxs(hnt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(dnt,{children:[e("howWeWorkSection1.title")," ",E.jsx(mnt,{src:xo,alt:"Icon"})]})}),E.jsx(fnt,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:e("howWeWorkSection1.heading")}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(pnt,{children:e("howWeWorkSection1.description")})}),E.jsxs(gnt,{children:[t.map((r,n)=>E.jsx(Bi.Fragment,{children:E.jsxs(vnt,{as:G.div,...i(n),transition:{duration:.5,delay:n*.1},viewport:{once:!1,amount:.3},children:[E.jsx(tY,{}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.15},viewport:{once:!1,amount:.3},children:E.jsx(ynt,{children:r.id})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.2},viewport:{once:!1,amount:.3},children:E.jsx(xnt,{children:e(`howWeWorkSection1.cards.${r.key}.title`)})}),E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:n*.25},viewport:{once:!1,amount:.3},children:E.jsx(bnt,{children:e(`howWeWorkSection1.cards.${r.key}.desc`)})}),E.jsx(tY,{})]})},n)),E.jsx(wnt,{})]})]})},Snt="data:image/svg+xml,%3csvg%20width='20'%20height='19'%20viewBox='0%200%2020%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.99992%201.16406V17.4974M1.83325%209.33073H18.1666'%20stroke='white'%20stroke-opacity='0.25'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",_nt=U.div`
  display: flex;
  margin: 0 auto;
  // margin-top: 100px;
  width: 100%;
  height: 100%;
  margin-bottom: 100px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  @media screen and (min-width: 1440px) {
    width: 100%;
    max-width: 1400px;

    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: space-between;
    align-items: flex-start;
    gap: 2px;
  }
`,Ent=U.h2`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  margin-bottom: 26px;
  color: var(--white-100);
`,Ant=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 26px;
`,Tnt=U.div`
  position: relative;
  border: 1px solid var(--line);
  padding: 16px;
  width: 343px;
  display: flex;
  flex-direction: column;
  gap: none;
  // height: 271px;
  overflow: hidden;
  box-shadow:
    0 0 0 0 var(--white),
    0 0 0 1px rgba(244, 244, 245, 0.1),
    0 0 0 0 rgba(0, 0, 0, 0),
    0 6px 9px 0 rgba(0, 0, 0, 0.25);
  transition:
    box-shadow 0.4s ease,
    border 0.4s ease;
  border-bottom: 1px solid var(--white-25);

  &:hover {
    border-bottom: 1px solid var(--white-25);
    // border-radius: 16px;
    text-shadow: 0 0 12px rgba(255, 255, 255, 0.3);
  }

  @media screen and (min-width: 744px) {
    width: 696px;
  }

  @media screen and (min-width: 1440px) {
    width: 100%;
    max-width: 650px;
  }
`,Cnt=U.button`
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  align-items: center;
  justify-content: space-between;

  border: none;
  border-radius: 16px;
  padding: 14px;
  width: 100%;
  height: auto;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 20px;
  line-height: 130%;
  color: var(--white-100);
  text-align: left;
  background: transparent;

  transition: all 0.3s ease;

  &:hover {
    transform: translateY(-2px);
    text-shadow: 0 0 12px rgba(255, 255, 255, 0.5);
  }

  @media screen and (min-width: 744px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,Mnt=U.div`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-80);
  transform: scaleY(${({$isOpen:e})=>e?1:0});
  transform-origin: top;
  height: auto;
  max-height: ${({$isOpen:e})=>e?"1000px":"0"};
  opacity: ${({$isOpen:e})=>e?1:0};
  overflow: hidden;
  transition:
    transform 0.4s ease,
    opacity 0.3s ease,
    max-height 0.4s ease;
  margin-top: ${({$isOpen:e})=>e?"12px":"0"};
  will-change: transform, opacity, max-height;

  @media screen and (min-width: 744px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,Pnt=U.img.attrs(()=>({}))`
  width: 14px;
  height: 15px;
  transition: transform 0.6s ease;

  ${({$rotate:e})=>e&&`
        transform: rotate(136deg);
      `}

  @media screen and (min-width: 744px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,Dnt=U.div`
  @media screen and (min-width: 1440px) {
    min-width: 650px;
    width: 100%;
    display: flex;
    align-items: flex-start;
    flex-direction: column;
    flex-wrap: nowrap;
  }
`,Int=U.div`
  @media screen and (min-width: 1440px) {
    width: 100%;
    max-width: 650px;

    flex-shrink: 0; /* Забороняємо звуження */
  }
`,$f=()=>{const[e,t]=J.useState(null),{t:i}=jt(),r=s=>{t(a=>a===s?null:s)},n=[{question:i("faqSection.questions.q1.question"),answer:i("faqSection.questions.q1.answer")},{question:i("faqSection.questions.q2.question"),answer:i("faqSection.questions.q2.answer")},{question:i("faqSection.questions.q3.question"),answer:i("faqSection.questions.q3.answer")},{question:i("faqSection.questions.q4.question"),answer:i("faqSection.questions.q4.answer")},{question:i("faqSection.questions.q5.question"),answer:i("faqSection.questions.q5.answer")},{question:i("faqSection.questions.q6.question"),answer:i("faqSection.questions.q6.answer")},{question:i("faqSection.questions.q7.question"),answer:i("faqSection.questions.q7.answer")},{question:i("faqSection.questions.q8.question"),answer:i("faqSection.questions.q8.answer")},{question:i("faqSection.questions.q9.question"),answer:i("faqSection.questions.q9.answer")},{question:i("faqSection.questions.q10.question"),answer:i("faqSection.questions.q10.answer")},{question:i("faqSection.questions.q11.question"),answer:i("faqSection.questions.q11.answer")},{question:i("faqSection.questions.q12.question"),answer:i("faqSection.questions.q12.answer")},{question:i("faqSection.questions.q13.question"),answer:i("faqSection.questions.q13.answer")},{question:i("faqSection.questions.q14.question"),answer:i("faqSection.questions.q14.answer")},{question:i("faqSection.questions.q15.question"),answer:i("faqSection.questions.q15.answer")}];return E.jsxs(_nt,{children:[E.jsxs(Dnt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsx(Ent,{children:i("faqSection.title")})}),E.jsx(G.div,{initial:{opacity:0,x:-40},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.2},viewport:{once:!0,amount:.3},children:E.jsx(Ant,{children:i("faqSection.subtitle")})})]}),E.jsx(Int,{children:n.map((s,a)=>E.jsx(G.div,{initial:{opacity:0,y:a%2===0?40:-40},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:a*.1},viewport:{once:!1,amount:.3},children:E.jsxs(Tnt,{children:[E.jsxs(Cnt,{onClick:()=>r(a),children:[s.question,E.jsx(Pnt,{src:Snt,alt:"Toggle answer",$rotate:e===a})]}),E.jsx(G.div,{initial:{opacity:0,scale:.9},animate:e===a?{opacity:1,scale:1}:{opacity:0,scale:.9},transition:{duration:.4},style:{overflow:"hidden"},children:E.jsx(Mnt,{$isOpen:e===a,children:s.answer})})]})},a))})]})},Rnt=()=>E.jsxs(ed,{children:[E.jsx(mrt,{}),E.jsx(Mrt,{}),E.jsx(Wrt,{}),E.jsx(Zm,{}),E.jsx(Mae,{}),E.jsx(qf,{}),E.jsx(Wf,{}),E.jsx(mc,{}),E.jsx($f,{}),E.jsx(Ru,{})]}),Ont="/assets/hero-pos-D76bT3Zj.png",Pae="/assets/ControlKnobs-BF7tvuM7.svg",Lnt=U.div`
  margin: 0 auto;
  width: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center; /* Додаємо для вертикального центрування */
  top: 584px;
  overflow: visible;
  @media screen and (min-width: 768px) {
    width: 100%;
    // margin-top: 400px;
    margin-bottom: 100px;
    height: auto;
  }

  @media screen and (min-width: 1440px) {
    margin-top: 0px;
    margin-bottom: 150px;
  }

  @media (min-width: 1920px) {
    max-width: 1920px;
    margin: 0px auto ;
  }
`,knt=U.div`
  position: relative; /* Змінюємо на relative */
  width: 100%;
  max-width: 1920px;
  margin: 0 auto;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  z-index: -1;
  overflow: visible;
  top: -750px;

 

  iframe,
  canvas {
    width: 100% !important;
    height: auto !important;
    display: block;
    position: relative;
    z-index: 1;
    object-fit: contain; /* Змінюємо на contain для коректного відображення */
    margin: 0 auto;
  }

  @media screen and (max-width: 767px) {
    height: 100vh;



    iframe,
    canvas {
      height: 100% !important;
      object-fit: cover;
      pointer-events: none;
      opacity: 0.7;
    }
  }

  @media screen and (min-width: 768px) {
    iframe,
    canvas {
      width: 100vw !important; /* Дозволяємо розширення за межі екрану */
      height: 100vh !important;
      left: 50%;
      top: 30px;
      transform: translateX(-50%);
    }
  }

  @media screen and (min-width: 1440px) {
    iframe,
    canvas {
    top: 50px;
      // max-width: 80vw;
    }
  }

  @media (min-width: 1920px) {
    iframe,
    canvas {
    top: -140px;
     
    }
  
  }

`,znt=U(G.div)`
  position: absolute;
  width: 4px;
  height: 4px;
  background: white;
  border-radius: 50%;
  filter: drop-shadow(0 0 6px white);
  opacity: 0.8;
  z-index: 2;
`,Bnt=U.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 2;
`,jnt=U.div`
  position: absolute;
  top: -100px;
  // top: 100%;
  left: 50%;
  transform: translate(-50%, -50%);

  @media screen and (min-width: 768px) {
    top: -0px;
  }

  @media (min-width: 1920px) {
    top: 350px;
  }
`,iY=()=>{const e=Array.from({length:100},()=>({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,delay:Math.random()*3,duration:1+Math.random()*2}));return E.jsxs("div",{style:{position:"relative",width:"100%"},children:[E.jsx("img",{src:Ont,alt:"3D Scene",style:{width:"100%",height:"auto",filter:"blur(0.5px)",transform:"rotate(-10deg)",display:"block"}}),E.jsx(Bnt,{children:e.map((t,i)=>E.jsx(znt,{style:{top:t.top,left:t.left},animate:{opacity:[0,1,0],scale:[.3,.6,.3]},transition:{duration:t.duration,repeat:1/0,repeatType:"loop",delay:t.delay}},i))})]})},Nnt=()=>{const e=kf("(max-width: 767px)"),{t}=jt();return E.jsxs(Lnt,{style:{},children:[E.jsx(knt,{children:e?E.jsx(iY,{}):E.jsx(J.Suspense,{fallback:E.jsx(iY,{}),children:E.jsx(zw,{scene:"https://prod.spline.design/weK184EAiAKpQ3YI/scene.splinecode",style:{transition:"transform 0.5s ease-out",filter:"blur(0.5px)",maxWidth:"100%",overflow:"visible"}})})}),E.jsxs(jnt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},style:{position:"relative",zIndex:1,width:"100%"},children:E.jsxs(Ml,{children:[t("terminalControlSection.title")," ",E.jsx(Ur,{src:Pae,alt:"💰"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(Pl,{children:t("terminalControlSection.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:1.5,delay:.9},viewport:{once:!1,amount:.3},children:E.jsxs(Pu,{children:[E.jsx("a",{href:"https://sabsus.app/registrcompany/web",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Du,{children:t("terminalControlSection.buttons.tryFree")})}),E.jsx("a",{href:"https://sabsus.app/login/demo@sabsus.com/demo2025",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Iu,{children:t("terminalControlSection.buttons.viewDemo")})})]})})]})]})},Vnt="/assets/key-Cz_ordvd.png",Unt="/assets/key1-D02g7vjO.png",Fnt="/assets/key2-B70rB5Rk.png",Hnt="/assets/key3-k_HMyrqD.png",Gnt="/assets/key4-Dr2qy6oS.png",Wnt="/assets/key5-DznIbqsL.png",qnt="/assets/key6-C77F4vhq.png",Xnt="/assets/key7-Jm8eQrS-.png",Ynt=U(G.div)`
  margin: 0 auto;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: hidden;

  .swiper {
    width: 100vw;
    padding: 0 0;
    margin: 0 auto;
  }

  .swiper-slide {
    padding: 0 0;
    margin: 0 auto;
    width: 100vw !important;
    display: flex;
    justify-content: center;
    transition: transform 0.3s ease;
  }
`,Qnt=U(G.div)`
  @media (min-width: 768px) {
    display: flex;
    flex-wrap: wrap;
    flex-direction: row;
    align-items: center;
    gap: 22px;
    margin: 0 auto;
    justify-content: center;
  }
`,rY=U.div`
  overflow: hidden;
  display: flex;
  flex-direction: column;
  border: 1px solid #212121;
  border-radius: 24px;
  padding: 20px;
  width: 100%;
  max-width: 311px;
  height: 350px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  will-change: transform, box-shadow;
  transition:
    transform 0.3s ease,
    box-shadow 0.3s ease;
  gap: 10px;
  align-items: flex-start;
  // margin: 0 auto;
  justify-content: center;

  @media screen and (min-width: 1440px) {
    width: 380px;
  }
`,nY=U.img`
  filter: drop-shadow(0 0 20px rgba(43, 67, 226, 0.7));
  transition: filter 0.3s ease;
  width: 199px;
height: 199px;
  
  &:hover {
    filter: drop-shadow(0 0 30px rgba(35, 62, 236, 0.84));
`,sY=U.h3`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 17px;
  line-height: 130%;
  color: var(--white-100);
`,aY=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  line-height: 130%;
  color: var(--white-60);
`,Knt=()=>{const e=Yr({query:"(max-width: 767px)"}),{t}=jt(),i=a=>{switch(a){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}},r=[{id:1,imageUrl:Vnt,key:"orderManagement"},{id:2,imageUrl:Unt,key:"shiftTracking"},{id:3,imageUrl:Fnt,key:"tableLayout"},{id:4,imageUrl:Hnt,key:"qrPayments"},{id:5,imageUrl:Gnt,key:"accessControl"},{id:6,imageUrl:Wnt,key:"receiptPrinting"},{id:7,imageUrl:qnt,key:"depositTips"},{id:8,imageUrl:Xnt,key:"roleManagement"}];return E.jsx(Ynt,{as:G.div,initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.2},children:e?E.jsx(G.div,{children:E.jsx(Aa,{loop:!0,slidesPerView:1,spaceBetween:6,centeredSlides:!1,autoplay:{delay:1e3,disableOnInteraction:!1,reverseDirection:!1},speed:4e3,modules:[ra],className:"mySwiper",children:r.map(a=>E.jsx(na,{children:E.jsxs(rY,{children:[E.jsx(nY,{src:a.imageUrl,alt:t(`keyCapabilitiesSection1.cards.${a.key}.title`)}),E.jsx(sY,{children:t(`keyCapabilitiesSection1.cards.${a.key}.title`)}),E.jsx(aY,{children:t(`keyCapabilitiesSection1.cards.${a.key}.desc`)})]})},a.id))})}):E.jsx(Qnt,{children:r.map((a,o)=>E.jsxs(rY,{as:G.div,...i(o),transition:{duration:.5,delay:o*.1},viewport:{once:!1,amount:.3},children:[E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:o*.25},viewport:{once:!1,amount:.3},children:E.jsx(nY,{src:a.imageUrl,alt:t(`keyCapabilitiesSection1.cards.${a.key}.title`)})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:o*.2},viewport:{once:!1,amount:.3},children:E.jsx(sY,{children:t(`keyCapabilitiesSection1.cards.${a.key}.title`)})}),E.jsx(aY,{children:t(`keyCapabilitiesSection1.cards.${a.key}.desc`)})]},a.id))})})},Znt=U(G.div)`
  margin: 0 auto;
  margin-top: -100px;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;


  @media screen and (min-width: 768px) {
  }
  @media screen and (min-width: 1440px) {
      max-width: 1440px;
  }

   @media (min-width: 1920px) {
    margin-top: -350px;
  }
`,$nt=()=>{const{t:e}=jt();return E.jsxs(Znt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Ff,{children:[e("keyCapabilitiesSection3.title")," ",E.jsx(Ur,{src:Km,alt:""})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(Hf,{children:e("keyCapabilitiesSection3.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(pc,{children:e("keyCapabilitiesSection3.description")})}),E.jsx(Knt,{})]})},Jnt="/assets/iPadPro2020-4dapxMsq.png",est=U(G.div)`
  display: flex;
  padding: 0 16px;
  max-width: 1440px;
  margin: 0 auto;
  flex-direction: column;
  align-items: center;
  position: relative;

  @media screen and (min-width: 1440px) {
    width: 1440px;
  }
`,tst=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity;
`,ist=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
    text-align: start;
  }
`,rst=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
    text-align: start;
  }
`,nst=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    position: absolute;
    max-width: 530px;
    width: 100%;
    margin: 0 auto 26px;
    top: 80%;
    right: 62%;
    text-align: start;
  }
`,sst=U.div`
  margin-bottom: 374px;

  @media screen and (min-width: 768px) {
    margin-bottom: 700px;
  }

  @media screen and (min-width: 1440px) {
    margin-bottom: 609px;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
`,ast=U.div`
  position: absolute;
  top: 60%;
  left: 50%;
  width: 365px;
  height: 354px;
  transform: translate(-50%, -50%);
  overflow: visible;

  @media screen and (min-width: 768px) {
    top: 60%;
    width: 700px;
    height: 633px;
  }

  @media screen and (min-width: 1440px) {
    left: 70%;
    top: 50%;
    height: 660px;
  }
`,ost=U(G.img)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,lst=U(G.div)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 0.8) 0%,
    rgba(255, 255, 255, 0) 70%
  );
  opacity: 0;
  border-radius: 50%;
  pointer-events: none;
`,cst=()=>{const{t:e}=jt();return E.jsxs(est,{children:[E.jsxs(sst,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(tst,{children:[e("kitchenPrepInsights2.title"),E.jsx(Ur,{src:xo,alt:"🚀"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(ist,{children:e("kitchenPrepInsights2.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(rst,{children:e("kitchenPrepInsights2.description")})})]}),E.jsxs(ast,{children:[E.jsx(ost,{src:Jnt,alt:"background lines",initial:{y:0,opacity:.5},animate:{y:-10,opacity:1},transition:{duration:2,repeat:1/0,repeatType:"reverse",ease:"easeInOut",delay:.5}}),E.jsx(lst,{initial:{scale:.8,opacity:0},animate:{scale:1.2,opacity:.3},transition:{duration:3,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}})]}),E.jsx(nst,{children:e("kitchenPrepInsights2.footerText")})]})},ust=U.div`
  display: flex;
  margin: 0 auto;
  // margin-top: 100px;
  width: 100%;
  height: 100%;
  margin-bottom: 100px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
`,hst=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity; /* Оптимізація анімації */

  @media screen and (min-width: 768px) {
    /* Додаткові стилі для планшетів */
  }

  @media screen and (min-width: 1440px) {
    /* Додаткові стилі для десктопів */
  }
`,dst=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,fst=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,pst=U.img`
  border-radius: 25px;
  padding: 4px;
  overflow: visible;
  font-size: 13px;
  width: 20px;
  margin-left: 6px;

  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 1px 2px rgba(0, 0, 0, 0.06);

  background: linear-gradient(
      315deg,
      rgba(122, 121, 122, 0) 7%,
      rgba(172, 172, 172, 0) 86%
    )
    rgba(255, 255, 255, 0.03);

  -webkit-transform: translateZ(0);
`,mst=U.div`
  display: flex;
  flex-direction: column;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;

  @media screen and (min-width: 768px) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    width: 100vw;
    // gap: 24px;
    padding: 0 24px;
    position: relative;

    /* Вертикальні бордери між картками */
    &::before {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      width: 1px;
      // background-color: rgba(255, 255, 255, 0.25);
      transform: translateX(-50%);
    }

    /* Горизонтальні бордери між рядами */
    &::after {
      content: '';
      position: absolute;
      left: 2%;
      right: 0;
      bottom: 0;
      height: 1px;
      width: 96%;
      background-color: rgba(255, 255, 255, 0.25);
    }

    /* Індивідуальні ширини для карток на планшеті */
    & > :nth-child(1) {
      width: 80%; /* Перша картка менша на 20% */
    }
    & > :nth-child(2) {
      width: 120%; /* Друга картка більша */
      margin-left: -20%; /* Зсуваємо для вирівнювання */
    }
    & > :nth-child(3) {
      width: 120%; /* Третя картка більша */
    }
    & > :nth-child(4) {
      width: 80%; /* Четверта картка менша */
      margin-left: 20%; /* Зсуваємо для вирівнювання */
    }
    /* Продовжуємо шаблон для решти карток */
    & > :nth-child(5) {
      width: 80%;
    }
    & > :nth-child(6) {
      width: 120%;
      margin-left: -20%;
    }
    & > :nth-child(7) {
      width: 120%;
    }
    & > :nth-child(8) {
      width: 80%;
      margin-left: 20%;
    }
  }

  @media screen and (min-width: 1440px) {
    display: grid;
    grid-template-columns: repeat(
      3,
      minmax(0, 1fr)
    ); /* Додано minmax для правильного розподілу простору */
    grid-template-rows: auto auto auto;
    max-width: 1400px;
    width: 100%;
    margin: 0 auto;
    padding: 0 20px; /* Додаємо падінги по боках */
    box-sizing: border-box; /* Щоб падінги враховувались у загальній ширині */

    /* Прибираємо бордери для десктопу */
    &::before,
    &::after {
      // display: none;
    }

    /* Скидаємо ширини для десктопу */
    & > * {
      width: auto !important;
      margin-left: 0 !important;
    }

    /* Розміщення карток для десктопу з бордерами */
    & > :nth-child(1) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Бордер праворуч */
    }
    & > :nth-child(2) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25); /* Бордер праворуч */
    }
    & > :nth-child(3) {
      grid-column: 3;
      /* Без бордера праворуч (остання в рядку) */
    }
    & > :nth-child(4) {
      grid-column: 1;
      width: 151% !important; /* Широка картка */
      //?  margin-left: 53%!important; /* Зсуваємо для вирівнювання */
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Прибираємо бордер для широкої картки */
    }
    & > :nth-child(5) {
      grid-column: 2;
      width: 151% !important; /* Широка картка */
      margin-left: 51% !important; /* Зсуваємо для вирівнювання */
      border: none; /* Бордер праворуч */
    }
    & > :nth-child(6) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25); /* Бордер праворуч */
    }
    & > :nth-child(7) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Бордер праворуч */
    }
    & > :nth-child(8) {
      grid-column: 3;
      /* Без бордера */
    }
  }
`,gst=U(G.div)`
  padding: 16px;
  width: 100%;
  height: fit-content;
  display: flex;
  gap: 4px;
  flex-direction: column;
  position: relative;

  /* Бордер для мобільної версії */
  &:not(:last-child)::after {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 0;
    width: 100%;
    height: 1px;
    background-color: rgba(255, 255, 255, 0.25);
  }

  @media screen and (min-width: 768px) {
    padding: 32px;
    height: 100%;

    /* Прибираємо бордери між картками для планшета */
    &::after {
      top: 0%;
      // display: none;
    }

    /* Додаткові бордери для окремих карток */
    &:nth-child(odd) {
      border-right: 1px solid rgba(255, 255, 255, 0.25);
    }
    &:nth-child(even) {
      border-left: 1px solid rgba(255, 255, 255, 0.25);
    }
  }

  @media screen and (min-width: 1440px) {
    &:nth-child(odd) {
      border-right: none;
    }
    &:nth-child(even) {
      border-left: none;
    }
  }
`,vst=U(G.p)`
  border-radius: 6px;
  padding: 6px 13px;
  width: 36px;
  height: 36px;
  margin: 10px 0px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.12) 7%,
      rgba(255, 255, 255, 0) 86%
    ),
    rgba(255, 255, 255, 0.03);

  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);

  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,yst=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,xst=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-80);
  @media screen and (min-width: 768px) {
    font-size: 17px;
  }

  @media screen and (min-width: 1440px) {
  }
`,bst=U.div`
  display: none;

  @media screen and (min-width: 768px) {
    display: flex;
    background-color: rgba(255, 255, 255, 0.25);
    width: 1px;
    height: 100%;
  }
`,oY=U.div`
  position: absolute;
  width: 100vw;
  height: 1px;
  // background-color: rgba(255, 255, 255, 0.25);

  @media screen and (min-width: 768px) {
    // display: none;
    width: 100vw;
    height: 1px;
    margin: 0 auto;
    left: 50%;
    transform: translateX(-50%);
  }
`,wst=()=>{const{t:e}=jt(),t=["instantOrderProcessing","multiModeOrderTypes","dynamicTableManagement","shiftStaffTracking","qrPaymentsDeposits","kitchenPrinterRouting","onTheFlyMenuUpdates","endOfShiftReports"],i=r=>{switch(r){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}};return E.jsxs(ust,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(hst,{children:[e("howWeWork1.title")," ",E.jsx(pst,{src:xo,alt:"Icon"})]})}),E.jsx(dst,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:e("howWeWork1.heading")}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(fst,{children:e("howWeWork1.description")})}),E.jsxs(mst,{children:[t.map((r,n)=>E.jsx(Bi.Fragment,{children:E.jsxs(gst,{as:G.div,...i(n),transition:{duration:.5,delay:n*.1},viewport:{once:!1,amount:.3},children:[E.jsx(oY,{}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.15},viewport:{once:!1,amount:.3},children:E.jsx(vst,{children:n+1})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.2},viewport:{once:!1,amount:.3},children:E.jsx(yst,{children:e(`howWeWork1.cards.${r}.title`)})}),E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:n*.25},viewport:{once:!1,amount:.3},children:E.jsx(xst,{children:e(`howWeWork1.cards.${r}.desc`)})}),E.jsx(oY,{})]})},r)),E.jsx(bst,{})]})]})},Sst=()=>E.jsxs(ed,{children:[E.jsx(Nnt,{}),E.jsx($nt,{}),E.jsx(cst,{}),E.jsx(Zm,{}),E.jsx(wst,{}),E.jsx(qf,{}),E.jsx(Wf,{}),E.jsx(mc,{}),E.jsx($f,{}),E.jsx(Ru,{})]}),_st="/assets/Cooking-DJbOL_ZI.svg",Est="/assets/big-BTxpjbxF.png",Ast="/assets/big1-BKPp-1IT.png",lY="/assets/big2-C0eihLFV.png",Tst="/assets/big3-B1HTIQDv.png",Cst="/assets/big4-B9SoqX4i.png",Mst="/assets/smoll-By5Hscyh.png",cY="/assets/smoll1-CUicdXJd.png",uY="/assets/smoll2-DphMoPF7.png",Pst="/assets/smoll3-C-0ufJEb.png",kD=()=>Math.floor(Math.random()*40+20),zD=()=>Math.random()*3+3,Dst=e=>cn`
  0% { transform: translateY(0); }
  50% { transform: translateY(-${e}px); }
  100% { transform: translateY(0); }
`,Ist=U.div`
  position: relative;
  width: 100%;
  height: 400px;
  overflow: visible;
  margin-top: 78px;
`,BD=U(Aa)`
  overflow: visible !important;
  position: absolute;
  width: 100%;
  top: ${({$position:e})=>e==="top"?"10%":e==="bottom"?"80%":"50%"};
  transform: ${({$position:e})=>e==="middle"?"translateY(-50%)":"none"};
  z-index: ${({$position:e})=>e==="middle"?2:1};
`,jD=U.div`
  width: ${({$small:e})=>e?"50px":"255px"};
  height: ${({$small:e})=>e?"50px":"171px"};
  margin: 0 15px;
`,ND=U.img`
  width: 100%;
  height: 100%;
  overflow: visible;
  object-fit: cover;
  border-radius: ${({$small:e})=>e?"50%":"16px"};
  animation: ${({$amplitude:e})=>Dst(e)}
    ${({$duration:e})=>e}s ease-in-out infinite;
`,Rst=U.div`
  position: absolute;
  top: 120%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  max-width: 1200px;
  padding: 0 20px;
  text-align: center;
  z-index: 3;
`,Ost=()=>{const{t:e}=jt(),t=Yr({query:"(max-width: 743px)"}),i=Yr({query:"(min-width: 744px) and (max-width: 1439px)"}),r=Yr({query:"(min-width: 1440px)"}),n=t?1:i?2:4,s=[{id:1,src:Est,alt:"Image 1"},{id:2,src:Ast,alt:"Image 2"},{id:3,src:lY,alt:"Image 3"},{id:4,src:Tst,alt:"Image 4"},{id:5,src:Cst,alt:"Image 5"},{id:12,src:lY,alt:"Image 1"}],a=[{id:6,src:Mst,alt:"Image 6"},{id:7,src:cY,alt:"Image 7"},{id:8,src:uY,alt:"Image 8"},{id:9,src:Pst,alt:"Image 9"},{id:10,src:cY,alt:"Image 10"},{id:11,src:uY,alt:"Image 6"}],o=J.useMemo(()=>a.map(c=>({...c,amplitude:kD(),duration:zD()})),[]),l=J.useMemo(()=>a.map(c=>({...c,amplitude:kD(),duration:zD()})),[]);return E.jsxs(Ist,{children:[E.jsx(BD,{$position:"top",slidesPerView:n,loop:!0,autoplay:{delay:110,disableOnInteraction:!1},speed:5e3,modules:[ra],children:o.map(c=>E.jsx(na,{style:{width:"auto"},children:E.jsx(jD,{$small:!0,children:E.jsx(ND,{src:c.src,alt:c.alt,$small:!0,$amplitude:c.amplitude,$duration:c.duration})})},c.id))}),E.jsx(BD,{$position:"middle",slidesPerView:n,loop:!0,autoplay:{delay:220,disableOnInteraction:!1},speed:3e3,modules:[ra],children:s.map(c=>E.jsx(na,{style:{width:"auto"},children:E.jsx(jD,{children:E.jsx(ND,{src:c.src,alt:c.alt,$amplitude:kD(),$duration:zD()})})},c.id))}),E.jsx(BD,{$position:"bottom",slidesPerView:n,loop:!0,autoplay:{delay:330,disableOnInteraction:!1},speed:6e3,modules:[ra],children:l.map(c=>E.jsx(na,{style:{width:"auto"},children:E.jsx(jD,{$small:!0,children:E.jsx(ND,{src:c.src,alt:c.alt,$small:!0,$amplitude:c.amplitude,$duration:c.duration})})},c.id))}),E.jsxs(Rst,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},style:{position:"relative",zIndex:1,width:"100%"},children:E.jsxs(Ml,{children:[e("kitchenHero1.title")," ",E.jsx(Ur,{src:_st,alt:"💰"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(Pl,{children:e("kitchenHero1.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:1.5,delay:.9},viewport:{once:!1,amount:.3},children:E.jsxs(Pu,{children:[E.jsx("a",{href:"https://sabsus.app/registrcompany/web/PRO",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Du,{children:e("kitchenHero1.buttons.tryFree")})}),E.jsx("a",{href:"https://sabsus.app/login/demo@sabsus.com/demo2025",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Iu,{children:e("kitchenHero1.buttons.viewDemo")})})]})})]})]})},Lst="/assets/key-ogfWdNTK.png",kst="/assets/key1-Bx4PAL1s.png",zst="/assets/key2-BpmaCqRU.png",Bst="/assets/key3-gk5u88zl.png",jst="/assets/key4-q5V15PiW.png",Nst="/assets/key5-BS0c_vjx.png",Vst="/assets/key6-LHMYPr2i.png",Ust="/assets/key7-BjLO42Oq.png",Fst=U(G.div)`
  margin: 0 auto;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: hidden;

  .swiper {
    width: 100vw;
    padding: 0 0;
    margin: 0 auto;
  }

  .swiper-slide {
    padding: 0 0;
    margin: 0 auto;
    width: 100vw !important;
    display: flex;
    justify-content: center;
    transition: transform 0.3s ease;
  }
`,Hst=U(G.div)`
  @media (min-width: 768px) {
    display: flex;
    flex-wrap: wrap;
    flex-direction: row;
    align-items: center;
    gap: 16px;
    margin: 0 auto;
    justify-content: center;
  }
`,hY=U.div`
  overflow: hidden;
  display: flex;
  flex-direction: column;
  border: 1px solid #212121;
  border-radius: 24px;
  padding: 20px;
  width: 100%;
  max-width: 311px;
  height: 350px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  will-change: transform, box-shadow;
  transition:
    transform 0.3s ease,
    box-shadow 0.3s ease;
  gap: 10px;
  align-items: flex-start;
  margin: 0 auto;
  justify-content: center;

  @media screen and (min-width: 1440px) {
   width: 380px;
  }
`,dY=U.img`
  filter: drop-shadow(0 0 20px rgba(43, 67, 226, 0.7));
  transition: filter 0.3s ease;
  width: 199px;
height: 199px;
  
  &:hover {
    filter: drop-shadow(0 0 30px rgba(35, 62, 236, 0.84));
`,fY=U.h3`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 17px;
  line-height: 130%;
  color: var(--white-100);
`,pY=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  line-height: 130%;
  color: var(--white-60);
`,Gst=()=>{const e=Yr({query:"(max-width: 767px)"}),{t}=jt(),i=a=>{switch(a){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}},r=[{id:1,imageUrl:Lst,key:"realTimeStatus"},{id:2,imageUrl:kst,key:"visualRecipes"},{id:3,imageUrl:zst,key:"timersAlerts"},{id:4,imageUrl:Bst,key:"zoneAssignment"},{id:5,imageUrl:jst,key:"frontNotifications"},{id:6,imageUrl:Nst,key:"displayScreens"},{id:7,imageUrl:Vst,key:"ingredientVisibility"},{id:8,imageUrl:Ust,key:"stationAssignment"}];return E.jsx(Fst,{as:G.div,initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.2},children:e?E.jsx(G.div,{children:E.jsx(Aa,{loop:!0,slidesPerView:1,spaceBetween:6,centeredSlides:!1,autoplay:{delay:1e3,disableOnInteraction:!1,reverseDirection:!1},speed:4e3,modules:[ra],className:"mySwiper",children:r.map(a=>E.jsx(na,{children:E.jsxs(hY,{children:[E.jsx(dY,{src:a.imageUrl,alt:t(`kitchenManagement1.cards.${a.key}.title`)}),E.jsx(fY,{children:t(`kitchenManagement1.cards.${a.key}.title`)}),E.jsx(pY,{children:t(`kitchenManagement1.cards.${a.key}.desc`)})]})},a.id))})}):E.jsx(Hst,{children:r.map((a,o)=>E.jsxs(hY,{as:G.div,...i(o),transition:{duration:.5,delay:o*.1},viewport:{once:!1,amount:.3},children:[E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:o*.25},viewport:{once:!1,amount:.3},children:E.jsx(dY,{src:a.imageUrl,alt:t(`kitchenManagement1.cards.${a.key}.title`)})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:o*.2},viewport:{once:!1,amount:.3},children:E.jsx(fY,{children:t(`kitchenManagement1.cards.${a.key}.title`)})}),E.jsx(pY,{children:t(`kitchenManagement1.cards.${a.key}.desc`)})]},a.id))})})},Wst=U(G.div)`
  margin: 0 auto;
  margin-top: 300px;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;

  @media screen and (min-width: 768px) {
  }
  @media screen and (min-width: 1440px) {
  max-width: 1440px;
  }
`,qst=()=>{const{t:e}=jt();return E.jsxs(Wst,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Ff,{children:[e("kitchenManagement1.title")," ",E.jsx(Ur,{src:Km,alt:""})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(Hf,{children:e("kitchenManagement1.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(pc,{children:e("kitchenManagement1.description")})}),E.jsx(Gst,{})]})},Xst="/assets/iPadMini-BClfW5g1.png",Yst=U(G.div)`
  display: flex;
  padding: 0 16px;
  max-width: 1440px;
  margin: 0 auto;
  flex-direction: column;
  align-items: center;
  position: relative;
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
    width: 1440px;
    margin: 0 auto;
  }
`,Qst=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity;
`,Kst=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
    text-align: start;
  }
`,Zst=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
    text-align: start;
  }
`,$st=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    position: absolute;
    max-width: 530px;
    width: 100%;
    margin: 0 auto 26px;
    top: 80%;
    right: 62%;
    text-align: start;
  }
`,Jst=U.div`
  margin-bottom: 374px;

  @media screen and (min-width: 768px) {
    margin-bottom: 700px;
  }

  @media screen and (min-width: 1440px) {
    margin-bottom: 609px;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
`,eat=U.div`
  position: absolute;
  top: 60%;
  left: 50%;
  width: 365px;
  height: 354px;
  transform: translate(-50%, -50%);
  overflow: visible;

  @media screen and (min-width: 768px) {
    top: 60%;
    width: 700px;
    height: 633px;
  }

  @media screen and (min-width: 1440px) {
    left: 70%;
    top: 50%;
    height: 660px;
  }
`,tat=U(G.img)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
`,iat=U(G.div)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 0.8) 0%,
    rgba(255, 255, 255, 0) 70%
  );
  opacity: 0;
  border-radius: 50%;
  pointer-events: none;
`,rat=()=>{const{t:e}=jt();return E.jsxs(Yst,{children:[E.jsxs(Jst,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Qst,{children:[e("kitchenPrepInsights1.title"),E.jsx(Ur,{src:xo,alt:"🚀"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(Kst,{children:e("kitchenPrepInsights1.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(Zst,{children:e("kitchenPrepInsights1.description")})})]}),E.jsxs(eat,{children:[E.jsx(tat,{src:Xst,alt:"background lines",initial:{y:0,opacity:.5},animate:{y:-10,opacity:1},transition:{duration:2,repeat:1/0,repeatType:"reverse",ease:"easeInOut",delay:.5}}),E.jsx(iat,{initial:{scale:.8,opacity:0},animate:{scale:1.2,opacity:.3},transition:{duration:3,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}})]}),E.jsx($st,{children:e("kitchenPrepInsights1.footerText")})]})},nat=U.div`
  display: flex;
  margin: 0 auto;
  // margin-top: 100px;
  width: 100%;
  height: 100%;
  margin-bottom: 100px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
`,sat=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity; /* Оптимізація анімації */

  @media screen and (min-width: 768px) {
    /* Додаткові стилі для планшетів */
  }

  @media screen and (min-width: 1440px) {
    /* Додаткові стилі для десктопів */
  }
`,aat=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,oat=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,lat=U.img`
  border-radius: 25px;
  padding: 4px;
  overflow: visible;
  font-size: 13px;
  width: 20px;
  margin-left: 6px;

  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 1px 2px rgba(0, 0, 0, 0.06);

  background: linear-gradient(
      315deg,
      rgba(122, 121, 122, 0) 7%,
      rgba(172, 172, 172, 0) 86%
    )
    rgba(255, 255, 255, 0.03);

  -webkit-transform: translateZ(0);
`,cat=U.div`
  display: flex;
  flex-direction: column;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;

  @media screen and (min-width: 768px) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    width: 100vw;
    // gap: 24px;
    padding: 0 24px;
    position: relative;

    /* Вертикальні бордери між картками */
    &::before {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      width: 1px;
      // background-color: rgba(255, 255, 255, 0.25);
      transform: translateX(-50%);
    }

    /* Горизонтальні бордери між рядами */
    &::after {
      content: '';
      position: absolute;
      left: 2%;
      right: 0;
      bottom: 0;
      height: 1px;
      width: 96%;
      background-color: rgba(255, 255, 255, 0.25);
    }

    /* Індивідуальні ширини для карток на планшеті */
    & > :nth-child(1) {
      width: 80%; /* Перша картка менша на 20% */
    }
    & > :nth-child(2) {
      width: 120%; /* Друга картка більша */
      margin-left: -20%; /* Зсуваємо для вирівнювання */
    }
    & > :nth-child(3) {
      width: 120%; /* Третя картка більша */
    }
    & > :nth-child(4) {
      width: 80%; /* Четверта картка менша */
      margin-left: 20%; /* Зсуваємо для вирівнювання */
    }
    /* Продовжуємо шаблон для решти карток */
    & > :nth-child(5) {
      width: 80%;
    }
    & > :nth-child(6) {
      width: 120%;
      margin-left: -20%;
    }
    & > :nth-child(7) {
      width: 120%;
    }
    & > :nth-child(8) {
      width: 80%;
      margin-left: 20%;
    }
  }

  @media screen and (min-width: 1440px) {
    display: grid;
    grid-template-columns: repeat(
      3,
      minmax(0, 1fr)
    ); /* Додано minmax для правильного розподілу простору */
    grid-template-rows: auto auto auto;
    max-width: 1400px;
    width: 100%;
    margin: 0 auto;
    padding: 0 20px; /* Додаємо падінги по боках */
    box-sizing: border-box; /* Щоб падінги враховувались у загальній ширині */

    /* Прибираємо бордери для десктопу */
    &::before,
    &::after {
      // display: none;
    }

    /* Скидаємо ширини для десктопу */
    & > * {
      width: auto !important;
      margin-left: 0 !important;
    }

    /* Розміщення карток для десктопу з бордерами */
    & > :nth-child(1) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Бордер праворуч */
    }
    & > :nth-child(2) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25); /* Бордер праворуч */
    }
    & > :nth-child(3) {
      grid-column: 3;
      /* Без бордера праворуч (остання в рядку) */
    }
    & > :nth-child(4) {
      grid-column: 1;
      width: 151% !important; /* Широка картка */
      //?  margin-left: 53%!important; /* Зсуваємо для вирівнювання */
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Прибираємо бордер для широкої картки */
    }
    & > :nth-child(5) {
      grid-column: 2;
      width: 151% !important; /* Широка картка */
      margin-left: 51% !important; /* Зсуваємо для вирівнювання */
      border: none; /* Бордер праворуч */
    }
    & > :nth-child(6) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25); /* Бордер праворуч */
    }
    & > :nth-child(7) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Бордер праворуч */
    }
    & > :nth-child(8) {
      grid-column: 3;
      /* Без бордера */
    }
  }
`,uat=U(G.div)`
  padding: 16px;
  width: 100%;
  height: fit-content;
  display: flex;
  gap: 4px;
  flex-direction: column;
  position: relative;

  /* Бордер для мобільної версії */
  &:not(:last-child)::after {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 0;
    width: 100%;
    height: 1px;
    background-color: rgba(255, 255, 255, 0.25);
  }

  @media screen and (min-width: 768px) {
    padding: 32px;
    height: 100%;

    /* Прибираємо бордери між картками для планшета */
    &::after {
      top: 0%;
      // display: none;
    }

    /* Додаткові бордери для окремих карток */
    &:nth-child(odd) {
      border-right: 1px solid rgba(255, 255, 255, 0.25);
    }
    &:nth-child(even) {
      border-left: 1px solid rgba(255, 255, 255, 0.25);
    }
  }

  @media screen and (min-width: 1440px) {
    &:nth-child(odd) {
      border-right: none;
    }
    &:nth-child(even) {
      border-left: none;
    }
  }
`,hat=U(G.p)`
  border-radius: 6px;
  padding: 6px 13px;
  width: 36px;
  height: 36px;
  margin: 10px 0px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.12) 7%,
      rgba(255, 255, 255, 0) 86%
    ),
    rgba(255, 255, 255, 0.03);

  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);

  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,dat=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,fat=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-80);
  @media screen and (min-width: 768px) {
    font-size: 17px;
  }

  @media screen and (min-width: 1440px) {
  }
`,pat=U.div`
  display: none;

  @media screen and (min-width: 768px) {
    display: flex;
    background-color: rgba(255, 255, 255, 0.25);
    width: 1px;
    height: 100%;
  }
`,mY=U.div`
  position: absolute;
  width: 100vw;
  height: 1px;
  // background-color: rgba(255, 255, 255, 0.25);

  @media screen and (min-width: 768px) {
    // display: none;
    width: 100vw;
    height: 1px;
    margin: 0 auto;
    left: 50%;
    transform: translateX(-50%);
  }
`,mat=()=>{const{t:e}=jt(),t=[{id:"1",key:"instantOrderProcessing"},{id:"2",key:"multiModeOrderTypes"},{id:"3",key:"dynamicTableManagement"},{id:"4",key:"shiftStaffTracking"},{id:"5",key:"qrPaymentsDeposits"},{id:"6",key:"kitchenPrinterRouting"},{id:"7",key:"onTheFlyMenuUpdates"},{id:"8",key:"endOfShiftReports"}],i=r=>{switch(r){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}};return E.jsxs(nat,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(sat,{children:[e("howWeWorkSection2.title")," ",E.jsx(lat,{src:xo,alt:"Icon"})]})}),E.jsx(aat,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:e("howWeWorkSection2.heading")}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(oat,{children:e("howWeWorkSection2.description")})}),E.jsxs(cat,{children:[t.map((r,n)=>E.jsx(Bi.Fragment,{children:E.jsxs(uat,{as:G.div,...i(n),transition:{duration:.5,delay:n*.1},viewport:{once:!1,amount:.3},children:[E.jsx(mY,{}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.15},viewport:{once:!1,amount:.3},children:E.jsx(hat,{children:r.id})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.2},viewport:{once:!1,amount:.3},children:E.jsx(dat,{children:e(`howWeWorkSection2.cards.${r.key}.title`)})}),E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:n*.25},viewport:{once:!1,amount:.3},children:E.jsx(fat,{children:e(`howWeWorkSection2.cards.${r.key}.desc`)})}),E.jsx(mY,{})]})},n)),E.jsx(pat,{})]})]})},gat=()=>E.jsxs(ed,{children:[E.jsx(Ost,{}),E.jsx(qst,{}),E.jsx(rat,{}),E.jsx(Zm,{}),E.jsx(mat,{}),E.jsx(qf,{}),E.jsx(Wf,{}),E.jsx(mc,{}),E.jsx($f,{}),E.jsx(Ru,{})]}),gY="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAoCAYAAAC4h3lxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAM3SURBVHgBvVmBcdswDITuMoBHYDbwCOoG3qDqBt7A7AT2BtYGSSdwN3A6Ab2Bs8GXjKSaBkGRkqj+nU4J+QIBEIAIuaIZALCxt40/VlXVTeApmo5PK+uT1oJTvr/ueMZR4F4xHRdaC1b4flC0/5ujZvwa87Cn0rBClb2Mr6jzVsp7duwN0+F2d0MlYQW2XFF73yLhvd7wu8BzhmnvMmz+TKVghTWCAnU/p1PeEzj/nOBx6tgaJQwwMe+gS2g+/8aelzgOO8Zr2byhpbBCDgg9rBgn6b0Ix8DbLcjVTdNcoItf5AhEmNAGYShdUvIQVrfAYVMM4BXECJyDZ+w9oZzkkHuGodPfDZATdxtRSPf/65T3ICf0kXGWJTSea/6As8AzXFHhOV5tpDiXnHNi8wa57wbnEeFhxTiNpGjEe7zaSG/xHEOPOcpLcdoIHBNTFEI5RF5C1xmGblMGGL64wGkhwz2bddhDpKwKa10YJ57QkBNXUej9MYwd9na94sN1ETj8KJI8rviKGUY8UXqHLsIC24j3ciCV1VOKkxu3e4GjENlmzD9Oa7audBQ5+oSdIKTJ2KHGm+PYR7yXC8XWl3SsqyEs7M1/oLVt3Q++Q/b23Rv6ZTk7b17b28Gbd23ha//3nAblw8p/Zzo4OX5UfMSSRLMH65ke2tH/ABJJgjB0tCCDc84jhpWCHhbfjChwYOPigU4QriKGlYKBX2QQSWSEL6SGKS8lsB4xrBS+9KiYMq781RRHTnLfLOcV3Q7w3fpDXXIvxW+7hg5GEW/AByjGl97c9WAYG1/eHuYA8nndQTPeWN4ke4k1DZAUkxJXPHKPGbYGXviA+y5pF3Rx7p/6eNwrCl9OP933UXQtpuJysaQ5f+CU/d0Uj354rBN72iGkT6pLMG0Xe2WuyEtc1c/N+ZibA4M5XyYg9wKGCT+NGFYKTUzHiqYZ1BKr+fb61sd+8JvBTFyZnK/3Ci0F5ENfQwWBjI5wiXDDBL9TQSCzI+R4oQxEwmNoWBSVgabn8nuzV9KAbLDt1f3YAeuhodJA1/v6Nf+OdVA0PH0DFB59cIv1oHJ1mlRGPUPcwaz8D3EdXC+cHft/Ae2l2dOayZiOAAAAAElFTkSuQmCC",vY="/assets/brocoly-DdCMKfC3.png",yY="/assets/tomato-a_vD8TkQ.png",vat="/assets/mais-PaLSwKuu.png",yat="/assets/box-D9Egj1uD.png",xat="/assets/orang-DdKLcl5v.png",bat="/assets/hotdog-DDWGC1yF.png",xY="/assets/salz-C2OU63_h.png",wat="/assets/Package-CnXvJw7N.svg",Sat=cn`
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.1); opacity: 0.8; }
  100% { transform: scale(1); opacity: 1; }
`,_at=cn`
  0% { filter: drop-shadow(0 0 5px rgba(73, 75, 236, 0.7)); }
  50% { filter: drop-shadow(0 0 15px rgba(73, 75, 236, 1)); }
  100% { filter: drop-shadow(0 0 5px rgba(73, 75, 236, 0.7)); }
`,FT=cn`
  0% { border-color: rgba(51, 51, 51, 0.55); color: rgba(51, 51, 51, 0.55);}
  50% { border-color: rgba(73, 75, 236, 0.8); color: rgba(73, 75, 236, 0.8);}
  100% { border-color: rgba(51, 51, 51, 0.55); color: rgba(51, 51, 51, 0.55);}
`,Eat=cn`
  0% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0); }
`,Aat=cn`
  0% {
    stroke-dashoffset: 2000;
    stroke-opacity: 0;
  }
  20% {
    stroke-opacity: 1;
  }
  80% {
    stroke-opacity: 1;
  }
  100% {
    stroke-dashoffset: 0;
    stroke-opacity: 0;
  }
`,Tat=cn`
  0% {
    r: 0;
    opacity: 0;
  }
  10% {
    r: 3;
    opacity: 1;
  }
  100% {
    r: 0;
    opacity: 0;
  }
`,Cat=U.div`
  position: relative;
  width: 100%;
  height: auto;
  overflow: visible;
  margin-top: 100px;
`,VD=U.div`
  text-align: center;
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
`,bY=U.div`
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  flex-direction: row;
  align-content: space-around;
  gap: 135px;
  margin: 0 auto;
`,wY=cn`
  0% { background-color: rgba(51, 51, 51, 0.55);  }
  50% { background-color: rgba(73, 75, 236, 0.8); }
  100% { background-color: rgba(51, 51, 51, 0.55); }
`,lE=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  text-align: center;
  color: rgba(51, 51, 51, 0.55);
  padding-bottom: 20px;
  margin-bottom: 20px;
  width: 80px;
  border-bottom: 1px solid rgba(51, 51, 51, 0.55);
  position: relative;
  animation: ${FT} 3s infinite ease-in-out;

  &:hover {
    animation:
      ${FT} 1s infinite ease-in-out,
      ${Eat} 2s infinite ease-in-out;

    &::after {
      animation: ${wY} 1s infinite ease-in-out;
    }
  }

  @media screen and (min-width: 768px) {
    width: 284px;
    text-align: center;
    padding-bottom: 30px;
    margin-bottom: 30px;

    &::after {
      content: '';
      position: absolute;
      left: 50%;
      top: 80%;
      height: 20px;
      width: 1px;
      background: rgba(51, 51, 51, 0.55);
      transform: translateX(-50%) translateY(-50%);
      animation: ${wY} 3s infinite ease-in-out;
    }
  }
`,SY=U.div`
  display: flex;
  flex-direction: row;
  justify-content: space-evenly;
  flex-wrap: nowrap;
  max-width: 350px;
  width: 100%;

  @media screen and (min-width: 768px) {
    max-width: 742px;
  }
`,Wc=U.img`
  width: 80px;
  height: 80px;
  animation: ${Sat} 3s infinite ease-in-out;

  &:nth-child(1) {
    animation-delay: 0.3s;
  }
  &:nth-child(2) {
    animation-delay: 0.6s;
  }
  &:nth-child(3) {
    animation-delay: 0.9s;
  }

  @media screen and (min-width: 768px) {
    margin-top: -8%;
  }
`,_Y=U.div`
  border-radius: 12px;
  padding: 13px 9px;
  width: 66px;
  height: 66px;
  margin-bottom: 100px;
  box-shadow: inset 0 0 3px 0 rgba(255, 255, 255, 0.54);
  background: linear-gradient(139deg, #494bec 0%, #292b86 100%);
  animation: ${_at} 2s infinite ease-in-out;
`,Mat=cn`
  0% {
    transform: rotate(0deg) scale(1);
    animation-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  100% {
    transform: rotate(360deg) scale(1);
  }
`,EY=U.img`
  width: 48px;
  height: 40px;
  animation: ${Mat} 4s infinite;
  transform-origin: center center;
  will-change: transform;
  backface-visibility: hidden;
`,qc=U.div`
  border: 1px solid rgba(51, 51, 51, 0.55);
  border-radius: 16px;
  width: 80px;
  height: 80px;
  padding-top: 2%;
  animation: ${FT} 4s infinite ease-in-out;

  &:hover {
    animation: ${FT} 1s infinite ease-in-out;
  }
`,AY=U.div`
  display: flex;
  width: 100%;
  justify-content: center;
  position: relative;
`,TY=U.path`
  stroke: #333333;
  stroke-opacity: 0.2;
  stroke-width: 1;
  fill: none;
`,CY=U.path`
  stroke: #494bec;
  stroke-width: 2;
  stroke-dasharray: 2000;
  stroke-dashoffset: 2000;
  fill: none;
  animation: ${Aat} 4s infinite ease-in-out;
`,is=U.circle`
  fill: #494bec;
  animation: ${Tat} 4s infinite ease-in-out;
`,Pat=()=>{const{t:e}=jt(),t=Yr({query:"(max-width: 743px)"}),i=Yr({query:"(min-width: 744px)"});return E.jsxs(Cat,{children:[t&&E.jsxs(VD,{children:[E.jsxs(bY,{children:[E.jsx(lE,{children:e("inventoryHero.features.inventorySync")}),E.jsx(lE,{children:e("inventoryHero.features.smartFlow")})]}),E.jsxs(SY,{children:[E.jsx(qc,{children:E.jsx(Wc,{src:yY,alt:"Tomato"})}),E.jsx(qc,{children:E.jsx(Wc,{src:vY,alt:"Broccoli"})}),E.jsx(qc,{children:E.jsx(Wc,{src:xY,alt:"Salt"})})]}),E.jsx(AY,{children:E.jsxs("svg",{width:"206",height:"122",viewBox:"0 0 206 122",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[E.jsx(TY,{d:"M102.5 122V0M205 2.52766e-08V29C205 46.6731 190.673 61 173 61H135C117.327 61 103 75.3269 103 93M103 93V122M103 93C103 75.3269 88.6731 61 71 61H33C15.3269 61 1 46.6731 1 29V2.52766e-08"}),E.jsx(CY,{d:"M102.5 122V0M205 2.52766e-08V29C205 46.6731 190.673 61 173 61H135C117.327 61 103 75.3269 103 93M103 93V122M103 93C103 75.3269 88.6731 61 71 61H33C15.3269 61 1 46.6731 1 29V2.52766e-08"}),E.jsx(is,{cx:"102.5",cy:"122",r:"0",style:{animationDelay:"0.1s"}}),E.jsx(is,{cx:"102.5",cy:"100",r:"0",style:{animationDelay:"0.3s"}}),E.jsx(is,{cx:"102.5",cy:"80",r:"0",style:{animationDelay:"0.5s"}}),E.jsx(is,{cx:"102.5",cy:"60",r:"0",style:{animationDelay:"0.7s"}}),E.jsx(is,{cx:"102.5",cy:"40",r:"0",style:{animationDelay:"0.9s"}}),E.jsx(is,{cx:"102.5",cy:"20",r:"0",style:{animationDelay:"1.1s"}})]})}),E.jsx(_Y,{children:E.jsx(EY,{src:gY,alt:"Logo"})})]}),i&&E.jsxs(VD,{children:[E.jsxs(bY,{children:[E.jsx(lE,{children:e("inventoryHero.features.inventorySync")}),E.jsx(lE,{children:e("inventoryHero.features.smartFlow")})]}),E.jsxs(SY,{children:[E.jsx(qc,{children:E.jsx(Wc,{src:vat,alt:"Corn"})}),E.jsx(qc,{children:E.jsx(Wc,{src:yat,alt:"Box"})}),E.jsx(qc,{children:E.jsx(Wc,{src:yY,alt:"Tomato"})}),E.jsx(qc,{children:E.jsx(Wc,{src:vY,alt:"Broccoli"})}),E.jsx(qc,{children:E.jsx(Wc,{src:xY,alt:"Salt"})}),E.jsx(qc,{children:E.jsx(Wc,{src:xat,alt:"Orange"})}),E.jsx(qc,{children:E.jsx(Wc,{src:bat,alt:"Hot Dog"})})]}),E.jsx(AY,{children:E.jsxs("svg",{width:"614",height:"122",viewBox:"0 0 614 122",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[E.jsx(TY,{d:"M306.5 122V0M409 2.52766e-08V29C409 46.6731 394.673 61 377 61H339M339 61C321.327 61 307 75.3269 307 93M339 61H479C496.673 61 511 46.6731 511 29V2.52766e-08M339 61H581C598.673 61 613 46.6731 613 29V2.52766e-08M307 93V122M307 93C307 75.3269 292.673 61 275 61M205 2.52766e-08V29C205 46.6731 219.327 61 237 61H275M275 61H135C117.327 61 103 46.6731 103 29V2.52766e-08M275 61H33C15.3269 61 1 46.6731 1 29V2.52766e-08"}),E.jsx(CY,{d:"M306.5 122V0M409 2.52766e-08V29C409 46.6731 394.673 61 377 61H339M339 61C321.327 61 307 75.3269 307 93M339 61H479C496.673 61 511 46.6731 511 29V2.52766e-08M339 61H581C598.673 61 613 46.6731 613 29V2.52766e-08M307 93V122M307 93C307 75.3269 292.673 61 275 61M205 2.52766e-08V29C205 46.6731 219.327 61 237 61H275M275 61H135C117.327 61 103 46.6731 103 29V2.52766e-08M275 61H33C15.3269 61 1 46.6731 1 29V2.52766e-08"}),E.jsx(is,{cx:"306.5",cy:"122",r:"0",style:{animationDelay:"0.1s"}}),E.jsx(is,{cx:"306.5",cy:"100",r:"0",style:{animationDelay:"0.3s"}}),E.jsx(is,{cx:"306.5",cy:"80",r:"0",style:{animationDelay:"0.5s"}}),E.jsx(is,{cx:"306.5",cy:"60",r:"0",style:{animationDelay:"0.7s"}}),E.jsx(is,{cx:"306.5",cy:"40",r:"0",style:{animationDelay:"0.9s"}}),E.jsx(is,{cx:"306.5",cy:"20",r:"0",style:{animationDelay:"1.1s"}}),E.jsx(is,{cx:"409",cy:"20",r:"0",style:{animationDelay:"1.3s"}}),E.jsx(is,{cx:"377",cy:"40",r:"0",style:{animationDelay:"1.5s"}}),E.jsx(is,{cx:"339",cy:"60",r:"0",style:{animationDelay:"1.7s"}}),E.jsx(is,{cx:"307",cy:"80",r:"0",style:{animationDelay:"1.9s"}}),E.jsx(is,{cx:"275",cy:"60",r:"0",style:{animationDelay:"2.1s"}}),E.jsx(is,{cx:"237",cy:"40",r:"0",style:{animationDelay:"2.3s"}}),E.jsx(is,{cx:"205",cy:"20",r:"0",style:{animationDelay:"2.5s"}})]})}),E.jsx(_Y,{children:E.jsx(EY,{src:gY,alt:"Logo"})})]}),E.jsxs(VD,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},style:{position:"relative",zIndex:1,width:"100%"},children:E.jsxs(Ml,{children:[e("inventoryHero.title")," ",E.jsx(Ur,{src:wat,alt:"Package icon"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(Pl,{children:e("inventoryHero.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:1.5,delay:.9},viewport:{once:!1,amount:.3},children:E.jsxs(Pu,{children:[E.jsx("a",{href:"https://sabsus.app/registrcompany/web/PRO",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Du,{children:e("inventoryHero.buttons.tryFree")})}),E.jsx("a",{href:"https://sabsus.app/login/demo@sabsus.com/demo2025",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Iu,{children:e("inventoryHero.buttons.viewDemo")})})]})})]})]})},Dat="/assets/key-DtSHnu9D.png",Iat="/assets/key1-BV80ufop.png",Rat="/assets/key2-ClBkRXVG.png",Oat="/assets/key3-CAlA1B5Q.png",Lat="/assets/key4-BlOqEh4w.png",kat="/assets/key5-DjW_rqzv.png",zat="/assets/key6-NZPDItF3.png",Bat="/assets/key7-6nfxvBg4.png",jat=U(G.div)`
  margin: 0 auto;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: hidden;

  .swiper {
    width: 100vw;
    padding: 0 0;
    margin: 0 auto;
  }

  .swiper-slide {
    padding: 0 0;
    margin: 0 auto;
    width: 100vw !important;
    display: flex;
    justify-content: center;
    transition: transform 0.3s ease;
  }
`,Nat=U(G.div)`
  @media (min-width: 768px) {
    display: flex;
    flex-wrap: wrap;
    flex-direction: row;
    align-items: center;
    gap: 16px;
    margin: 0 auto;
    justify-content: center;
  }
`,MY=U.div`
  overflow: hidden;
  display: flex;
  flex-direction: column;
  border: 1px solid #212121;
  border-radius: 24px;
  padding: 20px;
  width: 100%;
  max-width: 311px;
  height: 350px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  will-change: transform, box-shadow;
  transition:
    transform 0.3s ease,
    box-shadow 0.3s ease;
  gap: 10px;
  align-items: flex-start;
  margin: 0 auto;
  justify-content: center;

  @media screen and (min-width: 1440px) {
    width: 380px;
  }
`,PY=U.img`
  filter: drop-shadow(0 0 20px rgba(43, 67, 226, 0.7));
  transition: filter 0.3s ease;
  width: 199px;
height: 199px;
  
  &:hover {
    filter: drop-shadow(0 0 30px rgba(35, 62, 236, 0.84));
`,DY=U.h3`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 17px;
  line-height: 130%;
  color: var(--white-100);
`,IY=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  line-height: 130%;
  color: var(--white-60);
`,Vat=()=>{const e=Yr({query:"(max-width: 767px)"}),{t}=jt(),i=a=>{switch(a){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}},r=[{id:1,imageUrl:Dat,key:"ingredientTracking"},{id:2,imageUrl:Iat,key:"stockLevels"},{id:3,imageUrl:Rat,key:"warehouseTransfers"},{id:4,imageUrl:Oat,key:"smartCategorization"},{id:5,imageUrl:Lat,key:"supplyDeliveries"},{id:6,imageUrl:kat,key:"wasteManagement"},{id:7,imageUrl:zat,key:"costCalculation"},{id:8,imageUrl:Bat,key:"ingredientBundling"}];return E.jsx(jat,{as:G.div,initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.2},children:e?E.jsx(G.div,{children:E.jsx(Aa,{loop:!0,slidesPerView:1,spaceBetween:6,centeredSlides:!1,autoplay:{delay:1e3,disableOnInteraction:!1,reverseDirection:!1},speed:4e3,modules:[ra],className:"mySwiper",children:r.map(a=>E.jsx(na,{children:E.jsxs(MY,{children:[E.jsx(PY,{src:a.imageUrl,alt:t(`inventoryKeyFeatures.cards.${a.key}.title`)}),E.jsx(DY,{children:t(`inventoryKeyFeatures.cards.${a.key}.title`)}),E.jsx(IY,{children:t(`inventoryKeyFeatures.cards.${a.key}.text`)})]})},a.id))})}):E.jsx(Nat,{children:r.map((a,o)=>E.jsxs(MY,{as:G.div,...i(o),transition:{duration:.5,delay:o*.1},viewport:{once:!1,amount:.3},children:[E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:o*.25},viewport:{once:!1,amount:.3},children:E.jsx(PY,{src:a.imageUrl,alt:t(`inventoryKeyFeatures.cards.${a.key}.title`)})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:o*.2},viewport:{once:!1,amount:.3},children:E.jsx(DY,{children:t(`inventoryKeyFeatures.cards.${a.key}.title`)})}),E.jsx(IY,{children:t(`inventoryKeyFeatures.cards.${a.key}.text`)})]},a.id))})})},Uat=U(G.div)`
  margin: 0 auto;
  margin-top: 50px;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;

  @media screen and (min-width: 768px) {
  }
  @media screen and (min-width: 1440px) {
  max-width: 1440px;
  }
`,Fat=()=>{const{t:e}=jt();return E.jsxs(Uat,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Ff,{children:[e("inventoryKeyFeatures.title")," ",E.jsx(Ur,{src:Km,alt:"DVD icon"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(Hf,{children:e("inventoryKeyFeatures.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(pc,{children:e("inventoryKeyFeatures.description")})}),E.jsx(Vat,{})]})},Hat="/assets/iPadMini-wbOVNgDH.png",Gat=U(G.div)`
  display: flex;
  padding: 0 16px;
  max-width: 1440px;
  margin: 0 auto;
  flex-direction: column;
  align-items: center;
  position: relative;

  @media screen and (min-width: 1440px) {
    width: 1440px;
    margin: 0 auto;
  }
`,Wat=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity;
`,qat=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
    text-align: start;
  }
`,Xat=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
    text-align: start;
  }
`;U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    position: absolute;
    max-width: 530px;
    width: 100%;
    margin: 0 auto 26px;
    top: 80%;
    right: 62%;
    text-align: start;
  }
`;const Yat=U.div`
  margin-bottom: 214px;

  @media screen and (min-width: 768px) {
    margin-bottom: 700px;
  }

  @media screen and (min-width: 1440px) {
    margin-bottom: 609px;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
`,Qat=U.div`
  position: absolute;
  top: 80%;
  left: 50%;
  width: 365px;
  height: 354px;
  transform: translate(-50%, -50%);
  overflow: visible;

  @media screen and (min-width: 768px) {
    top: 60%;
    width: 700px;
    height: 633px;
  }

  @media screen and (min-width: 1440px) {
    left: 70%;
    top: 50%;
    height: 660px;
  }
`,Kat=U(G.img)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
`,Zat=U(G.div)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 0.8) 0%,
    rgba(255, 255, 255, 0) 70%
  );
  opacity: 0;
  border-radius: 50%;
  pointer-events: none;
`,$at=()=>{const{t:e}=jt();return E.jsxs(Gat,{children:[E.jsxs(Yat,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Wat,{children:[e("inventoryHero1.title"),E.jsx(Ur,{src:xo,alt:"Rocket icon"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(qat,{children:e("inventoryHero1.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(Xat,{children:e("inventoryHero1.description")})})]}),E.jsxs(Qat,{children:[E.jsx(Kat,{src:Hat,alt:"Inventory illustration",initial:{y:0,opacity:.5},animate:{y:-10,opacity:1},transition:{duration:2,repeat:1/0,repeatType:"reverse",ease:"easeInOut",delay:.5}}),E.jsx(Zat,{initial:{scale:.8,opacity:0},animate:{scale:1.2,opacity:.3},transition:{duration:3,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}})]})]})},Jat=()=>E.jsxs(ed,{children:[E.jsx(Pat,{}),E.jsx(Fat,{}),E.jsx($at,{}),E.jsx(Zm,{}),E.jsx(Mae,{}),E.jsx(qf,{}),E.jsx(Wf,{}),E.jsx(mc,{}),E.jsx($f,{}),E.jsx(Ru,{})]}),eot="/assets/hero-B8sETGSb.png",tot=U.div`
  margin: 0 auto;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;

  @media screen and (min-width: 768px) {
    width: 100vh;
    margin-top: 100px;
    margin-bottom: 100px;
  }

  @media screen and (min-width: 1440px) {
    margin-top: 100px;
    margin-bottom: 150px;
  }
`,iot=U.div`
  position: relative; /* Змінюємо на relative */
  width: 100%;
  max-width: 1920px;
  margin: 0 auto;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: -1;
  overflow: visible;
  top: -750px;

  iframe,
  canvas {
    width: 100% !important;
    height: auto !important;
    display: block;
    position: relative;
    z-index: 1;
    object-fit: contain; /* Змінюємо на contain для коректного відображення */
    margin: 0 auto;
    overflow: visible;
  }

  @media screen and (max-width: 767px) {
    height: 100vh;

    iframe,
    canvas {
      height: 100% !important;
      object-fit: cover;
      pointer-events: none;
      opacity: 0.7;
    }
  }

  @media screen and (min-width: 768px) {
    iframe,
    canvas {
      width: 100vw !important; /* Дозволяємо розширення за межі екрану */
      height: 100vh !important;
      left: 50%;
      top: 430px;
      transform: translateX(-50%);
    }
  }

  @media screen and (min-width: 1440px) {
  margin-top: 450px;
  margin-bottom: -1800px;
    iframe,
    canvas {
      top: 0px;
    }
  }

  @media (min-width: 1920px) {
    margin-bottom: -1800px;
    iframe,
    canvas {
      top: -200px;
      margin-top: 100px;
    }
  }
`,rot=U(G.div)`
  position: absolute;
  width: 4px;
  height: 4px;
  background: white;
  border-radius: 50%;
  filter: drop-shadow(0 0 6px white);
  opacity: 0.8;
  z-index: 2;
`,not=U.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 2;
`,sot=U.div`
  position: absolute;
  top: 400px;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  max-width: 1200px;
  padding: 0 20px;
  text-align: center;
  @media screen and (min-width: 1440px) {
    top: 500px;
  }

  @media (min-width: 1920px) {
    margin-top: 200px;
  }
`,RY=()=>{const e=Array.from({length:100},()=>({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,delay:Math.random()*3,duration:1+Math.random()*2}));return E.jsxs("div",{style:{position:"relative",width:"100%",top:"-20%"},children:[E.jsx("img",{src:eot,alt:"3D Scene",style:{width:"auto",height:"778px",filter:"blur(0.5px)",display:"block",margin:"0 auto"}}),E.jsx(not,{children:e.map((t,i)=>E.jsx(rot,{style:{top:t.top,left:t.left},animate:{opacity:[0,1,0],scale:[.3,.6,.3]},transition:{duration:t.duration,repeat:1/0,repeatType:"loop",delay:t.delay}},i))})]})},aot=()=>{const e=kf("(max-width: 767px)"),{t}=jt();return E.jsxs(tot,{style:{marginTop:250},children:[E.jsx(iot,{children:e?E.jsx(RY,{}):E.jsx(J.Suspense,{fallback:E.jsx(RY,{}),children:E.jsx(zw,{scene:"https://prod.spline.design/IIeYQXryqhaB5TjD/scene.splinecode",style:{width:"100%",height:"auto",maxWidth:"1440px"}})})}),E.jsxs(sot,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},style:{position:"relative",zIndex:1,width:"100%"},children:E.jsxs(Ml,{children:[t("performanceHubHero.innovativeText"),E.jsx(Ur,{src:Pae,alt:"💰"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(Pl,{children:t("performanceHubHero.title")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:1.5,delay:.9},viewport:{once:!1,amount:.3},children:E.jsxs(Pu,{children:[E.jsx("a",{href:"https://sabsus.app/registrcompany/web",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Du,{children:t("performanceHubHero.buttons.tryFree")})}),E.jsx("a",{href:"https://sabsus.app/login/demo@sabsus.com/demo2025",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Iu,{children:t("performanceHubHero.buttons.viewDemo")})})]})})]})]})},oot="/assets/key-Dq0VAaPv.png",lot="/assets/key1-BX5LhFt-.png",cot="/assets/key2-CYgaWOOb.png",uot="/assets/key3-BLwlAO0h.png",hot="/assets/key4-DsqsOG4s.png",dot="/assets/key5-Ce7yMaNn.png",fot="/assets/key6-Dus5m3Sy.png",pot="/assets/key7-BGwRZI0i.png",mot=U(G.div)`
  margin: 0 auto;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: hidden;

  .swiper {
    width: 100vw;
    padding: 0 0;
    margin: 0 auto;
  }

  .swiper-slide {
    padding: 0 0;
    margin: 0 auto;
    width: 100vw !important;
    display: flex;
    justify-content: center;
    transition: transform 0.3s ease;
  }
`,got=U(G.div)`
  @media (min-width: 768px) {
    display: flex;
    flex-wrap: wrap;
    flex-direction: row;
    align-items: center;
    gap: 16px;
    margin: 0 auto;
    justify-content: center;
  }
  @media screen and (min-width: 1440px) {
  }
`,OY=U.div`
  overflow: hidden;
  display: flex;
  flex-direction: column;
  border: 1px solid #212121;
  border-radius: 24px;
  padding: 20px;
  width: 100%; /* Змінюємо фіксовану ширину на 100% */
  max-width: 311px; /* Додаємо максимальну ширину */
  height: 350px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  will-change: transform, box-shadow;
  transition:
    transform 0.3s ease,
    box-shadow 0.3s ease;
  gap: 10px;
  align-items: flex-start;
  margin: 0 auto; /* Центруємо картку */
  justify-content: center;

  @media screen and (min-width: 1440px) {
  width: 380px;
  }
`,LY=U.img`
  filter: drop-shadow(0 0 20px rgba(43, 67, 226, 0.7));
  transition: filter 0.3s ease;
  width: 199px;
height: 199px;
  
  &:hover {
    filter: drop-shadow(0 0 30px rgba(35, 62, 236, 0.84));
`,kY=U.h3`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 17px;
  line-height: 130%;
  color: var(--white-100);
`,zY=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  line-height: 130%;
  color: var(--white-60);
`,vot=()=>{const e=Yr({query:"(max-width: 767px)"}),{t}=jt(),i=a=>{switch(a){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}},r=[{id:1,imageUrl:oot,title:t("keyCapabilitiesSection.cards.card1.title"),text:t("keyCapabilitiesSection.cards.card1.text")},{id:2,imageUrl:lot,title:t("keyCapabilitiesSection.cards.card2.title"),text:t("keyCapabilitiesSection.cards.card2.text")},{id:3,imageUrl:cot,title:t("keyCapabilitiesSection.cards.card3.title"),text:t("keyCapabilitiesSection.cards.card3.text")},{id:4,imageUrl:uot,title:t("keyCapabilitiesSection.cards.card4.title"),text:t("keyCapabilitiesSection.cards.card4.text")},{id:5,imageUrl:hot,title:t("keyCapabilitiesSection.cards.card5.title"),text:t("keyCapabilitiesSection.cards.card5.text")},{id:6,imageUrl:dot,title:t("keyCapabilitiesSection.cards.card6.title"),text:t("keyCapabilitiesSection.cards.card6.text")},{id:7,imageUrl:fot,title:t("keyCapabilitiesSection.cards.card7.title"),text:t("keyCapabilitiesSection.cards.card7.text")},{id:8,imageUrl:pot,title:t("keyCapabilitiesSection.cards.card8.title"),text:t("keyCapabilitiesSection.cards.card8.text")}];return E.jsxs(mot,{as:G.div,initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.2},children:[e&&E.jsx(G.div,{children:E.jsx(Aa,{loop:!0,slidesPerView:1,spaceBetween:6,centeredSlides:!1,autoplay:{delay:1e3,disableOnInteraction:!1,reverseDirection:!1},speed:4e3,modules:[ra],className:"mySwiper",children:r.map(a=>E.jsx(na,{children:E.jsxs(OY,{children:[E.jsx(LY,{src:a.imageUrl,alt:a.title}),E.jsx(kY,{children:a.title}),E.jsx(zY,{children:a.text})]})},a.id))})}),!e&&E.jsx(got,{children:r.map((a,o)=>E.jsxs(OY,{as:G.div,...i(o),transition:{duration:.5,delay:o*.1},viewport:{once:!1,amount:.3},children:[" ",E.jsxs(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:o*.25},viewport:{once:!1,amount:.3},children:[E.jsx(LY,{src:a.imageUrl,alt:a.title})," "]})," ",E.jsxs(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:o*.2},viewport:{once:!1,amount:.3},children:[E.jsx(kY,{children:a.title})," "]}),E.jsx(zY,{children:a.text})]},a.id))})]})},yot=U(G.div)`
  margin: 0 auto;
  margin-top: 500px;
  width: 100%;
  height: 100%;
  // margin-bottom: 100px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;

  @media screen and (min-width: 768px) {
    // width: 100vh;
    // margin-top: 100px;
    // margin-bottom: 100px;
  }
  @media screen and (min-width: 1440px) {
      max-width: 1440px;
  }
`,xot=()=>{const{t:e}=jt();return E.jsxs(yot,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Ff,{children:[e("keyCapabilitiesSection.header.title")," ",E.jsx(Ur,{src:Km,alt:""})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(Hf,{dangerouslySetInnerHTML:{__html:e("keyCapabilitiesSection.header.mainHeading")}})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(pc,{dangerouslySetInnerHTML:{__html:e("keyCapabilitiesSection.header.description")}})}),E.jsx(vot,{})]})},bot="/assets/iPadMini-Cin-V4IE.png",wot=U(G.div)`
  display: flex;
  padding: 0 16px; /* або 24px — на твій смак */
  max-width: 1440px;
  margin: 0 auto;
  flex-direction: column;
  align-items: center;
  position: relative;
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
    width: 1440px;
    margin: 0 auto;
  }
`,Sot=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity;
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,_ot=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
   max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
text-align: start;
`,Eot=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
    text-align: start;
  }
`,Aot=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    position: absolute;
    max-width: 530px;
    width: 100%;
    margin: 0 auto 26px;
    top: 80%;
    right: 62%;
    text-align: start;
  }
`,Tot=U.div`
  margin-bottom: 374px;

  @media screen and (min-width: 768px) {
    margin-bottom: 700px;
  }

  @media screen and (min-width: 1440px) {
    margin-bottom: 609px;
    width: 100%; // ✅ НЕ 100vw
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
`,Cot=U.div`
  position: absolute;
  top: 60%;
  left: 50%;
  width: 365px;
  height: 354px;
  transform: translate(-50%, -50%);
  overflow: visible;
  @media screen and (min-width: 768px) {
    top: 60%;
    width: 700px;
    height: 633px;
  }

  @media screen and (min-width: 1440px) {
    left: 70%;
    top: 50%;
    height: 660px;
  }
`,Mot=U(G.img)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,Pot=U(G.div)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 0.8) 0%,
    rgba(255, 255, 255, 0) 70%
  );
  opacity: 0;
  border-radius: 50%;
  pointer-events: none;

  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,Dot=()=>{const{t:e}=jt();return E.jsxs(wot,{children:[E.jsxs(Tot,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Sot,{children:[e("livePrepInsightsSection.header.title"),E.jsx(Ur,{src:xo,alt:"🚀"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(_ot,{children:e("livePrepInsightsSection.header.mainHeading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(Eot,{children:e("livePrepInsightsSection.header.description")})})]}),E.jsxs(Cot,{children:[E.jsx(Mot,{src:bot,alt:"background lines",initial:{y:0,opacity:.5},animate:{y:-10,opacity:1},transition:{duration:2,repeat:1/0,repeatType:"reverse",ease:"easeInOut",delay:.5}}),E.jsx(Pot,{initial:{scale:.8,opacity:0},animate:{scale:1.2,opacity:.3},transition:{duration:3,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}})]}),E.jsx(Aot,{children:e("livePrepInsightsSection.header.additionalDescription")})]})},Iot=U.div`
  display: flex;
  margin: 0 auto;
  // margin-top: 100px;
  width: 100%;
  height: 100%;
  margin-bottom: 100px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
`,Rot=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity; /* Оптимізація анімації */

  @media screen and (min-width: 768px) {
    /* Додаткові стилі для планшетів */
  }

  @media screen and (min-width: 1440px) {
    /* Додаткові стилі для десктопів */
  }
`,Oot=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,Lot=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,kot=U.img`
  border-radius: 25px;
  padding: 4px;
  overflow: visible;
  font-size: 13px;
  width: 20px;
  margin-left: 6px;

  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 1px 2px rgba(0, 0, 0, 0.06);

  background: linear-gradient(
      315deg,
      rgba(122, 121, 122, 0) 7%,
      rgba(172, 172, 172, 0) 86%
    )
    rgba(255, 255, 255, 0.03);

  -webkit-transform: translateZ(0);
`,zot=U.div`
  display: flex;
  flex-direction: column;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;

  @media screen and (min-width: 768px) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    width: 100vw;
    // gap: 24px;
    padding: 0 24px;
    position: relative;

    /* Вертикальні бордери між картками */
    &::before {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      width: 1px;
      // background-color: rgba(255, 255, 255, 0.25);
      transform: translateX(-50%);
    }

    /* Горизонтальні бордери між рядами */
    &::after {
      content: '';
      position: absolute;
      left: 2%;
      right: 0;
      bottom: 0;
      height: 1px;
      width: 96%;
      background-color: rgba(255, 255, 255, 0.25);
    }

    /* Індивідуальні ширини для карток на планшеті */
    & > :nth-child(1) {
      width: 80%; /* Перша картка менша на 20% */
    }
    & > :nth-child(2) {
      width: 120%; /* Друга картка більша */
      margin-left: -20%; /* Зсуваємо для вирівнювання */
    }
    & > :nth-child(3) {
      width: 120%; /* Третя картка більша */
    }
    & > :nth-child(4) {
      width: 80%; /* Четверта картка менша */
      margin-left: 20%; /* Зсуваємо для вирівнювання */
    }
    /* Продовжуємо шаблон для решти карток */
    & > :nth-child(5) {
      width: 80%;
    }
    & > :nth-child(6) {
      width: 120%;
      margin-left: -20%;
    }
    & > :nth-child(7) {
      width: 120%;
    }
    & > :nth-child(8) {
      width: 80%;
      margin-left: 20%;
    }
  }

  @media screen and (min-width: 1440px) {
    display: grid;
    grid-template-columns: repeat(
      3,
      minmax(0, 1fr)
    ); /* Додано minmax для правильного розподілу простору */
    grid-template-rows: auto auto auto;
    max-width: 1400px;
    width: 100%;
    margin: 0 auto;
    padding: 0 20px; /* Додаємо падінги по боках */
    box-sizing: border-box; /* Щоб падінги враховувались у загальній ширині */

    /* Прибираємо бордери для десктопу */
    &::before,
    &::after {
      // display: none;
    }

    /* Скидаємо ширини для десктопу */
    & > * {
      width: auto !important;
      margin-left: 0 !important;
    }

    /* Розміщення карток для десктопу з бордерами */
    & > :nth-child(1) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Бордер праворуч */
    }
    & > :nth-child(2) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25); /* Бордер праворуч */
    }
    & > :nth-child(3) {
      grid-column: 3;
      /* Без бордера праворуч (остання в рядку) */
    }
    & > :nth-child(4) {
      grid-column: 1;
      width: 151% !important; /* Широка картка */
      //?  margin-left: 53%!important; /* Зсуваємо для вирівнювання */
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Прибираємо бордер для широкої картки */
    }
    & > :nth-child(5) {
      grid-column: 2;
      width: 151% !important; /* Широка картка */
      margin-left: 51% !important; /* Зсуваємо для вирівнювання */
      border: none; /* Бордер праворуч */
    }
    & > :nth-child(6) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25); /* Бордер праворуч */
    }
    & > :nth-child(7) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Бордер праворуч */
    }
    & > :nth-child(8) {
      grid-column: 3;
      /* Без бордера */
    }
  }
`,Bot=U(G.div)`
  padding: 16px;
  width: 100%;
  height: fit-content;
  display: flex;
  gap: 4px;
  flex-direction: column;
  position: relative;

  /* Бордер для мобільної версії */
  &:not(:last-child)::after {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 0;
    width: 100%;
    height: 1px;
    background-color: rgba(255, 255, 255, 0.25);
  }

  @media screen and (min-width: 768px) {
    padding: 32px;
    height: 100%;

    /* Прибираємо бордери між картками для планшета */
    &::after {
      top: 0%;
      // display: none;
    }

    /* Додаткові бордери для окремих карток */
    &:nth-child(odd) {
      border-right: 1px solid rgba(255, 255, 255, 0.25);
    }
    &:nth-child(even) {
      border-left: 1px solid rgba(255, 255, 255, 0.25);
    }
  }

  @media screen and (min-width: 1440px) {
    &:nth-child(odd) {
      border-right: none;
    }
    &:nth-child(even) {
      border-left: none;
    }
  }
`,jot=U(G.p)`
  border-radius: 6px;
  padding: 6px 13px;
  width: 36px;
  height: 36px;
  margin: 10px 0px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.12) 7%,
      rgba(255, 255, 255, 0) 86%
    ),
    rgba(255, 255, 255, 0.03);

  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);

  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,Not=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,Vot=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-80);
  @media screen and (min-width: 768px) {
    font-size: 17px;
  }

  @media screen and (min-width: 1440px) {
  }
`,Uot=U.div`
  display: none;

  @media screen and (min-width: 768px) {
    display: flex;
    background-color: rgba(255, 255, 255, 0.25);
    width: 1px;
    height: 100%;
  }
`,BY=U.div`
  position: absolute;
  width: 100vw;
  height: 1px;
  // background-color: rgba(255, 255, 255, 0.25);

  @media screen and (min-width: 768px) {
    // display: none;
    width: 100vw;
    height: 1px;
    margin: 0 auto;
    left: 50%;
    transform: translateX(-50%);
  }
`,Fot=()=>{const{t:e}=jt(),t=[{id:"1",text:e("howWeWorkSection.cards.card1.title"),description:e("howWeWorkSection.cards.card1.description")},{id:"2",text:e("howWeWorkSection.cards.card2.title"),description:e("howWeWorkSection.cards.card2.description")},{id:"3",text:e("howWeWorkSection.cards.card3.title"),description:e("howWeWorkSection.cards.card3.description")},{id:"4",text:e("howWeWorkSection.cards.card4.title"),description:e("howWeWorkSection.cards.card4.description")},{id:"5",text:e("howWeWorkSection.cards.card5.title"),description:e("howWeWorkSection.cards.card5.description")},{id:"6",text:e("howWeWorkSection.cards.card6.title"),description:e("howWeWorkSection.cards.card6.description")},{id:"7",text:e("howWeWorkSection.cards.card7.title"),description:e("howWeWorkSection.cards.card7.description")},{id:"8",text:e("howWeWorkSection.cards.card8.title"),description:e("howWeWorkSection.cards.card8.description")}],i=r=>{switch(r){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}};return E.jsxs(Iot,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Rot,{children:[e("howWeWorkSection.header.title")," ",E.jsx(kot,{src:xo,alt:"Icon"})]})}),E.jsx(Oot,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:e("howWeWorkSection.header.mainHeading")}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(Lot,{children:e("howWeWorkSection.header.description")})}),E.jsxs(zot,{children:[t.map((r,n)=>E.jsx(Bi.Fragment,{children:E.jsxs(Bot,{as:G.div,...i(n),transition:{duration:.5,delay:n*.1},viewport:{once:!1,amount:.3},children:[" ",E.jsx(BY,{}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.15},viewport:{once:!1,amount:.3},children:E.jsx(jot,{children:r.id})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.2},viewport:{once:!1,amount:.3},children:E.jsx(Not,{children:r.text})}),E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:n*.25},viewport:{once:!1,amount:.3},children:E.jsx(Vot,{children:r.description})})," ",E.jsx(BY,{})]})},n)),E.jsx(Uot,{})]})]})},Hot=()=>E.jsxs(ed,{children:[E.jsx(aot,{}),E.jsx(xot,{}),E.jsx(Dot,{}),E.jsx(Zm,{}),E.jsx(Fot,{}),E.jsx(qf,{}),E.jsx(Wf,{}),E.jsx(mc,{}),E.jsx($f,{}),E.jsx(Ru,{})]}),Got="/assets/HeroMarketing-BLmUJ5Cs.png",Wot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHTSURBVHgBlZFfKGRxFMfP/f1m7nVxLWN2TevaHXeMdnajndll291ktWp2U9vyslZ5GfFKihRelCdSXrwQjxTN5FH+TDQITSL/mTBoDJm4/gxm5v50NQpPnDrn4ZzvOd9OH4BnBg4nsfxRc+9UF8I/IYKzbwdPwnPq8cJt46QzYg0HsV66joaKvCTIFoOQt3Dm7LKLlqqOg/nw0ZCsRa3F6pZ2sUBX+NoK9OURzNgXoe0NDTZGaSor4OfcPemOsFhx6zBan7i6HyfoK98PUtJLBSw5tLAToIFhaDgPXYOx3BiSXLt+nDLFyU7oAvObRtoFzStlQPeNgQeUEPlKBUEmiiRoNODtc6N1ZxTrn/7vkp2wikWT5qy08lh8Rmp4G+XDHLAsAiXCVNdQoKijdyuuxKTTiopYVWqS5MTTG+JxVnK8kP4lMW1i8C81b6sGz+EpCB/XSHbmW3MMS2pZbXwh3+QFTf63z/L3qHt8z2oIeHIzchL4sW4jWl5KBd0HrzS7ujH843tyHWKYgDtGQtE+P3efB1T/VPf4BjLIsSMz5B/5TaqKDHpDJJiGGr6Sq8lSYm3MtdxnguTyAuBTbb5+caQph/Q3/Kq7Y2U28SnwxHhA+wZm35+WAXRZhgAAAABJRU5ErkJggg==",qot=J.lazy(()=>gc(()=>Promise.resolve().then(()=>Cae),void 0)),Xot=U.div`
  position: relative;
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  @media screen and (min-width: 1440px) {
   margin-bottom: -300px;
  }

    @media (min-width: 1920px) {
  margin-bottom: -600px;
  margin-top: -300px;
  } 
`,Yot=U.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -1;
`,Qot=U.div`
  position: relative;
  width: 100%;
  height: 100%;
  @media screen and (min-width: 1440px) {
  margin-top: -70px;
  }

  @media (min-width: 1920px) {
  margin-top: -200px;
  } 
`,Kot=U.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2;
  transition: opacity 0.5s ease-out;
`,Zot=U.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  opacity: ${({$visible:e})=>e?1:0};
  transition: opacity 0.5s ease-out;
`,$ot=U.div`
  width: 100vw;
  height: 100vh;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
`,Jot=U.img`
  width: 100%;
  height: 100%;
  object-fit: cover;
`,elt=U(G.div)`
  position: absolute;
  width: 4px;
  height: 4px;
  background: white;
  border-radius: 50%;
  filter: drop-shadow(0 0 6px white);
  opacity: 0.8;
  z-index: 2;
`,tlt=U.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 2;
`,ilt=U.div`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  max-width: 1300px;
  padding: 0 20px;
  text-align: center;
  z-index: 10;
  @media screen and (min-width: 1440px) {
  top: 300px;
  }

    @media (min-width: 1920px) {
    top: 900px;
  margin-top: -200px;
  } 
`,jY=()=>{const e=Array.from({length:100},()=>({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,delay:Math.random()*3,duration:1+Math.random()*2}));return E.jsxs($ot,{children:[E.jsx(Jot,{src:Got,alt:"3D Scene"}),E.jsx(tlt,{children:e.map((t,i)=>E.jsx(elt,{style:{top:t.top,left:t.left},animate:{opacity:[0,1,0],scale:[.3,.6,.3]},transition:{duration:t.duration,repeat:1/0,repeatType:"loop",delay:t.delay}},i))})]})},rlt=()=>{const e=kf("(max-width: 767px)"),{t}=jt(),[i,r]=J.useState(!1),[n,s]=J.useState(!0),a=J.useRef();J.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]);const o=()=>{a.current=setTimeout(()=>{r(!0),s(!1)},2e3)};return E.jsxs(Xot,{children:[E.jsx(Yot,{children:e?E.jsx(jY,{}):E.jsxs(Qot,{children:[n&&E.jsx(Kot,{style:{opacity:i?0:1},children:E.jsx(jY,{})}),E.jsx(J.Suspense,{fallback:null,children:E.jsx(Zot,{$visible:i,children:E.jsx(qot,{scene:"https://prod.spline.design/xuwX0qwENokWyrTw/scene.splinecode",onLoad:o,style:{width:"100vw",height:"100vh",transform:"rotate(180deg)"}})})})]})}),E.jsxs(ilt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},style:{position:"relative",zIndex:1,width:"100%"},children:E.jsxs(Ml,{children:[t("brandEngineHero.innovativeText"),E.jsx(Ur,{src:Wot,alt:"💰"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(Pl,{children:t("brandEngineHero.title")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:1.5,delay:.9},viewport:{once:!1,amount:.3},children:E.jsxs(Pu,{children:[E.jsx("a",{href:"https://sabsus.app/registrcompany/web",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Du,{children:t("brandEngineHero.buttons.tryFree")})}),E.jsx("a",{href:"https://sabsus.app/login/demo@sabsus.com/demo2025",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Iu,{children:t("brandEngineHero.buttons.viewDemo")})})]})})]})]})},nlt="/assets/key-ze9FIwUl.png",slt="/assets/key1-B1JNgL99.png",alt="/assets/key2-CCreQKXj.png",olt="/assets/key3-CTK-QvEx.png",llt="/assets/key4-D2wob9sv.png",clt="/assets/key5-BPtrt2qF.png",ult="/assets/key6-B3QwPjkV.png",hlt="/assets/key7-e_U2d51X.png",dlt=U(G.div)`
  margin: 0 auto;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: hidden;

  .swiper {
    width: 100vw;
    padding: 0 0;
    margin: 0 auto;
  }

  .swiper-slide {
    padding: 0 0;
    margin: 0 auto;
    width: 100vw !important;
    display: flex;
    justify-content: center;
    transition: transform 0.3s ease;
  }
`,flt=U(G.div)`
  @media (min-width: 768px) {
    display: flex;
    flex-wrap: wrap;
    flex-direction: row;
    align-items: center;
    gap: 16px;
    margin: 0 auto;
    justify-content: center;
  }
`,NY=U.div`
  overflow: hidden;
  display: flex;
  flex-direction: column;
  border: 1px solid #212121;
  border-radius: 24px;
  padding: 20px;
  width: 100%;
  max-width: 311px;
  height: 350px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  will-change: transform, box-shadow;
  transition:
    transform 0.3s ease,
    box-shadow 0.3s ease;
  gap: 10px;
  align-items: flex-start;
  margin: 0 auto;
  justify-content: center;

  @media screen and (min-width: 1440px) {
     width: 380px;
  }
`,VY=U.img`
  filter: drop-shadow(0 0 20px rgba(43, 67, 226, 0.7));
  transition: filter 0.3s ease;
  width: 199px;
height: 199px;
  
  &:hover {
    filter: drop-shadow(0 0 30px rgba(35, 62, 236, 0.84));
`,UY=U.h3`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 17px;
  line-height: 130%;
  color: var(--white-100);
`,FY=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  line-height: 130%;
  color: var(--white-60);
`,plt=()=>{const e=Yr({query:"(max-width: 767px)"}),{t}=jt(),i=a=>{switch(a){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}},r=[{id:1,imageUrl:nlt,title:t("marketingKeySection.cards.card1.title"),text:t("marketingKeySection.cards.card1.text")},{id:2,imageUrl:slt,title:t("marketingKeySection.cards.card2.title"),text:t("marketingKeySection.cards.card2.text")},{id:3,imageUrl:alt,title:t("marketingKeySection.cards.card3.title"),text:t("marketingKeySection.cards.card3.text")},{id:4,imageUrl:olt,title:t("marketingKeySection.cards.card4.title"),text:t("marketingKeySection.cards.card4.text")},{id:5,imageUrl:llt,title:t("marketingKeySection.cards.card5.title"),text:t("marketingKeySection.cards.card5.text")},{id:6,imageUrl:clt,title:t("marketingKeySection.cards.card6.title"),text:t("marketingKeySection.cards.card6.text")},{id:7,imageUrl:ult,title:t("marketingKeySection.cards.card7.title"),text:t("marketingKeySection.cards.card7.text")},{id:8,imageUrl:hlt,title:t("marketingKeySection.cards.card8.title"),text:t("marketingKeySection.cards.card8.text")}];return E.jsx(dlt,{as:G.div,initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.2},children:e?E.jsx(G.div,{children:E.jsx(Aa,{loop:!0,slidesPerView:1,spaceBetween:6,centeredSlides:!1,autoplay:{delay:1e3,disableOnInteraction:!1,reverseDirection:!1},speed:4e3,modules:[ra],className:"mySwiper",children:r.map(a=>E.jsx(na,{children:E.jsxs(NY,{children:[E.jsx(VY,{src:a.imageUrl,alt:a.title}),E.jsx(UY,{children:a.title}),E.jsx(FY,{children:a.text})]})},a.id))})}):E.jsx(flt,{children:r.map((a,o)=>E.jsxs(NY,{as:G.div,...i(o),transition:{duration:.5,delay:o*.1},viewport:{once:!1,amount:.3},children:[E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:o*.25},viewport:{once:!1,amount:.3},children:E.jsx(VY,{src:a.imageUrl,alt:a.title})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:o*.2},viewport:{once:!1,amount:.3},children:E.jsx(UY,{children:a.title})}),E.jsx(FY,{children:a.text})]},a.id))})})},mlt=U(G.div)`
  margin: 0 auto;
  margin-top: 100px;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;

  @media screen and (min-width: 768px) {
    margin-top: 120px;
  }

  @media screen and (min-width: 1440px) {
    margin-top: 150px;
    max-width: 1440px;
  }
`,glt=()=>{const{t:e}=jt();return E.jsxs(mlt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Ff,{children:[e("marketingKeySection.header.title")," ",E.jsx(Ur,{src:Km,alt:""})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(Hf,{dangerouslySetInnerHTML:{__html:e("marketingKeySection.header.mainHeading")}})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(pc,{children:e("marketingKeySection.header.description")})}),E.jsx(plt,{})]})},vlt="/assets/Galaxy%20Tab%20S8%20Ultra-BV4Z-B6V.png",ylt=U(G.div)`
  display: flex;
  padding: 0 16px; /* або 24px — на твій смак */
  max-width: 1440px;
  margin: 0 auto;
  flex-direction: column;
  align-items: center;
  position: relative;
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
    width: 1440px;
    margin: 0 auto;
  }
`,xlt=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity;
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,blt=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
   max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
text-align: start;
`,wlt=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
    text-align: start;
  }
`,Slt=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    position: absolute;
    max-width: 530px;
    width: 100%;
    margin: 0 auto 26px;
    top: 80%;
    right: 62%;
    text-align: start;
  }
`,_lt=U.div`
  margin-bottom: 374px;

  @media screen and (min-width: 768px) {
    margin-bottom: 700px;
  }

  @media screen and (min-width: 1440px) {
    margin-bottom: 609px;
    width: 100%; // ✅ НЕ 100vw
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
`,Elt=U.div`
  position: absolute;
  top: 60%;
  left: 50%;
  width: 365px;
  height: 354px;
  transform: translate(-50%, -50%);
  overflow: visible;
  @media screen and (min-width: 768px) {
    top: 60%;
    width: 700px;
    height: 633px;
  }

  @media screen and (min-width: 1440px) {
    left: 70%;
    top: 50%;
    height: 660px;
  }
`,Alt=U(G.img)`
  position: absolute;
  top: 0;
  left: 0;
  object-fit: contain;
  width: 100%;
  height: 100%;
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,Tlt=U(G.div)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 0.8) 0%,
    rgba(255, 255, 255, 0) 70%
  );
  opacity: 0;
  border-radius: 50%;
  pointer-events: none;

  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,Clt=()=>{const{t:e}=jt();return E.jsxs(ylt,{children:[E.jsxs(_lt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(xlt,{children:[e("marketingLivePrep.header.title"),E.jsx(Ur,{src:xo,alt:"🚀"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(blt,{children:e("marketingLivePrep.header.mainHeading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(wlt,{children:e("marketingLivePrep.header.description")})})]}),E.jsxs(Elt,{children:[E.jsx(Alt,{src:vlt,alt:"background lines",initial:{y:0,opacity:.5},animate:{y:-10,opacity:1},transition:{duration:2,repeat:1/0,repeatType:"reverse",ease:"easeInOut",delay:.5}}),E.jsx(Tlt,{initial:{scale:.8,opacity:0},animate:{scale:1.2,opacity:.3},transition:{duration:3,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}})]}),E.jsx(Slt,{children:e("marketingLivePrep.header.additionalDescription")})]})},Mlt=U.div`
  display: flex;
  margin: 0 auto;
  // margin-top: 100px;
  width: 100%;
  height: 100%;
  margin-bottom: 100px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
`,Plt=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity; /* Оптимізація анімації */

  @media screen and (min-width: 768px) {
    /* Додаткові стилі для планшетів */
  }

  @media screen and (min-width: 1440px) {
    /* Додаткові стилі для десктопів */
  }
`,Dlt=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,Ilt=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,Rlt=U.img`
  border-radius: 25px;
  padding: 4px;
  overflow: visible;
  font-size: 13px;
  width: 20px;
  margin-left: 6px;

  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 1px 2px rgba(0, 0, 0, 0.06);

  background: linear-gradient(
      315deg,
      rgba(122, 121, 122, 0) 7%,
      rgba(172, 172, 172, 0) 86%
    )
    rgba(255, 255, 255, 0.03);

  -webkit-transform: translateZ(0);
`,Olt=U.div`
  display: flex;
  flex-direction: column;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;

  @media screen and (min-width: 768px) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    width: 100vw;
    // gap: 24px;
    padding: 0 24px;
    position: relative;

    /* Вертикальні бордери між картками */
    &::before {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      width: 1px;
      // background-color: rgba(255, 255, 255, 0.25);
      transform: translateX(-50%);
    }

    /* Горизонтальні бордери між рядами */
    &::after {
      content: '';
      position: absolute;
      left: 2%;
      right: 0;
      bottom: 0;
      height: 1px;
      width: 96%;
      background-color: rgba(255, 255, 255, 0.25);
    }

    /* Індивідуальні ширини для карток на планшеті */
    & > :nth-child(1) {
      width: 80%; /* Перша картка менша на 20% */
    }
    & > :nth-child(2) {
      width: 120%; /* Друга картка більша */
      margin-left: -20%; /* Зсуваємо для вирівнювання */
    }
    & > :nth-child(3) {
      width: 120%; /* Третя картка більша */
    }
    & > :nth-child(4) {
      width: 80%; /* Четверта картка менша */
      margin-left: 20%; /* Зсуваємо для вирівнювання */
    }
    /* Продовжуємо шаблон для решти карток */
    & > :nth-child(5) {
      width: 80%;
    }
    & > :nth-child(6) {
      width: 120%;
      margin-left: -20%;
    }
    & > :nth-child(7) {
      width: 120%;
    }
    & > :nth-child(8) {
      width: 80%;
      margin-left: 20%;
    }
  }

  @media screen and (min-width: 1440px) {
    display: grid;
    grid-template-columns: repeat(
      3,
      minmax(0, 1fr)
    ); /* Додано minmax для правильного розподілу простору */
    grid-template-rows: auto auto auto;
    max-width: 1400px;
    width: 100%;
    margin: 0 auto;
    padding: 0 20px; /* Додаємо падінги по боках */
    box-sizing: border-box; /* Щоб падінги враховувались у загальній ширині */

    /* Прибираємо бордери для десктопу */
    &::before,
    &::after {
      // display: none;
    }

    /* Скидаємо ширини для десктопу */
    & > * {
      width: auto !important;
      margin-left: 0 !important;
    }

    /* Розміщення карток для десктопу з бордерами */
    & > :nth-child(1) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Бордер праворуч */
    }
    & > :nth-child(2) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25); /* Бордер праворуч */
    }
    & > :nth-child(3) {
      grid-column: 3;
      /* Без бордера праворуч (остання в рядку) */
    }
    & > :nth-child(4) {
      grid-column: 1;
      width: 151% !important; /* Широка картка */
      //?  margin-left: 53%!important; /* Зсуваємо для вирівнювання */
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Прибираємо бордер для широкої картки */
    }
    & > :nth-child(5) {
      grid-column: 2;
      width: 151% !important; /* Широка картка */
      margin-left: 51% !important; /* Зсуваємо для вирівнювання */
      border: none; /* Бордер праворуч */
    }
    & > :nth-child(6) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25); /* Бордер праворуч */
    }
    & > :nth-child(7) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Бордер праворуч */
    }
    & > :nth-child(8) {
      grid-column: 3;
      /* Без бордера */
    }
  }
`,Llt=U(G.div)`
  padding: 16px;
  width: 100%;
  height: fit-content;
  display: flex;
  gap: 4px;
  flex-direction: column;
  position: relative;

  /* Бордер для мобільної версії */
  &:not(:last-child)::after {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 0;
    width: 100%;
    height: 1px;
    background-color: rgba(255, 255, 255, 0.25);
  }

  @media screen and (min-width: 768px) {
    padding: 32px;
    height: 100%;

    /* Прибираємо бордери між картками для планшета */
    &::after {
      top: 0%;
      // display: none;
    }

    /* Додаткові бордери для окремих карток */
    &:nth-child(odd) {
      border-right: 1px solid rgba(255, 255, 255, 0.25);
    }
    &:nth-child(even) {
      border-left: 1px solid rgba(255, 255, 255, 0.25);
    }
  }

  @media screen and (min-width: 1440px) {
    &:nth-child(odd) {
      border-right: none;
    }
    &:nth-child(even) {
      border-left: none;
    }
  }
`,klt=U(G.p)`
  border-radius: 6px;
  padding: 6px 13px;
  width: 36px;
  height: 36px;
  margin: 10px 0px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.12) 7%,
      rgba(255, 255, 255, 0) 86%
    ),
    rgba(255, 255, 255, 0.03);

  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);

  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,zlt=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,Blt=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-80);
  @media screen and (min-width: 768px) {
    font-size: 17px;
  }

  @media screen and (min-width: 1440px) {
  }
`,jlt=U.div`
  display: none;

  @media screen and (min-width: 768px) {
    display: flex;
    background-color: rgba(255, 255, 255, 0.25);
    width: 1px;
    height: 100%;
  }
`,HY=U.div`
  position: absolute;
  width: 100vw;
  height: 1px;
  // background-color: rgba(255, 255, 255, 0.25);

  @media screen and (min-width: 768px) {
    // display: none;
    width: 100vw;
    height: 1px;
    margin: 0 auto;
    left: 50%;
    transform: translateX(-50%);
  }
`,Nlt=()=>{const{t:e}=jt(),t=[{id:"1",text:e("marketingHowWeWork.cards.card1.title"),description:e("marketingHowWeWork.cards.card1.description")},{id:"2",text:e("marketingHowWeWork.cards.card2.title"),description:e("marketingHowWeWork.cards.card2.description")},{id:"3",text:e("marketingHowWeWork.cards.card3.title"),description:e("marketingHowWeWork.cards.card3.description")},{id:"4",text:e("marketingHowWeWork.cards.card4.title"),description:e("marketingHowWeWork.cards.card4.description")},{id:"5",text:e("marketingHowWeWork.cards.card5.title"),description:e("marketingHowWeWork.cards.card5.description")},{id:"6",text:e("marketingHowWeWork.cards.card6.title"),description:e("marketingHowWeWork.cards.card6.description")},{id:"7",text:e("marketingHowWeWork.cards.card7.title"),description:e("marketingHowWeWork.cards.card7.description")},{id:"8",text:e("marketingHowWeWork.cards.card8.title"),description:e("marketingHowWeWork.cards.card8.description")}],i=r=>{switch(r){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}};return E.jsxs(Mlt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Plt,{children:[e("marketingHowWeWork.header.title")," ",E.jsx(Rlt,{src:xo,alt:"Icon"})]})}),E.jsx(Dlt,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:e("marketingHowWeWork.header.mainHeading")}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(Ilt,{children:e("marketingHowWeWork.header.description")})}),E.jsxs(Olt,{children:[t.map((r,n)=>E.jsx(Bi.Fragment,{children:E.jsxs(Llt,{as:G.div,...i(n),transition:{duration:.5,delay:n*.1},viewport:{once:!1,amount:.3},children:[" ",E.jsx(HY,{}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.15},viewport:{once:!1,amount:.3},children:E.jsx(klt,{children:r.id})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.2},viewport:{once:!1,amount:.3},children:E.jsx(zlt,{children:r.text})}),E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:n*.25},viewport:{once:!1,amount:.3},children:E.jsx(Blt,{children:r.description})})," ",E.jsx(HY,{})]})},n)),E.jsx(jlt,{})]})]})},Vlt=()=>E.jsxs(ed,{children:[E.jsx(rlt,{}),E.jsx(glt,{}),E.jsx(Clt,{}),E.jsx(Zm,{}),E.jsx(Nlt,{}),E.jsx(qf,{}),E.jsx(Wf,{}),E.jsx(mc,{}),E.jsx($f,{}),E.jsx(Ru,{})]}),Ult="/assets/HeroIcon-CE5FtB-J.png",Flt="/assets/Paperclip-BsIOcjQF.svg",Hlt=U.div`
  margin: 0 auto;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;

  @media screen and (min-width: 768px) {
    width: 100%;
    margin-top: 100px;
    margin-bottom: 100px;
  }

  @media screen and (min-width: 1440px) {
    margin-top: 100px;
    margin-bottom: 250px;
  }
`,Glt=U.div`
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translate(-50%, -50%);
  max-width: 1400px;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  z-index: -1;
  margin-top: 350px;

  iframe,
  canvas {
    width: 100% !important;
    height: 100% !important;
    display: block;
    position: relative;
    z-index: 1;
    object-fit: cover;
    pointer-events: auto;
  }

  @media screen and (max-width: 767px) {
    height: 70vh;
    z-index: -2;

    iframe,
    canvas {
      pointer-events: none;
      z-index: -1;
      opacity: 0.7;
    }
  }

  @media screen and (min-width: 768px) {
    iframe,
    canvas {
      width: 100% !important;
      height: 100vh !important;
      display: block;
      position: relative;
      z-index: 111;
      object-fit: cover;
      pointer-events: auto;
    }
    &::before {
      content: '';
      position: absolute;
      bottom: 0;
      right: 0;
      width: 150px;
      height: 150px;
      background: rgba(0, 0, 0, 1) 80%;
      transform: rotate(344deg);
      transform-origin: 100% 100%;
      z-index: 11111112;
    }
  }
  margin-top: 250px;
  @media screen and (min-width: 1440px) {
    margin-top: 350px;
    margin-bottom: 150px;

    iframe,
    canvas {
      width: 100% !important;
      height: 100vh !important;
      display: block;
      position: relative;
      z-index: 111;
      object-fit: cover;
      pointer-events: auto;
    }
  }
`,Wlt=U(G.div)`
  position: absolute;
  width: 4px;
  height: 4px;
  background: white;
  border-radius: 50%;
  filter: drop-shadow(0 0 6px white);
  opacity: 0.8;
  z-index: 2;
`,qlt=U.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 2;
`,Xlt=U.div`
  position: absolute;
  top: 307px;
  left: 50%;
  transform: translate(-50%, 0);
  @media screen and (min-width: 768px) {
    top: 407px;
  }

  @media screen and (min-width: 1440px) {
    top: 557px;
  }
`,GY=()=>{const e=Array.from({length:100},()=>({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,delay:Math.random()*3,duration:1+Math.random()*2}));return E.jsxs("div",{style:{position:"relative",width:"130%",margin:"0 auto"},children:[E.jsx("img",{src:Ult,alt:"3D Scene",style:{width:"140%",height:"auto",filter:"blur(0.5px)",display:"block"}}),E.jsx(qlt,{children:e.map((t,i)=>E.jsx(Wlt,{style:{top:t.top,left:t.left},animate:{opacity:[0,1,0],scale:[.3,.6,.3]},transition:{duration:t.duration,repeat:1/0,repeatType:"loop",delay:t.delay}},i))})]})},Ylt=()=>{const e=kf("(max-width: 767px)"),{t}=jt();return E.jsxs(Hlt,{style:{marginTop:50},children:[E.jsx(Glt,{children:e?E.jsx(GY,{}):E.jsx(J.Suspense,{fallback:E.jsx(GY,{}),children:E.jsx(zw,{scene:"https://prod.spline.design/o3TwCRELc5TibQQE/scene.splinecode",style:{maxWidth:"1440px",width:"100%",height:"auto",overflow:"visible"}})})}),E.jsxs(Xlt,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},style:{position:"relative",zIndex:1,width:"100%"},children:E.jsxs(Ml,{children:[t("integrationScalingHero.title")," ",E.jsx(Ur,{src:Flt,alt:"Control icon"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.3},viewport:{once:!1,amount:.3},children:E.jsx(Pl,{children:t("integrationScalingHero.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:1.5,delay:.9},viewport:{once:!1,amount:.3},children:E.jsxs(Pu,{children:[E.jsx("a",{href:"https://sabsus.app/registrcompany/web",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Du,{children:t("integrationScalingHero.buttons.tryFree")})}),E.jsx("a",{href:"https://sabsus.app/login/demo@sabsus.com/demo2025",target:"_blank",rel:"noopener noreferrer",children:E.jsx(Iu,{children:t("integrationScalingHero.buttons.viewDemo")})})]})})]})]})},Qlt="/assets/key-DMyUcIDl.png",Klt="/assets/key1-qCsE4Vse.png",Zlt="/assets/key2-6E_R18a-.png",$lt="/assets/key3-JkDZwMbr.png",Jlt="/assets/key4-CV1QJAF4.png",ect="/assets/key5-C_KPYUZx.png",tct="/assets/key6-RF5K4gwR.png",ict="/assets/key7-2ngsCtjH.png",rct=U(G.div)`
  margin: 0 auto;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: hidden;

  .swiper {
    width: 100vw;
    padding: 0 0;
    margin: 0 auto;
  }

  .swiper-slide {
    padding: 0 0;
    margin: 0 auto;
    width: 100vw !important;
    display: flex;
    justify-content: center;
    transition: transform 0.3s ease;
  }
`,nct=U(G.div)`
  @media (min-width: 768px) {
    display: flex;
    flex-wrap: wrap;
    flex-direction: row;
    align-items: center;
    gap: 16px;
    margin: 0 auto;
    justify-content: center;
  }
`,WY=U.div`
  overflow: hidden;
  display: flex;
  flex-direction: column;
  border: 1px solid #212121;
  border-radius: 24px;
  padding: 20px;
  width: 100%;
  max-width: 311px;
  height: 350px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: rgba(255, 255, 255, 0.03);
  will-change: transform, box-shadow;
  transition:
    transform 0.3s ease,
    box-shadow 0.3s ease;
  gap: 10px;
  align-items: flex-start;
  margin: 0 auto;
  justify-content: center;

  @media screen and (min-width: 1440px) {
 width: 380px;
  }
`,qY=U.img`
  filter: drop-shadow(0 0 20px rgba(43, 67, 226, 0.7));
  transition: filter 0.3s ease;
  width: 199px;
height: 199px;
  
  &:hover {
    filter: drop-shadow(0 0 30px rgba(35, 62, 236, 0.84));
`,XY=U.h3`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 17px;
  line-height: 130%;
  color: var(--white-100);
`,YY=U.p`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  line-height: 130%;
  color: var(--white-60);
`,sct=()=>{const e=Yr({query:"(max-width: 767px)"}),{t}=jt(),i=a=>{switch(a){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}},r=[{id:1,imageUrl:Qlt,key:"apiFirst"},{id:2,imageUrl:Klt,key:"scalableInfra"},{id:3,imageUrl:Zlt,key:"deviceFlexibility"},{id:4,imageUrl:$lt,key:"offlineMode"},{id:5,imageUrl:Jlt,key:"multiFormat"},{id:6,imageUrl:ect,key:"customDomains"},{id:7,imageUrl:tct,key:"paymentIntegrations"},{id:8,imageUrl:ict,key:"deliveryAggregators"}];return E.jsx(rct,{as:G.div,initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.2},children:e?E.jsx(G.div,{children:E.jsx(Aa,{loop:!0,slidesPerView:1,spaceBetween:6,centeredSlides:!1,autoplay:{delay:1e3,disableOnInteraction:!1,reverseDirection:!1},speed:4e3,modules:[ra],className:"mySwiper",children:r.map(a=>E.jsx(na,{children:E.jsxs(WY,{children:[E.jsx(qY,{src:a.imageUrl,alt:t(`integrationScalingCards.${a.key}.title`)}),E.jsx(XY,{children:t(`integrationScalingCards.${a.key}.title`)}),E.jsx(YY,{children:t(`integrationScalingCards.${a.key}.text`)})]})},a.id))})}):E.jsx(nct,{children:r.map((a,o)=>E.jsxs(WY,{as:G.div,...i(o),transition:{duration:.5,delay:o*.1},viewport:{once:!1,amount:.3},children:[E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:o*.25},viewport:{once:!1,amount:.3},children:E.jsx(qY,{src:a.imageUrl,alt:t(`integrationScalingCards.${a.key}.title`)})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:o*.2},viewport:{once:!1,amount:.3},children:E.jsx(XY,{children:t(`integrationScalingCards.${a.key}.title`)})}),E.jsx(YY,{children:t(`integrationScalingCards.${a.key}.text`)})]},a.id))})})},act=U(G.div)`
  margin: 0 auto;
  margin-top: 650px;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;

  @media screen and (min-width: 768px) {
    // Tablet styles if needed
  }

  @media screen and (min-width: 1440px) {
    margin-top: 850px;
    margin-bottom: 150px;
    max-width: 1440px;
  }
`,oct=()=>{const{t:e}=jt();return E.jsxs(act,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(Ff,{children:[e("keyCapabilitiesSection2.title")," ",E.jsx(Ur,{src:Km,alt:"DVD icon"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(Hf,{children:e("keyCapabilitiesSection2.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(pc,{children:e("keyCapabilitiesSection2.description")})}),E.jsx(sct,{})]})},lct="/assets/GalaxyTabS8Ultra-nBzhqUWH.png",cct=U(G.div)`
  display: flex;
  padding: 0 16px;
  max-width: 1440px;
  margin: 0 auto;
  flex-direction: column;
  align-items: center;
  position: relative;

  @media screen and (min-width: 1440px) {
    width: 1440px;
    margin: 0 auto;
  }
`,uct=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity;
`,hct=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
    text-align: start;
  }
`,dct=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 630px;
    width: 100%;
    margin: 0 auto 26px;
    display: flex;
    text-align: start;
  }
`;U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    position: absolute;
    max-width: 530px;
    width: 100%;
    margin: 0 auto 26px;
    top: 80%;
    right: 62%;
    text-align: start;
  }
`;const fct=U.div`
  margin-bottom: 374px;

  @media screen and (min-width: 768px) {
    margin-bottom: 700px;
  }

  @media screen and (min-width: 1440px) {
    margin-bottom: 609px;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
`,pct=U.div`
  position: absolute;
  top: 60%;
  left: 50%;
  width: 365px;
  height: 354px;
  transform: translate(-50%, -50%);
  overflow: visible;

  @media screen and (min-width: 768px) {
    top: 60%;
    width: 700px;
    height: 633px;
  }

  @media screen and (min-width: 1440px) {
    left: 70%;
    top: 50%;
    height: 660px;
  }
`,mct=U(G.img)`
  position: absolute;
  top: 0;
  left: 0;
  object-fit: contain;
  width: 100%;
  height: 100%;
`,gct=U(G.div)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 0.8) 0%,
    rgba(255, 255, 255, 0) 70%
  );
  opacity: 0;
  border-radius: 50%;
  pointer-events: none;
`,vct=()=>{const{t:e}=jt();return E.jsxs(cct,{children:[E.jsxs(fct,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(uct,{children:[e("brandedGrowthTools.title")," ",E.jsx(Ur,{src:xo,alt:"Rocket icon"})]})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:E.jsx(hct,{children:e("brandedGrowthTools.heading")})}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(dct,{children:e("brandedGrowthTools.description")})})]}),E.jsxs(pct,{children:[E.jsx(mct,{src:lct,alt:"Background illustration",initial:{y:0,opacity:.5},animate:{y:-10,opacity:1},transition:{duration:2,repeat:1/0,repeatType:"reverse",ease:"easeInOut",delay:.5}}),E.jsx(gct,{initial:{scale:.8,opacity:0},animate:{scale:1.2,opacity:.3},transition:{duration:3,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}})]})]})},yct=U.div`
  display: flex;
  margin: 0 auto;
  // margin-top: 100px;
  width: 100%;
  height: 100%;
  margin-bottom: 100px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
`,xct=U(G.p)`
  margin: 0 auto;
  border-radius: 24px;
  padding: 4px 4px 4px 14px;
  width: max-content;
  height: 28px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
  margin-top: 50px;
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 12px;
  color: var(--white-100);
  backdrop-filter: blur(16px);
  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12) 7%,
    rgba(255, 255, 255, 0) 86%
  );
  align-items: center;
  will-change: transform, opacity; /* Оптимізація анімації */

  @media screen and (min-width: 768px) {
    /* Додаткові стилі для планшетів */
  }

  @media screen and (min-width: 1440px) {
    /* Додаткові стилі для десктопів */
  }
`,bct=U(G.h2)`
  font-family: var(--font-family);
  font-weight: 600;
  font-size: 36px;
  line-height: 110%;
  text-align: center;
  color: var(--white-100);
  margin-bottom: 16px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 44px;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,wct=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  text-align: center;
  color: var(--white-80);
  margin-bottom: 56px;
  will-change: transform, opacity;

  @media screen and (min-width: 768px) {
    font-size: 17px;
    line-height: 130%;
  }

  @media screen and (min-width: 1440px) {
    max-width: 800px;
    width: 100%;
    margin: 0 auto 26px;
  }
`,Sct=U.img`
  border-radius: 25px;
  padding: 4px;
  overflow: visible;
  font-size: 13px;
  width: 20px;
  margin-left: 6px;

  box-shadow:
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.18),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 1px 2px rgba(0, 0, 0, 0.06);

  background: linear-gradient(
      315deg,
      rgba(122, 121, 122, 0) 7%,
      rgba(172, 172, 172, 0) 86%
    )
    rgba(255, 255, 255, 0.03);

  -webkit-transform: translateZ(0);
`,_ct=U.div`
  display: flex;
  flex-direction: column;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;

  @media screen and (min-width: 768px) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    width: 100vw;
    // gap: 24px;
    padding: 0 24px;
    position: relative;

    /* Вертикальні бордери між картками */
    &::before {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      width: 1px;
      // background-color: rgba(255, 255, 255, 0.25);
      transform: translateX(-50%);
    }

    /* Горизонтальні бордери між рядами */
    &::after {
      content: '';
      position: absolute;
      left: 2%;
      right: 0;
      bottom: 0;
      height: 1px;
      width: 96%;
      background-color: rgba(255, 255, 255, 0.25);
    }

    /* Індивідуальні ширини для карток на планшеті */
    & > :nth-child(1) {
      width: 80%; /* Перша картка менша на 20% */
    }
    & > :nth-child(2) {
      width: 120%; /* Друга картка більша */
      margin-left: -20%; /* Зсуваємо для вирівнювання */
    }
    & > :nth-child(3) {
      width: 120%; /* Третя картка більша */
    }
    & > :nth-child(4) {
      width: 80%; /* Четверта картка менша */
      margin-left: 20%; /* Зсуваємо для вирівнювання */
    }
    /* Продовжуємо шаблон для решти карток */
    & > :nth-child(5) {
      width: 80%;
    }
    & > :nth-child(6) {
      width: 120%;
      margin-left: -20%;
    }
    & > :nth-child(7) {
      width: 120%;
    }
    & > :nth-child(8) {
      width: 80%;
      margin-left: 20%;
    }
  }

  @media screen and (min-width: 1440px) {
    display: grid;
    grid-template-columns: repeat(
      3,
      minmax(0, 1fr)
    ); /* Додано minmax для правильного розподілу простору */
    grid-template-rows: auto auto auto;
    max-width: 1400px;
    width: 100%;
    margin: 0 auto;
    padding: 0 20px; /* Додаємо падінги по боках */
    box-sizing: border-box; /* Щоб падінги враховувались у загальній ширині */

    /* Прибираємо бордери для десктопу */
    &::before,
    &::after {
      // display: none;
    }

    /* Скидаємо ширини для десктопу */
    & > * {
      width: auto !important;
      margin-left: 0 !important;
    }

    /* Розміщення карток для десктопу з бордерами */
    & > :nth-child(1) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Бордер праворуч */
    }
    & > :nth-child(2) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25); /* Бордер праворуч */
    }
    & > :nth-child(3) {
      grid-column: 3;
      /* Без бордера праворуч (остання в рядку) */
    }
    & > :nth-child(4) {
      grid-column: 1;
      width: 151% !important; /* Широка картка */
      //?  margin-left: 53%!important; /* Зсуваємо для вирівнювання */
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Прибираємо бордер для широкої картки */
    }
    & > :nth-child(5) {
      grid-column: 2;
      width: 151% !important; /* Широка картка */
      margin-left: 51% !important; /* Зсуваємо для вирівнювання */
      border: none; /* Бордер праворуч */
    }
    & > :nth-child(6) {
      grid-column: 1;
      border-right: 1px solid rgba(255, 255, 255, 0.25); /* Бордер праворуч */
    }
    & > :nth-child(7) {
      grid-column: 2;
      border-right: 1px solid rgba(255, 255, 255, 0.25) !important; /* Бордер праворуч */
    }
    & > :nth-child(8) {
      grid-column: 3;
      /* Без бордера */
    }
  }
`,Ect=U(G.div)`
  padding: 16px;
  width: 100%;
  height: fit-content;
  display: flex;
  gap: 4px;
  flex-direction: column;
  position: relative;

  /* Бордер для мобільної версії */
  &:not(:last-child)::after {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 0;
    width: 100%;
    height: 1px;
    background-color: rgba(255, 255, 255, 0.25);
  }

  @media screen and (min-width: 768px) {
    padding: 32px;
    height: 100%;

    /* Прибираємо бордери між картками для планшета */
    &::after {
      top: 0%;
      // display: none;
    }

    /* Додаткові бордери для окремих карток */
    &:nth-child(odd) {
      border-right: 1px solid rgba(255, 255, 255, 0.25);
    }
    &:nth-child(even) {
      border-left: 1px solid rgba(255, 255, 255, 0.25);
    }
  }

  @media screen and (min-width: 1440px) {
    &:nth-child(odd) {
      border-right: none;
    }
    &:nth-child(even) {
      border-left: none;
    }
  }
`,Act=U(G.p)`
  border-radius: 6px;
  padding: 6px 13px;
  width: 36px;
  height: 36px;
  margin: 10px 0px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 8px 16px -8px rgba(0, 0, 0, 0.03),
    0 2px 4px -2px rgba(0, 0, 0, 0.08),
    inset 0 -8px 24px 0 rgba(255, 255, 255, 0.03),
    inset 0 -5px 6px 0 rgba(255, 255, 255, 0.03);
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.12) 7%,
      rgba(255, 255, 255, 0) 86%
    ),
    rgba(255, 255, 255, 0.03);

  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);

  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,Tct=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 18px;
  line-height: 130%;
  color: var(--white-100);
  @media screen and (min-width: 768px) {
  }

  @media screen and (min-width: 1440px) {
  }
`,Cct=U(G.p)`
  font-family: var(--font-family);
  font-weight: 400;
  font-size: 16px;
  color: var(--white-80);
  @media screen and (min-width: 768px) {
    font-size: 17px;
  }

  @media screen and (min-width: 1440px) {
  }
`,Mct=U.div`
  display: none;

  @media screen and (min-width: 768px) {
    display: flex;
    background-color: rgba(255, 255, 255, 0.25);
    width: 1px;
    height: 100%;
  }
`,QY=U.div`
  position: absolute;
  width: 100vw;
  height: 1px;
  // background-color: rgba(255, 255, 255, 0.25);

  @media screen and (min-width: 768px) {
    // display: none;
    width: 100vw;
    height: 1px;
    margin: 0 auto;
    left: 50%;
    transform: translateX(-50%);
  }
`,Pct=()=>{const{t:e}=jt(),t=[{id:"1",key:"oneClick"},{id:"2",key:"openApi"},{id:"3",key:"multivenue"},{id:"4",key:"roleAccess"},{id:"5",key:"domainConfig"},{id:"6",key:"offlineMode"},{id:"7",key:"responsiveDesign"},{id:"8",key:"scalableInfra"}],i=r=>{switch(r){case 0:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 1:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 2:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 3:return{initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1}};case 4:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};case 5:return{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1}};case 6:return{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1}};default:return{initial:{opacity:0},whileInView:{opacity:1}}}};return E.jsxs(yct,{children:[E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!1,amount:.3},children:E.jsxs(xct,{children:[e("integrationScalingSection.title")," ",E.jsx(Sct,{src:xo,alt:"Icon"})]})}),E.jsx(bct,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},viewport:{once:!1,amount:.3},children:e("integrationScalingSection.heading")}),E.jsx(G.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!1,amount:.3},children:E.jsx(wct,{children:e("integrationScalingSection.description")})}),E.jsxs(_ct,{children:[t.map((r,n)=>E.jsx(Bi.Fragment,{children:E.jsxs(Ect,{as:G.div,...i(n),transition:{duration:.5,delay:n*.1},viewport:{once:!1,amount:.3},children:[E.jsx(QY,{}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.15},viewport:{once:!1,amount:.3},children:E.jsx(Act,{children:r.id})}),E.jsx(G.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:n*.2},viewport:{once:!1,amount:.3},children:E.jsx(Tct,{children:e(`integrationScalingSection.cards.${r.key}.title`)})}),E.jsx(G.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:n*.25},viewport:{once:!1,amount:.3},children:E.jsx(Cct,{children:e(`integrationScalingSection.cards.${r.key}.desc`)})}),E.jsx(QY,{})]})},n)),E.jsx(Mct,{})]})]})},Dct=()=>E.jsxs(ed,{children:[E.jsx(Ylt,{}),E.jsx(oct,{}),E.jsx(vct,{}),E.jsx(Zm,{}),E.jsx(Pct,{}),E.jsx(qf,{}),E.jsx(Wf,{}),E.jsx(mc,{}),E.jsx($f,{}),E.jsx(Ru,{})]}),Ict=()=>E.jsxs(ed,{children:[E.jsx(p$,{}),E.jsx($f,{}),E.jsx(mc,{}),E.jsx(Ru,{})]}),Rct=U(G.div)`
  width: 100%;
  top: 0;
  position: relative;
`,Dae=()=>{const{pathname:e}=Cl(),t=J.useRef(null);return J.useLayoutEffect(()=>{t.current&&t.current.scrollIntoView({behavior:"auto"}),window.scrollTo({top:-950,behavior:"smooth"})},[e]),E.jsx("div",{ref:t,style:{position:"absolute",top:"-950px",height:0}})},ro=({children:e})=>E.jsxs(Rct,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:-100},transition:{duration:.4,ease:[.22,1,.36,1]},children:[E.jsx(Dae,{}),e]}),Oct=()=>{const e=Cl();return J.useEffect(()=>{window.scrollTo(0,0)},[e.pathname]),E.jsxs(aA,{mode:"wait",children:[E.jsx(kDe,{}),E.jsx(Dae,{},"global-scroll-top"),E.jsxs(mce,{location:e,children:[E.jsx(Hs,{path:"/",element:E.jsx(dce,{to:"/home"})}),E.jsxs(Hs,{path:"/",element:E.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:E.jsx(lye,{})}),children:[E.jsx(Hs,{index:!0,element:E.jsx(ro,{children:E.jsx(hP,{})})}),E.jsx(Hs,{path:"/home",element:E.jsx(ro,{children:E.jsx(hP,{})})}),E.jsx(Hs,{path:"/service",element:E.jsx(ro,{children:E.jsx(Ict,{})})}),E.jsx(Hs,{path:"/service/customer-experience",element:E.jsx(ro,{children:E.jsx(Rnt,{})})}),E.jsx(Hs,{path:"/service/pos-staff-operations",element:E.jsx(ro,{children:E.jsx(Sst,{})})}),E.jsx(Hs,{path:"/service/kitchen-fulfillment",element:E.jsx(ro,{children:E.jsx(gat,{})})}),E.jsx(Hs,{path:"/service/inventory-warehousing",element:E.jsx(ro,{children:E.jsx(Jat,{})})}),E.jsx(Hs,{path:"/service/analytics-management",element:E.jsx(ro,{children:E.jsx(Hot,{})})}),E.jsx(Hs,{path:"/service/marketing-customization",element:E.jsx(ro,{children:E.jsx(Vlt,{})})}),E.jsx(Hs,{path:"/service/integration-scaling",element:E.jsx(ro,{children:E.jsx(Dct,{})})}),E.jsx(Hs,{path:"/about",element:E.jsx(ro,{children:E.jsx(KCe,{})})}),E.jsx(Hs,{path:"/pricing",element:E.jsx(ro,{children:E.jsx(g5e,{})})}),E.jsx(Hs,{path:"/contact",element:E.jsx(ro,{children:E.jsx(p5e,{})})}),E.jsx(Hs,{path:"*",element:E.jsx(ro,{children:E.jsx(hP,{})})})]})]},e.pathname)]})},mi=e=>typeof e=="string",nx=()=>{let e,t;const i=new Promise((r,n)=>{e=r,t=n});return i.resolve=e,i.reject=t,i},KY=e=>e==null?"":""+e,Lct=(e,t,i)=>{e.forEach(r=>{t[r]&&(i[r]=t[r])})},kct=/###/g,ZY=e=>e&&e.indexOf("###")>-1?e.replace(kct,"."):e,$Y=e=>!e||mi(e),tb=(e,t,i)=>{const r=mi(t)?t.split("."):t;let n=0;for(;n<r.length-1;){if($Y(e))return{};const s=ZY(r[n]);!e[s]&&i&&(e[s]=new i),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={},++n}return $Y(e)?{}:{obj:e,k:ZY(r[n])}},JY=(e,t,i)=>{const{obj:r,k:n}=tb(e,t,Object);if(r!==void 0||t.length===1){r[n]=i;return}let s=t[t.length-1],a=t.slice(0,t.length-1),o=tb(e,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=tb(e,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=i},zct=(e,t,i,r)=>{const{obj:n,k:s}=tb(e,t,Object);n[s]=n[s]||[],n[s].push(i)},HT=(e,t)=>{const{obj:i,k:r}=tb(e,t);if(i&&Object.prototype.hasOwnProperty.call(i,r))return i[r]},Bct=(e,t,i)=>{const r=HT(e,i);return r!==void 0?r:HT(t,i)},Iae=(e,t,i)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?mi(e[r])||e[r]instanceof String||mi(t[r])||t[r]instanceof String?i&&(e[r]=t[r]):Iae(e[r],t[r],i):e[r]=t[r]);return e},y0=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var jct={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Nct=e=>mi(e)?e.replace(/[&<>"'\/]/g,t=>jct[t]):e;class Vct{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const i=this.regExpMap.get(t);if(i!==void 0)return i;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const Uct=[" ",",","?","!",";"],Fct=new Vct(20),Hct=(e,t,i)=>{t=t||"",i=i||"";const r=Uct.filter(a=>t.indexOf(a)<0&&i.indexOf(a)<0);if(r.length===0)return!0;const n=Fct.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!n.test(e);if(!s){const a=e.indexOf(i);a>0&&!n.test(e.substring(0,a))&&(s=!0)}return s},o6=function(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(i);let n=e;for(let s=0;s<r.length;){if(!n||typeof n!="object")return;let a,o="";for(let l=s;l<r.length;++l)if(l!==s&&(o+=i),o+=r[l],a=n[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<r.length-1)continue;s+=l-s+1;break}n=a}return n},GT=e=>e==null?void 0:e.replace("_","-"),Gct={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var i,r;(r=(i=console==null?void 0:console[e])==null?void 0:i.apply)==null||r.call(i,console,t)}};class WT{constructor(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,i)}init(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=i.prefix||"i18next:",this.logger=t||Gct,this.options=i,this.debug=i.debug}log(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return this.forward(i,"log","",!0)}warn(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return this.forward(i,"warn","",!0)}error(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return this.forward(i,"error","")}deprecate(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return this.forward(i,"warn","WARNING DEPRECATED: ",!0)}forward(t,i,r,n){return n&&!this.debug?null:(mi(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[i](t))}create(t){return new WT(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new WT(this.logger,t)}}var cu=new WT;class rC{constructor(){this.observers={}}on(t,i){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const n=this.observers[r].get(i)||0;this.observers[r].set(i,n+1)}),this}off(t,i){if(this.observers[t]){if(!i){delete this.observers[t];return}this.observers[t].delete(i)}}emit(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(a=>{let[o,l]=a;for(let c=0;c<l;c++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let c=0;c<l;c++)o.apply(o,[t,...r])})}}class eQ extends rC{constructor(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=i,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const i=this.options.ns.indexOf(t);i>-1&&this.options.ns.splice(i,1)}getResource(t,i,r){var c,u;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,a=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;t.indexOf(".")>-1?o=t.split("."):(o=[t,i],r&&(Array.isArray(r)?o.push(...r):mi(r)&&s?o.push(...r.split(s)):o.push(r)));const l=HT(this.data,o);return!l&&!i&&!r&&t.indexOf(".")>-1&&(t=o[0],i=o[1],r=o.slice(2).join(".")),l||!a||!mi(r)?l:o6((u=(c=this.data)==null?void 0:c[t])==null?void 0:u[i],r,s)}addResource(t,i,r,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[t,i];r&&(o=o.concat(a?r.split(a):r)),t.indexOf(".")>-1&&(o=t.split("."),n=i,i=o[1]),this.addNamespaces(i),JY(this.data,o,n),s.silent||this.emit("added",t,i,r,n)}addResources(t,i,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(mi(r[s])||Array.isArray(r[s]))&&this.addResource(t,i,s,r[s],{silent:!0});n.silent||this.emit("added",t,i,r)}addResourceBundle(t,i,r,n,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[t,i];t.indexOf(".")>-1&&(o=t.split("."),n=r,r=i,i=o[1]),this.addNamespaces(i);let l=HT(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),n?Iae(l,r,s):l={...l,...r},JY(this.data,o,l),a.silent||this.emit("added",t,i,r)}removeResourceBundle(t,i){this.hasResourceBundle(t,i)&&delete this.data[t][i],this.removeNamespaces(i),this.emit("removed",t,i)}hasResourceBundle(t,i){return this.getResource(t,i)!==void 0}getResourceBundle(t,i){return i||(i=this.options.defaultNS),this.getResource(t,i)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const i=this.getDataByLanguage(t);return!!(i&&Object.keys(i)||[]).find(n=>i[n]&&Object.keys(i[n]).length>0)}toJSON(){return this.data}}var Rae={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,i,r,n){return e.forEach(s=>{var a;t=((a=this.processors[s])==null?void 0:a.process(t,i,r,n))??t}),t}};const tQ={},iQ=e=>!mi(e)&&typeof e!="boolean"&&typeof e!="number";class qT extends rC{constructor(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Lct(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=i,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=cu.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const r=this.resolve(t,i);return(r==null?void 0:r.res)!==void 0}extractFromKey(t,i){let r=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const n=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let s=i.ns||this.options.defaultNS||[];const a=r&&t.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!i.keySeparator&&!this.options.userDefinedNsSeparator&&!i.nsSeparator&&!Hct(t,r,n);if(a&&!o){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:mi(s)?[s]:s};const c=t.split(r);(r!==n||r===n&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),t=c.join(n)}return{key:t,namespaces:mi(s)?[s]:s}}translate(t,i,r){if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const n=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(t[t.length-1],i),l=o[o.length-1],c=i.lng||this.language,u=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((c==null?void 0:c.toLowerCase())==="cimode"){if(u){const L=i.nsSeparator||this.options.nsSeparator;return n?{res:`${l}${L}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:`${l}${L}${a}`}return n?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:a}const h=this.resolve(t,i);let f=h==null?void 0:h.res;const m=(h==null?void 0:h.usedKey)||a,g=(h==null?void 0:h.exactUsedKey)||a,v=["[object Number]","[object Function]","[object RegExp]"],x=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,S=i.count!==void 0&&!mi(i.count),_=qT.hasDefaultValue(i),A=S?this.pluralResolver.getSuffix(c,i.count,i):"",M=i.ordinal&&S?this.pluralResolver.getSuffix(c,i.count,{ordinal:!1}):"",C=S&&!i.ordinal&&i.count===0,D=C&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${A}`]||i[`defaultValue${M}`]||i.defaultValue;let T=f;b&&!f&&_&&(T=D);const R=iQ(T),O=Object.prototype.toString.apply(T);if(b&&T&&R&&v.indexOf(O)<0&&!(mi(x)&&Array.isArray(T))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const L=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,T,{...i,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return n?(h.res=L,h.usedParams=this.getUsedParamsDetails(i),h):L}if(s){const L=Array.isArray(T),k=L?[]:{},B=L?g:m;for(const V in T)if(Object.prototype.hasOwnProperty.call(T,V)){const $=`${B}${s}${V}`;_&&!f?k[V]=this.translate($,{...i,defaultValue:iQ(D)?D[V]:void 0,joinArrays:!1,ns:o}):k[V]=this.translate($,{...i,joinArrays:!1,ns:o}),k[V]===$&&(k[V]=T[V])}f=k}}else if(b&&mi(x)&&Array.isArray(f))f=f.join(x),f&&(f=this.extendTranslation(f,t,i,r));else{let L=!1,k=!1;!this.isValidLookup(f)&&_&&(L=!0,f=D),this.isValidLookup(f)||(k=!0,f=a);const V=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&k?void 0:f,$=_&&D!==f&&this.options.updateMissing;if(k||L||$){if(this.logger.log($?"updateKey":"missingKey",c,l,a,$?D:f),s){const ne=this.resolve(a,{...i,keySeparator:!1});ne&&ne.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[];const Y=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Y&&Y[0])for(let ne=0;ne<Y.length;ne++)q.push(Y[ne]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(i.lng||this.language):q.push(i.lng||this.language);const X=(ne,F,K)=>{var oe;const re=_&&K!==f?K:V;this.options.missingKeyHandler?this.options.missingKeyHandler(ne,l,F,re,$,i):(oe=this.backendConnector)!=null&&oe.saveMissing&&this.backendConnector.saveMissing(ne,l,F,re,$,i),this.emit("missingKey",ne,l,F,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?q.forEach(ne=>{const F=this.pluralResolver.getSuffixes(ne,i);C&&i[`defaultValue${this.options.pluralSeparator}zero`]&&F.indexOf(`${this.options.pluralSeparator}zero`)<0&&F.push(`${this.options.pluralSeparator}zero`),F.forEach(K=>{X([ne],a+K,i[`defaultValue${K}`]||D)})}):X(q,a,D))}f=this.extendTranslation(f,t,i,h,r),k&&f===a&&this.options.appendNamespaceToMissingKey&&(f=`${l}:${a}`),(k||L)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,L?f:void 0))}return n?(h.res=f,h.usedParams=this.getUsedParamsDetails(i),h):f}extendTranslation(t,i,r,n,s){var c,u;var a=this;if((c=this.i18nFormat)!=null&&c.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const h=mi(t)&&(((u=r==null?void 0:r.interpolation)==null?void 0:u.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(h){const g=t.match(this.interpolator.nestingRegexp);f=g&&g.length}let m=r.replace&&!mi(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),t=this.interpolator.interpolate(t,m,r.lng||this.language||n.usedLng,r),h){const g=t.match(this.interpolator.nestingRegexp),v=g&&g.length;f<v&&(r.nest=!1)}!r.lng&&n&&n.res&&(r.lng=this.language||n.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var g=arguments.length,v=new Array(g),x=0;x<g;x++)v[x]=arguments[x];return(s==null?void 0:s[0])===v[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${i[0]}`),null):a.translate(...v,i)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,l=mi(o)?[o]:o;return t!=null&&(l!=null&&l.length)&&r.applyPostProcessor!==!1&&(t=Rae.handle(l,t,i,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,n,s,a,o;return mi(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,i),u=c.key;n=u;let h=c.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=i.count!==void 0&&!mi(i.count),m=f&&!i.ordinal&&i.count===0,g=i.context!==void 0&&(mi(i.context)||typeof i.context=="number")&&i.context!=="",v=i.lngs?i.lngs:this.languageUtils.toResolveHierarchy(i.lng||this.language,i.fallbackLng);h.forEach(x=>{var b,S;this.isValidLookup(r)||(o=x,!tQ[`${v[0]}-${x}`]&&((b=this.utils)!=null&&b.hasLoadedNamespace)&&!((S=this.utils)!=null&&S.hasLoadedNamespace(o))&&(tQ[`${v[0]}-${x}`]=!0,this.logger.warn(`key "${n}" for languages "${v.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(_=>{var C;if(this.isValidLookup(r))return;a=_;const A=[u];if((C=this.i18nFormat)!=null&&C.addLookupKeys)this.i18nFormat.addLookupKeys(A,u,_,x,i);else{let D;f&&(D=this.pluralResolver.getSuffix(_,i.count,i));const T=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(A.push(u+D),i.ordinal&&D.indexOf(R)===0&&A.push(u+D.replace(R,this.options.pluralSeparator)),m&&A.push(u+T)),g){const O=`${u}${this.options.contextSeparator}${i.context}`;A.push(O),f&&(A.push(O+D),i.ordinal&&D.indexOf(R)===0&&A.push(O+D.replace(R,this.options.pluralSeparator)),m&&A.push(O+T))}}let M;for(;M=A.pop();)this.isValidLookup(r)||(s=M,r=this.getResource(_,x,M,i))}))})}),{res:r,usedKey:n,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,i,r){var s;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(t,i,r,n):this.resourceStore.getResource(t,i,r,n)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!mi(t.replace);let n=r?t.replace:t;if(r&&typeof t.count<"u"&&(n.count=t.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!r){n={...n};for(const s of i)delete n[s]}return n}static hasDefaultValue(t){const i="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&i===r.substring(0,i.length)&&t[r]!==void 0)return!0;return!1}}class rQ{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=cu.create("languageUtils")}getScriptPartFromCode(t){if(t=GT(t),!t||t.indexOf("-")<0)return null;const i=t.split("-");return i.length===2||(i.pop(),i[i.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(i.join("-"))}getLanguagePartFromCode(t){if(t=GT(t),!t||t.indexOf("-")<0)return t;const i=t.split("-");return this.formatLanguageCode(i[0])}formatLanguageCode(t){if(mi(t)&&t.indexOf("-")>-1){let i;try{i=Intl.getCanonicalLocales(t)[0]}catch{}return i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let i;return t.forEach(r=>{if(i)return;const n=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(n))&&(i=n)}),!i&&this.options.supportedLngs&&t.forEach(r=>{if(i)return;const n=this.getLanguagePartFromCode(r);if(this.isSupportedCode(n))return i=n;i=this.options.supportedLngs.find(s=>{if(s===n)return s;if(!(s.indexOf("-")<0&&n.indexOf("-")<0)&&(s.indexOf("-")>0&&n.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===n||s.indexOf(n)===0&&n.length>1))return s})}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}getFallbackCodes(t,i){if(!t)return[];if(typeof t=="function"&&(t=t(i)),mi(t)&&(t=[t]),Array.isArray(t))return t;if(!i)return t.default||[];let r=t[i];return r||(r=t[this.getScriptPartFromCode(i)]),r||(r=t[this.formatLanguageCode(i)]),r||(r=t[this.getLanguagePartFromCode(i)]),r||(r=t.default),r||[]}toResolveHierarchy(t,i){const r=this.getFallbackCodes(i||this.options.fallbackLng||[],t),n=[],s=a=>{a&&(this.isSupportedCode(a)?n.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return mi(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):mi(t)&&s(this.formatLanguageCode(t)),r.forEach(a=>{n.indexOf(a)<0&&s(this.formatLanguageCode(a))}),n}}const nQ={zero:0,one:1,two:2,few:3,many:4,other:5},sQ={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Wct{constructor(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=i,this.logger=cu.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,i){this.rules[t]=i}clearCache(){this.pluralRulesCache={}}getRule(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=GT(t==="dev"?"en":t),n=i.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:n});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),sQ;if(!t.match(/-|_/))return sQ;const l=this.languageUtils.getLanguagePartFromCode(t);a=this.getRule(l,i)}return this.pluralRulesCache[s]=a,a}needsPlural(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,i);return r||(r=this.getRule("dev",i)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(n=>`${i}${n}`)}getSuffixes(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,i);return r||(r=this.getRule("dev",i)),r?r.resolvedOptions().pluralCategories.sort((n,s)=>nQ[n]-nQ[s]).map(n=>`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(t,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=this.getRule(t,r);return n?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${n.select(i)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",i,r))}}const aQ=function(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=Bct(e,t,i);return!s&&n&&mi(i)&&(s=o6(e,i,r),s===void 0&&(s=o6(t,i,r))),s},UD=e=>e.replace(/\$/g,"$$$$");class qct{constructor(){var i;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=cu.create("interpolator"),this.options=t,this.format=((i=t==null?void 0:t.interpolation)==null?void 0:i.format)||(r=>r),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:i,escapeValue:r,useRawValueToEscape:n,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:c,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:m,nestingSuffix:g,nestingSuffixEscaped:v,nestingOptionsSeparator:x,maxReplaces:b,alwaysFormat:S}=t.interpolation;this.escape=i!==void 0?i:Nct,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=s?y0(s):a||"{{",this.suffix=o?y0(o):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=f?y0(f):m||y0("$t("),this.nestingSuffix=g?y0(g):v||y0(")"),this.nestingOptionsSeparator=x||",",this.maxReplaces=b||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(i,r)=>(i==null?void 0:i.source)===r?(i.lastIndex=0,i):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,i,r,n){var m;let s,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=g=>{if(g.indexOf(this.formatSeparator)<0){const S=aQ(i,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,r,{...n,...i,interpolationkey:g}):S}const v=g.split(this.formatSeparator),x=v.shift().trim(),b=v.join(this.formatSeparator).trim();return this.format(aQ(i,l,x,this.options.keySeparator,this.options.ignoreJSONStructure),b,r,{...n,...i,interpolationkey:x})};this.resetRegExp();const u=(n==null?void 0:n.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((m=n==null?void 0:n.interpolation)==null?void 0:m.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>UD(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?UD(this.escape(g)):UD(g)}].forEach(g=>{for(o=0;s=g.regex.exec(t);){const v=s[1].trim();if(a=c(v),a===void 0)if(typeof u=="function"){const b=u(t,s,n);a=mi(b)?b:""}else if(n&&Object.prototype.hasOwnProperty.call(n,v))a="";else if(h){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${t}`),a="";else!mi(a)&&!this.useRawValueToEscape&&(a=KY(a));const x=g.safeValue(a);if(t=t.replace(s[0],x),h?(g.regex.lastIndex+=a.length,g.regex.lastIndex-=s[0].length):g.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),t}nest(t,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,s,a;const o=(l,c)=>{const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const h=l.split(new RegExp(`${u}[ ]*{`));let f=`{${h[1]}`;l=h[0],f=this.interpolate(f,a);const m=f.match(/'/g),g=f.match(/"/g);(((m==null?void 0:m.length)??0)%2===0&&!g||g.length%2!==0)&&(f=f.replace(/'/g,'"'));try{a=JSON.parse(f),c&&(a={...c,...a})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,v),`${l}${u}${f}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;n=this.nestingRegexp.exec(t);){let l=[];a={...r},a=a.replace&&!mi(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let c=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){const u=n[1].split(this.formatSeparator).map(h=>h.trim());n[1]=u.shift(),l=u,c=!0}if(s=i(o.call(this,n[1].trim(),a),a),s&&n[0]===t&&!mi(s))return s;mi(s)||(s=KY(s)),s||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${t}`),s=""),c&&(s=l.reduce((u,h)=>this.format(u,h,r.lng,{...r,interpolationkey:n[1].trim()}),s.trim())),t=t.replace(n[0],s),this.regexp.lastIndex=0}return t}}const Xct=e=>{let t=e.toLowerCase().trim();const i={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const n=r[1].substring(0,r[1].length-1);t==="currency"&&n.indexOf(":")<0?i.currency||(i.currency=n.trim()):t==="relativetime"&&n.indexOf(":")<0?i.range||(i.range=n.trim()):n.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),u=o.trim();i[u]||(i[u]=c),c==="false"&&(i[u]=!1),c==="true"&&(i[u]=!0),isNaN(c)||(i[u]=parseInt(c,10))}})}return{formatName:t,formatOptions:i}},x0=e=>{const t={};return(i,r,n)=>{let s=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(s={...s,[n.interpolationkey]:void 0});const a=r+JSON.stringify(s);let o=t[a];return o||(o=e(GT(r),n),t[a]=o),o(i)}};class Yct{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=cu.create("formatter"),this.options=t,this.formats={number:x0((i,r)=>{const n=new Intl.NumberFormat(i,{...r});return s=>n.format(s)}),currency:x0((i,r)=>{const n=new Intl.NumberFormat(i,{...r,style:"currency"});return s=>n.format(s)}),datetime:x0((i,r)=>{const n=new Intl.DateTimeFormat(i,{...r});return s=>n.format(s)}),relativetime:x0((i,r)=>{const n=new Intl.RelativeTimeFormat(i,{...r});return s=>n.format(s,r.range||"day")}),list:x0((i,r)=>{const n=new Intl.ListFormat(i,{...r});return s=>n.format(s)})},this.init(t)}init(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=i.interpolation.formatSeparator||","}add(t,i){this.formats[t.toLowerCase().trim()]=i}addCached(t,i){this.formats[t.toLowerCase().trim()]=x0(i)}format(t,i,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,l)=>{var h;const{formatName:c,formatOptions:u}=Xct(l);if(this.formats[c]){let f=o;try{const m=((h=n==null?void 0:n.formatParams)==null?void 0:h[n.interpolationkey])||{},g=m.locale||m.lng||n.locale||n.lng||r;f=this.formats[c](o,g,{...u,...n,...m})}catch(m){this.logger.warn(m)}return f}else this.logger.warn(`there was no format function for ${c}`);return o},t)}}const Qct=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class Kct extends rC{constructor(t,i,r){var s,a;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=i,this.services=r,this.languageUtils=r.languageUtils,this.options=n,this.logger=cu.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],(a=(s=this.backend)==null?void 0:s.init)==null||a.call(s,r,n.backend,n)}queueLoad(t,i,r,n){const s={},a={},o={},l={};return t.forEach(c=>{let u=!0;i.forEach(h=>{const f=`${c}|${h}`;!r.reload&&this.store.hasResourceBundle(c,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?a[f]===void 0&&(a[f]=!0):(this.state[f]=1,u=!1,a[f]===void 0&&(a[f]=!0),s[f]===void 0&&(s[f]=!0),l[h]===void 0&&(l[h]=!0)))}),u||(o[c]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(t,i,r){const n=t.split("|"),s=n[0],a=n[1];i&&this.emit("failedLoading",s,a,i),!i&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[t]=i?-1:2,i&&r&&(this.state[t]=0);const o={};this.queue.forEach(l=>{zct(l.loaded,[s],a),Qct(l,t),i&&l.errors.push(i),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{o[c]||(o[c]={});const u=l.loaded[c];u.length&&u.forEach(h=>{o[c][h]===void 0&&(o[c][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(t,i,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!t.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:i,fcName:r,tried:n,wait:s,callback:a});return}this.readingCalls++;const o=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(c&&u&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,t,i,r,n+1,s*2,a)},s);return}a(c,u)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(t,i);c&&typeof c.then=="function"?c.then(u=>o(null,u)).catch(o):o(null,c)}catch(c){o(c)}return}return l(t,i,o)}prepareLoading(t,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();mi(t)&&(t=this.languageUtils.toResolveHierarchy(t)),mi(i)&&(i=[i]);const s=this.queueLoad(t,i,r,n);if(!s.toLoad.length)return s.pending.length||n(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(t,i,r){this.prepareLoading(t,i,{},r)}reload(t,i,r){this.prepareLoading(t,i,{reload:!0},r)}loadOne(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),n=r[0],s=r[1];this.read(n,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${i}loading namespace ${s} for language ${n} failed`,a),!a&&o&&this.logger.log(`${i}loaded namespace ${s} for language ${n}`,o),this.loaded(t,a,o)})}saveMissing(t,i,r,n,s){var l,c,u,h,f;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((c=(l=this.services)==null?void 0:l.utils)!=null&&c.hasLoadedNamespace&&!((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace(i))){this.logger.warn(`did not save key "${r}" as the namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((f=this.backend)!=null&&f.create){const m={...a,isUpdate:s},g=this.backend.create.bind(this.backend);if(g.length<6)try{let v;g.length===5?v=g(t,i,r,n,m):v=g(t,i,r,n),v&&typeof v.then=="function"?v.then(x=>o(null,x)).catch(o):o(null,v)}catch(v){o(v)}else g(t,i,r,n,o,m)}!t||!t[0]||this.store.addResource(t[0],i,r,n)}}}const oQ=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),mi(e[1])&&(t.defaultValue=e[1]),mi(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const i=e[3]||e[2];Object.keys(i).forEach(r=>{t[r]=i[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),lQ=e=>{var t,i;return mi(e.ns)&&(e.ns=[e.ns]),mi(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),mi(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((i=(t=e.supportedLngs)==null?void 0:t.indexOf)==null?void 0:i.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},cE=()=>{},Zct=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(i=>{typeof e[i]=="function"&&(e[i]=e[i].bind(e))})};class Jb extends rC{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(super(),this.options=lQ(t),this.services={},this.logger=cu,this.modules={external:[]},Zct(this),i&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,i),this;setTimeout(()=>{this.init(t,i)},0)}}init(){var t=this;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof i=="function"&&(r=i,i={}),i.defaultNS==null&&i.ns&&(mi(i.ns)?i.defaultNS=i.ns:i.ns.indexOf("translation")<0&&(i.defaultNS=i.ns[0]));const n=oQ();this.options={...n,...this.options,...lQ(i)},this.options.interpolation={...n.interpolation,...this.options.interpolation},i.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=i.keySeparator),i.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=i.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?cu.init(s(this.modules.logger),this.options):cu.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Yct;const h=new rQ(this.options);this.store=new eQ(this.options.resources,this.options);const f=this.services;f.logger=cu,f.resourceStore=this.store,f.languageUtils=h,f.pluralResolver=new Wct(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(f.formatter=s(u),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new qct(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Kct(s(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(m){for(var g=arguments.length,v=new Array(g>1?g-1:0),x=1;x<g;x++)v[x-1]=arguments[x];t.emit(m,...v)}),this.modules.languageDetector&&(f.languageDetector=s(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=s(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new qT(this.services,this.options),this.translator.on("*",function(m){for(var g=arguments.length,v=new Array(g>1?g-1:0),x=1;x<g;x++)v[x-1]=arguments[x];t.emit(m,...v)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,r||(r=cE),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return t.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return t.store[u](...arguments),t}});const l=nx(),c=()=>{const u=(h,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),r(h,f)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(t){var s,a;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cE;const n=mi(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if((n==null?void 0:n.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};n?l(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>l(u)),(a=(s=this.options.preload)==null?void 0:s.forEach)==null||a.call(s,c=>l(c)),this.services.backendConnector.load(o,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(c)})}else r(null)}reloadResources(t,i,r){const n=nx();return typeof t=="function"&&(r=t,t=void 0),typeof i=="function"&&(r=i,i=void 0),t||(t=this.languages),i||(i=this.options.ns),r||(r=cE),this.services.backendConnector.reload(t,i,s=>{n.resolve(),r(s)}),n}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Rae.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let i=0;i<this.languages.length;i++){const r=this.languages[i];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,i){var r=this;this.isLanguageChangingTo=t;const n=nx();this.emit("languageChanging",t);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,n.resolve(function(){return r.t(...arguments)}),i&&i(l,function(){return r.t(...arguments)})},o=l=>{var u,h;!t&&!l&&this.services.languageDetector&&(l=[]);const c=mi(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),(h=(u=this.services.languageDetector)==null?void 0:u.cacheUserLanguage)==null||h.call(u,c)),this.loadResources(c,f=>{a(f,c)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),n}getFixedT(t,i,r){var n=this;const s=function(a,o){let l;if(typeof o!="object"){for(var c=arguments.length,u=new Array(c>2?c-2:0),h=2;h<c;h++)u[h-2]=arguments[h];l=n.options.overloadTranslationOptionHandler([a,o].concat(u))}else l={...o};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const f=n.options.keySeparator||".";let m;return l.keyPrefix&&Array.isArray(a)?m=a.map(g=>`${l.keyPrefix}${f}${g}`):m=l.keyPrefix?`${l.keyPrefix}${f}${a}`:a,n.t(m,l)};return mi(t)?s.lng=t:s.lngs=t,s.ns=i,s.keyPrefix=r,s}t(){var n;for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(n=this.translator)==null?void 0:n.translate(...i)}exists(){var n;for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(n=this.translator)==null?void 0:n.exists(...i)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=i.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const c=this.services.backendConnector.state[`${o}|${l}`];return c===-1||c===0||c===2};if(i.precheck){const o=i.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,t)&&(!n||a(s,t)))}loadNamespaces(t,i){const r=nx();return this.options.ns?(mi(t)&&(t=[t]),t.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{r.resolve(),i&&i(n)}),r):(i&&i(),Promise.resolve())}loadLanguages(t,i){const r=nx();mi(t)&&(t=[t]);const n=this.options.preload||[],s=t.filter(a=>n.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=n.concat(s),this.loadResources(a=>{r.resolve(),i&&i(a)}),r):(i&&i(),Promise.resolve())}dir(t){var n,s;if(t||(t=this.resolvedLanguage||(((n=this.languages)==null?void 0:n.length)>0?this.languages[0]:this.language)),!t)return"rtl";const i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new rQ(oQ());return i.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return new Jb(t,i)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cE;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const n={...this.options,...t,isClone:!0},s=new Jb(n);if((t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const o=Object.keys(this.store.data).reduce((l,c)=>(l[c]={...this.store.data[c]},Object.keys(l[c]).reduce((u,h)=>(u[h]={...l[c][h]},u),{})),{});s.store=new eQ(o,n),s.services.resourceStore=s.store}return s.translator=new qT(s.services,n),s.translator.on("*",function(o){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];s.emit(o,...c)}),s.init(n,i),s.translator.options=n,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ma=Jb.createInstance();Ma.createInstance=Jb.createInstance;Ma.createInstance;Ma.dir;Ma.init;Ma.loadResources;Ma.reloadResources;Ma.use;Ma.changeLanguage;Ma.getFixedT;Ma.t;Ma.exists;Ma.setDefaultNamespace;Ma.hasLoadedNamespace;Ma.loadNamespaces;Ma.loadLanguages;function l6(e){"@babel/helpers - typeof";return l6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l6(e)}function Oae(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":l6(XMLHttpRequest))==="object"}function $ct(e){return!!e&&typeof e.then=="function"}function Jct(e){return $ct(e)?e:Promise.resolve(e)}function cQ(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function uQ(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?cQ(Object(i),!0).forEach(function(r){eut(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):cQ(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function eut(e,t,i){return(t=tut(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function tut(e){var t=iut(e,"string");return zm(t)=="symbol"?t:t+""}function iut(e,t){if(zm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t);if(zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}var Vf=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?Vf=global.fetch:typeof window<"u"&&window.fetch&&(Vf=window.fetch);var ew;Oae()&&(typeof global<"u"&&global.XMLHttpRequest?ew=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(ew=window.XMLHttpRequest));var XT;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?XT=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(XT=window.ActiveXObject));typeof Vf!="function"&&(Vf=void 0);if(!Vf&&!ew&&!XT)try{gc(()=>import("./browser-ponyfill-DL8Ofk1F.js").then(e=>e.b),[]).then(function(e){Vf=e.default}).catch(function(){})}catch{}var c6=function(t,i){if(i&&zm(i)==="object"){var r="";for(var n in i)r+="&"+encodeURIComponent(n)+"="+encodeURIComponent(i[n]);if(!r)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+r.slice(1)}return t},hQ=function(t,i,r,n){var s=function(l){if(!l.ok)return r(l.statusText||"Error",{status:l.status});l.text().then(function(c){r(null,{status:l.status,data:c})}).catch(r)};if(n){var a=n(t,i);if(a instanceof Promise){a.then(s).catch(r);return}}typeof fetch=="function"?fetch(t,i).then(s).catch(r):Vf(t,i).then(s).catch(r)},dQ=!1,rut=function(t,i,r,n){t.queryStringParams&&(i=c6(i,t.queryStringParams));var s=uQ({},typeof t.customHeaders=="function"?t.customHeaders():t.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(s["Content-Type"]="application/json");var a=typeof t.requestOptions=="function"?t.requestOptions(r):t.requestOptions,o=uQ({method:r?"POST":"GET",body:r?t.stringify(r):void 0,headers:s},dQ?{}:a),l=typeof t.alternateFetch=="function"&&t.alternateFetch.length>=1?t.alternateFetch:void 0;try{hQ(i,o,n,l)}catch(c){if(!a||Object.keys(a).length===0||!c.message||c.message.indexOf("not implemented")<0)return n(c);try{Object.keys(a).forEach(function(u){delete o[u]}),hQ(i,o,n,l),dQ=!0}catch(u){n(u)}}},nut=function(t,i,r,n){r&&zm(r)==="object"&&(r=c6("",r).slice(1)),t.queryStringParams&&(i=c6(i,t.queryStringParams));try{var s=ew?new ew:new XT("MSXML2.XMLHTTP.3.0");s.open(r?"POST":"GET",i,1),t.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!t.withCredentials,r&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var a=t.customHeaders;if(a=typeof a=="function"?a():a,a)for(var o in a)s.setRequestHeader(o,a[o]);s.onreadystatechange=function(){s.readyState>3&&n(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(r)}catch(l){console&&console.log(l)}},sut=function(t,i,r,n){if(typeof r=="function"&&(n=r,r=void 0),n=n||function(){},Vf&&i.indexOf("file:")!==0)return rut(t,i,r,n);if(Oae()||typeof ActiveXObject=="function")return nut(t,i,r,n);n(new Error("No fetch and no xhr implementation found!"))};function Uv(e){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uv(e)}function fQ(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function FD(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?fQ(Object(i),!0).forEach(function(r){Lae(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):fQ(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function aut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function out(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kae(r.key),r)}}function lut(e,t,i){return t&&out(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lae(e,t,i){return(t=kae(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function kae(e){var t=cut(e,"string");return Uv(t)=="symbol"?t:t+""}function cut(e,t){if(Uv(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t);if(Uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var uut=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(i){return JSON.parse(i)},stringify:JSON.stringify,parsePayload:function(i,r,n){return Lae({},r,n||"")},parseLoadPayload:function(i,r){},request:sut,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},zae=function(){function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};aut(this,e),this.services=t,this.options=i,this.allOptions=r,this.type="backend",this.init(t,i,r)}return lut(e,[{key:"init",value:function(i){var r=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=i,this.options=FD(FD(FD({},uut()),this.options||{}),n),this.allOptions=s,this.services&&this.options.reloadInterval){var a=setInterval(function(){return r.reload()},this.options.reloadInterval);Uv(a)==="object"&&typeof a.unref=="function"&&a.unref()}}},{key:"readMulti",value:function(i,r,n){this._readAny(i,i,r,r,n)}},{key:"read",value:function(i,r,n){this._readAny([i],i,[r],r,n)}},{key:"_readAny",value:function(i,r,n,s,a){var o=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(i,n)),l=Jct(l),l.then(function(c){if(!c)return a(null,{});var u=o.services.interpolator.interpolate(c,{lng:i.join("+"),ns:n.join("+")});o.loadUrl(u,a,r,s)})}},{key:"loadUrl",value:function(i,r,n,s){var a=this,o=typeof n=="string"?[n]:n,l=typeof s=="string"?[s]:s,c=this.options.parseLoadPayload(o,l);this.options.request(this.options,i,c,function(u,h){if(h&&(h.status>=500&&h.status<600||!h.status))return r("failed loading "+i+"; status code: "+h.status,!0);if(h&&h.status>=400&&h.status<500)return r("failed loading "+i+"; status code: "+h.status,!1);if(!h&&u&&u.message){var f=u.message.toLowerCase(),m=["failed","fetch","network","load"].find(function(x){return f.indexOf(x)>-1});if(m)return r("failed loading "+i+": "+u.message,!0)}if(u)return r(u,!1);var g,v;try{typeof h.data=="string"?g=a.options.parse(h.data,n,s):g=h.data}catch{v="failed parsing "+i+" to json"}if(v)return r(v,!1);r(null,g)})}},{key:"create",value:function(i,r,n,s,a){var o=this;if(this.options.addPath){typeof i=="string"&&(i=[i]);var l=this.options.parsePayload(r,n,s),c=0,u=[],h=[];i.forEach(function(f){var m=o.options.addPath;typeof o.options.addPath=="function"&&(m=o.options.addPath(f,r));var g=o.services.interpolator.interpolate(m,{lng:f,ns:r});o.options.request(o.options,g,l,function(v,x){c+=1,u.push(v),h.push(x),c===i.length&&typeof a=="function"&&a(u,h)})})}}},{key:"reload",value:function(){var i=this,r=this.services,n=r.backendConnector,s=r.languageUtils,a=r.logger,o=n.language;if(!(o&&o.toLowerCase()==="cimode")){var l=[],c=function(h){var f=s.toResolveHierarchy(h);f.forEach(function(m){l.indexOf(m)<0&&l.push(m)})};c(o),this.allOptions.preload&&this.allOptions.preload.forEach(function(u){return c(u)}),l.forEach(function(u){i.allOptions.ns.forEach(function(h){n.read(u,h,"read",null,null,function(f,m){f&&a.warn("loading namespace ".concat(h," for language ").concat(u," failed"),f),!f&&m&&a.log("loaded namespace ".concat(h," for language ").concat(u),m),n.loaded("".concat(u,"|").concat(h),f,m)})})})}}}])}();zae.type="backend";const{slice:hut,forEach:dut}=[];function fut(e){return dut.call(hut.call(arguments,1),t=>{if(t)for(const i in t)e[i]===void 0&&(e[i]=t[i])}),e}function put(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(i=>i.test(e))}const pQ=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,mut=function(e,t){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},n=encodeURIComponent(t);let s=`${e}=${n}`;if(r.maxAge>0){const a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(a)}`}if(r.domain){if(!pQ.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!pQ.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(s+="; Partitioned"),s},mQ={create(e,t,i,r){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(n.expires=new Date,n.expires.setTime(n.expires.getTime()+i*60*1e3)),r&&(n.domain=r),document.cookie=mut(e,t,n)},read(e){const t=`${e}=`,i=document.cookie.split(";");for(let r=0;r<i.length;r++){let n=i[r];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(t)===0)return n.substring(t.length,n.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var gut={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return mQ.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:i,cookieMinutes:r,cookieDomain:n,cookieOptions:s}=t;i&&typeof document<"u"&&mQ.create(i,e,r,n,s)}},vut={name:"querystring",lookup(e){var r;let{lookupQuerystring:t}=e,i;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const a=n.substring(1).split("&");for(let o=0;o<a.length;o++){const l=a[o].indexOf("=");l>0&&a[o].substring(0,l)===t&&(i=a[o].substring(l+1))}}return i}},yut={name:"hash",lookup(e){var n;let{lookupHash:t,lookupFromHashIndex:i}=e,r;if(typeof window<"u"){const{hash:s}=window.location;if(s&&s.length>2){const a=s.substring(1);if(t){const o=a.split("&");for(let l=0;l<o.length;l++){const c=o[l].indexOf("=");c>0&&o[l].substring(0,c)===t&&(r=o[l].substring(c+1))}}if(r)return r;if(!r&&i>-1){const o=s.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?(n=o[typeof i=="number"?i:0])==null?void 0:n.replace("/",""):void 0}}}return r}};let b0=null;const gQ=()=>{if(b0!==null)return b0;try{if(b0=typeof window<"u"&&window.localStorage!==null,!b0)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{b0=!1}return b0};var xut={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&gQ())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:i}=t;i&&gQ()&&window.localStorage.setItem(i,e)}};let w0=null;const vQ=()=>{if(w0!==null)return w0;try{if(w0=typeof window<"u"&&window.sessionStorage!==null,!w0)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{w0=!1}return w0};var but={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&vQ())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:i}=t;i&&vQ()&&window.sessionStorage.setItem(i,e)}},wut={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:i,userLanguage:r,language:n}=navigator;if(i)for(let s=0;s<i.length;s++)t.push(i[s]);r&&t.push(r),n&&t.push(n)}return t.length>0?t:void 0}},Sut={name:"htmlTag",lookup(e){let{htmlTag:t}=e,i;const r=t||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(i=r.getAttribute("lang")),i}},_ut={name:"path",lookup(e){var n;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(i)?(n=i[typeof t=="number"?t:0])==null?void 0:n.replace("/",""):void 0}},Eut={name:"subdomain",lookup(e){var n,s;let{lookupFromSubdomainIndex:t}=e;const i=typeof t=="number"?t+1:1,r=typeof window<"u"&&((s=(n=window.location)==null?void 0:n.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[i]}};let Bae=!1;try{document.cookie,Bae=!0}catch{}const jae=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Bae||jae.splice(1,1);const Aut=()=>({order:jae,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class Nae{constructor(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,i)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=fut(i,this.options||{},Aut()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=n=>n.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(gut),this.addDetector(vut),this.addDetector(xut),this.addDetector(but),this.addDetector(wut),this.addDetector(Sut),this.addDetector(_ut),this.addDetector(Eut),this.addDetector(yut)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,i=[];return t.forEach(r=>{if(this.detectors[r]){let n=this.detectors[r].lookup(this.options);n&&typeof n=="string"&&(n=[n]),n&&(i=i.concat(n))}}),i=i.filter(r=>r!=null&&!put(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}cacheUserLanguage(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||i.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(t,this.options)}))}}Nae.type="languageDetector";Ma.use(zae).use(Nae).use(A0e).init({supportedLngs:["en","ru","es","uk"],fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},backend:{loadPath:"/locales/{{lng}}/translation.json"},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});const Tut=J.createContext(void 0),Cut=({children:e})=>{const{i18n:t}=jt(),i=r=>{t.changeLanguage(r).then(()=>{window.location.reload()})};return E.jsx(Tut.Provider,{value:{language:t.language,setLanguage:i},children:e})};ble.createRoot(document.getElementById("root")).render(E.jsxs(Bi.StrictMode,{children:[E.jsx(Vue,{styles:Yue}),E.jsx(Nce,{basename:"/",children:E.jsx(Cut,{children:E.jsx(Oct,{})})})]}));export{Jd as c,Fv as g};
